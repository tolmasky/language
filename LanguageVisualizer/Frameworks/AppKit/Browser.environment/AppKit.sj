@STATIC;1.0;p;15;_CPCornerView.jt;1950;@STATIC;1.0;i;8;CPView.jt;1919;
objj_executeFile("CPView.j",YES);
var _1=objj_allocateClassPair(CPView,"_CPCornerView"),_2=_1.isa;
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("drawRect:"),function(_3,_4,_5){
with(_3){
var _6=objj_msgSend(objj_msgSend(CPGraphicsContext,"currentContext"),"graphicsPort"),_7=objj_msgSend(_3,"currentValueForThemeAttribute:","divider-color");
CGContextSetLineWidth(_6,1);
CGContextSetStrokeColor(_6,objj_msgSend(_3,"currentValueForThemeAttribute:","divider-color"));
CGContextMoveToPoint(_6,(_5.origin.x)+0.5,ROUND((_5.origin.y)));
CGContextAddLineToPoint(_6,(_5.origin.x)+0.5,ROUND((_5.origin.y+_5.size.height)));
CGContextClosePath(_6);
CGContextStrokePath(_6);
}
}),new objj_method(sel_getUid("layoutSubviews"),function(_8,_9){
with(_8){
objj_msgSend(_8,"setBackgroundColor:",objj_msgSend(_8,"currentValueForThemeAttribute:","background-color"));
}
}),new objj_method(sel_getUid("_init"),function(_a,_b){
with(_a){
objj_msgSend(_a,"setBackgroundColor:",objj_msgSend(_a,"currentValueForThemeAttribute:","background-color"));
}
}),new objj_method(sel_getUid("initWithFrame:"),function(_c,_d,_e){
with(_c){
_c=objj_msgSendSuper({receiver:_c,super_class:objj_getClass("_CPCornerView").super_class},"initWithFrame:",_e);
if(_c){
objj_msgSend(_c,"_init");
}
return _c;
}
}),new objj_method(sel_getUid("initWithCoder:"),function(_f,_10,_11){
with(_f){
_f=objj_msgSendSuper({receiver:_f,super_class:objj_getClass("_CPCornerView").super_class},"initWithCoder:",_11);
if(_f){
objj_msgSend(_f,"_init");
}
return _f;
}
})]);
class_addMethods(_2,[new objj_method(sel_getUid("defaultThemeClass"),function(_12,_13){
with(_12){
return "cornerview";
}
}),new objj_method(sel_getUid("themeAttributes"),function(_14,_15){
with(_14){
return objj_msgSend(CPDictionary,"dictionaryWithObjects:forKeys:",[objj_msgSend(CPNull,"null"),objj_msgSend(CPNull,"null")],["background-color","divider-color"]);
}
})]);
p;18;_CPDisplayServer.jt;1218;@STATIC;1.0;I;22;Foundation/CPRunLoop.jt;1172;
objj_executeFile("Foundation/CPRunLoop.j",NO);
var _1=[],_2={},_3=[],_4={},_5=objj_msgSend(CPRunLoop,"mainRunLoop");
_CPDisplayServerAddDisplayObject=function(_6){
var _7=objj_msgSend(_6,"UID");
if(typeof _2[_7]!=="undefined"){
return;
}
var _8=_1.length;
_2[_7]=_8;
_1[_8]=_6;
};
_CPDisplayServerAddLayoutObject=function(_9){
var _a=objj_msgSend(_9,"UID");
if(typeof _4[_a]!=="undefined"){
return;
}
var _b=_3.length;
_4[_a]=_b;
_3[_b]=_9;
};
var _c=objj_allocateClassPair(CPObject,"_CPDisplayServer"),_d=_c.isa;
objj_registerClassPair(_c);
class_addMethods(_d,[new objj_method(sel_getUid("run"),function(_e,_f){
with(_e){
while(_3.length||_1.length){
var _10=0;
for(;_10<_3.length;++_10){
var _11=_3[_10];
delete _4[objj_msgSend(_11,"UID")];
objj_msgSend(_11,"layoutIfNeeded");
}
_3=[];
_4={};
_10=0;
for(;_10<_1.length;++_10){
if(_3.length){
break;
}
var _11=_1[_10];
delete _2[objj_msgSend(_11,"UID")];
objj_msgSend(_11,"displayIfNeeded");
}
if(_10===_1.length){
_1=[];
_2={};
}else{
_1.splice(0,_10);
}
}
objj_msgSend(_5,"performSelector:target:argument:order:modes:",sel_getUid("run"),_e,nil,0,[CPDefaultRunLoopMode]);
}
})]);
objj_msgSend(_CPDisplayServer,"run");
p;21;_CPImageAndTextView.jt;13782;@STATIC;1.0;I;21;Foundation/CPString.ji;9;CPColor.ji;8;CPFont.ji;9;CPImage.ji;8;CPView.ji;11;CPControl.jt;13670;
objj_executeFile("Foundation/CPString.j",NO);
objj_executeFile("CPColor.j",YES);
objj_executeFile("CPFont.j",YES);
objj_executeFile("CPImage.j",YES);
objj_executeFile("CPView.j",YES);
objj_executeFile("CPControl.j",YES);
var _1=1<<0,_2=1<<1,_3=1<<2,_4=1<<3,_5=1<<4,_6=1<<5,_7=1<<6,_8=1<<7,_9=1<<8,_a=1<<9,_b=1<<10;
var _c=objj_allocateClassPair(CPView,"_CPImageAndTextView"),_d=_c.isa;
class_addIvars(_c,[new objj_ivar("_alignment"),new objj_ivar("_verticalAlignment"),new objj_ivar("_lineBreakMode"),new objj_ivar("_textColor"),new objj_ivar("_font"),new objj_ivar("_textShadowColor"),new objj_ivar("_textShadowOffset"),new objj_ivar("_imagePosition"),new objj_ivar("_imageScaling"),new objj_ivar("_imageOffset"),new objj_ivar("_shouldDimImage"),new objj_ivar("_image"),new objj_ivar("_text"),new objj_ivar("_textSize"),new objj_ivar("_flags"),new objj_ivar("_DOMImageElement"),new objj_ivar("_DOMTextElement"),new objj_ivar("_DOMTextShadowElement")]);
objj_registerClassPair(_c);
class_addMethods(_c,[new objj_method(sel_getUid("initWithFrame:control:"),function(_e,_f,_10,_11){
with(_e){
_e=objj_msgSendSuper({receiver:_e,super_class:objj_getClass("_CPImageAndTextView").super_class},"initWithFrame:",_10);
if(_e){
_textShadowOffset={width:0,height:0};
objj_msgSend(_e,"setVerticalAlignment:",CPTopVerticalTextAlignment);
if(_11){
objj_msgSend(_e,"setLineBreakMode:",objj_msgSend(_11,"lineBreakMode"));
objj_msgSend(_e,"setTextColor:",objj_msgSend(_11,"textColor"));
objj_msgSend(_e,"setAlignment:",objj_msgSend(_11,"alignment"));
objj_msgSend(_e,"setVerticalAlignment:",objj_msgSend(_11,"verticalAlignment"));
objj_msgSend(_e,"setFont:",objj_msgSend(_11,"font"));
objj_msgSend(_e,"setImagePosition:",objj_msgSend(_11,"imagePosition"));
objj_msgSend(_e,"setImageScaling:",objj_msgSend(_11,"imageScaling"));
objj_msgSend(_e,"setImageOffset:",objj_msgSend(_11,"imageOffset"));
}else{
objj_msgSend(_e,"setLineBreakMode:",CPLineBreakByClipping);
objj_msgSend(_e,"setAlignment:",CPCenterTextAlignment);
objj_msgSend(_e,"setFont:",objj_msgSend(CPFont,"systemFontOfSize:",12));
objj_msgSend(_e,"setImagePosition:",CPNoImage);
objj_msgSend(_e,"setImageScaling:",CPScaleNone);
}
_textSize=nil;
}
return _e;
}
}),new objj_method(sel_getUid("initWithFrame:"),function(_12,_13,_14){
with(_12){
return objj_msgSend(_12,"initWithFrame:control:",_14,nil);
}
}),new objj_method(sel_getUid("setAlignment:"),function(_15,_16,_17){
with(_15){
if(_alignment===_17){
return;
}
_alignment=_17;
switch(_alignment){
case CPLeftTextAlignment:
_DOMElement.style.textAlign="left";
break;
case CPRightTextAlignment:
_DOMElement.style.textAlign="right";
break;
case CPCenterTextAlignment:
_DOMElement.style.textAlign="center";
break;
case CPJustifiedTextAlignment:
_DOMElement.style.textAlign="justify";
break;
case CPNaturalTextAlignment:
_DOMElement.style.textAlign="";
break;
}
}
}),new objj_method(sel_getUid("alignment"),function(_18,_19){
with(_18){
return _alignment;
}
}),new objj_method(sel_getUid("setVerticalAlignment:"),function(_1a,_1b,_1c){
with(_1a){
if(_verticalAlignment===_1c){
return;
}
_verticalAlignment=_1c;
_flags|=_5;
objj_msgSend(_1a,"setNeedsLayout");
}
}),new objj_method(sel_getUid("verticalAlignment"),function(_1d,_1e){
with(_1d){
return _verticalAlignment;
}
}),new objj_method(sel_getUid("setLineBreakMode:"),function(_1f,_20,_21){
with(_1f){
if(_lineBreakMode===_21){
return;
}
_lineBreakMode=_21;
_flags|=_6;
objj_msgSend(_1f,"setNeedsLayout");
}
}),new objj_method(sel_getUid("lineBreakMode"),function(_22,_23){
with(_22){
return _lineBreakMode;
}
}),new objj_method(sel_getUid("setImagePosition:"),function(_24,_25,_26){
with(_24){
if(_imagePosition==_26){
return;
}
if(_imagePosition==CPNoImage){
_flags|=_2;
}
_imagePosition=_26;
_flags|=_a;
objj_msgSend(_24,"setNeedsLayout");
}
}),new objj_method(sel_getUid("imagePosition"),function(_27,_28){
with(_27){
return _imagePosition;
}
}),new objj_method(sel_getUid("setImageScaling:"),function(_29,_2a,_2b){
with(_29){
if(_imageScaling==_2b){
return;
}
_imageScaling=_2b;
_flags|=_b;
objj_msgSend(_29,"setNeedsLayout");
}
}),new objj_method(sel_getUid("imageScaling"),function(_2c,_2d){
with(_2c){
return _imageScaling;
}
}),new objj_method(sel_getUid("setDimsImage:"),function(_2e,_2f,_30){
with(_2e){
_30=!!_30;
if(_shouldDimImage!==_30){
_shouldDimImage=_30;
objj_msgSend(_2e,"setNeedsLayout");
}
}
}),new objj_method(sel_getUid("setTextColor:"),function(_31,_32,_33){
with(_31){
if(_textColor===_33){
return;
}
_textColor=_33;
_DOMElement.style.color=objj_msgSend(_textColor,"cssString");
}
}),new objj_method(sel_getUid("textColor"),function(_34,_35){
with(_34){
return _textColor;
}
}),new objj_method(sel_getUid("setFont:"),function(_36,_37,_38){
with(_36){
if(_font===_38){
return;
}
_font=_38;
_flags|=_8;
_textSize=nil;
objj_msgSend(_36,"setNeedsLayout");
}
}),new objj_method(sel_getUid("font"),function(_39,_3a){
with(_39){
return _font;
}
}),new objj_method(sel_getUid("setTextShadowColor:"),function(_3b,_3c,_3d){
with(_3b){
if(_textShadowColor===_3d){
return;
}
_textShadowColor=_3d;
_flags|=_9;
objj_msgSend(_3b,"setNeedsLayout");
}
}),new objj_method(sel_getUid("textShadowColor"),function(_3e,_3f){
with(_3e){
return _textShadowColor;
}
}),new objj_method(sel_getUid("setTextShadowOffset:"),function(_40,_41,_42){
with(_40){
if((_textShadowOffset.width==_42.width&&_textShadowOffset.height==_42.height)){
return;
}
_textShadowOffset={width:_42.width,height:_42.height};
objj_msgSend(_40,"setNeedsLayout");
}
}),new objj_method(sel_getUid("textShadowOffset"),function(_43,_44){
with(_43){
return _textShadowOffset;
}
}),new objj_method(sel_getUid("setImage:"),function(_45,_46,_47){
with(_45){
if(_image==_47){
return;
}
if(objj_msgSend(_image,"delegate")===_45){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"removeObserver:name:object:",_45,CPImageDidLoadNotification,_image);
}
_image=_47;
_flags|=_2;
if(objj_msgSend(_image,"loadStatus")!==CPImageLoadStatusCompleted){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"addObserver:selector:name:object:",_45,sel_getUid("imageDidLoad:"),CPImageDidLoadNotification,_image);
}
objj_msgSend(_45,"setNeedsLayout");
}
}),new objj_method(sel_getUid("setImageOffset:"),function(_48,_49,_4a){
with(_48){
if(_imageOffset===_4a){
return;
}
_imageOffset=_4a;
objj_msgSend(_48,"setNeedsLayout");
}
}),new objj_method(sel_getUid("imageOffset"),function(_4b,_4c){
with(_4b){
return _imageOffset;
}
}),new objj_method(sel_getUid("imageDidLoad:"),function(_4d,_4e,_4f){
with(_4d){
_flags|=_2;
objj_msgSend(_4d,"setNeedsLayout");
}
}),new objj_method(sel_getUid("image"),function(_50,_51){
with(_50){
return _image;
}
}),new objj_method(sel_getUid("setText:"),function(_52,_53,_54){
with(_52){
if(_text===_54){
return;
}
_text=_54;
_flags|=_3;
_textSize=nil;
objj_msgSend(_52,"setNeedsLayout");
}
}),new objj_method(sel_getUid("text"),function(_55,_56){
with(_55){
return _text;
}
}),new objj_method(sel_getUid("layoutSubviews"),function(_57,_58){
with(_57){
var _59=_imagePosition!==CPImageOnly&&(objj_msgSend(_text,"length")>0),_5a=!!_DOMTextElement;
if(_59!==_5a){
if(_5a){
_DOMElement.removeChild(_DOMTextElement);
_DOMTextElement=nil;
_5a=NO;
}else{
_DOMTextElement=document.createElement("div");
var _5b=_DOMTextElement.style;
_5b.position="absolute";
_5b.whiteSpace="pre";
_5b.zIndex=200;
_5b.overflow="hidden";
_DOMElement.appendChild(_DOMTextElement);
_5a=YES;
_flags|=_3|_8|_6;
}
}
var _5b=_5a?_DOMTextElement.style:nil;
var _5c=_5a&&!!_textShadowColor,_5d=!!_DOMTextShadowElement;
if(_5c!==_5d){
if(_5d){
_DOMElement.removeChild(_DOMTextShadowElement);
_DOMTextShadowElement=nil;
_5d=NO;
}else{
_DOMTextShadowElement=document.createElement("div");
var _5e=_DOMTextShadowElement.style;
_5e.font=objj_msgSend(_font?_font:objj_msgSend(CPFont,"systemFontOfSize:",12),"cssString");
_5e.position="absolute";
_5e.whiteSpace=_5b.whiteSpace;
_5e.wordWrap=_5b.wordWrap;
_5e.color=objj_msgSend(_textShadowColor,"cssString");
_5e.zIndex=150;
_5e.textOverflow=_5b.textOverflow;
if(document.attachEvent){
_5e.overflow=_5b.overflow;
}else{
_5e.overflowX=_5b.overflowX;
_5e.overflowY=_5b.overflowY;
}
_DOMElement.appendChild(_DOMTextShadowElement);
_5d=YES;
_flags|=_3;
}
}
var _5e=_5d?_DOMTextShadowElement.style:nil;
if(_5a){
if(_flags&_3){
if(CPFeatureIsCompatible(CPJavaScriptInnerTextFeature)){
_DOMTextElement.innerText=_text;
if(_DOMTextShadowElement){
_DOMTextShadowElement.innerText=_text;
}
}else{
if(CPFeatureIsCompatible(CPJavaScriptTextContentFeature)){
_DOMTextElement.textContent=_text;
if(_DOMTextShadowElement){
_DOMTextShadowElement.textContent=_text;
}
}
}
}
if(_flags&_8){
var _5f=objj_msgSend(_font?_font:objj_msgSend(CPFont,"systemFontOfSize:",12),"cssString");
_5b.font=_5f;
if(_5e){
_5e.font=_5f;
}
}
if(_flags&_6){
switch(_lineBreakMode){
case CPLineBreakByClipping:
_5b.overflow="hidden";
_5b.textOverflow="clip";
_5b.whiteSpace="pre";
_5b.wordWrap="normal";
break;
case CPLineBreakByTruncatingHead:
case CPLineBreakByTruncatingMiddle:
case CPLineBreakByTruncatingTail:
_5b.textOverflow="ellipsis";
_5b.whiteSpace="nowrap";
_5b.overflow="hidden";
_5b.wordWrap="normal";
break;
case CPLineBreakByCharWrapping:
case CPLineBreakByWordWrapping:
_5b.wordWrap="break-word";
try{
_5b.whiteSpace="pre";
_5b.whiteSpace="-o-pre-wrap";
_5b.whiteSpace="-pre-wrap";
_5b.whiteSpace="-moz-pre-wrap";
_5b.whiteSpace="pre-wrap";
}
catch(e){
_5b.whiteSpace="pre";
}
_5b.overflow="hidden";
_5b.textOverflow="clip";
break;
}
if(_5e){
if(document.attachEvent){
_5e.overflow=_5b.overflow;
}else{
_5e.overflowX=_5b.overflowX;
_5e.overflowY=_5b.overflowY;
}
_5e.wordWrap=_5b.wordWrap;
_5e.whiteSpace=_5b.whiteSpace;
_5e.textOverflow=_5b.textOverflow;
}
}
}
var _60=_image!==nil&&_imagePosition!==CPNoImage,_61=!!_DOMImageElement;
if(_60!==_61){
if(_61){
_DOMElement.removeChild(_DOMImageElement);
_DOMImageElement=nil;
_61=NO;
}else{
_DOMImageElement=document.createElement("img");
if(objj_msgSend(CPPlatform,"supportsDragAndDrop")){
_DOMImageElement.setAttribute("draggable","true");
_DOMImageElement.style["-khtml-user-drag"]="element";
}
var _62=_DOMImageElement.style;
_62.top="0px";
_62.left="0px";
_62.position="absolute";
_62.zIndex=100;
_DOMElement.appendChild(_DOMImageElement);
_61=YES;
}
}
var _63=objj_msgSend(_57,"bounds").size,_64={origin:{x:0,y:0},size:{width:_63.width,height:_63.height}};
if(_61){
if(!_62){
var _62=_DOMImageElement.style;
}
if(_flags&_2){
_DOMImageElement.src=objj_msgSend(_image,"filename");
}
var _65=_63.width/2,_66=_63.height/2,_67=objj_msgSend(_image,"size"),_68=_67.width,_69=_67.height;
if(_imageScaling===CPScaleToFit){
_68=_63.width;
_69=_63.height;
}else{
if(_imageScaling===CPScaleProportionally){
var _6a=MIN(MIN(_63.width,_68)/_68,MIN(_63.height,_69)/_69);
_68*=_6a;
_69*=_6a;
}
}
if(CPFeatureIsCompatible(CPOpacityRequiresFilterFeature)){
_62.filter="alpha(opacity="+_shouldDimImage?35:100+")";
}else{
_62.opacity=_shouldDimImage?0.35:1;
}
_DOMImageElement.width=_68;
_DOMImageElement.height=_69;
_62.width=MAX(_68,0)+"px";
_62.height=MAX(_69,0)+"px";
if(_imagePosition===CPImageBelow){
_62.left=FLOOR(_65-_68/2)+"px";
_62.top=FLOOR(_63.height-_69)+"px";
_64.size.height=_63.height-_69-_imageOffset;
}else{
if(_imagePosition===CPImageAbove){
_62.left=FLOOR(_65-_68/2)+"px";
_62.top=0+"px";
_64.origin.y+=_69+_imageOffset;
_64.size.height=_63.height-_69-_imageOffset;
}else{
if(_imagePosition===CPImageLeft){
_62.top=FLOOR(_66-_69/2)+"px";
_62.left="0px";
_64.origin.x=_68+_imageOffset;
_64.size.width-=_68+_imageOffset;
}else{
if(_imagePosition===CPImageRight){
_62.top=FLOOR(_66-_69/2)+"px";
_62.left=FLOOR(_63.width-_68)+"px";
_64.size.width-=_68+_imageOffset;
}else{
if(_imagePosition===CPImageOnly||_imagePosition==CPImageOverlaps){
_62.top=FLOOR(_66-_69/2)+"px";
_62.left=FLOOR(_65-_68/2)+"px";
}
}
}
}
}
}
if(_5a){
var _6b=(_64.origin.x),_6c=(_64.origin.y),_6d=(_64.size.width),_6e=(_64.size.height);
if(_verticalAlignment!==CPTopVerticalTextAlignment){
if(!_textSize){
if(_lineBreakMode===CPLineBreakByCharWrapping||_lineBreakMode===CPLineBreakByWordWrapping){
_textSize=objj_msgSend(_text,"sizeWithFont:inWidth:",_font,_6d);
}else{
_textSize=objj_msgSend(_text,"sizeWithFont:",_font);
}
}
if(_verticalAlignment===CPCenterVerticalTextAlignment){
_6c=_6c+(_6e-_textSize.height)/2;
_6e=_textSize.height;
}else{
_6c=_6c+_6e-_textSize.height;
_6e=_textSize.height;
}
}
_5b.top=ROUND(_6c)+"px";
_5b.left=ROUND(_6b)+"px";
_5b.width=MAX(ROUND(_6d),0)+"px";
_5b.height=MAX(ROUND(_6e),0)+"px";
if(_5e){
if(_flags&_9){
_5e.color=objj_msgSend(_textShadowColor,"cssString");
}
_5e.top=ROUND(_6c+_textShadowOffset.height)+"px";
_5e.left=ROUND(_6b+_textShadowOffset.width)+"px";
_5e.width=MAX(ROUND(_6d),0)+"px";
_5e.height=MAX(ROUND(_6e),0)+"px";
}
}
_flags=0;
}
}),new objj_method(sel_getUid("sizeToFit"),function(_6f,_70){
with(_6f){
var _71=CGSizeMakeZero();
if((_imagePosition!==CPNoImage)&&_image){
var _72=objj_msgSend(_image,"size");
_71.width+=_72.width;
_71.height+=_72.height;
}
if((_imagePosition!==CPImageOnly)&&objj_msgSend(_text,"length")>0){
if(!_textSize){
_textSize=objj_msgSend(_text,"sizeWithFont:",_font?_font:objj_msgSend(CPFont,"systemFontOfSize:",12));
}
if(!_image||_imagePosition===CPImageOverlaps){
_71.width=MAX(_71.width,_textSize.width);
_71.height=MAX(_71.height,_textSize.height);
}else{
if(_imagePosition===CPImageLeft||_imagePosition===CPImageRight){
_71.width+=_textSize.width+_imageOffset;
_71.height=MAX(_71.height,_textSize.height);
}else{
if(_imagePosition===CPImageAbove||_imagePosition===CPImageBelow){
_71.width=MAX(_71.width,_textSize.width);
_71.height+=_textSize.height+_imageOffset;
}
}
}
}
objj_msgSend(_6f,"setFrameSize:",_71);
}
})]);
p;29;_CPToolbarFlexibleSpaceItem.jt;794;@STATIC;1.0;i;15;CPToolbarItem.jt;756;
objj_executeFile("CPToolbarItem.j",YES);
var _1=objj_allocateClassPair(CPToolbarItem,"_CPToolbarFlexibleSpaceItem"),_2=_1.isa;
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("initWithItemIdentifier:"),function(_3,_4,_5){
with(_3){
_3=objj_msgSendSuper({receiver:_3,super_class:objj_getClass("_CPToolbarFlexibleSpaceItem").super_class},"initWithItemIdentifier:",CPToolbarFlexibleSpaceItemIdentifier);
if(_3){
objj_msgSend(_3,"setMinSize:",CGSizeMake(32,32));
objj_msgSend(_3,"setMaxSize:",CGSizeMake(10000,32));
}
return _3;
}
}),new objj_method(sel_getUid("initWithCoder:"),function(_6,_7,_8){
with(_6){
return objj_msgSend(_6,"init");
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_9,_a,_b){
with(_9){
}
})]);
p;25;_CPToolbarSeparatorItem.jt;780;@STATIC;1.0;i;15;CPToolbarItem.jt;742;
objj_executeFile("CPToolbarItem.j",YES);
var _1=objj_allocateClassPair(CPToolbarItem,"_CPToolbarSeparatorItem"),_2=_1.isa;
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("initWithItemIdentifier:"),function(_3,_4,_5){
with(_3){
_3=objj_msgSendSuper({receiver:_3,super_class:objj_getClass("_CPToolbarSeparatorItem").super_class},"initWithItemIdentifier:",CPToolbarSeparatorItemIdentifier);
if(_3){
objj_msgSend(_3,"setMinSize:",CGSizeMake(2,0));
objj_msgSend(_3,"setMaxSize:",CGSizeMake(2,100000));
}
return _3;
}
}),new objj_method(sel_getUid("initWithCoder:"),function(_6,_7,_8){
with(_6){
return objj_msgSend(_6,"init");
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_9,_a,_b){
with(_9){
}
})]);
p;26;_CPToolbarShowColorsItem.jt;1291;@STATIC;1.0;i;15;CPApplication.ji;15;CPToolbarItem.jt;1232;
objj_executeFile("CPApplication.j",YES);
objj_executeFile("CPToolbarItem.j",YES);
var _1=objj_allocateClassPair(CPToolbarItem,"_CPToolbarShowColorsItem"),_2=_1.isa;
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("initWithItemIdentifier:"),function(_3,_4,_5){
with(_3){
_3=objj_msgSendSuper({receiver:_3,super_class:objj_getClass("_CPToolbarShowColorsItem").super_class},"initWithItemIdentifier:",CPToolbarShowColorsItemIdentifier);
if(_3){
objj_msgSend(_3,"setMinSize:",CGSizeMake(32,32));
objj_msgSend(_3,"setMaxSize:",CGSizeMake(32,32));
objj_msgSend(_3,"setLabel:","Colors");
objj_msgSend(_3,"setPaletteLabel:","Show Colors");
objj_msgSend(_3,"setTarget:",CPApp);
objj_msgSend(_3,"setAction:",sel_getUid("orderFrontColorPanel:"));
objj_msgSend(_3,"setImage:",objj_msgSend(CPImage,"imageNamed:",CPImageNameColorPanel));
objj_msgSend(_3,"setAlternateImage:",objj_msgSend(CPImage,"imageNamed:",CPImageNameColorPanelHighlighted));
objj_msgSend(_3,"setToolTip:","Show the Colors panel.");
}
return _3;
}
}),new objj_method(sel_getUid("initWithCoder:"),function(_6,_7,_8){
with(_6){
return objj_msgSend(_6,"init");
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_9,_a,_b){
with(_9){
}
})]);
p;21;_CPToolbarSpaceItem.jt;767;@STATIC;1.0;i;15;CPToolbarItem.jt;729;
objj_executeFile("CPToolbarItem.j",YES);
var _1=objj_allocateClassPair(CPToolbarItem,"_CPToolbarSpaceItem"),_2=_1.isa;
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("initWithItemIdentifier:"),function(_3,_4,_5){
with(_3){
_3=objj_msgSendSuper({receiver:_3,super_class:objj_getClass("_CPToolbarSpaceItem").super_class},"initWithItemIdentifier:",CPToolbarSpaceItemIdentifier);
if(_3){
objj_msgSend(_3,"setMinSize:",CGSizeMake(32,32));
objj_msgSend(_3,"setMaxSize:",CGSizeMake(32,32));
}
return _3;
}
}),new objj_method(sel_getUid("initWithCoder:"),function(_6,_7,_8){
with(_6){
return objj_msgSend(_6,"init");
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_9,_a,_b){
with(_9){
}
})]);
p;12;_CPToolTip.jt;5322;@STATIC;1.0;i;13;CPTextField.ji;8;CPView.ji;10;CPWindow.jt;5258;
objj_executeFile("CPTextField.j",YES);
objj_executeFile("CPView.j",YES);
objj_executeFile("CPWindow.j",YES);
_CPToolTipWindowMask=1<<27;
var _1=24,_2=11,_3,_4,_5=1;
var _6=objj_allocateClassPair(CPWindow,"_CPToolTip"),_7=_6.isa;
class_addIvars(_6,[new objj_ivar("_content")]);
objj_registerClassPair(_6);
class_addMethods(_6,[new objj_method(sel_getUid("initWithString:styleMask:"),function(_8,_9,_a,_b){
with(_8){
var _c=CPRectMake(0,0,250,_1),_d=objj_msgSend(_CPToolTip,"computeCorrectSize:text:",_c.size,_a),_e=_d[1];
_c.size=_d[0];
if(_8=objj_msgSendSuper({receiver:_8,super_class:objj_getClass("_CPToolTip").super_class},"initWithContentRect:styleMask:",_c,_b)){
_e.height+=4;
_content=objj_msgSend(CPTextField,"labelWithTitle:",_a);
objj_msgSend(_content,"setFont:",objj_msgSend(CPFont,"systemFontOfSize:",_2));
objj_msgSend(_content,"setLineBreakMode:",CPLineBreakByCharWrapping);
objj_msgSend(_content,"setAlignment:",CPJustifiedTextAlignment);
objj_msgSend(_content,"setAutoresizingMask:",CPViewWidthSizable|CPViewHeightSizable);
objj_msgSend(_content,"setFrameOrigin:",CPPointMake(0,0));
objj_msgSend(_content,"setFrameSize:",_e);
objj_msgSend(_content,"setTextShadowOffset:",CGSizeMake(0,1));
objj_msgSend(_content,"setTextColor:",objj_msgSend(CPColor,"blackColor"));
objj_msgSend(objj_msgSend(_8,"contentView"),"addSubview:",_content);
objj_msgSend(_8,"setLevel:",CPStatusWindowLevel);
objj_msgSend(_8,"setAlphaValue:",0.9);
objj_msgSend(_windowView,"setNeedsDisplay:",YES);
}
return _8;
}
}),new objj_method(sel_getUid("showToolTip"),function(_f,_10){
with(_f){
var _11=objj_msgSend(objj_msgSend(CPApp,"currentEvent"),"globalLocation"),_12=objj_msgSend(objj_msgSend(objj_msgSend(CPApp,"mainWindow"),"platformWindow"),"nativeContentRect");
_11.y+=20;
if(_11.x<0){
_11.x=5;
}
if(_11.x+CPRectGetWidth(objj_msgSend(_f,"frame"))>_12.size.width){
_11.x=_12.size.width-CPRectGetWidth(objj_msgSend(_f,"frame"))-5;
}
if(_11.y<0){
_11.y=5;
}
if(_11.y+CPRectGetHeight(objj_msgSend(_f,"frame"))>_12.size.height){
_11.y=_12.size.height-CPRectGetHeight(objj_msgSend(_f,"frame"))-5;
}
objj_msgSend(_f,"setFrameOrigin:",_11);
objj_msgSend(_f,"orderFront:",nil);
}
})]);
class_addMethods(_7,[new objj_method(sel_getUid("toolTipWithString:"),function(_13,_14,_15){
with(_13){
var _16=objj_msgSend(objj_msgSend(_CPToolTip,"alloc"),"initWithString:styleMask:",_15,_CPToolTipWindowMask);
objj_msgSend(_16,"showToolTip");
return _16;
}
}),new objj_method(sel_getUid("computeCorrectSize:text:"),function(_17,_18,_19,_1a){
with(_17){
var _1b=objj_msgSend(CPFont,"systemFontOfSize:",_2),_1c=objj_msgSend(_1a,"sizeWithFont:",_1b),_1d=objj_msgSend(_1a,"sizeWithFont:inWidth:",_1b,(_19.width));
if(_1c.width<_19.width){
var _1e=objj_msgSend(objj_msgSend(CPTextField,"alloc"),"initWithFrame:",CGRectMakeZero()),_1f=objj_msgSend(_1e,"currentValueForThemeAttribute:","content-inset")||CGInsetMakeZero();
_1d=_1c;
_1d.width+=_1f.left+_1f.right;
_19.width=_1d.width;
}
if(_1d.height<100){
_19.height=_1d.height+4;
return [_19,_1d];
}
var _20=_19.width+((parseInt(_1d.height-100)/_1)*_1);
_1d=objj_msgSend(_1a,"sizeWithFont:inWidth:",_1b,_20-4);
_19.width=_20+2;
_19.height=_1d.height+4;
return [_19,_1d];
}
}),new objj_method(sel_getUid("_windowViewClassForStyleMask:"),function(_21,_22,_23){
with(_21){
return _CPToolTipWindowView;
}
})]);
var _6=objj_getClass("CPView");
if(!_6){
throw new SyntaxError("*** Could not find definition for class \"CPView\"");
}
var _7=_6.isa;
class_addMethods(_6,[new objj_method(sel_getUid("setToolTip:"),function(_24,_25,_26){
with(_24){
if(_toolTip==_26){
return;
}
_toolTip=_26;
if(!_DOMElement){
return;
}
var fIn=function(e){
objj_msgSend(_24,"_fireToolTip");
},_27=function(e){
objj_msgSend(_24,"_invalidateToolTip");
};
if(_toolTip){
if(_DOMElement.addEventListener){
_DOMElement.addEventListener("mouseover",fIn,NO);
_DOMElement.addEventListener("keypress",_27,NO);
_DOMElement.addEventListener("mouseout",_27,NO);
}else{
if(_DOMElement.attachEvent){
_DOMElement.attachEvent("onmouseover",fIn);
_DOMElement.attachEvent("onkeypress",_27);
_DOMElement.attachEvent("onmouseout",_27);
}
}
}else{
if(_DOMElement.removeEventListener){
_DOMElement.removeEventListener("mouseover",fIn,NO);
_DOMElement.removeEventListener("keypress",_27,NO);
_DOMElement.removeEventListener("mouseout",_27,NO);
}else{
if(_DOMElement.detachEvent){
_DOMElement.detachEvent("onmouseover",fIn);
_DOMElement.detachEvent("onkeypress",_27);
_DOMElement.detachEvent("onmouseout",_27);
}
}
}
}
}),new objj_method(sel_getUid("toolTip"),function(_28,_29){
with(_28){
return _toolTip;
}
}),new objj_method(sel_getUid("_fireToolTip"),function(_2a,_2b){
with(_2a){
if(_4){
objj_msgSend(_4,"invalidate");
if(_3){
objj_msgSend(_3,"close:",nil);
}
_3=nil;
}
if(_toolTip){
_4=objj_msgSend(CPTimer,"scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:",_5,_2a,sel_getUid("_showToolTip:"),nil,NO);
}
}
}),new objj_method(sel_getUid("_invalidateToolTip"),function(_2c,_2d){
with(_2c){
if(_4){
objj_msgSend(_4,"invalidate");
_4=nil;
}
if(_3){
objj_msgSend(_3,"close");
_3=nil;
}
}
}),new objj_method(sel_getUid("_showToolTip:"),function(_2e,_2f,_30){
with(_2e){
if(_3){
objj_msgSend(_3,"close:",nil);
}
_3=objj_msgSend(_CPToolTip,"toolTipWithString:",_toolTip);
}
})]);
p;8;AppKit.jt;4323;@STATIC;1.0;i;9;CALayer.ji;9;CPAlert.ji;13;CPAnimation.ji;15;CPApplication.ji;19;CPArrayController.ji;14;CPBezierPath.ji;7;CPBox.ji;11;CPBrowser.ji;10;CPButton.ji;13;CPButtonBar.ji;12;CPCheckBox.ji;7;CPCib.ji;23;CPCibBindingConnector.ji;16;CPCibConnector.ji;23;CPCibControlConnector.ji;14;CPCibLoading.ji;22;CPCibOutletConnector.ji;12;CPClipView.ji;18;CPCollectionView.ji;22;CPCollectionViewItem.ji;9;CPColor.ji;14;CPColorPanel.ji;13;CPColorWell.ji;17;CPCompatibility.ji;11;CPControl.ji;10;CPCookie.ji;10;CPCursor.ji;12;CPDocument.ji;22;CPDocumentController.ji;9;CPEvent.ji;14;CPFlashMovie.ji;13;CPFlashView.ji;8;CPFont.ji;15;CPFontManager.ji;12;CPGeometry.ji;12;CPGraphics.ji;9;CPImage.ji;13;CPImageView.ji;14;CPKeyBinding.ji;8;CPMenu.ji;12;CPMenuItem.ji;13;CPOpenPanel.ji;15;CPOutlineView.ji;9;CPPanel.ji;14;CPPasteboard.ji;15;CPPopUpButton.ji;21;CPProgressIndicator.ji;9;CPRadio.ji;13;CPResponder.ji;12;CPScroller.ji;14;CPScrollView.ji;15;CPSearchField.ji;19;CPSecureTextField.ji;20;CPSegmentedControl.ji;10;CPShadow.ji;10;CPSlider.ji;9;CPSound.ji;13;CPSplitView.ji;11;CPStepper.ji;15;CPTableColumn.ji;13;CPTableView.ji;11;CPTabView.ji;8;CPText.ji;13;CPTextField.ji;14;CPTokenField.ji;11;CPToolbar.ji;15;CPToolbarItem.ji;12;_CPToolTip.ji;12;CPTreeNode.ji;8;CPView.ji;17;CPViewAnimation.ji;18;CPViewController.ji;11;CPWebView.ji;10;CPWindow.ji;20;CPWindowController.jt;2947;
objj_executeFile("CALayer.j",YES);
objj_executeFile("CPAlert.j",YES);
objj_executeFile("CPAnimation.j",YES);
objj_executeFile("CPApplication.j",YES);
objj_executeFile("CPArrayController.j",YES);
objj_executeFile("CPBezierPath.j",YES);
objj_executeFile("CPBox.j",YES);
objj_executeFile("CPBrowser.j",YES);
objj_executeFile("CPButton.j",YES);
objj_executeFile("CPButtonBar.j",YES);
objj_executeFile("CPCheckBox.j",YES);
objj_executeFile("CPCib.j",YES);
objj_executeFile("CPCibBindingConnector.j",YES);
objj_executeFile("CPCibConnector.j",YES);
objj_executeFile("CPCibControlConnector.j",YES);
objj_executeFile("CPCibLoading.j",YES);
objj_executeFile("CPCibOutletConnector.j",YES);
objj_executeFile("CPClipView.j",YES);
objj_executeFile("CPCollectionView.j",YES);
objj_executeFile("CPCollectionViewItem.j",YES);
objj_executeFile("CPColor.j",YES);
objj_executeFile("CPColorPanel.j",YES);
objj_executeFile("CPColorWell.j",YES);
objj_executeFile("CPCompatibility.j",YES);
objj_executeFile("CPControl.j",YES);
objj_executeFile("CPCookie.j",YES);
objj_executeFile("CPCursor.j",YES);
objj_executeFile("CPDocument.j",YES);
objj_executeFile("CPDocumentController.j",YES);
objj_executeFile("CPEvent.j",YES);
objj_executeFile("CPFlashMovie.j",YES);
objj_executeFile("CPFlashView.j",YES);
objj_executeFile("CPFont.j",YES);
objj_executeFile("CPFontManager.j",YES);
objj_executeFile("CPGeometry.j",YES);
objj_executeFile("CPGraphics.j",YES);
objj_executeFile("CPImage.j",YES);
objj_executeFile("CPImageView.j",YES);
objj_executeFile("CPKeyBinding.j",YES);
objj_executeFile("CPMenu.j",YES);
objj_executeFile("CPMenuItem.j",YES);
objj_executeFile("CPOpenPanel.j",YES);
objj_executeFile("CPOutlineView.j",YES);
objj_executeFile("CPPanel.j",YES);
objj_executeFile("CPPasteboard.j",YES);
objj_executeFile("CPPopUpButton.j",YES);
objj_executeFile("CPProgressIndicator.j",YES);
objj_executeFile("CPRadio.j",YES);
objj_executeFile("CPResponder.j",YES);
objj_executeFile("CPScroller.j",YES);
objj_executeFile("CPScrollView.j",YES);
objj_executeFile("CPSearchField.j",YES);
objj_executeFile("CPSecureTextField.j",YES);
objj_executeFile("CPSegmentedControl.j",YES);
objj_executeFile("CPShadow.j",YES);
objj_executeFile("CPSlider.j",YES);
objj_executeFile("CPSound.j",YES);
objj_executeFile("CPSplitView.j",YES);
objj_executeFile("CPStepper.j",YES);
objj_executeFile("CPTableColumn.j",YES);
objj_executeFile("CPTableView.j",YES);
objj_executeFile("CPTabView.j",YES);
objj_executeFile("CPText.j",YES);
objj_executeFile("CPTextField.j",YES);
objj_executeFile("CPTokenField.j",YES);
objj_executeFile("CPToolbar.j",YES);
objj_executeFile("CPToolbarItem.j",YES);
objj_executeFile("_CPToolTip.j",YES);
objj_executeFile("CPTreeNode.j",YES);
objj_executeFile("CPView.j",YES);
objj_executeFile("CPViewAnimation.j",YES);
objj_executeFile("CPViewController.j",YES);
objj_executeFile("CPWebView.j",YES);
objj_executeFile("CPWindow.j",YES);
objj_executeFile("CPWindowController.j",YES);
p;17;CPAccordionView.jt;10983;@STATIC;1.0;I;20;Foundation/CPArray.jI;21;Foundation/CPObject.jI;32;Foundation/CPKeyValueObserving.jI;23;Foundation/CPIndexSet.jI;21;Foundation/CPString.ji;8;CPView.ji;10;CPButton.jt;10794;
objj_executeFile("Foundation/CPArray.j",NO);
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("Foundation/CPKeyValueObserving.j",NO);
objj_executeFile("Foundation/CPIndexSet.j",NO);
objj_executeFile("Foundation/CPString.j",NO);
objj_executeFile("CPView.j",YES);
objj_executeFile("CPButton.j",YES);
var _1=objj_allocateClassPair(CPObject,"CPAccordionViewItem"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_identifier"),new objj_ivar("_view"),new objj_ivar("_label")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("identifier"),function(_3,_4){
with(_3){
return _identifier;
}
}),new objj_method(sel_getUid("setIdentifier:"),function(_5,_6,_7){
with(_5){
_identifier=_7;
}
}),new objj_method(sel_getUid("view"),function(_8,_9){
with(_8){
return _view;
}
}),new objj_method(sel_getUid("setView:"),function(_a,_b,_c){
with(_a){
_view=_c;
}
}),new objj_method(sel_getUid("label"),function(_d,_e){
with(_d){
return _label;
}
}),new objj_method(sel_getUid("setLabel:"),function(_f,_10,_11){
with(_f){
_label=_11;
}
}),new objj_method(sel_getUid("init"),function(_12,_13){
with(_12){
return objj_msgSend(_12,"initWithIdentifier:","");
}
}),new objj_method(sel_getUid("initWithIdentifier:"),function(_14,_15,_16){
with(_14){
_14=objj_msgSendSuper({receiver:_14,super_class:objj_getClass("CPAccordionViewItem").super_class},"init");
if(_14){
objj_msgSend(_14,"setIdentifier:",_16);
}
return _14;
}
})]);
var _1=objj_allocateClassPair(CPView,"CPAccordionView"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_dirtyItemIndex"),new objj_ivar("_itemHeaderPrototype"),new objj_ivar("_items"),new objj_ivar("_itemViews"),new objj_ivar("_expandedItemIndexes")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("initWithFrame:"),function(_17,_18,_19){
with(_17){
_17=objj_msgSendSuper({receiver:_17,super_class:objj_getClass("CPAccordionView").super_class},"initWithFrame:",_19);
if(_17){
_items=[];
_itemViews=[];
_expandedItemIndexes=objj_msgSend(CPIndexSet,"indexSet");
objj_msgSend(_17,"setItemHeaderPrototype:",objj_msgSend(objj_msgSend(CPButton,"alloc"),"initWithFrame:",{origin:{x:0,y:0},size:{width:100,height:24}}));
}
return _17;
}
}),new objj_method(sel_getUid("setItemHeaderPrototype:"),function(_1a,_1b,_1c){
with(_1a){
_itemHeaderPrototype=_1c;
}
}),new objj_method(sel_getUid("itemHeaderPrototype"),function(_1d,_1e){
with(_1d){
return _itemHeaderPrototype;
}
}),new objj_method(sel_getUid("items"),function(_1f,_20){
with(_1f){
return _items;
}
}),new objj_method(sel_getUid("addItem:"),function(_21,_22,_23){
with(_21){
objj_msgSend(_21,"insertItem:atIndex:",_23,_items.length);
}
}),new objj_method(sel_getUid("insertItem:atIndex:"),function(_24,_25,_26,_27){
with(_24){
objj_msgSend(_expandedItemIndexes,"addIndex:",_27);
var _28=objj_msgSend(objj_msgSend(_CPAccordionItemView,"alloc"),"initWithAccordionView:",_24);
objj_msgSend(_28,"setIndex:",_27);
objj_msgSend(_28,"setLabel:",objj_msgSend(_26,"label"));
objj_msgSend(_28,"setContentView:",objj_msgSend(_26,"view"));
objj_msgSend(_24,"addSubview:",_28);
objj_msgSend(_items,"insertObject:atIndex:",_26,_27);
objj_msgSend(_itemViews,"insertObject:atIndex:",_28,_27);
objj_msgSend(_24,"_invalidateItemsStartingAtIndex:",_27);
objj_msgSend(_24,"setNeedsLayout");
}
}),new objj_method(sel_getUid("removeItem:"),function(_29,_2a,_2b){
with(_29){
objj_msgSend(_29,"removeItemAtIndex:",objj_msgSend(_items,"indexOfObjectIdenticalTo:",_2b));
}
}),new objj_method(sel_getUid("removeItemAtIndex:"),function(_2c,_2d,_2e){
with(_2c){
objj_msgSend(_expandedItemIndexes,"removeIndex:",_2e);
objj_msgSend(_itemViews[_2e],"removeFromSuperview");
objj_msgSend(_items,"removeObjectAtIndex:",_2e);
objj_msgSend(_itemViews,"removeObjectAtIndex:",_2e);
objj_msgSend(_2c,"_invalidateItemsStartingAtIndex:",_2e);
objj_msgSend(_2c,"setNeedsLayout");
}
}),new objj_method(sel_getUid("removeAllItems"),function(_2f,_30){
with(_2f){
var _31=_items.length;
while(_31--){
objj_msgSend(_2f,"removeItemAtIndex:",_31);
}
}
}),new objj_method(sel_getUid("expandItemAtIndex:"),function(_32,_33,_34){
with(_32){
if(!objj_msgSend(_itemViews[_34],"isCollapsed")){
return;
}
objj_msgSend(_expandedItemIndexes,"addIndex:",_34);
objj_msgSend(_itemViews[_34],"setCollapsed:",NO);
objj_msgSend(_32,"_invalidateItemsStartingAtIndex:",_34);
}
}),new objj_method(sel_getUid("collapseItemAtIndex:"),function(_35,_36,_37){
with(_35){
if(objj_msgSend(_itemViews[_37],"isCollapsed")){
return;
}
objj_msgSend(_expandedItemIndexes,"removeIndex:",_37);
objj_msgSend(_itemViews[_37],"setCollapsed:",YES);
objj_msgSend(_35,"_invalidateItemsStartingAtIndex:",_37);
}
}),new objj_method(sel_getUid("toggleItemAtIndex:"),function(_38,_39,_3a){
with(_38){
var _3b=_itemViews[_3a];
if(objj_msgSend(_3b,"isCollapsed")){
objj_msgSend(_38,"expandItemAtIndex:",_3a);
}else{
objj_msgSend(_38,"collapseItemAtIndex:",_3a);
}
}
}),new objj_method(sel_getUid("expandedItemIndexes"),function(_3c,_3d){
with(_3c){
return _expandedItemIndexes;
}
}),new objj_method(sel_getUid("collapsedItemIndexes"),function(_3e,_3f){
with(_3e){
var _40=objj_msgSend(CPIndexSet,"indexSetWithIndexesInRange:",CPMakeRange(0,_items.length));
objj_msgSend(_40,"removeIndexes:",_expandedIndexes);
return _40;
}
}),new objj_method(sel_getUid("setEnabled:forItemAtIndex:"),function(_41,_42,_43,_44){
with(_41){
var _45=_itemViews[_44];
if(!_45){
return;
}
if(!_43){
objj_msgSend(_41,"collapseItemAtIndex:",_44);
}else{
objj_msgSend(_41,"expandItemAtIndex:",_44);
}
objj_msgSend(_45,"setEnabled:",_43);
}
}),new objj_method(sel_getUid("_invalidateItemsStartingAtIndex:"),function(_46,_47,_48){
with(_46){
if(_dirtyItemIndex===CPNotFound){
_dirtyItemIndex=_48;
}
_dirtyItemIndex=MIN(_dirtyItemIndex,_48);
objj_msgSend(_46,"setNeedsLayout");
}
}),new objj_method(sel_getUid("setFrameSize:"),function(_49,_4a,_4b){
with(_49){
var _4c=(objj_msgSend(_49,"frame").size.width);
objj_msgSendSuper({receiver:_49,super_class:objj_getClass("CPAccordionView").super_class},"setFrameSize:",_4b);
if(_4c!==(objj_msgSend(_49,"frame").size.width)){
objj_msgSend(_49,"_invalidateItemsStartingAtIndex:",0);
}
}
}),new objj_method(sel_getUid("layoutSubviews"),function(_4d,_4e){
with(_4d){
if(_items.length<=0){
return objj_msgSend(_4d,"setFrameSize:",{width:(objj_msgSend(_4d,"frame").size.width),height:0});
}
if(_dirtyItemIndex===CPNotFound){
return;
}
_dirtyItemIndex=MIN(_dirtyItemIndex,_items.length-1);
var _4f=_dirtyItemIndex,_50=_itemViews.length,_51=(objj_msgSend(_4d,"bounds").size.width),y=_4f>0?CGRectGetMaxY(objj_msgSend(_itemViews[_4f-1],"frame")):0;
_dirtyItemIndex=CPNotFound;
for(;_4f<_50;++_4f){
var _52=_itemViews[_4f];
objj_msgSend(_52,"setFrameY:width:",y,_51);
y=CGRectGetMaxY(objj_msgSend(_52,"frame"));
}
objj_msgSend(_4d,"setFrameSize:",{width:(objj_msgSend(_4d,"frame").size.width),height:y});
}
})]);
var _1=objj_allocateClassPair(CPView,"_CPAccordionItemView"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_accordionView"),new objj_ivar("_isCollapsed"),new objj_ivar("_index"),new objj_ivar("_headerView"),new objj_ivar("_contentView")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("isCollapsed"),function(_53,_54){
with(_53){
return _isCollapsed;
}
}),new objj_method(sel_getUid("setCollapsed:"),function(_55,_56,_57){
with(_55){
_isCollapsed=_57;
}
}),new objj_method(sel_getUid("index"),function(_58,_59){
with(_58){
return _index;
}
}),new objj_method(sel_getUid("setIndex:"),function(_5a,_5b,_5c){
with(_5a){
_index=_5c;
}
}),new objj_method(sel_getUid("initWithAccordionView:"),function(_5d,_5e,_5f){
with(_5d){
_5d=objj_msgSendSuper({receiver:_5d,super_class:objj_getClass("_CPAccordionItemView").super_class},"initWithFrame:",{origin:{x:0,y:0},size:{width:0,height:0}});
if(_5d){
_accordionView=_5f;
_isCollapsed=NO;
var _60=objj_msgSend(_5d,"bounds");
_headerView=objj_msgSend(CPKeyedUnarchiver,"unarchiveObjectWithData:",objj_msgSend(CPKeyedArchiver,"archivedDataWithRootObject:",objj_msgSend(_accordionView,"itemHeaderPrototype")));
if(objj_msgSend(_headerView,"respondsToSelector:",sel_getUid("setTarget:"))&&objj_msgSend(_headerView,"respondsToSelector:",sel_getUid("setAction:"))){
objj_msgSend(_headerView,"setTarget:",_5d);
objj_msgSend(_headerView,"setAction:",sel_getUid("toggle:"));
}
objj_msgSend(_5d,"addSubview:",_headerView);
}
return _5d;
}
}),new objj_method(sel_getUid("toggle:"),function(_61,_62,_63){
with(_61){
objj_msgSend(_accordionView,"toggleItemAtIndex:",objj_msgSend(_61,"index"));
}
}),new objj_method(sel_getUid("setLabel:"),function(_64,_65,_66){
with(_64){
if(objj_msgSend(_headerView,"respondsToSelector:",sel_getUid("setTitle:"))){
objj_msgSend(_headerView,"setTitle:",_66);
}else{
if(objj_msgSend(_headerView,"respondsToSelector:",sel_getUid("setLabel:"))){
objj_msgSend(_headerView,"setLabel:",_66);
}else{
if(objj_msgSend(_headerView,"respondsToSelector:",sel_getUid("setStringValue:"))){
objj_msgSend(_headerView,"setStringValue:",_66);
}
}
}
}
}),new objj_method(sel_getUid("setEnabled:"),function(_67,_68,_69){
with(_67){
if(objj_msgSend(_headerView,"respondsToSelector:",sel_getUid("setEnabled:"))){
objj_msgSend(_headerView,"setEnabled:",_69);
}
}
}),new objj_method(sel_getUid("setContentView:"),function(_6a,_6b,_6c){
with(_6a){
if(_contentView===_6c){
return;
}
objj_msgSend(_contentView,"removeObserver:forKeyPath:",_6a,"frame");
objj_msgSend(_contentView,"removeFromSuperview");
_contentView=_6c;
objj_msgSend(_contentView,"addObserver:forKeyPath:options:context:",_6a,"frame",CPKeyValueObservingOptionOld|CPKeyValueObservingOptionNew,NULL);
objj_msgSend(_6a,"addSubview:",_contentView);
objj_msgSend(_accordionView,"_invalidateItemsStartingAtIndex:",objj_msgSend(_6a,"index"));
}
}),new objj_method(sel_getUid("setFrameY:width:"),function(_6d,_6e,aY,_6f){
with(_6d){
var _70=(objj_msgSend(_headerView,"frame").size.height);
objj_msgSend(_headerView,"setFrameSize:",{width:_6f,height:_70});
objj_msgSend(_contentView,"setFrameOrigin:",{x:0,y:_70});
if(objj_msgSend(_6d,"isCollapsed")){
objj_msgSend(_6d,"setFrame:",{origin:{x:0,y:aY},size:{width:_6f,height:_70}});
}else{
var _71=(objj_msgSend(_contentView,"frame").size.height);
objj_msgSend(_contentView,"setFrameSize:",{width:_6f,height:_71});
objj_msgSend(_6d,"setFrame:",{origin:{x:0,y:aY},size:{width:_6f,height:_71+_70}});
}
}
}),new objj_method(sel_getUid("resizeSubviewsWithOldSize:"),function(_72,_73,_74){
with(_72){
}
}),new objj_method(sel_getUid("observeValueForKeyPath:ofObject:change:context:"),function(_75,_76,_77,_78,_79,_7a){
with(_75){
if(_77==="frame"&&!CGRectEqualToRect(objj_msgSend(_79,"objectForKey:",CPKeyValueChangeOldKey),objj_msgSend(_79,"objectForKey:",CPKeyValueChangeNewKey))){
objj_msgSend(_accordionView,"_invalidateItemsStartingAtIndex:",objj_msgSend(_75,"index"));
}
}
})]);
p;9;CPAlert.jt;19208;@STATIC;1.0;I;21;Foundation/CPObject.jI;21;Foundation/CPString.ji;15;CPApplication.ji;10;CPButton.ji;9;CPColor.ji;8;CPFont.ji;9;CPImage.ji;13;CPImageView.ji;9;CPPanel.ji;13;CPTextField.jt;19014;
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("Foundation/CPString.j",NO);
objj_executeFile("CPApplication.j",YES);
objj_executeFile("CPButton.j",YES);
objj_executeFile("CPColor.j",YES);
objj_executeFile("CPFont.j",YES);
objj_executeFile("CPImage.j",YES);
objj_executeFile("CPImageView.j",YES);
objj_executeFile("CPPanel.j",YES);
objj_executeFile("CPTextField.j",YES);
CPWarningAlertStyle=0;
CPInformationalAlertStyle=1;
CPCriticalAlertStyle=2;
var _1=objj_allocateClassPair(CPView,"CPAlert"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_showHelp"),new objj_ivar("_showSuppressionButton"),new objj_ivar("_alertStyle"),new objj_ivar("_title"),new objj_ivar("_accessoryView"),new objj_ivar("_icon"),new objj_ivar("_buttons"),new objj_ivar("_suppressionButton"),new objj_ivar("_delegate"),new objj_ivar("_modalDelegate"),new objj_ivar("_didEndSelector"),new objj_ivar("_window"),new objj_ivar("_defaultWindowStyle"),new objj_ivar("_alertImageView"),new objj_ivar("_informativeLabel"),new objj_ivar("_messageLabel"),new objj_ivar("_alertHelpButton"),new objj_ivar("_needsLayout")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("showsHelp"),function(_3,_4){
with(_3){
return _showHelp;
}
}),new objj_method(sel_getUid("setShowsHelp:"),function(_5,_6,_7){
with(_5){
_showHelp=_7;
}
}),new objj_method(sel_getUid("showsSuppressionButton"),function(_8,_9){
with(_8){
return _showSuppressionButton;
}
}),new objj_method(sel_getUid("setShowsSuppressionButton:"),function(_a,_b,_c){
with(_a){
_showSuppressionButton=_c;
}
}),new objj_method(sel_getUid("alertStyle"),function(_d,_e){
with(_d){
return _alertStyle;
}
}),new objj_method(sel_getUid("setAlertStyle:"),function(_f,_10,_11){
with(_f){
_alertStyle=_11;
}
}),new objj_method(sel_getUid("title"),function(_12,_13){
with(_12){
return _title;
}
}),new objj_method(sel_getUid("setTitle:"),function(_14,_15,_16){
with(_14){
_title=_16;
}
}),new objj_method(sel_getUid("accessoryView"),function(_17,_18){
with(_17){
return _accessoryView;
}
}),new objj_method(sel_getUid("setAccessoryView:"),function(_19,_1a,_1b){
with(_19){
_accessoryView=_1b;
}
}),new objj_method(sel_getUid("icon"),function(_1c,_1d){
with(_1c){
return _icon;
}
}),new objj_method(sel_getUid("setIcon:"),function(_1e,_1f,_20){
with(_1e){
_icon=_20;
}
}),new objj_method(sel_getUid("buttons"),function(_21,_22){
with(_21){
return _buttons;
}
}),new objj_method(sel_getUid("suppressionButton"),function(_23,_24){
with(_23){
return _suppressionButton;
}
}),new objj_method(sel_getUid("delegate"),function(_25,_26){
with(_25){
return _delegate;
}
}),new objj_method(sel_getUid("setDelegate:"),function(_27,_28,_29){
with(_27){
_delegate=_29;
}
}),new objj_method(sel_getUid("window"),function(_2a,_2b){
with(_2a){
return _window;
}
}),new objj_method(sel_getUid("init"),function(_2c,_2d){
with(_2c){
_2c=objj_msgSendSuper({receiver:_2c,super_class:objj_getClass("CPAlert").super_class},"init");
if(_2c){
_buttons=[];
_alertStyle=CPWarningAlertStyle;
_showHelp=NO;
_needsLayout=YES;
_defaultWindowStyle=CPTitledWindowMask;
_messageLabel=objj_msgSend(CPTextField,"labelWithTitle:","Alert");
_alertImageView=objj_msgSend(objj_msgSend(CPImageView,"alloc"),"init");
_informativeLabel=objj_msgSend(objj_msgSend(CPTextField,"alloc"),"init");
_suppressionButton=objj_msgSend(CPCheckBox,"checkBoxWithTitle:","Do not show this message again");
_alertHelpButton=objj_msgSend(objj_msgSend(CPButton,"alloc"),"initWithFrame:",CGRectMake(0,0,16,16));
objj_msgSend(_alertHelpButton,"setTarget:",_2c);
objj_msgSend(_alertHelpButton,"setAction:",sel_getUid("_showHelp:"));
}
return _2c;
}
}),new objj_method(sel_getUid("setTheme:"),function(_2e,_2f,_30){
with(_2e){
if(_30===objj_msgSend(_2e,"theme")){
return;
}
if(_30===objj_msgSend(CPTheme,"defaultHudTheme")){
_defaultWindowStyle=CPTitledWindowMask|CPHUDBackgroundWindowMask;
}else{
_defaultWindowStyle=CPTitledWindowMask;
}
_window=nil;
_needsLayout=YES;
objj_msgSendSuper({receiver:_2e,super_class:objj_getClass("CPAlert").super_class},"setTheme:",_30);
}
}),new objj_method(sel_getUid("setWindowStyle:"),function(_31,_32,_33){
with(_31){
CPLog.warn("DEPRECATED: setWindowStyle: is deprecated. use setTheme: instead");
objj_msgSend(_31,"setTheme:",(_33===CPHUDBackgroundWindowMask)?objj_msgSend(CPTheme,"defaultHudTheme"):objj_msgSend(CPTheme,"defaultTheme"));
}
}),new objj_method(sel_getUid("windowStyle"),function(_34,_35){
with(_34){
CPLog.warn("DEPRECATED: windowStyle: is deprecated. use theme instead");
return _defaultWindowStyle;
}
}),new objj_method(sel_getUid("setMessageText:"),function(_36,_37,_38){
with(_36){
objj_msgSend(_messageLabel,"setStringValue:",_38);
_needsLayout=YES;
}
}),new objj_method(sel_getUid("messageText"),function(_39,_3a){
with(_39){
return objj_msgSend(_messageLabel,"stringValue");
}
}),new objj_method(sel_getUid("setInformativeText:"),function(_3b,_3c,_3d){
with(_3b){
objj_msgSend(_informativeLabel,"setStringValue:",_3d);
_needsLayout=YES;
}
}),new objj_method(sel_getUid("informativeText"),function(_3e,_3f){
with(_3e){
return objj_msgSend(_informativeLabel,"stringValue");
}
}),new objj_method(sel_getUid("setTitle:"),function(_40,_41,_42){
with(_40){
_title=_42;
objj_msgSend(_window,"setTitle:",_42);
}
}),new objj_method(sel_getUid("setAccessoryView:"),function(_43,_44,_45){
with(_43){
_accessoryView=_45;
_needsLayout=YES;
}
}),new objj_method(sel_getUid("setShowsSuppressionButton:"),function(_46,_47,_48){
with(_46){
_showSuppressionButton=_48;
_needsLayout=YES;
}
}),new objj_method(sel_getUid("addButtonWithTitle:"),function(_49,_4a,_4b){
with(_49){
var _4c=objj_msgSend(objj_msgSend(_window,"contentView"),"bounds"),_4d=objj_msgSend(_buttons,"count"),_4e=objj_msgSend(objj_msgSend(CPButton,"alloc"),"initWithFrame:",CGRectMakeZero());
objj_msgSend(_4e,"setTitle:",_4b);
objj_msgSend(_4e,"setTag:",_4d);
objj_msgSend(_4e,"setTarget:",_49);
objj_msgSend(_4e,"setAction:",sel_getUid("_takeReturnCodeFrom:"));
objj_msgSend(objj_msgSend(_window,"contentView"),"addSubview:",_4e);
if(_4d==0){
objj_msgSend(_4e,"setKeyEquivalent:",CPCarriageReturnCharacter);
}else{
if(objj_msgSend(_4b,"lowercaseString")==="cancel"){
objj_msgSend(_4e,"setKeyEquivalent:",CPEscapeFunctionKey);
}
}
objj_msgSend(_buttons,"insertObject:atIndex:",_4e,0);
}
}),new objj_method(sel_getUid("_layoutMessageView"),function(_4f,_50){
with(_4f){
var _51=objj_msgSend(_4f,"currentValueForThemeAttribute:","content-inset"),_52=6,_53,_54;
objj_msgSend(_messageLabel,"setTextColor:",objj_msgSend(_4f,"currentValueForThemeAttribute:","message-text-color"));
objj_msgSend(_messageLabel,"setFont:",objj_msgSend(_4f,"currentValueForThemeAttribute:","message-text-font"));
objj_msgSend(_messageLabel,"setTextShadowColor:",objj_msgSend(_4f,"currentValueForThemeAttribute:","message-text-shadow-color"));
objj_msgSend(_messageLabel,"setTextShadowOffset:",objj_msgSend(_4f,"currentValueForThemeAttribute:","message-text-shadow-offset"));
objj_msgSend(_messageLabel,"setAlignment:",objj_msgSend(_4f,"currentValueForThemeAttribute:","message-text-alignment"));
objj_msgSend(_messageLabel,"setLineBreakMode:",CPLineBreakByWordWrapping);
_53=CGRectGetWidth(objj_msgSend(objj_msgSend(_window,"contentView"),"frame"))-_51.left-_51.right;
_54=objj_msgSend(objj_msgSend(_messageLabel,"stringValue"),"sizeWithFont:inWidth:",objj_msgSend(_messageLabel,"font"),_53);
objj_msgSend(_messageLabel,"setFrame:",CGRectMake(_51.left,_51.top,_54.width,_54.height+_52));
}
}),new objj_method(sel_getUid("_layoutInformativeView"),function(_55,_56){
with(_55){
var _57=objj_msgSend(_55,"currentValueForThemeAttribute:","content-inset"),_58=objj_msgSend(_55,"currentValueForThemeAttribute:","default-elements-margin"),_59=6,_5a,_5b,_5c;
objj_msgSend(_informativeLabel,"setTextColor:",objj_msgSend(_55,"currentValueForThemeAttribute:","informative-text-color"));
objj_msgSend(_informativeLabel,"setFont:",objj_msgSend(_55,"currentValueForThemeAttribute:","informative-text-font"));
objj_msgSend(_informativeLabel,"setTextShadowColor:",objj_msgSend(_55,"currentValueForThemeAttribute:","informative-text-shadow-color"));
objj_msgSend(_informativeLabel,"setTextShadowOffset:",objj_msgSend(_55,"currentValueForThemeAttribute:","informative-text-shadow-offset"));
objj_msgSend(_informativeLabel,"setAlignment:",objj_msgSend(_55,"currentValueForThemeAttribute:","informative-text-alignment"));
objj_msgSend(_informativeLabel,"setLineBreakMode:",CPLineBreakByWordWrapping);
_5a=CGRectGetWidth(objj_msgSend(objj_msgSend(_window,"contentView"),"frame"))-_57.left-_57.right,_5b=objj_msgSend(_messageLabel,"frameOrigin").y+objj_msgSend(_messageLabel,"frameSize").height+_58,_5c=objj_msgSend(objj_msgSend(_informativeLabel,"stringValue"),"sizeWithFont:inWidth:",objj_msgSend(_informativeLabel,"font"),_5a);
objj_msgSend(_informativeLabel,"setFrame:",CGRectMake(_57.left,_5b,_5c.width,_5c.height+_59));
}
}),new objj_method(sel_getUid("_layoutAccessoryView"),function(_5d,_5e){
with(_5d){
if(!_accessoryView){
return;
}
var _5f=objj_msgSend(_5d,"currentValueForThemeAttribute:","content-inset"),_60=objj_msgSend(_5d,"currentValueForThemeAttribute:","default-elements-margin"),_61=CGRectGetWidth(objj_msgSend(objj_msgSend(_window,"contentView"),"frame"))-_5f.left-_5f.right,_62=CGRectGetMaxY(objj_msgSend(_informativeLabel,"frame"))+_60;
objj_msgSend(_accessoryView,"setFrameOrigin:",CGPointMake(_5f.left,_62));
objj_msgSend(objj_msgSend(_window,"contentView"),"addSubview:",_accessoryView);
}
}),new objj_method(sel_getUid("_layoutSuppressionButton"),function(_63,_64){
with(_63){
if(!_showSuppressionButton){
return;
}
var _65=objj_msgSend(_63,"currentValueForThemeAttribute:","content-inset"),_66=objj_msgSend(_63,"currentValueForThemeAttribute:","suppression-button-x-offset"),_67=objj_msgSend(_63,"currentValueForThemeAttribute:","suppression-button-y-offset"),_68=objj_msgSend(_63,"currentValueForThemeAttribute:","default-elements-margin"),_69=CGRectGetMaxY(objj_msgSend((_accessoryView||_informativeLabel),"frame"))+_68+_67;
objj_msgSend(_suppressionButton,"setTextColor:",objj_msgSend(_63,"currentValueForThemeAttribute:","suppression-button-text-color"));
objj_msgSend(_suppressionButton,"setFont:",objj_msgSend(_63,"currentValueForThemeAttribute:","suppression-button-text-font"));
objj_msgSend(_suppressionButton,"setTextShadowColor:",objj_msgSend(_63,"currentValueForThemeAttribute:","suppression-button-text-shadow-color"));
objj_msgSend(_suppressionButton,"setTextShadowOffset:",objj_msgSend(_63,"currentValueForThemeAttribute:","suppression-button-text-shadow-offset"));
objj_msgSend(_suppressionButton,"sizeToFit");
objj_msgSend(_suppressionButton,"setFrameOrigin:",CGPointMake(_65.left+_66,_69));
objj_msgSend(objj_msgSend(_window,"contentView"),"addSubview:",_suppressionButton);
}
}),new objj_method(sel_getUid("_layoutButtonsFromView:"),function(_6a,_6b,_6c){
with(_6a){
var _6d=objj_msgSend(_6a,"currentValueForThemeAttribute:","content-inset"),_6e=objj_msgSend(_6a,"currentValueForThemeAttribute:","size"),_6f=objj_msgSend(_6a,"currentValueForThemeAttribute:","button-offset"),_70=objj_msgSend(_6a,"currentValueForThemeAttribute:","help-image-left-offset"),_71=objj_msgSend(_buttons,"objectAtIndex:",0),_72=objj_msgSend(_6a,"currentValueForThemeAttribute:","default-elements-margin"),_73=objj_msgSend(objj_msgSend(_window,"contentView"),"frame").size,_74,_75;
objj_msgSend(_71,"setTheme:",objj_msgSend(_6a,"theme"));
objj_msgSend(_71,"sizeToFit");
_73.height=CGRectGetMaxY(objj_msgSend(_6c,"frame"))+_72+objj_msgSend(_71,"frameSize").height;
if(_73.height<_6e.height){
_73.height=_6e.height;
}
_74=_73.height-objj_msgSend(_71,"frameSize").height+_6f;
_75=_73.width-_6d.right;
for(var i=objj_msgSend(_buttons,"count")-1;i>=0;i--){
var _76=_buttons[i];
objj_msgSend(_76,"setTheme:",objj_msgSend(_6a,"theme"));
objj_msgSend(_76,"sizeToFit");
var _77=objj_msgSend(_76,"frame"),_78=MAX(80,CGRectGetWidth(_77)),_79=CGRectGetHeight(_77);
_75-=_78;
objj_msgSend(_76,"setFrame:",CGRectMake(_75,_74,_78,_79));
_75-=10;
}
if(_showHelp){
var _7a=objj_msgSend(_6a,"currentValueForThemeAttribute:","help-image"),_7b=objj_msgSend(_6a,"currentValueForThemeAttribute:","help-image-pressed"),_7c=_7a?objj_msgSend(_7a,"size"):CGSizeMakeZero(),_7d=CGRectMake(_70,_74,_7c.width,_7c.height);
objj_msgSend(_alertHelpButton,"setImage:",_7a);
objj_msgSend(_alertHelpButton,"setAlternateImage:",_7b);
objj_msgSend(_alertHelpButton,"setBordered:",NO);
objj_msgSend(_alertHelpButton,"setFrame:",_7d);
}
_73.height+=objj_msgSend(_71,"frameSize").height+_6d.bottom+_6f;
return _73;
}
}),new objj_method(sel_getUid("layout"),function(_7e,_7f){
with(_7e){
if(!_needsLayout){
return;
}
if(!_window){
objj_msgSend(_7e,"_createWindowWithStyle:",nil);
}
var _80=objj_msgSend(_7e,"currentValueForThemeAttribute:","image-offset"),_81=_icon,_82;
if(!_81){
switch(_alertStyle){
case CPWarningAlertStyle:
_81=objj_msgSend(_7e,"currentValueForThemeAttribute:","warning-image");
break;
case CPInformationalAlertStyle:
_81=objj_msgSend(_7e,"currentValueForThemeAttribute:","information-image");
break;
case CPCriticalAlertStyle:
_81=objj_msgSend(_7e,"currentValueForThemeAttribute:","error-image");
break;
}
}
objj_msgSend(_alertImageView,"setImage:",_81);
var _83=_81?objj_msgSend(_81,"size"):CGSizeMakeZero();
objj_msgSend(_alertImageView,"setFrame:",CGRectMake(_80.x,_80.y,_83.width,_83.height));
objj_msgSend(_7e,"_layoutMessageView");
objj_msgSend(_7e,"_layoutInformativeView");
objj_msgSend(_7e,"_layoutAccessoryView");
objj_msgSend(_7e,"_layoutSuppressionButton");
var _84=_informativeLabel;
if(_showSuppressionButton){
_84=_suppressionButton;
}else{
if(_accessoryView){
_84=_accessoryView;
}
}
_82=objj_msgSend(_7e,"_layoutButtonsFromView:",_84);
if(objj_msgSend(_window,"styleMask")&CPDocModalWindowMask){
_82.height-=26;
}
objj_msgSend(_window,"setFrameSize:",_82);
objj_msgSend(_window,"center");
_needsLayout=NO;
}
}),new objj_method(sel_getUid("runModal"),function(_85,_86){
with(_85){
if(!(objj_msgSend(_window,"styleMask")&_defaultWindowStyle)){
_needsLayout=YES;
objj_msgSend(_85,"_createWindowWithStyle:",_defaultWindowStyle);
}
objj_msgSend(_85,"layout");
objj_msgSend(CPApp,"runModalForWindow:",_window);
}
}),new objj_method(sel_getUid("beginSheetModalForWindow:modalDelegate:didEndSelector:contextInfo:"),function(_87,_88,_89,_8a,_8b,_8c){
with(_87){
if(!(objj_msgSend(_window,"styleMask")&CPDocModalWindowMask)){
_needsLayout=YES;
objj_msgSend(_87,"_createWindowWithStyle:",CPDocModalWindowMask);
}
objj_msgSend(_87,"layout");
_modalDelegate=_8a;
_didEndSelector=_8b;
objj_msgSend(CPApp,"beginSheet:modalForWindow:modalDelegate:didEndSelector:contextInfo:",_window,_89,_87,sel_getUid("_alertDidEnd:returnCode:contextInfo:"),_8c);
}
}),new objj_method(sel_getUid("beginSheetModalForWindow:"),function(_8d,_8e,_8f){
with(_8d){
objj_msgSend(_8d,"beginSheetModalForWindow:modalDelegate:didEndSelector:contextInfo:",_8f,nil,nil,nil);
}
}),new objj_method(sel_getUid("_createWindowWithStyle:"),function(_90,_91,_92){
with(_90){
var _93=CGRectMakeZero();
_93.size=objj_msgSend(_90,"currentValueForThemeAttribute:","size");
_window=objj_msgSend(objj_msgSend(CPWindow,"alloc"),"initWithContentRect:styleMask:",_93,_92||_defaultWindowStyle);
if(_title){
objj_msgSend(_window,"setTitle:",_title);
}
var _94=objj_msgSend(_window,"contentView"),_95=objj_msgSend(_buttons,"count");
if(_95){
while(_95--){
objj_msgSend(_94,"addSubview:",_buttons[_95]);
}
}else{
objj_msgSend(_90,"addButtonWithTitle:","OK");
}
objj_msgSend(_94,"addSubview:",_messageLabel);
objj_msgSend(_94,"addSubview:",_alertImageView);
objj_msgSend(_94,"addSubview:",_informativeLabel);
if(_showHelp){
objj_msgSend(_94,"addSubview:",_alertHelpButton);
}
}
}),new objj_method(sel_getUid("_showHelp:"),function(_96,_97,_98){
with(_96){
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("alertShowHelp:"))){
objj_msgSend(_delegate,"alertShowHelp:",_96);
}
}
}),new objj_method(sel_getUid("_takeReturnCodeFrom:"),function(_99,_9a,_9b){
with(_99){
if(objj_msgSend(_window,"isSheet")){
objj_msgSend(CPApp,"endSheet:returnCode:",_window,objj_msgSend(_9b,"tag"));
}else{
objj_msgSend(CPApp,"abortModal");
objj_msgSend(_window,"close");
objj_msgSend(_99,"_alertDidEnd:returnCode:contextInfo:",_window,objj_msgSend(_9b,"tag"),nil);
}
}
}),new objj_method(sel_getUid("_alertDidEnd:returnCode:contextInfo:"),function(_9c,_9d,_9e,_9f,_a0){
with(_9c){
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("alertDidEnd:returnCode:"))){
objj_msgSend(_delegate,"alertDidEnd:returnCode:",_9c,_9f);
}
if(_didEndSelector){
objj_msgSend(_modalDelegate,_didEndSelector,_9c,_9f,_a0);
}
_modalDelegate=nil;
_didEndSelector=nil;
}
})]);
class_addMethods(_2,[new objj_method(sel_getUid("alertWithMessageText:defaultButton:alternateButton:otherButton:informativeTextWithFormat:"),function(_a1,_a2,_a3,_a4,_a5,_a6,_a7){
with(_a1){
var _a8=objj_msgSend(objj_msgSend(CPAlert,"alloc"),"init");
objj_msgSend(_a8,"setMessageText:",_a3);
objj_msgSend(_a8,"addButtonWithTitle:",_a4);
if(_a5){
objj_msgSend(_a8,"addButtonWithTitle:",_a5);
}
if(_a6){
objj_msgSend(_a8,"addButtonWithTitle:",_a6);
}
if(_a7){
objj_msgSend(_a8,"setInformativeText:",_a7);
}
return _a8;
}
}),new objj_method(sel_getUid("alertWithError:"),function(_a9,_aa,_ab){
with(_a9){
var _ac=objj_msgSend(objj_msgSend(CPAlert,"alloc"),"init");
objj_msgSend(_ac,"setMessageText:",_ab);
objj_msgSend(_ac,"setAlertStyle:",CPCriticalAlertStyle);
return _ac;
}
}),new objj_method(sel_getUid("defaultThemeClass"),function(_ad,_ae){
with(_ad){
return "alert";
}
}),new objj_method(sel_getUid("themeAttributes"),function(_af,_b0){
with(_af){
return objj_msgSend(CPDictionary,"dictionaryWithObjects:forKeys:",[CGSizeMake(400,110),CGInsetMake(15,15,15,50),6,10,CPJustifiedTextAlignment,objj_msgSend(CPColor,"blackColor"),objj_msgSend(CPFont,"boldSystemFontOfSize:",13),objj_msgSend(CPNull,"null"),CGSizeMakeZero(),CPJustifiedTextAlignment,objj_msgSend(CPColor,"blackColor"),objj_msgSend(CPFont,"systemFontOfSize:",12),objj_msgSend(CPNull,"null"),CGSizeMakeZero(),CGPointMake(15,12),objj_msgSend(CPNull,"null"),objj_msgSend(CPNull,"null"),objj_msgSend(CPNull,"null"),objj_msgSend(CPNull,"null"),objj_msgSend(CPNull,"null"),objj_msgSend(CPNull,"null"),0,0,3,objj_msgSend(CPColor,"blackColor"),objj_msgSend(CPFont,"systemFontOfSize:",12),objj_msgSend(CPNull,"null"),0],["size","content-inset","informative-offset","button-offset","message-text-alignment","message-text-color","message-text-font","message-text-shadow-color","message-text-shadow-offset","informative-text-alignment","informative-text-color","informative-text-font","informative-text-shadow-color","informative-text-shadow-offset","image-offset","information-image","warning-image","error-image","help-image","help-image-left-offset","help-image-pressed","suppression-button-y-offset","suppression-button-x-offset","default-elements-margin","suppression-button-text-color","suppression-button-text-font","suppression-button-text-shadow-color","suppression-button-text-shadow-offset"]);
}
})]);
p;13;CPAnimation.jt;5491;@STATIC;1.0;I;21;Foundation/CPObject.jI;20;Foundation/CPTimer.ji;23;CAMediaTimingFunction.jt;5393;
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("Foundation/CPTimer.j",NO);
objj_executeFile("CAMediaTimingFunction.j",YES);
CPAnimationEaseInOut=0;
CPAnimationEaseIn=1;
CPAnimationEaseOut=2;
CPAnimationLinear=3;
ACTUAL_FRAME_RATE=0;
var _1=objj_allocateClassPair(CPObject,"CPAnimation"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_lastTime"),new objj_ivar("_duration"),new objj_ivar("_animationCurve"),new objj_ivar("_timingFunction"),new objj_ivar("_frameRate"),new objj_ivar("_progress"),new objj_ivar("_delegate"),new objj_ivar("_timer")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("initWithDuration:animationCurve:"),function(_3,_4,_5,_6){
with(_3){
_3=objj_msgSendSuper({receiver:_3,super_class:objj_getClass("CPAnimation").super_class},"init");
if(_3){
_progress=0;
_duration=MAX(0,_5);
_frameRate=60;
objj_msgSend(_3,"setAnimationCurve:",_6);
}
return _3;
}
}),new objj_method(sel_getUid("setAnimationCurve:"),function(_7,_8,_9){
with(_7){
switch(_9){
case CPAnimationEaseInOut:
timingFunctionName=kCAMediaTimingFunctionEaseInEaseOut;
break;
case CPAnimationEaseIn:
timingFunctionName=kCAMediaTimingFunctionEaseIn;
break;
case CPAnimationEaseOut:
timingFunctionName=kCAMediaTimingFunctionEaseOut;
break;
case CPAnimationLinear:
timingFunctionName=kCAMediaTimingFunctionLinear;
break;
default:
objj_msgSend(CPException,"raise:reason:",CPInvalidArgumentException,"Invalid value provided for animation curve");
break;
}
_animationCurve=_9;
_timingFunction=objj_msgSend(CAMediaTimingFunction,"functionWithName:",timingFunctionName);
}
}),new objj_method(sel_getUid("animationCurve"),function(_a,_b){
with(_a){
return _animationCurve;
}
}),new objj_method(sel_getUid("setDuration:"),function(_c,_d,_e){
with(_c){
if(_e<0){
objj_msgSend(CPException,"raise:reason:",CPInvalidArgumentException,"aDuration can't be negative");
}
_duration=_e;
}
}),new objj_method(sel_getUid("duration"),function(_f,_10){
with(_f){
return _duration;
}
}),new objj_method(sel_getUid("setFrameRate:"),function(_11,_12,_13){
with(_11){
if(_13<0){
objj_msgSend(CPException,"raise:reason:",CPInvalidArgumentException,"frameRate can't be negative");
}
_frameRate=_13;
}
}),new objj_method(sel_getUid("frameRate"),function(_14,_15){
with(_14){
return _frameRate;
}
}),new objj_method(sel_getUid("delegate"),function(_16,_17){
with(_16){
return _delegate;
}
}),new objj_method(sel_getUid("setDelegate:"),function(_18,_19,_1a){
with(_18){
_delegate=_1a;
}
}),new objj_method(sel_getUid("startAnimation"),function(_1b,_1c){
with(_1b){
if(_timer||_delegate&&objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("animationShouldStart:"))&&!objj_msgSend(_delegate,"animationShouldStart:",_1b)){
return;
}
if(_progress===1){
_progress=0;
}
ACTUAL_FRAME_RATE=0;
_lastTime=new Date();
_timer=objj_msgSend(CPTimer,"scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:",0,_1b,sel_getUid("animationTimerDidFire:"),nil,YES);
}
}),new objj_method(sel_getUid("animationTimerDidFire:"),function(_1d,_1e,_1f){
with(_1d){
var _20=new Date(),_21=MIN(1,objj_msgSend(_1d,"currentProgress")+(_20-_lastTime)/(_duration*1000));
_lastTime=_20;
++ACTUAL_FRAME_RATE;
objj_msgSend(_1d,"setCurrentProgress:",_21);
if(_21===1){
objj_msgSend(_timer,"invalidate");
_timer=nil;
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("animationDidEnd:"))){
objj_msgSend(_delegate,"animationDidEnd:",_1d);
}
}
}
}),new objj_method(sel_getUid("stopAnimation"),function(_22,_23){
with(_22){
if(!_timer){
return;
}
objj_msgSend(_timer,"invalidate");
_timer=nil;
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("animationDidStop:"))){
objj_msgSend(_delegate,"animationDidStop:",_22);
}
}
}),new objj_method(sel_getUid("isAnimating"),function(_24,_25){
with(_24){
return _timer;
}
}),new objj_method(sel_getUid("setCurrentProgress:"),function(_26,_27,_28){
with(_26){
_progress=_28;
}
}),new objj_method(sel_getUid("currentProgress"),function(_29,_2a){
with(_29){
return _progress;
}
}),new objj_method(sel_getUid("currentValue"),function(_2b,_2c){
with(_2b){
var t=objj_msgSend(_2b,"currentProgress");
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("animation:valueForProgress:"))){
return objj_msgSend(_delegate,"animation:valueForProgress:",_2b,t);
}
var c1=[],c2=[];
objj_msgSend(_timingFunction,"getControlPointAtIndex:values:",1,c1);
objj_msgSend(_timingFunction,"getControlPointAtIndex:values:",2,c2);
return _2d(t,c1[0],c1[1],c2[0],c2[1],_duration);
}
})]);
var _2d=_2d=function(t,p1x,p1y,p2x,p2y,_2e){
var ax=0,bx=0,cx=0,ay=0,by=0,cy=0;
sampleCurveX=function(t){
return ((ax*t+bx)*t+cx)*t;
};
sampleCurveY=function(t){
return ((ay*t+by)*t+cy)*t;
};
sampleCurveDerivativeX=function(t){
return (3*ax*t+2*bx)*t+cx;
};
solveEpsilon=function(_2f){
return 1/(200*_2f);
};
solve=function(x,_30){
return sampleCurveY(solveCurveX(x,_30));
};
solveCurveX=function(x,_31){
var t0,t1,t2=x,x2,d2,i=0;
for(;i<8;i++){
x2=sampleCurveX(t2)-x;
if(ABS(x2)<_31){
return t2;
}
d2=sampleCurveDerivativeX(t2);
if(ABS(d2)<0.000001){
break;
}
t2=t2-x2/d2;
}
t0=0;
t1=1;
t2=x;
if(t2<t0){
return t0;
}
if(t2>t1){
return t1;
}
while(t0<t1){
x2=sampleCurveX(t2);
if(ABS(x2-x)<_31){
return t2;
}
if(x>x2){
t0=t2;
}else{
t1=t2;
}
t2=(t1-t0)*0.5+t0;
}
return t2;
};
cx=3*p1x;
bx=3*(p2x-p1x)-cx;
ax=1-cx-bx;
cy=3*p1y;
by=3*(p2y-p1y)-cy;
ay=1-cy-by;
return solve(t,solveEpsilon(_2e));
};
p;15;CPApplication.jt;30030;@STATIC;1.0;I;21;Foundation/CPBundle.ji;17;CPCompatibility.ji;9;CPEvent.ji;8;CPMenu.ji;13;CPResponder.ji;22;CPDocumentController.ji;14;CPThemeBlend.ji;14;CPCibLoading.ji;12;CPPlatform.jt;29837;
objj_executeFile("Foundation/CPBundle.j",NO);
objj_executeFile("CPCompatibility.j",YES);
objj_executeFile("CPEvent.j",YES);
objj_executeFile("CPMenu.j",YES);
objj_executeFile("CPResponder.j",YES);
objj_executeFile("CPDocumentController.j",YES);
objj_executeFile("CPThemeBlend.j",YES);
objj_executeFile("CPCibLoading.j",YES);
objj_executeFile("CPPlatform.j",YES);
var _1="CPMainCibFile",_2="Main cib file base name";
CPApp=nil;
CPApplicationWillFinishLaunchingNotification="CPApplicationWillFinishLaunchingNotification";
CPApplicationDidFinishLaunchingNotification="CPApplicationDidFinishLaunchingNotification";
CPApplicationWillTerminateNotification="CPApplicationWillTerminateNotification";
CPApplicationWillBecomeActiveNotification="CPApplicationWillBecomeActiveNotification";
CPApplicationDidBecomeActiveNotification="CPApplicationDidBecomeActiveNotification";
CPApplicationWillResignActiveNotification="CPApplicationWillResignActiveNotification";
CPApplicationDidResignActiveNotification="CPApplicationDidResignActiveNotification";
CPTerminateNow=YES;
CPTerminateCancel=NO;
CPTerminateLater=-1;
CPRunStoppedResponse=-1000;
CPRunAbortedResponse=-1001;
CPRunContinuesResponse=-1002;
var _3=objj_allocateClassPair(CPResponder,"CPApplication"),_4=_3.isa;
class_addIvars(_3,[new objj_ivar("_eventListeners"),new objj_ivar("_currentEvent"),new objj_ivar("_windows"),new objj_ivar("_keyWindow"),new objj_ivar("_mainWindow"),new objj_ivar("_previousKeyWindow"),new objj_ivar("_previousMainWindow"),new objj_ivar("_documentController"),new objj_ivar("_currentSession"),new objj_ivar("_delegate"),new objj_ivar("_finishedLaunching"),new objj_ivar("_isActive"),new objj_ivar("_namedArgs"),new objj_ivar("_args"),new objj_ivar("_fullArgsString"),new objj_ivar("_applicationIconImage"),new objj_ivar("_aboutPanel"),new objj_ivar("_themeBlend")]);
objj_registerClassPair(_3);
class_addMethods(_3,[new objj_method(sel_getUid("themeBlend"),function(_5,_6){
with(_5){
return _themeBlend;
}
}),new objj_method(sel_getUid("setThemeBlend:"),function(_7,_8,_9){
with(_7){
_themeBlend=_9;
}
}),new objj_method(sel_getUid("init"),function(_a,_b){
with(_a){
_a=objj_msgSendSuper({receiver:_a,super_class:objj_getClass("CPApplication").super_class},"init");
CPApp=_a;
if(_a){
_eventListeners=[];
_windows=[];
objj_msgSend(_windows,"addObject:",nil);
}
return _a;
}
}),new objj_method(sel_getUid("setDelegate:"),function(_c,_d,_e){
with(_c){
if(_delegate==_e){
return;
}
var _f=objj_msgSend(CPNotificationCenter,"defaultCenter"),_10=[CPApplicationWillFinishLaunchingNotification,sel_getUid("applicationWillFinishLaunching:"),CPApplicationDidFinishLaunchingNotification,sel_getUid("applicationDidFinishLaunching:"),CPApplicationWillBecomeActiveNotification,sel_getUid("applicationWillBecomeActive:"),CPApplicationDidBecomeActiveNotification,sel_getUid("applicationDidBecomeActive:"),CPApplicationWillResignActiveNotification,sel_getUid("applicationWillResignActive:"),CPApplicationDidResignActiveNotification,sel_getUid("applicationDidResignActive:"),CPApplicationWillTerminateNotification,sel_getUid("applicationWillTerminate:")],_11=objj_msgSend(_10,"count");
if(_delegate){
var _12=0;
for(;_12<_11;_12+=2){
var _13=_10[_12],_14=_10[_12+1];
if(objj_msgSend(_delegate,"respondsToSelector:",_14)){
objj_msgSend(_f,"removeObserver:name:object:",_delegate,_13,_c);
}
}
}
_delegate=_e;
var _12=0;
for(;_12<_11;_12+=2){
var _13=_10[_12],_14=_10[_12+1];
if(objj_msgSend(_delegate,"respondsToSelector:",_14)){
objj_msgSend(_f,"addObserver:selector:name:object:",_delegate,_14,_13,_c);
}
}
}
}),new objj_method(sel_getUid("delegate"),function(_15,_16){
with(_15){
return _delegate;
}
}),new objj_method(sel_getUid("finishLaunching"),function(_17,_18){
with(_17){
window.status=" ";
objj_msgSend(objj_msgSend(CPCursor,"arrowCursor"),"set");
var _19=objj_msgSend(CPBundle,"mainBundle"),_1a=objj_msgSend(_19,"objectForInfoDictionaryKey:","CPBundleDocumentTypes");
if(objj_msgSend(_1a,"count")>0){
_documentController=objj_msgSend(CPDocumentController,"sharedDocumentController");
}
var _1b=objj_msgSend(_19,"objectForInfoDictionaryKey:","CPApplicationDelegateClass");
if(_1b){
var _1c=objj_getClass(_1b);
if(_1c){
if(objj_msgSend(_documentController,"class")==_1c){
objj_msgSend(_17,"setDelegate:",_documentController);
}else{
objj_msgSend(_17,"setDelegate:",objj_msgSend(objj_msgSend(_1c,"alloc"),"init"));
}
}
}
var _1d=objj_msgSend(CPNotificationCenter,"defaultCenter");
objj_msgSend(_1d,"postNotificationName:object:",CPApplicationWillFinishLaunchingNotification,_17);
var _1e=!!_documentController,_1f=window.cpOpeningURLStrings&&window.cpOpeningURLStrings(),_20=0,_21=objj_msgSend(_1f,"count");
for(;_20<_21;++_20){
_1e=!objj_msgSend(_17,"_openURL:",objj_msgSend(CPURL,"URLWithString:",_1f[_20]))||_1e;
}
if(_1e&&objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("applicationShouldOpenUntitledFile:"))){
_1e=objj_msgSend(_delegate,"applicationShouldOpenUntitledFile:",_17);
}
if(_1e){
objj_msgSend(_documentController,"newDocument:",_17);
}
objj_msgSend(_documentController,"_updateRecentDocumentsMenu");
objj_msgSend(_1d,"postNotificationName:object:",CPApplicationDidFinishLaunchingNotification,_17);
objj_msgSend(objj_msgSend(CPRunLoop,"currentRunLoop"),"limitDateForMode:",CPDefaultRunLoopMode);
_finishedLaunching=YES;
}
}),new objj_method(sel_getUid("terminate:"),function(_22,_23,_24){
with(_22){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:",CPApplicationWillTerminateNotification,_22);
if(!objj_msgSend(CPPlatform,"isBrowser")){
objj_msgSend(objj_msgSend(CPDocumentController,"sharedDocumentController"),"closeAllDocumentsWithDelegate:didCloseAllSelector:contextInfo:",_22,sel_getUid("_documentController:didCloseAll:context:"),nil);
}else{
objj_msgSend(objj_msgSend(objj_msgSend(_22,"keyWindow"),"platformWindow"),"_propagateCurrentDOMEvent:",YES);
}
}
}),new objj_method(sel_getUid("setApplicationIconImage:"),function(_25,_26,_27){
with(_25){
_applicationIconImage=_27;
}
}),new objj_method(sel_getUid("applicationIconImage"),function(_28,_29){
with(_28){
if(_applicationIconImage){
return _applicationIconImage;
}
var _2a=objj_msgSend(objj_msgSend(CPBundle,"mainBundle"),"objectForInfoDictionaryKey:","CPApplicationIcon");
if(_2a){
_applicationIconImage=objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:",_2a);
}
return _applicationIconImage;
}
}),new objj_method(sel_getUid("orderFrontStandardAboutPanel:"),function(_2b,_2c,_2d){
with(_2b){
objj_msgSend(_2b,"orderFrontStandardAboutPanelWithOptions:",nil);
}
}),new objj_method(sel_getUid("orderFrontStandardAboutPanelWithOptions:"),function(_2e,_2f,_30){
with(_2e){
if(!_aboutPanel){
var _31=objj_msgSend(objj_msgSend(CPBundle,"mainBundle"),"infoDictionary"),_32=objj_msgSend(_30,"objectForKey:","ApplicationName")||objj_msgSend(_31,"objectForKey:","CPBundleName"),_33=objj_msgSend(_30,"objectForKey:","ApplicationIcon")||objj_msgSend(_2e,"applicationIconImage"),_34=objj_msgSend(_30,"objectForKey:","Version")||objj_msgSend(_31,"objectForKey:","CPBundleVersion"),_35=objj_msgSend(_30,"objectForKey:","ApplicationVersion")||objj_msgSend(_31,"objectForKey:","CPBundleShortVersionString"),_36=objj_msgSend(_30,"objectForKey:","Copyright")||objj_msgSend(_31,"objectForKey:","CPHumanReadableCopyright");
var _37=objj_msgSend(objj_msgSend(CPBundle,"bundleForClass:",objj_msgSend(CPWindowController,"class")),"pathForResource:","AboutPanel.cib"),_38=objj_msgSend(CPWindowController,"alloc"),_38=objj_msgSend(_38,"initWithWindowCibPath:owner:",_37,_38),_39=objj_msgSend(_38,"window"),_3a=objj_msgSend(_39,"contentView"),_3b=objj_msgSend(_3a,"viewWithTag:",1),_3c=objj_msgSend(_3a,"viewWithTag:",2),_3d=objj_msgSend(_3a,"viewWithTag:",3),_3e=objj_msgSend(_3a,"viewWithTag:",4),_3f=objj_msgSend(objj_msgSend(CPBundle,"bundleForClass:",objj_msgSend(_2e,"class")),"pathForResource:","standardApplicationIcon.png");
objj_msgSend(_3c,"setFont:",objj_msgSend(CPFont,"boldSystemFontOfSize:",14));
objj_msgSend(_3c,"setAlignment:",CPCenterTextAlignment);
objj_msgSend(_3d,"setAlignment:",CPCenterTextAlignment);
objj_msgSend(_3e,"setAlignment:",CPCenterTextAlignment);
objj_msgSend(_3b,"setImage:",_33||objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",_3f,CGSizeMake(256,256)));
objj_msgSend(_3c,"setStringValue:",_32||"");
if(_35&&_34){
objj_msgSend(_3d,"setStringValue:","Version "+_35+" ("+_34+")");
}else{
if(_35||_34){
objj_msgSend(_3d,"setStringValue:","Version "+(_35||_34));
}else{
objj_msgSend(_3d,"setStringValue:","");
}
}
objj_msgSend(_3e,"setStringValue:",_36||"");
objj_msgSend(_39,"center");
_aboutPanel=_39;
}
objj_msgSend(_aboutPanel,"orderFront:",_2e);
}
}),new objj_method(sel_getUid("_documentController:didCloseAll:context:"),function(_40,_41,_42,_43,_44){
with(_40){
if(_43){
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("applicationShouldTerminate:"))){
objj_msgSend(_40,"replyToApplicationShouldTerminate:",objj_msgSend(_delegate,"applicationShouldTerminate:",_40));
}else{
objj_msgSend(_40,"replyToApplicationShouldTerminate:",YES);
}
}
}
}),new objj_method(sel_getUid("replyToApplicationShouldTerminate:"),function(_45,_46,_47){
with(_45){
if(_47==CPTerminateNow){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:",CPApplicationWillTerminateNotification,_45);
objj_msgSend(CPPlatform,"terminateApplication");
}
}
}),new objj_method(sel_getUid("activateIgnoringOtherApps:"),function(_48,_49,_4a){
with(_48){
objj_msgSend(_48,"_willBecomeActive");
objj_msgSend(CPPlatform,"activateIgnoringOtherApps:",_4a);
_isActive=YES;
objj_msgSend(_48,"_willResignActive");
}
}),new objj_method(sel_getUid("deactivate"),function(_4b,_4c){
with(_4b){
objj_msgSend(_4b,"_willResignActive");
objj_msgSend(CPPlatform,"deactivate");
_isActive=NO;
objj_msgSend(_4b,"_didResignActive");
}
}),new objj_method(sel_getUid("isActive"),function(_4d,_4e){
with(_4d){
return _isActive;
}
}),new objj_method(sel_getUid("hideOtherApplications:"),function(_4f,_50,_51){
with(_4f){
objj_msgSend(CPPlatform,"hideOtherApplications:",_4f);
}
}),new objj_method(sel_getUid("run"),function(_52,_53){
with(_52){
objj_msgSend(_52,"finishLaunching");
}
}),new objj_method(sel_getUid("runModalForWindow:"),function(_54,_55,_56){
with(_54){
objj_msgSend(_54,"runModalSession:",objj_msgSend(_54,"beginModalSessionForWindow:",_56));
}
}),new objj_method(sel_getUid("stopModalWithCode:"),function(_57,_58,_59){
with(_57){
if(!_currentSession){
return;
}
_currentSession._state=_59;
_currentSession=_currentSession._previous;
objj_msgSend(_57,"_removeRunModalLoop");
}
}),new objj_method(sel_getUid("_removeRunModalLoop"),function(_5a,_5b){
with(_5a){
var _5c=_eventListeners.length;
while(_5c--){
if(_eventListeners[_5c]._callback===_CPRunModalLoop){
_eventListeners.splice(_5c,1);
return;
}
}
}
}),new objj_method(sel_getUid("stopModal"),function(_5d,_5e){
with(_5d){
objj_msgSend(_5d,"stopModalWithCode:",CPRunStoppedResponse);
}
}),new objj_method(sel_getUid("abortModal"),function(_5f,_60){
with(_5f){
objj_msgSend(_5f,"stopModalWithCode:",CPRunAbortedResponse);
}
}),new objj_method(sel_getUid("beginModalSessionForWindow:"),function(_61,_62,_63){
with(_61){
return _64(_63,0);
}
}),new objj_method(sel_getUid("runModalSession:"),function(_65,_66,_67){
with(_65){
_67._previous=_currentSession;
_currentSession=_67;
var _68=_67._window;
objj_msgSend(_68,"center");
objj_msgSend(_68,"makeKeyWindow");
objj_msgSend(_68,"orderFront:",_65);
objj_msgSend(CPApp,"setCallback:forNextEventMatchingMask:untilDate:inMode:dequeue:",_CPRunModalLoop,CPAnyEventMask,nil,0,NO);
}
}),new objj_method(sel_getUid("modalWindow"),function(_69,_6a){
with(_69){
if(!_currentSession){
return nil;
}
return _currentSession._window;
}
}),new objj_method(sel_getUid("_handleKeyEquivalent:"),function(_6b,_6c,_6d){
with(_6b){
return objj_msgSend(objj_msgSend(_6b,"keyWindow"),"performKeyEquivalent:",_6d)||objj_msgSend(objj_msgSend(_6b,"mainMenu"),"performKeyEquivalent:",_6d);
}
}),new objj_method(sel_getUid("sendEvent:"),function(_6e,_6f,_70){
with(_6e){
_currentEvent=_70;
var _71=objj_msgSend(objj_msgSend(objj_msgSend(_70,"window"),"platformWindow"),"_willPropagateCurrentDOMEvent");
objj_msgSend(objj_msgSend(objj_msgSend(_70,"window"),"platformWindow"),"_propagateCurrentDOMEvent:",NO);
if(objj_msgSend(_70,"_couldBeKeyEquivalent")&&objj_msgSend(_6e,"_handleKeyEquivalent:",_70)){
var _72=objj_msgSend(_70,"characters"),_73=objj_msgSend(_70,"modifierFlags");
if((_72=="c"||_72=="x"||_72=="v")&&(_73&CPPlatformActionKeyMask)){
objj_msgSend(objj_msgSend(objj_msgSend(_70,"window"),"platformWindow"),"_propagateCurrentDOMEvent:",YES);
}
return;
}
objj_msgSend(objj_msgSend(objj_msgSend(_70,"window"),"platformWindow"),"_propagateCurrentDOMEvent:",_71);
if(_eventListeners.length){
if(_eventListeners[_eventListeners.length-1]._mask&(1<<objj_msgSend(_70,"type"))){
_eventListeners.pop()._callback(_70);
}
return;
}
objj_msgSend(objj_msgSend(_70,"window"),"sendEvent:",_70);
}
}),new objj_method(sel_getUid("doCommandBySelector:"),function(_74,_75,_76){
with(_74){
if(objj_msgSend(_delegate,"respondsToSelector:",_76)){
objj_msgSend(_delegate,"performSelector:",_76);
}else{
objj_msgSendSuper({receiver:_74,super_class:objj_getClass("CPApplication").super_class},"doCommandBySelector:",_76);
}
}
}),new objj_method(sel_getUid("keyWindow"),function(_77,_78){
with(_77){
return _keyWindow;
}
}),new objj_method(sel_getUid("mainWindow"),function(_79,_7a){
with(_79){
return _mainWindow;
}
}),new objj_method(sel_getUid("windowWithWindowNumber:"),function(_7b,_7c,_7d){
with(_7b){
return _windows[_7d];
}
}),new objj_method(sel_getUid("windows"),function(_7e,_7f){
with(_7e){
return _windows;
}
}),new objj_method(sel_getUid("orderedWindows"),function(_80,_81){
with(_80){
return CPWindowObjectList();
}
}),new objj_method(sel_getUid("hide:"),function(_82,_83,_84){
with(_82){
objj_msgSend(CPPlatform,"hide:",_82);
}
}),new objj_method(sel_getUid("mainMenu"),function(_85,_86){
with(_85){
return objj_msgSend(_85,"menu");
}
}),new objj_method(sel_getUid("setMainMenu:"),function(_87,_88,_89){
with(_87){
objj_msgSend(_87,"setMenu:",_89);
}
}),new objj_method(sel_getUid("setMenu:"),function(_8a,_8b,_8c){
with(_8a){
if(objj_msgSend(_8c,"_menuName")==="CPMainMenu"){
if(objj_msgSend(_8a,"menu")===_8c){
return;
}
objj_msgSendSuper({receiver:_8a,super_class:objj_getClass("CPApplication").super_class},"setMenu:",_8c);
if(objj_msgSend(CPPlatform,"supportsNativeMainMenu")){
window.cpSetMainMenu(objj_msgSend(_8a,"menu"));
}
}else{
objj_msgSend(_8c,"_setMenuName:","CPMainMenu");
}
}
}),new objj_method(sel_getUid("orderFrontColorPanel:"),function(_8d,_8e,_8f){
with(_8d){
objj_msgSend(objj_msgSend(CPColorPanel,"sharedColorPanel"),"orderFront:",_8d);
}
}),new objj_method(sel_getUid("tryToPerform:with:"),function(_90,_91,_92,_93){
with(_90){
if(!_92){
return NO;
}
if(objj_msgSendSuper({receiver:_90,super_class:objj_getClass("CPApplication").super_class},"tryToPerform:with:",_92,_93)){
return YES;
}
if(objj_msgSend(_delegate,"respondsToSelector:",_92)){
objj_msgSend(_delegate,"performSelector:withObject:",_92,_93);
return YES;
}
return NO;
}
}),new objj_method(sel_getUid("sendAction:to:from:"),function(_94,_95,_96,_97,_98){
with(_94){
var _99=objj_msgSend(_94,"targetForAction:to:from:",_96,_97,_98);
if(!_99){
return NO;
}
objj_msgSend(_99,"performSelector:withObject:",_96,_98);
return YES;
}
}),new objj_method(sel_getUid("targetForAction:to:from:"),function(_9a,_9b,_9c,_9d,_9e){
with(_9a){
if(!_9c){
return nil;
}
if(_9d){
return _9d;
}
return objj_msgSend(_9a,"targetForAction:",_9c);
}
}),new objj_method(sel_getUid("_targetForWindow:action:"),function(_9f,_a0,_a1,_a2){
with(_9f){
var _a3=objj_msgSend(_a1,"firstResponder"),_a4=YES;
while(_a3){
if(objj_msgSend(_a3,"respondsToSelector:",_a2)){
return _a3;
}
if(_a3==_a1){
_a4=NO;
}
_a3=objj_msgSend(_a3,"nextResponder");
}
if(_a4&&objj_msgSend(_a1,"respondsToSelector:",_a2)){
return _a1;
}
var _a5=objj_msgSend(_a1,"delegate");
if(objj_msgSend(_a5,"respondsToSelector:",_a2)){
return _a5;
}
var _a6=objj_msgSend(_a1,"windowController");
if(objj_msgSend(_a6,"respondsToSelector:",_a2)){
return _a6;
}
var _a7=objj_msgSend(_a6,"document");
if(_a7!==_a5&&objj_msgSend(_a7,"respondsToSelector:",_a2)){
return _a7;
}
return nil;
}
}),new objj_method(sel_getUid("targetForAction:"),function(_a8,_a9,_aa){
with(_a8){
if(!_aa){
return nil;
}
var _ab=objj_msgSend(_a8,"_targetForWindow:action:",objj_msgSend(_a8,"keyWindow"),_aa);
if(_ab){
return _ab;
}
_ab=objj_msgSend(_a8,"_targetForWindow:action:",objj_msgSend(_a8,"mainWindow"),_aa);
if(_ab){
return _ab;
}
if(objj_msgSend(_a8,"respondsToSelector:",_aa)){
return _a8;
}
if(objj_msgSend(_delegate,"respondsToSelector:",_aa)){
return _delegate;
}
if(objj_msgSend(_documentController,"respondsToSelector:",_aa)){
return _documentController;
}
return nil;
}
}),new objj_method(sel_getUid("setCallback:forNextEventMatchingMask:untilDate:inMode:dequeue:"),function(_ac,_ad,_ae,_af,_b0,_b1,_b2){
with(_ac){
_eventListeners.push(_b3(_af,_ae));
}
}),new objj_method(sel_getUid("setTarget:selector:forNextEventMatchingMask:untilDate:inMode:dequeue:"),function(_b4,_b5,_b6,_b7,_b8,_b9,_ba,_bb){
with(_b4){
_eventListeners.push(_b3(_b8,function(_bc){
objj_msgSend(_b6,_b7,_bc);
}));
}
}),new objj_method(sel_getUid("currentEvent"),function(_bd,_be){
with(_bd){
return _currentEvent;
}
}),new objj_method(sel_getUid("beginSheet:modalForWindow:modalDelegate:didEndSelector:contextInfo:"),function(_bf,_c0,_c1,_c2,_c3,_c4,_c5){
with(_bf){
var _c6=objj_msgSend(_c1,"styleMask");
if(!(_c6&CPDocModalWindowMask)){
objj_msgSend(CPException,"raise:reason:",CPInternalInconsistencyException,"Currently only CPDocModalWindowMask style mask is supported for attached sheets");
return;
}
objj_msgSend(_c2,"orderFront:",_bf);
objj_msgSend(_c1,"setPlatformWindow:",objj_msgSend(_c2,"platformWindow"));
objj_msgSend(_c2,"_attachSheet:modalDelegate:didEndSelector:contextInfo:",_c1,_c3,_c4,_c5);
}
}),new objj_method(sel_getUid("endSheet:returnCode:"),function(_c7,_c8,_c9,_ca){
with(_c7){
var _cb=objj_msgSend(_windows,"count");
while(--_cb>=0){
var _cc=objj_msgSend(_windows,"objectAtIndex:",_cb),_cd=_cc._sheetContext;
if(_cd!=nil&&_cd["sheet"]===_c9){
_cd["returnCode"]=_ca;
objj_msgSend(_cc,"_detachSheetWindow");
return;
}
}
}
}),new objj_method(sel_getUid("endSheet:"),function(_ce,_cf,_d0){
with(_ce){
objj_msgSend(_ce,"endSheet:returnCode:",_d0,0);
}
}),new objj_method(sel_getUid("arguments"),function(_d1,_d2){
with(_d1){
if(_fullArgsString!==window.location.hash){
objj_msgSend(_d1,"_reloadArguments");
}
return _args;
}
}),new objj_method(sel_getUid("setArguments:"),function(_d3,_d4,_d5){
with(_d3){
if(!_d5||_d5.length==0){
_args=[];
window.location.hash="#";
return;
}
if(!objj_msgSend(_d5,"isKindOfClass:",CPArray)){
_d5=objj_msgSend(CPArray,"arrayWithObject:",_d5);
}
_args=_d5;
var _d6=objj_msgSend(_args,"copy");
for(var i=0,_d7=_d6.length;i<_d7;i++){
_d6[i]=encodeURIComponent(_d6[i]);
}
var _d8=objj_msgSend(_d6,"componentsJoinedByString:","/");
window.location.hash="#"+_d8;
}
}),new objj_method(sel_getUid("_reloadArguments"),function(_d9,_da){
with(_d9){
_fullArgsString=window.location.hash;
if(_fullArgsString.length){
var _db=_fullArgsString.substring(1).split("/");
for(var i=0,_dc=_db.length;i<_dc;i++){
_db[i]=decodeURIComponent(_db[i]);
}
_args=_db;
}else{
_args=[];
}
}
}),new objj_method(sel_getUid("namedArguments"),function(_dd,_de){
with(_dd){
return _namedArgs;
}
}),new objj_method(sel_getUid("_openURL:"),function(_df,_e0,_e1){
with(_df){
if(_delegate&&objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("application:openFile:"))){
CPLog.warn("application:openFile: is deprecated, use application:openURL: instead.");
return objj_msgSend(_delegate,"application:openFile:",_df,objj_msgSend(_e1,"absoluteString"));
}
if(_delegate&&objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("application:openURL:"))){
return objj_msgSend(_delegate,"application:openURL:",_df,_e1);
}
return !!objj_msgSend(_documentController,"openDocumentWithContentsOfURL:display:error:",_e1,YES,NULL);
}
}),new objj_method(sel_getUid("_willBecomeActive"),function(_e2,_e3){
with(_e2){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:userInfo:",CPApplicationWillBecomeActiveNotification,_e2,nil);
}
}),new objj_method(sel_getUid("_didBecomeActive"),function(_e4,_e5){
with(_e4){
if(!objj_msgSend(_e4,"keyWindow")&&_previousKeyWindow&&objj_msgSend(objj_msgSend(_e4,"windows"),"indexOfObjectIdenticalTo:",_previousKeyWindow)!==CPNotFound){
objj_msgSend(_previousKeyWindow,"makeKeyWindow");
}
if(!objj_msgSend(_e4,"mainWindow")&&_previousMainWindow&&objj_msgSend(objj_msgSend(_e4,"windows"),"indexOfObjectIdenticalTo:",_previousMainWindow)!==CPNotFound){
objj_msgSend(_previousMainWindow,"makeMainWindow");
}
if(objj_msgSend(_e4,"keyWindow")){
objj_msgSend(objj_msgSend(_e4,"keyWindow"),"orderFront:",_e4);
}else{
if(objj_msgSend(_e4,"mainWindow")){
objj_msgSend(objj_msgSend(_e4,"mainWindow"),"makeKeyAndOrderFront:",_e4);
}else{
objj_msgSend(objj_msgSend(_e4,"mainMenu")._menuWindow,"makeKeyWindow");
}
}
_previousKeyWindow=nil;
_previousMainWindow=nil;
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:userInfo:",CPApplicationDidBecomeActiveNotification,_e4,nil);
}
}),new objj_method(sel_getUid("_willResignActive"),function(_e6,_e7){
with(_e6){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:userInfo:",CPApplicationWillResignActiveNotification,_e6,nil);
}
}),new objj_method(sel_getUid("_didResignActive"),function(_e8,_e9){
with(_e8){
if(_e8._activeMenu){
objj_msgSend(_e8._activeMenu,"cancelTracking");
}
if(objj_msgSend(_e8,"keyWindow")){
_previousKeyWindow=objj_msgSend(_e8,"keyWindow");
objj_msgSend(_previousKeyWindow,"resignKeyWindow");
}
if(objj_msgSend(_e8,"mainWindow")){
_previousMainWindow=objj_msgSend(_e8,"mainWindow");
objj_msgSend(_previousMainWindow,"resignMainWindow");
}
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:userInfo:",CPApplicationDidResignActiveNotification,_e8,nil);
}
})]);
class_addMethods(_4,[new objj_method(sel_getUid("sharedApplication"),function(_ea,_eb){
with(_ea){
if(!CPApp){
CPApp=objj_msgSend(objj_msgSend(CPApplication,"alloc"),"init");
}
return CPApp;
}
}),new objj_method(sel_getUid("defaultThemeName"),function(_ec,_ed){
with(_ec){
return (objj_msgSend(objj_msgSend(CPBundle,"mainBundle"),"objectForInfoDictionaryKey:","CPDefaultTheme")||"Aristo");
}
})]);
var _64=function(_ee,_ef){
return {_window:_ee,_state:CPRunContinuesResponse,_previous:nil};
};
var _b3=function(_f0,_f1){
return {_mask:_f0,_callback:_f1};
};
_CPRunModalLoop=function(_f2){
objj_msgSend(CPApp,"setCallback:forNextEventMatchingMask:untilDate:inMode:dequeue:",_CPRunModalLoop,CPAnyEventMask,nil,0,NO);
var _f3=objj_msgSend(_f2,"window"),_f4=CPApp._currentSession;
if(_f3==_f4._window||objj_msgSend(_f3,"worksWhenModal")){
objj_msgSend(_f3,"sendEvent:",_f2);
}
};
CPApplicationMain=function(_f5,_f6){
if(window.parent!==window&&typeof window.parent._childAppIsStarting==="function"){
window.parent._childAppIsStarting(window);
}
var _f7=objj_msgSend(CPBundle,"mainBundle"),_f8=objj_msgSend(_f7,"principalClass");
if(!_f8){
_f8=objj_msgSend(CPApplication,"class");
}
objj_msgSend(_f8,"sharedApplication");
if(objj_msgSend(_f5,"containsObject:","debug")){
CPLogRegister(CPLogPopup);
}
CPApp._args=_f5;
CPApp._namedArgs=_f6;
objj_msgSend(_CPAppBootstrapper,"performActions");
};
var _f9=nil;
var _3=objj_allocateClassPair(CPObject,"_CPAppBootstrapper"),_4=_3.isa;
objj_registerClassPair(_3);
class_addMethods(_4,[new objj_method(sel_getUid("actions"),function(_fa,_fb){
with(_fa){
return [sel_getUid("bootstrapPlatform"),sel_getUid("loadDefaultTheme"),sel_getUid("loadMainCibFile")];
}
}),new objj_method(sel_getUid("performActions"),function(_fc,_fd){
with(_fc){
if(!_f9){
_f9=objj_msgSend(_fc,"actions");
}
while(_f9.length){
var _fe=_f9.shift();
if(objj_msgSend(_fc,_fe)){
return;
}
}
objj_msgSend(CPApp,"run");
}
}),new objj_method(sel_getUid("bootstrapPlatform"),function(_ff,_100){
with(_ff){
return objj_msgSend(CPPlatform,"bootstrap");
}
}),new objj_method(sel_getUid("loadDefaultTheme"),function(self,_101){
with(self){
var _102=objj_msgSend(CPApplication,"defaultThemeName"),_103=nil;
if(_102==="Aristo"){
_103=objj_msgSend(objj_msgSend(CPBundle,"bundleForClass:",objj_msgSend(CPApplication,"class")),"pathForResource:",_102+".blend");
}else{
_103=objj_msgSend(objj_msgSend(CPBundle,"mainBundle"),"pathForResource:",_102+".blend");
}
var _104=objj_msgSend(objj_msgSend(CPThemeBlend,"alloc"),"initWithContentsOfURL:",_103);
objj_msgSend(_104,"loadWithDelegate:",self);
return YES;
}
}),new objj_method(sel_getUid("blendDidFinishLoading:"),function(self,_105,_106){
with(self){
objj_msgSend(objj_msgSend(CPApplication,"sharedApplication"),"setThemeBlend:",_106);
objj_msgSend(CPTheme,"setDefaultTheme:",objj_msgSend(CPTheme,"themeNamed:",objj_msgSend(CPApplication,"defaultThemeName")));
objj_msgSend(self,"performActions");
}
}),new objj_method(sel_getUid("loadMainCibFile"),function(self,_107){
with(self){
var _108=objj_msgSend(CPBundle,"mainBundle"),_109=objj_msgSend(_108,"objectForInfoDictionaryKey:",_1)||objj_msgSend(_108,"objectForInfoDictionaryKey:",_2);
if(_109){
objj_msgSend(_108,"loadCibFile:externalNameTable:loadDelegate:",_109,objj_msgSend(CPDictionary,"dictionaryWithObject:forKey:",CPApp,CPCibOwner),self);
return YES;
}else{
objj_msgSend(self,"loadCiblessBrowserMainMenu");
}
return NO;
}
}),new objj_method(sel_getUid("loadCiblessBrowserMainMenu"),function(self,_10a){
with(self){
var _10b=objj_msgSend(objj_msgSend(CPMenu,"alloc"),"initWithTitle:","MainMenu");
objj_msgSend(_10b,"setAutoenablesItems:",NO);
var _10c=objj_msgSend(CPBundle,"bundleForClass:",objj_msgSend(CPApplication,"class")),_10d=objj_msgSend(objj_msgSend(CPMenuItem,"alloc"),"initWithTitle:action:keyEquivalent:","New",sel_getUid("newDocument:"),"n");
objj_msgSend(_10d,"setImage:",objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_10c,"pathForResource:","CPApplication/New.png"),CGSizeMake(16,16)));
objj_msgSend(_10d,"setAlternateImage:",objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_10c,"pathForResource:","CPApplication/NewHighlighted.png"),CGSizeMake(16,16)));
objj_msgSend(_10b,"addItem:",_10d);
var _10e=objj_msgSend(objj_msgSend(CPMenuItem,"alloc"),"initWithTitle:action:keyEquivalent:","Open",sel_getUid("openDocument:"),"o");
objj_msgSend(_10e,"setImage:",objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_10c,"pathForResource:","CPApplication/Open.png"),CGSizeMake(16,16)));
objj_msgSend(_10e,"setAlternateImage:",objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_10c,"pathForResource:","CPApplication/OpenHighlighted.png"),CGSizeMake(16,16)));
objj_msgSend(_10b,"addItem:",_10e);
var _10f=objj_msgSend(objj_msgSend(CPMenu,"alloc"),"initWithTitle:","Save"),_110=objj_msgSend(objj_msgSend(CPMenuItem,"alloc"),"initWithTitle:action:keyEquivalent:","Save",sel_getUid("saveDocument:"),nil);
objj_msgSend(_110,"setImage:",objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_10c,"pathForResource:","CPApplication/Save.png"),CGSizeMake(16,16)));
objj_msgSend(_110,"setAlternateImage:",objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_10c,"pathForResource:","CPApplication/SaveHighlighted.png"),CGSizeMake(16,16)));
objj_msgSend(_10f,"addItem:",objj_msgSend(objj_msgSend(CPMenuItem,"alloc"),"initWithTitle:action:keyEquivalent:","Save",sel_getUid("saveDocument:"),"s"));
objj_msgSend(_10f,"addItem:",objj_msgSend(objj_msgSend(CPMenuItem,"alloc"),"initWithTitle:action:keyEquivalent:","Save As",sel_getUid("saveDocumentAs:"),nil));
objj_msgSend(_110,"setSubmenu:",_10f);
objj_msgSend(_10b,"addItem:",_110);
var _111=objj_msgSend(objj_msgSend(CPMenuItem,"alloc"),"initWithTitle:action:keyEquivalent:","Edit",nil,nil),_112=objj_msgSend(objj_msgSend(CPMenu,"alloc"),"initWithTitle:","Edit"),_113=objj_msgSend(objj_msgSend(CPMenuItem,"alloc"),"initWithTitle:action:keyEquivalent:","Undo",sel_getUid("undo:"),CPUndoKeyEquivalent),_114=objj_msgSend(objj_msgSend(CPMenuItem,"alloc"),"initWithTitle:action:keyEquivalent:","Redo",sel_getUid("redo:"),CPRedoKeyEquivalent);
objj_msgSend(_113,"setKeyEquivalentModifierMask:",CPUndoKeyEquivalentModifierMask);
objj_msgSend(_114,"setKeyEquivalentModifierMask:",CPRedoKeyEquivalentModifierMask);
objj_msgSend(_112,"addItem:",_113);
objj_msgSend(_112,"addItem:",_114);
objj_msgSend(_112,"addItem:",objj_msgSend(objj_msgSend(CPMenuItem,"alloc"),"initWithTitle:action:keyEquivalent:","Cut",sel_getUid("cut:"),"x")),objj_msgSend(_112,"addItem:",objj_msgSend(objj_msgSend(CPMenuItem,"alloc"),"initWithTitle:action:keyEquivalent:","Copy",sel_getUid("copy:"),"c")),objj_msgSend(_112,"addItem:",objj_msgSend(objj_msgSend(CPMenuItem,"alloc"),"initWithTitle:action:keyEquivalent:","Paste",sel_getUid("paste:"),"v"));
objj_msgSend(_111,"setSubmenu:",_112);
objj_msgSend(_111,"setHidden:",YES);
objj_msgSend(_10b,"addItem:",_111);
objj_msgSend(_10b,"addItem:",objj_msgSend(CPMenuItem,"separatorItem"));
objj_msgSend(CPApp,"setMainMenu:",_10b);
}
}),new objj_method(sel_getUid("cibDidFinishLoading:"),function(self,_115,aCib){
with(self){
objj_msgSend(self,"performActions");
}
}),new objj_method(sel_getUid("cibDidFailToLoad:"),function(self,_116,aCib){
with(self){
throw new Error("Could not load main cib file (Did you forget to nib2cib it?).");
}
}),new objj_method(sel_getUid("reset"),function(self,_117){
with(self){
_f9=nil;
}
})]);
p;19;CPArrayController.jt;21272;@STATIC;1.0;I;23;Foundation/CPIndexSet.ji;20;CPObjectController.ji;19;CPKeyValueBinding.jt;21175;
objj_executeFile("Foundation/CPIndexSet.j",NO);
objj_executeFile("CPObjectController.j",YES);
objj_executeFile("CPKeyValueBinding.j",YES);
var _1=objj_allocateClassPair(CPObjectController,"CPArrayController"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_avoidsEmptySelection"),new objj_ivar("_clearsFilterPredicateOnInsertion"),new objj_ivar("_filterRestrictsInsertion"),new objj_ivar("_preservesSelection"),new objj_ivar("_selectsInsertedObjects"),new objj_ivar("_alwaysUsesMultipleValuesMarker"),new objj_ivar("_automaticallyRearrangesObjects"),new objj_ivar("_selectionIndexes"),new objj_ivar("_sortDescriptors"),new objj_ivar("_filterPredicate"),new objj_ivar("_arrangedObjects"),new objj_ivar("_disableSetContent")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("init"),function(_3,_4){
with(_3){
_3=objj_msgSendSuper({receiver:_3,super_class:objj_getClass("CPArrayController").super_class},"init");
if(_3){
_preservesSelection=YES;
_selectsInsertedObjects=YES;
_avoidsEmptySelection=YES;
_clearsFilterPredicateOnInsertion=YES;
_alwaysUsesMultipleValuesMarker=NO;
_automaticallyRearrangesObjects=NO;
_filterRestrictsInsertion=YES;
objj_msgSend(_3,"_init");
}
return _3;
}
}),new objj_method(sel_getUid("_init"),function(_5,_6){
with(_5){
_sortDescriptors=objj_msgSend(CPArray,"array");
_filterPredicate=nil;
_selectionIndexes=objj_msgSend(CPIndexSet,"indexSet");
objj_msgSend(_5,"__setArrangedObjects:",objj_msgSend(CPArray,"array"));
}
}),new objj_method(sel_getUid("prepareContent"),function(_7,_8){
with(_7){
objj_msgSend(_7,"_setContentArray:",[objj_msgSend(_7,"newObject")]);
}
}),new objj_method(sel_getUid("preservesSelection"),function(_9,_a){
with(_9){
return _preservesSelection;
}
}),new objj_method(sel_getUid("setPreservesSelection:"),function(_b,_c,_d){
with(_b){
_preservesSelection=_d;
}
}),new objj_method(sel_getUid("selectsInsertedObjects"),function(_e,_f){
with(_e){
return _selectsInsertedObjects;
}
}),new objj_method(sel_getUid("setSelectsInsertedObjects:"),function(_10,_11,_12){
with(_10){
_selectsInsertedObjects=_12;
}
}),new objj_method(sel_getUid("avoidsEmptySelection"),function(_13,_14){
with(_13){
return _avoidsEmptySelection;
}
}),new objj_method(sel_getUid("setAvoidsEmptySelection:"),function(_15,_16,_17){
with(_15){
_avoidsEmptySelection=_17;
}
}),new objj_method(sel_getUid("clearsFilterPredicateOnInsertion"),function(_18,_19){
with(_18){
return _clearsFilterPredicateOnInsertion;
}
}),new objj_method(sel_getUid("setClearsFilterPredicateOnInsertion:"),function(_1a,_1b,_1c){
with(_1a){
_clearsFilterPredicateOnInsertion=_1c;
}
}),new objj_method(sel_getUid("alwaysUsesMultipleValuesMarker"),function(_1d,_1e){
with(_1d){
return _alwaysUsesMultipleValuesMarker;
}
}),new objj_method(sel_getUid("setAlwaysUsesMultipleValuesMarker:"),function(_1f,_20,_21){
with(_1f){
_alwaysUsesMultipleValuesMarker=_21;
}
}),new objj_method(sel_getUid("automaticallyRearrangesObjects"),function(_22,_23){
with(_22){
return _automaticallyRearrangesObjects;
}
}),new objj_method(sel_getUid("setAutomaticallyRearrangesObjects:"),function(_24,_25,_26){
with(_24){
_automaticallyRearrangesObjects=_26;
}
}),new objj_method(sel_getUid("setContent:"),function(_27,_28,_29){
with(_27){
if(_disableSetContent){
return;
}
if(_29===nil){
_29=[];
}
if(!objj_msgSend(_29,"isKindOfClass:",objj_msgSend(CPArray,"class"))){
_29=[_29];
}
var _2a=nil,_2b=nil;
if(objj_msgSend(_27,"preservesSelection")){
_2a=objj_msgSend(_27,"selectedObjects");
}else{
_2b=objj_msgSend(_27,"selectionIndexes");
}
if(_clearsFilterPredicateOnInsertion){
objj_msgSend(_27,"willChangeValueForKey:","filterPredicate");
}
_contentObject=_29;
if(_clearsFilterPredicateOnInsertion&&_filterPredicate!=nil){
objj_msgSend(_27,"__setFilterPredicate:",nil);
}else{
objj_msgSend(_27,"_rearrangeObjects");
}
if(objj_msgSend(_27,"preservesSelection")){
objj_msgSend(_27,"__setSelectedObjects:",_2a);
}else{
objj_msgSend(_27,"__setSelectionIndexes:",_2b);
}
if(_clearsFilterPredicateOnInsertion){
objj_msgSend(_27,"didChangeValueForKey:","filterPredicate");
}
}
}),new objj_method(sel_getUid("_setContentArray:"),function(_2c,_2d,_2e){
with(_2c){
objj_msgSend(_2c,"setContent:",_2e);
}
}),new objj_method(sel_getUid("_setContentSet:"),function(_2f,_30,_31){
with(_2f){
objj_msgSend(_2f,"setContent:",objj_msgSend(_31,"allObjects"));
}
}),new objj_method(sel_getUid("contentArray"),function(_32,_33){
with(_32){
return objj_msgSend(_32,"content");
}
}),new objj_method(sel_getUid("contentSet"),function(_34,_35){
with(_34){
return objj_msgSend(CPSet,"setWithArray:",objj_msgSend(_34,"content"));
}
}),new objj_method(sel_getUid("arrangeObjects:"),function(_36,_37,_38){
with(_36){
var _39=objj_msgSend(_36,"filterPredicate"),_3a=objj_msgSend(_36,"sortDescriptors");
if(_39&&objj_msgSend(_3a,"count")>0){
var _3b=objj_msgSend(_38,"filteredArrayUsingPredicate:",_39);
objj_msgSend(_3b,"sortUsingDescriptors:",_3a);
return _3b;
}else{
if(_39){
return objj_msgSend(_38,"filteredArrayUsingPredicate:",_39);
}else{
if(objj_msgSend(_3a,"count")>0){
return objj_msgSend(_38,"sortedArrayUsingDescriptors:",_3a);
}
}
}
return objj_msgSend(_38,"copy");
}
}),new objj_method(sel_getUid("rearrangeObjects"),function(_3c,_3d){
with(_3c){
objj_msgSend(_3c,"willChangeValueForKey:","arrangedObjects");
objj_msgSend(_3c,"_rearrangeObjects");
objj_msgSend(_3c,"didChangeValueForKey:","arrangedObjects");
}
}),new objj_method(sel_getUid("_rearrangeObjects"),function(_3e,_3f){
with(_3e){
var _40=nil,_41=nil;
if(objj_msgSend(_3e,"preservesSelection")){
_40=objj_msgSend(_3e,"selectedObjects");
}else{
_41=objj_msgSend(_3e,"selectionIndexes");
}
objj_msgSend(_3e,"__setArrangedObjects:",objj_msgSend(_3e,"arrangeObjects:",objj_msgSend(_3e,"contentArray")));
if(objj_msgSend(_3e,"preservesSelection")){
objj_msgSend(_3e,"__setSelectedObjects:",_40);
}else{
objj_msgSend(_3e,"__setSelectionIndexes:",_41);
}
}
}),new objj_method(sel_getUid("__setArrangedObjects:"),function(_42,_43,_44){
with(_42){
if(_arrangedObjects===_44){
return;
}
_arrangedObjects=objj_msgSend(objj_msgSend(_CPObservableArray,"alloc"),"initWithArray:",_44);
}
}),new objj_method(sel_getUid("arrangedObjects"),function(_45,_46){
with(_45){
return _arrangedObjects;
}
}),new objj_method(sel_getUid("sortDescriptors"),function(_47,_48){
with(_47){
return _sortDescriptors;
}
}),new objj_method(sel_getUid("setSortDescriptors:"),function(_49,_4a,_4b){
with(_49){
if(_sortDescriptors===_4b){
return;
}
_sortDescriptors=objj_msgSend(_4b,"copy");
objj_msgSend(_49,"_rearrangeObjects");
}
}),new objj_method(sel_getUid("filterPredicate"),function(_4c,_4d){
with(_4c){
return _filterPredicate;
}
}),new objj_method(sel_getUid("setFilterPredicate:"),function(_4e,_4f,_50){
with(_4e){
objj_msgSend(_4e,"__setFilterPredicate:",_50);
}
}),new objj_method(sel_getUid("__setFilterPredicate:"),function(_51,_52,_53){
with(_51){
if(_filterPredicate===_53){
return;
}
_filterPredicate=_53;
objj_msgSend(_51,"_rearrangeObjects");
}
}),new objj_method(sel_getUid("alwaysUsesMultipleValuesMarker"),function(_54,_55){
with(_54){
return _alwaysUsesMultipleValuesMarker;
}
}),new objj_method(sel_getUid("selectionIndex"),function(_56,_57){
with(_56){
return objj_msgSend(_selectionIndexes,"firstIndex");
}
}),new objj_method(sel_getUid("setSelectionIndex:"),function(_58,_59,_5a){
with(_58){
return objj_msgSend(_58,"setSelectionIndexes:",objj_msgSend(CPIndexSet,"indexSetWithIndex:",_5a));
}
}),new objj_method(sel_getUid("selectionIndexes"),function(_5b,_5c){
with(_5b){
return _selectionIndexes;
}
}),new objj_method(sel_getUid("setSelectionIndexes:"),function(_5d,_5e,_5f){
with(_5d){
objj_msgSend(_5d,"_selectionWillChange");
objj_msgSend(_5d,"__setSelectionIndexes:",_5f);
objj_msgSend(_5d,"_selectionDidChange");
}
}),new objj_method(sel_getUid("__setSelectionIndex:"),function(_60,_61,_62){
with(_60){
objj_msgSend(_60,"__setSelectionIndexes:",objj_msgSend(CPIndexSet,"indexSetWithIndex:",_62));
}
}),new objj_method(sel_getUid("__setSelectionIndexes:"),function(_63,_64,_65){
with(_63){
if(!_65){
_65=objj_msgSend(CPIndexSet,"indexSet");
}
if(!objj_msgSend(_65,"count")){
if(_avoidsEmptySelection&&objj_msgSend(objj_msgSend(_63,"arrangedObjects"),"count")){
_65=objj_msgSend(CPIndexSet,"indexSetWithIndex:",0);
}
}else{
var _66=objj_msgSend(objj_msgSend(_63,"arrangedObjects"),"count");
objj_msgSend(_65,"removeIndexesInRange:",CPMakeRange(_66,objj_msgSend(_65,"lastIndex")+1));
if(!objj_msgSend(_65,"count")&&_avoidsEmptySelection&&_66){
_65=objj_msgSend(CPIndexSet,"indexSetWithIndex:",_66-1);
}
}
if(objj_msgSend(_selectionIndexes,"isEqualToIndexSet:",_65)){
return NO;
}
_selectionIndexes=objj_msgSend(_65,"copy");
var _67=objj_msgSend(objj_msgSend(_63,"class"),"_binderClassForBinding:","selectionIndexes");
objj_msgSend(objj_msgSend(_67,"getBinding:forObject:","selectionIndexes",_63),"reverseSetValueFor:","selectionIndexes");
return YES;
}
}),new objj_method(sel_getUid("selectedObjects"),function(_68,_69){
with(_68){
var _6a=objj_msgSend(objj_msgSend(_68,"arrangedObjects"),"objectsAtIndexes:",objj_msgSend(_68,"selectionIndexes"));
return objj_msgSend(_CPObservableArray,"arrayWithArray:",(_6a||[]));
}
}),new objj_method(sel_getUid("setSelectedObjects:"),function(_6b,_6c,_6d){
with(_6b){
objj_msgSend(_6b,"willChangeValueForKey:","selectionIndexes");
objj_msgSend(_6b,"_selectionWillChange");
objj_msgSend(_6b,"__setSelectedObjects:",_6d);
objj_msgSend(_6b,"didChangeValueForKey:","selectionIndexes");
objj_msgSend(_6b,"_selectionDidChange");
}
}),new objj_method(sel_getUid("__setSelectedObjects:"),function(_6e,_6f,_70){
with(_6e){
var set=objj_msgSend(CPIndexSet,"indexSet"),_71=objj_msgSend(_70,"count"),_72=objj_msgSend(_6e,"arrangedObjects");
for(var i=0;i<_71;i++){
var _73=objj_msgSend(_72,"indexOfObject:",objj_msgSend(_70,"objectAtIndex:",i));
if(_73!==CPNotFound){
objj_msgSend(set,"addIndex:",_73);
}
}
objj_msgSend(_6e,"__setSelectionIndexes:",set);
return YES;
}
}),new objj_method(sel_getUid("canSelectPrevious"),function(_74,_75){
with(_74){
return objj_msgSend(objj_msgSend(_74,"selectionIndexes"),"firstIndex")>0;
}
}),new objj_method(sel_getUid("selectPrevious:"),function(_76,_77,_78){
with(_76){
var _79=objj_msgSend(objj_msgSend(_76,"selectionIndexes"),"firstIndex")-1;
if(_79>=0){
objj_msgSend(_76,"setSelectionIndexes:",objj_msgSend(CPIndexSet,"indexSetWithIndex:",_79));
}
}
}),new objj_method(sel_getUid("canSelectNext"),function(_7a,_7b){
with(_7a){
return objj_msgSend(objj_msgSend(_7a,"selectionIndexes"),"firstIndex")<objj_msgSend(objj_msgSend(_7a,"arrangedObjects"),"count")-1;
}
}),new objj_method(sel_getUid("selectNext:"),function(_7c,_7d,_7e){
with(_7c){
var _7f=objj_msgSend(objj_msgSend(_7c,"selectionIndexes"),"firstIndex")+1;
if(_7f<objj_msgSend(objj_msgSend(_7c,"arrangedObjects"),"count")){
objj_msgSend(_7c,"setSelectionIndexes:",objj_msgSend(CPIndexSet,"indexSetWithIndex:",_7f));
}
}
}),new objj_method(sel_getUid("addObject:"),function(_80,_81,_82){
with(_80){
if(!objj_msgSend(_80,"canAdd")){
return;
}
if(_clearsFilterPredicateOnInsertion){
objj_msgSend(_80,"willChangeValueForKey:","filterPredicate");
}
objj_msgSend(_80,"willChangeValueForKey:","content");
_disableSetContent=YES;
objj_msgSend(_contentObject,"addObject:",_82);
_disableSetContent=NO;
if(_clearsFilterPredicateOnInsertion){
objj_msgSend(_80,"__setFilterPredicate:",nil);
}
if(_filterPredicate===nil||objj_msgSend(_filterPredicate,"evaluateWithObject:",_82)){
var pos=objj_msgSend(_arrangedObjects,"insertObject:inArraySortedByDescriptors:",_82,_sortDescriptors);
if(_selectsInsertedObjects){
objj_msgSend(_80,"__setSelectionIndex:",pos);
}else{
objj_msgSend(_selectionIndexes,"shiftIndexesStartingAtIndex:by:",pos,1);
}
}else{
objj_msgSend(_80,"_rearrangeObjects");
}
objj_msgSend(_80,"didChangeValueForKey:","content");
if(_clearsFilterPredicateOnInsertion){
objj_msgSend(_80,"didChangeValueForKey:","filterPredicate");
}
}
}),new objj_method(sel_getUid("insertObject:atArrangedObjectIndex:"),function(_83,_84,_85,_86){
with(_83){
if(!objj_msgSend(_83,"canAdd")){
return;
}
if(_clearsFilterPredicateOnInsertion){
objj_msgSend(_83,"willChangeValueForKey:","filterPredicate");
}
objj_msgSend(_83,"willChangeValueForKey:","content");
_disableSetContent=YES;
objj_msgSend(_contentObject,"insertObject:atIndex:",_85,_86);
_disableSetContent=NO;
if(_clearsFilterPredicateOnInsertion){
objj_msgSend(_83,"__setFilterPredicate:",nil);
}
objj_msgSend(objj_msgSend(_83,"arrangedObjects"),"insertObject:atIndex:",_85,_86);
if(objj_msgSend(_83,"selectsInsertedObjects")){
objj_msgSend(_83,"__setSelectionIndex:",_86);
}else{
objj_msgSend(objj_msgSend(_83,"selectionIndexes"),"shiftIndexesStartingAtIndex:by:",_86,1);
}
if(objj_msgSend(_83,"avoidsEmptySelection")&&objj_msgSend(objj_msgSend(_83,"selectionIndexes"),"count")<=0&&objj_msgSend(_contentObject,"count")>0){
objj_msgSend(_83,"__setSelectionIndexes:",objj_msgSend(CPIndexSet,"indexSetWithIndex:",0));
}
objj_msgSend(_83,"didChangeValueForKey:","content");
if(_clearsFilterPredicateOnInsertion){
objj_msgSend(_83,"didChangeValueForKey:","filterPredicate");
}
}
}),new objj_method(sel_getUid("removeObject:"),function(_87,_88,_89){
with(_87){
objj_msgSend(_87,"willChangeValueForKey:","content");
_disableSetContent=YES;
objj_msgSend(_contentObject,"removeObject:",_89);
_disableSetContent=NO;
if(_filterPredicate===nil||objj_msgSend(_filterPredicate,"evaluateWithObject:",_89)){
var pos=objj_msgSend(_arrangedObjects,"indexOfObject:",_89);
objj_msgSend(_arrangedObjects,"removeObjectAtIndex:",pos);
objj_msgSend(_selectionIndexes,"shiftIndexesStartingAtIndex:by:",pos,-1);
}
objj_msgSend(_87,"didChangeValueForKey:","content");
}
}),new objj_method(sel_getUid("add:"),function(_8a,_8b,_8c){
with(_8a){
if(!objj_msgSend(_8a,"canAdd")){
return;
}
objj_msgSend(_8a,"insert:",_8c);
}
}),new objj_method(sel_getUid("insert:"),function(_8d,_8e,_8f){
with(_8d){
if(!objj_msgSend(_8d,"canInsert")){
return;
}
var _90=objj_msgSend(_8d,"automaticallyPreparesContent")?objj_msgSend(_8d,"newObject"):objj_msgSend(_8d,"_defaultNewObject");
objj_msgSend(_8d,"addObject:",_90);
}
}),new objj_method(sel_getUid("remove:"),function(_91,_92,_93){
with(_91){
objj_msgSend(_91,"removeObjects:",objj_msgSend(objj_msgSend(_91,"arrangedObjects"),"objectsAtIndexes:",objj_msgSend(_91,"selectionIndexes")));
}
}),new objj_method(sel_getUid("removeObjectsAtArrangedObjectIndexes:"),function(_94,_95,_96){
with(_94){
objj_msgSend(_94,"_removeObjects:",objj_msgSend(objj_msgSend(_94,"arrangedObjects"),"objectsAtIndexes:",_96));
}
}),new objj_method(sel_getUid("addObjects:"),function(_97,_98,_99){
with(_97){
if(!objj_msgSend(_97,"canAdd")){
return;
}
var _9a=objj_msgSend(_97,"contentArray"),_9b=objj_msgSend(_99,"count");
for(var i=0;i<_9b;i++){
objj_msgSend(_9a,"addObject:",objj_msgSend(_99,"objectAtIndex:",i));
}
objj_msgSend(_97,"setContent:",_9a);
}
}),new objj_method(sel_getUid("removeObjects:"),function(_9c,_9d,_9e){
with(_9c){
objj_msgSend(_9c,"_removeObjects:",_9e);
}
}),new objj_method(sel_getUid("_removeObjects:"),function(_9f,_a0,_a1){
with(_9f){
objj_msgSend(_9f,"willChangeValueForKey:","content");
_disableSetContent=YES;
objj_msgSend(_contentObject,"removeObjectsInArray:",_a1);
_disableSetContent=NO;
var _a2=objj_msgSend(_9f,"arrangedObjects"),_a3=objj_msgSend(_a2,"indexOfObject:",objj_msgSend(_a1,"objectAtIndex:",0));
objj_msgSend(_a2,"removeObjectsInArray:",_a1);
var _a4=objj_msgSend(_a2,"count"),_a5=objj_msgSend(CPIndexSet,"indexSet");
if(objj_msgSend(_9f,"preservesSelection")||objj_msgSend(_9f,"avoidsEmptySelection")){
_a5=objj_msgSend(CPIndexSet,"indexSetWithIndex:",_a3);
if(_a4<=0){
_a5=objj_msgSend(CPIndexSet,"indexSet");
}else{
if(_a3>=_a4){
_a5=objj_msgSend(CPIndexSet,"indexSetWithIndex:",_a4-1);
}
}
}
_selectionIndexes=_a5;
objj_msgSend(_9f,"didChangeValueForKey:","content");
}
}),new objj_method(sel_getUid("canInsert"),function(_a6,_a7){
with(_a6){
return objj_msgSend(_a6,"isEditable");
}
})]);
class_addMethods(_2,[new objj_method(sel_getUid("initialize"),function(_a8,_a9){
with(_a8){
if(_a8!==objj_msgSend(CPArrayController,"class")){
return;
}
objj_msgSend(_a8,"exposeBinding:","contentArray");
objj_msgSend(_a8,"exposeBinding:","contentSet");
}
}),new objj_method(sel_getUid("keyPathsForValuesAffectingContentArray"),function(_aa,_ab){
with(_aa){
return objj_msgSend(CPSet,"setWithObjects:","content");
}
}),new objj_method(sel_getUid("keyPathsForValuesAffectingArrangedObjects"),function(_ac,_ad){
with(_ac){
return objj_msgSend(CPSet,"setWithObjects:","content","filterPredicate","sortDescriptors");
}
}),new objj_method(sel_getUid("keyPathsForValuesAffectingSelection"),function(_ae,_af){
with(_ae){
return objj_msgSend(CPSet,"setWithObjects:","selectionIndexes");
}
}),new objj_method(sel_getUid("keyPathsForValuesAffectingSelectionIndex"),function(_b0,_b1){
with(_b0){
return objj_msgSend(CPSet,"setWithObjects:","selectionIndexes");
}
}),new objj_method(sel_getUid("keyPathsForValuesAffectingSelectionIndexes"),function(_b2,_b3){
with(_b2){
return objj_msgSend(CPSet,"setWithObjects:","arrangedObjects");
}
}),new objj_method(sel_getUid("keyPathsForValuesAffectingSelectedObjects"),function(_b4,_b5){
with(_b4){
return objj_msgSend(CPSet,"setWithObjects:","selectionIndexes");
}
}),new objj_method(sel_getUid("keyPathsForValuesAffectingCanRemove"),function(_b6,_b7){
with(_b6){
return objj_msgSend(CPSet,"setWithObjects:","selectionIndexes");
}
}),new objj_method(sel_getUid("keyPathsForValuesAffectingCanSelectNext"),function(_b8,_b9){
with(_b8){
return objj_msgSend(CPSet,"setWithObjects:","selectionIndexes");
}
}),new objj_method(sel_getUid("keyPathsForValuesAffectingCanSelectPrevious"),function(_ba,_bb){
with(_ba){
return objj_msgSend(CPSet,"setWithObjects:","selectionIndexes");
}
})]);
var _1=objj_getClass("CPArrayController");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"CPArrayController\"");
}
var _2=_1.isa;
class_addMethods(_2,[new objj_method(sel_getUid("_binderClassForBinding:"),function(_bc,_bd,_be){
with(_bc){
if(_be=="contentArray"){
return objj_msgSend(_CPArrayControllerContentBinder,"class");
}
return objj_msgSendSuper({receiver:_bc,super_class:objj_getMetaClass("CPArrayController").super_class},"_binderClassForBinding:",_be);
}
})]);
var _1=objj_allocateClassPair(CPBinder,"_CPArrayControllerContentBinder"),_2=_1.isa;
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("setValueFor:"),function(_bf,_c0,_c1){
with(_bf){
var _c2=objj_msgSend(_info,"objectForKey:",CPObservedObjectKey),_c3=objj_msgSend(_info,"objectForKey:",CPObservedKeyPathKey),_c4=objj_msgSend(_info,"objectForKey:",CPOptionsKey),_c5=objj_msgSend(_c2,"mutableArrayValueForKeyPath:",_c3);
_c5=objj_msgSend(_bf,"transformValue:withOptions:",_c5,_c4);
objj_msgSend(_source,"setValue:forKey:",_c5,_c1);
}
})]);
var _c6="CPArrayControllerAvoidsEmptySelection",_c7="CPArrayControllerClearsFilterPredicateOnInsertion",_c8="CPArrayControllerFilterRestrictsInsertion",_c9="CPArrayControllerPreservesSelection",_ca="CPArrayControllerSelectsInsertedObjects",_cb="CPArrayControllerAlwaysUsesMultipleValuesMarker",_cc="CPArrayControllerAutomaticallyRearrangesObjects";
var _1=objj_getClass("CPArrayController");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"CPArrayController\"");
}
var _2=_1.isa;
class_addMethods(_1,[new objj_method(sel_getUid("initWithCoder:"),function(_cd,_ce,_cf){
with(_cd){
_cd=objj_msgSendSuper({receiver:_cd,super_class:objj_getClass("CPArrayController").super_class},"initWithCoder:",_cf);
if(_cd){
_avoidsEmptySelection=objj_msgSend(_cf,"decodeBoolForKey:",_c6);
_clearsFilterPredicateOnInsertion=objj_msgSend(_cf,"decodeBoolForKey:",_c7);
_filterRestrictsInsertion=objj_msgSend(_cf,"decodeBoolForKey:",_c8);
_preservesSelection=objj_msgSend(_cf,"decodeBoolForKey:",_c9);
_selectsInsertedObjects=objj_msgSend(_cf,"decodeBoolForKey:",_ca);
_alwaysUsesMultipleValuesMarker=objj_msgSend(_cf,"decodeBoolForKey:",_cb);
_automaticallyRearrangesObjects=objj_msgSend(_cf,"decodeBoolForKey:",_cc);
_sortDescriptors=objj_msgSend(CPArray,"array");
if(!objj_msgSend(_cd,"content")&&objj_msgSend(_cd,"automaticallyPreparesContent")){
objj_msgSend(_cd,"prepareContent");
}else{
if(!objj_msgSend(_cd,"content")){
objj_msgSend(_cd,"_setContentArray:",[]);
}
}
}
return _cd;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_d0,_d1,_d2){
with(_d0){
objj_msgSendSuper({receiver:_d0,super_class:objj_getClass("CPArrayController").super_class},"encodeWithCoder:",_d2);
objj_msgSend(_d2,"encodeBool:forKey:",_avoidsEmptySelection,_c6);
objj_msgSend(_d2,"encodeBool:forKey:",_clearsFilterPredicateOnInsertion,_c7);
objj_msgSend(_d2,"encodeBool:forKey:",_filterRestrictsInsertion,_c8);
objj_msgSend(_d2,"encodeBool:forKey:",_preservesSelection,_c9);
objj_msgSend(_d2,"encodeBool:forKey:",_selectsInsertedObjects,_ca);
objj_msgSend(_d2,"encodeBool:forKey:",_alwaysUsesMultipleValuesMarker,_cb);
objj_msgSend(_d2,"encodeBool:forKey:",_automaticallyRearrangesObjects,_cc);
}
}),new objj_method(sel_getUid("awakeFromCib"),function(_d3,_d4){
with(_d3){
objj_msgSend(_d3,"_selectionWillChange");
objj_msgSend(_d3,"_selectionDidChange");
}
})]);
p;14;CPBezierPath.jt;4439;@STATIC;1.0;I;21;Foundation/CPObject.ji;19;CPGraphicsContext.jt;4370;
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("CPGraphicsContext.j",YES);
var _1=1;
var _2=objj_allocateClassPair(CPObject,"CPBezierPath"),_3=_2.isa;
class_addIvars(_2,[new objj_ivar("_path"),new objj_ivar("_lineWidth")]);
objj_registerClassPair(_2);
class_addMethods(_2,[new objj_method(sel_getUid("init"),function(_4,_5){
with(_4){
if(_4=objj_msgSendSuper({receiver:_4,super_class:objj_getClass("CPBezierPath").super_class},"init")){
_path=CGPathCreateMutable();
_lineWidth=objj_msgSend(objj_msgSend(_4,"class"),"defaultLineWidth");
}
return _4;
}
}),new objj_method(sel_getUid("moveToPoint:"),function(_6,_7,_8){
with(_6){
CGPathMoveToPoint(_path,nil,_8.x,_8.y);
}
}),new objj_method(sel_getUid("lineToPoint:"),function(_9,_a,_b){
with(_9){
CGPathAddLineToPoint(_path,nil,_b.x,_b.y);
}
}),new objj_method(sel_getUid("curveToPoint:controlPoint1:controlPoint2:"),function(_c,_d,_e,_f,_10){
with(_c){
CGPathAddCurveToPoint(_path,nil,_f.x,_f.y,_10.x,_10.y,_e.x,_e.y);
}
}),new objj_method(sel_getUid("closePath"),function(_11,_12){
with(_11){
CGPathCloseSubpath(_path);
}
}),new objj_method(sel_getUid("stroke"),function(_13,_14){
with(_13){
var ctx=objj_msgSend(objj_msgSend(CPGraphicsContext,"currentContext"),"graphicsPort");
CGContextBeginPath(ctx);
CGContextAddPath(ctx,_path);
CGContextSetLineWidth(ctx,objj_msgSend(_13,"lineWidth"));
CGContextStrokePath(ctx);
}
}),new objj_method(sel_getUid("fill"),function(_15,_16){
with(_15){
var ctx=objj_msgSend(objj_msgSend(CPGraphicsContext,"currentContext"),"graphicsPort");
CGContextBeginPath(ctx);
CGContextAddPath(ctx,_path);
CGContextSetLineWidth(ctx,objj_msgSend(_15,"lineWidth"));
CGContextClosePath(ctx);
CGContextFillPath(ctx);
}
}),new objj_method(sel_getUid("lineWidth"),function(_17,_18){
with(_17){
return _lineWidth;
}
}),new objj_method(sel_getUid("setLineWidth:"),function(_19,_1a,_1b){
with(_19){
_lineWidth=_1b;
}
}),new objj_method(sel_getUid("elementCount"),function(_1c,_1d){
with(_1c){
return _path.count;
}
}),new objj_method(sel_getUid("isEmpty"),function(_1e,_1f){
with(_1e){
return CGPathIsEmpty(_path);
}
}),new objj_method(sel_getUid("currentPoint"),function(_20,_21){
with(_20){
return CGPathGetCurrentPoint(_path);
}
}),new objj_method(sel_getUid("appendBezierPathWithPoints:count:"),function(_22,_23,_24,_25){
with(_22){
CGPathAddLines(_path,nil,_24,_25);
}
}),new objj_method(sel_getUid("appendBezierPathWithRect:"),function(_26,_27,_28){
with(_26){
CGPathAddRect(_path,nil,_28);
}
}),new objj_method(sel_getUid("appendBezierPathWithOvalInRect:"),function(_29,_2a,_2b){
with(_29){
CGPathAddPath(_path,nil,CGPathWithEllipseInRect(_2b));
}
}),new objj_method(sel_getUid("appendBezierPathWithRoundedRect:xRadius:yRadius:"),function(_2c,_2d,_2e,_2f,_30){
with(_2c){
CGPathAddPath(_path,nil,CGPathWithRoundedRectangleInRect(_2e,_2f,_30,YES,YES,YES,YES));
}
}),new objj_method(sel_getUid("appendBezierPath:"),function(_31,_32,_33){
with(_31){
CGPathAddPath(_path,nil,_33._path);
}
}),new objj_method(sel_getUid("removeAllPoints"),function(_34,_35){
with(_34){
_path=CGPathCreateMutable();
}
})]);
class_addMethods(_3,[new objj_method(sel_getUid("bezierPath"),function(_36,_37){
with(_36){
return objj_msgSend(objj_msgSend(_36,"alloc"),"init");
}
}),new objj_method(sel_getUid("bezierPathWithOvalInRect:"),function(_38,_39,_3a){
with(_38){
var _3b=objj_msgSend(_38,"bezierPath");
objj_msgSend(_3b,"appendBezierPathWithOvalInRect:",_3a);
return _3b;
}
}),new objj_method(sel_getUid("bezierPathWithRect:"),function(_3c,_3d,_3e){
with(_3c){
var _3f=objj_msgSend(_3c,"bezierPath");
objj_msgSend(_3f,"appendBezierPathWithRect:",_3e);
return _3f;
}
}),new objj_method(sel_getUid("defaultLineWidth"),function(_40,_41){
with(_40){
return _1;
}
}),new objj_method(sel_getUid("setDefaultLineWidth:"),function(_42,_43,_44){
with(_42){
_1=_44;
}
}),new objj_method(sel_getUid("fillRect:"),function(_45,_46,_47){
with(_45){
objj_msgSend(objj_msgSend(_45,"bezierPathWithRect:",_47),"fill");
}
}),new objj_method(sel_getUid("strokeRect:"),function(_48,_49,_4a){
with(_48){
objj_msgSend(objj_msgSend(_48,"bezierPathWithRect:",_4a),"stroke");
}
}),new objj_method(sel_getUid("strokeLineFromPoint:toPoint:"),function(_4b,_4c,_4d,_4e){
with(_4b){
var _4f=objj_msgSend(_4b,"bezierPath");
objj_msgSend(_4f,"moveToPoint:",_4d);
objj_msgSend(_4f,"lineToPoint:",_4e);
objj_msgSend(_4f,"stroke");
}
})]);
p;7;CPBox.jt;9100;@STATIC;1.0;i;8;CPView.jt;9069;
objj_executeFile("CPView.j",YES);
CPBoxPrimary=0;
CPBoxSecondary=1;
CPBoxSeparator=2;
CPBoxOldStyle=3;
CPBoxCustom=4;
CPNoBorder=0;
CPLineBorder=1;
CPBezelBorder=2;
CPGrooveBorder=3;
var _1=objj_allocateClassPair(CPView,"CPBox"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_boxType"),new objj_ivar("_borderType"),new objj_ivar("_borderColor"),new objj_ivar("_fillColor"),new objj_ivar("_cornerRadius"),new objj_ivar("_borderWidth"),new objj_ivar("_contentMargin"),new objj_ivar("_contentView")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("initWithFrame:"),function(_3,_4,_5){
with(_3){
_3=objj_msgSendSuper({receiver:_3,super_class:objj_getClass("CPBox").super_class},"initWithFrame:",_5);
if(_3){
_borderType=CPBezelBorder;
_fillColor=objj_msgSend(CPColor,"clearColor");
_borderColor=objj_msgSend(CPColor,"blackColor");
_borderWidth=1;
_contentMargin=CGSizeMake(0,0);
_contentView=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",objj_msgSend(_3,"bounds"));
objj_msgSend(_contentView,"setAutoresizingMask:",CPViewWidthSizable|CPViewHeightSizable);
objj_msgSend(_3,"setAutoresizesSubviews:",YES);
objj_msgSend(_3,"addSubview:",_contentView);
}
return _3;
}
}),new objj_method(sel_getUid("borderRect"),function(_6,_7){
with(_6){
return objj_msgSend(_6,"bounds");
}
}),new objj_method(sel_getUid("borderType"),function(_8,_9){
with(_8){
return _borderType;
}
}),new objj_method(sel_getUid("setBorderType:"),function(_a,_b,_c){
with(_a){
if(_borderType===_c){
return;
}
_borderType=_c;
objj_msgSend(_a,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("boxType"),function(_d,_e){
with(_d){
return _boxType;
}
}),new objj_method(sel_getUid("setBoxType:"),function(_f,_10,_11){
with(_f){
if(_boxType===_11){
return;
}
_boxType=_11;
objj_msgSend(_f,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("borderColor"),function(_12,_13){
with(_12){
return _borderColor;
}
}),new objj_method(sel_getUid("setBorderColor:"),function(_14,_15,_16){
with(_14){
if(objj_msgSend(_16,"isEqual:",_borderColor)){
return;
}
_borderColor=_16;
objj_msgSend(_14,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("borderWidth"),function(_17,_18){
with(_17){
return _borderWidth;
}
}),new objj_method(sel_getUid("setBorderWidth:"),function(_19,_1a,_1b){
with(_19){
if(_1b===_borderWidth){
return;
}
_borderWidth=_1b;
objj_msgSend(_19,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("cornerRadius"),function(_1c,_1d){
with(_1c){
return _cornerRadius;
}
}),new objj_method(sel_getUid("setCornerRadius:"),function(_1e,_1f,_20){
with(_1e){
if(_20===_cornerRadius){
return;
}
_cornerRadius=_20;
objj_msgSend(_1e,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("fillColor"),function(_21,_22){
with(_21){
return _fillColor;
}
}),new objj_method(sel_getUid("setFillColor:"),function(_23,_24,_25){
with(_23){
if(objj_msgSend(_25,"isEqual:",_fillColor)){
return;
}
_fillColor=_25;
objj_msgSend(_23,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("contentView"),function(_26,_27){
with(_26){
return _contentView;
}
}),new objj_method(sel_getUid("setContentView:"),function(_28,_29,_2a){
with(_28){
if(_2a===_contentView){
return;
}
objj_msgSend(_2a,"setFrame:",CGRectInset(objj_msgSend(_28,"bounds"),_contentMargin.width+_borderWidth,_contentMargin.height+_borderWidth));
objj_msgSend(_2a,"setAutoresizingMask:",CPViewWidthSizable|CPViewHeightSizable);
objj_msgSend(_28,"replaceSubview:with:",_contentView,_2a);
_contentView=_2a;
}
}),new objj_method(sel_getUid("contentViewMargins"),function(_2b,_2c){
with(_2b){
return _contentMargin;
}
}),new objj_method(sel_getUid("setContentViewMargins:"),function(_2d,_2e,_2f){
with(_2d){
if(_2f.width<0||_2f.height<0){
objj_msgSend(CPException,"raise:reason:",CPGenericException,"Margins must be positive");
}
_contentMargin=CGSizeMakeCopy(_2f);
objj_msgSend(_2d,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("setFrameFromContentFrame:"),function(_30,_31,_32){
with(_30){
objj_msgSend(_30,"setFrame:",CGRectInset(_32,-(_contentMargin.width+_borderWidth),-(_contentMargin.height+_borderWidth)));
objj_msgSend(_30,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("sizeToFit"),function(_33,_34){
with(_33){
var _35=objj_msgSend(_contentView,"frame");
objj_msgSend(_33,"setFrameSize:",CGSizeMake(_35.size.width+_contentMargin.width*2,_35.size.height+_contentMargin.height*2));
objj_msgSend(_contentView,"setFrameOrigin:",CGPointMake(_contentMargin.width,_contentMargin.height));
}
}),new objj_method(sel_getUid("drawRect:"),function(_36,_37,_38){
with(_36){
if(_borderType===CPNoBorder){
return;
}
var _39=objj_msgSend(_36,"bounds");
switch(_boxType){
case CPBoxSeparator:
if(CGRectGetWidth(_39)===5){
return objj_msgSend(_36,"_drawVerticalSeperatorInRect:",_39);
}else{
if(CGRectGetHeight(_39)===5){
return objj_msgSend(_36,"_drawHorizontalSeperatorInRect:",_39);
}
}
break;
}
switch(_borderType){
case CPBezelBorder:
objj_msgSend(_36,"_drawBezelBorderInRect:",_39);
break;
default:
case CPLineBorder:
objj_msgSend(_36,"_drawLineBorderInRect:",_39);
break;
}
}
}),new objj_method(sel_getUid("_drawHorizontalSeperatorInRect:"),function(_3a,_3b,_3c){
with(_3a){
var _3d=objj_msgSend(objj_msgSend(CPGraphicsContext,"currentContext"),"graphicsPort");
CGContextSetStrokeColor(_3d,objj_msgSend(_3a,"borderColor"));
CGContextSetLineWidth(_3d,1);
CGContextMoveToPoint(_3d,CGRectGetMinX(_3c),CGRectGetMinY(_3c)+0.5);
CGContextAddLineToPoint(_3d,CGRectGetWidth(_3c),CGRectGetMinY(_3c)+0.5);
CGContextStrokePath(_3d);
}
}),new objj_method(sel_getUid("_drawVerticalSeperatorInRect:"),function(_3e,_3f,_40){
with(_3e){
var _41=objj_msgSend(objj_msgSend(CPGraphicsContext,"currentContext"),"graphicsPort");
CGContextSetStrokeColor(_41,objj_msgSend(_3e,"borderColor"));
CGContextSetLineWidth(_41,1);
CGContextMoveToPoint(_41,CGRectGetMinX(_40)+0.5,CGRectGetMinY(_40));
CGContextAddLineToPoint(_41,CGRectGetMinX(_40)+0.5,CGRectGetHeight(_40));
CGContextStrokePath(_41);
}
}),new objj_method(sel_getUid("_drawBezelBorderInRect:"),function(_42,_43,_44){
with(_42){
var _45=objj_msgSend(objj_msgSend(CPGraphicsContext,"currentContext"),"graphicsPort"),_46=[CPMinYEdge,CPMaxXEdge,CPMaxYEdge,CPMinXEdge],_47=190/255,_48=[142/255,_47,_47,_47],_49=_borderWidth;
while(_49--){
_44=CPDrawTiledRects(_44,_44,_46,_48);
}
CGContextSetFillColor(_45,objj_msgSend(_42,"fillColor"));
CGContextFillRect(_45,_44);
}
}),new objj_method(sel_getUid("_drawLineBorderInRect:"),function(_4a,_4b,_4c){
with(_4a){
var _4d=objj_msgSend(objj_msgSend(CPGraphicsContext,"currentContext"),"graphicsPort");
_4c=CGRectInset(_4c,_borderWidth/2,_borderWidth/2);
CGContextSetFillColor(_4d,objj_msgSend(_4a,"fillColor"));
CGContextSetStrokeColor(_4d,objj_msgSend(_4a,"borderColor"));
CGContextSetLineWidth(_4d,_borderWidth);
CGContextFillRoundedRectangleInRect(_4d,_4c,_cornerRadius,YES,YES,YES,YES);
CGContextStrokeRoundedRectangleInRect(_4d,_4c,_cornerRadius,YES,YES,YES,YES);
}
})]);
class_addMethods(_2,[new objj_method(sel_getUid("boxEnclosingView:"),function(_4e,_4f,_50){
with(_4e){
var box=objj_msgSend(objj_msgSend(_4e,"alloc"),"initWithFrame:",CGRectMakeZero()),_51=objj_msgSend(_50,"superview");
objj_msgSend(box,"setFrameFromContentFrame:",objj_msgSend(_50,"frame"));
objj_msgSend(_51,"replaceSubview:with:",_50,box);
objj_msgSend(box,"setContentView:",_50);
return box;
}
})]);
var _52="CPBoxTypeKey",_53="CPBoxBorderTypeKey",_54="CPBoxBorderColorKey",_55="CPBoxFillColorKey",_56="CPBoxCornerRadiusKey",_57="CPBoxBorderWidthKey",_58="CPBoxContentMarginKey";
var _1=objj_getClass("CPBox");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"CPBox\"");
}
var _2=_1.isa;
class_addMethods(_1,[new objj_method(sel_getUid("initWithCoder:"),function(_59,_5a,_5b){
with(_59){
_59=objj_msgSendSuper({receiver:_59,super_class:objj_getClass("CPBox").super_class},"initWithCoder:",_5b);
if(_59){
_boxType=objj_msgSend(_5b,"decodeIntForKey:",_52);
_borderType=objj_msgSend(_5b,"decodeIntForKey:",_53);
_borderColor=objj_msgSend(_5b,"decodeObjectForKey:",_54);
_fillColor=objj_msgSend(_5b,"decodeObjectForKey:",_55);
_cornerRadius=objj_msgSend(_5b,"decodeFloatForKey:",_56);
_borderWidth=objj_msgSend(_5b,"decodeFloatForKey:",_57);
_contentMargin=objj_msgSend(_5b,"decodeSizeForKey:",_58);
_contentView=objj_msgSend(_59,"subviews")[0];
objj_msgSend(_59,"setAutoresizesSubviews:",YES);
objj_msgSend(_contentView,"setAutoresizingMask:",CPViewWidthSizable|CPViewHeightSizable);
}
return _59;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_5c,_5d,_5e){
with(_5c){
objj_msgSendSuper({receiver:_5c,super_class:objj_getClass("CPBox").super_class},"encodeWithCoder:",_5e);
objj_msgSend(_5e,"encodeInt:forKey:",_boxType,_52);
objj_msgSend(_5e,"encodeInt:forKey:",_borderType,_53);
objj_msgSend(_5e,"encodeObject:forKey:",_borderColor,_54);
objj_msgSend(_5e,"encodeObject:forKey:",_fillColor,_55);
objj_msgSend(_5e,"encodeFloat:forKey:",_cornerRadius,_56);
objj_msgSend(_5e,"encodeFloat:forKey:",_borderWidth,_57);
objj_msgSend(_5e,"encodeSize:forKey:",_contentMargin,_58);
}
})]);
p;11;CPBrowser.jt;36560;@STATIC;1.0;I;23;Foundation/CPIndexSet.ji;11;CPControl.ji;9;CPImage.ji;13;CPTableView.ji;13;CPTextField.ji;14;CPScrollView.jI;21;Foundation/CPObject.jt;36402;
objj_executeFile("Foundation/CPIndexSet.j",NO);
objj_executeFile("CPControl.j",YES);
objj_executeFile("CPImage.j",YES);
objj_executeFile("CPTableView.j",YES);
objj_executeFile("CPTextField.j",YES);
objj_executeFile("CPScrollView.j",YES);
var _1=objj_allocateClassPair(CPControl,"CPBrowser"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_delegate"),new objj_ivar("_pathSeparator"),new objj_ivar("_contentView"),new objj_ivar("_horizontalScrollView"),new objj_ivar("_prototypeView"),new objj_ivar("_tableViews"),new objj_ivar("_tableDelegates"),new objj_ivar("_rootItem"),new objj_ivar("_delegateSupportsImages"),new objj_ivar("_doubleAction"),new objj_ivar("_allowsMultipleSelection"),new objj_ivar("_allowsEmptySelection"),new objj_ivar("_tableViewClass"),new objj_ivar("_rowHeight"),new objj_ivar("_imageWidth"),new objj_ivar("_leafWidth"),new objj_ivar("_minColumnWidth"),new objj_ivar("_defaultColumnWidth"),new objj_ivar("_columnWidths")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("doubleAction"),function(_3,_4){
with(_3){
return _doubleAction;
}
}),new objj_method(sel_getUid("setDoubleAction:"),function(_5,_6,_7){
with(_5){
_doubleAction=_7;
}
}),new objj_method(sel_getUid("tableViewClass"),function(_8,_9){
with(_8){
return _tableViewClass;
}
}),new objj_method(sel_getUid("setTableViewClass:"),function(_a,_b,_c){
with(_a){
_tableViewClass=_c;
}
}),new objj_method(sel_getUid("defaultColumnWidth"),function(_d,_e){
with(_d){
return _defaultColumnWidth;
}
}),new objj_method(sel_getUid("setDefaultColumnWidth:"),function(_f,_10,_11){
with(_f){
_defaultColumnWidth=_11;
}
}),new objj_method(sel_getUid("initWithFrame:"),function(_12,_13,_14){
with(_12){
if(_12=objj_msgSendSuper({receiver:_12,super_class:objj_getClass("CPBrowser").super_class},"initWithFrame:",_14)){
objj_msgSend(_12,"_init");
}
return _12;
}
}),new objj_method(sel_getUid("_init"),function(_15,_16){
with(_15){
_rowHeight=23;
_defaultColumnWidth=140;
_minColumnWidth=80;
_imageWidth=23;
_leafWidth=13;
_columnWidths=[];
_pathSeparator="/";
_tableViews=[];
_tableDelegates=[];
_allowsMultipleSelection=YES;
_allowsEmptySelection=YES;
_tableViewClass=objj_msgSend(_CPBrowserTableView,"class");
_prototypeView=objj_msgSend(objj_msgSend(CPTextField,"alloc"),"initWithFrame:",CGRectMakeZero());
objj_msgSend(_prototypeView,"setVerticalAlignment:",CPCenterVerticalTextAlignment);
objj_msgSend(_prototypeView,"setValue:forThemeAttribute:inState:",objj_msgSend(CPColor,"whiteColor"),"text-color",CPThemeStateSelectedDataView);
objj_msgSend(_prototypeView,"setLineBreakMode:",CPLineBreakByTruncatingTail);
_horizontalScrollView=objj_msgSend(objj_msgSend(CPScrollView,"alloc"),"initWithFrame:",objj_msgSend(_15,"bounds"));
objj_msgSend(_horizontalScrollView,"setHasVerticalScroller:",NO);
objj_msgSend(_horizontalScrollView,"setAutohidesScrollers:",YES);
objj_msgSend(_horizontalScrollView,"setAutoresizingMask:",CPViewWidthSizable|CPViewHeightSizable);
_contentView=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",CGRectMake(0,0,0,CGRectGetHeight(objj_msgSend(_15,"bounds"))));
objj_msgSend(_contentView,"setAutoresizingMask:",CPViewHeightSizable);
objj_msgSend(_horizontalScrollView,"setDocumentView:",_contentView);
objj_msgSend(_15,"addSubview:",_horizontalScrollView);
}
}),new objj_method(sel_getUid("setPrototypeView:"),function(_17,_18,_19){
with(_17){
_prototypeView=objj_msgSend(CPKeyedUnarchiver,"unarchiveObjectWithData:",objj_msgSend(CPKeyedArchiver,"archivedDataWithRootObject:",_19));
}
}),new objj_method(sel_getUid("prototypeView"),function(_1a,_1b){
with(_1a){
return objj_msgSend(CPKeyedUnarchiver,"unarchiveObjectWithData:",objj_msgSend(CPKeyedArchiver,"archivedDataWithRootObject:",_prototypeView));
}
}),new objj_method(sel_getUid("setDelegate:"),function(_1c,_1d,_1e){
with(_1c){
_delegate=_1e;
_delegateSupportsImages=objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("browser:imageValueForItem:"));
objj_msgSend(_1c,"loadColumnZero");
}
}),new objj_method(sel_getUid("delegate"),function(_1f,_20){
with(_1f){
return _delegate;
}
}),new objj_method(sel_getUid("tableViewInColumn:"),function(_21,_22,_23){
with(_21){
return _tableViews[_23];
}
}),new objj_method(sel_getUid("columnOfTableView:"),function(_24,_25,_26){
with(_24){
return objj_msgSend(_tableViews,"indexOfObject:",_26);
}
}),new objj_method(sel_getUid("loadColumnZero"),function(_27,_28){
with(_27){
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("rootItemForBrowser:"))){
_rootItem=objj_msgSend(_delegate,"rootItemForBrowser:",_27);
}else{
_rootItem=nil;
}
objj_msgSend(_27,"setLastColumn:",-1);
objj_msgSend(_27,"addColumn");
}
}),new objj_method(sel_getUid("setLastColumn:"),function(_29,_2a,_2b){
with(_29){
if(_2b>=_tableViews.length){
return;
}
var _2c=_tableViews.length-1,_2d=_2b+1;
objj_msgSend(objj_msgSend(_tableViews.slice(_2d),"valueForKey:","enclosingScrollView"),"makeObjectsPerformSelector:",sel_getUid("removeFromSuperview"));
_tableViews=_tableViews.slice(0,_2d);
_tableDelegates=_tableDelegates.slice(0,_2d);
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("browser:didChangeLastColumn:toColumn:"))){
objj_msgSend(_delegate,"browser:didChangeLastColumn:toColumn:",_29,_2c,_2b);
}
objj_msgSend(_29,"tile");
}
}),new objj_method(sel_getUid("lastColumn"),function(_2e,_2f){
with(_2e){
return _tableViews.length-1;
}
}),new objj_method(sel_getUid("addColumn"),function(_30,_31){
with(_30){
var _32=objj_msgSend(_30,"lastColumn"),_33=_tableViews[_32],_34=objj_msgSend(_33,"selectedRowIndexes");
if(_32>=0&&objj_msgSend(_34,"count")>1){
objj_msgSend(CPException,"raise:reason:",CPInvalidArgumentException,"Can't add column, column "+_32+" has invalid selection.");
}
var _35=_32+1,_36=_35===0?_rootItem:objj_msgSend(_tableDelegates[_32],"childAtIndex:",objj_msgSend(_34,"firstIndex"));
if(_35>0&&_36&&objj_msgSend(_30,"isLeafItem:",_36)){
return;
}
var _37=objj_msgSend(objj_msgSend(_tableViewClass,"alloc"),"initWithFrame:browser:",CGRectMakeZero(),_30);
objj_msgSend(_37,"setHeaderView:",nil);
objj_msgSend(_37,"setCornerView:",nil);
objj_msgSend(_37,"setAllowsMultipleSelection:",_allowsMultipleSelection);
objj_msgSend(_37,"setAllowsEmptySelection:",_allowsEmptySelection);
objj_msgSend(_37,"registerForDraggedTypes:",objj_msgSend(_30,"registeredDraggedTypes"));
objj_msgSend(_30,"_addTableColumnsToTableView:forColumnIndex:",_37,_35);
var _38=objj_msgSend(objj_msgSend(_CPBrowserTableDelegate,"alloc"),"init");
objj_msgSend(_38,"_setDelegate:",_delegate);
objj_msgSend(_38,"_setBrowser:",_30);
objj_msgSend(_38,"_setIndex:",_35);
objj_msgSend(_38,"_setItem:",_36);
_tableViews[_35]=_37;
_tableDelegates[_35]=_38;
objj_msgSend(_37,"setDelegate:",_38);
objj_msgSend(_37,"setDataSource:",_38);
objj_msgSend(_37,"setTarget:",_38);
objj_msgSend(_37,"setAction:",sel_getUid("_tableViewClicked:"));
objj_msgSend(_37,"setDoubleAction:",sel_getUid("_tableViewDoubleClicked:"));
objj_msgSend(_37,"setDraggingDestinationFeedbackStyle:",CPTableViewDraggingDestinationFeedbackStyleRegular);
var _39=objj_msgSend(objj_msgSend(_CPBrowserScrollView,"alloc"),"initWithFrame:",CGRectMakeZero());
objj_msgSend(_39,"_setBrowser:",_30);
objj_msgSend(_39,"setDocumentView:",_37);
objj_msgSend(_39,"setHasHorizontalScroller:",NO);
objj_msgSend(_39,"setAutoresizingMask:",CPViewHeightSizable);
objj_msgSend(_contentView,"addSubview:",_39);
objj_msgSend(_30,"tile");
objj_msgSend(_30,"scrollColumnToVisible:",_35);
}
}),new objj_method(sel_getUid("_addTableColumnsToTableView:forColumnIndex:"),function(_3a,_3b,_3c,_3d){
with(_3a){
if(_delegateSupportsImages){
var _3e=objj_msgSend(objj_msgSend(CPTableColumn,"alloc"),"initWithIdentifier:","Image"),_3f=objj_msgSend(objj_msgSend(CPImageView,"alloc"),"initWithFrame:",CGRectMakeZero());
objj_msgSend(_3f,"setImageScaling:",CPScaleProportionally);
objj_msgSend(_3e,"setDataView:",_3f);
objj_msgSend(_3e,"setResizingMask:",CPTableColumnNoResizing);
objj_msgSend(_3c,"addTableColumn:",_3e);
}
var _3e=objj_msgSend(objj_msgSend(CPTableColumn,"alloc"),"initWithIdentifier:","Content");
objj_msgSend(_3e,"setDataView:",_prototypeView);
objj_msgSend(_3e,"setResizingMask:",CPTableColumnNoResizing);
objj_msgSend(_3c,"addTableColumn:",_3e);
var _3e=objj_msgSend(objj_msgSend(CPTableColumn,"alloc"),"initWithIdentifier:","Leaf"),_3f=objj_msgSend(objj_msgSend(_CPBrowserLeafView,"alloc"),"initWithFrame:",CGRectMakeZero());
objj_msgSend(_3f,"setBranchImage:",objj_msgSend(objj_msgSend(_3a,"class"),"branchImage"));
objj_msgSend(_3f,"setHighlightedBranchImage:",objj_msgSend(objj_msgSend(_3a,"class"),"highlightedBranchImage"));
objj_msgSend(_3e,"setDataView:",_3f);
objj_msgSend(_3e,"setResizingMask:",CPTableColumnNoResizing);
objj_msgSend(_3c,"addTableColumn:",_3e);
}
}),new objj_method(sel_getUid("reloadColumn:"),function(_40,_41,_42){
with(_40){
objj_msgSend(objj_msgSend(_40,"tableViewInColumn:",_42),"reloadData");
}
}),new objj_method(sel_getUid("tile"),function(_43,_44){
with(_43){
var _45=0,_46=objj_msgSend(CPScroller,"scrollerWidth"),_47=CGRectGetHeight(objj_msgSend(_contentView,"bounds"));
for(var i=0,_48=_tableViews.length;i<_48;i++){
var _49=_tableViews[i],_4a=objj_msgSend(_49,"enclosingScrollView"),_4b=objj_msgSend(_43,"widthOfColumn:",i),_4c=CGRectGetHeight(objj_msgSend(_49,"bounds"));
objj_msgSend(objj_msgSend(_49,"tableColumnWithIdentifier:","Image"),"setWidth:",_imageWidth);
objj_msgSend(objj_msgSend(_49,"tableColumnWithIdentifier:","Content"),"setWidth:",objj_msgSend(_43,"columnContentWidthForColumnWidth:",_4b));
objj_msgSend(objj_msgSend(_49,"tableColumnWithIdentifier:","Leaf"),"setWidth:",_leafWidth);
objj_msgSend(_49,"setRowHeight:",_rowHeight);
objj_msgSend(_49,"setFrameSize:",CGSizeMake(_4b-_46,_4c));
objj_msgSend(_4a,"setFrameOrigin:",CGPointMake(_45,0));
objj_msgSend(_4a,"setFrameSize:",CGSizeMake(_4b,_47));
_45+=_4b;
}
objj_msgSend(_contentView,"setFrameSize:",CGSizeMake(_45,_47));
}
}),new objj_method(sel_getUid("rowAtPoint:"),function(_4d,_4e,_4f){
with(_4d){
var _50=objj_msgSend(_4d,"columnAtPoint:",_4f);
if(_50===-1){
return -1;
}
var _51=_tableViews[_50];
return objj_msgSend(_51,"rowAtPoint:",objj_msgSend(_51,"convertPoint:fromView:",_4f,_4d));
}
}),new objj_method(sel_getUid("columnAtPoint:"),function(_52,_53,_54){
with(_52){
var _55=objj_msgSend(_contentView,"convertPoint:fromView:",_54,_52);
for(var i=0,_56=_tableViews.length;i<_56;i++){
var _57=objj_msgSend(objj_msgSend(_tableViews[i],"enclosingScrollView"),"frame");
if(CGRectContainsPoint(_57,_55)){
return i;
}
}
return -1;
}
}),new objj_method(sel_getUid("rectOfRow:inColumn:"),function(_58,_59,_5a,_5b){
with(_58){
var _5c=_tableViews[_5b],_5d=objj_msgSend(_5c,"rectOfRow:",_5a);
_5d.origin=objj_msgSend(_58,"convertPoint:fromView:",_5d.origin,_5c);
return _5d;
}
}),new objj_method(sel_getUid("itemAtRow:inColumn:"),function(_5e,_5f,row,_60){
with(_5e){
return objj_msgSend(_tableDelegates[_60],"childAtIndex:",row);
}
}),new objj_method(sel_getUid("isLeafItem:"),function(_61,_62,_63){
with(_61){
return objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("browser:isLeafItem:"))&&objj_msgSend(_delegate,"browser:isLeafItem:",_61,_63);
}
}),new objj_method(sel_getUid("parentForItemsInColumn:"),function(_64,_65,_66){
with(_64){
return objj_msgSend(_tableDelegates[_66],"_item");
}
}),new objj_method(sel_getUid("selectedItems"),function(_67,_68){
with(_67){
var _69=objj_msgSend(_67,"selectedColumn"),_6a=objj_msgSend(_67,"selectedRowIndexesInColumn:",_69),set=objj_msgSend(CPSet,"set"),_6b=objj_msgSend(_6a,"firstIndex");
while(_6b!==CPNotFound){
objj_msgSend(set,"addObject:",objj_msgSend(_67,"itemAtRow:inColumn:",_6b,_69));
_6b=objj_msgSend(_6a,"indexGreaterThanIndex:",_6b);
}
return set;
}
}),new objj_method(sel_getUid("selectedItem"),function(_6c,_6d){
with(_6c){
var _6e=objj_msgSend(_6c,"selectedColumn"),_6f=objj_msgSend(_6c,"selectedRowInColumn:",_6e);
return objj_msgSend(_6c,"itemAtRow:inColumn:",_6f,_6e);
}
}),new objj_method(sel_getUid("trackMouse:"),function(_70,_71,_72){
with(_70){
}
}),new objj_method(sel_getUid("_column:clickedRow:"),function(_73,_74,_75,_76){
with(_73){
objj_msgSend(_73,"setLastColumn:",_75);
if(_76>=0){
objj_msgSend(_73,"addColumn");
}
objj_msgSend(_73,"doClick:",_73);
}
}),new objj_method(sel_getUid("sendAction"),function(_77,_78){
with(_77){
objj_msgSend(_77,"sendAction:to:",_action,_target);
}
}),new objj_method(sel_getUid("doClick:"),function(_79,_7a,_7b){
with(_79){
objj_msgSend(_79,"sendAction:to:",_action,_target);
}
}),new objj_method(sel_getUid("doDoubleClick:"),function(_7c,_7d,_7e){
with(_7c){
objj_msgSend(_7c,"sendAction:to:",_doubleAction,_target);
}
}),new objj_method(sel_getUid("keyDown:"),function(_7f,_80,_81){
with(_7f){
var _82=objj_msgSend(_7f,"selectedColumn");
if(_82===-1){
return;
}
objj_msgSend(_tableViews[_82],"keyDown:",_81);
}
}),new objj_method(sel_getUid("columnContentWidthForColumnWidth:"),function(_83,_84,_85){
with(_83){
var _86=objj_msgSend(_tableViews[0],"intercellSpacing").width;
return _85-(_leafWidth+_86+(_delegateSupportsImages?_imageWidth+_86:0))-_86-objj_msgSend(CPScroller,"scrollerWidth");
}
}),new objj_method(sel_getUid("columnWidthForColumnContentWidth:"),function(_87,_88,_89){
with(_87){
var _8a=objj_msgSend(_tableViews[0],"intercellSpacing").width;
return _89+(_leafWidth+_8a+(_delegateSupportsImages?_imageWidth+_8a:0))+_8a+objj_msgSend(CPScroller,"scrollerWidth");
}
}),new objj_method(sel_getUid("setImageWidth:"),function(_8b,_8c,_8d){
with(_8b){
_imageWidth=_8d;
objj_msgSend(_8b,"tile");
}
}),new objj_method(sel_getUid("imageWidth"),function(_8e,_8f){
with(_8e){
return _imageWidth;
}
}),new objj_method(sel_getUid("setMinColumnWidth:"),function(_90,_91,_92){
with(_90){
_minColumnWidth=_92;
objj_msgSend(_90,"tile");
}
}),new objj_method(sel_getUid("minColumnWidth"),function(_93,_94){
with(_93){
return _minColumnWidth;
}
}),new objj_method(sel_getUid("setWidth:ofColumn:"),function(_95,_96,_97,_98){
with(_95){
_columnWidths[_98]=_97;
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("browser:didResizeColumn:"))){
objj_msgSend(_delegate,"browser:didResizeColumn:",_95,_98);
}
objj_msgSend(_95,"tile");
}
}),new objj_method(sel_getUid("widthOfColumn:"),function(_99,_9a,_9b){
with(_99){
var _9c=_columnWidths[_9b];
if(_9c==null){
_9c=_defaultColumnWidth;
}
return MAX(objj_msgSend(CPScroller,"scrollerWidth"),MAX(_minColumnWidth,_9c));
}
}),new objj_method(sel_getUid("setRowHeight:"),function(_9d,_9e,_9f){
with(_9d){
_rowHeight=_9f;
}
}),new objj_method(sel_getUid("rowHeight"),function(_a0,_a1){
with(_a0){
return _rowHeight;
}
}),new objj_method(sel_getUid("scrollColumnToVisible:"),function(_a2,_a3,_a4){
with(_a2){
objj_msgSend(_contentView,"scrollRectToVisible:",objj_msgSend(objj_msgSend(objj_msgSend(_a2,"tableViewInColumn:",_a4),"enclosingScrollView"),"frame"));
}
}),new objj_method(sel_getUid("scrollRowToVisible:inColumn:"),function(_a5,_a6,_a7,_a8){
with(_a5){
objj_msgSend(_a5,"scrollColumnToVisible:",_a8);
objj_msgSend(objj_msgSend(_a5,"tableViewInColumn:",_a8),"scrollRowToVisible:",_a7);
}
}),new objj_method(sel_getUid("autohidesScroller"),function(_a9,_aa){
with(_a9){
return objj_msgSend(_horizontalScrollView,"autohidesScrollers");
}
}),new objj_method(sel_getUid("setAutohidesScroller:"),function(_ab,_ac,_ad){
with(_ab){
objj_msgSend(_horizontalScrollView,"setAutohidesScrollers:",_ad);
}
}),new objj_method(sel_getUid("selectedRowInColumn:"),function(_ae,_af,_b0){
with(_ae){
if(_b0>objj_msgSend(_ae,"lastColumn")||_b0<0){
return -1;
}
return objj_msgSend(_tableViews[_b0],"selectedRow");
}
}),new objj_method(sel_getUid("selectedColumn"),function(_b1,_b2){
with(_b1){
var _b3=objj_msgSend(_b1,"lastColumn"),row=objj_msgSend(_b1,"selectedRowInColumn:",_b3);
if(row>=0){
return _b3;
}else{
return _b3-1;
}
}
}),new objj_method(sel_getUid("selectRow:inColumn:"),function(_b4,_b5,row,_b6){
with(_b4){
var _b7=row===-1?objj_msgSend(CPIndexSet,"indexSet"):objj_msgSend(CPIndexSet,"indexSetWithIndex:",row);
objj_msgSend(_b4,"selectRowIndexes:inColumn:",_b7,_b6);
}
}),new objj_method(sel_getUid("allowsMultipleSelection"),function(_b8,_b9){
with(_b8){
return _allowsMultipleSelection;
}
}),new objj_method(sel_getUid("setAllowsMultipleSelection:"),function(_ba,_bb,_bc){
with(_ba){
if(_allowsMultipleSelection===_bc){
return;
}
_allowsMultipleSelection=_bc;
objj_msgSend(_tableViews,"makeObjectsPerformSelector:withObject:",sel_getUid("setAllowsMultipleSelection:"),_bc);
}
}),new objj_method(sel_getUid("allowsEmptySelection"),function(_bd,_be){
with(_bd){
return _allowsEmptySelection;
}
}),new objj_method(sel_getUid("setAllowsEmptySelection:"),function(_bf,_c0,_c1){
with(_bf){
if(_allowsEmptySelection===_c1){
return;
}
_allowsEmptySelection=_c1;
objj_msgSend(_tableViews,"makeObjectsPerformSelector:withObject:",sel_getUid("setAllowsEmptySelection:"),_c1);
}
}),new objj_method(sel_getUid("selectedRowIndexesInColumn:"),function(_c2,_c3,_c4){
with(_c2){
if(_c4<0||_c4>objj_msgSend(_c2,"lastColumn")+1){
return objj_msgSend(CPIndexSet,"indexSet");
}
return objj_msgSend(objj_msgSend(_c2,"tableViewInColumn:",_c4),"selectedRowIndexes");
}
}),new objj_method(sel_getUid("selectRowIndexes:inColumn:"),function(_c5,_c6,_c7,_c8){
with(_c5){
if(_c8<0||_c8>objj_msgSend(_c5,"lastColumn")+1){
return;
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("browser:selectionIndexesForProposedSelection:inColumn:"))){
_c7=objj_msgSend(_delegate,"browser:selectionIndexesForProposedSelection:inColumn:",_c5,_c7,_c8);
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("browser:shouldSelectRowIndexes:inColumn:"))&&!objj_msgSend(_delegate,"browser:shouldSelectRowIndexes:inColumn:",_c5,_c7,_c8)){
return;
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("browserSelectionIsChanging:"))){
objj_msgSend(_delegate,"browserSelectionIsChanging:",_c5);
}
if(_c8>objj_msgSend(_c5,"lastColumn")){
objj_msgSend(_c5,"addColumn");
}
objj_msgSend(_c5,"setLastColumn:",_c8);
objj_msgSend(objj_msgSend(_c5,"tableViewInColumn:",_c8),"selectRowIndexes:byExtendingSelection:",_c7,NO);
objj_msgSend(_c5,"scrollColumnToVisible:",_c8);
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("browserSelectionDidChange:"))){
objj_msgSend(_delegate,"browserSelectionDidChange:",_c5);
}
}
}),new objj_method(sel_getUid("setBackgroundColor:"),function(_c9,_ca,_cb){
with(_c9){
objj_msgSendSuper({receiver:_c9,super_class:objj_getClass("CPBrowser").super_class},"setBackgroundColor:",_cb);
objj_msgSend(_contentView,"setBackgroundColor:",_cb);
}
}),new objj_method(sel_getUid("acceptsFirstResponder"),function(_cc,_cd){
with(_cc){
return YES;
}
}),new objj_method(sel_getUid("registerForDraggedTypes:"),function(_ce,_cf,_d0){
with(_ce){
objj_msgSendSuper({receiver:_ce,super_class:objj_getClass("CPBrowser").super_class},"registerForDraggedTypes:",_d0);
objj_msgSend(_tableViews,"makeObjectsPerformSelector:withObject:",sel_getUid("registerForDraggedTypes:"),_d0);
}
}),new objj_method(sel_getUid("canDragRowsWithIndexes:inColumn:withEvent:"),function(_d1,_d2,_d3,_d4,_d5){
with(_d1){
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("browser:canDragRowsWithIndexes:inColumn:withEvent:"))){
return objj_msgSend(_delegate,"browser:canDragRowsWithIndexes:inColumn:withEvent:",_d1,_d3,_d4,_d5);
}
return YES;
}
}),new objj_method(sel_getUid("draggingImageForRowsWithIndexes:inColumn:withEvent:offset:"),function(_d6,_d7,_d8,_d9,_da,_db){
with(_d6){
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("browser:draggingImageForRowsWithIndexes:inColumn:withEvent:offset:"))){
return objj_msgSend(_delegate,"browser:draggingImageForRowsWithIndexes:inColumn:withEvent:offset:",_d6,_d8,_d9,_da,_db);
}
return nil;
}
}),new objj_method(sel_getUid("draggingViewForRowsWithIndexes:inColumn:withEvent:offset:"),function(_dc,_dd,_de,_df,_e0,_e1){
with(_dc){
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("browser:draggingViewForRowsWithIndexes:inColumn:withEvent:offset:"))){
return objj_msgSend(_delegate,"browser:draggingViewForRowsWithIndexes:inColumn:withEvent:offset:",_dc,_de,_df,_e0,_e1);
}
return nil;
}
})]);
class_addMethods(_2,[new objj_method(sel_getUid("branchImage"),function(_e2,_e3){
with(_e2){
return objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(objj_msgSend(CPBundle,"bundleForClass:",objj_msgSend(CPBrowser,"class")),"pathForResource:","browser-leaf.png"),CGSizeMake(9,9));
}
}),new objj_method(sel_getUid("highlightedBranchImage"),function(_e4,_e5){
with(_e4){
return objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(objj_msgSend(CPBundle,"bundleForClass:",objj_msgSend(CPBrowser,"class")),"pathForResource:","browser-leaf-highlighted.png"),CGSizeMake(9,9));
}
})]);
var _1=objj_getClass("CPBrowser");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"CPBrowser\"");
}
var _2=_1.isa;
class_addMethods(_1,[new objj_method(sel_getUid("initWithCoder:"),function(_e6,_e7,_e8){
with(_e6){
_e6=objj_msgSendSuper({receiver:_e6,super_class:objj_getClass("CPBrowser").super_class},"initWithCoder:",_e8);
if(_e6){
objj_msgSend(_e6,"_init");
_allowsEmptySelection=objj_msgSend(_e8,"decodeBoolForKey:","CPBrowserAllowsEmptySelectionKey");
_allowsMultipleSelection=objj_msgSend(_e8,"decodeBoolForKey:","CPBrowserAllowsMultipleSelectionKey");
_prototypeView=objj_msgSend(_e8,"decodeObjectForKey:","CPBrowserPrototypeViewKey");
_rowHeight=objj_msgSend(_e8,"decodeFloatForKey:","CPBrowserRowHeightKey");
_imageWidth=objj_msgSend(_e8,"decodeFloatForKey:","CPBrowserImageWidthKey");
_minColumnWidth=objj_msgSend(_e8,"decodeFloatForKey:","CPBrowserMinColumnWidthKey");
_columnWidths=objj_msgSend(_e8,"decodeObjectForKey:","CPBrowserColumnWidthsKey");
objj_msgSend(_e6,"setDelegate:",objj_msgSend(_e8,"decodeObjectForKey:","CPBrowserDelegateKey"));
objj_msgSend(_e6,"setAutohidesScroller:",objj_msgSend(_e8,"decodeBoolForKey:","CPBrowserAutohidesScrollerKey"));
}
return _e6;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_e9,_ea,_eb){
with(_e9){
var _ec=_subviews;
_subviews=[];
objj_msgSendSuper({receiver:_e9,super_class:objj_getClass("CPBrowser").super_class},"encodeWithCoder:",_eb);
_subviews=_ec;
objj_msgSend(_eb,"encodeBool:forKey:",objj_msgSend(_e9,"autohidesScroller"),"CPBrowserAutohidesScrollerKey");
objj_msgSend(_eb,"encodeBool:forKey:",_allowsEmptySelection,"CPBrowserAllowsEmptySelectionKey");
objj_msgSend(_eb,"encodeBool:forKey:",_allowsMultipleSelection,"CPBrowserAllowsMultipleSelectionKey");
objj_msgSend(_eb,"encodeObject:forKey:",_delegate,"CPBrowserDelegateKey");
objj_msgSend(_eb,"encodeObject:forKey:",_prototypeView,"CPBrowserPrototypeViewKey");
objj_msgSend(_eb,"encodeFloat:forKey:",_rowHeight,"CPBrowserRowHeightKey");
objj_msgSend(_eb,"encodeFloat:forKey:",_imageWidth,"CPBrowserImageWidthKey");
objj_msgSend(_eb,"encodeFloat:forKey:",_minColumnWidth,"CPBrowserMinColumnWidthKey");
objj_msgSend(_eb,"encodeObject:forKey:",_columnWidths,"CPBrowserColumnWidthsKey");
}
})]);
var _ed=nil;
var _1=objj_allocateClassPair(CPView,"_CPBrowserResizeControl"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_mouseDownX"),new objj_ivar("_browser"),new objj_ivar("_index"),new objj_ivar("_width")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("initWithFrame:"),function(_ee,_ef,_f0){
with(_ee){
if(_ee=objj_msgSendSuper({receiver:_ee,super_class:objj_getClass("_CPBrowserResizeControl").super_class},"initWithFrame:",_f0)){
objj_msgSend(_ee,"setBackgroundColor:",objj_msgSend(CPColor,"colorWithPatternImage:",objj_msgSend(objj_msgSend(_ee,"class"),"backgroundImage")));
}
return _ee;
}
}),new objj_method(sel_getUid("mouseDown:"),function(_f1,_f2,_f3){
with(_f1){
_mouseDownX=objj_msgSend(_f3,"locationInWindow").x;
_browser=objj_msgSend(objj_msgSend(_f1,"superview"),"_browser");
_index=objj_msgSend(_browser,"columnOfTableView:",objj_msgSend(objj_msgSend(_f1,"superview"),"documentView"));
_width=objj_msgSend(_browser,"widthOfColumn:",_index);
}
}),new objj_method(sel_getUid("mouseDragged:"),function(_f4,_f5,_f6){
with(_f4){
var _f7=objj_msgSend(_f6,"locationInWindow").x-_mouseDownX;
objj_msgSend(_browser,"setWidth:ofColumn:",_width+_f7,_index);
}
}),new objj_method(sel_getUid("mouseUp:"),function(_f8,_f9,_fa){
with(_f8){
}
})]);
class_addMethods(_2,[new objj_method(sel_getUid("backgroundImage"),function(_fb,_fc){
with(_fb){
if(!_ed){
var _fd=objj_msgSend(objj_msgSend(CPBundle,"bundleForClass:",objj_msgSend(_fb,"class")),"pathForResource:","browser-resize-control.png");
_ed=objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",_fd,CGSizeMake(15,14));
}
return _ed;
}
})]);
var _1=objj_allocateClassPair(CPScrollView,"_CPBrowserScrollView"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_resizeControl"),new objj_ivar("_browser")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("_browser"),function(_fe,_ff){
with(_fe){
return _browser;
}
}),new objj_method(sel_getUid("_setBrowser:"),function(self,_100,_101){
with(self){
_browser=_101;
}
}),new objj_method(sel_getUid("initWithFrame:"),function(self,_102,_103){
with(self){
if(self=objj_msgSendSuper({receiver:self,super_class:objj_getClass("_CPBrowserScrollView").super_class},"initWithFrame:",_103)){
_resizeControl=objj_msgSend(objj_msgSend(_CPBrowserResizeControl,"alloc"),"initWithFrame:",CGRectMakeZero());
objj_msgSend(self,"addSubview:",_resizeControl);
}
return self;
}
}),new objj_method(sel_getUid("reflectScrolledClipView:"),function(self,_104,_105){
with(self){
objj_msgSendSuper({receiver:self,super_class:objj_getClass("_CPBrowserScrollView").super_class},"reflectScrolledClipView:",_105);
var _106=objj_msgSend(_verticalScroller,"frame");
_106.size.height=CGRectGetHeight(objj_msgSend(self,"bounds"))-14-_106.origin.y;
objj_msgSend(_verticalScroller,"setFrameSize:",_106.size);
var _107=CGRectMake(CGRectGetMinX(_106),CGRectGetMaxY(_106),objj_msgSend(CPScroller,"scrollerWidth"),14);
objj_msgSend(_resizeControl,"setFrame:",_107);
}
})]);
var _1=objj_allocateClassPair(CPTableView,"_CPBrowserTableView"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_browser")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("initWithFrame:browser:"),function(self,_108,_109,_10a){
with(self){
if(self=objj_msgSendSuper({receiver:self,super_class:objj_getClass("_CPBrowserTableView").super_class},"initWithFrame:",_109)){
_browser=_10a;
}
return self;
}
}),new objj_method(sel_getUid("acceptsFirstResponder"),function(self,_10b){
with(self){
return NO;
}
}),new objj_method(sel_getUid("mouseDown:"),function(self,_10c,_10d){
with(self){
objj_msgSendSuper({receiver:self,super_class:objj_getClass("_CPBrowserTableView").super_class},"mouseDown:",_10d);
objj_msgSend(objj_msgSend(self,"window"),"makeFirstResponder:",_browser);
}
}),new objj_method(sel_getUid("browserView"),function(self,_10e){
with(self){
return _browser;
}
}),new objj_method(sel_getUid("canDragRowsWithIndexes:atPoint:"),function(self,_10f,_110,_111){
with(self){
return objj_msgSend(_browser,"canDragRowsWithIndexes:inColumn:withEvent:",_110,objj_msgSend(_browser,"columnOfTableView:",self),objj_msgSend(CPApp,"currentEvent"));
}
}),new objj_method(sel_getUid("dragImageForRowsWithIndexes:tableColumns:event:offset:"),function(self,_112,_113,_114,_115,_116){
with(self){
return objj_msgSend(_browser,"draggingImageForRowsWithIndexes:inColumn:withEvent:offset:",_113,objj_msgSend(_browser,"columnOfTableView:",self),_115,_116)||objj_msgSendSuper({receiver:self,super_class:objj_getClass("_CPBrowserTableView").super_class},"dragImageForRowsWithIndexes:tableColumns:event:offset:",_113,_114,_115,_116);
}
}),new objj_method(sel_getUid("dragViewForRowsWithIndexes:tableColumns:event:offset:"),function(self,_117,_118,_119,_11a,_11b){
with(self){
var _11c=_119.length;
while(_11c--){
if(objj_msgSend(_119[_11c],"identifier")==="Leaf"){
objj_msgSend(_119,"removeObject:",_119[_11c]);
}
}
return objj_msgSend(_browser,"draggingViewForRowsWithIndexes:inColumn:withEvent:offset:",_118,objj_msgSend(_browser,"columnOfTableView:",self),_11a,_11b)||objj_msgSendSuper({receiver:self,super_class:objj_getClass("_CPBrowserTableView").super_class},"dragViewForRowsWithIndexes:tableColumns:event:offset:",_118,_119,_11a,_11b);
}
}),new objj_method(sel_getUid("moveUp:"),function(self,_11d,_11e){
with(self){
objj_msgSendSuper({receiver:self,super_class:objj_getClass("_CPBrowserTableView").super_class},"moveUp:",_11e);
objj_msgSend(_browser,"selectRow:inColumn:",objj_msgSend(self,"selectedRow"),objj_msgSend(_browser,"selectedColumn"));
}
}),new objj_method(sel_getUid("moveDown:"),function(self,_11f,_120){
with(self){
objj_msgSendSuper({receiver:self,super_class:objj_getClass("_CPBrowserTableView").super_class},"moveDown:",_120);
objj_msgSend(_browser,"selectRow:inColumn:",objj_msgSend(self,"selectedRow"),objj_msgSend(_browser,"selectedColumn"));
}
}),new objj_method(sel_getUid("moveLeft:"),function(self,_121,_122){
with(self){
var _123=objj_msgSend(_browser,"selectedColumn")-1,_124=objj_msgSend(_browser,"selectedRowInColumn:",_123);
objj_msgSend(_browser,"selectRow:inColumn:",_124,_123);
}
}),new objj_method(sel_getUid("moveRight:"),function(self,_125,_126){
with(self){
objj_msgSend(_browser,"selectRow:inColumn:",0,objj_msgSend(_browser,"selectedColumn")+1);
}
})]);
objj_executeFile("Foundation/CPObject.j",NO);
var _1=objj_allocateClassPair(CPObject,"_CPBrowserTableDelegate"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_browser"),new objj_ivar("_index"),new objj_ivar("_delegate"),new objj_ivar("_item")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("_browser"),function(self,_127){
with(self){
return _browser;
}
}),new objj_method(sel_getUid("_setBrowser:"),function(self,_128,_129){
with(self){
_browser=_129;
}
}),new objj_method(sel_getUid("_index"),function(self,_12a){
with(self){
return _index;
}
}),new objj_method(sel_getUid("_setIndex:"),function(self,_12b,_12c){
with(self){
_index=_12c;
}
}),new objj_method(sel_getUid("_delegate"),function(self,_12d){
with(self){
return _delegate;
}
}),new objj_method(sel_getUid("_setDelegate:"),function(self,_12e,_12f){
with(self){
_delegate=_12f;
}
}),new objj_method(sel_getUid("_item"),function(self,_130){
with(self){
return _item;
}
}),new objj_method(sel_getUid("_setItem:"),function(self,_131,_132){
with(self){
_item=_132;
}
}),new objj_method(sel_getUid("numberOfRowsInTableView:"),function(self,_133,_134){
with(self){
return objj_msgSend(_delegate,"browser:numberOfChildrenOfItem:",_browser,_item);
}
}),new objj_method(sel_getUid("tableView:objectValueForTableColumn:row:"),function(self,_135,_136,_137,row){
with(self){
if(objj_msgSend(_137,"identifier")==="Image"){
return objj_msgSend(_delegate,"browser:imageValueForItem:",_browser,objj_msgSend(self,"childAtIndex:",row));
}else{
if(objj_msgSend(_137,"identifier")==="Leaf"){
return !objj_msgSend(_browser,"isLeafItem:",objj_msgSend(self,"childAtIndex:",row));
}else{
return objj_msgSend(_delegate,"browser:objectValueForItem:",_browser,objj_msgSend(self,"childAtIndex:",row));
}
}
}
}),new objj_method(sel_getUid("_tableViewDoubleClicked:"),function(self,_138,_139){
with(self){
objj_msgSend(_browser,"doDoubleClick:",self);
}
}),new objj_method(sel_getUid("_tableViewClicked:"),function(self,_13a,_13b){
with(self){
var _13c=objj_msgSend(_13b,"selectedRowIndexes");
objj_msgSend(_browser,"_column:clickedRow:",_index,objj_msgSend(_13c,"count")===1?objj_msgSend(_13c,"firstIndex"):-1);
}
}),new objj_method(sel_getUid("childAtIndex:"),function(self,_13d,_13e){
with(self){
return objj_msgSend(_delegate,"browser:child:ofItem:",_browser,_13e,_item);
}
}),new objj_method(sel_getUid("tableView:acceptDrop:row:dropOperation:"),function(self,_13f,_140,info,row,_141){
with(self){
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("browser:acceptDrop:atRow:column:dropOperation:"))){
return objj_msgSend(_delegate,"browser:acceptDrop:atRow:column:dropOperation:",_browser,info,row,_index,_141);
}else{
return NO;
}
}
}),new objj_method(sel_getUid("tableView:validateDrop:proposedRow:proposedDropOperation:"),function(self,_142,_143,info,row,_144){
with(self){
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("browser:validateDrop:proposedRow:column:dropOperation:"))){
return objj_msgSend(_delegate,"browser:validateDrop:proposedRow:column:dropOperation:",_browser,info,row,_index,_144);
}else{
return CPDragOperationNone;
}
}
}),new objj_method(sel_getUid("tableView:writeRowsWithIndexes:toPasteboard:"),function(self,_145,_146,_147,_148){
with(self){
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("browser:writeRowsWithIndexes:inColumn:toPasteboard:"))){
return objj_msgSend(_delegate,"browser:writeRowsWithIndexes:inColumn:toPasteboard:",_browser,_147,_index,_148);
}else{
return NO;
}
}
}),new objj_method(sel_getUid("respondsToSelector:"),function(self,_149,_14a){
with(self){
if(_14a===sel_getUid("browser:writeRowsWithIndexes:inColumn:toPasteboard:")){
return objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("browser:writeRowsWithIndexes:inColumn:toPasteboard:"));
}else{
return objj_msgSendSuper({receiver:self,super_class:objj_getClass("_CPBrowserTableDelegate").super_class},"respondsToSelector:",_14a);
}
}
})]);
var _1=objj_allocateClassPair(CPView,"_CPBrowserLeafView"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_isLeaf"),new objj_ivar("_branchImage"),new objj_ivar("_highlightedBranchImage")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("isLeaf"),function(self,_14b){
with(self){
return _isLeaf;
}
}),new objj_method(sel_getUid("branchImage"),function(self,_14c){
with(self){
return _branchImage;
}
}),new objj_method(sel_getUid("setBranchImage:"),function(self,_14d,_14e){
with(self){
_branchImage=_14e;
}
}),new objj_method(sel_getUid("highlightedBranchImage"),function(self,_14f){
with(self){
return _highlightedBranchImage;
}
}),new objj_method(sel_getUid("setHighlightedBranchImage:"),function(self,_150,_151){
with(self){
_highlightedBranchImage=_151;
}
}),new objj_method(sel_getUid("objectValue"),function(self,_152){
with(self){
return _isLeaf;
}
}),new objj_method(sel_getUid("setObjectValue:"),function(self,_153,_154){
with(self){
_isLeaf=!!_154;
objj_msgSend(self,"setNeedsLayout");
}
}),new objj_method(sel_getUid("rectForEphemeralSubviewNamed:"),function(self,_155,_156){
with(self){
if(_156==="image-view"){
return CGRectInset(objj_msgSend(self,"bounds"),1,1);
}
return objj_msgSendSuper({receiver:self,super_class:objj_getClass("_CPBrowserLeafView").super_class},"rectForEphemeralSubviewNamed:",_156);
}
}),new objj_method(sel_getUid("createEphemeralSubviewNamed:"),function(self,_157,_158){
with(self){
if(_158==="image-view"){
return objj_msgSend(objj_msgSend(CPImageView,"alloc"),"initWithFrame:",CGRectMakeZero());
}
return objj_msgSendSuper({receiver:self,super_class:objj_getClass("_CPBrowserLeafView").super_class},"createEphemeralSubviewNamed:",_158);
}
}),new objj_method(sel_getUid("layoutSubviews"),function(self,_159){
with(self){
var _15a=objj_msgSend(self,"layoutEphemeralSubviewNamed:positioned:relativeToEphemeralSubviewNamed:","image-view",CPWindowAbove,nil),_15b=objj_msgSend(self,"themeState")&CPThemeStateSelectedDataView;
objj_msgSend(_15a,"setImage:",_isLeaf?(_15b?_highlightedBranchImage:_branchImage):nil);
objj_msgSend(_15a,"setImageScaling:",CPScaleNone);
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(self,_15c,_15d){
with(self){
objj_msgSendSuper({receiver:self,super_class:objj_getClass("_CPBrowserLeafView").super_class},"encodeWithCoder:",_15d);
objj_msgSend(_15d,"encodeBool:forKey:",_isLeaf,"_CPBrowserLeafViewIsLeafKey");
objj_msgSend(_15d,"encodeObject:forKey:",_branchImage,"_CPBrowserLeafViewBranchImageKey");
objj_msgSend(_15d,"encodeObject:forKey:",_highlightedBranchImage,"_CPBrowserLeafViewHighlightedBranchImageKey");
}
}),new objj_method(sel_getUid("initWithCoder:"),function(self,_15e,_15f){
with(self){
if(self=objj_msgSendSuper({receiver:self,super_class:objj_getClass("_CPBrowserLeafView").super_class},"initWithCoder:",_15f)){
_isLeaf=objj_msgSend(_15f,"decodeBoolForKey:","_CPBrowserLeafViewIsLeafKey");
_branchImage=objj_msgSend(_15f,"decodeObjectForKey:","_CPBrowserLeafViewBranchImageKey");
_highlightedBranchImage=objj_msgSend(_15f,"decodeObjectForKey:","_CPBrowserLeafViewHighlightedBranchImageKey");
}
return self;
}
})]);
p;10;CPButton.jt;21723;@STATIC;1.0;i;21;_CPImageAndTextView.ji;12;CGGeometry.ji;11;CPControl.ji;17;CPStringDrawing.ji;12;CPCheckBox.ji;9;CPRadio.jt;21592;
objj_executeFile("_CPImageAndTextView.j",YES);
objj_executeFile("CGGeometry.j",YES);
objj_executeFile("CPControl.j",YES);
objj_executeFile("CPStringDrawing.j",YES);
CPRoundedBezelStyle=1;
CPRegularSquareBezelStyle=2;
CPThickSquareBezelStyle=3;
CPThickerSquareBezelStyle=4;
CPDisclosureBezelStyle=5;
CPShadowlessSquareBezelStyle=6;
CPCircularBezelStyle=7;
CPTexturedSquareBezelStyle=8;
CPHelpButtonBezelStyle=9;
CPSmallSquareBezelStyle=10;
CPTexturedRoundedBezelStyle=11;
CPRoundRectBezelStyle=12;
CPRecessedBezelStyle=13;
CPRoundedDisclosureBezelStyle=14;
CPHUDBezelStyle=-1;
CPMomentaryLightButton=0;
CPPushOnPushOffButton=1;
CPToggleButton=2;
CPSwitchButton=3;
CPRadioButton=4;
CPMomentaryChangeButton=5;
CPOnOffButton=6;
CPMomentaryPushInButton=7;
CPMomentaryPushButton=0;
CPMomentaryLight=7;
CPNoButtonMask=0;
CPContentsButtonMask=1;
CPPushInButtonMask=2;
CPGrayButtonMask=4;
CPBackgroundButtonMask=8;
CPNoCellMask=CPNoButtonMask;
CPContentsCellMask=CPContentsButtonMask;
CPPushInCellMask=CPPushInButtonMask;
CPChangeGrayCellMask=CPGrayButtonMask;
CPChangeBackgroundCellMask=CPBackgroundButtonMask;
CPButtonStateMixed=CPThemeState("mixed");
CPButtonStateBezelStyleRounded=CPThemeState("rounded");
var _1=objj_msgSend(CPDictionary,"dictionaryWithObjects:forKeys:",[CPButtonStateBezelStyleRounded,nil],[CPRoundedBezelStyle,CPRoundRectBezelStyle]);
CPButtonDefaultHeight=24;
CPButtonImageOffset=3;
var _2=objj_allocateClassPair(CPControl,"CPButton"),_3=_2.isa;
class_addIvars(_2,[new objj_ivar("_allowsMixedState"),new objj_ivar("_title"),new objj_ivar("_alternateTitle"),new objj_ivar("_showsStateBy"),new objj_ivar("_highlightsBy"),new objj_ivar("_imageDimsWhenDisabled"),new objj_ivar("_bezelStyle"),new objj_ivar("_controlSize"),new objj_ivar("_keyEquivalent"),new objj_ivar("_keyEquivalentModifierMask"),new objj_ivar("_continuousDelayTimer"),new objj_ivar("_continuousTimer"),new objj_ivar("_periodicDelay"),new objj_ivar("_periodicInterval")]);
objj_registerClassPair(_2);
class_addMethods(_2,[new objj_method(sel_getUid("initWithFrame:"),function(_4,_5,_6){
with(_4){
_4=objj_msgSendSuper({receiver:_4,super_class:objj_getClass("CPButton").super_class},"initWithFrame:",_6);
if(_4){
objj_msgSend(_4,"setValue:forThemeAttribute:",CPCenterTextAlignment,"alignment");
objj_msgSend(_4,"setValue:forThemeAttribute:",CPCenterVerticalTextAlignment,"vertical-alignment");
objj_msgSend(_4,"setValue:forThemeAttribute:",CPImageLeft,"image-position");
objj_msgSend(_4,"setValue:forThemeAttribute:",CPScaleNone,"image-scaling");
objj_msgSend(_4,"setBezelStyle:",CPRoundRectBezelStyle);
objj_msgSend(_4,"setBordered:",YES);
objj_msgSend(_4,"_init");
}
return _4;
}
}),new objj_method(sel_getUid("_init"),function(_7,_8){
with(_7){
_controlSize=CPRegularControlSize;
_keyEquivalent="";
_keyEquivalentModifierMask=0;
_periodicInterval=0.05;
_periodicDelay=0.5;
}
}),new objj_method(sel_getUid("allowsMixedState"),function(_9,_a){
with(_9){
return _allowsMixedState;
}
}),new objj_method(sel_getUid("setAllowsMixedState:"),function(_b,_c,_d){
with(_b){
_d=!!_d;
if(_allowsMixedState===_d){
return;
}
_allowsMixedState=_d;
if(!_allowsMixedState&&objj_msgSend(_b,"state")===CPMixedState){
objj_msgSend(_b,"setState:",CPOnState);
}
}
}),new objj_method(sel_getUid("setObjectValue:"),function(_e,_f,_10){
with(_e){
if(!_10||_10===""||(objj_msgSend(_10,"intValue")===0)){
_10=CPOffState;
}else{
if(!objj_msgSend(_10,"isKindOfClass:",objj_msgSend(CPNumber,"class"))){
_10=CPOnState;
}else{
if(_10>=CPOnState){
_10=CPOnState;
}else{
if(_10<CPOffState){
if(objj_msgSend(_e,"allowsMixedState")){
_10=CPMixedState;
}else{
_10=CPOnState;
}
}
}
}
}
objj_msgSendSuper({receiver:_e,super_class:objj_getClass("CPButton").super_class},"setObjectValue:",_10);
switch(objj_msgSend(_e,"objectValue")){
case CPMixedState:
objj_msgSend(_e,"unsetThemeState:",CPThemeStateSelected);
objj_msgSend(_e,"setThemeState:",CPButtonStateMixed);
break;
case CPOnState:
objj_msgSend(_e,"unsetThemeState:",CPButtonStateMixed);
objj_msgSend(_e,"setThemeState:",CPThemeStateSelected);
break;
case CPOffState:
objj_msgSend(_e,"unsetThemeState:",CPThemeStateSelected|CPButtonStateMixed);
}
}
}),new objj_method(sel_getUid("nextState"),function(_11,_12){
with(_11){
if(objj_msgSend(_11,"allowsMixedState")){
var _13=objj_msgSend(_11,"state");
return _13-((_13===-1)?-2:1);
}
return 1-objj_msgSend(_11,"state");
}
}),new objj_method(sel_getUid("setNextState"),function(_14,_15){
with(_14){
if(objj_msgSend(_14,"infoForBinding:",CPValueBinding)){
objj_msgSend(_14,"setAllowsMixedState:",NO);
}
objj_msgSend(_14,"setState:",objj_msgSend(_14,"nextState"));
}
}),new objj_method(sel_getUid("setState:"),function(_16,_17,_18){
with(_16){
objj_msgSend(_16,"setIntValue:",_18);
}
}),new objj_method(sel_getUid("state"),function(_19,_1a){
with(_19){
return objj_msgSend(_19,"intValue");
}
}),new objj_method(sel_getUid("setTitle:"),function(_1b,_1c,_1d){
with(_1b){
if(_title===_1d){
return;
}
_title=_1d;
objj_msgSend(_1b,"setNeedsLayout");
objj_msgSend(_1b,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("title"),function(_1e,_1f){
with(_1e){
return _title;
}
}),new objj_method(sel_getUid("setAlternateTitle:"),function(_20,_21,_22){
with(_20){
if(_alternateTitle===_22){
return;
}
_alternateTitle=_22;
objj_msgSend(_20,"setNeedsLayout");
objj_msgSend(_20,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("alternateTitle"),function(_23,_24){
with(_23){
return _alternateTitle;
}
}),new objj_method(sel_getUid("setImage:"),function(_25,_26,_27){
with(_25){
objj_msgSend(_25,"setValue:forThemeAttribute:",_27,"image");
}
}),new objj_method(sel_getUid("image"),function(_28,_29){
with(_28){
return objj_msgSend(_28,"valueForThemeAttribute:inState:","image",CPThemeStateNormal);
}
}),new objj_method(sel_getUid("setAlternateImage:"),function(_2a,_2b,_2c){
with(_2a){
objj_msgSend(_2a,"setValue:forThemeAttribute:inState:",_2c,"image",CPThemeStateHighlighted);
}
}),new objj_method(sel_getUid("alternateImage"),function(_2d,_2e){
with(_2d){
return objj_msgSend(_2d,"valueForThemeAttribute:inState:","image",CPThemeStateHighlighted);
}
}),new objj_method(sel_getUid("setImageOffset:"),function(_2f,_30,_31){
with(_2f){
objj_msgSend(_2f,"setValue:forThemeAttribute:",_31,"image-offset");
}
}),new objj_method(sel_getUid("imageOffset"),function(_32,_33){
with(_32){
return objj_msgSend(_32,"valueForThemeAttribute:","image-offset");
}
}),new objj_method(sel_getUid("setShowsStateBy:"),function(_34,_35,_36){
with(_34){
if(_showsStateBy===_36){
return;
}
_showsStateBy=_36;
objj_msgSend(_34,"setNeedsDisplay:",YES);
objj_msgSend(_34,"setNeedsLayout");
}
}),new objj_method(sel_getUid("showsStateBy"),function(_37,_38){
with(_37){
return _showsStateBy;
}
}),new objj_method(sel_getUid("setHighlightsBy:"),function(_39,_3a,_3b){
with(_39){
if(_highlightsBy===_3b){
return;
}
_highlightsBy=_3b;
if(objj_msgSend(_39,"hasThemeState:",CPThemeStateHighlighted)){
objj_msgSend(_39,"setNeedsDisplay:",YES);
objj_msgSend(_39,"setNeedsLayout");
}
}
}),new objj_method(sel_getUid("setButtonType:"),function(_3c,_3d,_3e){
with(_3c){
switch(_3e){
case CPMomentaryLightButton:
objj_msgSend(_3c,"setHighlightsBy:",CPChangeBackgroundCellMask);
objj_msgSend(_3c,"setShowsStateBy:",CPNoCellMask);
break;
case CPMomentaryPushInButton:
objj_msgSend(_3c,"setHighlightsBy:",CPPushInCellMask|CPChangeGrayCellMask);
objj_msgSend(_3c,"setShowsStateBy:",CPNoCellMask);
break;
case CPMomentaryChangeButton:
objj_msgSend(_3c,"setHighlightsBy:",CPContentsCellMask);
objj_msgSend(_3c,"setShowsStateBy:",CPNoCellMask);
break;
case CPPushOnPushOffButton:
objj_msgSend(_3c,"setHighlightsBy:",CPPushInCellMask|CPChangeGrayCellMask);
objj_msgSend(_3c,"setShowsStateBy:",CPChangeBackgroundCellMask);
break;
case CPOnOffButton:
objj_msgSend(_3c,"setHighlightsBy:",CPChangeBackgroundCellMask);
objj_msgSend(_3c,"setShowsStateBy:",CPChangeBackgroundCellMask);
break;
case CPToggleButton:
objj_msgSend(_3c,"setHighlightsBy:",CPPushInCellMask|CPContentsCellMask);
objj_msgSend(_3c,"setShowsStateBy:",CPContentsCellMask);
break;
case CPSwitchButton:
objj_msgSend(CPException,"raise:reason:",CPInvalidArgumentException,"The CPSwitchButton type is not supported in Cappuccino, use the CPCheckBox class instead.");
case CPRadioButton:
objj_msgSend(CPException,"raise:reason:",CPInvalidArgumentException,"The CPRadioButton type is not supported in Cappuccino, use the CPRadio class instead.");
default:
objj_msgSend(CPException,"raise:reason:",CPInvalidArgumentException,"Unknown button type.");
}
objj_msgSend(_3c,"setImageDimsWhenDisabled:",YES);
}
}),new objj_method(sel_getUid("setImageDimsWhenDisabled:"),function(_3f,_40,_41){
with(_3f){
_41=!!_41;
if(_imageDimsWhenDisabled===_41){
return;
}
_imageDimsWhenDisabled=_41;
if(objj_msgSend(_3f,"hasThemeState:",CPThemeStateDisabled)){
objj_msgSend(_3f,"setNeedsDisplay:",YES);
objj_msgSend(_3f,"setNeedsLayout");
}
}
}),new objj_method(sel_getUid("imageDimsWhenDisabled"),function(_42,_43){
with(_42){
return _imageDimsWhenDisabled;
}
}),new objj_method(sel_getUid("setPeriodicDelay:interval:"),function(_44,_45,_46,_47){
with(_44){
_periodicDelay=_46;
_periodicInterval=_47;
}
}),new objj_method(sel_getUid("mouseDown:"),function(_48,_49,_4a){
with(_48){
if(objj_msgSend(_48,"isContinuous")){
_continuousDelayTimer=objj_msgSend(CPTimer,"scheduledTimerWithTimeInterval:callback:repeats:",_periodicDelay,function(){
if(!_continuousTimer){
_continuousTimer=objj_msgSend(CPTimer,"scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:",_periodicInterval,_48,sel_getUid("onContinousEvent:"),_4a,YES);
}
},NO);
}
objj_msgSendSuper({receiver:_48,super_class:objj_getClass("CPButton").super_class},"mouseDown:",_4a);
}
}),new objj_method(sel_getUid("onContinousEvent:"),function(_4b,_4c,_4d){
with(_4b){
if(_target&&_action&&objj_msgSend(_target,"respondsToSelector:",_action)){
objj_msgSend(_target,"performSelector:withObject:",_action,_4b);
}
}
}),new objj_method(sel_getUid("startTrackingAt:"),function(_4e,_4f,_50){
with(_4e){
objj_msgSend(_4e,"highlight:",YES);
return objj_msgSendSuper({receiver:_4e,super_class:objj_getClass("CPButton").super_class},"startTrackingAt:",_50);
}
}),new objj_method(sel_getUid("stopTracking:at:mouseIsUp:"),function(_51,_52,_53,_54,_55){
with(_51){
objj_msgSend(_51,"highlight:",NO);
objj_msgSend(_51,"invalidateTimers");
objj_msgSendSuper({receiver:_51,super_class:objj_getClass("CPButton").super_class},"stopTracking:at:mouseIsUp:",_53,_54,_55);
if(_55&&CGRectContainsPoint(objj_msgSend(_51,"bounds"),_54)){
objj_msgSend(_51,"setNextState");
}
}
}),new objj_method(sel_getUid("invalidateTimers"),function(_56,_57){
with(_56){
if(_continuousTimer){
objj_msgSend(_continuousTimer,"invalidate");
_continuousTimer=nil;
}
if(_continuousDelayTimer){
objj_msgSend(_continuousDelayTimer,"invalidate");
_continuousDelayTimer=nil;
}
}
}),new objj_method(sel_getUid("contentRectForBounds:"),function(_58,_59,_5a){
with(_58){
var _5b=objj_msgSend(_58,"currentValueForThemeAttribute:","content-inset");
if(((_5b).top===0&&(_5b).right===0&&(_5b).bottom===0&&(_5b).left===0)){
return _5a;
}
_5a={origin:{x:_5a.origin.x,y:_5a.origin.y},size:{width:_5a.size.width,height:_5a.size.height}};
_5a.origin.x+=_5b.left;
_5a.origin.y+=_5b.top;
_5a.size.width-=_5b.left+_5b.right;
_5a.size.height-=_5b.top+_5b.bottom;
return _5a;
}
}),new objj_method(sel_getUid("bezelRectForBounds:"),function(_5c,_5d,_5e){
with(_5c){
if(!objj_msgSend(_5c,"isBordered")){
return {origin:{x:0,y:0},size:{width:0,height:0}};
}
var _5f=objj_msgSend(_5c,"currentValueForThemeAttribute:","bezel-inset");
if(((_5f).top===0&&(_5f).right===0&&(_5f).bottom===0&&(_5f).left===0)){
return _5e;
}
_5e={origin:{x:_5e.origin.x,y:_5e.origin.y},size:{width:_5e.size.width,height:_5e.size.height}};
_5e.origin.x+=_5f.left;
_5e.origin.y+=_5f.top;
_5e.size.width-=_5f.left+_5f.right;
_5e.size.height-=_5f.top+_5f.bottom;
return _5e;
}
}),new objj_method(sel_getUid("sizeToFit"),function(_60,_61){
with(_60){
objj_msgSend(_60,"layoutSubviews");
var _62,_63=objj_msgSend(_60,"ephemeralSubviewNamed:","content-view");
if(_63){
objj_msgSend(_63,"sizeToFit");
_62=objj_msgSend(_63,"frameSize");
}else{
_62=objj_msgSend((objj_msgSend(_60,"title")||" "),"sizeWithFont:",objj_msgSend(_60,"currentValueForThemeAttribute:","font"));
}
var _64=objj_msgSend(_60,"currentValueForThemeAttribute:","content-inset"),_65=objj_msgSend(_60,"currentValueForThemeAttribute:","min-size"),_66=objj_msgSend(_60,"currentValueForThemeAttribute:","max-size");
_62.width=MAX(_62.width+_64.left+_64.right,_65.width);
_62.height=MAX(_62.height+_64.top+_64.bottom,_65.height);
if(_66.width>=0){
_62.width=MIN(_62.width,_66.width);
}
if(_66.height>=0){
_62.height=MIN(_62.height,_66.height);
}
objj_msgSend(_60,"setFrameSize:",_62);
if(_63){
objj_msgSend(_60,"layoutSubviews");
}
}
}),new objj_method(sel_getUid("rectForEphemeralSubviewNamed:"),function(_67,_68,_69){
with(_67){
if(_69==="bezel-view"){
return objj_msgSend(_67,"bezelRectForBounds:",objj_msgSend(_67,"bounds"));
}else{
if(_69==="content-view"){
return objj_msgSend(_67,"contentRectForBounds:",objj_msgSend(_67,"bounds"));
}
}
return objj_msgSendSuper({receiver:_67,super_class:objj_getClass("CPButton").super_class},"rectForEphemeralSubviewNamed:",_69);
}
}),new objj_method(sel_getUid("createEphemeralSubviewNamed:"),function(_6a,_6b,_6c){
with(_6a){
if(_6c==="bezel-view"){
var _6d=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",{origin:{x:0,y:0},size:{width:0,height:0}});
objj_msgSend(_6d,"setHitTests:",NO);
return _6d;
}else{
return objj_msgSend(objj_msgSend(_CPImageAndTextView,"alloc"),"initWithFrame:",{origin:{x:0,y:0},size:{width:0,height:0}});
}
}
}),new objj_method(sel_getUid("layoutSubviews"),function(_6e,_6f){
with(_6e){
var _70=objj_msgSend(_6e,"layoutEphemeralSubviewNamed:positioned:relativeToEphemeralSubviewNamed:","bezel-view",CPWindowBelow,"content-view");
objj_msgSend(_70,"setBackgroundColor:",objj_msgSend(_6e,"currentValueForThemeAttribute:","bezel-color"));
var _71=objj_msgSend(_6e,"layoutEphemeralSubviewNamed:positioned:relativeToEphemeralSubviewNamed:","content-view",CPWindowAbove,"bezel-view");
if(_71){
objj_msgSend(_71,"setText:",(objj_msgSend(_6e,"hasThemeState:",CPThemeStateHighlighted)&&_alternateTitle)?_alternateTitle:_title);
objj_msgSend(_71,"setImage:",objj_msgSend(_6e,"currentValueForThemeAttribute:","image"));
objj_msgSend(_71,"setImageOffset:",objj_msgSend(_6e,"currentValueForThemeAttribute:","image-offset"));
objj_msgSend(_71,"setFont:",objj_msgSend(_6e,"currentValueForThemeAttribute:","font"));
objj_msgSend(_71,"setTextColor:",objj_msgSend(_6e,"currentValueForThemeAttribute:","text-color"));
objj_msgSend(_71,"setAlignment:",objj_msgSend(_6e,"currentValueForThemeAttribute:","alignment"));
objj_msgSend(_71,"setVerticalAlignment:",objj_msgSend(_6e,"currentValueForThemeAttribute:","vertical-alignment"));
objj_msgSend(_71,"setLineBreakMode:",objj_msgSend(_6e,"currentValueForThemeAttribute:","line-break-mode"));
objj_msgSend(_71,"setTextShadowColor:",objj_msgSend(_6e,"currentValueForThemeAttribute:","text-shadow-color"));
objj_msgSend(_71,"setTextShadowOffset:",objj_msgSend(_6e,"currentValueForThemeAttribute:","text-shadow-offset"));
objj_msgSend(_71,"setImagePosition:",objj_msgSend(_6e,"currentValueForThemeAttribute:","image-position"));
objj_msgSend(_71,"setImageScaling:",objj_msgSend(_6e,"currentValueForThemeAttribute:","image-scaling"));
objj_msgSend(_71,"setDimsImage:",objj_msgSend(_6e,"hasThemeState:",CPThemeStateDisabled)&&_imageDimsWhenDisabled);
}
}
}),new objj_method(sel_getUid("setBordered:"),function(_72,_73,_74){
with(_72){
if(_74){
objj_msgSend(_72,"setThemeState:",CPThemeStateBordered);
}else{
objj_msgSend(_72,"unsetThemeState:",CPThemeStateBordered);
}
}
}),new objj_method(sel_getUid("isBordered"),function(_75,_76){
with(_75){
return objj_msgSend(_75,"hasThemeState:",CPThemeStateBordered);
}
}),new objj_method(sel_getUid("setKeyEquivalent:"),function(_77,_78,_79){
with(_77){
_keyEquivalent=_79||"";
if(_79===CPNewlineCharacter||_79===CPCarriageReturnCharacter){
objj_msgSend(_77,"setThemeState:",CPThemeStateDefault);
}else{
objj_msgSend(_77,"unsetThemeState:",CPThemeStateDefault);
}
}
}),new objj_method(sel_getUid("viewWillMoveToWindow:"),function(_7a,_7b,_7c){
with(_7a){
var _7d=objj_msgSend(_7a,"window");
if(_7d===_7c||_7c===nil){
return;
}
if(objj_msgSend(_7d,"defaultButton")===_7a){
objj_msgSend(_7d,"setDefaultButton:",nil);
}
if(objj_msgSend(_7a,"keyEquivalent")===CPNewlineCharacter||objj_msgSend(_7a,"keyEquivalent")===CPCarriageReturnCharacter){
objj_msgSend(_7c,"setDefaultButton:",_7a);
}
}
}),new objj_method(sel_getUid("keyEquivalent"),function(_7e,_7f){
with(_7e){
return _keyEquivalent;
}
}),new objj_method(sel_getUid("setKeyEquivalentModifierMask:"),function(_80,_81,_82){
with(_80){
_keyEquivalentModifierMask=_82;
}
}),new objj_method(sel_getUid("keyEquivalentModifierMask"),function(_83,_84){
with(_83){
return _keyEquivalentModifierMask;
}
}),new objj_method(sel_getUid("performKeyEquivalent:"),function(_85,_86,_87){
with(_85){
if(objj_msgSend(objj_msgSend(_85,"window"),"defaultButton")===_85){
return NO;
}
if(!objj_msgSend(_87,"_triggersKeyEquivalent:withModifierMask:",objj_msgSend(_85,"keyEquivalent"),objj_msgSend(_85,"keyEquivalentModifierMask"))){
return NO;
}
objj_msgSend(_85,"performClick:",nil);
return YES;
}
})]);
class_addMethods(_3,[new objj_method(sel_getUid("buttonWithTitle:"),function(_88,_89,_8a){
with(_88){
return objj_msgSend(_88,"buttonWithTitle:theme:",_8a,objj_msgSend(CPTheme,"defaultTheme"));
}
}),new objj_method(sel_getUid("buttonWithTitle:theme:"),function(_8b,_8c,_8d,_8e){
with(_8b){
var _8f=objj_msgSend(objj_msgSend(_8b,"alloc"),"init");
objj_msgSend(_8f,"setTheme:",_8e);
objj_msgSend(_8f,"setTitle:",_8d);
objj_msgSend(_8f,"sizeToFit");
return _8f;
}
}),new objj_method(sel_getUid("defaultThemeClass"),function(_90,_91){
with(_90){
return "button";
}
}),new objj_method(sel_getUid("themeAttributes"),function(_92,_93){
with(_92){
return objj_msgSend(CPDictionary,"dictionaryWithObjects:forKeys:",[objj_msgSend(CPNull,"null"),0,{top:(0),right:(0),bottom:(0),left:(0)},{top:(0),right:(0),bottom:(0),left:(0)},objj_msgSend(CPNull,"null")],["image","image-offset","bezel-inset","content-inset","bezel-color"]);
}
})]);
var _2=objj_getClass("CPButton");
if(!_2){
throw new SyntaxError("*** Could not find definition for class \"CPButton\"");
}
var _3=_2.isa;
class_addMethods(_2,[new objj_method(sel_getUid("setBezelStyle:"),function(_94,_95,_96){
with(_94){
if(_96===_bezelStyle){
return;
}
var _97=objj_msgSend(_1,"objectForKey:",_bezelStyle),_98=objj_msgSend(_1,"objectForKey:",_96);
if(_97){
objj_msgSend(_94,"unsetThemeState:",_97);
}
if(_98){
objj_msgSend(_94,"setThemeState:",_98);
}
_bezelStyle=_96;
}
}),new objj_method(sel_getUid("bezelStyle"),function(_99,_9a){
with(_99){
return _bezelStyle;
}
})]);
var _9b="CPButtonImageKey",_9c="CPButtonAlternateImageKey",_9d="CPButtonTitleKey",_9e="CPButtonAlternateTitleKey",_9f="CPButtonIsBorderedKey",_a0="CPButtonAllowsMixedStateKey",_a1="CPButtonImageDimsWhenDisabledKey",_a2="CPButtonImagePositionKey",_a3="CPButtonKeyEquivalentKey",_a4="CPButtonKeyEquivalentMaskKey",_a5="CPButtonPeriodicDelayKey",_a6="CPButtonPeriodicIntervalKey";
var _2=objj_getClass("CPButton");
if(!_2){
throw new SyntaxError("*** Could not find definition for class \"CPButton\"");
}
var _3=_2.isa;
class_addMethods(_2,[new objj_method(sel_getUid("initWithCoder:"),function(_a7,_a8,_a9){
with(_a7){
_a7=objj_msgSendSuper({receiver:_a7,super_class:objj_getClass("CPButton").super_class},"initWithCoder:",_a9);
if(_a7){
objj_msgSend(_a7,"_init");
_title=objj_msgSend(_a9,"decodeObjectForKey:",_9d);
_alternateTitle=objj_msgSend(_a9,"decodeObjectForKey:",_9e);
if(objj_msgSend(_a9,"containsValueForKey:",_a0)){
_allowsMixedState=objj_msgSend(_a9,"decodeBoolForKey:",_a0);
}
objj_msgSend(_a7,"setImageDimsWhenDisabled:",objj_msgSend(_a9,"decodeObjectForKey:",_a1));
if(objj_msgSend(_a9,"containsValueForKey:",_a2)){
objj_msgSend(_a7,"setImagePosition:",objj_msgSend(_a9,"decodeIntForKey:",_a2));
}
if(objj_msgSend(_a9,"containsValueForKey:",_a3)){
objj_msgSend(_a7,"setKeyEquivalent:",CFData.decodeBase64ToUtf16String(objj_msgSend(_a9,"decodeObjectForKey:",_a3)));
}
if(objj_msgSend(_a9,"containsValueForKey:",_a5)){
_periodicDelay=objj_msgSend(_a9,"decodeObjectForKey:",_a5);
}
if(objj_msgSend(_a9,"containsValueForKey:",_a6)){
_periodicInterval=objj_msgSend(_a9,"decodeObjectForKey:",_a6);
}
_keyEquivalentModifierMask=objj_msgSend(_a9,"decodeIntForKey:",_a4);
objj_msgSend(_a7,"setNeedsLayout");
objj_msgSend(_a7,"setNeedsDisplay:",YES);
}
return _a7;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_aa,_ab,_ac){
with(_aa){
objj_msgSendSuper({receiver:_aa,super_class:objj_getClass("CPButton").super_class},"encodeWithCoder:",_ac);
objj_msgSend(_aa,"invalidateTimers");
objj_msgSend(_ac,"encodeObject:forKey:",_title,_9d);
objj_msgSend(_ac,"encodeObject:forKey:",_alternateTitle,_9e);
objj_msgSend(_ac,"encodeBool:forKey:",_allowsMixedState,_a0);
objj_msgSend(_ac,"encodeBool:forKey:",objj_msgSend(_aa,"imageDimsWhenDisabled"),_a1);
objj_msgSend(_ac,"encodeInt:forKey:",objj_msgSend(_aa,"imagePosition"),_a2);
if(_keyEquivalent){
objj_msgSend(_ac,"encodeObject:forKey:",CFData.encodeBase64Utf16String(_keyEquivalent),_a3);
}
objj_msgSend(_ac,"encodeInt:forKey:",_keyEquivalentModifierMask,_a4);
objj_msgSend(_ac,"encodeObject:forKey:",_periodicDelay,_a5);
objj_msgSend(_ac,"encodeObject:forKey:",_periodicInterval,_a6);
}
})]);
objj_executeFile("CPCheckBox.j",YES);
objj_executeFile("CPRadio.j",YES);
p;13;CPButtonBar.jt;9760;@STATIC;1.0;i;8;CPView.jt;9729;
objj_executeFile("CPView.j",YES);
var _1=objj_allocateClassPair(CPView,"CPButtonBar"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_hasResizeControl"),new objj_ivar("_resizeControlIsLeftAligned"),new objj_ivar("_buttons")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("initWithFrame:"),function(_3,_4,_5){
with(_3){
_3=objj_msgSendSuper({receiver:_3,super_class:objj_getClass("CPButtonBar").super_class},"initWithFrame:",_5);
if(_3){
_buttons=[];
objj_msgSend(_3,"setNeedsLayout");
}
return _3;
}
}),new objj_method(sel_getUid("awakeFromCib"),function(_6,_7){
with(_6){
var _8=objj_msgSend(_6,"superview"),_9=_6;
while(_8){
if(objj_msgSend(_8,"isKindOfClass:",objj_msgSend(CPSplitView,"class"))){
var _a=objj_msgSend(objj_msgSend(_8,"subviews"),"indexOfObject:",_9);
objj_msgSend(_8,"setButtonBar:forDividerAtIndex:",_6,_a);
break;
}
_9=_8;
_8=objj_msgSend(_8,"superview");
}
}
}),new objj_method(sel_getUid("setButtons:"),function(_b,_c,_d){
with(_b){
_buttons=objj_msgSend(CPArray,"arrayWithArray:",_d);
for(var i=0,_e=objj_msgSend(_buttons,"count");i<_e;i++){
objj_msgSend(_buttons[i],"setBordered:",YES);
}
objj_msgSend(_b,"setNeedsLayout");
}
}),new objj_method(sel_getUid("buttons"),function(_f,_10){
with(_f){
return objj_msgSend(CPArray,"arrayWithArray:",_buttons);
}
}),new objj_method(sel_getUid("setHasResizeControl:"),function(_11,_12,_13){
with(_11){
if(_hasResizeControl===_13){
return;
}
_hasResizeControl=!!_13;
objj_msgSend(_11,"setNeedsLayout");
}
}),new objj_method(sel_getUid("hasResizeControl"),function(_14,_15){
with(_14){
return _hasResizeControl;
}
}),new objj_method(sel_getUid("setResizeControlIsLeftAligned:"),function(_16,_17,_18){
with(_16){
if(_resizeControlIsLeftAligned===_18){
return;
}
_resizeControlIsLeftAligned=!!_18;
objj_msgSend(_16,"setNeedsLayout");
}
}),new objj_method(sel_getUid("resizeControlIsLeftAligned"),function(_19,_1a){
with(_19){
return _resizeControlIsLeftAligned;
}
}),new objj_method(sel_getUid("resizeControlFrame"),function(_1b,_1c){
with(_1b){
var _1d=objj_msgSend(_1b,"currentValueForThemeAttribute:","resize-control-inset"),_1e=objj_msgSend(_1b,"currentValueForThemeAttribute:","resize-control-size"),_1f=objj_msgSend(_1b,"bounds"),_20=_resizeControlIsLeftAligned?0:_1f.size.width-_1e.width-_1d.right-_1d.left;
return CGRectMake(_20,0,_1e.width+_1d.left+_1d.right,_1e.height+_1d.top+_1d.bottom);
}
}),new objj_method(sel_getUid("rectForEphemeralSubviewNamed:"),function(_21,_22,_23){
with(_21){
if(_23==="resize-control-view"){
var _24=objj_msgSend(_21,"currentValueForThemeAttribute:","resize-control-inset"),_25=objj_msgSend(_21,"currentValueForThemeAttribute:","resize-control-size"),_26=objj_msgSend(_21,"bounds");
if(_resizeControlIsLeftAligned){
return CGRectMake(_24.left,_24.top,_25.width,_25.height);
}else{
return CGRectMake(_26.size.width-_25.width-_24.right,_24.top,_25.width,_25.height);
}
}
return objj_msgSendSuper({receiver:_21,super_class:objj_getClass("CPButtonBar").super_class},"rectForEphemeralSubviewNamed:",_23);
}
}),new objj_method(sel_getUid("createEphemeralSubviewNamed:"),function(_27,_28,_29){
with(_27){
if(_29==="resize-control-view"){
return objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",CGRectMakeZero());
}
return objj_msgSendSuper({receiver:_27,super_class:objj_getClass("CPButtonBar").super_class},"createEphemeralSubviewNamed:",_29);
}
}),new objj_method(sel_getUid("layoutSubviews"),function(_2a,_2b){
with(_2a){
objj_msgSend(_2a,"setBackgroundColor:",objj_msgSend(_2a,"currentValueForThemeAttribute:","bezel-color"));
var _2c=objj_msgSend(_2a,"valueForThemeAttribute:inState:","button-bezel-color",CPThemeStateNormal),_2d=objj_msgSend(_2a,"valueForThemeAttribute:inState:","button-bezel-color",CPThemeStateHighlighted),_2e=objj_msgSend(_2a,"valueForThemeAttribute:inState:","button-bezel-color",CPThemeStateDisabled),_2f=objj_msgSend(_2a,"valueForThemeAttribute:inState:","button-text-color",CPThemeStateNormal);
var _30=objj_msgSend(CPArray,"arrayWithArray:",_buttons),_31=objj_msgSend(_30,"count");
while(_31--){
if(objj_msgSend(_30[_31],"isHidden")){
objj_msgSend(_30,"removeObject:",_30[_31]);
}
}
var _32=_resizeControlIsLeftAligned?CGRectGetMaxX(objj_msgSend(_2a,"bounds"))+1:-1,_33=objj_msgSend(_2a,"bounds"),_34=CGRectGetHeight(_33)-1,_35=CGRectGetWidth(_33),_36=_hasResizeControl?objj_msgSend(_2a,"rectForEphemeralSubviewNamed:","resize-control-view"):CGRectMakeZero(),_37=CGRectGetWidth(_36),_38=_35-_37-1;
for(var i=0,_31=objj_msgSend(_30,"count");i<_31;i++){
var _39=_30[i],_3a=CGRectGetWidth(objj_msgSend(_39,"frame"));
if(_38>_3a){
_38-=_3a;
}else{
break;
}
if(_resizeControlIsLeftAligned){
objj_msgSend(_39,"setFrame:",CGRectMake(_32-_3a,1,_3a,_34));
_32-=_3a-1;
}else{
objj_msgSend(_39,"setFrame:",CGRectMake(_32,1,_3a,_34));
_32+=_3a-1;
}
objj_msgSend(_39,"setValue:forThemeAttribute:inState:",_2c,"bezel-color",CPThemeStateNormal|CPThemeStateBordered);
objj_msgSend(_39,"setValue:forThemeAttribute:inState:",_2d,"bezel-color",CPThemeStateHighlighted|CPThemeStateBordered);
objj_msgSend(_39,"setValue:forThemeAttribute:inState:",_2e,"bezel-color",CPThemeStateDisabled|CPThemeStateBordered);
objj_msgSend(_39,"setValue:forThemeAttribute:inState:",_2f,"text-color",CPThemeStateBordered);
objj_msgSend(_39,"setValue:forThemeAttribute:inState:",_2c,"bezel-color",CPThemeStateNormal|CPThemeStateBordered|CPPopUpButtonStatePullsDown);
objj_msgSend(_39,"setValue:forThemeAttribute:inState:",_2d,"bezel-color",CPThemeStateHighlighted|CPThemeStateBordered|CPPopUpButtonStatePullsDown);
objj_msgSend(_39,"setValue:forThemeAttribute:inState:",_2e,"bezel-color",CPThemeStateDisabled|CPThemeStateBordered|CPPopUpButtonStatePullsDown);
objj_msgSend(_2a,"addSubview:",_39);
}
if(_hasResizeControl){
var _3b=objj_msgSend(_2a,"layoutEphemeralSubviewNamed:positioned:relativeToEphemeralSubviewNamed:","resize-control-view",CPWindowAbove,nil);
objj_msgSend(_3b,"setAutoresizingMask:",_resizeControlIsLeftAligned?CPViewMaxXMargin:CPViewMinXMargin);
objj_msgSend(_3b,"setBackgroundColor:",objj_msgSend(_2a,"currentValueForThemeAttribute:","resize-control-color"));
}
}
}),new objj_method(sel_getUid("setFrameSize:"),function(_3c,_3d,_3e){
with(_3c){
objj_msgSendSuper({receiver:_3c,super_class:objj_getClass("CPButtonBar").super_class},"setFrameSize:",_3e);
objj_msgSend(_3c,"setNeedsLayout");
}
})]);
class_addMethods(_2,[new objj_method(sel_getUid("plusButton"),function(_3f,_40){
with(_3f){
var _41=objj_msgSend(objj_msgSend(CPButton,"alloc"),"initWithFrame:",CGRectMake(0,0,35,25)),_42=objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(objj_msgSend(CPBundle,"bundleForClass:",objj_msgSend(CPButtonBar,"class")),"pathForResource:","plus_button.png"),CGSizeMake(11,12));
objj_msgSend(_41,"setBordered:",NO);
objj_msgSend(_41,"setImage:",_42);
objj_msgSend(_41,"setImagePosition:",CPImageOnly);
return _41;
}
}),new objj_method(sel_getUid("minusButton"),function(_43,_44){
with(_43){
var _45=objj_msgSend(objj_msgSend(CPButton,"alloc"),"initWithFrame:",CGRectMake(0,0,35,25)),_46=objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(objj_msgSend(CPBundle,"bundleForClass:",objj_msgSend(CPButtonBar,"class")),"pathForResource:","minus_button.png"),CGSizeMake(11,4));
objj_msgSend(_45,"setBordered:",NO);
objj_msgSend(_45,"setImage:",_46);
objj_msgSend(_45,"setImagePosition:",CPImageOnly);
return _45;
}
}),new objj_method(sel_getUid("actionPopupButton"),function(_47,_48){
with(_47){
var _49=objj_msgSend(objj_msgSend(CPPopUpButton,"alloc"),"initWithFrame:",CGRectMake(0,0,35,25)),_4a=objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(objj_msgSend(CPBundle,"bundleForClass:",objj_msgSend(CPButtonBar,"class")),"pathForResource:","action_button.png"),CGSizeMake(22,14));
objj_msgSend(_49,"addItemWithTitle:",nil);
objj_msgSend(objj_msgSend(_49,"lastItem"),"setImage:",_4a);
objj_msgSend(_49,"setImagePosition:",CPImageOnly);
objj_msgSend(_49,"setValue:forThemeAttribute:",CGInsetMake(0,0,0,0),"content-inset");
objj_msgSend(_49,"setPullsDown:",YES);
return _49;
}
}),new objj_method(sel_getUid("defaultThemeClass"),function(_4b,_4c){
with(_4b){
return "button-bar";
}
}),new objj_method(sel_getUid("themeAttributes"),function(_4d,_4e){
with(_4d){
return objj_msgSend(CPDictionary,"dictionaryWithObjects:forKeys:",[CGInsetMake(0,0,0,0),CGSizeMakeZero(),objj_msgSend(CPNull,"null"),objj_msgSend(CPNull,"null"),objj_msgSend(CPNull,"null"),objj_msgSend(CPNull,"null")],["resize-control-inset","resize-control-size","resize-control-color","bezel-color","button-bezel-color","button-text-color"]);
}
})]);
var _4f="CPButtonBarHasResizeControlKey",_50="CPButtonBarResizeControlIsLeftAlignedKey",_51="CPButtonBarButtonsKey";
var _1=objj_getClass("CPButtonBar");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"CPButtonBar\"");
}
var _2=_1.isa;
class_addMethods(_1,[new objj_method(sel_getUid("encodeWithCoder:"),function(_52,_53,_54){
with(_52){
objj_msgSendSuper({receiver:_52,super_class:objj_getClass("CPButtonBar").super_class},"encodeWithCoder:",_54);
objj_msgSend(_54,"encodeBool:forKey:",_hasResizeControl,_4f);
objj_msgSend(_54,"encodeBool:forKey:",_resizeControlIsLeftAligned,_50);
objj_msgSend(_54,"encodeObject:forKey:",_buttons,_51);
}
}),new objj_method(sel_getUid("initWithCoder:"),function(_55,_56,_57){
with(_55){
if(_55=objj_msgSendSuper({receiver:_55,super_class:objj_getClass("CPButtonBar").super_class},"initWithCoder:",_57)){
_buttons=objj_msgSend(_57,"decodeObjectForKey:",_51)||[];
_hasResizeControl=objj_msgSend(_57,"decodeBoolForKey:",_4f);
_resizeControlIsLeftAligned=objj_msgSend(_57,"decodeBoolForKey:",_50);
}
return _55;
}
})]);
p;12;CPCheckBox.jt;3024;@STATIC;1.0;i;10;CPButton.jt;2990;
objj_executeFile("CPButton.j",YES);
CPCheckBoxImageOffset=4;
var _1=objj_allocateClassPair(CPButton,"CPCheckBox"),_2=_1.isa;
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("initWithFrame:"),function(_3,_4,_5){
with(_3){
_3=objj_msgSendSuper({receiver:_3,super_class:objj_getClass("CPCheckBox").super_class},"initWithFrame:",_5);
if(_3){
objj_msgSend(_3,"setHighlightsBy:",CPContentsCellMask);
objj_msgSend(_3,"setShowsStateBy:",CPContentsCellMask);
objj_msgSend(_3,"setImagePosition:",CPImageLeft);
objj_msgSend(_3,"setAlignment:",CPLeftTextAlignment);
objj_msgSend(_3,"setBordered:",NO);
}
return _3;
}
}),new objj_method(sel_getUid("takeStateFromKeyPath:ofObjects:"),function(_6,_7,_8,_9){
with(_6){
var _a=_9.length,_b=objj_msgSend(_9[0],"valueForKeyPath:",_8)?CPOnState:CPOffState;
objj_msgSend(_6,"setAllowsMixedState:",NO);
objj_msgSend(_6,"setState:",_b);
while(_a-->1){
if(_b!==(objj_msgSend(_9[_a],"valueForKeyPath:",_8)?CPOnState:CPOffState)){
objj_msgSend(_6,"setAllowsMixedState:",YES);
objj_msgSend(_6,"setState:",CPMixedState);
}
}
}
}),new objj_method(sel_getUid("takeValueFromKeyPath:ofObjects:"),function(_c,_d,_e,_f){
with(_c){
objj_msgSend(_c,"takeStateFromKeyPath:ofObjects:",_e,_f);
}
})]);
class_addMethods(_2,[new objj_method(sel_getUid("checkBoxWithTitle:theme:"),function(_10,_11,_12,_13){
with(_10){
return objj_msgSend(_10,"buttonWithTitle:theme:",_12,_13);
}
}),new objj_method(sel_getUid("checkBoxWithTitle:"),function(_14,_15,_16){
with(_14){
return objj_msgSend(_14,"buttonWithTitle:",_16);
}
}),new objj_method(sel_getUid("defaultThemeClass"),function(_17,_18){
with(_17){
return "check-box";
}
}),new objj_method(sel_getUid("_binderClassForBinding:"),function(_19,_1a,_1b){
with(_19){
if(_1b===CPValueBinding){
return objj_msgSend(_CPCheckBoxValueBinder,"class");
}
return objj_msgSendSuper({receiver:_19,super_class:objj_getMetaClass("CPCheckBox").super_class},"_binderClassForBinding:",_1b);
}
})]);
var _1=objj_allocateClassPair(CPBinder,"_CPCheckBoxValueBinder"),_2=_1.isa;
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("setValueFor:"),function(_1c,_1d,_1e){
with(_1c){
var _1f=objj_msgSend(_info,"objectForKey:",CPObservedObjectKey),_20=objj_msgSend(_info,"objectForKey:",CPObservedKeyPathKey),_21=objj_msgSend(_info,"objectForKey:",CPOptionsKey),_22=objj_msgSend(_1f,"valueForKeyPath:",_20),_23=CPIsControllerMarker(_22);
if(_23){
switch(_22){
case CPMultipleValuesMarker:
_22=CPMixedState;
break;
case CPNoSelectionMarker:
_22=CPOffState;
break;
case CPNotApplicableMarker:
if(objj_msgSend(_21,"objectForKey:",CPRaisesForNotApplicableKeysBindingOption)){
objj_msgSend(CPException,"raise:reason:",CPGenericException,"can't transform non applicable key on: "+_source+" value: "+_22);
}
_22=CPOffState;
break;
}
if(_22===CPMixedState){
objj_msgSend(_source,"setAllowsMixedState:",YES);
}else{
objj_msgSend(_source,"setAllowsMixedState:",NO);
}
}
objj_msgSend(_source,"setState:",_22);
}
})]);
p;12;CPClipView.jt;4951;@STATIC;1.0;i;8;CPView.jt;4920;
objj_executeFile("CPView.j",YES);
var _1=objj_allocateClassPair(CPView,"CPClipView"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_documentView")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("setDocumentView:"),function(_3,_4,_5){
with(_3){
if(_documentView==_5){
return;
}
var _6=objj_msgSend(CPNotificationCenter,"defaultCenter");
if(_documentView){
objj_msgSend(_6,"removeObserver:name:object:",_3,CPViewFrameDidChangeNotification,_documentView);
objj_msgSend(_6,"removeObserver:name:object:",_3,CPViewBoundsDidChangeNotification,_documentView);
objj_msgSend(_documentView,"removeFromSuperview");
}
_documentView=_5;
if(_documentView){
objj_msgSend(_3,"addSubview:",_documentView);
objj_msgSend(_documentView,"setPostsFrameChangedNotifications:",YES);
objj_msgSend(_documentView,"setPostsBoundsChangedNotifications:",YES);
objj_msgSend(_6,"addObserver:selector:name:object:",_3,sel_getUid("viewFrameChanged:"),CPViewFrameDidChangeNotification,_documentView);
objj_msgSend(_6,"addObserver:selector:name:object:",_3,sel_getUid("viewBoundsChanged:"),CPViewBoundsDidChangeNotification,_documentView);
}
}
}),new objj_method(sel_getUid("documentView"),function(_7,_8){
with(_7){
return _documentView;
}
}),new objj_method(sel_getUid("constrainScrollPoint:"),function(_9,_a,_b){
with(_9){
if(!_documentView){
return {x:0,y:0};
}
var _c=objj_msgSend(_documentView,"frame");
_b.x=MAX(0,MIN(_b.x,MAX((_c.size.width)-(_bounds.size.width),0)));
_b.y=MAX(0,MIN(_b.y,MAX((_c.size.height)-(_bounds.size.height),0)));
return _b;
}
}),new objj_method(sel_getUid("setBoundsOrigin:"),function(_d,_e,_f){
with(_d){
if((_bounds.origin.x==_f.x&&_bounds.origin.y==_f.y)){
return;
}
objj_msgSendSuper({receiver:_d,super_class:objj_getClass("CPClipView").super_class},"setBoundsOrigin:",_f);
var _10=objj_msgSend(_d,"superview"),_11=objj_getClass("CPScrollView");
if(objj_msgSend(_10,"isKindOfClass:",_11)){
objj_msgSend(_10,"reflectScrolledClipView:",_d);
}
}
}),new objj_method(sel_getUid("scrollToPoint:"),function(_12,_13,_14){
with(_12){
objj_msgSend(_12,"setBoundsOrigin:",objj_msgSend(_12,"constrainScrollPoint:",_14));
}
}),new objj_method(sel_getUid("viewBoundsChanged:"),function(_15,_16,_17){
with(_15){
objj_msgSend(_15,"_constrainScrollPoint");
}
}),new objj_method(sel_getUid("viewFrameChanged:"),function(_18,_19,_1a){
with(_18){
objj_msgSend(_18,"_constrainScrollPoint");
}
}),new objj_method(sel_getUid("resizeSubviewsWithOldSize:"),function(_1b,_1c,_1d){
with(_1b){
objj_msgSendSuper({receiver:_1b,super_class:objj_getClass("CPClipView").super_class},"resizeSubviewsWithOldSize:",_1d);
objj_msgSend(_1b,"_constrainScrollPoint");
}
}),new objj_method(sel_getUid("_constrainScrollPoint"),function(_1e,_1f){
with(_1e){
var _20=objj_msgSend(_1e,"bounds").origin;
objj_msgSend(_1e,"scrollToPoint:",_20);
if(!CGPointEqualToPoint(_20,objj_msgSend(_1e,"bounds").origin)){
return;
}
var _21=objj_msgSend(_1e,"superview"),_22=objj_getClass("CPScrollView");
if(objj_msgSend(_21,"isKindOfClass:",_22)){
objj_msgSend(_21,"reflectScrolledClipView:",_1e);
}
}
}),new objj_method(sel_getUid("autoscroll:"),function(_23,_24,_25){
with(_23){
var _26=objj_msgSend(_23,"bounds"),_27=objj_msgSend(_23,"convertPoint:fromView:",objj_msgSend(_25,"locationInWindow"),nil),_28=objj_msgSend(_23,"superview"),_29=0,_2a=0;
if(CGRectContainsPoint(_26,_27)){
return NO;
}
if(!objj_msgSend(_28,"isKindOfClass:",objj_msgSend(CPScrollView,"class"))||objj_msgSend(_28,"hasVerticalScroller")){
if(_27.y<CGRectGetMinY(_26)){
_2a=CGRectGetMinY(_26)-_27.y;
}else{
if(_27.y>CGRectGetMaxY(_26)){
_2a=CGRectGetMaxY(_26)-_27.y;
}
}
if(_2a<-_26.size.height){
_2a=-_26.size.height;
}
if(_2a>_26.size.height){
_2a=_26.size.height;
}
}
if(!objj_msgSend(_28,"isKindOfClass:",objj_msgSend(CPScrollView,"class"))||objj_msgSend(_28,"hasHorizontalScroller")){
if(_27.x<CGRectGetMinX(_26)){
_29=CGRectGetMinX(_26)-_27.x;
}else{
if(_27.x>CGRectGetMaxX(_26)){
_29=CGRectGetMaxX(_26)-_27.x;
}
}
if(_29<-_26.size.width){
_29=-_26.size.width;
}
if(_29>_26.size.width){
_29=_26.size.width;
}
}
return objj_msgSend(_23,"scrollToPoint:",CGPointMake(_26.origin.x-_29,_26.origin.y-_2a));
}
})]);
var _2b="CPScrollViewDocumentView";
var _1=objj_getClass("CPClipView");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"CPClipView\"");
}
var _2=_1.isa;
class_addMethods(_1,[new objj_method(sel_getUid("initWithCoder:"),function(_2c,_2d,_2e){
with(_2c){
if(_2c=objj_msgSendSuper({receiver:_2c,super_class:objj_getClass("CPClipView").super_class},"initWithCoder:",_2e)){
objj_msgSend(_2c,"setDocumentView:",objj_msgSend(_2e,"decodeObjectForKey:",_2b));
}
return _2c;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_2f,_30,_31){
with(_2f){
objj_msgSendSuper({receiver:_2f,super_class:objj_getClass("CPClipView").super_class},"encodeWithCoder:",_31);
objj_msgSend(_31,"encodeObject:forKey:",_documentView,_2b);
}
})]);
p;18;CPCollectionView.jt;22445;@STATIC;1.0;I;20;Foundation/CPArray.jI;19;Foundation/CPData.jI;23;Foundation/CPIndexSet.jI;28;Foundation/CPKeyedArchiver.jI;30;Foundation/CPKeyedUnarchiver.ji;8;CPView.ji;22;CPCollectionViewItem.jt;22241;
objj_executeFile("Foundation/CPArray.j",NO);
objj_executeFile("Foundation/CPData.j",NO);
objj_executeFile("Foundation/CPIndexSet.j",NO);
objj_executeFile("Foundation/CPKeyedArchiver.j",NO);
objj_executeFile("Foundation/CPKeyedUnarchiver.j",NO);
objj_executeFile("CPView.j",YES);
objj_executeFile("CPCollectionViewItem.j",YES);
var _1=objj_allocateClassPair(CPView,"CPCollectionView"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_content"),new objj_ivar("_items"),new objj_ivar("_itemData"),new objj_ivar("_itemPrototype"),new objj_ivar("_itemForDragging"),new objj_ivar("_cachedItems"),new objj_ivar("_maxNumberOfRows"),new objj_ivar("_maxNumberOfColumns"),new objj_ivar("_minItemSize"),new objj_ivar("_maxItemSize"),new objj_ivar("_backgroundColors"),new objj_ivar("_tileWidth"),new objj_ivar("_isSelectable"),new objj_ivar("_allowsMultipleSelection"),new objj_ivar("_allowsEmptySelection"),new objj_ivar("_selectionIndexes"),new objj_ivar("_itemSize"),new objj_ivar("_horizontalMargin"),new objj_ivar("_verticalMargin"),new objj_ivar("_numberOfRows"),new objj_ivar("_numberOfColumns"),new objj_ivar("_delegate"),new objj_ivar("_mouseDownEvent")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("initWithFrame:"),function(_3,_4,_5){
with(_3){
_3=objj_msgSendSuper({receiver:_3,super_class:objj_getClass("CPCollectionView").super_class},"initWithFrame:",_5);
if(_3){
_items=[];
_content=[];
_cachedItems=[];
_itemSize=CGSizeMakeZero();
_minItemSize=CGSizeMakeZero();
_maxItemSize=CGSizeMakeZero();
objj_msgSend(_3,"setBackgroundColors:",nil);
_verticalMargin=5;
_tileWidth=-1;
_selectionIndexes=objj_msgSend(CPIndexSet,"indexSet");
_allowsEmptySelection=YES;
_isSelectable=YES;
}
return _3;
}
}),new objj_method(sel_getUid("setItemPrototype:"),function(_6,_7,_8){
with(_6){
_cachedItems=[];
_itemData=nil;
_itemForDragging=nil;
_itemPrototype=_8;
objj_msgSend(_6,"reloadContent");
}
}),new objj_method(sel_getUid("itemPrototype"),function(_9,_a){
with(_9){
return _itemPrototype;
}
}),new objj_method(sel_getUid("newItemForRepresentedObject:"),function(_b,_c,_d){
with(_b){
var _e=nil;
if(_cachedItems.length){
_e=_cachedItems.pop();
}else{
if(!_itemData){
if(_itemPrototype){
_itemData=objj_msgSend(CPKeyedArchiver,"archivedDataWithRootObject:",_itemPrototype);
}
}
_e=objj_msgSend(CPKeyedUnarchiver,"unarchiveObjectWithData:",_itemData);
}
objj_msgSend(_e,"setRepresentedObject:",_d);
objj_msgSend(objj_msgSend(_e,"view"),"setFrameSize:",_itemSize);
return _e;
}
}),new objj_method(sel_getUid("acceptsFirstResponder"),function(_f,_10){
with(_f){
return YES;
}
}),new objj_method(sel_getUid("isFirstResponder"),function(_11,_12){
with(_11){
return objj_msgSend(objj_msgSend(_11,"window"),"firstResponder")===_11;
}
}),new objj_method(sel_getUid("setContent:"),function(_13,_14,_15){
with(_13){
objj_msgSend(_13,"setSelectionIndexes:",objj_msgSend(CPIndexSet,"indexSet"));
_content=_15;
objj_msgSend(_13,"reloadContent");
}
}),new objj_method(sel_getUid("content"),function(_16,_17){
with(_16){
return _content;
}
}),new objj_method(sel_getUid("items"),function(_18,_19){
with(_18){
return _items;
}
}),new objj_method(sel_getUid("setSelectable:"),function(_1a,_1b,_1c){
with(_1a){
if(_isSelectable==_1c){
return;
}
_isSelectable=_1c;
if(!_isSelectable){
var _1d=CPNotFound;
while((_1d=objj_msgSend(_selectionIndexes,"indexGreaterThanIndex:",_1d))!=CPNotFound){
objj_msgSend(_items[_1d],"setSelected:",NO);
}
}
}
}),new objj_method(sel_getUid("isSelectable"),function(_1e,_1f){
with(_1e){
return _isSelectable;
}
}),new objj_method(sel_getUid("setAllowsEmptySelection:"),function(_20,_21,_22){
with(_20){
_allowsEmptySelection=_22;
}
}),new objj_method(sel_getUid("allowsEmptySelection"),function(_23,_24){
with(_23){
return _allowsEmptySelection;
}
}),new objj_method(sel_getUid("setAllowsMultipleSelection:"),function(_25,_26,_27){
with(_25){
_allowsMultipleSelection=_27;
}
}),new objj_method(sel_getUid("allowsMultipleSelection"),function(_28,_29){
with(_28){
return _allowsMultipleSelection;
}
}),new objj_method(sel_getUid("setSelectionIndexes:"),function(_2a,_2b,_2c){
with(_2a){
if(objj_msgSend(_selectionIndexes,"isEqual:",_2c)||!_isSelectable){
return;
}
var _2d=CPNotFound;
while((_2d=objj_msgSend(_selectionIndexes,"indexGreaterThanIndex:",_2d))!=CPNotFound){
objj_msgSend(_items[_2d],"setSelected:",NO);
}
_selectionIndexes=_2c;
var _2d=CPNotFound;
while((_2d=objj_msgSend(_selectionIndexes,"indexGreaterThanIndex:",_2d))!=CPNotFound){
objj_msgSend(_items[_2d],"setSelected:",YES);
}
var _2e=objj_msgSend(objj_msgSend(_2a,"class"),"_binderClassForBinding:","selectionIndexes");
objj_msgSend(objj_msgSend(_2e,"getBinding:forObject:","selectionIndexes",_2a),"reverseSetValueFor:","selectionIndexes");
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("collectionViewDidChangeSelection:"))){
objj_msgSend(_delegate,"collectionViewDidChangeSelection:",_2a);
}
}
}),new objj_method(sel_getUid("selectionIndexes"),function(_2f,_30){
with(_2f){
return objj_msgSend(_selectionIndexes,"copy");
}
}),new objj_method(sel_getUid("reloadContent"),function(_31,_32){
with(_31){
var _33=_items.length;
while(_33--){
objj_msgSend(objj_msgSend(_items[_33],"view"),"removeFromSuperview");
objj_msgSend(_items[_33],"setSelected:",NO);
_cachedItems.push(_items[_33]);
}
_items=[];
if(!_itemPrototype||!_content){
return;
}
var _34=0;
_33=_content.length;
for(;_34<_33;++_34){
_items.push(objj_msgSend(_31,"newItemForRepresentedObject:",_content[_34]));
objj_msgSend(_31,"addSubview:",objj_msgSend(_items[_34],"view"));
}
_34=CPNotFound;
while((_34=objj_msgSend(_selectionIndexes,"indexGreaterThanIndex:",_34))!=CPNotFound){
objj_msgSend(_items[_34],"setSelected:",YES);
}
objj_msgSend(_31,"tile");
}
}),new objj_method(sel_getUid("tile"),function(_35,_36){
with(_35){
var _37=CGRectGetWidth(objj_msgSend(_35,"bounds"));
if(!objj_msgSend(_content,"count")||_37==_tileWidth){
return;
}
var _38=CGSizeMakeCopy(_minItemSize);
_numberOfColumns=MAX(1,FLOOR(_37/_38.width));
if(_maxNumberOfColumns>0){
_numberOfColumns=MIN(_maxNumberOfColumns,_numberOfColumns);
}
var _39=_37-_numberOfColumns*_38.width,_3a=NO;
if(_39>0&&_38.width<_maxItemSize.width){
_38.width=MIN(_maxItemSize.width,_38.width+FLOOR(_39/_numberOfColumns));
}
if(_maxNumberOfColumns==1&&_38.width<_maxItemSize.width&&_38.width<_37){
_38.width=MIN(_maxItemSize.width,_37);
}
if(!CGSizeEqualToSize(_itemSize,_38)){
_itemSize=_38;
_3a=YES;
}
var _3b=0,_3c=_items.length;
if(_maxNumberOfColumns>0&&_maxNumberOfRows>0){
_3c=MIN(_3c,_maxNumberOfColumns*_maxNumberOfRows);
}
_numberOfRows=CEIL(_3c/_numberOfColumns);
_horizontalMargin=FLOOR((_37-_numberOfColumns*_38.width)/(_numberOfColumns+1));
var x=_horizontalMargin,y=-_38.height;
for(;_3b<_3c;++_3b){
if(_3b%_numberOfColumns==0){
x=_horizontalMargin;
y+=_verticalMargin+_38.height;
}
var _3d=objj_msgSend(_items[_3b],"view");
objj_msgSend(_3d,"setFrameOrigin:",CGPointMake(x,y));
if(_3a){
objj_msgSend(_3d,"setFrameSize:",_itemSize);
}
x+=_38.width+_horizontalMargin;
}
var _3e=objj_msgSend(_35,"superview"),_3f=y+_38.height+_verticalMargin;
if(objj_msgSend(_3e,"isKindOfClass:",objj_msgSend(CPClipView,"class"))){
var _40=objj_msgSend(_3e,"bounds").size;
_3f=MAX(_40.height,_3f);
}
_tileWidth=_37;
objj_msgSend(_35,"setFrameSize:",CGSizeMake(_37,_3f));
_tileWidth=-1;
}
}),new objj_method(sel_getUid("resizeSubviewsWithOldSize:"),function(_41,_42,_43){
with(_41){
objj_msgSend(_41,"tile");
}
}),new objj_method(sel_getUid("setMaxNumberOfRows:"),function(_44,_45,_46){
with(_44){
if(_maxNumberOfRows==_46){
return;
}
_maxNumberOfRows=_46;
objj_msgSend(_44,"tile");
}
}),new objj_method(sel_getUid("maxNumberOfRows"),function(_47,_48){
with(_47){
return _maxNumberOfRows;
}
}),new objj_method(sel_getUid("setMaxNumberOfColumns:"),function(_49,_4a,_4b){
with(_49){
if(_maxNumberOfColumns==_4b){
return;
}
_maxNumberOfColumns=_4b;
objj_msgSend(_49,"tile");
}
}),new objj_method(sel_getUid("maxNumberOfColumns"),function(_4c,_4d){
with(_4c){
return _maxNumberOfColumns;
}
}),new objj_method(sel_getUid("numberOfRows"),function(_4e,_4f){
with(_4e){
return _numberOfRows;
}
}),new objj_method(sel_getUid("numberOfColumns"),function(_50,_51){
with(_50){
return _numberOfColumns;
}
}),new objj_method(sel_getUid("setMinItemSize:"),function(_52,_53,_54){
with(_52){
if(CGSizeEqualToSize(_minItemSize,_54)){
return;
}
_minItemSize=CGSizeMakeCopy(_54);
objj_msgSend(_52,"tile");
}
}),new objj_method(sel_getUid("minItemSize"),function(_55,_56){
with(_55){
return _minItemSize;
}
}),new objj_method(sel_getUid("setMaxItemSize:"),function(_57,_58,_59){
with(_57){
if(CGSizeEqualToSize(_maxItemSize,_59)){
return;
}
_maxItemSize=CGSizeMakeCopy(_59);
objj_msgSend(_57,"tile");
}
}),new objj_method(sel_getUid("maxItemSize"),function(_5a,_5b){
with(_5a){
return _maxItemSize;
}
}),new objj_method(sel_getUid("setBackgroundColors:"),function(_5c,_5d,_5e){
with(_5c){
if(_backgroundColors===_5e){
return;
}
_backgroundColors=_5e;
if(!_backgroundColors){
_backgroundColors=objj_msgSend(CPColor,"whiteColor");
}
if(objj_msgSend(_backgroundColors,"count")===1){
objj_msgSend(_5c,"setBackgroundColor:",_backgroundColors[0]);
}else{
objj_msgSend(_5c,"setBackgroundColor:",nil);
}
objj_msgSend(_5c,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("backgroundColors"),function(_5f,_60){
with(_5f){
return _backgroundColors;
}
}),new objj_method(sel_getUid("mouseUp:"),function(_61,_62,_63){
with(_61){
if(objj_msgSend(_selectionIndexes,"count")&&objj_msgSend(_63,"clickCount")==2&&objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("collectionView:didDoubleClickOnItemAtIndex:"))){
objj_msgSend(_delegate,"collectionView:didDoubleClickOnItemAtIndex:",_61,objj_msgSend(_selectionIndexes,"firstIndex"));
}
}
}),new objj_method(sel_getUid("mouseDown:"),function(_64,_65,_66){
with(_64){
_mouseDownEvent=_66;
var _67=objj_msgSend(_64,"convertPoint:fromView:",objj_msgSend(_66,"locationInWindow"),nil),_68=objj_msgSend(_64,"_indexAtPoint:",_67);
if(_68>=0&&_68<_items.length){
if(_allowsMultipleSelection&&(objj_msgSend(_66,"modifierFlags")&CPCommandKeyMask||objj_msgSend(_66,"modifierFlags")&CPShiftKeyMask)){
if(objj_msgSend(_66,"modifierFlags")&CPCommandKeyMask){
var _69=objj_msgSend(_selectionIndexes,"copy");
if(objj_msgSend(_69,"containsIndex:",_68)){
objj_msgSend(_69,"removeIndex:",_68);
}else{
objj_msgSend(_69,"addIndex:",_68);
}
}else{
if(objj_msgSend(_66,"modifierFlags")&CPShiftKeyMask){
var _6a=objj_msgSend(objj_msgSend(_64,"selectionIndexes"),"firstIndex"),_6b=nil;
if(_68<_6a){
_6b=CPMakeRange(_68,(_6a-_68)+1);
}else{
_6b=CPMakeRange(_6a,(_68-_6a)+1);
}
_69=objj_msgSend(objj_msgSend(_64,"selectionIndexes"),"copy");
objj_msgSend(_69,"addIndexesInRange:",_6b);
}
}
}else{
_69=objj_msgSend(CPIndexSet,"indexSetWithIndex:",_68);
}
objj_msgSend(_64,"setSelectionIndexes:",_69);
}else{
if(_allowsEmptySelection){
objj_msgSend(_64,"setSelectionIndexes:",objj_msgSend(CPIndexSet,"indexSet"));
}
}
}
}),new objj_method(sel_getUid("mouseDragged:"),function(_6c,_6d,_6e){
with(_6c){
var _6f=objj_msgSend(_6e,"locationInWindow"),_70=objj_msgSend(_mouseDownEvent,"locationInWindow");
if((ABS(_6f.x-_70.x)<3)&&(ABS(_6f.y-_70.y)<3)){
return;
}
if(!objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("collectionView:dragTypesForItemsAtIndexes:"))){
return;
}
if(!objj_msgSend(_selectionIndexes,"count")){
return;
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("collectionView:canDragItemsAtIndexes:withEvent:"))&&!objj_msgSend(_delegate,"collectionView:canDragItemsAtIndexes:withEvent:",_6c,_selectionIndexes,_mouseDownEvent)){
return;
}
var _71=objj_msgSend(_delegate,"collectionView:dragTypesForItemsAtIndexes:",_6c,_selectionIndexes);
objj_msgSend(objj_msgSend(CPPasteboard,"pasteboardWithName:",CPDragPboard),"declareTypes:owner:",_71,_6c);
if(!_itemForDragging){
_itemForDragging=objj_msgSend(_6c,"newItemForRepresentedObject:",_content[objj_msgSend(_selectionIndexes,"firstIndex")]);
}else{
objj_msgSend(_itemForDragging,"setRepresentedObject:",_content[objj_msgSend(_selectionIndexes,"firstIndex")]);
}
var _72=objj_msgSend(_itemForDragging,"view");
objj_msgSend(_72,"setFrameSize:",_itemSize);
objj_msgSend(_72,"setAlphaValue:",0.7);
objj_msgSend(_6c,"dragView:at:offset:event:pasteboard:source:slideBack:",_72,objj_msgSend(objj_msgSend(_items[objj_msgSend(_selectionIndexes,"firstIndex")],"view"),"frame").origin,CGSizeMakeZero(),_mouseDownEvent,nil,_6c,YES);
}
}),new objj_method(sel_getUid("pasteboard:provideDataForType:"),function(_73,_74,_75,_76){
with(_73){
objj_msgSend(_75,"setData:forType:",objj_msgSend(_delegate,"collectionView:dataForItemsAtIndexes:forType:",_73,_selectionIndexes,_76),_76);
}
}),new objj_method(sel_getUid("setVerticalMargin:"),function(_77,_78,_79){
with(_77){
if(_verticalMargin==_79){
return;
}
_verticalMargin=_79;
objj_msgSend(_77,"tile");
}
}),new objj_method(sel_getUid("verticalMargin"),function(_7a,_7b){
with(_7a){
return _verticalMargin;
}
}),new objj_method(sel_getUid("setDelegate:"),function(_7c,_7d,_7e){
with(_7c){
_delegate=_7e;
}
}),new objj_method(sel_getUid("delegate"),function(_7f,_80){
with(_7f){
return _delegate;
}
}),new objj_method(sel_getUid("menuForEvent:"),function(_81,_82,_83){
with(_81){
if(!objj_msgSend(objj_msgSend(_81,"delegate"),"respondsToSelector:",sel_getUid("collectionView:menuForItemAtIndex:"))){
return objj_msgSendSuper({receiver:_81,super_class:objj_getClass("CPCollectionView").super_class},"menuForEvent:",_83);
}
var _84=objj_msgSend(_81,"convertPoint:fromView:",objj_msgSend(_83,"locationInWindow"),nil),_85=objj_msgSend(_81,"_indexAtPoint:",_84);
return objj_msgSend(_delegate,"collectionView:menuForItemAtIndex:",_81,_85);
}
}),new objj_method(sel_getUid("_indexAtPoint:"),function(_86,_87,_88){
with(_86){
var row=FLOOR(_88.y/(_itemSize.height+_verticalMargin)),_89=FLOOR(_88.x/(_itemSize.width+_horizontalMargin));
return row*_numberOfColumns+_89;
}
}),new objj_method(sel_getUid("itemAtIndex:"),function(_8a,_8b,_8c){
with(_8a){
return objj_msgSend(_items,"objectAtIndex:",_8c);
}
}),new objj_method(sel_getUid("frameForItemAtIndex:"),function(_8d,_8e,_8f){
with(_8d){
return objj_msgSend(objj_msgSend(objj_msgSend(_8d,"itemAtIndex:",_8f),"view"),"frame");
}
}),new objj_method(sel_getUid("frameForItemsAtIndexes:"),function(_90,_91,_92){
with(_90){
var _93=[],_94=CGRectNull;
objj_msgSend(_92,"getIndexes:maxCount:inIndexRange:",_93,-1,nil);
var _95=0,_96=objj_msgSend(_93,"count");
for(;_95<_96;++_95){
_94=CGRectUnion(_94,objj_msgSend(_90,"frameForItemAtIndex:",_93[_95]));
}
return _94;
}
})]);
var _1=objj_getClass("CPCollectionView");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"CPCollectionView\"");
}
var _2=_1.isa;
class_addMethods(_1,[new objj_method(sel_getUid("_modifySelectionWithNewIndex:direction:expand:"),function(_97,_98,_99,_9a,_9b){
with(_97){
_99=MIN(MAX(_99,0),objj_msgSend(objj_msgSend(_97,"items"),"count")-1);
if(_allowsMultipleSelection&&_9b){
var _9c=objj_msgSend(_selectionIndexes,"copy"),_9d=objj_msgSend(_9c,"firstIndex"),_9e=objj_msgSend(_9c,"lastIndex");
if(_9a===-1){
objj_msgSend(_9c,"addIndexesInRange:",CPMakeRange(_99,_9d-_99+1));
}else{
objj_msgSend(_9c,"addIndexesInRange:",CPMakeRange(_9e,_99-_9e+1));
}
}else{
_9c=objj_msgSend(CPIndexSet,"indexSetWithIndex:",_99);
}
objj_msgSend(_97,"setSelectionIndexes:",_9c);
objj_msgSend(_97,"_scrollToSelection");
}
}),new objj_method(sel_getUid("_scrollToSelection"),function(_9f,_a0){
with(_9f){
var _a1=objj_msgSend(_9f,"frameForItemsAtIndexes:",objj_msgSend(_9f,"selectionIndexes"));
if(!CGRectIsNull(_a1)){
objj_msgSend(_9f,"scrollRectToVisible:",_a1);
}
}
}),new objj_method(sel_getUid("moveLeft:"),function(_a2,_a3,_a4){
with(_a2){
var _a5=objj_msgSend(objj_msgSend(_a2,"selectionIndexes"),"firstIndex");
if(_a5===CPNotFound){
_a5=objj_msgSend(objj_msgSend(_a2,"items"),"count");
}
objj_msgSend(_a2,"_modifySelectionWithNewIndex:direction:expand:",_a5-1,-1,NO);
}
}),new objj_method(sel_getUid("moveLeftAndModifySelection:"),function(_a6,_a7,_a8){
with(_a6){
var _a9=objj_msgSend(objj_msgSend(_a6,"selectionIndexes"),"firstIndex");
if(_a9===CPNotFound){
_a9=objj_msgSend(objj_msgSend(_a6,"items"),"count");
}
objj_msgSend(_a6,"_modifySelectionWithNewIndex:direction:expand:",_a9-1,-1,YES);
}
}),new objj_method(sel_getUid("moveRight:"),function(_aa,_ab,_ac){
with(_aa){
objj_msgSend(_aa,"_modifySelectionWithNewIndex:direction:expand:",objj_msgSend(objj_msgSend(_aa,"selectionIndexes"),"lastIndex")+1,1,NO);
}
}),new objj_method(sel_getUid("moveRightAndModifySelection:"),function(_ad,_ae,_af){
with(_ad){
objj_msgSend(_ad,"_modifySelectionWithNewIndex:direction:expand:",objj_msgSend(objj_msgSend(_ad,"selectionIndexes"),"lastIndex")+1,1,YES);
}
}),new objj_method(sel_getUid("moveDown:"),function(_b0,_b1,_b2){
with(_b0){
objj_msgSend(_b0,"_modifySelectionWithNewIndex:direction:expand:",objj_msgSend(objj_msgSend(_b0,"selectionIndexes"),"lastIndex")+objj_msgSend(_b0,"numberOfColumns"),1,NO);
}
}),new objj_method(sel_getUid("moveDownAndModifySelection:"),function(_b3,_b4,_b5){
with(_b3){
objj_msgSend(_b3,"_modifySelectionWithNewIndex:direction:expand:",objj_msgSend(objj_msgSend(_b3,"selectionIndexes"),"lastIndex")+objj_msgSend(_b3,"numberOfColumns"),1,YES);
}
}),new objj_method(sel_getUid("moveUp:"),function(_b6,_b7,_b8){
with(_b6){
var _b9=objj_msgSend(objj_msgSend(_b6,"selectionIndexes"),"firstIndex");
if(_b9==CPNotFound){
_b9=objj_msgSend(objj_msgSend(_b6,"items"),"count");
}
objj_msgSend(_b6,"_modifySelectionWithNewIndex:direction:expand:",_b9-objj_msgSend(_b6,"numberOfColumns"),-1,NO);
}
}),new objj_method(sel_getUid("moveUpAndModifySelection:"),function(_ba,_bb,_bc){
with(_ba){
var _bd=objj_msgSend(objj_msgSend(_ba,"selectionIndexes"),"firstIndex");
if(_bd==CPNotFound){
_bd=objj_msgSend(objj_msgSend(_ba,"items"),"count");
}
objj_msgSend(_ba,"_modifySelectionWithNewIndex:direction:expand:",_bd-objj_msgSend(_ba,"numberOfColumns"),-1,YES);
}
}),new objj_method(sel_getUid("deleteBackward:"),function(_be,_bf,_c0){
with(_be){
if(objj_msgSend(objj_msgSend(_be,"delegate"),"respondsToSelector:",sel_getUid("collectionView:shouldDeleteItemsAtIndexes:"))){
objj_msgSend(objj_msgSend(_be,"delegate"),"collectionView:shouldDeleteItemsAtIndexes:",_be,objj_msgSend(_be,"selectionIndexes"));
var _c1=objj_msgSend(objj_msgSend(_be,"selectionIndexes"),"firstIndex");
if(_c1>objj_msgSend(objj_msgSend(_be,"content"),"count")-1){
objj_msgSend(_be,"setSelectionIndexes:",objj_msgSend(CPIndexSet,"indexSetWithIndex:",objj_msgSend(objj_msgSend(_be,"content"),"count")-1));
}
objj_msgSend(_be,"_scrollToSelection");
objj_msgSend(_be,"setNeedsDisplay:",YES);
}
}
}),new objj_method(sel_getUid("keyDown:"),function(_c2,_c3,_c4){
with(_c2){
objj_msgSend(_c2,"interpretKeyEvents:",[_c4]);
}
})]);
var _1=objj_getClass("CPCollectionView");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"CPCollectionView\"");
}
var _2=_1.isa;
class_addMethods(_1,[new objj_method(sel_getUid("rectForItemAtIndex:"),function(_c5,_c6,_c7){
with(_c5){
_CPReportLenientDeprecation(objj_msgSend(_c5,"class"),_c6,sel_getUid("frameForItemAtIndex:"));
return objj_msgSend(_c5,"frameForItemAtIndex:",_c7);
}
}),new objj_method(sel_getUid("rectForItemsAtIndexes:"),function(_c8,_c9,_ca){
with(_c8){
_CPReportLenientDeprecation(objj_msgSend(_c8,"class"),_c9,sel_getUid("frameForItemsAtIndexes:"));
return objj_msgSend(_c8,"frameForItemsAtIndexes:",_ca);
}
})]);
var _cb="CPCollectionViewMinItemSizeKey",_cc="CPCollectionViewMaxItemSizeKey",_cd="CPCollectionViewVerticalMarginKey",_ce="CPCollectionViewMaxNumberOfRowsKey",_cf="CPCollectionViewMaxNumberOfColumnsKey",_d0="CPCollectionViewSelectableKey",_d1="CPCollectionViewAllowsMultipleSelectionKey",_d2="CPCollectionViewBackgroundColorsKey";
var _1=objj_getClass("CPCollectionView");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"CPCollectionView\"");
}
var _2=_1.isa;
class_addMethods(_1,[new objj_method(sel_getUid("awakeFromCib"),function(_d3,_d4){
with(_d3){
objj_msgSendSuper({receiver:_d3,super_class:objj_getClass("CPCollectionView").super_class},"awakeFromCib");
if(CGSizeEqualToSize(_minItemSize,CGSizeMakeZero())||CGSizeEqualToSize(_maxItemSize,CGSizeMakeZero())){
var _d5=_itemPrototype;
if(CGSizeEqualToSize(_minItemSize,CGSizeMakeZero())){
_minItemSize=objj_msgSend(objj_msgSend(_d5,"view"),"frameSize");
}else{
if(CGSizeEqualToSize(_maxItemSize,CGSizeMakeZero())){
_maxItemSize=objj_msgSend(objj_msgSend(_d5,"view"),"frameSize");
}
}
}
}
}),new objj_method(sel_getUid("initWithCoder:"),function(_d6,_d7,_d8){
with(_d6){
_d6=objj_msgSendSuper({receiver:_d6,super_class:objj_getClass("CPCollectionView").super_class},"initWithCoder:",_d8);
if(_d6){
_items=[];
_content=[];
_cachedItems=[];
_itemSize=CGSizeMakeZero();
_minItemSize=objj_msgSend(_d8,"decodeSizeForKey:",_cb)||CGSizeMakeZero();
_maxItemSize=objj_msgSend(_d8,"decodeSizeForKey:",_cc)||CGSizeMakeZero();
_maxNumberOfRows=objj_msgSend(_d8,"decodeIntForKey:",_ce)||0;
_maxNumberOfColumns=objj_msgSend(_d8,"decodeIntForKey:",_cf)||0;
_verticalMargin=objj_msgSend(_d8,"decodeFloatForKey:",_cd);
_isSelectable=objj_msgSend(_d8,"decodeBoolForKey:",_d0);
_allowsMultipleSelection=objj_msgSend(_d8,"decodeBoolForKey:",_d1);
objj_msgSend(_d6,"setBackgroundColors:",objj_msgSend(_d8,"decodeObjectForKey:",_d2));
_tileWidth=-1;
_selectionIndexes=objj_msgSend(CPIndexSet,"indexSet");
_allowsEmptySelection=YES;
}
return _d6;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_d9,_da,_db){
with(_d9){
objj_msgSendSuper({receiver:_d9,super_class:objj_getClass("CPCollectionView").super_class},"encodeWithCoder:",_db);
if(!CGSizeEqualToSize(_minItemSize,CGSizeMakeZero())){
objj_msgSend(_db,"encodeSize:forKey:",_minItemSize,_cb);
}
if(!CGSizeEqualToSize(_maxItemSize,CGSizeMakeZero())){
objj_msgSend(_db,"encodeSize:forKey:",_maxItemSize,_cc);
}
objj_msgSend(_db,"encodeInt:forKey:",_maxNumberOfRows,_ce);
objj_msgSend(_db,"encodeInt:forKey:",_maxNumberOfColumns,_cf);
objj_msgSend(_db,"encodeBool:forKey:",_isSelectable,_d0);
objj_msgSend(_db,"encodeBool:forKey:",_allowsMultipleSelection,_d1);
objj_msgSend(_db,"encodeFloat:forKey:",_verticalMargin,_cd);
objj_msgSend(_db,"encodeObject:forKey:",_backgroundColors,_d2);
}
})]);
p;22;CPCollectionViewItem.jt;1188;@STATIC;1.0;i;18;CPViewController.jt;1146;
objj_executeFile("CPViewController.j",YES);
var _1=objj_allocateClassPair(CPViewController,"CPCollectionViewItem"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_isSelected")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("setRepresentedObject:"),function(_3,_4,_5){
with(_3){
objj_msgSendSuper({receiver:_3,super_class:objj_getClass("CPCollectionViewItem").super_class},"setRepresentedObject:",_5);
var _6=objj_msgSend(_3,"view");
if(objj_msgSend(_6,"respondsToSelector:",sel_getUid("setRepresentedObject:"))){
objj_msgSend(_6,"setRepresentedObject:",objj_msgSend(_3,"representedObject"));
}
}
}),new objj_method(sel_getUid("setSelected:"),function(_7,_8,_9){
with(_7){
_9=!!_9;
if(_isSelected===_9){
return;
}
_isSelected=_9;
var _a=objj_msgSend(_7,"view");
if(objj_msgSend(_a,"respondsToSelector:",sel_getUid("setSelected:"))){
objj_msgSend(_a,"setSelected:",objj_msgSend(_7,"isSelected"));
}
}
}),new objj_method(sel_getUid("isSelected"),function(_b,_c){
with(_b){
return _isSelected;
}
}),new objj_method(sel_getUid("collectionView"),function(_d,_e){
with(_d){
return objj_msgSend(_view,"superview");
}
})]);
p;9;CPColor.jt;12403;@STATIC;1.0;I;21;Foundation/CPObject.ji;9;CGColor.ji;17;CPCompatibility.ji;9;CPImage.jt;12309;
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("CGColor.j",YES);
objj_executeFile("CPCompatibility.j",YES);
objj_executeFile("CPImage.j",YES);
var _1=0,_2=1,_3=2,_4=3;
var _5=0,_6=1,_7=2;
var _8,_9,_a,_b,_c,_d,_e,_f,_10,_11,_12,_13,_14,_15,_16,_17;
var _18=objj_allocateClassPair(CPObject,"CPColor"),_19=_18.isa;
class_addIvars(_18,[new objj_ivar("_components"),new objj_ivar("_patternImage"),new objj_ivar("_cssString")]);
objj_registerClassPair(_18);
class_addMethods(_18,[new objj_method(sel_getUid("_initWithCSSString:"),function(_1a,_1b,_1c){
with(_1a){
if(_1c.indexOf("rgb")==CPNotFound){
return nil;
}
_1a=objj_msgSendSuper({receiver:_1a,super_class:objj_getClass("CPColor").super_class},"init");
var _1d=_1c.indexOf("("),_1e=_1c.substring(_1d+1).split(",");
_components=[parseInt(_1e[0],10)/255,parseInt(_1e[1],10)/255,parseInt(_1e[2],10)/255,_1e[3]?parseFloat(_1e[3],10):1];
_cssString=_1c;
return _1a;
}
}),new objj_method(sel_getUid("_initWithRGBA:"),function(_1f,_20,_21){
with(_1f){
_1f=objj_msgSendSuper({receiver:_1f,super_class:objj_getClass("CPColor").super_class},"init");
if(_1f){
_components=_21;
var _22=CPFeatureIsCompatible(CPCSSRGBAFeature)&&_components[3]!=1;
_cssString=(_22?"rgba(":"rgb(")+parseInt(_components[0]*255)+", "+parseInt(_components[1]*255)+", "+parseInt(_components[2]*255)+(_22?(", "+_components[3]):"")+")";
}
return _1f;
}
}),new objj_method(sel_getUid("_initWithPatternImage:"),function(_23,_24,_25){
with(_23){
_23=objj_msgSendSuper({receiver:_23,super_class:objj_getClass("CPColor").super_class},"init");
if(_23){
_patternImage=_25;
_cssString="url(\""+objj_msgSend(_patternImage,"filename")+"\")";
_components=[0,0,0,1];
}
return _23;
}
}),new objj_method(sel_getUid("patternImage"),function(_26,_27){
with(_26){
return _patternImage;
}
}),new objj_method(sel_getUid("alphaComponent"),function(_28,_29){
with(_28){
return _components[3];
}
}),new objj_method(sel_getUid("blueComponent"),function(_2a,_2b){
with(_2a){
return _components[2];
}
}),new objj_method(sel_getUid("greenComponent"),function(_2c,_2d){
with(_2c){
return _components[1];
}
}),new objj_method(sel_getUid("redComponent"),function(_2e,_2f){
with(_2e){
return _components[0];
}
}),new objj_method(sel_getUid("components"),function(_30,_31){
with(_30){
return _components;
}
}),new objj_method(sel_getUid("colorWithAlphaComponent:"),function(_32,_33,_34){
with(_32){
var _35=_components.slice();
_35[_35.length-1]=_34;
return objj_msgSend(objj_msgSend(objj_msgSend(_32,"class"),"alloc"),"_initWithRGBA:",_35);
}
}),new objj_method(sel_getUid("hsbComponents"),function(_36,_37){
with(_36){
var red=ROUND(_components[_1]*255),_38=ROUND(_components[_2]*255),_39=ROUND(_components[_3]*255);
var max=MAX(red,_38,_39),min=MIN(red,_38,_39),_3a=max-min;
var _3b=max/255,_3c=(max!=0)?_3a/max:0;
var hue;
if(_3c==0){
hue=0;
}else{
var rr=(max-red)/_3a,gr=(max-_38)/_3a,br=(max-_39)/_3a;
if(red==max){
hue=br-gr;
}else{
if(_38==max){
hue=2+rr-br;
}else{
hue=4+gr-rr;
}
}
hue/=6;
if(hue<0){
hue++;
}
}
return [ROUND(hue*360),ROUND(_3c*100),ROUND(_3b*100)];
}
}),new objj_method(sel_getUid("cssString"),function(_3d,_3e){
with(_3d){
return _cssString;
}
}),new objj_method(sel_getUid("hexString"),function(_3f,_40){
with(_3f){
return _41(objj_msgSend(_3f,"redComponent"),objj_msgSend(_3f,"greenComponent"),objj_msgSend(_3f,"blueComponent"));
}
}),new objj_method(sel_getUid("isEqual:"),function(_42,_43,_44){
with(_42){
if(!_44){
return NO;
}
if(_44===_42){
return YES;
}
if(!objj_msgSend(_44,"isKindOfClass:",CPColor)){
return NO;
}
if(_patternImage||objj_msgSend(_44,"patternImage")){
return objj_msgSend(_patternImage,"isEqual:",objj_msgSend(_44,"patternImage"));
}
return ROUND(objj_msgSend(_42,"redComponent")*255)==ROUND(objj_msgSend(_44,"redComponent")*255)&&ROUND(objj_msgSend(_42,"greenComponent")*255)==ROUND(objj_msgSend(_44,"greenComponent")*255)&&ROUND(objj_msgSend(_42,"blueComponent")*255)==ROUND(objj_msgSend(_44,"blueComponent")*255)&&objj_msgSend(_42,"alphaComponent")==objj_msgSend(_44,"alphaComponent");
}
}),new objj_method(sel_getUid("description"),function(_45,_46){
with(_45){
return objj_msgSendSuper({receiver:_45,super_class:objj_getClass("CPColor").super_class},"description")+" "+objj_msgSend(_45,"cssString");
}
})]);
class_addMethods(_19,[new objj_method(sel_getUid("colorWithRed:green:blue:alpha:"),function(_47,_48,red,_49,_4a,_4b){
with(_47){
return objj_msgSend(objj_msgSend(CPColor,"alloc"),"_initWithRGBA:",[red,_49,_4a,_4b]);
}
}),new objj_method(sel_getUid("colorWithCalibratedRed:green:blue:alpha:"),function(_4c,_4d,red,_4e,_4f,_50){
with(_4c){
return objj_msgSend(_4c,"colorWithRed:green:blue:alpha:",red,_4e,_4f,_50);
}
}),new objj_method(sel_getUid("colorWithWhite:alpha:"),function(_51,_52,_53,_54){
with(_51){
return objj_msgSend(objj_msgSend(CPColor,"alloc"),"_initWithRGBA:",[_53,_53,_53,_54]);
}
}),new objj_method(sel_getUid("colorWithCalibratedWhite:alpha:"),function(_55,_56,_57,_58){
with(_55){
return objj_msgSend(_55,"colorWithWhite:alpha:",_57,_58);
}
}),new objj_method(sel_getUid("colorWithHue:saturation:brightness:"),function(_59,_5a,hue,_5b,_5c){
with(_59){
return objj_msgSend(_59,"colorWithHue:saturation:brightness:alpha:",hue,_5b,_5c,1);
}
}),new objj_method(sel_getUid("colorWithHue:saturation:brightness:alpha:"),function(_5d,_5e,hue,_5f,_60,_61){
with(_5d){
if(_5f===0){
return objj_msgSend(CPColor,"colorWithCalibratedWhite:alpha:",_60/100,_61);
}
var f=hue%60,p=(_60*(100-_5f))/10000,q=(_60*(6000-_5f*f))/600000,t=(_60*(6000-_5f*(60-f)))/600000,b=_60/100;
switch(FLOOR(hue/60)){
case 0:
return objj_msgSend(CPColor,"colorWithCalibratedRed:green:blue:alpha:",b,t,p,_61);
case 1:
return objj_msgSend(CPColor,"colorWithCalibratedRed:green:blue:alpha:",q,b,p,_61);
case 2:
return objj_msgSend(CPColor,"colorWithCalibratedRed:green:blue:alpha:",p,b,t,_61);
case 3:
return objj_msgSend(CPColor,"colorWithCalibratedRed:green:blue:alpha:",p,q,b,_61);
case 4:
return objj_msgSend(CPColor,"colorWithCalibratedRed:green:blue:alpha:",t,p,b,_61);
case 5:
return objj_msgSend(CPColor,"colorWithCalibratedRed:green:blue:alpha:",b,p,q,_61);
}
}
}),new objj_method(sel_getUid("colorWithHexString:"),function(_62,_63,hex){
with(_62){
var _64=_65(hex);
return _64?objj_msgSend(objj_msgSend(CPColor,"alloc"),"_initWithRGBA:",_64):null;
}
}),new objj_method(sel_getUid("blackColor"),function(_66,_67){
with(_66){
if(!_8){
_8=objj_msgSend(objj_msgSend(CPColor,"alloc"),"_initWithRGBA:",[0,0,0,1]);
}
return _8;
}
}),new objj_method(sel_getUid("blueColor"),function(_68,_69){
with(_68){
if(!_b){
_b=objj_msgSend(objj_msgSend(CPColor,"alloc"),"_initWithRGBA:",[0,0,1,1]);
}
return _b;
}
}),new objj_method(sel_getUid("darkGrayColor"),function(_6a,_6b){
with(_6a){
if(!_f){
_f=objj_msgSend(CPColor,"colorWithCalibratedWhite:alpha:",1/3,1);
}
return _f;
}
}),new objj_method(sel_getUid("grayColor"),function(_6c,_6d){
with(_6c){
if(!_d){
_d=objj_msgSend(CPColor,"colorWithCalibratedWhite:alpha:",0.5,1);
}
return _d;
}
}),new objj_method(sel_getUid("greenColor"),function(_6e,_6f){
with(_6e){
if(!_a){
_a=objj_msgSend(objj_msgSend(CPColor,"alloc"),"_initWithRGBA:",[0,1,0,1]);
}
return _a;
}
}),new objj_method(sel_getUid("lightGrayColor"),function(_70,_71){
with(_70){
if(!_e){
_e=objj_msgSend(CPColor,"colorWithCalibratedWhite:alpha:",2/3,1);
}
return _e;
}
}),new objj_method(sel_getUid("redColor"),function(_72,_73){
with(_72){
if(!_9){
_9=objj_msgSend(objj_msgSend(CPColor,"alloc"),"_initWithRGBA:",[1,0,0,1]);
}
return _9;
}
}),new objj_method(sel_getUid("whiteColor"),function(_74,_75){
with(_74){
if(!_10){
_10=objj_msgSend(objj_msgSend(CPColor,"alloc"),"_initWithRGBA:",[1,1,1,1]);
}
return _10;
}
}),new objj_method(sel_getUid("yellowColor"),function(_76,_77){
with(_76){
if(!_c){
_c=objj_msgSend(objj_msgSend(CPColor,"alloc"),"_initWithRGBA:",[1,1,0,1]);
}
return _c;
}
}),new objj_method(sel_getUid("brownColor"),function(_78,_79){
with(_78){
if(!_11){
_11=objj_msgSend(objj_msgSend(CPColor,"alloc"),"_initWithRGBA:",[0.6,0.4,0.2,1]);
}
return _11;
}
}),new objj_method(sel_getUid("cyanColor"),function(_7a,_7b){
with(_7a){
if(!_12){
_12=objj_msgSend(objj_msgSend(CPColor,"alloc"),"_initWithRGBA:",[0,1,1,1]);
}
return _12;
}
}),new objj_method(sel_getUid("magentaColor"),function(_7c,_7d){
with(_7c){
if(!_13){
_13=objj_msgSend(objj_msgSend(CPColor,"alloc"),"_initWithRGBA:",[1,0,1,1]);
}
return _13;
}
}),new objj_method(sel_getUid("orangeColor"),function(_7e,_7f){
with(_7e){
if(!_14){
_14=objj_msgSend(objj_msgSend(CPColor,"alloc"),"_initWithRGBA:",[1,0.5,0,1]);
}
return _14;
}
}),new objj_method(sel_getUid("purpleColor"),function(_80,_81){
with(_80){
if(!_15){
_15=objj_msgSend(objj_msgSend(CPColor,"alloc"),"_initWithRGBA:",[0.5,0,0.5,1]);
}
return _15;
}
}),new objj_method(sel_getUid("shadowColor"),function(_82,_83){
with(_82){
if(!_16){
_16=objj_msgSend(objj_msgSend(CPColor,"alloc"),"_initWithRGBA:",[0,0,0,1/3]);
}
return _16;
}
}),new objj_method(sel_getUid("clearColor"),function(_84,_85){
with(_84){
if(!_17){
_17=objj_msgSend(_84,"colorWithCalibratedWhite:alpha:",0,0);
}
return _17;
}
}),new objj_method(sel_getUid("alternateSelectedControlColor"),function(_86,_87){
with(_86){
return objj_msgSend(objj_msgSend(CPColor,"alloc"),"_initWithRGBA:",[0.22,0.46,0.84,1]);
}
}),new objj_method(sel_getUid("secondarySelectedControlColor"),function(_88,_89){
with(_88){
return objj_msgSend(objj_msgSend(CPColor,"alloc"),"_initWithRGBA:",[0.83,0.83,0.83,1]);
}
}),new objj_method(sel_getUid("colorWithPatternImage:"),function(_8a,_8b,_8c){
with(_8a){
return objj_msgSend(objj_msgSend(CPColor,"alloc"),"_initWithPatternImage:",_8c);
}
}),new objj_method(sel_getUid("colorWithCSSString:"),function(_8d,_8e,_8f){
with(_8d){
return objj_msgSend(objj_msgSend(CPColor,"alloc"),"_initWithCSSString:",_8f);
}
})]);
var _18=objj_getClass("CPColor");
if(!_18){
throw new SyntaxError("*** Could not find definition for class \"CPColor\"");
}
var _19=_18.isa;
class_addMethods(_18,[new objj_method(sel_getUid("set"),function(_90,_91){
with(_90){
objj_msgSend(_90,"setFill");
objj_msgSend(_90,"setStroke");
}
}),new objj_method(sel_getUid("setFill"),function(_92,_93){
with(_92){
var ctx=objj_msgSend(objj_msgSend(CPGraphicsContext,"currentContext"),"graphicsPort");
CGContextSetFillColor(ctx,_92);
}
}),new objj_method(sel_getUid("setStroke"),function(_94,_95){
with(_94){
var ctx=objj_msgSend(objj_msgSend(CPGraphicsContext,"currentContext"),"graphicsPort");
CGContextSetStrokeColor(ctx,_94);
}
})]);
var _18=objj_getClass("CPColor");
if(!_18){
throw new SyntaxError("*** Could not find definition for class \"CPColor\"");
}
var _19=_18.isa;
class_addMethods(_19,[new objj_method(sel_getUid("randomColor"),function(_96,_97){
with(_96){
return objj_msgSend(CPColor,"colorWithRed:green:blue:alpha:",RAND(),RAND(),RAND(),1);
}
})]);
var _98="CPColorComponentsKey",_99="CPColorPatternImageKey";
var _18=objj_getClass("CPColor");
if(!_18){
throw new SyntaxError("*** Could not find definition for class \"CPColor\"");
}
var _19=_18.isa;
class_addMethods(_18,[new objj_method(sel_getUid("initWithCoder:"),function(_9a,_9b,_9c){
with(_9a){
if(objj_msgSend(_9c,"containsValueForKey:",_99)){
return objj_msgSend(_9a,"_initWithPatternImage:",objj_msgSend(_9c,"decodeObjectForKey:",_99));
}
return objj_msgSend(_9a,"_initWithRGBA:",objj_msgSend(_9c,"decodeObjectForKey:",_98));
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_9d,_9e,_9f){
with(_9d){
if(_patternImage){
objj_msgSend(_9f,"encodeObject:forKey:",_patternImage,_99);
}else{
objj_msgSend(_9f,"encodeObject:forKey:",_components,_98);
}
}
})]);
var _a0="0123456789ABCDEF";
var _65=function(hex){
if(hex.length==3){
hex=hex.charAt(0)+hex.charAt(0)+hex.charAt(1)+hex.charAt(1)+hex.charAt(2)+hex.charAt(2);
}
if(hex.length!=6){
return null;
}
hex=hex.toUpperCase();
for(var i=0;i<hex.length;i++){
if(_a0.indexOf(hex.charAt(i))==-1){
return null;
}
}
var red=(_a0.indexOf(hex.charAt(0))*16+_a0.indexOf(hex.charAt(1)))/255,_a1=(_a0.indexOf(hex.charAt(2))*16+_a0.indexOf(hex.charAt(3)))/255,_a2=(_a0.indexOf(hex.charAt(4))*16+_a0.indexOf(hex.charAt(5)))/255;
return [red,_a1,_a2,1];
};
var _41=function(r,g,b){
return _a3(r)+_a3(g)+_a3(b);
};
var _a3=function(n){
if(!n||isNaN(n)){
return "00";
}
n=FLOOR(MIN(255,MAX(0,256*n)));
return _a0.charAt((n-n%16)/16)+_a0.charAt(n%16);
};
p;14;CPColorPanel.jt;16922;@STATIC;1.0;i;15;CPApplication.ji;10;CPButton.ji;10;CPCookie.ji;9;CPPanel.ji;8;CPView.ji;15;CPColorPicker.ji;21;CPSliderColorPicker.jt;16781;
objj_executeFile("CPApplication.j",YES);
objj_executeFile("CPButton.j",YES);
objj_executeFile("CPCookie.j",YES);
objj_executeFile("CPPanel.j",YES);
objj_executeFile("CPView.j",YES);
CPColorPanelColorDidChangeNotification="CPColorPanelColorDidChangeNotification";
var _1=20,_2=32,_3=14,_4=32,_5=12;
var _6=nil,_7=[];
CPWheelColorPickerMode=1;
CPSliderColorPickerMode=2;
CPColorPickerViewWidth=265,CPColorPickerViewHeight=370;
var _8=objj_allocateClassPair(CPPanel,"CPColorPanel"),_9=_8.isa;
class_addIvars(_8,[new objj_ivar("_toolbar"),new objj_ivar("_swatchView"),new objj_ivar("_previewView"),new objj_ivar("_opacitySlider"),new objj_ivar("_colorPickers"),new objj_ivar("_currentView"),new objj_ivar("_activePicker"),new objj_ivar("_color"),new objj_ivar("_target"),new objj_ivar("_action"),new objj_ivar("_mode")]);
objj_registerClassPair(_8);
class_addMethods(_8,[new objj_method(sel_getUid("init"),function(_a,_b){
with(_a){
_a=objj_msgSendSuper({receiver:_a,super_class:objj_getClass("CPColorPanel").super_class},"initWithContentRect:styleMask:",CGRectMake(500,50,219,370),(CPTitledWindowMask|CPClosableWindowMask|CPResizableWindowMask));
if(_a){
objj_msgSend(objj_msgSend(_a,"contentView"),"setBackgroundColor:",objj_msgSend(CPColor,"colorWithWhite:alpha:",0.95,1));
objj_msgSend(_a,"setTitle:","Color Panel");
objj_msgSend(_a,"setLevel:",CPFloatingWindowLevel);
objj_msgSend(_a,"setFloatingPanel:",YES);
objj_msgSend(_a,"setBecomesKeyOnlyIfNeeded:",YES);
objj_msgSend(_a,"setMinSize:",CGSizeMake(219,363));
objj_msgSend(_a,"setMaxSize:",CGSizeMake(323,537));
}
return _a;
}
}),new objj_method(sel_getUid("setColor:"),function(_c,_d,_e){
with(_c){
_color=_e;
objj_msgSend(_previewView,"setBackgroundColor:",_color);
objj_msgSend(CPApp,"sendAction:to:from:",sel_getUid("changeColor:"),nil,_c);
if(_target&&_action){
objj_msgSend(CPApp,"sendAction:to:from:",_action,_target,_c);
}
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:",CPColorPanelColorDidChangeNotification,_c);
objj_msgSend(_activePicker,"setColor:",_color);
objj_msgSend(_opacitySlider,"setFloatValue:",objj_msgSend(_color,"alphaComponent"));
}
}),new objj_method(sel_getUid("setColor:updatePicker:"),function(_f,_10,_11,_12){
with(_f){
objj_msgSend(_f,"setColor:",_11);
if(_12){
objj_msgSend(_activePicker,"setColor:",_color);
}
}
}),new objj_method(sel_getUid("color"),function(_13,_14){
with(_13){
return _color;
}
}),new objj_method(sel_getUid("opacity"),function(_15,_16){
with(_15){
return objj_msgSend(_opacitySlider,"floatValue");
}
}),new objj_method(sel_getUid("setTarget:"),function(_17,_18,_19){
with(_17){
_target=_19;
}
}),new objj_method(sel_getUid("target"),function(_1a,_1b){
with(_1a){
return _target;
}
}),new objj_method(sel_getUid("setAction:"),function(_1c,_1d,_1e){
with(_1c){
_action=_1e;
}
}),new objj_method(sel_getUid("action"),function(_1f,_20){
with(_1f){
return _action;
}
}),new objj_method(sel_getUid("setMode:"),function(_21,_22,_23){
with(_21){
_mode=_23;
}
}),new objj_method(sel_getUid("_setPicker:"),function(_24,_25,_26){
with(_24){
var _27=_colorPickers[objj_msgSend(_26,"tag")],_28=objj_msgSend(_27,"provideNewView:",NO);
if(!_28){
_28=objj_msgSend(_27,"provideNewView:",YES);
}
if(_28==_currentView){
return;
}
if(_currentView){
objj_msgSend(_28,"setFrame:",objj_msgSend(_currentView,"frame"));
}else{
var _29=(_2+10+_1+5+_3+32),_2a=objj_msgSend(objj_msgSend(_24,"contentView"),"bounds");
objj_msgSend(_28,"setFrameSize:",CPSizeMake(_2a.size.width-10,_2a.size.height-_29));
objj_msgSend(_28,"setFrameOrigin:",CPPointMake(5,_29));
}
objj_msgSend(_currentView,"removeFromSuperview");
objj_msgSend(objj_msgSend(_24,"contentView"),"addSubview:",_28);
_currentView=_28;
_activePicker=_27;
objj_msgSend(_27,"setColor:",objj_msgSend(_24,"color"));
}
}),new objj_method(sel_getUid("mode"),function(_2b,_2c){
with(_2b){
return _mode;
}
}),new objj_method(sel_getUid("orderFront:"),function(_2d,_2e,_2f){
with(_2d){
objj_msgSend(_2d,"_loadContentsIfNecessary");
objj_msgSendSuper({receiver:_2d,super_class:objj_getClass("CPColorPanel").super_class},"orderFront:",_2f);
}
}),new objj_method(sel_getUid("_loadContentsIfNecessary"),function(_30,_31){
with(_30){
if(_toolbar){
return;
}
if(!_color){
_color=objj_msgSend(CPColor,"whiteColor");
}
_colorPickers=[];
var _32=objj_msgSend(_7,"count");
for(var i=0;i<_32;i++){
var _33=_7[i],_34=objj_msgSend(objj_msgSend(_33,"alloc"),"initWithPickerMask:colorPanel:",0,_30);
_colorPickers.push(_34);
}
var _35=objj_msgSend(_30,"contentView"),_36=objj_msgSend(_35,"bounds");
_toolbar=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",CGRectMake(0,6,CGRectGetWidth(_36),_2));
objj_msgSend(_toolbar,"setAutoresizingMask:",CPViewWidthSizable);
var _37=_32*_4+(_32-1)*_5,_38=(CGRectGetWidth(_36)-_37)/2,_39=nil;
for(var i=0;i<_32;i++){
var _3a=objj_msgSend(_colorPickers[i],"provideNewButtonImage"),_3b=objj_msgSend(_colorPickers[i],"provideNewAlternateButtonImage"),_3c=objj_msgSend(objj_msgSend(CPButton,"alloc"),"initWithFrame:",CGRectMake(_38+i*(_4+_5),0,_4,_4));
objj_msgSend(_3c,"setTag:",i);
objj_msgSend(_3c,"setTarget:",_30);
objj_msgSend(_3c,"setAction:",sel_getUid("_setPicker:"));
objj_msgSend(_3c,"setBordered:",NO);
objj_msgSend(_3c,"setAutoresizingMask:",CPViewMinXMargin|CPViewMaxXMargin);
objj_msgSend(_3c,"setImage:",_3a);
objj_msgSend(_3c,"setAlternateImage:",_3b);
objj_msgSend(_toolbar,"addSubview:",_3c);
if(!_39){
_39=_3c;
}
}
var _3d=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",CGRectMake(76,_2+10,CGRectGetWidth(_36)-86,_1));
_previewView=objj_msgSend(objj_msgSend(_CPColorPanelPreview,"alloc"),"initWithFrame:",CGRectInset(objj_msgSend(_3d,"bounds"),2,2));
objj_msgSend(_previewView,"setColorPanel:",_30);
objj_msgSend(_previewView,"setAutoresizingMask:",CPViewWidthSizable);
objj_msgSend(_3d,"setBackgroundColor:",objj_msgSend(CPColor,"colorWithWhite:alpha:",0.8,1));
objj_msgSend(_3d,"setAutoresizingMask:",CPViewWidthSizable);
objj_msgSend(_3d,"addSubview:",_previewView);
var _3e=objj_msgSend(objj_msgSend(CPTextField,"alloc"),"initWithFrame:",CPRectMake(10,_2+10,60,15));
objj_msgSend(_3e,"setStringValue:","Preview:");
objj_msgSend(_3e,"setTextColor:",objj_msgSend(CPColor,"blackColor"));
objj_msgSend(_3e,"setAlignment:",CPRightTextAlignment);
var _3f=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",CGRectMake(76,_2+10+_1+5,CGRectGetWidth(_36)-86,_3+2));
objj_msgSend(_3f,"setBackgroundColor:",objj_msgSend(CPColor,"colorWithWhite:alpha:",0.8,1));
objj_msgSend(_3f,"setAutoresizingMask:",CPViewWidthSizable);
_swatchView=objj_msgSend(objj_msgSend(_CPColorPanelSwatches,"alloc"),"initWithFrame:",CGRectInset(objj_msgSend(_3f,"bounds"),1,1));
objj_msgSend(_swatchView,"setColorPanel:",_30);
objj_msgSend(_swatchView,"setAutoresizingMask:",CPViewWidthSizable);
objj_msgSend(_3f,"addSubview:",_swatchView);
var _40=objj_msgSend(objj_msgSend(CPTextField,"alloc"),"initWithFrame:",CPRectMake(10,_2+8+_1+6,60,15));
objj_msgSend(_40,"setStringValue:","Swatches:");
objj_msgSend(_40,"setTextColor:",objj_msgSend(CPColor,"blackColor"));
objj_msgSend(_40,"setAlignment:",CPRightTextAlignment);
var _41=objj_msgSend(objj_msgSend(CPTextField,"alloc"),"initWithFrame:",CPRectMake(10,_2+_1+35,60,20));
objj_msgSend(_41,"setStringValue:","Opacity:");
objj_msgSend(_41,"setTextColor:",objj_msgSend(CPColor,"blackColor"));
objj_msgSend(_41,"setAlignment:",CPRightTextAlignment);
_opacitySlider=objj_msgSend(objj_msgSend(CPSlider,"alloc"),"initWithFrame:",CGRectMake(76,_2+_1+34,CGRectGetWidth(_36)-86,20));
objj_msgSend(_opacitySlider,"setMinValue:",0);
objj_msgSend(_opacitySlider,"setMaxValue:",1);
objj_msgSend(_opacitySlider,"setAutoresizingMask:",CPViewWidthSizable);
objj_msgSend(_opacitySlider,"setTarget:",_30);
objj_msgSend(_opacitySlider,"setAction:",sel_getUid("setOpacity:"));
objj_msgSend(_35,"addSubview:",_toolbar);
objj_msgSend(_35,"addSubview:",_3d);
objj_msgSend(_35,"addSubview:",_3e);
objj_msgSend(_35,"addSubview:",_3f);
objj_msgSend(_35,"addSubview:",_40);
objj_msgSend(_35,"addSubview:",_41);
objj_msgSend(_35,"addSubview:",_opacitySlider);
_target=nil;
_action=nil;
_activePicker=nil;
objj_msgSend(_previewView,"setBackgroundColor:",_color);
if(_39){
objj_msgSend(_30,"_setPicker:",_39);
}
}
}),new objj_method(sel_getUid("setOpacity:"),function(_42,_43,_44){
with(_42){
var _45=objj_msgSend(objj_msgSend(_42,"color"),"components"),_46=objj_msgSend(_44,"floatValue");
objj_msgSend(_42,"setColor:updatePicker:",objj_msgSend(_color,"colorWithAlphaComponent:",_46),YES);
}
})]);
class_addMethods(_9,[new objj_method(sel_getUid("provideColorPickerClass:"),function(_47,_48,_49){
with(_47){
_7.push(_49);
}
}),new objj_method(sel_getUid("sharedColorPanel"),function(_4a,_4b){
with(_4a){
if(!_6){
_6=objj_msgSend(objj_msgSend(CPColorPanel,"alloc"),"init");
}
return _6;
}
}),new objj_method(sel_getUid("setPickerMode:"),function(_4c,_4d,_4e){
with(_4c){
var _4f=objj_msgSend(CPColorPanel,"sharedColorPanel");
objj_msgSend(_4f,"setMode:",_4e);
}
})]);
CPColorDragType="CPColorDragType";
var _50="CPColorPanelSwatchesCookie";
var _8=objj_allocateClassPair(CPView,"_CPColorPanelSwatches"),_9=_8.isa;
class_addIvars(_8,[new objj_ivar("_swatches"),new objj_ivar("_dragColor"),new objj_ivar("_colorPanel"),new objj_ivar("_swatchCookie")]);
objj_registerClassPair(_8);
class_addMethods(_8,[new objj_method(sel_getUid("initWithFrame:"),function(_51,_52,_53){
with(_51){
_51=objj_msgSendSuper({receiver:_51,super_class:objj_getClass("_CPColorPanelSwatches").super_class},"initWithFrame:",_53);
objj_msgSend(_51,"setBackgroundColor:",objj_msgSend(CPColor,"grayColor"));
objj_msgSend(_51,"registerForDraggedTypes:",objj_msgSend(CPArray,"arrayWithObjects:",CPColorDragType));
var _54=objj_msgSend(CPColor,"whiteColor");
_swatchCookie=objj_msgSend(objj_msgSend(CPCookie,"alloc"),"initWithName:",_50);
var _55=objj_msgSend(_51,"startingColorList");
_swatches=[];
for(var i=0;i<50;i++){
var _56=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",CPRectMake(13*i+1,1,12,12)),_57=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",CGRectInset(objj_msgSend(_56,"bounds"),1,1));
objj_msgSend(_56,"setBackgroundColor:",_54);
objj_msgSend(_57,"setBackgroundColor:",(i<_55.length)?_55[i]:_54);
objj_msgSend(_56,"addSubview:",_57);
objj_msgSend(_51,"addSubview:",_56);
_swatches.push(_56);
}
return _51;
}
}),new objj_method(sel_getUid("isOpaque"),function(_58,_59){
with(_58){
return YES;
}
}),new objj_method(sel_getUid("startingColorList"),function(_5a,_5b){
with(_5a){
var _5c=objj_msgSend(_swatchCookie,"value");
if(_5c==""){
return [objj_msgSend(CPColor,"blackColor"),objj_msgSend(CPColor,"darkGrayColor"),objj_msgSend(CPColor,"grayColor"),objj_msgSend(CPColor,"lightGrayColor"),objj_msgSend(CPColor,"whiteColor"),objj_msgSend(CPColor,"redColor"),objj_msgSend(CPColor,"greenColor"),objj_msgSend(CPColor,"blueColor"),objj_msgSend(CPColor,"yellowColor")];
}
var _5c=eval(_5c),_5d=[];
for(var i=0;i<_5c.length;i++){
_5d.push(objj_msgSend(CPColor,"colorWithHexString:",_5c[i]));
}
return _5d;
}
}),new objj_method(sel_getUid("saveColorList"),function(_5e,_5f){
with(_5e){
var _60=[];
for(var i=0;i<_swatches.length;i++){
_60.push(objj_msgSend(objj_msgSend(objj_msgSend(_swatches[i],"subviews")[0],"backgroundColor"),"hexString"));
}
var _61=new Date();
_61.setYear(2019);
objj_msgSend(_swatchCookie,"setValue:expires:domain:",JSON.stringify(_60),_61,nil);
}
}),new objj_method(sel_getUid("setColorPanel:"),function(_62,_63,_64){
with(_62){
_colorPanel=_64;
}
}),new objj_method(sel_getUid("colorPanel"),function(_65,_66){
with(_65){
return _colorPanel;
}
}),new objj_method(sel_getUid("colorAtIndex:"),function(_67,_68,_69){
with(_67){
return objj_msgSend(objj_msgSend(_swatches[_69],"subviews")[0],"backgroundColor");
}
}),new objj_method(sel_getUid("setColor:atIndex:"),function(_6a,_6b,_6c,_6d){
with(_6a){
objj_msgSend(objj_msgSend(_swatches[_6d],"subviews")[0],"setBackgroundColor:",_6c);
objj_msgSend(_6a,"saveColorList");
}
}),new objj_method(sel_getUid("mouseUp:"),function(_6e,_6f,_70){
with(_6e){
var _71=objj_msgSend(_6e,"convertPoint:fromView:",objj_msgSend(_70,"locationInWindow"),nil),_72=objj_msgSend(_6e,"bounds");
if(!CGRectContainsPoint(_72,_71)||_71.x>objj_msgSend(_6e,"bounds").size.width-1||_71.x<1){
return NO;
}
objj_msgSend(_colorPanel,"setColor:updatePicker:",objj_msgSend(_6e,"colorAtIndex:",FLOOR(_71.x/13)),YES);
}
}),new objj_method(sel_getUid("mouseDragged:"),function(_73,_74,_75){
with(_73){
var _76=objj_msgSend(_73,"convertPoint:fromView:",objj_msgSend(_75,"locationInWindow"),nil);
if(_76.x>objj_msgSend(_73,"bounds").size.width-1||_76.x<1){
return NO;
}
objj_msgSend(objj_msgSend(CPPasteboard,"pasteboardWithName:",CPDragPboard),"declareTypes:owner:",objj_msgSend(CPArray,"arrayWithObject:",CPColorDragType),_73);
var _77=_swatches[FLOOR(_76.x/13)];
_dragColor=objj_msgSend(objj_msgSend(_77,"subviews")[0],"backgroundColor");
var _78=CPRectCreateCopy(objj_msgSend(_77,"bounds"));
var _79=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",_78),_7a=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",CGRectInset(_78,1,1));
objj_msgSend(_79,"setBackgroundColor:",objj_msgSend(CPColor,"blackColor"));
objj_msgSend(_7a,"setBackgroundColor:",_dragColor);
objj_msgSend(_79,"addSubview:",_7a);
objj_msgSend(_73,"dragView:at:offset:event:pasteboard:source:slideBack:",_79,CPPointMake(_76.x-_78.size.width/2,_76.y-_78.size.height/2),CPPointMake(0,0),_75,nil,_73,YES);
}
}),new objj_method(sel_getUid("pasteboard:provideDataForType:"),function(_7b,_7c,_7d,_7e){
with(_7b){
if(_7e==CPColorDragType){
objj_msgSend(_7d,"setData:forType:",objj_msgSend(CPKeyedArchiver,"archivedDataWithRootObject:",_dragColor),_7e);
}
}
}),new objj_method(sel_getUid("performDragOperation:"),function(_7f,_80,_81){
with(_7f){
var _82=objj_msgSend(_7f,"convertPoint:fromView:",objj_msgSend(_81,"draggingLocation"),nil),_83=objj_msgSend(_81,"draggingPasteboard"),_84=nil;
if(!objj_msgSend(_83,"availableTypeFromArray:",[CPColorDragType])||_82.x>objj_msgSend(_7f,"bounds").size.width-1||_82.x<1){
return NO;
}
objj_msgSend(_7f,"setColor:atIndex:",objj_msgSend(CPKeyedUnarchiver,"unarchiveObjectWithData:",objj_msgSend(_83,"dataForType:",CPColorDragType)),FLOOR(_82.x/13));
}
})]);
var _8=objj_allocateClassPair(CPView,"_CPColorPanelPreview"),_9=_8.isa;
class_addIvars(_8,[new objj_ivar("_colorPanel")]);
objj_registerClassPair(_8);
class_addMethods(_8,[new objj_method(sel_getUid("initWithFrame:"),function(_85,_86,_87){
with(_85){
_85=objj_msgSendSuper({receiver:_85,super_class:objj_getClass("_CPColorPanelPreview").super_class},"initWithFrame:",_87);
objj_msgSend(_85,"registerForDraggedTypes:",objj_msgSend(CPArray,"arrayWithObjects:",CPColorDragType));
return _85;
}
}),new objj_method(sel_getUid("setColorPanel:"),function(_88,_89,_8a){
with(_88){
_colorPanel=_8a;
}
}),new objj_method(sel_getUid("colorPanel"),function(_8b,_8c){
with(_8b){
return _colorPanel;
}
}),new objj_method(sel_getUid("performDragOperation:"),function(_8d,_8e,_8f){
with(_8d){
var _90=objj_msgSend(_8f,"draggingPasteboard");
if(!objj_msgSend(_90,"availableTypeFromArray:",[CPColorDragType])){
return NO;
}
var _91=objj_msgSend(CPKeyedUnarchiver,"unarchiveObjectWithData:",objj_msgSend(_90,"dataForType:",CPColorDragType));
objj_msgSend(_colorPanel,"setColor:updatePicker:",_91,YES);
}
}),new objj_method(sel_getUid("isOpaque"),function(_92,_93){
with(_92){
return YES;
}
}),new objj_method(sel_getUid("mouseDragged:"),function(_94,_95,_96){
with(_94){
var _97=objj_msgSend(_94,"convertPoint:fromView:",objj_msgSend(_96,"locationInWindow"),nil);
objj_msgSend(objj_msgSend(CPPasteboard,"pasteboardWithName:",CPDragPboard),"declareTypes:owner:",[CPColorDragType],_94);
var _98=CPRectMake(0,0,15,15);
var _99=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",_98),_9a=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",CGRectInset(_98,1,1));
objj_msgSend(_99,"setBackgroundColor:",objj_msgSend(CPColor,"blackColor"));
objj_msgSend(_9a,"setBackgroundColor:",objj_msgSend(_94,"backgroundColor"));
objj_msgSend(_99,"addSubview:",_9a);
objj_msgSend(_94,"dragView:at:offset:event:pasteboard:source:slideBack:",_99,CPPointMake(_97.x-_98.size.width/2,_97.y-_98.size.height/2),CPPointMake(0,0),_96,nil,_94,YES);
}
}),new objj_method(sel_getUid("pasteboard:provideDataForType:"),function(_9b,_9c,_9d,_9e){
with(_9b){
if(_9e==CPColorDragType){
objj_msgSend(_9d,"setData:forType:",objj_msgSend(CPKeyedArchiver,"archivedDataWithRootObject:",objj_msgSend(_9b,"backgroundColor")),_9e);
}
}
})]);
objj_executeFile("CPColorPicker.j",YES);
objj_executeFile("CPSliderColorPicker.j",YES);
objj_msgSend(CPColorPanel,"provideColorPickerClass:",CPColorWheelColorPicker);
objj_msgSend(CPColorPanel,"provideColorPickerClass:",CPSliderColorPicker);
p;15;CPColorPicker.jt;10147;@STATIC;1.0;I;21;Foundation/CPObject.ji;8;CPView.jt;10089;
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("CPView.j",YES);
var _1=objj_allocateClassPair(CPObject,"CPColorPicker"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_panel"),new objj_ivar("_mask")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("initWithPickerMask:colorPanel:"),function(_3,_4,_5,_6){
with(_3){
_3=objj_msgSendSuper({receiver:_3,super_class:objj_getClass("CPColorPicker").super_class},"init");
_panel=_6;
_mask=_5;
return _3;
}
}),new objj_method(sel_getUid("colorPanel"),function(_7,_8){
with(_7){
return _panel;
}
}),new objj_method(sel_getUid("provideNewButtonImage"),function(_9,_a){
with(_9){
return nil;
}
}),new objj_method(sel_getUid("setMode:"),function(_b,_c,_d){
with(_b){
return;
}
}),new objj_method(sel_getUid("setColor:"),function(_e,_f,_10){
with(_e){
return;
}
})]);
var _1=objj_allocateClassPair(CPColorPicker,"CPColorWheelColorPicker"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_pickerView"),new objj_ivar("_brightnessSlider"),new objj_ivar("_hueSaturationView"),new objj_ivar("_cachedColor")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("initWithPickerMask:colorPanel:"),function(_11,_12,_13,_14){
with(_11){
return objj_msgSendSuper({receiver:_11,super_class:objj_getClass("CPColorWheelColorPicker").super_class},"initWithPickerMask:colorPanel:",_13,_14);
}
}),new objj_method(sel_getUid("initView"),function(_15,_16){
with(_15){
aFrame=CPRectMake(0,0,CPColorPickerViewWidth,CPColorPickerViewHeight);
_pickerView=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",aFrame);
objj_msgSend(_pickerView,"setAutoresizingMask:",CPViewWidthSizable|CPViewHeightSizable);
_brightnessSlider=objj_msgSend(objj_msgSend(CPSlider,"alloc"),"initWithFrame:",CGRectMake(0,(aFrame.size.height-34),aFrame.size.width,15));
objj_msgSend(_brightnessSlider,"setValue:forThemeAttribute:",15,"track-width");
objj_msgSend(_brightnessSlider,"setValue:forThemeAttribute:",objj_msgSend(CPColor,"colorWithPatternImage:",objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:",objj_msgSend(objj_msgSend(CPBundle,"bundleForClass:",objj_msgSend(CPColorPicker,"class")),"pathForResource:","brightness_bar.png"))),"track-color");
objj_msgSend(_brightnessSlider,"setMinValue:",0);
objj_msgSend(_brightnessSlider,"setMaxValue:",100);
objj_msgSend(_brightnessSlider,"setFloatValue:",100);
objj_msgSend(_brightnessSlider,"setTarget:",_15);
objj_msgSend(_brightnessSlider,"setAction:",sel_getUid("brightnessSliderDidChange:"));
objj_msgSend(_brightnessSlider,"setAutoresizingMask:",CPViewWidthSizable|CPViewMinYMargin);
_hueSaturationView=objj_msgSend(objj_msgSend(__CPColorWheel,"alloc"),"initWithFrame:",CPRectMake(0,0,aFrame.size.width,aFrame.size.height-38));
objj_msgSend(_hueSaturationView,"setDelegate:",_15);
objj_msgSend(_hueSaturationView,"setAutoresizingMask:",(CPViewWidthSizable|CPViewHeightSizable));
objj_msgSend(_pickerView,"addSubview:",_hueSaturationView);
objj_msgSend(_pickerView,"addSubview:",_brightnessSlider);
}
}),new objj_method(sel_getUid("brightnessSliderDidChange:"),function(_17,_18,_19){
with(_17){
objj_msgSend(_17,"updateColor");
}
}),new objj_method(sel_getUid("colorWheelDidChange:"),function(_1a,_1b,_1c){
with(_1a){
objj_msgSend(_1a,"updateColor");
}
}),new objj_method(sel_getUid("updateColor"),function(_1d,_1e){
with(_1d){
var hue=objj_msgSend(_hueSaturationView,"angle"),_1f=objj_msgSend(_hueSaturationView,"distance"),_20=objj_msgSend(_brightnessSlider,"floatValue");
objj_msgSend(_hueSaturationView,"setWheelBrightness:",_20/100);
objj_msgSend(_brightnessSlider,"setBackgroundColor:",objj_msgSend(CPColor,"colorWithHue:saturation:brightness:",hue,_1f,100));
var _21=objj_msgSend(_1d,"colorPanel"),_22=objj_msgSend(_21,"opacity");
_cachedColor=objj_msgSend(CPColor,"colorWithHue:saturation:brightness:alpha:",hue,_1f,_20,_22);
objj_msgSend(objj_msgSend(_1d,"colorPanel"),"setColor:",_cachedColor);
}
}),new objj_method(sel_getUid("supportsMode:"),function(_23,_24,_25){
with(_23){
return (_25==CPWheelColorPickerMode)?YES:NO;
}
}),new objj_method(sel_getUid("currentMode"),function(_26,_27){
with(_26){
return CPWheelColorPickerMode;
}
}),new objj_method(sel_getUid("provideNewView:"),function(_28,_29,_2a){
with(_28){
if(_2a){
objj_msgSend(_28,"initView");
}
return _pickerView;
}
}),new objj_method(sel_getUid("setColor:"),function(_2b,_2c,_2d){
with(_2b){
if(objj_msgSend(_2d,"isEqual:",_cachedColor)){
return;
}
var hsb=objj_msgSend(_2d,"hsbComponents");
objj_msgSend(_hueSaturationView,"setPositionToColor:",_2d);
objj_msgSend(_brightnessSlider,"setFloatValue:",hsb[2]);
objj_msgSend(_hueSaturationView,"setWheelBrightness:",hsb[2]/100);
objj_msgSend(_brightnessSlider,"setBackgroundColor:",objj_msgSend(CPColor,"colorWithHue:saturation:brightness:",hsb[0],hsb[1],100));
}
}),new objj_method(sel_getUid("provideNewButtonImage"),function(_2e,_2f){
with(_2e){
return objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(objj_msgSend(CPBundle,"bundleForClass:",CPColorPicker),"pathForResource:","wheel_button.png"),CGSizeMake(32,32));
}
}),new objj_method(sel_getUid("provideNewAlternateButtonImage"),function(_30,_31){
with(_30){
return objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(objj_msgSend(CPBundle,"bundleForClass:",CPColorPicker),"pathForResource:","wheel_button_h.png"),CGSizeMake(32,32));
}
})]);
var _1=objj_allocateClassPair(CPView,"__CPColorWheel"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_wheelImage"),new objj_ivar("_blackWheelImage"),new objj_ivar("_crosshair"),new objj_ivar("_delegate"),new objj_ivar("_angle"),new objj_ivar("_distance"),new objj_ivar("_radius")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("initWithFrame:"),function(_32,_33,_34){
with(_32){
_32=objj_msgSendSuper({receiver:_32,super_class:objj_getClass("__CPColorWheel").super_class},"initWithFrame:",_34);
var _35=objj_msgSend(objj_msgSend(CPBundle,"bundleForClass:",CPColorPicker),"pathForResource:","wheel.png");
_wheelImage=new Image();
_wheelImage.src=_35;
_wheelImage.style.position="absolute";
_35=objj_msgSend(objj_msgSend(CPBundle,"bundleForClass:",CPColorPicker),"pathForResource:","wheel_black.png");
_blackWheelImage=new Image();
_blackWheelImage.src=_35;
_blackWheelImage.style.opacity="0";
_blackWheelImage.style.filter="alpha(opacity=0)";
_blackWheelImage.style.position="absolute";
_DOMElement.appendChild(_wheelImage);
_DOMElement.appendChild(_blackWheelImage);
objj_msgSend(_32,"setWheelSize:",_34.size);
_crosshair=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",CPRectMake(_radius-2,_radius-2,4,4));
objj_msgSend(_crosshair,"setBackgroundColor:",objj_msgSend(CPColor,"blackColor"));
var _36=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",CGRectInset(objj_msgSend(_crosshair,"bounds"),1,1));
objj_msgSend(_36,"setBackgroundColor:",objj_msgSend(CPColor,"whiteColor"));
objj_msgSend(_crosshair,"addSubview:",_36);
objj_msgSend(_32,"addSubview:",_crosshair);
return _32;
}
}),new objj_method(sel_getUid("setWheelBrightness:"),function(_37,_38,_39){
with(_37){
_blackWheelImage.style.opacity=1-_39;
_blackWheelImage.style.filter="alpha(opacity="+(1-_39)*100+")";
}
}),new objj_method(sel_getUid("setFrameSize:"),function(_3a,_3b,_3c){
with(_3a){
objj_msgSendSuper({receiver:_3a,super_class:objj_getClass("__CPColorWheel").super_class},"setFrameSize:",_3c);
objj_msgSend(_3a,"setWheelSize:",_3c);
}
}),new objj_method(sel_getUid("setWheelSize:"),function(_3d,_3e,_3f){
with(_3d){
var min=MIN(_3f.width,_3f.height);
_blackWheelImage.style.width=min;
_blackWheelImage.style.height=min;
_blackWheelImage.width=min;
_blackWheelImage.height=min;
_blackWheelImage.style.top=(_3f.height-min)/2+"px";
_blackWheelImage.style.left=(_3f.width-min)/2+"px";
_wheelImage.style.width=min;
_wheelImage.style.height=min;
_wheelImage.width=min;
_wheelImage.height=min;
_wheelImage.style.top=(_3f.height-min)/2+"px";
_wheelImage.style.left=(_3f.width-min)/2+"px";
_radius=min/2;
objj_msgSend(_3d,"setAngle:distance:",objj_msgSend(_3d,"degreesToRadians:",_angle),(_distance/100)*_radius);
}
}),new objj_method(sel_getUid("setDelegate:"),function(_40,_41,_42){
with(_40){
_delegate=_42;
}
}),new objj_method(sel_getUid("delegate"),function(_43,_44){
with(_43){
return _delegate;
}
}),new objj_method(sel_getUid("angle"),function(_45,_46){
with(_45){
return _angle;
}
}),new objj_method(sel_getUid("distance"),function(_47,_48){
with(_47){
return _distance;
}
}),new objj_method(sel_getUid("mouseDown:"),function(_49,_4a,_4b){
with(_49){
objj_msgSend(_49,"reposition:",_4b);
}
}),new objj_method(sel_getUid("mouseDragged:"),function(_4c,_4d,_4e){
with(_4c){
objj_msgSend(_4c,"reposition:",_4e);
}
}),new objj_method(sel_getUid("reposition:"),function(_4f,_50,_51){
with(_4f){
var _52=objj_msgSend(_4f,"bounds"),_53=objj_msgSend(_4f,"convertPoint:fromView:",objj_msgSend(_51,"locationInWindow"),nil),_54=CGRectGetMidX(_52),_55=CGRectGetMidY(_52),_56=MIN(SQRT((_53.x-_54)*(_53.x-_54)+(_53.y-_55)*(_53.y-_55)),_radius),_57=ATAN2(_53.y-_55,_53.x-_54);
objj_msgSend(_4f,"setAngle:distance:",_57,_56);
objj_msgSend(_delegate,"colorWheelDidChange:",_4f);
}
}),new objj_method(sel_getUid("setAngle:distance:"),function(_58,_59,_5a,_5b){
with(_58){
var _5c=objj_msgSend(_58,"bounds"),_5d=CGRectGetMidX(_5c),_5e=CGRectGetMidY(_5c);
_angle=objj_msgSend(_58,"radiansToDegrees:",_5a);
_distance=(_5b/_radius)*100;
objj_msgSend(_crosshair,"setFrameOrigin:",CPPointMake(COS(_5a)*_5b+_5d-2,SIN(_5a)*_5b+_5e-2));
}
}),new objj_method(sel_getUid("setPositionToColor:"),function(_5f,_60,_61){
with(_5f){
var hsb=objj_msgSend(_61,"hsbComponents"),_62=objj_msgSend(_5f,"bounds"),_63=objj_msgSend(_5f,"degreesToRadians:",hsb[0]),_64=(hsb[1]/100)*_radius;
objj_msgSend(_5f,"setAngle:distance:",_63,_64);
}
}),new objj_method(sel_getUid("radiansToDegrees:"),function(_65,_66,_67){
with(_65){
return ((-_67/PI)*180+360)%360;
}
}),new objj_method(sel_getUid("degreesToRadians:"),function(_68,_69,_6a){
with(_68){
return -(((_6a-360)/180)*PI);
}
})]);
p;13;CPColorWell.jt;6201;@STATIC;1.0;I;21;Foundation/CPString.ji;8;CPView.ji;9;CPColor.ji;14;CPColorPanel.jt;6112;
objj_executeFile("Foundation/CPString.j",NO);
objj_executeFile("CPView.j",YES);
objj_executeFile("CPColor.j",YES);
objj_executeFile("CPColorPanel.j",YES);
var _1="_CPColorWellDidBecomeExclusiveNotification";
var _2=objj_allocateClassPair(CPControl,"CPColorWell"),_3=_2.isa;
class_addIvars(_2,[new objj_ivar("_active"),new objj_ivar("_bordered"),new objj_ivar("_color"),new objj_ivar("_wellView")]);
objj_registerClassPair(_2);
class_addMethods(_2,[new objj_method(sel_getUid("initWithFrame:"),function(_4,_5,_6){
with(_4){
_4=objj_msgSendSuper({receiver:_4,super_class:objj_getClass("CPColorWell").super_class},"initWithFrame:",_6);
if(_4){
_active=NO;
_bordered=YES;
_color=objj_msgSend(CPColor,"whiteColor");
objj_msgSend(_4,"drawBezelWithHighlight:",NO);
objj_msgSend(_4,"drawWellInside:",CGRectInset(objj_msgSend(_4,"bounds"),3,3));
objj_msgSend(_4,"_registerForNotifications");
}
return _4;
}
}),new objj_method(sel_getUid("_registerForNotifications"),function(_7,_8){
with(_7){
var _9=objj_msgSend(CPNotificationCenter,"defaultCenter");
objj_msgSend(_9,"addObserver:selector:name:object:",_7,sel_getUid("colorWellDidBecomeExclusive:"),_1,nil);
objj_msgSend(_9,"addObserver:selector:name:object:",_7,sel_getUid("colorPanelWillClose:"),CPWindowWillCloseNotification,objj_msgSend(CPColorPanel,"sharedColorPanel"));
}
}),new objj_method(sel_getUid("isBordered"),function(_a,_b){
with(_a){
return _bordered;
}
}),new objj_method(sel_getUid("setBordered:"),function(_c,_d,_e){
with(_c){
if(_bordered==_e){
return;
}
_bordered=_e;
objj_msgSend(_c,"drawWellInside:",CGRectInset(objj_msgSend(_c,"bounds"),3,3));
}
}),new objj_method(sel_getUid("color"),function(_f,_10){
with(_f){
return _color;
}
}),new objj_method(sel_getUid("setColor:"),function(_11,_12,_13){
with(_11){
if(_color==_13){
return;
}
_color=_13;
objj_msgSend(_11,"drawWellInside:",CGRectInset(objj_msgSend(_11,"bounds"),3,3));
}
}),new objj_method(sel_getUid("takeColorFrom:"),function(_14,_15,_16){
with(_14){
objj_msgSend(_14,"setColor:",objj_msgSend(_16,"color"));
}
}),new objj_method(sel_getUid("activate:"),function(_17,_18,_19){
with(_17){
if(_19){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:",_1,_17);
}
if(objj_msgSend(_17,"isActive")){
return;
}
_active=YES;
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"addObserver:selector:name:object:",_17,sel_getUid("colorPanelDidChangeColor:"),CPColorPanelColorDidChangeNotification,objj_msgSend(CPColorPanel,"sharedColorPanel"));
}
}),new objj_method(sel_getUid("deactivate"),function(_1a,_1b){
with(_1a){
if(!objj_msgSend(_1a,"isActive")){
return;
}
_active=NO;
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"removeObserver:name:object:",_1a,CPColorPanelColorDidChangeNotification,objj_msgSend(CPColorPanel,"sharedColorPanel"));
}
}),new objj_method(sel_getUid("isActive"),function(_1c,_1d){
with(_1c){
return _active;
}
}),new objj_method(sel_getUid("drawBezelWithHighlight:"),function(_1e,_1f,_20){
with(_1e){
}
}),new objj_method(sel_getUid("drawWellInside:"),function(_21,_22,_23){
with(_21){
if(!_wellView){
_wellView=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",_23);
objj_msgSend(_wellView,"setAutoresizingMask:",CPViewWidthSizable|CPViewHeightSizable);
objj_msgSend(_21,"addSubview:",_wellView);
}else{
objj_msgSend(_wellView,"setFrame:",_23);
}
objj_msgSend(_wellView,"setBackgroundColor:",_color);
}
}),new objj_method(sel_getUid("colorPanelDidChangeColor:"),function(_24,_25,_26){
with(_24){
objj_msgSend(_24,"takeColorFrom:",objj_msgSend(_26,"object"));
objj_msgSend(_24,"sendAction:to:",objj_msgSend(_24,"action"),objj_msgSend(_24,"target"));
}
}),new objj_method(sel_getUid("colorWellDidBecomeExclusive:"),function(_27,_28,_29){
with(_27){
if(_27!=objj_msgSend(_29,"object")){
objj_msgSend(_27,"deactivate");
}
}
}),new objj_method(sel_getUid("colorPanelWillClose:"),function(_2a,_2b,_2c){
with(_2a){
objj_msgSend(_2a,"deactivate");
}
}),new objj_method(sel_getUid("mouseDown:"),function(_2d,_2e,_2f){
with(_2d){
if(!objj_msgSend(_2d,"isEnabled")){
return;
}
objj_msgSend(_2d,"drawBezelWithHighlight:",YES);
}
}),new objj_method(sel_getUid("mouseDragged:"),function(_30,_31,_32){
with(_30){
if(!objj_msgSend(_30,"isEnabled")){
return;
}
objj_msgSend(_30,"drawBezelWithHighlight:",CGRectContainsPoint(objj_msgSend(_30,"bounds"),objj_msgSend(_30,"convertPoint:fromView:",objj_msgSend(_32,"locationInWindow"),nil)));
}
}),new objj_method(sel_getUid("mouseUp:"),function(_33,_34,_35){
with(_33){
objj_msgSend(_33,"drawBezelWithHighlight:",NO);
if(!CGRectContainsPoint(objj_msgSend(_33,"bounds"),objj_msgSend(_33,"convertPoint:fromView:",objj_msgSend(_35,"locationInWindow"),nil))||!objj_msgSend(_33,"isEnabled")){
return;
}
objj_msgSend(_33,"activate:",YES);
var _36=objj_msgSend(CPColorPanel,"sharedColorPanel");
objj_msgSend(_36,"setColor:",_color);
objj_msgSend(_36,"orderFront:",_33);
}
})]);
var _37="CPColorWellColorKey",_38="CPColorWellBorderedKey";
var _2=objj_getClass("CPColorWell");
if(!_2){
throw new SyntaxError("*** Could not find definition for class \"CPColorWell\"");
}
var _3=_2.isa;
class_addMethods(_2,[new objj_method(sel_getUid("initWithCoder:"),function(_39,_3a,_3b){
with(_39){
_39=objj_msgSendSuper({receiver:_39,super_class:objj_getClass("CPColorWell").super_class},"initWithCoder:",_3b);
if(_39){
_active=NO;
_bordered=objj_msgSend(_3b,"decodeBoolForKey:",_38);
_color=objj_msgSend(_3b,"decodeObjectForKey:",_37);
objj_msgSend(_39,"drawBezelWithHighlight:",NO);
objj_msgSend(_39,"drawWellInside:",CGRectInset(objj_msgSend(_39,"bounds"),3,3));
objj_msgSend(_39,"_registerForNotifications");
}
return _39;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_3c,_3d,_3e){
with(_3c){
var _3f=_subviews;
_subviews=objj_msgSend(_subviews,"copy");
objj_msgSend(_subviews,"removeObjectIdenticalTo:",_wellView);
objj_msgSendSuper({receiver:_3c,super_class:objj_getClass("CPColorWell").super_class},"encodeWithCoder:",_3e);
_subviews=_3f;
objj_msgSend(_3e,"encodeObject:forKey:",_color,_37);
objj_msgSend(_3e,"encodeObject:forKey:",_bordered,_38);
}
})]);
p;17;CPCompatibility.jt;3976;@STATIC;1.0;i;9;CPEvent.ji;12;CPPlatform.jt;3927;
objj_executeFile("CPEvent.j",YES);
objj_executeFile("CPPlatform.j",YES);
CPUnknownBrowserEngine=0;
CPGeckoBrowserEngine=1;
CPInternetExplorerBrowserEngine=2;
CPKHTMLBrowserEngine=3;
CPOperaBrowserEngine=4;
CPWebKitBrowserEngine=5;
CPMacOperatingSystem=0;
CPWindowsOperatingSystem=1;
CPOtherOperatingSystem=2;
CPCSSRGBAFeature=1<<5;
CPHTMLCanvasFeature=1<<6;
CPHTMLContentEditableFeature=1<<7;
CPHTMLDragAndDropFeature=1<<8;
CPJavaScriptInnerTextFeature=1<<9;
CPJavaScriptTextContentFeature=1<<10;
CPJavaScriptClipboardEventsFeature=1<<11;
CPJavaScriptClipboardAccessFeature=1<<12;
CPJavaScriptCanvasDrawFeature=1<<13;
CPJavaScriptCanvasTransformFeature=1<<14;
CPVMLFeature=1<<15;
CPJavaScriptRemedialKeySupport=1<<16;
CPJavaScriptShadowFeature=1<<20;
CPJavaScriptNegativeMouseWheelValues=1<<22;
CPJavaScriptMouseWheelValues_8_15=1<<23;
CPOpacityRequiresFilterFeature=1<<24;
CPInputTypeCanBeChangedFeature=1<<25;
CPHTML5DragAndDropSourceYOffBy1=1<<26;
CPSOPDisabledFromFileURLs=1<<27;
var _1="",_2=CPUnknownBrowserEngine,_3=0;
_3|=CPInputTypeCanBeChangedFeature;
if(typeof window!=="undefined"&&typeof window.navigator!=="undefined"){
_1=window.navigator.userAgent;
}
if(typeof window!=="undefined"&&window.opera){
_2=CPOperaBrowserEngine;
_3|=CPJavaScriptCanvasDrawFeature;
}else{
if(typeof window!=="undefined"&&window.attachEvent){
_2=CPInternetExplorerBrowserEngine;
_3|=CPVMLFeature;
_3|=CPJavaScriptRemedialKeySupport;
_3|=CPJavaScriptShadowFeature;
_3|=CPOpacityRequiresFilterFeature;
_3&=~CPInputTypeCanBeChangedFeature;
}else{
if(_1.indexOf("AppleWebKit/")!=-1){
_2=CPWebKitBrowserEngine;
_3|=CPCSSRGBAFeature;
_3|=CPHTMLContentEditableFeature;
if(_1.indexOf("Chrome")===-1){
_3|=CPHTMLDragAndDropFeature;
}
_3|=CPJavaScriptClipboardEventsFeature;
_3|=CPJavaScriptClipboardAccessFeature;
_3|=CPJavaScriptShadowFeature;
var _4=_1.indexOf("AppleWebKit/")+"AppleWebKit/".length,_5=_1.indexOf(" ",_4),_6=_1.substring(_4,_5),_7=_6.indexOf("."),_8=parseInt(_6.substring(0,_7)),_9=parseInt(_6.substr(_7+1));
if((_1.indexOf("Safari")!==CPNotFound&&(_8>525||(_8===525&&_9>14)))||_1.indexOf("Chrome")!==CPNotFound){
_3|=CPJavaScriptRemedialKeySupport;
}
if(!objj_msgSend(CPPlatform,"isBrowser")){
_3|=CPJavaScriptRemedialKeySupport;
}
if(_8<532||(_8===532&&_9<6)){
_3|=CPHTML5DragAndDropSourceYOffBy1;
}
if(_1.indexOf("Chrome")===CPNotFound){
_3|=CPSOPDisabledFromFileURLs;
}
}else{
if(_1.indexOf("KHTML")!=-1){
_2=CPKHTMLBrowserEngine;
}else{
if(_1.indexOf("Gecko")!==-1){
_2=CPGeckoBrowserEngine;
_3|=CPJavaScriptCanvasDrawFeature;
var _a=_1.indexOf("Firefox"),_b=(_a===-1)?2:parseFloat(_1.substring(_a+"Firefox".length+1));
if(_b>=3){
_3|=CPCSSRGBAFeature;
}
if(_b<3){
_3|=CPJavaScriptMouseWheelValues_8_15;
}
}
}
}
}
}
if(typeof document!="undefined"){
var _c=document.createElement("canvas");
if(_c&&_c.getContext){
_3|=CPHTMLCanvasFeature;
var _d=document.createElement("canvas").getContext("2d");
if(_d&&_d.setTransform&&_d.transform){
_3|=CPJavaScriptCanvasTransformFeature;
}
}
var _e=document.createElement("div");
if(_e.innerText!=undefined){
_3|=CPJavaScriptInnerTextFeature;
}else{
if(_e.textContent!=undefined){
_3|=CPJavaScriptTextContentFeature;
}
}
}
CPFeatureIsCompatible=function(_f){
return _3&_f;
};
CPBrowserIsEngine=function(_10){
return _2===_10;
};
CPBrowserIsOperatingSystem=function(_11){
return OPERATING_SYSTEM===_11;
};
OPERATING_SYSTEM=CPOtherOperatingSystem;
if(_1.indexOf("Mac")!==-1){
OPERATING_SYSTEM=CPMacOperatingSystem;
CPPlatformActionKeyMask=CPCommandKeyMask;
CPUndoKeyEquivalent="z";
CPRedoKeyEquivalent="Z";
CPUndoKeyEquivalentModifierMask=CPCommandKeyMask;
CPRedoKeyEquivalentModifierMask=CPCommandKeyMask;
}else{
if(_1.indexOf("Windows")!==-1){
OPERATING_SYSTEM=CPWindowsOperatingSystem;
}
CPPlatformActionKeyMask=CPControlKeyMask;
CPUndoKeyEquivalent="z";
CPRedoKeyEquivalent="y";
CPUndoKeyEquivalentModifierMask=CPControlKeyMask;
CPRedoKeyEquivalentModifierMask=CPControlKeyMask;
}
p;11;CPControl.jt;19924;@STATIC;1.0;i;8;CPFont.ji;10;CPShadow.ji;8;CPView.ji;19;CPKeyValueBinding.jt;19841;
objj_executeFile("CPFont.j",YES);
objj_executeFile("CPShadow.j",YES);
objj_executeFile("CPView.j",YES);
objj_executeFile("CPKeyValueBinding.j",YES);
CPLeftTextAlignment=0;
CPRightTextAlignment=1;
CPCenterTextAlignment=2;
CPJustifiedTextAlignment=3;
CPNaturalTextAlignment=4;
CPRegularControlSize=0;
CPSmallControlSize=1;
CPMiniControlSize=2;
CPLineBreakByWordWrapping=0;
CPLineBreakByCharWrapping=1;
CPLineBreakByClipping=2;
CPLineBreakByTruncatingHead=3;
CPLineBreakByTruncatingTail=4;
CPLineBreakByTruncatingMiddle=5;
CPTopVerticalTextAlignment=1;
CPCenterVerticalTextAlignment=2;
CPBottomVerticalTextAlignment=3;
CPScaleProportionally=0;
CPScaleToFit=1;
CPScaleNone=2;
CPNoImage=0;
CPImageOnly=1;
CPImageLeft=2;
CPImageRight=3;
CPImageBelow=4;
CPImageAbove=5;
CPImageOverlaps=6;
CPOnState=1;
CPOffState=0;
CPMixedState=-1;
CPControlNormalBackgroundColor="CPControlNormalBackgroundColor";
CPControlSelectedBackgroundColor="CPControlSelectedBackgroundColor";
CPControlHighlightedBackgroundColor="CPControlHighlightedBackgroundColor";
CPControlDisabledBackgroundColor="CPControlDisabledBackgroundColor";
CPControlTextDidBeginEditingNotification="CPControlTextDidBeginEditingNotification";
CPControlTextDidChangeNotification="CPControlTextDidChangeNotification";
CPControlTextDidEndEditingNotification="CPControlTextDidEndEditingNotification";
var _1=objj_msgSend(CPColor,"blackColor");
var _2=objj_allocateClassPair(CPView,"CPControl"),_3=_2.isa;
class_addIvars(_2,[new objj_ivar("_value"),new objj_ivar("_target"),new objj_ivar("_action"),new objj_ivar("_sendActionOn"),new objj_ivar("_sendsActionOnEndEditing"),new objj_ivar("_continuousTracking"),new objj_ivar("_trackingWasWithinFrame"),new objj_ivar("_trackingMouseDownFlags"),new objj_ivar("_previousTrackingLocation")]);
objj_registerClassPair(_2);
class_addMethods(_2,[new objj_method(sel_getUid("sendsActionOnEndEditing"),function(_4,_5){
with(_4){
return _sendsActionOnEndEditing;
}
}),new objj_method(sel_getUid("setSendsActionOnEndEditing:"),function(_6,_7,_8){
with(_6){
_sendsActionOnEndEditing=_8;
}
}),new objj_method(sel_getUid("_continuouslyReverseSetBinding"),function(_9,_a){
with(_9){
var _b=objj_msgSend(objj_msgSend(_9,"class"),"_binderClassForBinding:",CPValueBinding),_c=objj_msgSend(_b,"getBinding:forObject:",CPValueBinding,_9);
if(objj_msgSend(_c,"continuouslyUpdatesValue")){
objj_msgSend(_c,"reverseSetValueFor:","objectValue");
}
}
}),new objj_method(sel_getUid("_reverseSetBinding"),function(_d,_e){
with(_d){
var _f=objj_msgSend(objj_msgSend(_d,"class"),"_binderClassForBinding:",CPValueBinding),_10=objj_msgSend(_f,"getBinding:forObject:",CPValueBinding,_d);
objj_msgSend(_10,"reverseSetValueFor:","objectValue");
}
}),new objj_method(sel_getUid("initWithFrame:"),function(_11,_12,_13){
with(_11){
_11=objj_msgSendSuper({receiver:_11,super_class:objj_getClass("CPControl").super_class},"initWithFrame:",_13);
if(_11){
_sendActionOn=CPLeftMouseUpMask;
_trackingMouseDownFlags=0;
}
return _11;
}
}),new objj_method(sel_getUid("setAction:"),function(_14,_15,_16){
with(_14){
_action=_16;
}
}),new objj_method(sel_getUid("action"),function(_17,_18){
with(_17){
return _action;
}
}),new objj_method(sel_getUid("setTarget:"),function(_19,_1a,_1b){
with(_19){
_target=_1b;
}
}),new objj_method(sel_getUid("target"),function(_1c,_1d){
with(_1c){
return _target;
}
}),new objj_method(sel_getUid("sendAction:to:"),function(_1e,_1f,_20,_21){
with(_1e){
objj_msgSend(_1e,"_reverseSetBinding");
objj_msgSend(CPApp,"sendAction:to:from:",_20,_21,_1e);
}
}),new objj_method(sel_getUid("sendActionOn:"),function(_22,_23,_24){
with(_22){
var _25=_sendActionOn;
_sendActionOn=_24;
return _25;
}
}),new objj_method(sel_getUid("isContinuous"),function(_26,_27){
with(_26){
return (_sendActionOn&CPPeriodicMask)!==0;
}
}),new objj_method(sel_getUid("setContinuous:"),function(_28,_29,_2a){
with(_28){
if(_2a){
_sendActionOn|=CPPeriodicMask;
}else{
_sendActionOn&=~CPPeriodicMask;
}
}
}),new objj_method(sel_getUid("tracksMouseOutsideOfFrame"),function(_2b,_2c){
with(_2b){
return NO;
}
}),new objj_method(sel_getUid("trackMouse:"),function(_2d,_2e,_2f){
with(_2d){
var _30=objj_msgSend(_2f,"type"),_31=objj_msgSend(_2d,"convertPoint:fromView:",objj_msgSend(_2f,"locationInWindow"),nil),_32=objj_msgSend(_2d,"tracksMouseOutsideOfFrame")||CGRectContainsPoint(objj_msgSend(_2d,"bounds"),_31);
if(_30===CPLeftMouseUp){
objj_msgSend(_2d,"stopTracking:at:mouseIsUp:",_previousTrackingLocation,_31,YES);
_trackingMouseDownFlags=0;
if(_32){
objj_msgSend(_2d,"setThemeState:",CPThemeStateHovered);
}
}else{
objj_msgSend(_2d,"unsetThemeState:",CPThemeStateHovered);
if(_30===CPLeftMouseDown){
_trackingMouseDownFlags=objj_msgSend(_2f,"modifierFlags");
_continuousTracking=objj_msgSend(_2d,"startTrackingAt:",_31);
}else{
if(_30===CPLeftMouseDragged){
if(_32){
if(!_trackingWasWithinFrame){
_continuousTracking=objj_msgSend(_2d,"startTrackingAt:",_31);
}else{
if(_continuousTracking){
_continuousTracking=objj_msgSend(_2d,"continueTracking:at:",_previousTrackingLocation,_31);
}
}
}else{
objj_msgSend(_2d,"stopTracking:at:mouseIsUp:",_previousTrackingLocation,_31,NO);
}
}
}
objj_msgSend(CPApp,"setTarget:selector:forNextEventMatchingMask:untilDate:inMode:dequeue:",_2d,sel_getUid("trackMouse:"),CPLeftMouseDraggedMask|CPLeftMouseUpMask,nil,nil,YES);
}
if((_sendActionOn&(1<<_30))&&_32){
objj_msgSend(_2d,"sendAction:to:",_action,_target);
}
_trackingWasWithinFrame=_32;
_previousTrackingLocation=_31;
}
}),new objj_method(sel_getUid("setState:"),function(_33,_34,_35){
with(_33){
}
}),new objj_method(sel_getUid("nextState"),function(_36,_37){
with(_36){
return 0;
}
}),new objj_method(sel_getUid("performClick:"),function(_38,_39,_3a){
with(_38){
if(!objj_msgSend(_38,"isEnabled")){
return;
}
objj_msgSend(_38,"highlight:",YES);
objj_msgSend(_38,"setState:",objj_msgSend(_38,"nextState"));
try{
objj_msgSend(_38,"sendAction:to:",objj_msgSend(_38,"action"),objj_msgSend(_38,"target"));
}
catch(e){
throw e;
}
finally{
objj_msgSend(CPTimer,"scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:",0.1,_38,sel_getUid("unhighlightButtonTimerDidFinish:"),nil,NO);
}
}
}),new objj_method(sel_getUid("unhighlightButtonTimerDidFinish:"),function(_3b,_3c,_3d){
with(_3b){
objj_msgSend(_3b,"highlight:",NO);
}
}),new objj_method(sel_getUid("mouseDownFlags"),function(_3e,_3f){
with(_3e){
return _trackingMouseDownFlags;
}
}),new objj_method(sel_getUid("startTrackingAt:"),function(_40,_41,_42){
with(_40){
objj_msgSend(_40,"highlight:",YES);
return (_sendActionOn&CPPeriodicMask)||(_sendActionOn&CPLeftMouseDraggedMask);
}
}),new objj_method(sel_getUid("continueTracking:at:"),function(_43,_44,_45,_46){
with(_43){
return (_sendActionOn&CPPeriodicMask)||(_sendActionOn&CPLeftMouseDraggedMask);
}
}),new objj_method(sel_getUid("stopTracking:at:mouseIsUp:"),function(_47,_48,_49,_4a,_4b){
with(_47){
objj_msgSend(_47,"highlight:",NO);
}
}),new objj_method(sel_getUid("mouseDown:"),function(_4c,_4d,_4e){
with(_4c){
if(!objj_msgSend(_4c,"isEnabled")){
return;
}
objj_msgSend(_4c,"trackMouse:",_4e);
}
}),new objj_method(sel_getUid("mouseEntered:"),function(_4f,_50,_51){
with(_4f){
if(!objj_msgSend(_4f,"isEnabled")){
return;
}
objj_msgSend(_4f,"setThemeState:",CPThemeStateHovered);
}
}),new objj_method(sel_getUid("mouseExited:"),function(_52,_53,_54){
with(_52){
var _55=objj_msgSend(_52,"convertPoint:fromView:",objj_msgSend(_54,"locationInWindow"),nil),_56=objj_msgSend(_52,"tracksMouseOutsideOfFrame")||CGRectContainsPoint(objj_msgSend(_52,"bounds"),_55);
if(!_56){
objj_msgSend(_52,"unsetThemeState:",CPThemeStateHovered);
}
}
}),new objj_method(sel_getUid("objectValue"),function(_57,_58){
with(_57){
return _value;
}
}),new objj_method(sel_getUid("setObjectValue:"),function(_59,_5a,_5b){
with(_59){
_value=_5b;
objj_msgSend(_59,"setNeedsLayout");
objj_msgSend(_59,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("floatValue"),function(_5c,_5d){
with(_5c){
var _5e=parseFloat(_value,10);
return isNaN(_5e)?0:_5e;
}
}),new objj_method(sel_getUid("setFloatValue:"),function(_5f,_60,_61){
with(_5f){
objj_msgSend(_5f,"setObjectValue:",_61);
}
}),new objj_method(sel_getUid("doubleValue"),function(_62,_63){
with(_62){
var _64=parseFloat(_value,10);
return isNaN(_64)?0:_64;
}
}),new objj_method(sel_getUid("setDoubleValue:"),function(_65,_66,_67){
with(_65){
objj_msgSend(_65,"setObjectValue:",_67);
}
}),new objj_method(sel_getUid("intValue"),function(_68,_69){
with(_68){
var _6a=parseInt(_value,10);
return isNaN(_6a)?0:_6a;
}
}),new objj_method(sel_getUid("setIntValue:"),function(_6b,_6c,_6d){
with(_6b){
objj_msgSend(_6b,"setObjectValue:",_6d);
}
}),new objj_method(sel_getUid("integerValue"),function(_6e,_6f){
with(_6e){
var _70=parseInt(_value,10);
return isNaN(_70)?0:_70;
}
}),new objj_method(sel_getUid("setIntegerValue:"),function(_71,_72,_73){
with(_71){
objj_msgSend(_71,"setObjectValue:",_73);
}
}),new objj_method(sel_getUid("stringValue"),function(_74,_75){
with(_74){
return (_value===undefined||_value===nil)?"":String(_value);
}
}),new objj_method(sel_getUid("setStringValue:"),function(_76,_77,_78){
with(_76){
objj_msgSend(_76,"setObjectValue:",_78);
}
}),new objj_method(sel_getUid("takeDoubleValueFrom:"),function(_79,_7a,_7b){
with(_79){
if(objj_msgSend(_7b,"respondsToSelector:",sel_getUid("doubleValue"))){
objj_msgSend(_79,"setDoubleValue:",objj_msgSend(_7b,"doubleValue"));
}
}
}),new objj_method(sel_getUid("takeFloatValueFrom:"),function(_7c,_7d,_7e){
with(_7c){
if(objj_msgSend(_7e,"respondsToSelector:",sel_getUid("floatValue"))){
objj_msgSend(_7c,"setFloatValue:",objj_msgSend(_7e,"floatValue"));
}
}
}),new objj_method(sel_getUid("takeIntegerValueFrom:"),function(_7f,_80,_81){
with(_7f){
if(objj_msgSend(_81,"respondsToSelector:",sel_getUid("integerValue"))){
objj_msgSend(_7f,"setIntegerValue:",objj_msgSend(_81,"integerValue"));
}
}
}),new objj_method(sel_getUid("takeIntValueFrom:"),function(_82,_83,_84){
with(_82){
if(objj_msgSend(_84,"respondsToSelector:",sel_getUid("intValue"))){
objj_msgSend(_82,"setIntValue:",objj_msgSend(_84,"intValue"));
}
}
}),new objj_method(sel_getUid("takeObjectValueFrom:"),function(_85,_86,_87){
with(_85){
if(objj_msgSend(_87,"respondsToSelector:",sel_getUid("objectValue"))){
objj_msgSend(_85,"setObjectValue:",objj_msgSend(_87,"objectValue"));
}
}
}),new objj_method(sel_getUid("takeStringValueFrom:"),function(_88,_89,_8a){
with(_88){
if(objj_msgSend(_8a,"respondsToSelector:",sel_getUid("stringValue"))){
objj_msgSend(_88,"setStringValue:",objj_msgSend(_8a,"stringValue"));
}
}
}),new objj_method(sel_getUid("textDidBeginEditing:"),function(_8b,_8c,_8d){
with(_8b){
if(objj_msgSend(_8d,"object")!=_8b){
return;
}
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:userInfo:",CPControlTextDidBeginEditingNotification,_8b,objj_msgSend(CPDictionary,"dictionaryWithObject:forKey:",objj_msgSend(_8d,"object"),"CPFieldEditor"));
}
}),new objj_method(sel_getUid("textDidChange:"),function(_8e,_8f,_90){
with(_8e){
if(objj_msgSend(_90,"object")!=_8e){
return;
}
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:userInfo:",CPControlTextDidChangeNotification,_8e,objj_msgSend(CPDictionary,"dictionaryWithObject:forKey:",objj_msgSend(_90,"object"),"CPFieldEditor"));
}
}),new objj_method(sel_getUid("textDidEndEditing:"),function(_91,_92,_93){
with(_91){
if(objj_msgSend(_93,"object")!=_91){
return;
}
objj_msgSend(_91,"_reverseSetBinding");
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:userInfo:",CPControlTextDidEndEditingNotification,_91,objj_msgSend(CPDictionary,"dictionaryWithObject:forKey:",objj_msgSend(_93,"object"),"CPFieldEditor"));
}
}),new objj_method(sel_getUid("setAlignment:"),function(_94,_95,_96){
with(_94){
objj_msgSend(_94,"setValue:forThemeAttribute:",_96,"alignment");
}
}),new objj_method(sel_getUid("alignment"),function(_97,_98){
with(_97){
return objj_msgSend(_97,"valueForThemeAttribute:","alignment");
}
}),new objj_method(sel_getUid("setVerticalAlignment:"),function(_99,_9a,_9b){
with(_99){
objj_msgSend(_99,"setValue:forThemeAttribute:",_9b,"vertical-alignment");
}
}),new objj_method(sel_getUid("verticalAlignment"),function(_9c,_9d){
with(_9c){
return objj_msgSend(_9c,"valueForThemeAttribute:","vertical-alignment");
}
}),new objj_method(sel_getUid("setLineBreakMode:"),function(_9e,_9f,_a0){
with(_9e){
objj_msgSend(_9e,"setValue:forThemeAttribute:",_a0,"line-break-mode");
}
}),new objj_method(sel_getUid("lineBreakMode"),function(_a1,_a2){
with(_a1){
return objj_msgSend(_a1,"valueForThemeAttribute:","line-break-mode");
}
}),new objj_method(sel_getUid("setTextColor:"),function(_a3,_a4,_a5){
with(_a3){
objj_msgSend(_a3,"setValue:forThemeAttribute:",_a5,"text-color");
}
}),new objj_method(sel_getUid("textColor"),function(_a6,_a7){
with(_a6){
return objj_msgSend(_a6,"valueForThemeAttribute:","text-color");
}
}),new objj_method(sel_getUid("setTextShadowColor:"),function(_a8,_a9,_aa){
with(_a8){
objj_msgSend(_a8,"setValue:forThemeAttribute:",_aa,"text-shadow-color");
}
}),new objj_method(sel_getUid("textShadowColor"),function(_ab,_ac){
with(_ab){
return objj_msgSend(_ab,"valueForThemeAttribute:","text-shadow-color");
}
}),new objj_method(sel_getUid("setTextShadowOffset:"),function(_ad,_ae,_af){
with(_ad){
objj_msgSend(_ad,"setValue:forThemeAttribute:",_af,"text-shadow-offset");
}
}),new objj_method(sel_getUid("textShadowOffset"),function(_b0,_b1){
with(_b0){
return objj_msgSend(_b0,"valueForThemeAttribute:","text-shadow-offset");
}
}),new objj_method(sel_getUid("setFont:"),function(_b2,_b3,_b4){
with(_b2){
objj_msgSend(_b2,"setValue:forThemeAttribute:",_b4,"font");
}
}),new objj_method(sel_getUid("font"),function(_b5,_b6){
with(_b5){
return objj_msgSend(_b5,"valueForThemeAttribute:","font");
}
}),new objj_method(sel_getUid("setImagePosition:"),function(_b7,_b8,_b9){
with(_b7){
objj_msgSend(_b7,"setValue:forThemeAttribute:",_b9,"image-position");
}
}),new objj_method(sel_getUid("imagePosition"),function(_ba,_bb){
with(_ba){
return objj_msgSend(_ba,"valueForThemeAttribute:","image-position");
}
}),new objj_method(sel_getUid("setImageScaling:"),function(_bc,_bd,_be){
with(_bc){
objj_msgSend(_bc,"setValue:forThemeAttribute:",_be,"image-scaling");
}
}),new objj_method(sel_getUid("imageScaling"),function(_bf,_c0){
with(_bf){
return objj_msgSend(_bf,"valueForThemeAttribute:","image-scaling");
}
}),new objj_method(sel_getUid("setEnabled:"),function(_c1,_c2,_c3){
with(_c1){
if(_c3){
objj_msgSend(_c1,"unsetThemeState:",CPThemeStateDisabled);
}else{
objj_msgSend(_c1,"setThemeState:",CPThemeStateDisabled);
}
}
}),new objj_method(sel_getUid("isEnabled"),function(_c4,_c5){
with(_c4){
return !objj_msgSend(_c4,"hasThemeState:",CPThemeStateDisabled);
}
}),new objj_method(sel_getUid("highlight:"),function(_c6,_c7,_c8){
with(_c6){
objj_msgSend(_c6,"setHighlighted:",_c8);
}
}),new objj_method(sel_getUid("setHighlighted:"),function(_c9,_ca,_cb){
with(_c9){
if(_cb){
objj_msgSend(_c9,"setThemeState:",CPThemeStateHighlighted);
}else{
objj_msgSend(_c9,"unsetThemeState:",CPThemeStateHighlighted);
}
}
}),new objj_method(sel_getUid("isHighlighted"),function(_cc,_cd){
with(_cc){
return objj_msgSend(_cc,"hasThemeState:",CPThemeStateHighlighted);
}
})]);
class_addMethods(_3,[new objj_method(sel_getUid("themeAttributes"),function(_ce,_cf){
with(_ce){
return objj_msgSend(CPDictionary,"dictionaryWithObjects:forKeys:",[CPLeftTextAlignment,CPTopVerticalTextAlignment,CPLineBreakByClipping,objj_msgSend(CPColor,"blackColor"),objj_msgSend(CPFont,"systemFontOfSize:",12),objj_msgSend(CPNull,"null"),{width:0,height:0},CPImageLeft,CPScaleToFit,{width:0,height:0},{width:-1,height:-1}],["alignment","vertical-alignment","line-break-mode","text-color","font","text-shadow-color","text-shadow-offset","image-position","image-scaling","min-size","max-size"]);
}
}),new objj_method(sel_getUid("initialize"),function(_d0,_d1){
with(_d0){
if(_d0===objj_msgSend(CPControl,"class")){
objj_msgSend(_d0,"exposeBinding:","value");
objj_msgSend(_d0,"exposeBinding:","objectValue");
objj_msgSend(_d0,"exposeBinding:","stringValue");
objj_msgSend(_d0,"exposeBinding:","integerValue");
objj_msgSend(_d0,"exposeBinding:","intValue");
objj_msgSend(_d0,"exposeBinding:","doubleValue");
objj_msgSend(_d0,"exposeBinding:","floatValue");
objj_msgSend(_d0,"exposeBinding:","enabled");
}
}
}),new objj_method(sel_getUid("_binderClassForBinding:"),function(_d2,_d3,_d4){
with(_d2){
if(_d4===CPValueBinding){
return objj_msgSend(_CPValueBinder,"class");
}
return objj_msgSendSuper({receiver:_d2,super_class:objj_getMetaClass("CPControl").super_class},"_binderClassForBinding:",_d4);
}
})]);
var _d5="CPControlValueKey",_d6="CPControlControlStateKey",_d7="CPControlIsEnabledKey",_d8="CPControlTargetKey",_d9="CPControlActionKey",_da="CPControlSendActionOnKey",_db="CPControlSendsActionOnEndEditingKey";
var _dc="CPImageViewImageKey";
var _2=objj_getClass("CPControl");
if(!_2){
throw new SyntaxError("*** Could not find definition for class \"CPControl\"");
}
var _3=_2.isa;
class_addMethods(_2,[new objj_method(sel_getUid("initWithCoder:"),function(_dd,_de,_df){
with(_dd){
_dd=objj_msgSendSuper({receiver:_dd,super_class:objj_getClass("CPControl").super_class},"initWithCoder:",_df);
if(_dd){
objj_msgSend(_dd,"setObjectValue:",objj_msgSend(_df,"decodeObjectForKey:",_d5));
objj_msgSend(_dd,"setTarget:",objj_msgSend(_df,"decodeObjectForKey:",_d8));
objj_msgSend(_dd,"setAction:",objj_msgSend(_df,"decodeObjectForKey:",_d9));
objj_msgSend(_dd,"sendActionOn:",objj_msgSend(_df,"decodeIntForKey:",_da));
objj_msgSend(_dd,"setSendsActionOnEndEditing:",objj_msgSend(_df,"decodeBoolForKey:",_db));
}
return _dd;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_e0,_e1,_e2){
with(_e0){
objj_msgSendSuper({receiver:_e0,super_class:objj_getClass("CPControl").super_class},"encodeWithCoder:",_e2);
if(_sendsActionOnEndEditing){
objj_msgSend(_e2,"encodeBool:forKey:",_sendsActionOnEndEditing,_db);
}
var _e3=objj_msgSend(_e0,"objectValue");
if(_e3!==nil){
objj_msgSend(_e2,"encodeObject:forKey:",_e3,_d5);
}
if(_target!==nil){
objj_msgSend(_e2,"encodeConditionalObject:forKey:",_target,_d8);
}
if(_action!==NULL){
objj_msgSend(_e2,"encodeObject:forKey:",_action,_d9);
}
objj_msgSend(_e2,"encodeInt:forKey:",_sendActionOn,_da);
}
})]);
var _e4=[],_e5={},_e6={};
_e4[CPRegularControlSize]="Regular";
_e4[CPSmallControlSize]="Small";
_e4[CPMiniControlSize]="Mini";
_CPControlIdentifierForControlSize=function(_e7){
return _e4[_e7];
};
_CPControlColorWithPatternImage=function(_e8,_e9){
var _ea=1,_eb=arguments.length,_ec="";
for(;_ea<_eb;++_ea){
_ec+=arguments[_ea];
}
var _ed=_e5[_ec];
if(!_ed){
var _ee=objj_msgSend(CPBundle,"bundleForClass:",objj_msgSend(CPControl,"class"));
_ed=objj_msgSend(CPColor,"colorWithPatternImage:",objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_ee,"pathForResource:",_e9+"/"+_ec+".png"),_e8[_ec]));
_e5[_ec]=_ed;
}
return _ed;
};
_CPControlThreePartImagePattern=function(_ef,_f0,_f1){
var _f2=2,_f3=arguments.length,_f4="";
for(;_f2<_f3;++_f2){
_f4+=arguments[_f2];
}
var _f5=_e6[_f4];
if(!_f5){
var _f6=objj_msgSend(CPBundle,"bundleForClass:",objj_msgSend(CPControl,"class")),_f7=_f1+"/"+_f4;
_f0=_f0[_f4];
_f5=objj_msgSend(CPColor,"colorWithPatternImage:",objj_msgSend(objj_msgSend(CPThreePartImage,"alloc"),"initWithImageSlices:isVertical:",[objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_f6,"pathForResource:",_f7+"0.png"),_f0[0]),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_f6,"pathForResource:",_f7+"1.png"),_f0[1]),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_f6,"pathForResource:",_f7+"2.png"),_f0[2])],_ef));
_e6[_f4]=_f5;
}
return _f5;
};
p;14;CPController.jt;1779;@STATIC;1.0;I;21;Foundation/CPObject.jt;1734;
objj_executeFile("Foundation/CPObject.j",NO);
var _1="CPControllerDeclaredKeysKey";
var _2=objj_allocateClassPair(CPObject,"CPController"),_3=_2.isa;
class_addIvars(_2,[new objj_ivar("_editors"),new objj_ivar("_declaredKeys")]);
objj_registerClassPair(_2);
class_addMethods(_2,[new objj_method(sel_getUid("init"),function(_4,_5){
with(_4){
_4=objj_msgSendSuper({receiver:_4,super_class:objj_getClass("CPController").super_class},"init");
if(_4){
_editors=[];
_declaredKeys=[];
}
return _4;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_6,_7,_8){
with(_6){
if(objj_msgSend(_declaredKeys,"count")>0){
objj_msgSend(_8,"encodeObject:forKey:",_declaredKeys,_1);
}
}
}),new objj_method(sel_getUid("initWithCoder:"),function(_9,_a,_b){
with(_9){
_9=objj_msgSendSuper({receiver:_9,super_class:objj_getClass("CPController").super_class},"init");
if(_9){
_editors=[];
_declaredKeys=objj_msgSend(_b,"decodeObjectForKey:",_1)||[];
}
return nil;
}
}),new objj_method(sel_getUid("isEditing"),function(_c,_d){
with(_c){
return objj_msgSend(_editors,"count")>0;
}
}),new objj_method(sel_getUid("commitEditing"),function(_e,_f){
with(_e){
var _10=0,_11=_editors.length;
for(;_10<_11;++_10){
if(!objj_msgSend(objj_msgSend(_editors,"objectAtIndex:",i),"commitEditing")){
return NO;
}
}
return YES;
}
}),new objj_method(sel_getUid("discardEditing"),function(_12,_13){
with(_12){
objj_msgSend(_editors,"makeObjectsPerformSelector:",sel_getUid("discardEditing"));
}
}),new objj_method(sel_getUid("objectDidBeginEditing:"),function(_14,_15,_16){
with(_14){
objj_msgSend(_editors,"addObject:",_16);
}
}),new objj_method(sel_getUid("objectDidEndEditing:"),function(_17,_18,_19){
with(_17){
objj_msgSend(_editors,"removeObject:",_19);
}
})]);
p;10;CPCookie.jt;1478;@STATIC;1.0;I;21;Foundation/CPObject.jI;21;Foundation/CPString.jt;1407;
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("Foundation/CPString.j",NO);
var _1=objj_allocateClassPair(CPObject,"CPCookie"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_cookieName"),new objj_ivar("_cookieValue"),new objj_ivar("_expires")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("initWithName:"),function(_3,_4,_5){
with(_3){
_3=objj_msgSendSuper({receiver:_3,super_class:objj_getClass("CPCookie").super_class},"init");
_cookieName=_5;
_cookieValue=objj_msgSend(_3,"_readCookieValue");
return _3;
}
}),new objj_method(sel_getUid("value"),function(_6,_7){
with(_6){
return _cookieValue;
}
}),new objj_method(sel_getUid("name"),function(_8,_9){
with(_8){
return _cookieName;
}
}),new objj_method(sel_getUid("expires"),function(_a,_b){
with(_a){
return _expires;
}
}),new objj_method(sel_getUid("setValue:expires:domain:"),function(_c,_d,_e,_f,_10){
with(_c){
if(_f){
var _11="; expires="+_f.toGMTString();
}else{
var _11="";
}
if(_10){
_10="; domain="+_10;
}else{
_10="";
}
document.cookie=_cookieName+"="+_e+_11+"; path=/"+_10;
}
}),new objj_method(sel_getUid("_readCookieValue"),function(_12,_13){
with(_12){
var _14=_cookieName+"=",ca=document.cookie.split(";");
for(var i=0;i<ca.length;i++){
var c=ca[i];
while(c.charAt(0)==" "){
c=c.substring(1,c.length);
}
if(c.indexOf(_14)==0){
return c.substring(_14.length,c.length);
}
}
return "";
}
})]);
p;10;CPCursor.jt;7575;@STATIC;1.0;I;21;Foundation/CPObject.jt;7530;
objj_executeFile("Foundation/CPObject.j",NO);
var _1=nil,_2=[],_3={};
var _4=objj_allocateClassPair(CPObject,"CPCursor"),_5=_4.isa;
class_addIvars(_4,[new objj_ivar("_cssString"),new objj_ivar("_hotSpot"),new objj_ivar("_image"),new objj_ivar("_isSetOnMouseEntered"),new objj_ivar("_isSetOnMouseExited")]);
objj_registerClassPair(_4);
class_addMethods(_4,[new objj_method(sel_getUid("_cssString"),function(_6,_7){
with(_6){
return _cssString;
}
}),new objj_method(sel_getUid("hotSpot"),function(_8,_9){
with(_8){
return _hotSpot;
}
}),new objj_method(sel_getUid("image"),function(_a,_b){
with(_a){
return _image;
}
}),new objj_method(sel_getUid("isSetOnMouseEntered"),function(_c,_d){
with(_c){
return _isSetOnMouseEntered;
}
}),new objj_method(sel_getUid("setOnMouseEntered:"),function(_e,_f,_10){
with(_e){
_isSetOnMouseEntered=_10;
}
}),new objj_method(sel_getUid("isSetOnMouseExited"),function(_11,_12){
with(_11){
return _isSetOnMouseExited;
}
}),new objj_method(sel_getUid("setOnMouseExited:"),function(_13,_14,_15){
with(_13){
_isSetOnMouseExited=_15;
}
}),new objj_method(sel_getUid("initWithCSSString:"),function(_16,_17,_18){
with(_16){
if(_16=objj_msgSendSuper({receiver:_16,super_class:objj_getClass("CPCursor").super_class},"init")){
_cssString=_18;
}
return _16;
}
}),new objj_method(sel_getUid("initWithImage:hotSpot:"),function(_19,_1a,_1b,_1c){
with(_19){
_hotSpot=_1c;
_image=_1b;
return objj_msgSend(_19,"initWithCSSString:","url("+objj_msgSend(_image,"filename")+")"+_1c.x+" "+_1c.y+", auto");
}
}),new objj_method(sel_getUid("initWithImage:foregroundColorHint:backgroundColorHint:hotSpot:"),function(_1d,_1e,_1f,_20,_21,_22){
with(_1d){
return objj_msgSend(_1d,"initWithImage:hotSpot:",_1f,hotSpot);
}
}),new objj_method(sel_getUid("pop"),function(_23,_24){
with(_23){
objj_msgSend(CPCursor,"pop");
}
}),new objj_method(sel_getUid("push"),function(_25,_26){
with(_25){
_1=_2.push(_25);
}
}),new objj_method(sel_getUid("set"),function(_27,_28){
with(_27){
_1=_27;
objj_msgSend(objj_msgSend(_27,"class"),"_setCursorCSS:",_cssString);
}
}),new objj_method(sel_getUid("mouseEntered:"),function(_29,_2a,_2b){
with(_29){
}
}),new objj_method(sel_getUid("mouseExited:"),function(_2c,_2d,_2e){
with(_2c){
}
})]);
class_addMethods(_5,[new objj_method(sel_getUid("hide"),function(_2f,_30){
with(_2f){
objj_msgSend(_2f,"_setCursorCSS:","none");
}
}),new objj_method(sel_getUid("unhide"),function(_31,_32){
with(_31){
objj_msgSend(_31,"_setCursorCSS:",objj_msgSend(_1,"_cssString"));
}
}),new objj_method(sel_getUid("setHiddenUntilMouseMoves:"),function(_33,_34,_35){
with(_33){
if(_35){
objj_msgSend(CPCursor,"hide");
}else{
objj_msgSend(CPCursor,"unhide");
}
}
}),new objj_method(sel_getUid("pop"),function(_36,_37){
with(_36){
if(_2.length>1){
_2.pop();
_1=_2[_2.length-1];
}
}
}),new objj_method(sel_getUid("currentCursor"),function(_38,_39){
with(_38){
return _1;
}
}),new objj_method(sel_getUid("_setCursorCSS:"),function(_3a,_3b,_3c){
with(_3a){
var _3d=objj_msgSend(objj_msgSend(CPPlatformWindow,"visiblePlatformWindows"),"allObjects");
for(var i=0,_3e=objj_msgSend(_3d,"count");i<_3e;i++){
_3d[i]._DOMBodyElement.style.cursor=_3c;
}
}
}),new objj_method(sel_getUid("_systemCursorWithName:cssString:hasImage:"),function(_3f,_40,_41,_42,_43){
with(_3f){
var _44=_3[_41];
if(typeof _44==="undefined"){
var _45;
if(_43){
_45="url("+objj_msgSend(objj_msgSend(CPBundle,"bundleForClass:",_3f),"resourcePath")+"/CPCursor/"+_41+".cur), "+_42;
}else{
_45=_42;
}
_44=objj_msgSend(objj_msgSend(CPCursor,"alloc"),"initWithCSSString:",_45);
_3[_41]=_44;
}
return _44;
}
}),new objj_method(sel_getUid("arrowCursor"),function(_46,_47){
with(_46){
return objj_msgSend(CPCursor,"_systemCursorWithName:cssString:hasImage:",CPStringFromSelector(_47),"default",NO);
}
}),new objj_method(sel_getUid("crosshairCursor"),function(_48,_49){
with(_48){
return objj_msgSend(CPCursor,"_systemCursorWithName:cssString:hasImage:",CPStringFromSelector(_49),"crosshair",NO);
}
}),new objj_method(sel_getUid("IBeamCursor"),function(_4a,_4b){
with(_4a){
return objj_msgSend(CPCursor,"_systemCursorWithName:cssString:hasImage:",CPStringFromSelector(_4b),"text",NO);
}
}),new objj_method(sel_getUid("pointingHandCursor"),function(_4c,_4d){
with(_4c){
return objj_msgSend(CPCursor,"_systemCursorWithName:cssString:hasImage:",CPStringFromSelector(_4d),"pointer",NO);
}
}),new objj_method(sel_getUid("resizeDownCursor"),function(_4e,_4f){
with(_4e){
return objj_msgSend(CPCursor,"_systemCursorWithName:cssString:hasImage:",CPStringFromSelector(_4f),"s-resize",NO);
}
}),new objj_method(sel_getUid("resizeUpCursor"),function(_50,_51){
with(_50){
return objj_msgSend(CPCursor,"_systemCursorWithName:cssString:hasImage:",CPStringFromSelector(_51),"n-resize",NO);
}
}),new objj_method(sel_getUid("resizeLeftCursor"),function(_52,_53){
with(_52){
return objj_msgSend(CPCursor,"_systemCursorWithName:cssString:hasImage:",CPStringFromSelector(_53),"w-resize",NO);
}
}),new objj_method(sel_getUid("resizeRightCursor"),function(_54,_55){
with(_54){
return objj_msgSend(CPCursor,"_systemCursorWithName:cssString:hasImage:",CPStringFromSelector(_55),"e-resize",NO);
}
}),new objj_method(sel_getUid("resizeLeftRightCursor"),function(_56,_57){
with(_56){
return objj_msgSend(CPCursor,"_systemCursorWithName:cssString:hasImage:",CPStringFromSelector(_57),"col-resize",NO);
}
}),new objj_method(sel_getUid("resizeUpDownCursor"),function(_58,_59){
with(_58){
return objj_msgSend(CPCursor,"_systemCursorWithName:cssString:hasImage:",CPStringFromSelector(_59),"row-resize",NO);
}
}),new objj_method(sel_getUid("operationNotAllowedCursor"),function(_5a,_5b){
with(_5a){
return objj_msgSend(CPCursor,"_systemCursorWithName:cssString:hasImage:",CPStringFromSelector(_5b),"not-allowed",NO);
}
}),new objj_method(sel_getUid("dragCopyCursor"),function(_5c,_5d){
with(_5c){
return objj_msgSend(CPCursor,"_systemCursorWithName:cssString:hasImage:",CPStringFromSelector(_5d),"copy",YES);
}
}),new objj_method(sel_getUid("dragLinkCursor"),function(_5e,_5f){
with(_5e){
return objj_msgSend(CPCursor,"_systemCursorWithName:cssString:hasImage:",CPStringFromSelector(_5f),"alias",YES);
}
}),new objj_method(sel_getUid("contextualMenuCursor"),function(_60,_61){
with(_60){
return objj_msgSend(CPCursor,"_systemCursorWithName:cssString:hasImage:",CPStringFromSelector(_61),"context-menu",YES);
}
}),new objj_method(sel_getUid("openHandCursor"),function(_62,_63){
with(_62){
return objj_msgSend(CPCursor,"_systemCursorWithName:cssString:hasImage:",CPStringFromSelector(_63),"move",YES);
}
}),new objj_method(sel_getUid("closedHandCursor"),function(_64,_65){
with(_64){
return objj_msgSend(CPCursor,"_systemCursorWithName:cssString:hasImage:",CPStringFromSelector(_65),"-moz-grabbing",YES);
}
}),new objj_method(sel_getUid("disappearingItemCursor"),function(_66,_67){
with(_66){
return objj_msgSend(CPCursor,"_systemCursorWithName:cssString:hasImage:",CPStringFromSelector(_67),"auto",YES);
}
})]);
var _4=objj_getClass("CPCursor");
if(!_4){
throw new SyntaxError("*** Could not find definition for class \"CPCursor\"");
}
var _5=_4.isa;
class_addMethods(_4,[new objj_method(sel_getUid("initWithCoder:"),function(_68,_69,_6a){
with(_68){
if(_68=objj_msgSendSuper({receiver:_68,super_class:objj_getClass("CPCursor").super_class},"init")){
_cssString=objj_msgSend(_6a,"decodeObjectForKey:","CPCursorNameKey");
}
return _68;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_6b,_6c,_6d){
with(_6b){
objj_msgSend(_6d,"encodeObject:forKey:",_cssString,"CPCursorNameKey");
}
})]);
p;12;CPDocument.jt;18979;@STATIC;1.0;I;21;Foundation/CPString.jI;20;Foundation/CPArray.ji;15;CPApplication.ji;13;CPResponder.ji;13;CPSavePanel.ji;18;CPViewController.ji;20;CPWindowController.jt;18804;
objj_executeFile("Foundation/CPString.j",NO);
objj_executeFile("Foundation/CPArray.j",NO);
objj_executeFile("CPApplication.j",YES);
objj_executeFile("CPResponder.j",YES);
objj_executeFile("CPSavePanel.j",YES);
objj_executeFile("CPViewController.j",YES);
objj_executeFile("CPWindowController.j",YES);
CPSaveOperation=0;
CPSaveAsOperation=1;
CPSaveToOperation=2;
CPAutosaveOperation=3;
CPChangeDone=0;
CPChangeUndone=1;
CPChangeCleared=2;
CPChangeReadOtherContents=3;
CPChangeAutosaved=4;
CPDocumentWillSaveNotification="CPDocumentWillSaveNotification";
CPDocumentDidSaveNotification="CPDocumentDidSaveNotification";
CPDocumentDidFailToSaveNotification="CPDocumentDidFailToSaveNotification";
var _1=0;
var _2=objj_allocateClassPair(CPResponder,"CPDocument"),_3=_2.isa;
class_addIvars(_2,[new objj_ivar("_window"),new objj_ivar("_view"),new objj_ivar("_viewControllersForWindowControllers"),new objj_ivar("_fileURL"),new objj_ivar("_fileType"),new objj_ivar("_windowControllers"),new objj_ivar("_untitledDocumentIndex"),new objj_ivar("_hasUndoManager"),new objj_ivar("_undoManager"),new objj_ivar("_changeCount"),new objj_ivar("_readConnection"),new objj_ivar("_writeRequest"),new objj_ivar("_canCloseAlert")]);
objj_registerClassPair(_2);
class_addMethods(_2,[new objj_method(sel_getUid("init"),function(_4,_5){
with(_4){
_4=objj_msgSendSuper({receiver:_4,super_class:objj_getClass("CPDocument").super_class},"init");
if(_4){
_windowControllers=[];
_viewControllersForWindowControllers=objj_msgSend(CPDictionary,"dictionary");
_hasUndoManager=YES;
_changeCount=0;
objj_msgSend(_4,"setNextResponder:",CPApp);
}
return _4;
}
}),new objj_method(sel_getUid("initWithType:error:"),function(_6,_7,_8,_9){
with(_6){
_6=objj_msgSend(_6,"init");
if(_6){
objj_msgSend(_6,"setFileType:",_8);
}
return _6;
}
}),new objj_method(sel_getUid("initWithContentsOfURL:ofType:delegate:didReadSelector:contextInfo:"),function(_a,_b,_c,_d,_e,_f,_10){
with(_a){
_a=objj_msgSend(_a,"init");
if(_a){
objj_msgSend(_a,"setFileURL:",_c);
objj_msgSend(_a,"setFileType:",_d);
objj_msgSend(_a,"readFromURL:ofType:delegate:didReadSelector:contextInfo:",_c,_d,_e,_f,_10);
}
return _a;
}
}),new objj_method(sel_getUid("initForURL:withContentsOfURL:ofType:delegate:didReadSelector:contextInfo:"),function(_11,_12,_13,_14,_15,_16,_17,_18){
with(_11){
_11=objj_msgSend(_11,"init");
if(_11){
objj_msgSend(_11,"setFileURL:",_13);
objj_msgSend(_11,"setFileType:",_15);
objj_msgSend(_11,"readFromURL:ofType:delegate:didReadSelector:contextInfo:",_14,_15,_16,_17,_18);
}
return _11;
}
}),new objj_method(sel_getUid("dataOfType:error:"),function(_19,_1a,_1b,_1c){
with(_19){
objj_msgSend(CPException,"raise:reason:",CPUnsupportedMethodException,"dataOfType:error: must be overridden by the document subclass.");
}
}),new objj_method(sel_getUid("readFromData:ofType:error:"),function(_1d,_1e,_1f,_20,_21){
with(_1d){
objj_msgSend(CPException,"raise:reason:",CPUnsupportedMethodException,"readFromData:ofType: must be overridden by the document subclass.");
}
}),new objj_method(sel_getUid("viewControllerWillLoadCib:"),function(_22,_23,_24){
with(_22){
}
}),new objj_method(sel_getUid("viewControllerDidLoadCib:"),function(_25,_26,_27){
with(_25){
}
}),new objj_method(sel_getUid("firstEligibleExistingWindowController"),function(_28,_29){
with(_28){
return nil;
}
}),new objj_method(sel_getUid("makeWindowControllers"),function(_2a,_2b){
with(_2a){
objj_msgSend(_2a,"makeViewAndWindowControllers");
}
}),new objj_method(sel_getUid("makeViewAndWindowControllers"),function(_2c,_2d){
with(_2c){
var _2e=objj_msgSend(_2c,"viewCibName"),_2f=nil,_30=nil;
if(objj_msgSend(_2e,"length")){
_2f=objj_msgSend(objj_msgSend(CPViewController,"alloc"),"initWithCibName:bundle:owner:",_2e,nil,_2c);
}
if(_2f){
_30=objj_msgSend(_2c,"firstEligibleExistingWindowController");
}
if(!_30){
var _31=objj_msgSend(_2c,"windowCibName");
if(objj_msgSend(_31,"length")){
_30=objj_msgSend(objj_msgSend(CPWindowController,"alloc"),"initWithWindowCibName:owner:",_31,_2c);
}else{
if(_2f){
var _32=objj_msgSend(_2f,"view"),_33=objj_msgSend(_32,"frame");
_33.origin=CGPointMake(50,50);
var _34=objj_msgSend(objj_msgSend(CPWindow,"alloc"),"initWithContentRect:styleMask:",_33,CPTitledWindowMask|CPClosableWindowMask|CPMiniaturizableWindowMask|CPResizableWindowMask);
_30=objj_msgSend(objj_msgSend(CPWindowController,"alloc"),"initWithWindow:",_34);
}
}
}
if(_30&&_2f){
objj_msgSend(_30,"setSupportsMultipleDocuments:",YES);
}
if(_30){
objj_msgSend(_2c,"addWindowController:",_30);
}
if(_2f){
objj_msgSend(_2c,"addViewController:forWindowController:",_2f,_30);
}
}
}),new objj_method(sel_getUid("windowControllers"),function(_35,_36){
with(_35){
return _windowControllers;
}
}),new objj_method(sel_getUid("addWindowController:"),function(_37,_38,_39){
with(_37){
objj_msgSend(_windowControllers,"addObject:",_39);
if(objj_msgSend(_39,"document")!==_37){
objj_msgSend(_39,"setDocument:",_37);
}
}
}),new objj_method(sel_getUid("removeWindowController:"),function(_3a,_3b,_3c){
with(_3a){
if(_3c){
objj_msgSend(_windowControllers,"removeObject:",_3c);
}
if(objj_msgSend(_3c,"document")===_3a){
objj_msgSend(_3c,"setDocument:",nil);
}
}
}),new objj_method(sel_getUid("view"),function(_3d,_3e){
with(_3d){
return _view;
}
}),new objj_method(sel_getUid("viewControllers"),function(_3f,_40){
with(_3f){
return objj_msgSend(_viewControllersForWindowControllers,"allValues");
}
}),new objj_method(sel_getUid("addViewController:forWindowController:"),function(_41,_42,_43,_44){
with(_41){
objj_msgSend(_viewControllersForWindowControllers,"setObject:forKey:",_43,objj_msgSend(_44,"UID"));
if(objj_msgSend(_44,"document")===_41){
objj_msgSend(_44,"setViewController:",_43);
}
}
}),new objj_method(sel_getUid("removeViewController:"),function(_45,_46,_47){
with(_45){
objj_msgSend(_viewControllersForWindowControllers,"removeObject:",_47);
}
}),new objj_method(sel_getUid("viewControllerForWindowController:"),function(_48,_49,_4a){
with(_48){
return objj_msgSend(_viewControllersForWindowControllers,"objectForKey:",objj_msgSend(_4a,"UID"));
}
}),new objj_method(sel_getUid("showWindows"),function(_4b,_4c){
with(_4b){
objj_msgSend(_windowControllers,"makeObjectsPerformSelector:withObject:",sel_getUid("setDocument:"),_4b);
objj_msgSend(_windowControllers,"makeObjectsPerformSelector:withObject:",sel_getUid("showWindow:"),_4b);
}
}),new objj_method(sel_getUid("displayName"),function(_4d,_4e){
with(_4d){
if(_fileURL){
return objj_msgSend(_fileURL,"lastPathComponent");
}
if(!_untitledDocumentIndex){
_untitledDocumentIndex=++_1;
}
if(_untitledDocumentIndex==1){
return "Untitled";
}
return "Untitled "+_untitledDocumentIndex;
}
}),new objj_method(sel_getUid("viewCibName"),function(_4f,_50){
with(_4f){
return nil;
}
}),new objj_method(sel_getUid("windowCibName"),function(_51,_52){
with(_51){
return nil;
}
}),new objj_method(sel_getUid("windowControllerDidLoadCib:"),function(_53,_54,_55){
with(_53){
}
}),new objj_method(sel_getUid("windowControllerWillLoadCib:"),function(_56,_57,_58){
with(_56){
}
}),new objj_method(sel_getUid("readFromURL:ofType:delegate:didReadSelector:contextInfo:"),function(_59,_5a,_5b,_5c,_5d,_5e,_5f){
with(_59){
objj_msgSend(_readConnection,"cancel");
_readConnection=objj_msgSend(CPURLConnection,"connectionWithRequest:delegate:",objj_msgSend(CPURLRequest,"requestWithURL:",_5b),_59);
_readConnection.session=_60(_5c,_5d,_5e,_5f);
}
}),new objj_method(sel_getUid("fileURL"),function(_61,_62){
with(_61){
return _fileURL;
}
}),new objj_method(sel_getUid("setFileURL:"),function(_63,_64,_65){
with(_63){
if(_fileURL===_65){
return;
}
_fileURL=_65;
objj_msgSend(_windowControllers,"makeObjectsPerformSelector:",sel_getUid("synchronizeWindowTitleWithDocumentName"));
}
}),new objj_method(sel_getUid("saveToURL:ofType:forSaveOperation:delegate:didSaveSelector:contextInfo:"),function(_66,_67,_68,_69,_6a,_6b,_6c,_6d){
with(_66){
var _6e=objj_msgSend(_66,"dataOfType:error:",objj_msgSend(_66,"fileType"),nil),_6f=_changeCount;
_writeRequest=objj_msgSend(CPURLRequest,"requestWithURL:",_68);
if(objj_msgSend(CPPlatform,"isBrowser")){
objj_msgSend(_writeRequest,"setHTTPMethod:","POST");
}else{
objj_msgSend(_writeRequest,"setHTTPMethod:","PUT");
}
objj_msgSend(_writeRequest,"setHTTPBody:",objj_msgSend(_6e,"rawString"));
objj_msgSend(_writeRequest,"setValue:forHTTPHeaderField:","close","Connection");
if(_6a===CPSaveOperation){
objj_msgSend(_writeRequest,"setValue:forHTTPHeaderField:","true","x-cappuccino-overwrite");
}
if(_6a!==CPSaveToOperation){
objj_msgSend(_66,"updateChangeCount:",CPChangeCleared);
}
var _70=objj_msgSend(CPURLConnection,"connectionWithRequest:delegate:",_writeRequest,_66);
_70.session=_71(_68,_6a,_6f,_6b,_6c,_6d,_70);
}
}),new objj_method(sel_getUid("connection:didReceiveResponse:"),function(_72,_73,_74,_75){
with(_72){
if(!objj_msgSend(_75,"isKindOfClass:",objj_msgSend(CPHTTPURLResponse,"class"))){
return;
}
var _76=objj_msgSend(_75,"statusCode");
if(_76===200){
return;
}
var _77=_74.session;
if(_74==_readConnection){
objj_msgSend(_74,"cancel");
alert("There was an error retrieving the document.");
objj_msgSend(_77.delegate,_77.didReadSelector,_72,NO,_77.contextInfo);
}else{
if(_76==409){
objj_msgSend(_74,"cancel");
if(confirm("There already exists a file with that name, would you like to overwrite it?")){
objj_msgSend(_writeRequest,"setValue:forHTTPHeaderField:","true","x-cappuccino-overwrite");
objj_msgSend(_74,"start");
}else{
if(_77.saveOperation!=CPSaveToOperation){
_changeCount+=_77.changeCount;
objj_msgSend(_windowControllers,"makeObjectsPerformSelector:withObject:",sel_getUid("setDocumentEdited:"),objj_msgSend(_72,"isDocumentEdited"));
}
_writeRequest=nil;
objj_msgSend(_77.delegate,_77.didSaveSelector,_72,NO,_77.contextInfo);
objj_msgSend(_72,"_sendDocumentSavedNotification:",NO);
}
}
}
}
}),new objj_method(sel_getUid("connection:didReceiveData:"),function(_78,_79,_7a,_7b){
with(_78){
var _7c=_7a.session;
if(_7a==_readConnection){
objj_msgSend(_78,"readFromData:ofType:error:",objj_msgSend(CPData,"dataWithRawString:",_7b),_7c.fileType,nil);
objj_msgSend(_7c.delegate,_7c.didReadSelector,_78,YES,_7c.contextInfo);
}else{
if(_7c.saveOperation!=CPSaveToOperation){
objj_msgSend(_78,"setFileURL:",_7c.absoluteURL);
}
_writeRequest=nil;
objj_msgSend(_7c.delegate,_7c.didSaveSelector,_78,YES,_7c.contextInfo);
objj_msgSend(_78,"_sendDocumentSavedNotification:",YES);
}
}
}),new objj_method(sel_getUid("connection:didFailWithError:"),function(_7d,_7e,_7f,_80){
with(_7d){
var _81=_7f.session;
if(_readConnection==_7f){
objj_msgSend(_81.delegate,_81.didReadSelector,_7d,NO,_81.contextInfo);
}else{
if(_81.saveOperation!=CPSaveToOperation){
_changeCount+=_81.changeCount;
objj_msgSend(_windowControllers,"makeObjectsPerformSelector:withObject:",sel_getUid("setDocumentEdited:"),objj_msgSend(_7d,"isDocumentEdited"));
}
_writeRequest=nil;
alert("There was an error saving the document.");
objj_msgSend(_81.delegate,_81.didSaveSelector,_7d,NO,_81.contextInfo);
objj_msgSend(_7d,"_sendDocumentSavedNotification:",NO);
}
}
}),new objj_method(sel_getUid("connectionDidFinishLoading:"),function(_82,_83,_84){
with(_82){
if(_readConnection==_84){
_readConnection=nil;
}
}
}),new objj_method(sel_getUid("isDocumentEdited"),function(_85,_86){
with(_85){
return _changeCount!=0;
}
}),new objj_method(sel_getUid("updateChangeCount:"),function(_87,_88,_89){
with(_87){
if(_89==CPChangeDone){
++_changeCount;
}else{
if(_89==CPChangeUndone){
--_changeCount;
}else{
if(_89==CPChangeCleared){
_changeCount=0;
}
}
}
objj_msgSend(_windowControllers,"makeObjectsPerformSelector:withObject:",sel_getUid("setDocumentEdited:"),objj_msgSend(_87,"isDocumentEdited"));
}
}),new objj_method(sel_getUid("setFileType:"),function(_8a,_8b,_8c){
with(_8a){
_fileType=_8c;
}
}),new objj_method(sel_getUid("fileType"),function(_8d,_8e){
with(_8d){
return _fileType;
}
}),new objj_method(sel_getUid("hasUndoManager"),function(_8f,_90){
with(_8f){
return _hasUndoManager;
}
}),new objj_method(sel_getUid("setHasUndoManager:"),function(_91,_92,_93){
with(_91){
if(_hasUndoManager==_93){
return;
}
_hasUndoManager=_93;
if(!_hasUndoManager){
objj_msgSend(_91,"setUndoManager:",nil);
}
}
}),new objj_method(sel_getUid("_undoManagerWillCloseGroup:"),function(_94,_95,_96){
with(_94){
var _97=objj_msgSend(_96,"object");
if(objj_msgSend(_97,"isUndoing")||objj_msgSend(_97,"isRedoing")){
return;
}
objj_msgSend(_94,"updateChangeCount:",CPChangeDone);
}
}),new objj_method(sel_getUid("_undoManagerDidUndoChange:"),function(_98,_99,_9a){
with(_98){
objj_msgSend(_98,"updateChangeCount:",CPChangeUndone);
}
}),new objj_method(sel_getUid("_undoManagerDidRedoChange:"),function(_9b,_9c,_9d){
with(_9b){
objj_msgSend(_9b,"updateChangeCount:",CPChangeDone);
}
}),new objj_method(sel_getUid("setUndoManager:"),function(_9e,_9f,_a0){
with(_9e){
var _a1=objj_msgSend(CPNotificationCenter,"defaultCenter");
if(_undoManager){
objj_msgSend(_a1,"removeObserver:name:object:",_9e,CPUndoManagerDidUndoChangeNotification,_undoManager);
objj_msgSend(_a1,"removeObserver:name:object:",_9e,CPUndoManagerDidRedoChangeNotification,_undoManager);
objj_msgSend(_a1,"removeObserver:name:object:",_9e,CPUndoManagerWillCloseUndoGroupNotification,_undoManager);
}
_undoManager=_a0;
if(_undoManager){
objj_msgSend(_a1,"addObserver:selector:name:object:",_9e,sel_getUid("_undoManagerDidUndoChange:"),CPUndoManagerDidUndoChangeNotification,_undoManager);
objj_msgSend(_a1,"addObserver:selector:name:object:",_9e,sel_getUid("_undoManagerDidRedoChange:"),CPUndoManagerDidRedoChangeNotification,_undoManager);
objj_msgSend(_a1,"addObserver:selector:name:object:",_9e,sel_getUid("_undoManagerWillCloseGroup:"),CPUndoManagerWillCloseUndoGroupNotification,_undoManager);
}
}
}),new objj_method(sel_getUid("undoManager"),function(_a2,_a3){
with(_a2){
if(_hasUndoManager&&!_undoManager){
objj_msgSend(_a2,"setUndoManager:",objj_msgSend(objj_msgSend(CPUndoManager,"alloc"),"init"));
}
return _undoManager;
}
}),new objj_method(sel_getUid("windowWillReturnUndoManager:"),function(_a4,_a5,_a6){
with(_a4){
return objj_msgSend(_a4,"undoManager");
}
}),new objj_method(sel_getUid("saveDocument:"),function(_a7,_a8,_a9){
with(_a7){
objj_msgSend(_a7,"saveDocumentWithDelegate:didSaveSelector:contextInfo:",nil,nil,nil);
}
}),new objj_method(sel_getUid("saveDocumentWithDelegate:didSaveSelector:contextInfo:"),function(_aa,_ab,_ac,_ad,_ae){
with(_aa){
if(_fileURL){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:",CPDocumentWillSaveNotification,_aa);
objj_msgSend(_aa,"saveToURL:ofType:forSaveOperation:delegate:didSaveSelector:contextInfo:",_fileURL,objj_msgSend(_aa,"fileType"),CPSaveOperation,_ac,_ad,_ae);
}else{
objj_msgSend(_aa,"_saveDocumentAsWithDelegate:didSaveSelector:contextInfo:",_ac,_ad,_ae);
}
}
}),new objj_method(sel_getUid("saveDocumentAs:"),function(_af,_b0,_b1){
with(_af){
objj_msgSend(_af,"_saveDocumentAsWithDelegate:didSaveSelector:contextInfo:",nil,nil,nil);
}
}),new objj_method(sel_getUid("_saveDocumentAsWithDelegate:didSaveSelector:contextInfo:"),function(_b2,_b3,_b4,_b5,_b6){
with(_b2){
var _b7=objj_msgSend(CPSavePanel,"savePanel"),_b8=objj_msgSend(_b7,"runModal");
if(!_b8){
return;
}
var _b9=objj_msgSend(_b7,"URL");
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:",CPDocumentWillSaveNotification,_b2);
objj_msgSend(_b2,"saveToURL:ofType:forSaveOperation:delegate:didSaveSelector:contextInfo:",_b9,objj_msgSend(_b2,"fileType"),CPSaveAsOperation,_b4,_b5,_b6);
}
}),new objj_method(sel_getUid("_sendDocumentSavedNotification:"),function(_ba,_bb,_bc){
with(_ba){
if(_bc){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:",CPDocumentDidSaveNotification,_ba);
}else{
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:",CPDocumentDidFailToSaveNotification,_ba);
}
}
})]);
var _2=objj_getClass("CPDocument");
if(!_2){
throw new SyntaxError("*** Could not find definition for class \"CPDocument\"");
}
var _3=_2.isa;
class_addMethods(_2,[new objj_method(sel_getUid("close"),function(_bd,_be){
with(_bd){
objj_msgSend(_windowControllers,"makeObjectsPerformSelector:withObject:",sel_getUid("removeDocumentAndCloseIfNecessary:"),_bd);
objj_msgSend(objj_msgSend(CPDocumentController,"sharedDocumentController"),"removeDocument:",_bd);
}
}),new objj_method(sel_getUid("shouldCloseWindowController:delegate:shouldCloseSelector:contextInfo:"),function(_bf,_c0,_c1,_c2,_c3,_c4){
with(_bf){
if(objj_msgSend(_c1,"shouldCloseDocument")||(objj_msgSend(_windowControllers,"count")<2&&objj_msgSend(_windowControllers,"indexOfObject:",_c1)!==CPNotFound)){
objj_msgSend(_bf,"canCloseDocumentWithDelegate:shouldCloseSelector:contextInfo:",_bf,sel_getUid("_document:shouldClose:context:"),{delegate:_c2,selector:_c3,context:_c4});
}else{
if(objj_msgSend(_c2,"respondsToSelector:",_c3)){
objj_msgSend(_c2,_c3,_bf,YES,_c4);
}
}
}
}),new objj_method(sel_getUid("_document:shouldClose:context:"),function(_c5,_c6,_c7,_c8,_c9){
with(_c5){
if(_c7===_c5&&_c8){
objj_msgSend(_c5,"close");
}
objj_msgSend(_c9.delegate,_c9.selector,_c7,_c8,_c9.context);
}
}),new objj_method(sel_getUid("canCloseDocumentWithDelegate:shouldCloseSelector:contextInfo:"),function(_ca,_cb,_cc,_cd,_ce){
with(_ca){
if(!objj_msgSend(_ca,"isDocumentEdited")){
return objj_msgSend(_cc,"respondsToSelector:",_cd)&&objj_msgSend(_cc,_cd,_ca,YES,_ce);
}
_canCloseAlert=objj_msgSend(objj_msgSend(CPAlert,"alloc"),"init");
objj_msgSend(_canCloseAlert,"setDelegate:",_ca);
objj_msgSend(_canCloseAlert,"setAlertStyle:",CPWarningAlertStyle);
objj_msgSend(_canCloseAlert,"setTitle:","Unsaved Document");
objj_msgSend(_canCloseAlert,"setMessageText:","Do you want to save the changes you've made to the document \""+(objj_msgSend(_ca,"displayName")||objj_msgSend(_ca,"fileName"))+"\"?");
objj_msgSend(_canCloseAlert,"addButtonWithTitle:","Save");
objj_msgSend(_canCloseAlert,"addButtonWithTitle:","Cancel");
objj_msgSend(_canCloseAlert,"addButtonWithTitle:","Don't Save");
_canCloseAlert._context={delegate:_cc,selector:_cd,context:_ce};
objj_msgSend(_canCloseAlert,"runModal");
}
}),new objj_method(sel_getUid("alertDidEnd:returnCode:"),function(_cf,_d0,_d1,_d2){
with(_cf){
if(_d1!==_canCloseAlert){
return;
}
var _d3=_d1._context.delegate,_d4=_d1._context.selector,_d5=_d1._context.context;
if(_d2===0){
objj_msgSend(_cf,"saveDocumentWithDelegate:didSaveSelector:contextInfo:",_d3,_d4,_d5);
}else{
objj_msgSend(_d3,_d4,_cf,_d2===2,_d5);
}
_canCloseAlert=nil;
}
})]);
var _60=function(_d6,_d7,_d8,_d9){
return {fileType:_d6,delegate:_d7,didReadSelector:_d8,contextInfo:_d9};
};
var _71=function(_da,_db,_dc,_dd,_de,_df,_e0){
return {absoluteURL:_da,saveOperation:_db,changeCount:_dc,delegate:_dd,didSaveSelector:_de,contextInfo:_df,connection:_e0};
};
p;22;CPDocumentController.jt;9752;@STATIC;1.0;I;21;Foundation/CPObject.jI;21;Foundation/CPBundle.ji;12;CPDocument.ji;13;CPOpenPanel.jt;9646;
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("Foundation/CPBundle.j",NO);
objj_executeFile("CPDocument.j",YES);
objj_executeFile("CPOpenPanel.j",YES);
var _1=nil;
var _2=objj_allocateClassPair(CPObject,"CPDocumentController"),_3=_2.isa;
class_addIvars(_2,[new objj_ivar("_documents"),new objj_ivar("_documentTypes")]);
objj_registerClassPair(_2);
class_addMethods(_2,[new objj_method(sel_getUid("init"),function(_4,_5){
with(_4){
_4=objj_msgSendSuper({receiver:_4,super_class:objj_getClass("CPDocumentController").super_class},"init");
if(_4){
_documents=objj_msgSend(objj_msgSend(CPArray,"alloc"),"init");
if(!_1){
_1=_4;
}
_documentTypes=objj_msgSend(objj_msgSend(objj_msgSend(CPBundle,"mainBundle"),"infoDictionary"),"objectForKey:","CPBundleDocumentTypes");
}
return _4;
}
}),new objj_method(sel_getUid("documentForURL:"),function(_6,_7,_8){
with(_6){
var _9=0,_a=objj_msgSend(_documents,"count");
for(;_9<_a;++_9){
var _b=_documents[_9];
if(objj_msgSend(objj_msgSend(_b,"fileURL"),"isEqual:",_8)){
return _b;
}
}
return nil;
}
}),new objj_method(sel_getUid("openUntitledDocumentOfType:display:"),function(_c,_d,_e,_f){
with(_c){
var _10=objj_msgSend(_c,"makeUntitledDocumentOfType:error:",_e,nil);
if(_10){
objj_msgSend(_c,"addDocument:",_10);
}
if(_f){
objj_msgSend(_10,"makeWindowControllers");
objj_msgSend(_10,"showWindows");
}
return _10;
}
}),new objj_method(sel_getUid("makeUntitledDocumentOfType:error:"),function(_11,_12,_13,_14){
with(_11){
return objj_msgSend(objj_msgSend(objj_msgSend(_11,"documentClassForType:",_13),"alloc"),"initWithType:error:",_13,_14);
}
}),new objj_method(sel_getUid("openDocumentWithContentsOfURL:display:error:"),function(_15,_16,_17,_18,_19){
with(_15){
var _1a=objj_msgSend(_15,"documentForURL:",_17);
if(!_1a){
var _1b=objj_msgSend(_15,"typeForContentsOfURL:error:",_17,_19);
_1a=objj_msgSend(_15,"makeDocumentWithContentsOfURL:ofType:delegate:didReadSelector:contextInfo:",_17,_1b,_15,sel_getUid("document:didRead:contextInfo:"),objj_msgSend(CPDictionary,"dictionaryWithObject:forKey:",_18,"shouldDisplay"));
objj_msgSend(_15,"addDocument:",_1a);
if(_1a){
objj_msgSend(_15,"noteNewRecentDocument:",_1a);
}
}else{
if(_18){
objj_msgSend(_1a,"showWindows");
}
}
return _1a;
}
}),new objj_method(sel_getUid("reopenDocumentForURL:withContentsOfURL:error:"),function(_1c,_1d,_1e,_1f,_20){
with(_1c){
return objj_msgSend(_1c,"makeDocumentForURL:withContentsOfURL:ofType:delegate:didReadSelector:contextInfo:",_1e,_1f,objj_msgSend(objj_msgSend(_documentTypes,"objectAtIndex:",0),"objectForKey:","CPBundleTypeName"),_1c,sel_getUid("document:didRead:contextInfo:"),nil);
}
}),new objj_method(sel_getUid("makeDocumentWithContentsOfURL:ofType:delegate:didReadSelector:contextInfo:"),function(_21,_22,_23,_24,_25,_26,_27){
with(_21){
return objj_msgSend(objj_msgSend(objj_msgSend(_21,"documentClassForType:",_24),"alloc"),"initWithContentsOfURL:ofType:delegate:didReadSelector:contextInfo:",_23,_24,_25,_26,_27);
}
}),new objj_method(sel_getUid("makeDocumentForURL:withContentsOfURL:ofType:delegate:didReadSelector:contextInfo:"),function(_28,_29,_2a,_2b,_2c,_2d,_2e,_2f){
with(_28){
return objj_msgSend(objj_msgSend(objj_msgSend(_28,"documentClassForType:",_2c),"alloc"),"initForURL:withContentsOfURL:ofType:delegate:didReadSelector:contextInfo:",_2a,_2b,_2c,_2d,_2e,_2f);
}
}),new objj_method(sel_getUid("document:didRead:contextInfo:"),function(_30,_31,_32,_33,_34){
with(_30){
if(!_33){
return;
}
objj_msgSend(_32,"makeWindowControllers");
if(objj_msgSend(_34,"objectForKey:","shouldDisplay")){
objj_msgSend(_32,"showWindows");
}
}
}),new objj_method(sel_getUid("newDocument:"),function(_35,_36,_37){
with(_35){
objj_msgSend(_35,"openUntitledDocumentOfType:display:",objj_msgSend(objj_msgSend(_documentTypes,"objectAtIndex:",0),"objectForKey:","CPBundleTypeName"),YES);
}
}),new objj_method(sel_getUid("openDocument:"),function(_38,_39,_3a){
with(_38){
var _3b=objj_msgSend(CPOpenPanel,"openPanel");
objj_msgSend(_3b,"runModal");
var _3c=objj_msgSend(_3b,"URLs"),_3d=0,_3e=objj_msgSend(_3c,"count");
for(;_3d<_3e;++_3d){
objj_msgSend(_38,"openDocumentWithContentsOfURL:display:error:",objj_msgSend(CPURL,"URLWithString:",_3c[_3d]),YES,nil);
}
}
}),new objj_method(sel_getUid("documents"),function(_3f,_40){
with(_3f){
return _documents;
}
}),new objj_method(sel_getUid("addDocument:"),function(_41,_42,_43){
with(_41){
objj_msgSend(_documents,"addObject:",_43);
}
}),new objj_method(sel_getUid("removeDocument:"),function(_44,_45,_46){
with(_44){
objj_msgSend(_documents,"removeObjectIdenticalTo:",_46);
}
}),new objj_method(sel_getUid("defaultType"),function(_47,_48){
with(_47){
return objj_msgSend(_documentTypes[0],"objectForKey:","CPBundleTypeName");
}
}),new objj_method(sel_getUid("typeForContentsOfURL:error:"),function(_49,_4a,_4b,_4c){
with(_49){
var _4d=0,_4e=_documentTypes.length,_4f=objj_msgSend(objj_msgSend(_4b,"pathExtension"),"lowercaseString"),_50=nil;
for(;_4d<_4e;++_4d){
var _51=_documentTypes[_4d],_52=objj_msgSend(_51,"objectForKey:","CFBundleTypeExtensions"),_53=0,_54=_52.length;
for(;_53<_54;++_53){
var _55=objj_msgSend(_52[_53],"lowercaseString");
if(_55===_4f){
return objj_msgSend(_51,"objectForKey:","CPBundleTypeName");
}
if(_55==="****"){
_50=objj_msgSend(_51,"objectForKey:","CPBundleTypeName");
}
}
}
return _50||objj_msgSend(_49,"defaultType");
}
}),new objj_method(sel_getUid("_infoForType:"),function(_56,_57,_58){
with(_56){
var i=0,_59=objj_msgSend(_documentTypes,"count");
for(;i<_59;++i){
var _5a=_documentTypes[i];
if(objj_msgSend(_5a,"objectForKey:","CPBundleTypeName")==_58){
return _5a;
}
}
return nil;
}
}),new objj_method(sel_getUid("documentClassForType:"),function(_5b,_5c,_5d){
with(_5b){
var _5e=objj_msgSend(objj_msgSend(_5b,"_infoForType:",_5d),"objectForKey:","CPDocumentClass");
return _5e?CPClassFromString(_5e):nil;
}
})]);
class_addMethods(_3,[new objj_method(sel_getUid("sharedDocumentController"),function(_5f,_60){
with(_5f){
if(!_1){
objj_msgSend(objj_msgSend(_5f,"alloc"),"init");
}
return _1;
}
})]);
var _2=objj_getClass("CPDocumentController");
if(!_2){
throw new SyntaxError("*** Could not find definition for class \"CPDocumentController\"");
}
var _3=_2.isa;
class_addMethods(_2,[new objj_method(sel_getUid("closeAllDocumentsWithDelegate:didCloseAllSelector:contextInfo:"),function(_61,_62,_63,_64,_65){
with(_61){
var _66={delegate:_63,selector:_64,context:_65};
objj_msgSend(_61,"_closeDocumentsStartingWith:shouldClose:context:",nil,YES,_66);
}
}),new objj_method(sel_getUid("_closeDocumentsStartingWith:shouldClose:context:"),function(_67,_68,_69,_6a,_6b){
with(_67){
if(_6a){
objj_msgSend(_69,"close");
if(objj_msgSend(objj_msgSend(_67,"documents"),"count")>0){
objj_msgSend(objj_msgSend(objj_msgSend(_67,"documents"),"lastObject"),"canCloseDocumentWithDelegate:shouldCloseSelector:contextInfo:",_67,sel_getUid("_closeDocumentsStartingWith:shouldClose:context:"),_6b);
return;
}
}
if(objj_msgSend(_6b.delegate,"respondsToSelector:",_6b.selector)){
objj_msgSend(_6b.delegate,_6b.selector,_67,objj_msgSend(objj_msgSend(_67,"documents"),"count")===0,_6b.context);
}
}
})]);
var _2=objj_getClass("CPDocumentController");
if(!_2){
throw new SyntaxError("*** Could not find definition for class \"CPDocumentController\"");
}
var _3=_2.isa;
class_addMethods(_2,[new objj_method(sel_getUid("recentDocumentURLs"),function(_6c,_6d){
with(_6c){
if(typeof window["cpRecentDocumentURLs"]==="function"){
return window.cpRecentDocumentURLs();
}
return [];
}
}),new objj_method(sel_getUid("clearRecentDocuments:"),function(_6e,_6f,_70){
with(_6e){
if(typeof window["cpClearRecentDocuments"]==="function"){
window.cpClearRecentDocuments();
}
objj_msgSend(_6e,"_updateRecentDocumentsMenu");
}
}),new objj_method(sel_getUid("noteNewRecentDocument:"),function(_71,_72,_73){
with(_71){
objj_msgSend(_71,"noteNewRecentDocumentURL:",objj_msgSend(_73,"fileURL"));
}
}),new objj_method(sel_getUid("noteNewRecentDocumentURL:"),function(_74,_75,_76){
with(_74){
var _77=objj_msgSend(_76,"isKindOfClass:",CPString)?_76:objj_msgSend(_76,"absoluteString");
if(typeof window["cpNoteNewRecentDocumentPath"]==="function"){
window.cpNoteNewRecentDocumentPath(_77);
}
objj_msgSend(_74,"_updateRecentDocumentsMenu");
}
}),new objj_method(sel_getUid("_removeAllRecentDocumentsFromMenu:"),function(_78,_79,_7a){
with(_78){
var _7b=objj_msgSend(_7a,"itemArray"),_7c=objj_msgSend(_7b,"count");
while(_7c--){
var _7d=_7b[_7c];
if(objj_msgSend(_7d,"action")===sel_getUid("_openRecentDocument:")){
objj_msgSend(_7a,"removeItemAtIndex:",_7c);
}
}
}
}),new objj_method(sel_getUid("_updateRecentDocumentsMenu"),function(_7e,_7f){
with(_7e){
var _80=objj_msgSend(objj_msgSend(CPApp,"mainMenu"),"_menuWithName:","_CPRecentDocumentsMenu"),_81=objj_msgSend(_7e,"recentDocumentURLs"),_82=objj_msgSend(_80,"itemArray"),_83=objj_msgSend(_81,"count"),_84=objj_msgSend(_82,"count");
objj_msgSend(_7e,"_removeAllRecentDocumentsFromMenu:",_80);
if(_84){
if(!_83){
if(objj_msgSend(_82[0],"isSeparatorItem")){
objj_msgSend(_80,"removeItemAtIndex:",0);
}
}else{
if(!objj_msgSend(_82[0],"isSeparatorItem")){
objj_msgSend(_80,"insertItem:atIndex:",objj_msgSend(CPMenuItem,"separatorItem"),0);
}
}
}
while(_83--){
var _85=_81[_83],_86=objj_msgSend(objj_msgSend(CPMenuItem,"alloc"),"initWithTitle:action:keyEquivalent:",objj_msgSend(_85,"lastPathComponent"),sel_getUid("_openRecentDocument:"),nil);
objj_msgSend(_86,"setTag:",_85);
objj_msgSend(_80,"insertItem:atIndex:",_86,0);
}
}
}),new objj_method(sel_getUid("_openRecentDocument:"),function(_87,_88,_89){
with(_87){
objj_msgSend(_87,"openDocumentWithContentsOfURL:display:error:",objj_msgSend(_89,"tag"),YES,nil);
}
})]);
p;14;CPDragServer.jt;14951;@STATIC;1.0;i;15;CPApplication.ji;9;CPEvent.ji;13;CPImageView.ji;14;CPPasteboard.ji;8;CPView.ji;10;CPWindow.jt;14834;
objj_executeFile("CPApplication.j",YES);
objj_executeFile("CPEvent.j",YES);
objj_executeFile("CPImageView.j",YES);
objj_executeFile("CPPasteboard.j",YES);
objj_executeFile("CPView.j",YES);
objj_executeFile("CPWindow.j",YES);
CPDragOperationNone=0;
CPDragOperationCopy=1<<1;
CPDragOperationLink=1<<1;
CPDragOperationGeneric=1<<2;
CPDragOperationPrivate=1<<3;
CPDragOperationMove=1<<4;
CPDragOperationDelete=1<<5;
CPDragOperationEvery=-1;
var _1=nil,_2=0.05;
var _3=nil;
var _4=nil,_5=nil;
var _6=objj_allocateClassPair(CPObject,"CPDraggingInfo"),_7=_6.isa;
objj_registerClassPair(_6);
class_addMethods(_6,[new objj_method(sel_getUid("draggingPasteboard"),function(_8,_9){
with(_8){
if(objj_msgSend(CPPlatform,"supportsDragAndDrop")){
return objj_msgSend(_CPDOMDataTransferPasteboard,"DOMDataTransferPasteboard");
}
return objj_msgSend(objj_msgSend(CPDragServer,"sharedDragServer"),"draggingPasteboard");
}
}),new objj_method(sel_getUid("draggingSource"),function(_a,_b){
with(_a){
return objj_msgSend(objj_msgSend(CPDragServer,"sharedDragServer"),"draggingSource");
}
}),new objj_method(sel_getUid("draggingLocation"),function(_c,_d){
with(_c){
return objj_msgSend(objj_msgSend(CPDragServer,"sharedDragServer"),"draggingLocation");
}
}),new objj_method(sel_getUid("draggingDestinationWindow"),function(_e,_f){
with(_e){
return (objj_msgSend(objj_msgSend(objj_msgSend(CPDragServer,"sharedDragServer"),"draggingDestination"),"isKindOfClass:",objj_msgSend(CPWindow,"class"))?objj_msgSend(objj_msgSend(CPDragServer,"sharedDragServer"),"draggingDestination"):objj_msgSend(objj_msgSend(objj_msgSend(CPDragServer,"sharedDragServer"),"draggingDestination"),"window"));
}
}),new objj_method(sel_getUid("draggedImage"),function(_10,_11){
with(_10){
return objj_msgSend(objj_msgSend(_10,"draggedView"),"image");
}
}),new objj_method(sel_getUid("draggedImageLocation"),function(_12,_13){
with(_12){
return objj_msgSend(_12,"draggedViewLocation");
}
}),new objj_method(sel_getUid("draggedView"),function(_14,_15){
with(_14){
return objj_msgSend(objj_msgSend(CPDragServer,"sharedDragServer"),"draggedView");
}
}),new objj_method(sel_getUid("draggedViewLocation"),function(_16,_17){
with(_16){
var _18=objj_msgSend(CPDragServer,"sharedDragServer");
return objj_msgSend((objj_msgSend(objj_msgSend(_18,"draggingDestination"),"isKindOfClass:",objj_msgSend(CPWindow,"class"))?objj_msgSend(_18,"draggingDestination"):objj_msgSend(objj_msgSend(_18,"draggingDestination"),"window")),"convertPlatformWindowToBase:",objj_msgSend(objj_msgSend(_18,"draggedView"),"frame").origin);
}
})]);
var _19=1<<0,_1a=1<<1,_1b=1<<2,_1c=1<<3;
var _6=objj_allocateClassPair(CPObject,"CPDragServer"),_7=_6.isa;
class_addIvars(_6,[new objj_ivar("_isDragging"),new objj_ivar("_draggedWindow"),new objj_ivar("_draggedView"),new objj_ivar("_imageView"),new objj_ivar("_isDraggingImage"),new objj_ivar("_draggingOffset"),new objj_ivar("_draggingPasteboard"),new objj_ivar("_draggingSource"),new objj_ivar("_implementedDraggingSourceMethods"),new objj_ivar("_draggingLocation"),new objj_ivar("_draggingDestination"),new objj_ivar("_draggingDestinationWantsPeriodicUpdates"),new objj_ivar("_startDragLocation"),new objj_ivar("_shouldSlideBack"),new objj_ivar("_dragOperation"),new objj_ivar("_draggingUpdateTimer")]);
objj_registerClassPair(_6);
class_addMethods(_6,[new objj_method(sel_getUid("isDragging"),function(_1d,_1e){
with(_1d){
return _isDragging;
}
}),new objj_method(sel_getUid("draggedWindow"),function(_1f,_20){
with(_1f){
return _draggedWindow;
}
}),new objj_method(sel_getUid("draggedView"),function(_21,_22){
with(_21){
return _draggedView;
}
}),new objj_method(sel_getUid("draggingOffset"),function(_23,_24){
with(_23){
return _draggingOffset;
}
}),new objj_method(sel_getUid("draggingPasteboard"),function(_25,_26){
with(_25){
return _draggingPasteboard;
}
}),new objj_method(sel_getUid("draggingSource"),function(_27,_28){
with(_27){
return _draggingSource;
}
}),new objj_method(sel_getUid("init"),function(_29,_2a){
with(_29){
_29=objj_msgSendSuper({receiver:_29,super_class:objj_getClass("CPDragServer").super_class},"init");
if(_29){
_draggedWindow=objj_msgSend(objj_msgSend(CPWindow,"alloc"),"initWithContentRect:styleMask:",{origin:{x:0,y:0},size:{width:0,height:0}},CPBorderlessWindowMask);
objj_msgSend(_draggedWindow,"setLevel:",CPDraggingWindowLevel);
}
return _29;
}
}),new objj_method(sel_getUid("draggingDestination"),function(_2b,_2c){
with(_2b){
return _draggingDestination;
}
}),new objj_method(sel_getUid("draggingLocation"),function(_2d,_2e){
with(_2d){
return _draggingLocation;
}
}),new objj_method(sel_getUid("draggingStartedInPlatformWindow:globalLocation:"),function(_2f,_30,_31,_32){
with(_2f){
if(_isDraggingImage){
if(objj_msgSend(_draggingSource,"respondsToSelector:",sel_getUid("draggedImage:beganAt:"))){
objj_msgSend(_draggingSource,"draggedImage:beganAt:",objj_msgSend(_draggedView,"image"),_32);
}
}else{
if(objj_msgSend(_draggingSource,"respondsToSelector:",sel_getUid("draggedView:beganAt:"))){
objj_msgSend(_draggingSource,"draggedView:beganAt:",_draggedView,_32);
}
}
if(!objj_msgSend(CPPlatform,"supportsDragAndDrop")){
objj_msgSend(_draggedWindow,"orderFront:",_2f);
}
}
}),new objj_method(sel_getUid("draggingSourceUpdatedWithGlobalLocation:"),function(_33,_34,_35){
with(_33){
if(!objj_msgSend(CPPlatform,"supportsDragAndDrop")){
objj_msgSend(_draggedWindow,"setFrameOrigin:",{x:_35.x-_draggingOffset.width,y:_35.y-_draggingOffset.height});
}
if(_implementedDraggingSourceMethods&_19){
objj_msgSend(_draggingSource,"draggedImage:movedTo:",objj_msgSend(_draggedView,"image"),_35);
}else{
if(_implementedDraggingSourceMethods&_1b){
objj_msgSend(_draggingSource,"draggedView:movedTo:",_draggedView,_35);
}
}
}
}),new objj_method(sel_getUid("draggingUpdatedInPlatformWindow:location:"),function(_36,_37,_38,_39){
with(_36){
objj_msgSend(_draggingUpdateTimer,"invalidate");
_draggingUpdateTimer=nil;
var _3a=CPDragOperationCopy,_3b=objj_msgSend(_38,"_dragHitTest:pasteboard:",_39,objj_msgSend(_5,"draggingPasteboard"));
if(_3b){
_draggingLocation=objj_msgSend((objj_msgSend(_3b,"isKindOfClass:",objj_msgSend(CPWindow,"class"))?_3b:objj_msgSend(_3b,"window")),"convertPlatformWindowToBase:",_39);
}
if(_3b!==_draggingDestination){
if(objj_msgSend(_draggingDestination,"respondsToSelector:",sel_getUid("draggingExited:"))){
objj_msgSend(_draggingDestination,"draggingExited:",_5);
}
_draggingDestination=_3b;
if(objj_msgSend(_draggingDestination,"respondsToSelector:",sel_getUid("wantsPeriodicDraggingUpdates"))){
_draggingDestinationWantsPeriodicUpdates=objj_msgSend(_draggingDestination,"wantsPeriodicDraggingUpdates");
}else{
_draggingDestinationWantsPeriodicUpdates=YES;
}
if(objj_msgSend(_draggingDestination,"respondsToSelector:",sel_getUid("draggingEntered:"))){
_3a=objj_msgSend(_draggingDestination,"draggingEntered:",_5);
}
}else{
if(objj_msgSend(_draggingDestination,"respondsToSelector:",sel_getUid("draggingUpdated:"))){
_3a=objj_msgSend(_draggingDestination,"draggingUpdated:",_5);
}
}
if(!_draggingDestination){
_3a=CPDragOperationNone;
}else{
if(_draggingDestinationWantsPeriodicUpdates){
_draggingUpdateTimer=objj_msgSend(CPTimer,"scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:",_2,_36,sel_getUid("_sendPeriodicDraggingUpdate:"),objj_msgSend(CPDictionary,"dictionaryWithJSObject:",{platformWindow:_38,location:_39}),NO);
}
var _3c=objj_msgSend(_draggingDestination,"isKindOfClass:",objj_msgSend(CPView,"class"))?objj_msgSend(_draggingDestination,"enclosingScrollView"):nil;
if(_3c){
var _3d=objj_msgSend(_3c,"contentView"),_3e=objj_msgSend(_3d,"bounds"),_3f=CGRectInset(_3e,30,30),_40=objj_msgSend(_3d,"convertPoint:fromView:",_draggingLocation,nil),_41=0,_42=0;
if(!CGRectContainsPoint(_3f,_40)){
if(objj_msgSend(_3c,"hasVerticalScroller")){
if(_40.y<(_3f.origin.y)){
_42=(_3f.origin.y)-_40.y;
}else{
if(_40.y>(_3f.origin.y+_3f.size.height)){
_42=(_3f.origin.y+_3f.size.height)-_40.y;
}
}
if(_42<-_3f.size.height){
_42=-_3f.size.height;
}
if(_42>_3f.size.height){
_42=_3f.size.height;
}
}
if(objj_msgSend(_3c,"hasHorizontalScroller")){
if(_40.x<(_3f.origin.x)){
_41=(_3f.origin.x)-_40.x;
}else{
if(_40.x>(_3f.origin.x+_3f.size.width)){
_41=(_3f.origin.x+_3f.size.width)-_40.x;
}
}
if(_41<-_3f.size.width){
_41=-_3f.size.width;
}
if(_41>_3f.size.width){
_41=_3f.size.width;
}
}
var _43={x:_3e.origin.x-_41,y:_3e.origin.y-_42};
objj_msgSend(_3d,"scrollToPoint:",_43);
objj_msgSend(objj_msgSend(_3c,"_headerView"),"scrollPoint:",_43);
}
}
}
return _3a;
}
}),new objj_method(sel_getUid("_sendPeriodicDraggingUpdate:"),function(_44,_45,_46){
with(_44){
var _47=objj_msgSend(_46,"userInfo");
_dragOperation=objj_msgSend(_44,"draggingUpdatedInPlatformWindow:location:",objj_msgSend(_47,"objectForKey:","platformWindow"),objj_msgSend(_47,"objectForKey:","location"));
}
}),new objj_method(sel_getUid("draggingEndedInPlatformWindow:globalLocation:operation:"),function(_48,_49,_4a,_4b,_4c){
with(_48){
objj_msgSend(_draggingUpdateTimer,"invalidate");
_draggingUpdateTimer=nil;
objj_msgSend(_draggedView,"removeFromSuperview");
if(!objj_msgSend(CPPlatform,"supportsDragAndDrop")){
objj_msgSend(_draggedWindow,"orderOut:",_48);
}
if(_implementedDraggingSourceMethods&_1a){
objj_msgSend(_draggingSource,"draggedImage:endedAt:operation:",objj_msgSend(_draggedView,"image"),_4b,_4c);
}else{
if(_implementedDraggingSourceMethods&_1c){
objj_msgSend(_draggingSource,"draggedView:endedAt:operation:",_draggedView,_4b,_4c);
}
}
_isDragging=NO;
}
}),new objj_method(sel_getUid("performDragOperationInPlatformWindow:"),function(_4d,_4e,_4f){
with(_4d){
if(_draggingDestination&&(!objj_msgSend(_draggingDestination,"respondsToSelector:",sel_getUid("prepareForDragOperation:"))||objj_msgSend(_draggingDestination,"prepareForDragOperation:",_5))&&(!objj_msgSend(_draggingDestination,"respondsToSelector:",sel_getUid("performDragOperation:"))||objj_msgSend(_draggingDestination,"performDragOperation:",_5))&&objj_msgSend(_draggingDestination,"respondsToSelector:",sel_getUid("concludeDragOperation:"))){
objj_msgSend(_draggingDestination,"concludeDragOperation:",_5);
}
}
}),new objj_method(sel_getUid("dragView:fromWindow:at:offset:event:pasteboard:source:slideBack:"),function(_50,_51,_52,_53,_54,_55,_56,_57,_58,_59){
with(_50){
_isDragging=YES;
_draggedView=_52;
_draggingPasteboard=_57||objj_msgSend(CPPasteboard,"pasteboardWithName:",CPDragPboard);
_draggingSource=_58;
_draggingDestination=nil;
_shouldSlideBack=_59;
var _5a=objj_msgSend(_56,"window"),_5b=objj_msgSend(_56,"locationInWindow");
if(_5b){
if(_5a){
_5b=objj_msgSend(_5a,"convertBaseToGlobal:",_5b);
}
_draggingOffset={width:_5b.x-_54.x,height:_5b.y-_54.y};
}else{
_draggingOffset={width:0,height:0};
}
if(objj_msgSend(CPPlatform,"isBrowser")){
objj_msgSend(_draggedWindow,"setPlatformWindow:",objj_msgSend(_53,"platformWindow"));
}
objj_msgSend(_52,"setFrameOrigin:",{x:0,y:0});
var _5c=objj_msgSend(CPEvent,"mouseLocation");
_startDragLocation={x:_5c.x-_draggingOffset.width,y:_5c.y-_draggingOffset.height};
objj_msgSend(_draggedWindow,"setFrameOrigin:",_startDragLocation);
objj_msgSend(_draggedWindow,"setFrameSize:",objj_msgSend(_52,"frame").size);
objj_msgSend(objj_msgSend(_draggedWindow,"contentView"),"addSubview:",_52);
_implementedDraggingSourceMethods=0;
if(_draggedView===_imageView){
if(objj_msgSend(_draggingSource,"respondsToSelector:",sel_getUid("draggedImage:movedTo:"))){
_implementedDraggingSourceMethods|=_19;
}
if(objj_msgSend(_draggingSource,"respondsToSelector:",sel_getUid("draggedImage:endedAt:operation:"))){
_implementedDraggingSourceMethods|=_1a;
}
}else{
if(objj_msgSend(_draggingSource,"respondsToSelector:",sel_getUid("draggedView:movedTo:"))){
_implementedDraggingSourceMethods|=_1b;
}
if(objj_msgSend(_draggingSource,"respondsToSelector:",sel_getUid("draggedView:endedAt:operation:"))){
_implementedDraggingSourceMethods|=_1c;
}
}
if(!objj_msgSend(CPPlatform,"supportsDragAndDrop")){
objj_msgSend(_50,"draggingStartedInPlatformWindow:globalLocation:",objj_msgSend(_53,"platformWindow"),_5c);
objj_msgSend(_50,"trackDragging:",_56);
}
}
}),new objj_method(sel_getUid("dragImage:fromWindow:at:offset:event:pasteboard:source:slideBack:"),function(_5d,_5e,_5f,_60,_61,_62,_63,_64,_65,_66){
with(_5d){
_isDraggingImage=YES;
var _67=objj_msgSend(_5f,"size");
if(!_imageView){
_imageView=objj_msgSend(objj_msgSend(CPImageView,"alloc"),"initWithFrame:",{origin:{x:0,y:0},size:{width:_67.width,height:_67.height}});
}
objj_msgSend(_imageView,"setImage:",_5f);
objj_msgSend(_5d,"dragView:fromWindow:at:offset:event:pasteboard:source:slideBack:",_imageView,_60,_61,_62,_63,_64,_65,_66);
}
}),new objj_method(sel_getUid("trackDragging:"),function(_68,_69,_6a){
with(_68){
var _6b=objj_msgSend(_6a,"type"),_6c=objj_msgSend(_draggedWindow,"platformWindow"),_6d=objj_msgSend(objj_msgSend(_6a,"window"),"convertBaseToPlatformWindow:",objj_msgSend(_6a,"locationInWindow"));
if(_6b===CPLeftMouseUp){
if(_dragOperation!==CPDragOperationNone){
objj_msgSend(_68,"performDragOperationInPlatformWindow:",_6c);
}
objj_msgSend(_68,"draggingEndedInPlatformWindow:globalLocation:operation:",_6c,_6d,_dragOperation);
return;
}else{
if(_6b===CPKeyDown){
var _6e=objj_msgSend(_6a,"characters");
if(_6e===CPEscapeFunctionKey){
_dragOperation=CPDragOperationNone;
objj_msgSend(_68,"draggingEndedInPlatformWindow:globalLocation:operation:",_6c,CGPointMakeZero(),_dragOperation);
return;
}
}else{
objj_msgSend(_68,"draggingSourceUpdatedWithGlobalLocation:",_6d);
_dragOperation=objj_msgSend(_68,"draggingUpdatedInPlatformWindow:location:",_6c,_6d);
}
}
objj_msgSend(CPApp,"setTarget:selector:forNextEventMatchingMask:untilDate:inMode:dequeue:",_68,sel_getUid("trackDragging:"),CPMouseMovedMask|CPLeftMouseDraggedMask|CPLeftMouseUpMask|CPKeyDownMask,nil,0,NO);
}
})]);
class_addMethods(_7,[new objj_method(sel_getUid("initialize"),function(_6f,_70){
with(_6f){
if(_6f!==objj_msgSend(CPDragServer,"class")){
return;
}
_5=objj_msgSend(objj_msgSend(CPDraggingInfo,"alloc"),"init");
}
}),new objj_method(sel_getUid("sharedDragServer"),function(_71,_72){
with(_71){
if(!_3){
_3=objj_msgSend(objj_msgSend(CPDragServer,"alloc"),"init");
}
return _3;
}
})]);
var _6=objj_getClass("CPWindow");
if(!_6){
throw new SyntaxError("*** Could not find definition for class \"CPWindow\"");
}
var _7=_6.isa;
class_addMethods(_6,[new objj_method(sel_getUid("_dragHitTest:pasteboard:"),function(_73,_74,_75,_76){
with(_73){
if(!_inclusiveRegisteredDraggedTypes){
return nil;
}
var _77=objj_msgSend(_73,"convertPlatformWindowToBase:",_75),_78=objj_msgSend(_windowView,"hitTest:",_77);
while(_78&&!objj_msgSend(_76,"availableTypeFromArray:",objj_msgSend(_78,"registeredDraggedTypes"))){
_78=objj_msgSend(_78,"superview");
}
if(_78){
return _78;
}
if(objj_msgSend(_76,"availableTypeFromArray:",objj_msgSend(_73,"registeredDraggedTypes"))){
return _73;
}
return nil;
}
})]);
p;9;CPEvent.jt;12038;@STATIC;1.0;I;21;Foundation/CPObject.ji;8;CPText.jt;11980;
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("CPText.j",YES);
CPLeftMouseDown=1;
CPLeftMouseUp=2;
CPRightMouseDown=3;
CPRightMouseUp=4;
CPMouseMoved=5;
CPLeftMouseDragged=6;
CPRightMouseDragged=7;
CPMouseEntered=8;
CPMouseExited=9;
CPKeyDown=10;
CPKeyUp=11;
CPFlagsChanged=12;
CPAppKitDefined=13;
CPSystemDefined=14;
CPApplicationDefined=15;
CPPeriodic=16;
CPCursorUpdate=17;
CPScrollWheel=22;
CPOtherMouseDown=25;
CPOtherMouseUp=26;
CPOtherMouseDragged=27;
CPTouchStart=28;
CPTouchMove=29;
CPTouchEnd=30;
CPTouchCancel=31;
CPAlphaShiftKeyMask=1<<16;
CPShiftKeyMask=1<<17;
CPControlKeyMask=1<<18;
CPAlternateKeyMask=1<<19;
CPCommandKeyMask=1<<20;
CPNumericPadKeyMask=1<<21;
CPHelpKeyMask=1<<22;
CPFunctionKeyMask=1<<23;
CPDeviceIndependentModifierFlagsMask=4294901760;
CPLeftMouseDownMask=1<<CPLeftMouseDown;
CPLeftMouseUpMask=1<<CPLeftMouseUp;
CPRightMouseDownMask=1<<CPRightMouseDown;
CPRightMouseUpMask=1<<CPRightMouseUp;
CPOtherMouseDownMask=1<<CPOtherMouseDown;
CPOtherMouseUpMask=1<<CPOtherMouseUp;
CPMouseMovedMask=1<<CPMouseMoved;
CPLeftMouseDraggedMask=1<<CPLeftMouseDragged;
CPRightMouseDraggedMask=1<<CPRightMouseDragged;
CPOtherMouseDragged=1<<CPOtherMouseDragged;
CPMouseEnteredMask=1<<CPMouseEntered;
CPMouseExitedMask=1<<CPMouseExited;
CPCursorUpdateMask=1<<CPCursorUpdate;
CPKeyDownMask=1<<CPKeyDown;
CPKeyUpMask=1<<CPKeyUp;
CPFlagsChangedMask=1<<CPFlagsChanged;
CPAppKitDefinedMask=1<<CPAppKitDefined;
CPSystemDefinedMask=1<<CPSystemDefined;
CPApplicationDefinedMask=1<<CPApplicationDefined;
CPPeriodicMask=1<<CPPeriodic;
CPScrollWheelMask=1<<CPScrollWheel;
CPAnyEventMask=4294967295;
CPUpArrowFunctionKey="";
CPDownArrowFunctionKey="";
CPLeftArrowFunctionKey="";
CPRightArrowFunctionKey="";
CPF1FunctionKey="";
CPF2FunctionKey="";
CPF3FunctionKey="";
CPF4FunctionKey="";
CPF5FunctionKey="";
CPF6FunctionKey="";
CPF7FunctionKey="";
CPF8FunctionKey="";
CPF9FunctionKey="";
CPF10FunctionKey="";
CPF11FunctionKey="";
CPF12FunctionKey="";
CPF13FunctionKey="";
CPF14FunctionKey="";
CPF15FunctionKey="";
CPF16FunctionKey="";
CPF17FunctionKey="";
CPF18FunctionKey="";
CPF19FunctionKey="";
CPF20FunctionKey="";
CPF21FunctionKey="";
CPF22FunctionKey="";
CPF23FunctionKey="";
CPF24FunctionKey="";
CPF25FunctionKey="";
CPF26FunctionKey="";
CPF27FunctionKey="";
CPF28FunctionKey="";
CPF29FunctionKey="";
CPF30FunctionKey="";
CPF31FunctionKey="";
CPF32FunctionKey="";
CPF33FunctionKey="";
CPF34FunctionKey="";
CPF35FunctionKey="";
CPInsertFunctionKey="";
CPDeleteFunctionKey="";
CPHomeFunctionKey="";
CPBeginFunctionKey="";
CPEndFunctionKey="";
CPPageUpFunctionKey="";
CPPageDownFunctionKey="";
CPPrintScreenFunctionKey="";
CPScrollLockFunctionKey="";
CPPauseFunctionKey="";
CPSysReqFunctionKey="";
CPBreakFunctionKey="";
CPResetFunctionKey="";
CPStopFunctionKey="";
CPMenuFunctionKey="";
CPUserFunctionKey="";
CPSystemFunctionKey="";
CPPrintFunctionKey="";
CPClearLineFunctionKey="";
CPClearDisplayFunctionKey="";
CPInsertLineFunctionKey="";
CPDeleteLineFunctionKey="";
CPInsertCharFunctionKey="";
CPDeleteCharFunctionKey="";
CPPrevFunctionKey="";
CPNextFunctionKey="";
CPSelectFunctionKey="";
CPExecuteFunctionKey="";
CPUndoFunctionKey="";
CPRedoFunctionKey="";
CPFindFunctionKey="";
CPHelpFunctionKey="";
CPModeSwitchFunctionKey="";
CPEscapeFunctionKey="";
CPSpaceFunctionKey=" ";
CPDOMEventDoubleClick="dblclick";
CPDOMEventMouseDown="mousedown";
CPDOMEventMouseUp="mouseup";
CPDOMEventMouseMoved="mousemove";
CPDOMEventMouseDragged="mousedrag";
CPDOMEventKeyUp="keyup";
CPDOMEventKeyDown="keydown";
CPDOMEventKeyPress="keypress";
CPDOMEventCopy="copy";
CPDOMEventPaste="paste";
CPDOMEventScrollWheel="mousewheel";
CPDOMEventTouchStart="touchstart";
CPDOMEventTouchMove="touchmove";
CPDOMEventTouchEnd="touchend";
CPDOMEventTouchCancel="touchcancel";
var _1=0,_2=nil,_3=new RegExp("[A-Z]");
var _4=objj_allocateClassPair(CPObject,"CPEvent"),_5=_4.isa;
class_addIvars(_4,[new objj_ivar("_type"),new objj_ivar("_location"),new objj_ivar("_modifierFlags"),new objj_ivar("_timestamp"),new objj_ivar("_context"),new objj_ivar("_eventNumber"),new objj_ivar("_clickCount"),new objj_ivar("_pressure"),new objj_ivar("_window"),new objj_ivar("_windowNumber"),new objj_ivar("_characters"),new objj_ivar("_isARepeat"),new objj_ivar("_keyCode"),new objj_ivar("_DOMEvent"),new objj_ivar("_deltaX"),new objj_ivar("_deltaY"),new objj_ivar("_deltaZ")]);
objj_registerClassPair(_4);
class_addMethods(_4,[new objj_method(sel_getUid("_initWithType:"),function(_6,_7,_8){
with(_6){
if(_6=objj_msgSendSuper({receiver:_6,super_class:objj_getClass("CPEvent").super_class},"init")){
_type=_8;
_deltaX=0;
_deltaY=0;
_deltaZ=0;
}
return _6;
}
}),new objj_method(sel_getUid("_initMouseEventWithType:location:modifierFlags:timestamp:windowNumber:context:eventNumber:clickCount:pressure:"),function(_9,_a,_b,_c,_d,_e,_f,_10,_11,_12,_13){
with(_9){
if(_9=objj_msgSend(_9,"_initWithType:",_b)){
_location=CPPointCreateCopy(_c);
_modifierFlags=_d;
_timestamp=_e;
_context=_10;
_eventNumber=_11;
_clickCount=_12;
_pressure=_13;
_window=objj_msgSend(CPApp,"windowWithWindowNumber:",_f);
}
return _9;
}
}),new objj_method(sel_getUid("_initKeyEventWithType:location:modifierFlags:timestamp:windowNumber:context:characters:charactersIgnoringModifiers:isARepeat:keyCode:"),function(_14,_15,_16,_17,_18,_19,_1a,_1b,_1c,_1d,_1e,_1f){
with(_14){
if(_14=objj_msgSend(_14,"_initWithType:",_16)){
_location=CPPointCreateCopy(_17);
_modifierFlags=_18;
_timestamp=_19;
_context=_1b;
_characters=_1c;
_charactersIgnoringModifiers=_1d;
_isARepeat=_1e;
_keyCode=_1f;
_windowNumber=_1a;
}
return _14;
}
}),new objj_method(sel_getUid("_initOtherEventWithType:location:modifierFlags:timestamp:windowNumber:context:subtype:data1:data2:"),function(_20,_21,_22,_23,_24,_25,_26,_27,_28,_29,_2a){
with(_20){
if(_20=objj_msgSend(_20,"_initWithType:",_22)){
_location=CPPointCreateCopy(_23);
_modifierFlags=_24;
_timestamp=_25;
_context=_27;
_subtype=_28;
_data1=_29;
_data2=_2a;
}
return _20;
}
}),new objj_method(sel_getUid("locationInWindow"),function(_2b,_2c){
with(_2b){
return {x:_location.x,y:_location.y};
}
}),new objj_method(sel_getUid("globalLocation"),function(_2d,_2e){
with(_2d){
var _2f=objj_msgSend(_2d,"window"),_30=objj_msgSend(_2d,"locationInWindow");
if(_2f){
return objj_msgSend(_2f,"convertBaseToGlobal:",_30);
}
return _30;
}
}),new objj_method(sel_getUid("modifierFlags"),function(_31,_32){
with(_31){
return _modifierFlags;
}
}),new objj_method(sel_getUid("timestamp"),function(_33,_34){
with(_33){
return _timestamp;
}
}),new objj_method(sel_getUid("type"),function(_35,_36){
with(_35){
return _type;
}
}),new objj_method(sel_getUid("window"),function(_37,_38){
with(_37){
if(!_window){
_window=objj_msgSend(CPApp,"windowWithWindowNumber:",_windowNumber);
}
return _window;
}
}),new objj_method(sel_getUid("windowNumber"),function(_39,_3a){
with(_39){
return _windowNumber;
}
}),new objj_method(sel_getUid("buttonNumber"),function(_3b,_3c){
with(_3b){
if(_type===CPRightMouseDown||_type===CPRightMouseUp||_type===CPRightMouseDragged){
return 1;
}
return 0;
}
}),new objj_method(sel_getUid("clickCount"),function(_3d,_3e){
with(_3d){
return _clickCount;
}
}),new objj_method(sel_getUid("characters"),function(_3f,_40){
with(_3f){
return _characters;
}
}),new objj_method(sel_getUid("charactersIgnoringModifiers"),function(_41,_42){
with(_41){
return _charactersIgnoringModifiers;
}
}),new objj_method(sel_getUid("isARepeat"),function(_43,_44){
with(_43){
return _isARepeat;
}
}),new objj_method(sel_getUid("keyCode"),function(_45,_46){
with(_45){
return _keyCode;
}
}),new objj_method(sel_getUid("pressure"),function(_47,_48){
with(_47){
return _pressure;
}
}),new objj_method(sel_getUid("_DOMEvent"),function(_49,_4a){
with(_49){
return _DOMEvent;
}
}),new objj_method(sel_getUid("deltaX"),function(_4b,_4c){
with(_4b){
return _deltaX;
}
}),new objj_method(sel_getUid("deltaY"),function(_4d,_4e){
with(_4d){
return _deltaY;
}
}),new objj_method(sel_getUid("deltaZ"),function(_4f,_50){
with(_4f){
return _deltaZ;
}
}),new objj_method(sel_getUid("_triggersKeyEquivalent:withModifierMask:"),function(_51,_52,_53,_54){
with(_51){
if(!_53){
return NO;
}
if(_3.test(_53)){
_54|=CPShiftKeyMask;
}
if(!CPBrowserIsOperatingSystem(CPMacOperatingSystem)&&(_54&CPCommandKeyMask)){
_54|=CPControlKeyMask;
_54&=~CPCommandKeyMask;
}
if((_modifierFlags&(CPShiftKeyMask|CPAlternateKeyMask|CPCommandKeyMask|CPControlKeyMask))!==_54){
return NO;
}
if(_characters===CPNewlineCharacter||_characters===CPCarriageReturnCharacter){
return CPNewlineCharacter===_53||CPCarriageReturnCharacter===_53;
}
return objj_msgSend(_characters,"caseInsensitiveCompare:",_53)===CPOrderedSame;
}
}),new objj_method(sel_getUid("_couldBeKeyEquivalent"),function(_55,_56){
with(_55){
if(_type!==CPKeyDown){
return NO;
}
var _57=_characters.length;
if(!_57){
return NO;
}
if(_modifierFlags&(CPCommandKeyMask|CPControlKeyMask)){
return YES;
}
for(var i=0;i<_57;i++){
switch(_characters.charAt(i)){
case CPBackspaceCharacter:
case CPDeleteCharacter:
case CPDeleteFunctionKey:
case CPTabCharacter:
case CPCarriageReturnCharacter:
case CPNewlineCharacter:
case CPSpaceFunctionKey:
case CPEscapeFunctionKey:
case CPPageUpFunctionKey:
case CPPageDownFunctionKey:
case CPLeftArrowFunctionKey:
case CPUpArrowFunctionKey:
case CPRightArrowFunctionKey:
case CPDownArrowFunctionKey:
case CPEndFunctionKey:
case CPHomeFunctionKey:
return YES;
}
}
return NO;
}
})]);
class_addMethods(_5,[new objj_method(sel_getUid("keyEventWithType:location:modifierFlags:timestamp:windowNumber:context:characters:charactersIgnoringModifiers:isARepeat:keyCode:"),function(_58,_59,_5a,_5b,_5c,_5d,_5e,_5f,_60,_61,_62,_63){
with(_58){
return objj_msgSend(objj_msgSend(_58,"alloc"),"_initKeyEventWithType:location:modifierFlags:timestamp:windowNumber:context:characters:charactersIgnoringModifiers:isARepeat:keyCode:",_5a,_5b,_5c,_5d,_5e,_5f,_60,_61,_62,_63);
}
}),new objj_method(sel_getUid("mouseEventWithType:location:modifierFlags:timestamp:windowNumber:context:eventNumber:clickCount:pressure:"),function(_64,_65,_66,_67,_68,_69,_6a,_6b,_6c,_6d,_6e){
with(_64){
return objj_msgSend(objj_msgSend(_64,"alloc"),"_initMouseEventWithType:location:modifierFlags:timestamp:windowNumber:context:eventNumber:clickCount:pressure:",_66,_67,_68,_69,_6a,_6b,_6c,_6d,_6e);
}
}),new objj_method(sel_getUid("otherEventWithType:location:modifierFlags:timestamp:windowNumber:context:subtype:data1:data2:"),function(_6f,_70,_71,_72,_73,_74,_75,_76,_77,_78,_79){
with(_6f){
return objj_msgSend(objj_msgSend(_6f,"alloc"),"_initOtherEventWithType:location:modifierFlags:timestamp:windowNumber:context:subtype:data1:data2:",_71,_72,_73,_74,_75,_76,_77,_78,_79);
}
}),new objj_method(sel_getUid("mouseLocation"),function(_7a,_7b){
with(_7a){
var _7c=objj_msgSend(CPApp,"currentEvent"),_7d=objj_msgSend(_7c,"window");
if(_7d){
return objj_msgSend(_7d,"convertBaseToGlobal:",objj_msgSend(_7c,"locationInWindow"));
}
return objj_msgSend(_7c,"locationInWindow");
}
}),new objj_method(sel_getUid("startPeriodicEventsAfterDelay:withPeriod:"),function(_7e,_7f,_80,_81){
with(_7e){
_1=_81;
_2=window.setTimeout(function(){
_2=window.setInterval(_CPEventFirePeriodEvent,_81*1000);
},_80*1000);
}
}),new objj_method(sel_getUid("stopPeriodicEvents"),function(_82,_83){
with(_82){
if(_2===nil){
return;
}
window.clearTimeout(_2);
_2=nil;
}
})]);
_CPEventFirePeriodEvent=function(){
objj_msgSend(CPApp,"sendEvent:",objj_msgSend(CPEvent,"otherEventWithType:location:modifierFlags:timestamp:windowNumber:context:subtype:data1:data2:",CPPeriodic,{x:0,y:0},0,0,0,nil,0,0,0));
};
var _84=objj_msgSend(CPEvent,"class");
_CPEventFromNativeMouseEvent=function(_85,_86,_87,_88,_89,_8a,_8b,_8c,_8d,_8e){
_85.isa=_84;
_85._type=_86;
_85._location=_87;
_85._modifierFlags=_88;
_85._timestamp=_89;
_85._windowNumber=_8a;
_85._window=nil;
_85._context=_8b;
_85._eventNumber=_8c;
_85._clickCount=_8d;
_85._pressure=_8e;
return _85;
};
p;14;CPFlashMovie.jt;1223;@STATIC;1.0;I;21;Foundation/CPObject.jt;1178;
objj_executeFile("Foundation/CPObject.j",NO);
var _1=objj_allocateClassPair(CPObject,"CPFlashMovie"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_filename")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("initWithFile:"),function(_3,_4,_5){
with(_3){
_3=objj_msgSendSuper({receiver:_3,super_class:objj_getClass("CPFlashMovie").super_class},"init");
if(_3){
_filename=_5;
}
return _3;
}
}),new objj_method(sel_getUid("filename"),function(_6,_7){
with(_6){
return _filename;
}
})]);
class_addMethods(_2,[new objj_method(sel_getUid("flashMovieWithFile:"),function(_8,_9,_a){
with(_8){
return objj_msgSend(objj_msgSend(_8,"alloc"),"initWithFile:",_a);
}
})]);
var _b="CPFlashMovieFilenameKey";
var _1=objj_getClass("CPFlashMovie");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"CPFlashMovie\"");
}
var _2=_1.isa;
class_addMethods(_1,[new objj_method(sel_getUid("initWithCoder:"),function(_c,_d,_e){
with(_c){
_filename=objj_msgSend(_e,"decodeObjectForKey:",_b);
return _c;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_f,_10,_11){
with(_f){
objj_msgSend(_11,"encodeObject:forKey:",_filename,_b);
}
})]);
p;13;CPFlashView.jt;4864;@STATIC;1.0;i;14;CPFlashMovie.ji;8;CPView.jt;4814;
objj_executeFile("CPFlashMovie.j",YES);
objj_executeFile("CPView.j",YES);
var _1="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000";
var _2=objj_allocateClassPair(CPView,"CPFlashView"),_3=_2.isa;
class_addIvars(_2,[new objj_ivar("_flashMovie"),new objj_ivar("_params"),new objj_ivar("_paramElements"),new objj_ivar("_DOMParamElement"),new objj_ivar("_DOMObjectElement"),new objj_ivar("_DOMInnerObjectElement")]);
objj_registerClassPair(_2);
class_addMethods(_2,[new objj_method(sel_getUid("initWithFrame:"),function(_4,_5,_6){
with(_4){
_4=objj_msgSendSuper({receiver:_4,super_class:objj_getClass("CPFlashView").super_class},"initWithFrame:",_6);
if(_4){
if(!CPBrowserIsEngine(CPInternetExplorerBrowserEngine)){
_DOMObjectElement=document.createElement("object");
_DOMObjectElement.width="100%";
_DOMObjectElement.height="100%";
_DOMObjectElement.style.top="0px";
_DOMObjectElement.style.left="0px";
_DOMObjectElement.type="application/x-shockwave-flash";
_DOMObjectElement.setAttribute("classid",_1);
_DOMParamElement=document.createElement("param");
_DOMParamElement.name="movie";
_DOMInnerObjectElement=document.createElement("object");
_DOMInnerObjectElement.width="100%";
_DOMInnerObjectElement.height="100%";
_DOMObjectElement.appendChild(_DOMParamElement);
_DOMObjectElement.appendChild(_DOMInnerObjectElement);
_DOMElement.appendChild(_DOMObjectElement);
}else{
objj_msgSend(_4,"_rebuildIEObjects");
}
}
return _4;
}
}),new objj_method(sel_getUid("setFlashMovie:"),function(_7,_8,_9){
with(_7){
if(_flashMovie==_9){
return;
}
_flashMovie=_9;
if(!CPBrowserIsEngine(CPInternetExplorerBrowserEngine)){
_DOMParamElement.value=objj_msgSend(_9,"filename");
_DOMInnerObjectElement.data=objj_msgSend(_9,"filename");
}else{
objj_msgSend(_7,"_rebuildIEObjects");
}
}
}),new objj_method(sel_getUid("flashMovie"),function(_a,_b){
with(_a){
return _flashMovie;
}
}),new objj_method(sel_getUid("setFlashVars:"),function(_c,_d,_e){
with(_c){
var _f="",_10=objj_msgSend(_e,"keyEnumerator");
var key;
while(key=objj_msgSend(_10,"nextObject")){
_f=objj_msgSend(_f,"stringByAppendingFormat:","&%@=%@",key,objj_msgSend(_e,"objectForKey:",key));
}
if(!_params){
_params=objj_msgSend(CPDictionary,"dictionary");
}
objj_msgSend(_params,"setObject:forKey:",_f,"flashvars");
objj_msgSend(_c,"setParameters:",_params);
}
}),new objj_method(sel_getUid("flashVars"),function(_11,_12){
with(_11){
return objj_msgSend(_params,"objectForKey:","flashvars");
}
}),new objj_method(sel_getUid("setParameters:"),function(_13,_14,_15){
with(_13){
if(_paramElements&&!CPBrowserIsEngine(CPInternetExplorerBrowserEngine)){
var _16=objj_msgSend(_paramElements,"allValues"),_17=objj_msgSend(_16,"count");
for(var i=0;i<_17;i++){
_DOMObjectElement.removeChild(objj_msgSend(_16,"objectAtIndex:",i));
}
}
if(!_params){
_params=_15;
}else{
objj_msgSend(_params,"addEntriesFromDictionary:",_15);
}
if(!CPBrowserIsEngine(CPInternetExplorerBrowserEngine)){
_paramElements=objj_msgSend(CPDictionary,"dictionary");
var _18=objj_msgSend(_params,"keyEnumerator"),key;
while(_DOMObjectElement&&(key=objj_msgSend(_18,"nextObject"))){
var _19=document.createElement("param");
_19.name=key;
_19.value=objj_msgSend(_params,"objectForKey:",key);
_DOMObjectElement.appendChild(_19);
objj_msgSend(_paramElements,"setObject:forKey:",_19,key);
}
}else{
objj_msgSend(_13,"_rebuildIEObjects");
}
}
}),new objj_method(sel_getUid("parameters"),function(_1a,_1b){
with(_1a){
return _params;
}
}),new objj_method(sel_getUid("_rebuildIEObjects"),function(_1c,_1d){
with(_1c){
_DOMElement.innerHTML="";
if(!objj_msgSend(_flashMovie,"filename")){
return;
}
var _1e=objj_msgSend(CPString,"stringWithFormat:","<param name='movie' value='%@' />",objj_msgSend(_flashMovie,"filename")),_1f=objj_msgSend(_params,"keyEnumerator"),key;
while(key=objj_msgSend(_1f,"nextObject")){
_1e=objj_msgSend(_1e,"stringByAppendingFormat:","<param name='%@' value='%@' />",key,objj_msgSend(_params,"objectForKey:",key));
}
_DOMObjectElement=document.createElement("object");
_DOMElement.appendChild(_DOMObjectElement);
_DOMObjectElement.outerHTML=objj_msgSend(CPString,"stringWithFormat:","<object classid=%@ width=%@ height=%@>%@</object>",_1,CGRectGetWidth(objj_msgSend(_1c,"bounds")),CGRectGetHeight(objj_msgSend(_1c,"bounds")),_1e);
}
}),new objj_method(sel_getUid("mouseDragged:"),function(_20,_21,_22){
with(_20){
objj_msgSend(objj_msgSend(objj_msgSend(_20,"window"),"platformWindow"),"_propagateCurrentDOMEvent:",YES);
}
}),new objj_method(sel_getUid("mouseDown:"),function(_23,_24,_25){
with(_23){
objj_msgSend(objj_msgSend(objj_msgSend(_23,"window"),"platformWindow"),"_propagateCurrentDOMEvent:",YES);
}
}),new objj_method(sel_getUid("mouseUp:"),function(_26,_27,_28){
with(_26){
objj_msgSend(objj_msgSend(objj_msgSend(_26,"window"),"platformWindow"),"_propagateCurrentDOMEvent:",YES);
}
})]);
p;8;CPFont.jt;7118;@STATIC;1.0;I;21;Foundation/CPObject.jI;21;Foundation/CPBundle.ji;8;CPView.jt;7035;
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("Foundation/CPBundle.j",NO);
objj_executeFile("CPView.j",YES);
CPFontDefaultSystemFontFace="Arial, sans-serif";
CPFontDefaultSystemFontSize=12;
var _1={},_2=CPFontDefaultSystemFontFace,_3=12,_4=CPFontDefaultSystemFontFace.split(", "),_5=new RegExp("(^\\s*[\"']?|[\"']?\\s*$)","g");
var _6=objj_allocateClassPair(CPObject,"CPFont"),_7=_6.isa;
class_addIvars(_6,[new objj_ivar("_name"),new objj_ivar("_size"),new objj_ivar("_ascender"),new objj_ivar("_descender"),new objj_ivar("_lineHeight"),new objj_ivar("_isBold"),new objj_ivar("_isItalic"),new objj_ivar("_cssString")]);
objj_registerClassPair(_6);
class_addMethods(_6,[new objj_method(sel_getUid("isBold"),function(_8,_9){
with(_8){
return _isBold;
}
}),new objj_method(sel_getUid("isItalic"),function(_a,_b){
with(_a){
return _isItalic;
}
}),new objj_method(sel_getUid("_initWithName:size:bold:"),function(_c,_d,_e,_f,_10){
with(_c){
return objj_msgSend(_c,"_initWithName:size:bold:italic:",_e,_f,_10,NO);
}
}),new objj_method(sel_getUid("_initWithName:size:bold:italic:"),function(_11,_12,_13,_14,_15,_16){
with(_11){
_11=objj_msgSendSuper({receiver:_11,super_class:objj_getClass("CPFont").super_class},"init");
if(_11){
_name=_17(_13).join(", ");
_size=_14;
_ascender=0;
_descender=0;
_lineHeight=0;
_isBold=_15;
_isItalic=_16;
_cssString=_18(_name,_size,_isBold,_isItalic);
_1[_cssString]=_11;
}
return _11;
}
}),new objj_method(sel_getUid("ascender"),function(_19,_1a){
with(_19){
if(!_ascender){
objj_msgSend(_19,"_getMetrics");
}
return _ascender;
}
}),new objj_method(sel_getUid("descender"),function(_1b,_1c){
with(_1b){
if(!_descender){
objj_msgSend(_1b,"_getMetrics");
}
return _descender;
}
}),new objj_method(sel_getUid("defaultLineHeightForFont"),function(_1d,_1e){
with(_1d){
if(!_lineHeight){
objj_msgSend(_1d,"_getMetrics");
}
return _lineHeight;
}
}),new objj_method(sel_getUid("size"),function(_1f,_20){
with(_1f){
return _size;
}
}),new objj_method(sel_getUid("cssString"),function(_21,_22){
with(_21){
return _cssString;
}
}),new objj_method(sel_getUid("familyName"),function(_23,_24){
with(_23){
return _name;
}
}),new objj_method(sel_getUid("isEqual:"),function(_25,_26,_27){
with(_25){
return objj_msgSend(_27,"isKindOfClass:",objj_msgSend(CPFont,"class"))&&objj_msgSend(_27,"cssString")===_cssString;
}
}),new objj_method(sel_getUid("description"),function(_28,_29){
with(_28){
return objj_msgSend(CPString,"stringWithFormat:","%@ %@",objj_msgSendSuper({receiver:_28,super_class:objj_getClass("CPFont").super_class},"description"),objj_msgSend(_28,"cssString"));
}
}),new objj_method(sel_getUid("copy"),function(_2a,_2b){
with(_2a){
return objj_msgSend(objj_msgSend(CPFont,"alloc"),"_initWithName:size:bold:italic:",_name,_size,_isBold,_isItalic);
}
}),new objj_method(sel_getUid("_getMetrics"),function(_2c,_2d){
with(_2c){
var _2e=objj_msgSend(CPString,"metricsOfFont:",_2c);
_ascender=objj_msgSend(_2e,"objectForKey:","ascender");
_descender=objj_msgSend(_2e,"objectForKey:","descender");
_lineHeight=objj_msgSend(_2e,"objectForKey:","lineHeight");
}
})]);
class_addMethods(_7,[new objj_method(sel_getUid("initialize"),function(_2f,_30){
with(_2f){
var _31=objj_msgSend(objj_msgSend(CPBundle,"mainBundle"),"objectForInfoDictionaryKey:","CPSystemFontFace");
if(!_31){
_31=objj_msgSend(objj_msgSend(CPBundle,"bundleForClass:",objj_msgSend(CPView,"class")),"objectForInfoDictionaryKey:","CPSystemFontFace");
}
if(_31){
objj_msgSend(_2f,"setSystemFontFace:",_31);
}
var _32=objj_msgSend(objj_msgSend(CPBundle,"mainBundle"),"objectForInfoDictionaryKey:","CPSystemFontSize");
if(!_32){
_32=objj_msgSend(objj_msgSend(CPBundle,"bundleForClass:",objj_msgSend(CPView,"class")),"objectForInfoDictionaryKey:","CPSystemFontSize");
}
if(_32){
_3=_32;
}
}
}),new objj_method(sel_getUid("systemFontFace"),function(_33,_34){
with(_33){
return _2;
}
}),new objj_method(sel_getUid("setSystemFontFace:"),function(_35,_36,_37){
with(_35){
_2=_17(_37).join(", ");
}
}),new objj_method(sel_getUid("systemFontSize"),function(_38,_39){
with(_38){
return _3;
}
}),new objj_method(sel_getUid("setSystemFontSize:"),function(_3a,_3b,_3c){
with(_3a){
if(_3c>0){
_3=_3c;
}
}
}),new objj_method(sel_getUid("fontWithName:size:"),function(_3d,_3e,_3f,_40){
with(_3d){
return _1[_18(_17(_3f).join(", "),_40,NO,NO)]||objj_msgSend(objj_msgSend(CPFont,"alloc"),"_initWithName:size:bold:italic:",_3f,_40,NO,NO);
}
}),new objj_method(sel_getUid("fontWithName:size:italic:"),function(_41,_42,_43,_44,_45){
with(_41){
return _1[_18(_17(_43).join(", "),_44,NO,NO)]||objj_msgSend(objj_msgSend(CPFont,"alloc"),"_initWithName:size:bold:italic:",_43,_44,NO,_45);
}
}),new objj_method(sel_getUid("boldFontWithName:size:"),function(_46,_47,_48,_49){
with(_46){
return _1[_18(_17(_48).join(", "),_49,YES,NO)]||objj_msgSend(objj_msgSend(CPFont,"alloc"),"_initWithName:size:bold:italic:",_48,_49,YES,NO);
}
}),new objj_method(sel_getUid("boldFontWithName:size:italic:"),function(_4a,_4b,_4c,_4d,_4e){
with(_4a){
return _1[_18(_17(_4c).join(", "),_4d,NO,NO)]||objj_msgSend(objj_msgSend(CPFont,"alloc"),"_initWithName:size:bold:italic:",_4c,_4d,YES,_4e);
}
}),new objj_method(sel_getUid("systemFontOfSize:"),function(_4f,_50,_51){
with(_4f){
return _1[_18(_17(_2).join(", "),_51,NO,NO)]||objj_msgSend(objj_msgSend(CPFont,"alloc"),"_initWithName:size:bold:italic:",_2,_51,NO,NO);
}
}),new objj_method(sel_getUid("boldSystemFontOfSize:"),function(_52,_53,_54){
with(_52){
return _1[_18(_17(_2).join(", "),_54,YES,NO)]||objj_msgSend(objj_msgSend(CPFont,"alloc"),"_initWithName:size:bold:italic:",_2,_54,YES,NO);
}
})]);
var _55="CPFontNameKey",_56="CPFontSizeKey",_57="CPFontIsBoldKey",_58="CPFontIsItalicKey";
var _6=objj_getClass("CPFont");
if(!_6){
throw new SyntaxError("*** Could not find definition for class \"CPFont\"");
}
var _7=_6.isa;
class_addMethods(_6,[new objj_method(sel_getUid("initWithCoder:"),function(_59,_5a,_5b){
with(_59){
var _5c=objj_msgSend(_5b,"decodeObjectForKey:",_55),_5d=objj_msgSend(_5b,"decodeFloatForKey:",_56),_5e=objj_msgSend(_5b,"decodeBoolForKey:",_57),_5f=objj_msgSend(_5b,"decodeBoolForKey:",_58);
return objj_msgSend(_59,"_initWithName:size:bold:italic:",_5c,_5d,_5e,_5f);
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_60,_61,_62){
with(_60){
objj_msgSend(_62,"encodeObject:forKey:",_name,_55);
objj_msgSend(_62,"encodeFloat:forKey:",_size,_56);
objj_msgSend(_62,"encodeBool:forKey:",_isBold,_57);
objj_msgSend(_62,"encodeBool:forKey:",_isItalic,_58);
}
})]);
var _18=function(_63,_64,_65,_66){
var _67=(_66?"italic ":"")+(_65?"bold ":"")+_64+"px ";
return _67+_68(_63);
};
var _68=function(_69){
var _6a=_17(_69),_6b=_4.slice(0);
for(var i=0;i<_6a.length;++i){
for(var j=0;j<_6b.length;++j){
if(_6a[i].toLowerCase()===_6b[j].toLowerCase()){
_6b.splice(j,1);
break;
}
}
if(_6a[i].indexOf(" ")>0){
_6a[i]="\""+_6a[i]+"\"";
}
}
return _6a.concat(_6b).join(", ");
};
var _17=function(_6c){
var _6d=_6c.split(",");
for(var i=0;i<_6d.length;++i){
_6d[i]=_6d[i].replace(_5,"");
}
return _6d;
};
p;15;CPFontManager.jt;3303;@STATIC;1.0;I;21;Foundation/CPObject.ji;8;CPFont.jt;3246;
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("CPFont.j",YES);
var _1=nil,_2=Nil;
var _3=objj_allocateClassPair(CPObject,"CPFontManager"),_4=_3.isa;
class_addIvars(_3,[new objj_ivar("_availableFonts")]);
objj_registerClassPair(_3);
class_addMethods(_3,[new objj_method(sel_getUid("availableFonts"),function(_5,_6){
with(_5){
if(!_availableFonts){
_7=document.createElement("span");
_7.fontSize="24px";
_7.appendChild(document.createTextNode("mmmmmmmmmml"));
var _8=document.createElement("div");
_8.style.position="absolute";
_8.style.top="-1000px";
_8.appendChild(_7);
document.getElementsByTagName("body")[0].appendChild(_8);
_9=_a(["monospace","serif","sans-serif","cursive"]);
_availableFonts=[];
for(var i=0;i<_b.length;i++){
var _c=_d(_b[i]);
if(_c){
_availableFonts.push(_b[i]);
}
}
}
return _availableFonts;
}
}),new objj_method(sel_getUid("fontWithNameIsAvailable:"),function(_e,_f,_10){
with(_e){
return _d(_10);
}
})]);
class_addMethods(_4,[new objj_method(sel_getUid("sharedFontManager"),function(_11,_12){
with(_11){
if(!_1){
_1=objj_msgSend(objj_msgSend(_2,"alloc"),"init");
}
return _1;
}
}),new objj_method(sel_getUid("setFontManagerFactory:"),function(_13,_14,_15){
with(_13){
_2=_15;
}
})]);
var _7,_9,_b=["American Typewriter","Apple Chancery","Arial","Arial Black","Arial Narrow","Arial Rounded MT Bold","Arial Unicode MS","Big Caslon","Bitstream Vera Sans","Bitstream Vera Sans Mono","Bitstream Vera Serif","Brush Script MT","Cambria","Caslon","Castellar","Cataneo BT","Centaur","Century Gothic","Century Schoolbook","Century Schoolbook L","Comic Sans","Comic Sans MS","Consolas","Constantia","Cooper Black","Copperplate","Copperplate Gothic Bold","Copperplate Gothic Light","Corbel","Courier","Courier New","Futura","Geneva","Georgia","Georgia Ref","Geeza Pro","Gigi","Gill Sans","Gill Sans MT","Gill Sans MT Condensed","Gill Sans MT Ext Condensed Bold","Gill Sans Ultra Bold","Gill Sans Ultra Bold Condensed","Helvetica","Helvetica Narrow","Helvetica Neue","Herculanum","High Tower Text","Highlight LET","Hoefler Text","Impact","Imprint MT Shadow","Lucida","Lucida Bright","Lucida Calligraphy","Lucida Console","Lucida Fax","Lucida Grande","Lucida Handwriting","Lucida Sans","Lucida Sans Typewriter","Lucida Sans Unicode","Marker Felt","Microsoft Sans Serif","Milano LET","Minion Web","MisterEarl BT","Mistral","Monaco","Monotype Corsiva","Monotype.com","New Century Schoolbook","New York","News Gothic MT","Papyrus","Tahoma","Techno","Tempus Sans ITC","Terminal","Textile","Times","Times New Roman","Tiranti Solid LET","Trebuchet MS","Verdana","Verdana Ref","Zapfino"];
var _d=function(_16){
for(var i=0;i<_9.length;i++){
if(_17(_9[i],_16)){
return true;
}
}
return false;
};
var _18={};
var _17=function(_19,_1a){
var a;
if(_18[_19]){
a=_18[_19];
}else{
_7.style.fontFamily="\""+_19+"\"";
_18[_19]=a={w:_7.offsetWidth,h:_7.offsetHeight};
}
_7.style.fontFamily="\""+_1a+"\", \""+_19+"\"";
var _1b=_7.offsetWidth,_1c=_7.offsetHeight;
return (a.w!=_1b||a.h!=_1c);
};
var _a=function(_1d){
for(var i=0;i<_1d.length;i++){
for(var j=0;j<i;j++){
if(_17(_1d[i],_1d[j])){
return [_1d[i],_1d[j]];
}
}
}
return [_1d[0]];
};
objj_msgSend(CPFontManager,"setFontManagerFactory:",objj_msgSend(CPFontManager,"class"));
p;12;CPGeometry.jt;4219;@STATIC;1.0;i;12;CGGeometry.jt;4183;
objj_executeFile("CGGeometry.j",YES);
CPMinXEdge=0;
CPMinYEdge=1;
CPMaxXEdge=2;
CPMaxYEdge=3;
CPMakePoint=CGPointMake;
CPMakeSize=CGSizeMake;
CPMakeRect=CGRectMake;
CPPointCreateCopy=function(_1){
return {x:_1.x,y:_1.y};
};
CPPointMake=function(x,y){
return {x:x,y:y};
};
CPRectInset=function(_2,dX,dY){
return CPRectMake(_2.origin.x+dX,_2.origin.y+dY,_2.size.width-2*dX,_2.size.height-2*dY);
};
CPRectIntegral=function(_3){
alert("CPRectIntegral unimplemented");
};
CPRectIntersection=function(_4,_5){
var _6=CPRectMake(Math.max(CPRectGetMinX(_4),CPRectGetMinX(_5)),Math.max(CPRectGetMinY(_4),CPRectGetMinY(_5)),0,0);
_6.size.width=Math.min(CPRectGetMaxX(_4),CPRectGetMaxX(_5))-CPRectGetMinX(_6);
_6.size.height=Math.min(CPRectGetMaxY(_4),CPRectGetMaxY(_5))-CPRectGetMinY(_6);
return CPRectIsEmpty(_6)?CPRectMakeZero():_6;
};
CPRectCreateCopy=function(_7){
return {origin:CPPointCreateCopy(_7.origin),size:CPSizeCreateCopy(_7.size)};
};
CPRectMake=function(x,y,_8,_9){
return {origin:CPPointMake(x,y),size:CPSizeMake(_8,_9)};
};
CPRectOffset=function(_a,dX,dY){
return CPRectMake(_a.origin.x+dX,_a.origin.y+dY,_a.size.width,_a.size.height);
};
CPRectStandardize=function(_b){
var _c=CPRectGetWidth(_b),_d=CPRectGetHeight(_b),_e=CPRectCreateCopy(_b);
if(_c<0){
_e.origin.x+=_c;
_e.size.width=-_c;
}
if(_d<0){
_e.origin.y+=_d;
_e.size.height=-_d;
}
return _e;
};
CPRectUnion=function(_f,_10){
var _11=Math.min(CPRectGetMinX(_f),CPRectGetMinX(_10)),_12=Math.min(CPRectGetMinY(_f),CPRectGetMinY(_10)),_13=Math.max(CPRectGetMaxX(_f),CPRectGetMaxX(_10)),_14=Math.max(CPRectGetMaxY(_f),CPRectGetMaxY(_10));
return CPRectMake(_11,_12,_13-_11,_14-_12);
};
CPSizeCreateCopy=function(_15){
return {width:_15.width,height:_15.height};
};
CPSizeMake=function(_16,_17){
return {width:_16,height:_17};
};
CPRectContainsPoint=function(_18,_19){
return _19.x>=CPRectGetMinX(_18)&&_19.y>=CPRectGetMinY(_18)&&_19.x<CPRectGetMaxX(_18)&&_19.y<CPRectGetMaxY(_18);
};
CPRectContainsRect=function(_1a,_1b){
return CGRectContainsRect(_1a,_1b);
};
CPPointEqualToPoint=function(_1c,_1d){
return _1c.x==_1d.x&&_1c.y==_1d.y;
};
CPRectEqualToRect=function(_1e,_1f){
return CPPointEqualToPoint(_1e.origin,_1f.origin)&&CPSizeEqualToSize(_1e.size,_1f.size);
};
CPRectGetHeight=function(_20){
return _20.size.height;
};
CPRectGetMaxX=function(_21){
return _21.origin.x+_21.size.width;
};
CPRectGetMaxY=function(_22){
return _22.origin.y+_22.size.height;
};
CPRectGetMidX=function(_23){
return _23.origin.x+(_23.size.width)/2;
};
CPRectGetMidY=function(_24){
return _24.origin.y+(_24.size.height)/2;
};
CPRectGetMinX=function(_25){
return _25.origin.x;
};
CPRectGetMinY=function(_26){
return _26.origin.y;
};
CPRectGetWidth=function(_27){
return _27.size.width;
};
CPRectIntersectsRect=function(_28,_29){
return !CPRectIsEmpty(CPRectIntersection(_28,_29));
};
CPRectIsEmpty=function(_2a){
return _2a.size.width<=0||_2a.size.height<=0;
};
CPRectIsNull=function(_2b){
return _2b.size.width<=0||_2b.size.height<=0;
};
CPDivideRect=function(_2c,_2d,rem,_2e,_2f){
CGRectDivide(_2c,_2d,rem,_2e,_2f);
};
CPSizeEqualToSize=function(_30,_31){
return _30.width==_31.width&&_30.height==_31.height;
};
CPStringFromPoint=function(_32){
return "{"+_32.x+", "+_32.y+"}";
};
CPStringFromSize=function(_33){
return "{"+_33.width+", "+_33.height+"}";
};
CPStringFromRect=function(_34){
return "{"+CPStringFromPoint(_34.origin)+", "+CPStringFromSize(_34.size)+"}";
};
CPPointFromString=function(_35){
var _36=_35.indexOf(",");
return {x:parseFloat(_35.substr(1,_36-1),10),y:parseFloat(_35.substring(_36+1,_35.length),10)};
};
CPSizeFromString=function(_37){
var _38=_37.indexOf(",");
return {width:parseFloat(_37.substr(1,_38-1),10),height:parseFloat(_37.substring(_38+1,_37.length),10)};
};
CPRectFromString=function(_39){
var _3a=_39.indexOf(",",_39.indexOf(",")+1);
return {origin:CPPointFromString(_39.substr(1,_3a-1)),size:CPSizeFromString(_39.substring(_3a+2,_39.length))};
};
CPPointFromEvent=function(_3b){
return CPPointMake(_3b.clientX,_3b.clientY,0);
};
CPSizeMakeZero=function(){
return CPSizeMake(0,0);
};
CPRectMakeZero=function(){
return CPRectMake(0,0,0,0);
};
CPPointMakeZero=function(){
return CPPointMake(0,0,0);
};
p;12;CPGraphics.jt;1766;@STATIC;1.0;i;9;CPColor.ji;19;CPGraphicsContext.jt;1710;
objj_executeFile("CPColor.j",YES);
objj_executeFile("CPGraphicsContext.j",YES);
CPDrawTiledRects=function(_1,_2,_3,_4){
if(_3.length!=_4.length){
objj_msgSend(CPException,"raise:reason:",CPInvalidArgumentException,"sides (length: "+_3.length+") and grays (length: "+_4.length+") must have the same length.");
}
var _5=[];
for(var i=0;i<_4.length;++i){
_5.push(objj_msgSend(CPColor,"colorWithCalibratedWhite:alpha:",_4[i],1));
}
return CPDrawColorTiledRects(_1,_2,_3,_5);
};
CPDrawColorTiledRects=function(_6,_7,_8,_9){
if(_8.length!=_9.length){
objj_msgSend(CPException,"raise:reason:",CPInvalidArgumentException,"sides (length: "+_8.length+") and colors (length: "+_9.length+") must have the same length.");
}
var _a={origin:{x:_6.origin.x,y:_6.origin.y},size:{width:_6.size.width,height:_6.size.height}},_b={origin:{x:0,y:0},size:{width:0,height:0}},_c={origin:{x:0,y:0},size:{width:0,height:0}},_d=objj_msgSend(objj_msgSend(CPGraphicsContext,"currentContext"),"graphicsPort");
CGContextSaveGState(_d);
CGContextSetLineWidth(_d,1);
for(var _e=0;_e<_8.length;++_e){
var _f=_8[_e];
CGRectDivide(_a,_b,_c,1,_f);
_a=_c;
_b=CGRectIntersection(_b,_7);
if((_b.size.width<=0||_b.size.height<=0)){
continue;
}
var _10,_11,_12,_13;
if(_f==CPMinXEdge||_f==CPMaxXEdge){
if((_b.size.width)<1){
continue;
}
_10=(_b.origin.x)+0.5;
_11=_10;
_12=(_b.origin.y);
_13=(_b.origin.y+_b.size.height);
}else{
if((_b.size.height)<1){
continue;
}
_10=(_b.origin.x);
_11=(_b.origin.x+_b.size.width);
_12=(_b.origin.y)+0.5;
_13=_12;
}
CGContextBeginPath(_d);
CGContextMoveToPoint(_d,_10,_12);
CGContextAddLineToPoint(_d,_11,_13);
CGContextSetStrokeColor(_d,_9[_e]);
CGContextStrokePath(_d);
}
CGContextRestoreGState(_d);
return _a;
};
p;19;CPGraphicsContext.jt;1047;@STATIC;1.0;I;21;Foundation/CPObject.ji;11;CGContext.jt;987;
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("CGContext.j",YES);
var _1=nil;
var _2=objj_allocateClassPair(CPObject,"CPGraphicsContext"),_3=_2.isa;
class_addIvars(_2,[new objj_ivar("_graphicsPort")]);
objj_registerClassPair(_2);
class_addMethods(_2,[new objj_method(sel_getUid("initWithGraphicsPort:"),function(_4,_5,_6){
with(_4){
_4=objj_msgSendSuper({receiver:_4,super_class:objj_getClass("CPGraphicsContext").super_class},"init");
if(_4){
_graphicsPort=_6;
}
return _4;
}
}),new objj_method(sel_getUid("graphicsPort"),function(_7,_8){
with(_7){
return _graphicsPort;
}
})]);
class_addMethods(_3,[new objj_method(sel_getUid("currentContext"),function(_9,_a){
with(_9){
return _1;
}
}),new objj_method(sel_getUid("setCurrentContext:"),function(_b,_c,_d){
with(_b){
_1=_d;
}
}),new objj_method(sel_getUid("graphicsContextWithGraphicsPort:flipped:"),function(_e,_f,_10,_11){
with(_e){
return objj_msgSend(objj_msgSend(_e,"alloc"),"initWithGraphicsPort:",_10);
}
})]);
p;9;CPImage.jt;9921;@STATIC;1.0;I;21;Foundation/CPBundle.jI;33;Foundation/CPNotificationCenter.jI;21;Foundation/CPObject.jI;22;Foundation/CPRunLoop.jI;21;Foundation/CPString.ji;12;CPGeometry.jt;9742;
objj_executeFile("Foundation/CPBundle.j",NO);
objj_executeFile("Foundation/CPNotificationCenter.j",NO);
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("Foundation/CPRunLoop.j",NO);
objj_executeFile("Foundation/CPString.j",NO);
objj_executeFile("CPGeometry.j",YES);
CPImageLoadStatusInitialized=0;
CPImageLoadStatusLoading=1;
CPImageLoadStatusCompleted=2;
CPImageLoadStatusCancelled=3;
CPImageLoadStatusInvalidData=4;
CPImageLoadStatusUnexpectedEOF=5;
CPImageLoadStatusReadError=6;
CPImageDidLoadNotification="CPImageDidLoadNotification";
CPImageNameColorPanel="CPImageNameColorPanel";
CPImageNameColorPanelHighlighted="CPImageNameColorPanelHighlighted";
var _1={},_2={};
_2[CPImageNameColorPanel]=CGSizeMake(26,29);
_2[CPImageNameColorPanelHighlighted]=CGSizeMake(26,29);
CPImageInBundle=function(_3,_4,_5){
if(!_5){
_5=objj_msgSend(CPBundle,"mainBundle");
}
if(_4){
return objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_5,"pathForResource:",_3),_4);
}
return objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:",objj_msgSend(_5,"pathForResource:",_3));
};
CPAppKitImage=function(_6,_7){
return CPImageInBundle(_6,_7,objj_msgSend(CPBundle,"bundleForClass:",objj_msgSend(CPView,"class")));
};
var _8=objj_allocateClassPair(CPObject,"CPImage"),_9=_8.isa;
class_addIvars(_8,[new objj_ivar("_size"),new objj_ivar("_filename"),new objj_ivar("_name"),new objj_ivar("_delegate"),new objj_ivar("_loadStatus"),new objj_ivar("_image")]);
objj_registerClassPair(_8);
class_addMethods(_8,[new objj_method(sel_getUid("init"),function(_a,_b){
with(_a){
return objj_msgSend(_a,"initByReferencingFile:size:","",CGSizeMake(-1,-1));
}
}),new objj_method(sel_getUid("initByReferencingFile:size:"),function(_c,_d,_e,_f){
with(_c){
_c=objj_msgSendSuper({receiver:_c,super_class:objj_getClass("CPImage").super_class},"init");
if(_c){
_size=CPSizeCreateCopy(_f);
_filename=_e;
_loadStatus=CPImageLoadStatusInitialized;
}
return _c;
}
}),new objj_method(sel_getUid("initWithContentsOfFile:size:"),function(_10,_11,_12,_13){
with(_10){
_10=objj_msgSend(_10,"initByReferencingFile:size:",_12,_13);
if(_10){
objj_msgSend(_10,"load");
}
return _10;
}
}),new objj_method(sel_getUid("initWithContentsOfFile:"),function(_14,_15,_16){
with(_14){
_14=objj_msgSend(_14,"initByReferencingFile:size:",_16,CGSizeMake(-1,-1));
if(_14){
objj_msgSend(_14,"load");
}
return _14;
}
}),new objj_method(sel_getUid("filename"),function(_17,_18){
with(_17){
return _filename;
}
}),new objj_method(sel_getUid("setSize:"),function(_19,_1a,_1b){
with(_19){
_size=CGSizeMakeCopy(_1b);
}
}),new objj_method(sel_getUid("size"),function(_1c,_1d){
with(_1c){
return _size;
}
}),new objj_method(sel_getUid("setName:"),function(_1e,_1f,_20){
with(_1e){
if(_name===_20){
return YES;
}
if(_1[_20]){
return NO;
}
_name=_20;
_1[_20]=_1e;
return YES;
}
}),new objj_method(sel_getUid("name"),function(_21,_22){
with(_21){
return _name;
}
}),new objj_method(sel_getUid("setDelegate:"),function(_23,_24,_25){
with(_23){
_delegate=_25;
}
}),new objj_method(sel_getUid("delegate"),function(_26,_27){
with(_26){
return _delegate;
}
}),new objj_method(sel_getUid("loadStatus"),function(_28,_29){
with(_28){
return _loadStatus;
}
}),new objj_method(sel_getUid("load"),function(_2a,_2b){
with(_2a){
if(_loadStatus==CPImageLoadStatusLoading||_loadStatus==CPImageLoadStatusCompleted){
return;
}
_loadStatus=CPImageLoadStatusLoading;
_image=new Image();
var _2c=YES;
_image.onload=function(){
if(_2c){
window.setTimeout(function(){
objj_msgSend(_2a,"_imageDidLoad");
},0);
}else{
objj_msgSend(_2a,"_imageDidLoad");
objj_msgSend(objj_msgSend(CPRunLoop,"currentRunLoop"),"limitDateForMode:",CPDefaultRunLoopMode);
}
objj_msgSend(_2a,"_derefFromImage");
};
_image.onerror=function(){
if(_2c){
window.setTimeout(function(){
objj_msgSend(_2a,"_imageDidError");
},0);
}else{
objj_msgSend(_2a,"_imageDidError");
objj_msgSend(objj_msgSend(CPRunLoop,"currentRunLoop"),"limitDateForMode:",CPDefaultRunLoopMode);
}
objj_msgSend(_2a,"_derefFromImage");
};
_image.onabort=function(){
if(_2c){
window.setTimeout(function(){
objj_msgSend(_2a,"_imageDidAbort");
},0);
}else{
objj_msgSend(_2a,"_imageDidAbort");
objj_msgSend(objj_msgSend(CPRunLoop,"currentRunLoop"),"limitDateForMode:",CPDefaultRunLoopMode);
}
objj_msgSend(_2a,"_derefFromImage");
};
_image.src=_filename;
window.setTimeout(function(){
_2c=NO;
},0);
}
}),new objj_method(sel_getUid("isThreePartImage"),function(_2d,_2e){
with(_2d){
return NO;
}
}),new objj_method(sel_getUid("isNinePartImage"),function(_2f,_30){
with(_2f){
return NO;
}
}),new objj_method(sel_getUid("_derefFromImage"),function(_31,_32){
with(_31){
_image.onload=null;
_image.onerror=null;
_image.onabort=null;
}
}),new objj_method(sel_getUid("_imageDidLoad"),function(_33,_34){
with(_33){
_loadStatus=CPImageLoadStatusCompleted;
if(!_size||(_size.width==-1&&_size.height==-1)){
_size=CGSizeMake(_image.width,_image.height);
}
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:",CPImageDidLoadNotification,_33);
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("imageDidLoad:"))){
objj_msgSend(_delegate,"imageDidLoad:",_33);
}
}
}),new objj_method(sel_getUid("_imageDidError"),function(_35,_36){
with(_35){
_loadStatus=CPImageLoadStatusReadError;
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("imageDidError:"))){
objj_msgSend(_delegate,"imageDidError:",_35);
}
}
}),new objj_method(sel_getUid("_imageDidAbort"),function(_37,_38){
with(_37){
_loadStatus=CPImageLoadStatusCancelled;
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("imageDidAbort:"))){
objj_msgSend(_delegate,"imageDidAbort:",_37);
}
}
})]);
class_addMethods(_9,[new objj_method(sel_getUid("imageNamed:"),function(_39,_3a,_3b){
with(_39){
var _3c=_1[_3b];
if(_3c){
return _3c;
}
var _3d=_2[_3b];
if(!_3d){
return nil;
}
if(!_3d.isa){
_3d=CPAppKitImage("CPImage/"+_3b+".png",_3d);
objj_msgSend(_3d,"setName:",_3b);
_2[_3b]=_3d;
}
return _3d;
}
})]);
var _8=objj_getClass("CPImage");
if(!_8){
throw new SyntaxError("*** Could not find definition for class \"CPImage\"");
}
var _9=_8.isa;
class_addMethods(_8,[new objj_method(sel_getUid("initWithCoder:"),function(_3e,_3f,_40){
with(_3e){
return objj_msgSend(_3e,"initWithContentsOfFile:size:",objj_msgSend(_40,"decodeObjectForKey:","CPFilename"),objj_msgSend(_40,"decodeSizeForKey:","CPSize"));
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_41,_42,_43){
with(_41){
objj_msgSend(_43,"encodeObject:forKey:",_filename,"CPFilename");
objj_msgSend(_43,"encodeSize:forKey:",_size,"CPSize");
}
})]);
var _8=objj_allocateClassPair(CPObject,"CPThreePartImage"),_9=_8.isa;
class_addIvars(_8,[new objj_ivar("_imageSlices"),new objj_ivar("_isVertical")]);
objj_registerClassPair(_8);
class_addMethods(_8,[new objj_method(sel_getUid("initWithImageSlices:isVertical:"),function(_44,_45,_46,_47){
with(_44){
_44=objj_msgSendSuper({receiver:_44,super_class:objj_getClass("CPThreePartImage").super_class},"init");
if(_44){
_imageSlices=_46;
_isVertical=_47;
}
return _44;
}
}),new objj_method(sel_getUid("filename"),function(_48,_49){
with(_48){
return "";
}
}),new objj_method(sel_getUid("imageSlices"),function(_4a,_4b){
with(_4a){
return _imageSlices;
}
}),new objj_method(sel_getUid("isVertical"),function(_4c,_4d){
with(_4c){
return _isVertical;
}
}),new objj_method(sel_getUid("isThreePartImage"),function(_4e,_4f){
with(_4e){
return YES;
}
}),new objj_method(sel_getUid("isNinePartImage"),function(_50,_51){
with(_50){
return NO;
}
})]);
var _52="CPThreePartImageImageSlicesKey",_53="CPThreePartImageIsVerticalKey";
var _8=objj_getClass("CPThreePartImage");
if(!_8){
throw new SyntaxError("*** Could not find definition for class \"CPThreePartImage\"");
}
var _9=_8.isa;
class_addMethods(_8,[new objj_method(sel_getUid("initWithCoder:"),function(_54,_55,_56){
with(_54){
_54=objj_msgSendSuper({receiver:_54,super_class:objj_getClass("CPThreePartImage").super_class},"init");
if(_54){
_imageSlices=objj_msgSend(_56,"decodeObjectForKey:",_52);
_isVertical=objj_msgSend(_56,"decodeBoolForKey:",_53);
}
return _54;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_57,_58,_59){
with(_57){
objj_msgSend(_59,"encodeObject:forKey:",_imageSlices,_52);
objj_msgSend(_59,"encodeBool:forKey:",_isVertical,_53);
}
})]);
var _8=objj_allocateClassPair(CPObject,"CPNinePartImage"),_9=_8.isa;
class_addIvars(_8,[new objj_ivar("_imageSlices")]);
objj_registerClassPair(_8);
class_addMethods(_8,[new objj_method(sel_getUid("initWithImageSlices:"),function(_5a,_5b,_5c){
with(_5a){
_5a=objj_msgSendSuper({receiver:_5a,super_class:objj_getClass("CPNinePartImage").super_class},"init");
if(_5a){
_imageSlices=_5c;
}
return _5a;
}
}),new objj_method(sel_getUid("filename"),function(_5d,_5e){
with(_5d){
return "";
}
}),new objj_method(sel_getUid("imageSlices"),function(_5f,_60){
with(_5f){
return _imageSlices;
}
}),new objj_method(sel_getUid("isThreePartImage"),function(_61,_62){
with(_61){
return NO;
}
}),new objj_method(sel_getUid("isNinePartImage"),function(_63,_64){
with(_63){
return YES;
}
})]);
var _65="CPNinePartImageImageSlicesKey";
var _8=objj_getClass("CPNinePartImage");
if(!_8){
throw new SyntaxError("*** Could not find definition for class \"CPNinePartImage\"");
}
var _9=_8.isa;
class_addMethods(_8,[new objj_method(sel_getUid("initWithCoder:"),function(_66,_67,_68){
with(_66){
_66=objj_msgSendSuper({receiver:_66,super_class:objj_getClass("CPNinePartImage").super_class},"init");
if(_66){
_imageSlices=objj_msgSend(_68,"decodeObjectForKey:",_65);
}
return _66;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_69,_6a,_6b){
with(_69){
objj_msgSend(_6b,"encodeObject:forKey:",_imageSlices,_65);
}
})]);
p;13;CPImageView.jt;10239;@STATIC;1.0;I;33;Foundation/CPNotificationCenter.ji;11;CPControl.ji;9;CPImage.ji;14;CPShadowView.jt;10133;
objj_executeFile("Foundation/CPNotificationCenter.j",NO);
objj_executeFile("CPControl.j",YES);
objj_executeFile("CPImage.j",YES);
objj_executeFile("CPShadowView.j",YES);
CPScaleProportionally=0;
CPScaleToFit=1;
CPScaleNone=2;
CPImageAlignCenter=0;
CPImageAlignTop=1;
CPImageAlignTopLeft=2;
CPImageAlignTopRight=3;
CPImageAlignLeft=4;
CPImageAlignBottom=5;
CPImageAlignBottomLeft=6;
CPImageAlignBottomRight=7;
CPImageAlignRight=8;
var _1=nil,_2=nil;
var _3=3,_4=3,_5=3,_6=5,_7=_5+_6,_8=_3+_4;
var _9=objj_allocateClassPair(CPControl,"CPImageView"),_a=_9.isa;
class_addIvars(_9,[new objj_ivar("_DOMImageElement"),new objj_ivar("_hasShadow"),new objj_ivar("_shadowView"),new objj_ivar("_isEditable"),new objj_ivar("_imageRect"),new objj_ivar("_imageAlignment")]);
objj_registerClassPair(_9);
class_addMethods(_9,[new objj_method(sel_getUid("initWithFrame:"),function(_b,_c,_d){
with(_b){
_b=objj_msgSendSuper({receiver:_b,super_class:objj_getClass("CPImageView").super_class},"initWithFrame:",_d);
if(_b){
_DOMImageElement=document.createElement("img");
_DOMImageElement.style.position="absolute";
_DOMImageElement.style.left="0px";
_DOMImageElement.style.top="0px";
if(objj_msgSend(CPPlatform,"supportsDragAndDrop")){
_DOMImageElement.setAttribute("draggable","true");
_DOMImageElement.style["-khtml-user-drag"]="element";
}
_DOMElement.appendChild(_DOMImageElement);
_DOMImageElement.style.visibility="hidden";
}
return _b;
}
}),new objj_method(sel_getUid("image"),function(_e,_f){
with(_e){
return objj_msgSend(_e,"objectValue");
}
}),new objj_method(sel_getUid("setImage:"),function(_10,_11,_12){
with(_10){
objj_msgSend(_10,"setObjectValue:",_12);
}
}),new objj_method(sel_getUid("setObjectValue:"),function(_13,_14,_15){
with(_13){
var _16=objj_msgSend(_13,"objectValue");
if(_16===_15){
return;
}
objj_msgSendSuper({receiver:_13,super_class:objj_getClass("CPImageView").super_class},"setObjectValue:",_15);
var _17=objj_msgSend(CPNotificationCenter,"defaultCenter");
if(_16){
objj_msgSend(_17,"removeObserver:name:object:",_13,CPImageDidLoadNotification,_16);
}
var _18=objj_msgSend(_13,"objectValue");
_DOMImageElement.src=_18?objj_msgSend(_18,"filename"):objj_msgSend(_2,"filename");
var _19=objj_msgSend(_18,"size");
if(_19&&_19.width===-1&&_19.height===-1){
objj_msgSend(_17,"addObserver:selector:name:object:",_13,sel_getUid("imageDidLoad:"),CPImageDidLoadNotification,_18);
_DOMImageElement.width=0;
_DOMImageElement.height=0;
objj_msgSend(_shadowView,"setHidden:",YES);
}else{
objj_msgSend(_13,"hideOrDisplayContents");
objj_msgSend(_13,"setNeedsLayout");
objj_msgSend(_13,"setNeedsDisplay:",YES);
}
}
}),new objj_method(sel_getUid("imageDidLoad:"),function(_1a,_1b,_1c){
with(_1a){
objj_msgSend(_1a,"hideOrDisplayContents");
objj_msgSend(_1a,"setNeedsLayout");
objj_msgSend(_1a,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("hasShadow"),function(_1d,_1e){
with(_1d){
return _hasShadow;
}
}),new objj_method(sel_getUid("setHasShadow:"),function(_1f,_20,_21){
with(_1f){
if(_hasShadow==_21){
return;
}
_hasShadow=_21;
if(_hasShadow){
_shadowView=objj_msgSend(objj_msgSend(CPShadowView,"alloc"),"initWithFrame:",objj_msgSend(_1f,"bounds"));
objj_msgSend(_1f,"addSubview:",_shadowView);
objj_msgSend(_1f,"setNeedsLayout");
objj_msgSend(_1f,"setNeedsDisplay:",YES);
}else{
objj_msgSend(_shadowView,"removeFromSuperview");
_shadowView=nil;
}
objj_msgSend(_1f,"hideOrDisplayContents");
}
}),new objj_method(sel_getUid("setImageAlignment:"),function(_22,_23,_24){
with(_22){
if(_imageAlignment==_24){
return;
}
_imageAlignment=_24;
if(!objj_msgSend(_22,"image")){
return;
}
objj_msgSend(_22,"setNeedsLayout");
objj_msgSend(_22,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("imageAlignment"),function(_25,_26){
with(_25){
return _imageAlignment;
}
}),new objj_method(sel_getUid("setImageScaling:"),function(_27,_28,_29){
with(_27){
objj_msgSendSuper({receiver:_27,super_class:objj_getClass("CPImageView").super_class},"setImageScaling:",_29);
if(objj_msgSend(_27,"currentValueForThemeAttribute:","image-scaling")===CPScaleToFit){
if(NULL){
var _2a={x:CGPointMake(0,0).x*NULL.a+CGPointMake(0,0).y*NULL.c+NULL.tx,y:CGPointMake(0,0).x*NULL.b+CGPointMake(0,0).y*NULL.d+NULL.ty};
}else{
var _2a={x:0,y:0};
}
_DOMImageElement.style.left=ROUND(_2a.x)+"px";
_DOMImageElement.style.top=ROUND(_2a.y)+"px";
}
objj_msgSend(_27,"setNeedsLayout");
objj_msgSend(_27,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("imageScaling"),function(_2b,_2c){
with(_2b){
return objj_msgSend(_2b,"currentValueForThemeAttribute:","image-scaling");
}
}),new objj_method(sel_getUid("hideOrDisplayContents"),function(_2d,_2e){
with(_2d){
if(!objj_msgSend(_2d,"image")){
_DOMImageElement.style.visibility="hidden";
objj_msgSend(_shadowView,"setHidden:",YES);
}else{
_DOMImageElement.style.visibility="visible";
objj_msgSend(_shadowView,"setHidden:",NO);
}
}
}),new objj_method(sel_getUid("imageRect"),function(_2f,_30){
with(_2f){
return _imageRect;
}
}),new objj_method(sel_getUid("layoutSubviews"),function(_31,_32){
with(_31){
if(!objj_msgSend(_31,"image")){
return;
}
var _33=objj_msgSend(_31,"bounds"),_34=objj_msgSend(_31,"image"),_35=objj_msgSend(_31,"currentValueForThemeAttribute:","image-scaling"),x=0,y=0,_36=(_hasShadow?_8:0),_37=(_hasShadow?_7:0),_38=(_33.size.width),_39=(_33.size.height),_3a=_38-_36,_3b=_39-_37;
if(_35===CPScaleToFit){
_DOMImageElement.width=ROUND(_3a);
_DOMImageElement.height=ROUND(_3b);
}else{
var _3c=objj_msgSend(_34,"size");
if(_3c.width==-1&&_3c.height==-1){
return;
}
if(_35===CPScaleProportionally){
if(_3a>=_3c.width&&_3b>=_3c.height){
_3a=_3c.width;
_3b=_3c.height;
}else{
var _3d=_3c.width/_3c.height,_3e=_3a/_3b;
if(_3e>_3d){
_3a=_3b*_3d;
}else{
_3b=_3a/_3d;
}
}
_DOMImageElement.width=ROUND(_3a);
_DOMImageElement.height=ROUND(_3b);
}else{
_3a=_3c.width;
_3b=_3c.height;
}
if(_35==CPScaleNone){
_DOMImageElement.width=ROUND(_3c.width);
_DOMImageElement.height=ROUND(_3c.height);
}
var x,y;
switch(_imageAlignment){
case CPImageAlignLeft:
case CPImageAlignTopLeft:
case CPImageAlignBottomLeft:
x=0;
break;
case CPImageAlignRight:
case CPImageAlignTopRight:
case CPImageAlignBottomRight:
x=_38-_3a;
break;
default:
x=(_38-_3a)/2;
break;
}
switch(_imageAlignment){
case CPImageAlignTop:
case CPImageAlignTopLeft:
case CPImageAlignTopRight:
y=0;
break;
case CPImageAlignBottom:
case CPImageAlignBottomLeft:
case CPImageAlignBottomRight:
y=_39-_3b;
break;
default:
y=(_39-_3b)/2;
break;
}
if(NULL){
var _3f={x:CGPointMake(x,y).x*NULL.a+CGPointMake(x,y).y*NULL.c+NULL.tx,y:CGPointMake(x,y).x*NULL.b+CGPointMake(x,y).y*NULL.d+NULL.ty};
}else{
var _3f={x:x,y:y};
}
_DOMImageElement.style.left=ROUND(_3f.x)+"px";
_DOMImageElement.style.top=ROUND(_3f.y)+"px";
}
_imageRect={origin:{x:x,y:y},size:{width:_3a,height:_3b}};
if(_hasShadow){
objj_msgSend(_shadowView,"setFrame:",{origin:{x:x-_3,y:y-_5},size:{width:_3a+_36,height:_3b+_37}});
}
}
}),new objj_method(sel_getUid("mouseDown:"),function(_40,_41,_42){
with(_40){
objj_msgSend(objj_msgSend(_40,"nextResponder"),"mouseDown:",_42);
}
}),new objj_method(sel_getUid("setEditable:"),function(_43,_44,_45){
with(_43){
if(_isEditable===_45){
return;
}
_isEditable=_45;
if(_isEditable){
objj_msgSend(_43,"registerForDraggedTypes:",[CPImagesPboardType]);
}else{
var _46=objj_msgSend(_43,"registeredDraggedTypes");
objj_msgSend(_43,"unregisterDraggedTypes");
objj_msgSend(_46,"removeObjectIdenticalTo:",CPImagesPboardType);
objj_msgSend(_43,"registerForDraggedTypes:",_46);
}
}
}),new objj_method(sel_getUid("isEditable"),function(_47,_48){
with(_47){
return _isEditable;
}
}),new objj_method(sel_getUid("performDragOperation:"),function(_49,_4a,_4b){
with(_49){
var _4c=objj_msgSend(CPKeyedUnarchiver,"unarchiveObjectWithData:",objj_msgSend(objj_msgSend(_4b,"draggingPasteboard"),"dataForType:",CPImagesPboardType));
if(objj_msgSend(_4c,"count")){
objj_msgSend(_49,"setImage:",_4c[0]);
objj_msgSend(_49,"sendAction:to:",objj_msgSend(_49,"action"),objj_msgSend(_49,"target"));
}
return YES;
}
})]);
class_addMethods(_a,[new objj_method(sel_getUid("initialize"),function(_4d,_4e){
with(_4d){
var _4f=objj_msgSend(CPBundle,"bundleForClass:",objj_msgSend(CPView,"class"));
_2=objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:",objj_msgSend(_4f,"pathForResource:","empty.png"));
}
})]);
var _50="CPImageViewImageKey",_51="CPImageViewImageScalingKey",_52="CPImageViewImageAlignmentKey",_53="CPImageViewHasShadowKey",_54="CPImageViewIsEditableKey";
var _9=objj_getClass("CPImageView");
if(!_9){
throw new SyntaxError("*** Could not find definition for class \"CPImageView\"");
}
var _a=_9.isa;
class_addMethods(_9,[new objj_method(sel_getUid("initWithCoder:"),function(_55,_56,_57){
with(_55){
_DOMImageElement=document.createElement("img");
_DOMImageElement.style.position="absolute";
_DOMImageElement.style.left="0px";
_DOMImageElement.style.top="0px";
_DOMImageElement.style.visibility="hidden";
if(objj_msgSend(CPPlatform,"supportsDragAndDrop")){
_DOMImageElement.setAttribute("draggable","true");
_DOMImageElement.style["-khtml-user-drag"]="element";
}
_55=objj_msgSendSuper({receiver:_55,super_class:objj_getClass("CPImageView").super_class},"initWithCoder:",_57);
if(_55){
_DOMElement.appendChild(_DOMImageElement);
objj_msgSend(_55,"setHasShadow:",objj_msgSend(_57,"decodeBoolForKey:",_53));
objj_msgSend(_55,"setImageAlignment:",objj_msgSend(_57,"decodeIntForKey:",_52));
if(objj_msgSend(_57,"decodeBoolForKey:",_54)||NO){
objj_msgSend(_55,"setEditable:",YES);
}
objj_msgSend(_55,"setNeedsLayout");
objj_msgSend(_55,"setNeedsDisplay:",YES);
}
return _55;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_58,_59,_5a){
with(_58){
if(_shadowView){
var _5b=_subviews;
_subviews=objj_msgSend(_subviews,"copy");
objj_msgSend(_subviews,"removeObjectIdenticalTo:",_shadowView);
}
objj_msgSendSuper({receiver:_58,super_class:objj_getClass("CPImageView").super_class},"encodeWithCoder:",_5a);
if(_shadowView){
_subviews=_5b;
}
objj_msgSend(_5a,"encodeBool:forKey:",_hasShadow,_53);
objj_msgSend(_5a,"encodeInt:forKey:",_imageAlignment,_52);
if(_isEditable){
objj_msgSend(_5a,"encodeBool:forKey:",_isEditable,_54);
}
}
})]);
p;14;CPKeyBinding.jt;9570;@STATIC;1.0;I;21;Foundation/CPObject.ji;9;CPEvent.jt;9512;
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("CPEvent.j",YES);
CPStandardKeyBindings={"@.":"cancelOperation:","^a":"moveToBeginningOfParagraph:","^$a":"moveToBeginningOfParagraphAndModifySelection:","^b":"moveBackward:","^$b":"moveBackwardAndModifySelection:","^~b":"moveWordBackward:","^~$b":"moveWordBackwardAndModifySelection:","^d":"deleteForward:","^e":"moveToEndOfParagraph:","^$e":"moveToEndOfParagraphAndModifySelection:","^f":"moveForward:","^$f":"moveForwardAndModifySelection:","^~f":"moveWordForward:","^~$f":"moveWordForwardAndModifySelection:","^h":"deleteBackward:","^k":"deleteToEndOfParagraph:","^l":"centerSelectionInVisibleArea:","^n":"moveDown:","^$n":"moveDownAndModifySelection:","^o":["insertNewlineIgnoringFieldEditor:","moveBackward:"],"^p":"moveUp:","^$p":"moveUpAndModifySelection:","^t":"transpose:","^v":"pageDown:","^$v":"pageDownAndModifySelection:","^y":"yank:"};
CPStandardKeyBindings[CPNewlineCharacter]="insertNewline:";
CPStandardKeyBindings[CPCarriageReturnCharacter]="insertNewline:";
CPStandardKeyBindings[CPEnterCharacter]="insertNewline:";
CPStandardKeyBindings["~"+CPNewlineCharacter]="insertNewlineIgnoringFieldEditor:";
CPStandardKeyBindings["~"+CPCarriageReturnCharacter]="insertNewlineIgnoringFieldEditor:";
CPStandardKeyBindings["~"+CPEnterCharacter]="insertNewlineIgnoringFieldEditor:";
CPStandardKeyBindings["^"+CPNewlineCharacter]="insertLineBreak:";
CPStandardKeyBindings["^"+CPCarriageReturnCharacter]="insertLineBreak:";
CPStandardKeyBindings["^"+CPEnterCharacter]="insertLineBreak:";
CPStandardKeyBindings[CPBackspaceCharacter]="deleteBackward:";
CPStandardKeyBindings["~"+CPBackspaceCharacter]="deleteWordBackward:";
CPStandardKeyBindings[CPDeleteCharacter]="deleteBackward:";
CPStandardKeyBindings["@"+CPDeleteCharacter]="deleteToBeginningOfLine:";
CPStandardKeyBindings["~"+CPDeleteCharacter]="deleteWordBackward:";
CPStandardKeyBindings["^"+CPDeleteCharacter]="deleteBackwardByDecomposingPreviousCharacter:";
CPStandardKeyBindings["^~"+CPDeleteCharacter]="deleteWordBackward:";
CPStandardKeyBindings[CPDeleteFunctionKey]="deleteForward:";
CPStandardKeyBindings["~"+CPDeleteFunctionKey]="deleteWordForward:";
CPStandardKeyBindings[CPTabCharacter]="insertTab:";
CPStandardKeyBindings["~"+CPTabCharacter]="insertTabIgnoringFieldEditor:";
CPStandardKeyBindings["^"+CPTabCharacter]="selectNextKeyView:";
CPStandardKeyBindings[CPBackTabCharacter]="insertBacktab:";
CPStandardKeyBindings["^"+CPBackTabCharacter]="selectPreviousKeyView:";
CPStandardKeyBindings[CPEscapeFunctionKey]="cancelOperation:";
CPStandardKeyBindings["~"+CPEscapeFunctionKey]="complete:";
CPStandardKeyBindings[CPF5FunctionKey]="complete:";
CPStandardKeyBindings[CPLeftArrowFunctionKey]="moveLeft:";
CPStandardKeyBindings["~"+CPLeftArrowFunctionKey]="moveWordLeft:";
CPStandardKeyBindings["^"+CPLeftArrowFunctionKey]="moveToLeftEndOfLine:";
CPStandardKeyBindings["@"+CPLeftArrowFunctionKey]="moveToLeftEndOfLine:";
CPStandardKeyBindings["$"+CPLeftArrowFunctionKey]="moveLeftAndModifySelection:";
CPStandardKeyBindings["$~"+CPLeftArrowFunctionKey]="moveWordLeftAndModifySelection:";
CPStandardKeyBindings["$^"+CPLeftArrowFunctionKey]="moveToLeftEndOfLineAndModifySelection:";
CPStandardKeyBindings["$@"+CPLeftArrowFunctionKey]="moveToLeftEndOfLineAndModifySelection:";
CPStandardKeyBindings["@^"+CPLeftArrowFunctionKey]="makeBaseWritingDirectionRightToLeft:";
CPStandardKeyBindings["@^~"+CPLeftArrowFunctionKey]="makeTextWritingDirectionRightToLeft:";
CPStandardKeyBindings[CPRightArrowFunctionKey]="moveRight:";
CPStandardKeyBindings["~"+CPRightArrowFunctionKey]="moveWordRight:";
CPStandardKeyBindings["^"+CPRightArrowFunctionKey]="moveToRightEndOfLine:";
CPStandardKeyBindings["@"+CPRightArrowFunctionKey]="moveToRightEndOfLine:";
CPStandardKeyBindings["$"+CPRightArrowFunctionKey]="moveRightAndModifySelection:";
CPStandardKeyBindings["$~"+CPRightArrowFunctionKey]="moveWordRightAndModifySelection:";
CPStandardKeyBindings["$^"+CPRightArrowFunctionKey]="moveToRightEndOfLineAndModifySelection:";
CPStandardKeyBindings["$@"+CPRightArrowFunctionKey]="moveToRightEndOfLineAndModifySelection:";
CPStandardKeyBindings["@^"+CPRightArrowFunctionKey]="makeBaseWritingDirectionLeftToRight:";
CPStandardKeyBindings["@^~"+CPRightArrowFunctionKey]="makeTextWritingDirectionLeftToRight:";
CPStandardKeyBindings[CPUpArrowFunctionKey]="moveUp:";
CPStandardKeyBindings["~"+CPUpArrowFunctionKey]=["moveBackward:","moveToBeginningOfParagraph:"];
CPStandardKeyBindings["^"+CPUpArrowFunctionKey]="scrollPageUp:";
CPStandardKeyBindings["@"+CPUpArrowFunctionKey]="moveToBeginningOfDocument:";
CPStandardKeyBindings["$"+CPUpArrowFunctionKey]="moveUpAndModifySelection:";
CPStandardKeyBindings["$~"+CPUpArrowFunctionKey]="moveParagraphBackwardAndModifySelection:";
CPStandardKeyBindings["$@"+CPUpArrowFunctionKey]="moveToBeginningOfDocumentAndModifySelection:";
CPStandardKeyBindings[CPDownArrowFunctionKey]="moveDown:";
CPStandardKeyBindings["~"+CPDownArrowFunctionKey]=["moveForward:","moveToEndOfParagraph:"];
CPStandardKeyBindings["^"+CPDownArrowFunctionKey]="scrollPageDown:";
CPStandardKeyBindings["@"+CPDownArrowFunctionKey]="moveToEndOfDocument:";
CPStandardKeyBindings["$"+CPDownArrowFunctionKey]="moveDownAndModifySelection:";
CPStandardKeyBindings["$~"+CPDownArrowFunctionKey]="moveParagraphForwardAndModifySelection:";
CPStandardKeyBindings["$@"+CPDownArrowFunctionKey]="moveToEndOfDocumentAndModifySelection:";
CPStandardKeyBindings["@^"+CPDownArrowFunctionKey]="makeBaseWritingDirectionNatural:";
CPStandardKeyBindings["@^~"+CPDownArrowFunctionKey]="makeTextWritingDirectionNatural:";
CPStandardKeyBindings[CPHomeFunctionKey]="scrollToBeginningOfDocument:";
CPStandardKeyBindings["$"+CPHomeFunctionKey]="moveToBeginningOfDocumentAndModifySelection:";
CPStandardKeyBindings[CPEndFunctionKey]="scrollToEndOfDocument:";
CPStandardKeyBindings["$"+CPEndFunctionKey]="moveToEndOfDocumentAndModifySelection:";
CPStandardKeyBindings[CPPageUpFunctionKey]="scrollPageUp:";
CPStandardKeyBindings["~"+CPPageUpFunctionKey]="pageUp:";
CPStandardKeyBindings["$"+CPPageUpFunctionKey]="pageUpAndModifySelection:";
CPStandardKeyBindings[CPPageDownFunctionKey]="scrollPageDown:";
CPStandardKeyBindings["~"+CPPageDownFunctionKey]="pageDown:";
CPStandardKeyBindings["$"+CPPageDownFunctionKey]="pageDownAndModifySelection:";
var _1={};
var _2=objj_allocateClassPair(CPObject,"CPKeyBinding"),_3=_2.isa;
class_addIvars(_2,[new objj_ivar("_key"),new objj_ivar("_modifierFlags"),new objj_ivar("_selectors"),new objj_ivar("_cacheName")]);
objj_registerClassPair(_2);
class_addMethods(_2,[new objj_method(sel_getUid("initWithPhysicalKeyString:selectors:"),function(_4,_5,_6,_7){
with(_4){
var _8=_6.split(""),_9=(objj_msgSend(_8,"containsObject:","$")?CPShiftKeyMask:0)|(objj_msgSend(_8,"containsObject:","^")?CPControlKeyMask:0)|(objj_msgSend(_8,"containsObject:","~")?CPAlternateKeyMask:0)|(objj_msgSend(_8,"containsObject:","@")?CPCommandKeyMask:0);
if(!objj_msgSend(_7,"isKindOfClass:",CPArray)){
_7=[_7];
}
return objj_msgSend(_4,"initWithKey:modifierFlags:selectors:",objj_msgSend(_8,"lastObject"),_9,_7);
}
}),new objj_method(sel_getUid("initWithKey:modifierFlags:selectors:"),function(_a,_b,_c,_d,_e){
with(_a){
_a=objj_msgSendSuper({receiver:_a,super_class:objj_getClass("CPKeyBinding").super_class},"init");
if(_a){
_key=_c;
_modifierFlags=_d;
_selectors=_e;
var _f=[];
if(_modifierFlags&CPCommandKeyMask){
_f.push("@");
}
if(_modifierFlags&CPControlKeyMask){
_f.push("^");
}
if(_modifierFlags&CPAlternateKeyMask){
_f.push("~");
}
if(_modifierFlags&CPShiftKeyMask){
_f.push("$");
}
_f.push(_key);
_cacheName=_f.join("");
}
return _a;
}
}),new objj_method(sel_getUid("key"),function(_10,_11){
with(_10){
return _key;
}
}),new objj_method(sel_getUid("modifierFlags"),function(_12,_13){
with(_12){
return _modifierFlags;
}
}),new objj_method(sel_getUid("selectors"),function(_14,_15){
with(_14){
return _selectors;
}
}),new objj_method(sel_getUid("_cacheName"),function(_16,_17){
with(_16){
return _cacheName;
}
}),new objj_method(sel_getUid("isEqual:"),function(_18,_19,rhs){
with(_18){
return _key===objj_msgSend(rhs,"key")&&_modifierFlags===objj_msgSend(rhs,"modifierFlags");
}
}),new objj_method(sel_getUid("description"),function(_1a,_1b){
with(_1a){
return objj_msgSend(CPString,"stringWithFormat:","<KeyBinding string: '%@' modifierFlags: 0x%lx selectors: %@>",_key,_modifierFlags,_selectors);
}
})]);
class_addMethods(_3,[new objj_method(sel_getUid("initialize"),function(_1c,_1d){
with(_1c){
if(objj_msgSend(_1c,"class")!==CPKeyBinding){
return;
}
objj_msgSend(_1c,"createKeyBindingsFromJSObject:",CPStandardKeyBindings);
}
}),new objj_method(sel_getUid("createKeyBindingsFromJSObject:"),function(_1e,_1f,_20){
with(_1e){
var _21;
for(_21 in _20){
objj_msgSend(_1e,"cacheKeyBinding:",objj_msgSend(objj_msgSend(CPKeyBinding,"alloc"),"initWithPhysicalKeyString:selectors:",_21,_20[_21]));
}
}
}),new objj_method(sel_getUid("cacheKeyBinding:"),function(_22,_23,_24){
with(_22){
if(!_24){
return;
}
_1[objj_msgSend(_24,"_cacheName")]=_24;
}
}),new objj_method(sel_getUid("keyBindingForKey:modifierFlags:"),function(_25,_26,_27,_28){
with(_25){
var _29=objj_msgSend(objj_msgSend(_25,"alloc"),"initWithKey:modifierFlags:selectors:",_27,_28,nil);
return _1[objj_msgSend(_29,"_cacheName")];
}
}),new objj_method(sel_getUid("selectorsForKey:modifierFlags:"),function(_2a,_2b,_2c,_2d){
with(_2a){
return objj_msgSend(objj_msgSend(_2a,"keyBindingForKey:modifierFlags:",_2c,_2d),"selectors");
}
})]);
p;19;CPKeyValueBinding.jt;13018;@STATIC;1.0;I;21;Foundation/CPObject.jI;20;Foundation/CPArray.jI;25;Foundation/CPDictionary.jI;31;Foundation/CPValueTransformer.jt;12881;
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("Foundation/CPArray.j",NO);
objj_executeFile("Foundation/CPDictionary.j",NO);
objj_executeFile("Foundation/CPValueTransformer.j",NO);
var _1=objj_msgSend(CPDictionary,"new"),_2=objj_msgSend(CPDictionary,"new");
var _3=0,_4=1;
var _5=objj_allocateClassPair(CPObject,"CPBinder"),_6=_5.isa;
class_addIvars(_5,[new objj_ivar("_info"),new objj_ivar("_source")]);
objj_registerClassPair(_5);
class_addMethods(_5,[new objj_method(sel_getUid("initWithBinding:name:to:keyPath:options:from:"),function(_7,_8,_9,_a,_b,_c,_d,_e){
with(_7){
_7=objj_msgSendSuper({receiver:_7,super_class:objj_getClass("CPBinder").super_class},"init");
if(_7){
_source=_e;
_info=objj_msgSend(CPDictionary,"dictionaryWithObjects:forKeys:",[_b,_c],[CPObservedObjectKey,CPObservedKeyPathKey]);
if(_d){
objj_msgSend(_info,"setObject:forKey:",_d,CPOptionsKey);
}
objj_msgSend(_b,"addObserver:forKeyPath:options:context:",_7,_c,CPKeyValueObservingOptionNew,_9);
var _f=objj_msgSend(_2,"objectForKey:",objj_msgSend(_source,"UID"));
if(!_f){
_f=objj_msgSend(CPDictionary,"new");
objj_msgSend(_2,"setObject:forKey:",_f,objj_msgSend(_source,"UID"));
}
objj_msgSend(_f,"setObject:forKey:",_7,_a);
objj_msgSend(_7,"setValueFor:",_9);
}
return _7;
}
}),new objj_method(sel_getUid("setValueFor:"),function(_10,_11,_12){
with(_10){
var _13=objj_msgSend(_info,"objectForKey:",CPObservedObjectKey),_14=objj_msgSend(_info,"objectForKey:",CPObservedKeyPathKey),_15=objj_msgSend(_info,"objectForKey:",CPOptionsKey),_16=objj_msgSend(_13,"valueForKeyPath:",_14);
_16=objj_msgSend(_10,"transformValue:withOptions:",_16,_15);
objj_msgSend(_source,"setValue:forKey:",_16,_12);
}
}),new objj_method(sel_getUid("reverseSetValueFor:"),function(_17,_18,_19){
with(_17){
var _1a=objj_msgSend(_info,"objectForKey:",CPObservedObjectKey),_1b=objj_msgSend(_info,"objectForKey:",CPObservedKeyPathKey),_1c=objj_msgSend(_info,"objectForKey:",CPOptionsKey),_1d=objj_msgSend(_source,"valueForKeyPath:",_19);
_1d=objj_msgSend(_17,"reverseTransformValue:withOptions:",_1d,_1c);
objj_msgSend(_1a,"setValue:forKeyPath:",_1d,_1b);
}
}),new objj_method(sel_getUid("observeValueForKeyPath:ofObject:change:context:"),function(_1e,_1f,_20,_21,_22,_23){
with(_1e){
if(!_22){
return;
}
objj_msgSend(_1e,"setValueFor:",_23);
}
}),new objj_method(sel_getUid("transformValue:withOptions:"),function(_24,_25,_26,_27){
with(_24){
var _28,_29,_2a;
var _28=objj_msgSend(_27,"objectForKey:",CPValueTransformerNameBindingOption),_29;
if(_28){
_29=objj_msgSend(CPValueTransformer,"valueTransformerForName:",_28);
if(!_29){
var _2b=CPClassFromString(_28);
if(_2b){
_29=objj_msgSend(objj_msgSend(_2b,"alloc"),"init");
objj_msgSend(_2b,"setValueTransformer:forName:",_29,_28);
}
}
}else{
_29=objj_msgSend(_27,"objectForKey:",CPValueTransformerBindingOption);
}
if(_29){
_26=objj_msgSend(_29,"transformedValue:",_26);
}
if(_26===undefined||_26===nil||_26===objj_msgSend(CPNull,"null")){
_26=objj_msgSend(_27,"objectForKey:",CPNullPlaceholderBindingOption)||nil;
}
return _26;
}
}),new objj_method(sel_getUid("reverseTransformValue:withOptions:"),function(_2c,_2d,_2e,_2f){
with(_2c){
var _30=objj_msgSend(_2f,"objectForKey:",CPValueTransformerNameBindingOption),_31;
if(_30){
_31=objj_msgSend(CPValueTransformer,"valueTransformerForName:",_30);
}else{
_31=objj_msgSend(_2f,"objectForKey:",CPValueTransformerBindingOption);
}
if(_31&&objj_msgSend(objj_msgSend(_31,"class"),"allowsReverseTransformation")){
_2e=objj_msgSend(_31,"reverseTransformedValue:",_2e);
}
return _2e;
}
}),new objj_method(sel_getUid("continuouslyUpdatesValue"),function(_32,_33){
with(_32){
var _34=objj_msgSend(_info,"objectForKey:",CPOptionsKey);
return objj_msgSend(objj_msgSend(_34,"objectForKey:",CPContinuouslyUpdatesValueBindingOption),"boolValue");
}
})]);
class_addMethods(_6,[new objj_method(sel_getUid("exposeBinding:forClass:"),function(_35,_36,_37,_38){
with(_35){
var _39=objj_msgSend(_1,"objectForKey:",objj_msgSend(_38,"UID"));
if(!_39){
_39=[];
objj_msgSend(_1,"setObject:forKey:",_39,objj_msgSend(_38,"UID"));
}
_39.push(_37);
}
}),new objj_method(sel_getUid("exposedBindingsForClass:"),function(_3a,_3b,_3c){
with(_3a){
return objj_msgSend(objj_msgSend(_1,"objectForKey:",objj_msgSend(_3c,"UID")),"copy");
}
}),new objj_method(sel_getUid("getBinding:forObject:"),function(_3d,_3e,_3f,_40){
with(_3d){
return objj_msgSend(objj_msgSend(_2,"objectForKey:",objj_msgSend(_40,"UID")),"objectForKey:",_3f);
}
}),new objj_method(sel_getUid("infoForBinding:forObject:"),function(_41,_42,_43,_44){
with(_41){
var _45=objj_msgSend(_41,"getBinding:forObject:",_43,_44);
if(_45){
return _45._info;
}
return nil;
}
}),new objj_method(sel_getUid("allBindingsForObject:"),function(_46,_47,_48){
with(_46){
return objj_msgSend(_2,"objectForKey:",objj_msgSend(_48,"UID"));
}
}),new objj_method(sel_getUid("unbind:forObject:"),function(_49,_4a,_4b,_4c){
with(_49){
var _4d=objj_msgSend(_2,"objectForKey:",objj_msgSend(_4c,"UID"));
if(!_4d){
return;
}
var _4e=objj_msgSend(_4d,"objectForKey:",_4b);
if(!_4e){
return;
}
var _4f=_4e._info,_50=objj_msgSend(_4f,"objectForKey:",CPObservedObjectKey),_51=objj_msgSend(_4f,"objectForKey:",CPObservedKeyPathKey);
objj_msgSend(_50,"removeObserver:forKeyPath:",_4e,_51);
objj_msgSend(_4d,"removeObjectForKey:",_4b);
}
}),new objj_method(sel_getUid("unbindAllForObject:"),function(_52,_53,_54){
with(_52){
var _55=objj_msgSend(_2,"objectForKey:",objj_msgSend(_54,"UID"));
if(!_55){
return;
}
var _56=objj_msgSend(_55,"allKeys"),_57=_56.length;
while(_57--){
objj_msgSend(_54,"unbind:",objj_msgSend(_55,"objectForKey:",_56[_57]));
}
objj_msgSend(_2,"removeObjectForKey:",objj_msgSend(_54,"UID"));
}
})]);
var _5=objj_getClass("CPObject");
if(!_5){
throw new SyntaxError("*** Could not find definition for class \"CPObject\"");
}
var _6=_5.isa;
class_addMethods(_5,[new objj_method(sel_getUid("exposedBindings"),function(_58,_59){
with(_58){
var _5a=[],_5b=objj_msgSend(_58,"class");
while(_5b){
var _5c=objj_msgSend(CPBinder,"exposedBindingsForClass:",_5b);
if(_5c){
objj_msgSend(_5a,"addObjectsFromArray:",_5c);
}
_5b=objj_msgSend(_5b,"superclass");
}
return _5a;
}
}),new objj_method(sel_getUid("valueClassForBinding:"),function(_5d,_5e,_5f){
with(_5d){
return objj_msgSend(CPString,"class");
}
}),new objj_method(sel_getUid("bind:toObject:withKeyPath:options:"),function(_60,_61,_62,_63,_64,_65){
with(_60){
if(!_63||!_64){
return CPLog.error("Invalid object or path on "+_60+" for "+_62);
}
var _66=objj_msgSend(objj_msgSend(_60,"class"),"_binderClassForBinding:",_62);
objj_msgSend(_60,"unbind:",_62);
objj_msgSend(objj_msgSend(_66,"alloc"),"initWithBinding:name:to:keyPath:options:from:",objj_msgSend(_60,"_replacementKeyPathForBinding:",_62),_62,_63,_64,_65,_60);
}
}),new objj_method(sel_getUid("infoForBinding:"),function(_67,_68,_69){
with(_67){
return objj_msgSend(CPBinder,"infoForBinding:forObject:",_69,_67);
}
}),new objj_method(sel_getUid("unbind:"),function(_6a,_6b,_6c){
with(_6a){
var _6d=objj_msgSend(objj_msgSend(_6a,"class"),"_binderClassForBinding:",_6c);
objj_msgSend(_6d,"unbind:forObject:",_6c,_6a);
}
}),new objj_method(sel_getUid("_replacementKeyPathForBinding:"),function(_6e,_6f,_70){
with(_6e){
return _70;
}
})]);
class_addMethods(_6,[new objj_method(sel_getUid("exposeBinding:"),function(_71,_72,_73){
with(_71){
objj_msgSend(CPBinder,"exposeBinding:forClass:",_73,objj_msgSend(_71,"class"));
}
}),new objj_method(sel_getUid("_binderClassForBinding:"),function(_74,_75,_76){
with(_74){
return objj_msgSend(CPBinder,"class");
}
})]);
var _5=objj_allocateClassPair(CPBinder,"_CPValueBinder"),_6=_5.isa;
objj_registerClassPair(_5);
class_addMethods(_5,[new objj_method(sel_getUid("setValueFor:"),function(_77,_78,_79){
with(_77){
objj_msgSendSuper({receiver:_77,super_class:objj_getClass("_CPValueBinder").super_class},"setValueFor:","objectValue");
}
}),new objj_method(sel_getUid("reverseSetValueFor:"),function(_7a,_7b,_7c){
with(_7a){
objj_msgSendSuper({receiver:_7a,super_class:objj_getClass("_CPValueBinder").super_class},"reverseSetValueFor:","objectValue");
}
})]);
var _5=objj_allocateClassPair(CPBinder,"_CPKeyValueOrBinding"),_6=_5.isa;
objj_registerClassPair(_5);
class_addMethods(_5,[new objj_method(sel_getUid("setValueFor:"),function(_7d,_7e,_7f){
with(_7d){
var _80=objj_msgSend(_2,"valueForKey:",objj_msgSend(_source,"UID"));
if(!_80){
return;
}
objj_msgSend(_source,"setValue:forKey:",_81(_7f,_80,_4),_7f);
}
}),new objj_method(sel_getUid("observeValueForKeyPath:ofObject:change:context:"),function(_82,_83,_84,_85,_86,_87){
with(_82){
objj_msgSend(_82,"setValueFor:",_87);
}
})]);
var _5=objj_allocateClassPair(CPBinder,"_CPKeyValueAndBinding"),_6=_5.isa;
objj_registerClassPair(_5);
class_addMethods(_5,[new objj_method(sel_getUid("setValueFor:"),function(_88,_89,_8a){
with(_88){
var _8b=objj_msgSend(_2,"objectForKey:",objj_msgSend(_source,"UID"));
if(!_8b){
return;
}
objj_msgSend(_source,"setValue:forKey:",_81(_8a,_8b,_3),_8a);
}
}),new objj_method(sel_getUid("observeValueForKeyPath:ofObject:change:context:"),function(_8c,_8d,_8e,_8f,_90,_91){
with(_8c){
objj_msgSend(_8c,"setValueFor:",_91);
}
})]);
var _81=_81=function(key,_92,_93){
var _94=key,_95,_96=1;
while(_95=objj_msgSend(_92,"objectForKey:",_94)){
var _97=_95._info,_98=objj_msgSend(_97,"objectForKey:",CPObservedObjectKey),_99=objj_msgSend(_97,"objectForKey:",CPObservedKeyPathKey),_9a=objj_msgSend(_97,"objectForKey:",CPOptionsKey);
var _9b=objj_msgSend(_95,"transformValue:withOptions:",objj_msgSend(_98,"valueForKeyPath:",_99),_9a);
if(_9b==_93){
return _93;
}
_94=objj_msgSend(CPString,"stringWithFormat:","%@%i",key,++_96);
}
return !_93;
};
var _9c=_9c=function(_9d,_9e,_9f){
var _a0=objj_msgSend(_9f,"objectForKey:",_9d),_a1=_a0._info,_a2=objj_msgSend(_a1,"objectForKey:",CPObservedObjectKey),_a3=objj_msgSend(_a1,"objectForKey:",CPObservedKeyPathKey),_a4=objj_msgSend(_a1,"objectForKey:",CPOptionsKey),_a5=objj_msgSend(_a2,"valueForKeyPath:",_a3),_a6=objj_msgSend(_a4,"objectForKey:",CPSelectorNameBindingOption);
if(!_a5||!_a6){
return;
}
var _a7=objj_msgSend(CPInvocation,"invocationWithMethodSignature:",objj_msgSend(_a5,"methodSignatureForSelector:",_a6));
objj_msgSend(_a7,"setSelector:",_a6);
var _a8=_9e,_a9=1;
while(_a0=objj_msgSend(_9f,"objectForKey:",_a8)){
_a1=_a0._info;
_a3=objj_msgSend(_a1,"objectForKey:",CPObserverKeyPathKey);
_a2=objj_msgSend(objj_msgSend(_a1,"objectForKey:",CPObservedObjectKey),"valueForKeyPath:",_a3);
if(_a2){
objj_msgSend(_a7,"setArgument:atIndex:",_a2,++_a9);
}
_a8=objj_msgSend(CPString,"stringWithFormat:","%@%i",_9e,_a9);
}
objj_msgSend(_a7,"invoke");
};
CPObservedObjectKey="CPObservedObjectKey";
CPObservedKeyPathKey="CPObservedKeyPathKey";
CPOptionsKey="CPOptionsKey";
CPMultipleValuesMarker="CPMultipleValuesMarker";
CPNoSelectionMarker="CPNoSelectionMarker";
CPNotApplicableMarker="CPNotApplicableMarker";
CPNullMarker="CPNullMarker";
CPAlignmentBinding="alignment";
CPEditableBinding="editable";
CPEnabledBinding="enabled";
CPFontBinding="font";
CPHiddenBinding="hidden";
CPSelectedIndexBinding="selectedIndex";
CPTextColorBinding="textColor";
CPToolTipBinding="toolTip";
CPValueBinding="value";
CPAllowsEditingMultipleValuesSelectionBindingOption="CPAllowsEditingMultipleValuesSelection";
CPAllowsNullArgumentBindingOption="CPAllowsNullArgument";
CPConditionallySetsEditableBindingOption="CPConditionallySetsEditable";
CPConditionallySetsEnabledBindingOption="CPConditionallySetsEnabled";
CPConditionallySetsHiddenBindingOption="CPConditionallySetsHidden";
CPContinuouslyUpdatesValueBindingOption="CPContinuouslyUpdatesValue";
CPCreatesSortDescriptorBindingOption="CPCreatesSortDescriptor";
CPDeletesObjectsOnRemoveBindingsOption="CPDeletesObjectsOnRemove";
CPDisplayNameBindingOption="CPDisplayName";
CPDisplayPatternBindingOption="CPDisplayPattern";
CPHandlesContentAsCompoundValueBindingOption="CPHandlesContentAsCompoundValue";
CPInsertsNullPlaceholderBindingOption="CPInsertsNullPlaceholder";
CPInvokesSeparatelyWithArrayObjectsBindingOption="CPInvokesSeparatelyWithArrayObjects";
CPMultipleValuesPlaceholderBindingOption="CPMultipleValuesPlaceholder";
CPNoSelectionPlaceholderBindingOption="CPNoSelectionPlaceholder";
CPNotApplicablePlaceholderBindingOption="CPNotApplicablePlaceholder";
CPNullPlaceholderBindingOption="CPNullPlaceholder";
CPPredicateFormatBindingOption="CPPredicateFormat";
CPRaisesForNotApplicableKeysBindingOption="CPRaisesForNotApplicableKeys";
CPSelectorNameBindingOption="CPSelectorName";
CPSelectsAllWhenSettingContentBindingOption="CPSelectsAllWhenSettingContent";
CPValidatesImmediatelyBindingOption="CPValidatesImmediately";
CPValueTransformerNameBindingOption="CPValueTransformerName";
CPValueTransformerBindingOption="CPValueTransformer";
CPIsControllerMarker=function(_aa){
return _aa===CPMultipleValuesMarker||_aa===CPNoSelectionMarker||_aa===CPNotApplicableMarker||_aa===CPNullMarker;
};
p;20;CPObjectController.jt;19696;@STATIC;1.0;I;25;Foundation/CPDictionary.jI;25;Foundation/CPCountedSet.ji;14;CPController.jt;19597;
objj_executeFile("Foundation/CPDictionary.j",NO);
objj_executeFile("Foundation/CPCountedSet.j",NO);
objj_executeFile("CPController.j",YES);
var _1=objj_allocateClassPair(CPController,"CPObjectController"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_contentObject"),new objj_ivar("_selection"),new objj_ivar("_objectClass"),new objj_ivar("_objectClassName"),new objj_ivar("_isEditable"),new objj_ivar("_automaticallyPreparesContent"),new objj_ivar("_observedKeys")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("init"),function(_3,_4){
with(_3){
return objj_msgSend(_3,"initWithContent:",nil);
}
}),new objj_method(sel_getUid("initWithContent:"),function(_5,_6,_7){
with(_5){
if(_5=objj_msgSendSuper({receiver:_5,super_class:objj_getClass("CPObjectController").super_class},"init")){
objj_msgSend(_5,"setContent:",_7);
objj_msgSend(_5,"setEditable:",YES);
objj_msgSend(_5,"setObjectClass:",objj_msgSend(CPMutableDictionary,"class"));
_observedKeys=objj_msgSend(objj_msgSend(CPCountedSet,"alloc"),"init");
}
return _5;
}
}),new objj_method(sel_getUid("content"),function(_8,_9){
with(_8){
return _contentObject;
}
}),new objj_method(sel_getUid("setContent:"),function(_a,_b,_c){
with(_a){
objj_msgSend(_a,"willChangeValueForKey:","contentObject");
objj_msgSend(_a,"_selectionWillChange");
_contentObject=_c;
objj_msgSend(_a,"didChangeValueForKey:","contentObject");
objj_msgSend(_a,"_selectionDidChange");
}
}),new objj_method(sel_getUid("_setContentObject:"),function(_d,_e,_f){
with(_d){
objj_msgSend(_d,"setContent:",_f);
}
}),new objj_method(sel_getUid("_contentObject"),function(_10,_11){
with(_10){
return objj_msgSend(_10,"content");
}
}),new objj_method(sel_getUid("setAutomaticallyPreparesContent:"),function(_12,_13,_14){
with(_12){
_automaticallyPreparesContent=_14;
}
}),new objj_method(sel_getUid("automaticallyPreparesContent"),function(_15,_16){
with(_15){
return _automaticallyPreparesContent;
}
}),new objj_method(sel_getUid("prepareContent"),function(_17,_18){
with(_17){
objj_msgSend(_17,"setContent:",objj_msgSend(_17,"newObject"));
}
}),new objj_method(sel_getUid("setObjectClass:"),function(_19,_1a,_1b){
with(_19){
_objectClass=_1b;
}
}),new objj_method(sel_getUid("objectClass"),function(_1c,_1d){
with(_1c){
return _objectClass;
}
}),new objj_method(sel_getUid("_defaultNewObject"),function(_1e,_1f){
with(_1e){
return objj_msgSend(objj_msgSend(objj_msgSend(_1e,"objectClass"),"alloc"),"init");
}
}),new objj_method(sel_getUid("newObject"),function(_20,_21){
with(_20){
return objj_msgSend(_20,"_defaultNewObject");
}
}),new objj_method(sel_getUid("addObject:"),function(_22,_23,_24){
with(_22){
objj_msgSend(_22,"setContent:",_24);
var _25=objj_msgSend(objj_msgSend(_22,"class"),"_binderClassForBinding:","contentObject");
objj_msgSend(objj_msgSend(_25,"getBinding:forObject:","contentObject",_22),"reverseSetValueFor:","contentObject");
}
}),new objj_method(sel_getUid("removeObject:"),function(_26,_27,_28){
with(_26){
if(objj_msgSend(_26,"content")===_28){
objj_msgSend(_26,"setContent:",nil);
}
var _29=objj_msgSend(objj_msgSend(_26,"class"),"_binderClassForBinding:","contentObject");
objj_msgSend(objj_msgSend(_29,"getBinding:forObject:","contentObject",_26),"reverseSetValueFor:","contentObject");
}
}),new objj_method(sel_getUid("add:"),function(_2a,_2b,_2c){
with(_2a){
objj_msgSend(_2a,"addObject:",objj_msgSend(_2a,"newObject"));
}
}),new objj_method(sel_getUid("canAdd"),function(_2d,_2e){
with(_2d){
return objj_msgSend(_2d,"isEditable");
}
}),new objj_method(sel_getUid("remove:"),function(_2f,_30,_31){
with(_2f){
objj_msgSend(_2f,"removeObject:",objj_msgSend(_2f,"content"));
}
}),new objj_method(sel_getUid("canRemove"),function(_32,_33){
with(_32){
return objj_msgSend(_32,"isEditable")&&objj_msgSend(objj_msgSend(_32,"selectedObjects"),"count");
}
}),new objj_method(sel_getUid("setEditable:"),function(_34,_35,_36){
with(_34){
_isEditable=_36;
}
}),new objj_method(sel_getUid("isEditable"),function(_37,_38){
with(_37){
return _isEditable;
}
}),new objj_method(sel_getUid("selectedObjects"),function(_39,_3a){
with(_39){
return objj_msgSend(objj_msgSend(_CPObservableArray,"alloc"),"initWithArray:",[_contentObject]);
}
}),new objj_method(sel_getUid("selection"),function(_3b,_3c){
with(_3b){
return _selection;
}
}),new objj_method(sel_getUid("_selectionWillChange"),function(_3d,_3e){
with(_3d){
objj_msgSend(_selection,"controllerWillChange");
objj_msgSend(_3d,"willChangeValueForKey:","selection");
}
}),new objj_method(sel_getUid("_selectionDidChange"),function(_3f,_40){
with(_3f){
if(_selection===undefined||_selection===nil){
_selection=objj_msgSend(objj_msgSend(CPControllerSelectionProxy,"alloc"),"initWithController:",_3f);
}
objj_msgSend(_selection,"controllerDidChange");
objj_msgSend(_3f,"didChangeValueForKey:","selection");
}
}),new objj_method(sel_getUid("observedKeys"),function(_41,_42){
with(_41){
return _observedKeys;
}
}),new objj_method(sel_getUid("addObserver:forKeyPath:options:context:"),function(_43,_44,_45,_46,_47,_48){
with(_43){
objj_msgSend(_observedKeys,"addObject:",_46);
objj_msgSendSuper({receiver:_43,super_class:objj_getClass("CPObjectController").super_class},"addObserver:forKeyPath:options:context:",_45,_46,_47,_48);
}
}),new objj_method(sel_getUid("removeObserver:forKeyPath:"),function(_49,_4a,_4b,_4c){
with(_49){
objj_msgSend(_observedKeys,"removeObject:",_4c);
objj_msgSendSuper({receiver:_49,super_class:objj_getClass("CPObjectController").super_class},"removeObserver:forKeyPath:",_4b,_4c);
}
})]);
class_addMethods(_2,[new objj_method(sel_getUid("initialize"),function(_4d,_4e){
with(_4d){
objj_msgSend(_4d,"exposeBinding:","editable");
objj_msgSend(_4d,"exposeBinding:","contentObject");
}
}),new objj_method(sel_getUid("keyPathsForValuesAffectingContentObject"),function(_4f,_50){
with(_4f){
return objj_msgSend(CPSet,"setWithObjects:","content");
}
}),new objj_method(sel_getUid("automaticallyNotifiesObserversForKey:"),function(_51,_52,_53){
with(_51){
if(_53==="contentObject"){
return NO;
}
return YES;
}
}),new objj_method(sel_getUid("keyPathsForValuesAffectingCanAdd"),function(_54,_55){
with(_54){
return objj_msgSend(CPSet,"setWithObject:","editable");
}
}),new objj_method(sel_getUid("keyPathsForValuesAffectingCanInsert"),function(_56,_57){
with(_56){
return objj_msgSend(CPSet,"setWithObject:","editable");
}
}),new objj_method(sel_getUid("keyPathsForValuesAffectingCanRemove"),function(_58,_59){
with(_58){
return objj_msgSend(CPSet,"setWithObjects:","editable","selection");
}
})]);
var _5a="CPObjectControllerContentKey",_5b="CPObjectControllerObjectClassNameKey",_5c="CPObjectControllerIsEditableKey",_5d="CPObjectControllerAutomaticallyPreparesContentKey";
var _1=objj_getClass("CPObjectController");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"CPObjectController\"");
}
var _2=_1.isa;
class_addMethods(_1,[new objj_method(sel_getUid("initWithCoder:"),function(_5e,_5f,_60){
with(_5e){
_5e=objj_msgSendSuper({receiver:_5e,super_class:objj_getClass("CPObjectController").super_class},"init");
if(_5e){
var _61=objj_msgSend(_60,"decodeObjectForKey:",_5b),_62=CPClassFromString(_61);
objj_msgSend(_5e,"setObjectClass:",_62||objj_msgSend(CPMutableDictionary,"class"));
objj_msgSend(_5e,"setEditable:",objj_msgSend(_60,"decodeBoolForKey:",_5c));
objj_msgSend(_5e,"setAutomaticallyPreparesContent:",objj_msgSend(_60,"decodeBoolForKey:",_5d)||NO);
objj_msgSend(_5e,"setContent:",objj_msgSend(_60,"decodeObjectForKey:",_5a));
_observedKeys=objj_msgSend(objj_msgSend(CPCountedSet,"alloc"),"init");
}
return _5e;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_63,_64,_65){
with(_63){
objj_msgSend(_65,"encodeObject:forKey:",objj_msgSend(_63,"content"),_5a);
if(_objectClass){
objj_msgSend(_65,"encodeObject:forKey:",CPStringFromClass(_objectClass),_5b);
}else{
if(_objectClassName){
objj_msgSend(_65,"encodeObject:forKey:",_objectClassName,_5b);
}
}
objj_msgSend(_65,"encodeBool:forKey:",objj_msgSend(_63,"isEditable"),_5c);
objj_msgSend(_65,"encodeBool:forKey:",objj_msgSend(_63,"automaticallyPreparesContent"),_5d);
}
}),new objj_method(sel_getUid("awakeFromCib"),function(_66,_67){
with(_66){
if(!objj_msgSend(_66,"content")&&objj_msgSend(_66,"automaticallyPreparesContent")){
objj_msgSend(_66,"prepareContent");
}
}
})]);
var _1=objj_allocateClassPair(CPObject,"_CPObservationProxy"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_keyPath"),new objj_ivar("_observer"),new objj_ivar("_object"),new objj_ivar("_notifyObject"),new objj_ivar("_context"),new objj_ivar("_options")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("initWithKeyPath:observer:object:"),function(_68,_69,_6a,_6b,_6c){
with(_68){
if(_68=objj_msgSendSuper({receiver:_68,super_class:objj_getClass("_CPObservationProxy").super_class},"init")){
_keyPath=_6a;
_observer=_6b;
_object=_6c;
}
return _68;
}
}),new objj_method(sel_getUid("observer"),function(_6d,_6e){
with(_6d){
return _observer;
}
}),new objj_method(sel_getUid("keyPath"),function(_6f,_70){
with(_6f){
return _keyPath;
}
}),new objj_method(sel_getUid("context"),function(_71,_72){
with(_71){
return _context;
}
}),new objj_method(sel_getUid("options"),function(_73,_74){
with(_73){
return _options;
}
}),new objj_method(sel_getUid("setNotifyObject:"),function(_75,_76,_77){
with(_75){
_notifyObject=_77;
}
}),new objj_method(sel_getUid("isEqual:"),function(_78,_79,_7a){
with(_78){
if(objj_msgSend(_7a,"class")===objj_msgSend(_78,"class")){
if(_7a._observer===_observer&&objj_msgSend(_7a._keyPath,"isEqual:",_keyPath)&&objj_msgSend(_7a._object,"isEqual:",_object)){
return YES;
}
}
return NO;
}
}),new objj_method(sel_getUid("observeValueForKeyPath:ofObject:change:context:"),function(_7b,_7c,_7d,_7e,_7f,_80){
with(_7b){
if(_notifyObject){
objj_msgSend(_object,"observeValueForKeyPath:ofObject:change:context:",_7d,_object,_7f,_80);
}
objj_msgSend(_observer,"observeValueForKeyPath:ofObject:change:context:",_7d,_object,_7f,_80);
}
}),new objj_method(sel_getUid("description"),function(_81,_82){
with(_81){
return objj_msgSendSuper({receiver:_81,super_class:objj_getClass("_CPObservationProxy").super_class},"description")+objj_msgSend(CPString,"stringWithFormat:","observation proxy for %@ on key path %@",_observer,_keyPath);
}
})]);
var _1=objj_allocateClassPair(_CPJavaScriptArray,"_CPObservableArray"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_observationProxies")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("description"),function(_83,_84){
with(_83){
return "<_CPObservableArray: "+objj_msgSendSuper({receiver:_83,super_class:objj_getClass("_CPObservableArray").super_class},"description")+" >";
}
}),new objj_method(sel_getUid("initWithArray:"),function(_85,_86,_87){
with(_85){
_85=objj_msgSendSuper({receiver:_85,super_class:objj_getClass("_CPObservableArray").super_class},"initWithArray:",_87);
_85.isa=objj_msgSend(_CPObservableArray,"class");
_85._observationProxies=[];
return _85;
}
}),new objj_method(sel_getUid("addObserver:forKeyPath:options:context:"),function(_88,_89,_8a,_8b,_8c,_8d){
with(_88){
if(_8b.indexOf("@")===0){
var _8e=objj_msgSend(objj_msgSend(_CPObservationProxy,"alloc"),"initWithKeyPath:observer:object:",_8b,_8a,_88);
_8e._options=_8c;
_8e._context=_8d;
objj_msgSend(_observationProxies,"addObject:",_8e);
var _8f=_8b.indexOf("."),_90=_8b.substring(_8f+1),_91=objj_msgSend(CPIndexSet,"indexSetWithIndexesInRange:",CPMakeRange(0,objj_msgSend(_88,"count")));
objj_msgSend(_88,"addObserver:toObjectsAtIndexes:forKeyPath:options:context:",_8e,_91,_90,_8c,_8d);
}else{
var _91=objj_msgSend(CPIndexSet,"indexSetWithIndexesInRange:",CPMakeRange(0,objj_msgSend(_88,"count")));
objj_msgSend(_88,"addObserver:toObjectsAtIndexes:forKeyPath:options:context:",_8a,_91,_8b,_8c,_8d);
}
}
}),new objj_method(sel_getUid("removeObserver:forKeyPath:"),function(_92,_93,_94,_95){
with(_92){
if(_95.indexOf("@")===0){
var _96=objj_msgSend(objj_msgSend(_CPObservationProxy,"alloc"),"initWithKeyPath:observer:object:",_95,_94,_92),_97=objj_msgSend(_observationProxies,"indexOfObject:",_96);
_96=objj_msgSend(_observationProxies,"objectAtIndex:",_97);
var _98=_95.indexOf("."),_99=_95.substring(_98+1),_9a=objj_msgSend(CPIndexSet,"indexSetWithIndexesInRange:",CPMakeRange(0,objj_msgSend(_92,"count")));
objj_msgSend(_92,"removeObserver:fromObjectsAtIndexes:forKeyPath:",_96,_9a,_99);
}else{
var _9a=objj_msgSend(CPIndexSet,"indexSetWithIndexesInRange:",CPMakeRange(0,objj_msgSend(_92,"count")));
objj_msgSend(_92,"removeObserver:fromObjectsAtIndexes:forKeyPath:",_94,_9a,_95);
}
}
}),new objj_method(sel_getUid("insertObject:atIndex:"),function(_9b,_9c,_9d,_9e){
with(_9b){
for(var i=0,_9f=objj_msgSend(_observationProxies,"count");i<_9f;i++){
var _a0=objj_msgSend(_observationProxies,"objectAtIndex:",i),_a1=objj_msgSend(_a0,"keyPath"),_a2=_a1.indexOf(".")===0;
if(_a2){
objj_msgSend(_9b,"willChangeValueForKey:",_a1);
}
objj_msgSend(_9d,"addObserver:forKeyPath:options:context:",_a0,_a1,objj_msgSend(_a0,"options"),objj_msgSend(_a0,"context"));
if(_a2){
objj_msgSend(_9b,"didChangeValueForKey:",_a1);
}
}
objj_msgSendSuper({receiver:_9b,super_class:objj_getClass("_CPObservableArray").super_class},"insertObject:atIndex:",_9d,_9e);
}
}),new objj_method(sel_getUid("removeObjectAtIndex:"),function(_a3,_a4,_a5){
with(_a3){
for(var i=0,_a6=objj_msgSend(_observationProxies,"count");i<_a6;i++){
var _a7=objj_msgSend(_observationProxies,"objectAtIndex:",i),_a8=objj_msgSend(_a7,"keyPath"),_a9=_a8.indexOf(".")===0;
if(_a9){
objj_msgSend(_a3,"willChangeValueForKey:",_a8);
}
objj_msgSend(anObject,"removeObserver:forKeyPath:",_a7,_a8);
if(_a9){
objj_msgSend(_a3,"didChangeValueForKey:",_a8);
}
}
objj_msgSendSuper({receiver:_a3,super_class:objj_getClass("_CPObservableArray").super_class},"removeObjectAtIndex:",_a5);
}
}),new objj_method(sel_getUid("objectsAtIndexes:"),function(_aa,_ab,_ac){
with(_aa){
return objj_msgSend(_CPObservableArray,"arrayWithArray:",objj_msgSendSuper({receiver:_aa,super_class:objj_getClass("_CPObservableArray").super_class},"objectsAtIndexes:",_ac));
}
}),new objj_method(sel_getUid("addObject:"),function(_ad,_ae,_af){
with(_ad){
objj_msgSend(_ad,"insertObject:atIndex:",_af,objj_msgSend(_ad,"count"));
}
}),new objj_method(sel_getUid("removeLastObject"),function(_b0,_b1){
with(_b0){
objj_msgSend(_b0,"removeObjectAtIndex:",objj_msgSend(_b0,"count"));
}
}),new objj_method(sel_getUid("replaceObjectAtIndex:withObject:"),function(_b2,_b3,_b4,_b5){
with(_b2){
var _b6=objj_msgSend(_b2,"objectAtIndex:",_b4);
for(var i=0,_b7=objj_msgSend(_observationProxies,"count");i<_b7;i++){
var _b8=objj_msgSend(_observationProxies,"objectAtIndex:",i),_b9=objj_msgSend(_b8,"keyPath"),_ba=_b9.indexOf(".")===0;
if(_ba){
objj_msgSend(_b2,"willChangeValueForKey:",_b9);
}
objj_msgSend(_b6,"removeObserver:forKeyPath:",_b8,_b9);
objj_msgSend(_b5,"addObserver:forKeyPath:options:context:",_b8,_b9,objj_msgSend(_b8,"options"),objj_msgSend(_b8,"context"));
if(_ba){
objj_msgSend(_b2,"didChangeValueForKey:",_b9);
}
}
objj_msgSendSuper({receiver:_b2,super_class:objj_getClass("_CPObservableArray").super_class},"replaceObjectAtIndex:withObject:",_b4,_b5);
}
})]);
class_addMethods(_2,[new objj_method(sel_getUid("alloc"),function(_bb,_bc){
with(_bb){
var a=[];
a.isa=_bb;
var _bd=class_copyIvarList(_bb),_be=_bd.length;
while(_be--){
a[ivar_getName(_bd[_be])]=nil;
}
return a;
}
})]);
var _1=objj_allocateClassPair(CPObject,"CPControllerSelectionProxy"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_controller"),new objj_ivar("_keys"),new objj_ivar("_cachedValues"),new objj_ivar("_observationProxies"),new objj_ivar("_observedObjectsByKeyPath")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("initWithController:"),function(_bf,_c0,_c1){
with(_bf){
if(_bf=objj_msgSendSuper({receiver:_bf,super_class:objj_getClass("CPControllerSelectionProxy").super_class},"init")){
_cachedValues=objj_msgSend(CPDictionary,"dictionary");
_observationProxies=objj_msgSend(CPArray,"array");
_controller=_c1;
_observedObjectsByKeyPath={};
}
return _bf;
}
}),new objj_method(sel_getUid("_controllerMarkerForValues:"),function(_c2,_c3,_c4){
with(_c2){
var _c5=objj_msgSend(_c4,"count");
if(!_c5){
value=CPNoSelectionMarker;
}else{
if(_c5===1){
value=objj_msgSend(_c4,"objectAtIndex:",0);
}else{
if(objj_msgSend(_controller,"alwaysUsesMultipleValuesMarker")){
value=CPMultipleValuesMarker;
}else{
value=objj_msgSend(_c4,"objectAtIndex:",0);
for(var i=0,_c5=objj_msgSend(_c4,"count");i<_c5&&value!=CPMultipleValuesMarker;i++){
if(!objj_msgSend(value,"isEqual:",objj_msgSend(_c4,"objectAtIndex:",i))){
value=CPMultipleValuesMarker;
}
}
}
}
}
if(value===nil||value.isa&&objj_msgSend(value,"isEqual:",objj_msgSend(CPNull,"null"))){
value=CPNullMarker;
}
return value;
}
}),new objj_method(sel_getUid("valueForKeyPath:"),function(_c6,_c7,_c8){
with(_c6){
var _c9=objj_msgSend(objj_msgSend(_controller,"selectedObjects"),"valueForKeyPath:",_c8);
value=objj_msgSend(_c6,"_controllerMarkerForValues:",_c9);
objj_msgSend(_cachedValues,"setObject:forKey:",value,_c8);
return value;
}
}),new objj_method(sel_getUid("valueForKey:"),function(_ca,_cb,_cc){
with(_ca){
return objj_msgSend(_ca,"valueForKeyPath:",_cc);
}
}),new objj_method(sel_getUid("setValue:forKeyPath:"),function(_cd,_ce,_cf,_d0){
with(_cd){
objj_msgSend(objj_msgSend(_controller,"selectedObjects"),"setValue:forKeyPath:",_cf,_d0);
objj_msgSend(_cachedValues,"removeObjectForKey:",_d0);
}
}),new objj_method(sel_getUid("setValue:forKey:"),function(_d1,_d2,_d3,_d4){
with(_d1){
objj_msgSend(_d1,"setValue:forKeyPath:",_d4,_d4);
}
}),new objj_method(sel_getUid("count"),function(_d5,_d6){
with(_d5){
return objj_msgSend(_cachedValues,"count");
}
}),new objj_method(sel_getUid("keyEnumerator"),function(_d7,_d8){
with(_d7){
return objj_msgSend(_cachedValues,"keyEnumerator");
}
}),new objj_method(sel_getUid("controllerWillChange"),function(_d9,_da){
with(_d9){
_keys=objj_msgSend(_cachedValues,"allKeys");
if(!_keys){
return;
}
for(var i=0,_db=_keys.length;i<_db;i++){
objj_msgSend(_d9,"willChangeValueForKey:",_keys[i]);
}
objj_msgSend(_cachedValues,"removeAllObjects");
}
}),new objj_method(sel_getUid("controllerDidChange"),function(_dc,_dd){
with(_dc){
objj_msgSend(_cachedValues,"removeAllObjects");
if(!_keys){
return;
}
for(var i=0,_de=_keys.length;i<_de;i++){
objj_msgSend(_dc,"didChangeValueForKey:",_keys[i]);
}
_keys=nil;
}
}),new objj_method(sel_getUid("observeValueForKeyPath:ofObject:change:context:"),function(_df,_e0,_e1,_e2,_e3,_e4){
with(_df){
objj_msgSend(_cachedValues,"removeObjectForKey:",_e1);
}
}),new objj_method(sel_getUid("addObserver:forKeyPath:options:context:"),function(_e5,_e6,_e7,_e8,_e9,_ea){
with(_e5){
var _eb=objj_msgSend(objj_msgSend(_CPObservationProxy,"alloc"),"initWithKeyPath:observer:object:",_e8,_e7,_e5);
objj_msgSend(_eb,"setNotifyObject:",YES);
objj_msgSend(_observationProxies,"addObject:",_eb);
var _ec=objj_msgSend(_controller,"selectedObjects");
_observedObjectsByKeyPath[_e8]=_ec;
objj_msgSend(_ec,"addObserver:forKeyPath:options:context:",_eb,_e8,_e9,_ea);
}
}),new objj_method(sel_getUid("removeObserver:forKeyPath:"),function(_ed,_ee,_ef,_f0){
with(_ed){
var _f1=objj_msgSend(objj_msgSend(_CPObservationProxy,"alloc"),"initWithKeyPath:observer:object:",_f0,_ef,_ed),_f2=objj_msgSend(_observationProxies,"indexOfObject:",_f1);
var _f3=_observedObjectsByKeyPath[_f0];
objj_msgSend(_f3,"removeObserver:forKeyPath:",objj_msgSend(_observationProxies,"objectAtIndex:",_f2),_f0);
objj_msgSend(_observationProxies,"removeObjectAtIndex:",_f2);
_observedObjects=nil;
}
})]);
p;13;CPOpenPanel.jt;2065;@STATIC;1.0;i;9;CPPanel.jt;2033;
objj_executeFile("CPPanel.j",YES);
var _1=objj_allocateClassPair(CPPanel,"CPOpenPanel"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_canChooseFiles"),new objj_ivar("_canChooseDirectories"),new objj_ivar("_allowsMultipleSelection"),new objj_ivar("_directoryURL"),new objj_ivar("_URLs")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("canChooseFiles"),function(_3,_4){
with(_3){
return _canChooseFiles;
}
}),new objj_method(sel_getUid("setCanChooseFiles:"),function(_5,_6,_7){
with(_5){
_canChooseFiles=_7;
}
}),new objj_method(sel_getUid("canChooseDirectories"),function(_8,_9){
with(_8){
return _canChooseDirectories;
}
}),new objj_method(sel_getUid("setCanChooseDirectories:"),function(_a,_b,_c){
with(_a){
_canChooseDirectories=_c;
}
}),new objj_method(sel_getUid("allowsMultipleSelection"),function(_d,_e){
with(_d){
return _allowsMultipleSelection;
}
}),new objj_method(sel_getUid("setAllowsMultipleSelection:"),function(_f,_10,_11){
with(_f){
_allowsMultipleSelection=_11;
}
}),new objj_method(sel_getUid("directoryURL"),function(_12,_13){
with(_12){
return _directoryURL;
}
}),new objj_method(sel_getUid("setDirectoryURL:"),function(_14,_15,_16){
with(_14){
_directoryURL=_16;
}
}),new objj_method(sel_getUid("runModal"),function(_17,_18){
with(_17){
if(typeof window["cpOpenPanel"]==="function"){
objj_msgSend(objj_msgSend(CPRunLoop,"currentRunLoop"),"limitDateForMode:",CPDefaultRunLoopMode);
var _19={directoryURL:objj_msgSend(_17,"directoryURL"),canChooseFiles:objj_msgSend(_17,"canChooseFiles"),canChooseDirectories:objj_msgSend(_17,"canChooseDirectories"),allowsMultipleSelection:objj_msgSend(_17,"allowsMultipleSelection")};
var _1a=window.cpOpenPanel(_19);
_URLs=_1a.URLs;
return _1a.button;
}
throw "-runModal is unimplemented.";
}
}),new objj_method(sel_getUid("URLs"),function(_1b,_1c){
with(_1b){
return _URLs;
}
})]);
class_addMethods(_2,[new objj_method(sel_getUid("openPanel"),function(_1d,_1e){
with(_1d){
return objj_msgSend(objj_msgSend(CPOpenPanel,"alloc"),"init");
}
})]);
p;15;CPOutlineView.jt;45371;@STATIC;1.0;i;15;CPTableColumn.ji;13;CPTableView.jt;45313;
objj_executeFile("CPTableColumn.j",YES);
objj_executeFile("CPTableView.j",YES);
CPOutlineViewColumnDidMoveNotification="CPOutlineViewColumnDidMoveNotification";
CPOutlineViewColumnDidResizeNotification="CPOutlineViewColumnDidResizeNotification";
CPOutlineViewItemDidCollapseNotification="CPOutlineViewItemDidCollapseNotification";
CPOutlineViewItemDidExpandNotification="CPOutlineViewItemDidExpandNotification";
CPOutlineViewItemWillCollapseNotification="CPOutlineViewItemWillCollapseNotification";
CPOutlineViewItemWillExpandNotification="CPOutlineViewItemWillExpandNotification";
CPOutlineViewSelectionDidChangeNotification="CPOutlineViewSelectionDidChangeNotification";
CPOutlineViewSelectionIsChangingNotification="CPOutlineViewSelectionIsChangingNotification";
var _1=1<<1,_2=1<<2,_3=1<<3,_4=1<<4,_5=1<<5,_6=1<<6,_7=1<<7,_8=1<<8,_9=1<<9,_a=1<<10;
var _b=1<<1,_c=1<<2,_d=1<<3,_e=1<<4,_f=1<<5,_10=1<<6,_11=1<<7,_12=1<<8,_13=1<<9,_14=1<<10,_15=1<<11,_16=1<<12,_17=1<<13,_18=1<<14,_19=1<<15,_1a=1<<16,_1b=1<<17,_1c=1<<18,_1d=1<<19,_1e=1<<20,_1f=1<<21,_20=1<<22,_21=1<<23,_22=1<<24,_23=1<<25;
CPOutlineViewDropOnItemIndex=-1;
var _24=0,_25=1,_26=2;
var _27=objj_allocateClassPair(CPTableView,"CPOutlineView"),_28=_27.isa;
class_addIvars(_27,[new objj_ivar("_outlineViewDataSource"),new objj_ivar("_outlineViewDelegate"),new objj_ivar("_outlineTableColumn"),new objj_ivar("_indentationPerLevel"),new objj_ivar("_indentationMarkerFollowsDataView"),new objj_ivar("_implementedOutlineViewDataSourceMethods"),new objj_ivar("_implementedOutlineViewDelegateMethods"),new objj_ivar("_rootItemInfo"),new objj_ivar("_itemsForRows"),new objj_ivar("_itemInfosForItems"),new objj_ivar("_disclosureControlPrototype"),new objj_ivar("_disclosureControlsForRows"),new objj_ivar("_disclosureControlData"),new objj_ivar("_disclosureControlQueue"),new objj_ivar("_shouldRetargetItem"),new objj_ivar("_retargetedItem"),new objj_ivar("_shouldRetargetChildIndex"),new objj_ivar("_retargedChildIndex"),new objj_ivar("_dragHoverTimer"),new objj_ivar("_dropItem"),new objj_ivar("_coalesceSelectionNotificationState")]);
objj_registerClassPair(_27);
class_addMethods(_27,[new objj_method(sel_getUid("initWithFrame:"),function(_29,_2a,_2b){
with(_29){
_29=objj_msgSendSuper({receiver:_29,super_class:objj_getClass("CPOutlineView").super_class},"initWithFrame:",_2b);
if(_29){
_selectionHighlightStyle=CPTableViewSelectionHighlightStyleSourceList;
_rootItemInfo={isExpanded:YES,isExpandable:NO,level:-1,row:-1,children:[],weight:0};
_itemsForRows=[];
_itemInfosForItems={};
_disclosureControlsForRows=[];
_retargetedItem=nil;
_shouldRetargetItem=NO;
_retargedChildIndex=nil;
_shouldRetargetChildIndex=NO;
_startHoverTime=nil;
objj_msgSend(_29,"setIndentationPerLevel:",16);
objj_msgSend(_29,"setIndentationMarkerFollowsDataView:",YES);
objj_msgSendSuper({receiver:_29,super_class:objj_getClass("CPOutlineView").super_class},"setDataSource:",objj_msgSend(objj_msgSend(_CPOutlineViewTableViewDataSource,"alloc"),"initWithOutlineView:",_29));
objj_msgSendSuper({receiver:_29,super_class:objj_getClass("CPOutlineView").super_class},"setDelegate:",objj_msgSend(objj_msgSend(_CPOutlineViewTableViewDelegate,"alloc"),"initWithOutlineView:",_29));
objj_msgSend(_29,"setDisclosureControlPrototype:",objj_msgSend(objj_msgSend(CPDisclosureButton,"alloc"),"initWithFrame:",CGRectMake(0,0,10,10)));
}
return _29;
}
}),new objj_method(sel_getUid("setDataSource:"),function(_2c,_2d,_2e){
with(_2c){
if(_outlineViewDataSource===_2e){
return;
}
if(!objj_msgSend(_2e,"respondsToSelector:",sel_getUid("outlineView:child:ofItem:"))){
objj_msgSend(CPException,"raise:reason:",CPInternalInconsistencyException,"Data source must implement 'outlineView:child:ofItem:'");
}
if(!objj_msgSend(_2e,"respondsToSelector:",sel_getUid("outlineView:isItemExpandable:"))){
objj_msgSend(CPException,"raise:reason:",CPInternalInconsistencyException,"Data source must implement 'outlineView:isItemExpandable:'");
}
if(!objj_msgSend(_2e,"respondsToSelector:",sel_getUid("outlineView:numberOfChildrenOfItem:"))){
objj_msgSend(CPException,"raise:reason:",CPInternalInconsistencyException,"Data source must implement 'outlineView:numberOfChildrenOfItem:'");
}
if(!objj_msgSend(_2e,"respondsToSelector:",sel_getUid("outlineView:objectValueForTableColumn:byItem:"))){
objj_msgSend(CPException,"raise:reason:",CPInternalInconsistencyException,"Data source must implement 'outlineView:objectValueForTableColumn:byItem:'");
}
_outlineViewDataSource=_2e;
_implementedOutlineViewDataSourceMethods=0;
if(objj_msgSend(_outlineViewDataSource,"respondsToSelector:",sel_getUid("outlineView:setObjectValue:forTableColumn:byItem:"))){
_implementedOutlineViewDataSourceMethods|=_1;
}
if(objj_msgSend(_outlineViewDataSource,"respondsToSelector:",sel_getUid("outlineView:shouldDeferDisplayingChildrenOfItem:"))){
_implementedOutlineViewDataSourceMethods|=_2;
}
if(objj_msgSend(_outlineViewDataSource,"respondsToSelector:",sel_getUid("outlineView:acceptDrop:item:childIndex:"))){
_implementedOutlineViewDataSourceMethods|=_3;
}
if(objj_msgSend(_outlineViewDataSource,"respondsToSelector:",sel_getUid("outlineView:validateDrop:proposedItem:proposedChildIndex:"))){
_implementedOutlineViewDataSourceMethods|=_4;
}
if(objj_msgSend(_outlineViewDataSource,"respondsToSelector:",sel_getUid("outlineView:validateDrop:proposedRow:proposedDropOperation:"))){
_implementedOutlineViewDataSourceMethods|=_5;
}
if(objj_msgSend(_outlineViewDataSource,"respondsToSelector:",sel_getUid("outlineView:namesOfPromisedFilesDroppedAtDestination:forDraggedItems:"))){
_implementedOutlineViewDataSourceMethods|=_6;
}
if(objj_msgSend(_outlineViewDataSource,"respondsToSelector:",sel_getUid("outlineView:itemForPersistentObject:"))){
_implementedOutlineViewDataSourceMethods|=_7;
}
if(objj_msgSend(_outlineViewDataSource,"respondsToSelector:",sel_getUid("outlineView:persistentObjectForItem:"))){
_implementedOutlineViewDataSourceMethods|=_8;
}
if(objj_msgSend(_outlineViewDataSource,"respondsToSelector:",sel_getUid("outlineView:writeItems:toPasteboard:"))){
_implementedOutlineViewDataSourceMethods|=_9;
}
if(objj_msgSend(_outlineViewDataSource,"respondsToSelector:",sel_getUid("outlineView:sortDescriptorsDidChange:"))){
_implementedOutlineViewDataSourceMethods|=_a;
}
objj_msgSend(_2c,"reloadData");
}
}),new objj_method(sel_getUid("dataSource"),function(_2f,_30){
with(_2f){
return _outlineViewDataSource;
}
}),new objj_method(sel_getUid("isExpandable:"),function(_31,_32,_33){
with(_31){
if(!_33){
return YES;
}
var _34=_itemInfosForItems[objj_msgSend(_33,"UID")];
if(!_34){
return NO;
}
return _34.isExpandable;
}
}),new objj_method(sel_getUid("isItemExpanded:"),function(_35,_36,_37){
with(_35){
if(!_37){
return YES;
}
var _38=_itemInfosForItems[objj_msgSend(_37,"UID")];
if(!_38){
return NO;
}
return _38.isExpanded;
}
}),new objj_method(sel_getUid("expandItem:"),function(_39,_3a,_3b){
with(_39){
objj_msgSend(_39,"expandItem:expandChildren:",_3b,NO);
}
}),new objj_method(sel_getUid("expandItem:expandChildren:"),function(_3c,_3d,_3e,_3f){
with(_3c){
var _40=null;
if(!_3e){
_40=_rootItemInfo;
}else{
_40=_itemInfosForItems[objj_msgSend(_3e,"UID")];
}
if(!_40){
return;
}
var _41=NO;
if(!_coalesceSelectionNotificationState){
_41=YES;
_coalesceSelectionNotificationState=_25;
}
if(!_40.isExpanded){
objj_msgSend(_3c,"_noteItemWillExpand:",_3e);
var _42=objj_msgSend(_3c,"numberOfRows");
_40.isExpanded=YES;
objj_msgSend(_3c,"_noteItemDidExpand:",_3e);
objj_msgSend(_3c,"reloadItem:reloadChildren:",_3e,YES);
var _43=objj_msgSend(_3c,"numberOfRows")-_42;
if(_43){
var _44=objj_msgSend(_3c,"selectedRowIndexes"),_45=objj_msgSend(_3c,"rowForItem:",_3e)+1;
if(objj_msgSend(_44,"intersectsIndexesInRange:",CPMakeRange(_45,_itemsForRows.length))){
objj_msgSend(_3c,"_noteSelectionIsChanging");
objj_msgSend(_44,"shiftIndexesStartingAtIndex:by:",_45,_43);
objj_msgSend(_3c,"_setSelectedRowIndexes:",_44);
}
}
}
if(_3f){
var _46=_40.children,_47=_46.length;
while(_47--){
objj_msgSend(_3c,"expandItem:expandChildren:",_46[_47],YES);
}
}
if(_41){
var r=_coalesceSelectionNotificationState;
_coalesceSelectionNotificationState=_24;
if(r===_26){
objj_msgSend(_3c,"_noteSelectionDidChange");
}
}
}
}),new objj_method(sel_getUid("collapseItem:"),function(_48,_49,_4a){
with(_48){
if(!_4a){
return;
}
var _4b=_itemInfosForItems[objj_msgSend(_4a,"UID")];
if(!_4b){
return;
}
if(!_4b.isExpanded){
return;
}
_coalesceSelectionNotificationState=_25;
objj_msgSend(_48,"_noteItemWillCollapse:",_4a);
var _4c=objj_msgSend(_48,"rowForItem:",_4a),_4d=objj_msgSend(_48,"levelForRow:",_4c),_4e=_4c;
while(_4e+1<_itemsForRows.length&&objj_msgSend(_48,"levelForRow:",_4e+1)>_4d){
_4e++;
}
var _4f=CPMakeRange(_4c+1,_4e-_4c);
if(_4f.length){
var _50=objj_msgSend(_48,"selectedRowIndexes");
if(objj_msgSend(_50,"intersectsIndexesInRange:",_4f)){
objj_msgSend(_48,"_noteSelectionIsChanging");
objj_msgSend(_50,"removeIndexesInRange:",_4f);
objj_msgSend(_48,"_setSelectedRowIndexes:",_50);
}
if(objj_msgSend(_50,"intersectsIndexesInRange:",CPMakeRange(_4e+1,_itemsForRows.length))){
objj_msgSend(_48,"_noteSelectionIsChanging");
objj_msgSend(_50,"shiftIndexesStartingAtIndex:by:",_4e+1,-_4f.length);
objj_msgSend(_48,"_setSelectedRowIndexes:",_50);
}
}
_4b.isExpanded=NO;
objj_msgSend(_48,"_noteItemDidCollapse:",_4a);
objj_msgSend(_48,"reloadItem:reloadChildren:",_4a,YES);
var r=_coalesceSelectionNotificationState;
_coalesceSelectionNotificationState=_24;
if(r===_26){
objj_msgSend(_48,"_noteSelectionDidChange");
}
}
}),new objj_method(sel_getUid("reloadItem:"),function(_51,_52,_53){
with(_51){
objj_msgSend(_51,"reloadItem:reloadChildren:",_53,NO);
}
}),new objj_method(sel_getUid("reloadItem:reloadChildren:"),function(_54,_55,_56,_57){
with(_54){
if(!!_57||!_56){
_58(_54,_56);
}else{
_59(_54,_56);
}
objj_msgSendSuper({receiver:_54,super_class:objj_getClass("CPOutlineView").super_class},"reloadData");
}
}),new objj_method(sel_getUid("itemAtRow:"),function(_5a,_5b,_5c){
with(_5a){
return _itemsForRows[_5c]||nil;
}
}),new objj_method(sel_getUid("rowForItem:"),function(_5d,_5e,_5f){
with(_5d){
if(!_5f){
return _rootItemInfo.row;
}
var _60=_itemInfosForItems[objj_msgSend(_5f,"UID")];
if(!_60){
return CPNotFound;
}
return _60.row;
}
}),new objj_method(sel_getUid("setOutlineTableColumn:"),function(_61,_62,_63){
with(_61){
if(_outlineTableColumn===_63){
return;
}
_outlineTableColumn=_63;
objj_msgSend(_61,"reloadData");
}
}),new objj_method(sel_getUid("outlineTableColumn"),function(_64,_65){
with(_64){
return _outlineTableColumn;
}
}),new objj_method(sel_getUid("levelForItem:"),function(_66,_67,_68){
with(_66){
if(!_68){
return _rootItemInfo.level;
}
var _69=_itemInfosForItems[objj_msgSend(_68,"UID")];
if(!_69){
return CPNotFound;
}
return _69.level;
}
}),new objj_method(sel_getUid("levelForRow:"),function(_6a,_6b,_6c){
with(_6a){
return objj_msgSend(_6a,"levelForItem:",objj_msgSend(_6a,"itemAtRow:",_6c));
}
}),new objj_method(sel_getUid("setIndentationPerLevel:"),function(_6d,_6e,_6f){
with(_6d){
if(_indentationPerLevel===_6f){
return;
}
_indentationPerLevel=_6f;
objj_msgSend(_6d,"reloadData");
}
}),new objj_method(sel_getUid("indentationPerLevel"),function(_70,_71){
with(_70){
return _indentationPerLevel;
}
}),new objj_method(sel_getUid("setIndentationMarkerFollowsDataView:"),function(_72,_73,_74){
with(_72){
if(_indentationMarkerFollowsDataView===_74){
return;
}
_indentationMarkerFollowsDataView=_74;
objj_msgSend(_72,"reloadData");
}
}),new objj_method(sel_getUid("indentationMarkerFollowsDataView"),function(_75,_76){
with(_75){
return _indentationMarkerFollowsDataView;
}
}),new objj_method(sel_getUid("parentForItem:"),function(_77,_78,_79){
with(_77){
if(!_79){
return nil;
}
var _7a=_itemInfosForItems[objj_msgSend(_79,"UID")];
if(!_7a){
return nil;
}
var _7b=_7a.parent;
if(_7a[objj_msgSend(_7b,"UID")]===_rootItemInfo){
_7b=nil;
}
return _7b;
}
}),new objj_method(sel_getUid("_frameOfOutlineDataViewAtRow:"),function(_7c,_7d,_7e){
with(_7c){
var _7f=objj_msgSend(objj_msgSend(_7c,"tableColumns"),"indexOfObject:",_outlineTableColumn),_80=objj_msgSendSuper({receiver:_7c,super_class:objj_getClass("CPOutlineView").super_class},"frameOfDataViewAtColumn:row:",_7f,_7e),_81=(objj_msgSend(_7c,"levelForRow:",_7e)+1)*objj_msgSend(_7c,"indentationPerLevel");
_80.origin.x+=_81;
_80.size.width-=_81;
return _80;
}
}),new objj_method(sel_getUid("frameOfOutlineDisclosureControlAtRow:"),function(_82,_83,_84){
with(_82){
if(!objj_msgSend(_82,"isExpandable:",objj_msgSend(_82,"itemAtRow:",_84))){
return {origin:{x:0,y:0},size:{width:0,height:0}};
}
var _85=objj_msgSend(_82,"_frameOfOutlineDataViewAtRow:",_84),_86={origin:{x:(_85.origin.x)-10,y:(_85.origin.y)},size:{width:10,height:(_85.size.height)}};
return _86;
}
}),new objj_method(sel_getUid("_performSelection:forRow:context:"),function(_87,_88,_89,_8a,_8b){
with(_87){
objj_msgSendSuper({receiver:_87,super_class:objj_getClass("CPOutlineView").super_class},"_performSelection:forRow:context:",_89,_8a,_8b);
var _8c=_disclosureControlsForRows[_8a],_8d=_89?"setThemeState:":"unsetThemeState:";
objj_msgSend(_8c,"performSelector:withObject:",CPSelectorFromString(_8d),CPThemeStateSelected);
}
}),new objj_method(sel_getUid("setDelegate:"),function(_8e,_8f,_90){
with(_8e){
if(_outlineViewDelegate===_90){
return;
}
var _91=objj_msgSend(CPNotificationCenter,"defaultCenter");
if(_outlineViewDelegate){
if(objj_msgSend(_outlineViewDelegate,"respondsToSelector:",sel_getUid("outlineViewColumnDidMove:"))){
objj_msgSend(_91,"removeObserver:name:object:",_outlineViewDelegate,CPOutlineViewColumnDidMoveNotification,_8e);
}
if(objj_msgSend(_outlineViewDelegate,"respondsToSelector:",sel_getUid("outlineViewColumnDidResize:"))){
objj_msgSend(_91,"removeObserver:name:object:",_outlineViewDelegate,CPOutlineViewColumnDidResizeNotification,_8e);
}
if(objj_msgSend(_outlineViewDelegate,"respondsToSelector:",sel_getUid("outlineViewSelectionDidChange:"))){
objj_msgSend(_91,"removeObserver:name:object:",_outlineViewDelegate,CPOutlineViewSelectionDidChangeNotification,_8e);
}
if(objj_msgSend(_outlineViewDelegate,"respondsToSelector:",sel_getUid("outlineViewSelectionIsChanging:"))){
objj_msgSend(_91,"removeObserver:name:object:",_outlineViewDelegate,CPOutlineViewSelectionIsChangingNotification,_8e);
}
if(objj_msgSend(_outlineViewDelegate,"respondsToSelector:",sel_getUid("outlineViewItemWillExpand:"))){
objj_msgSend(_91,"removeObserver:name:object:",_outlineViewDelegate,CPOutlineViewItemWillExpandNotification,_8e);
}
if(objj_msgSend(_outlineViewDelegate,"respondsToSelector:",sel_getUid("outlineViewItemDidExpand:"))){
objj_msgSend(_91,"removeObserver:name:object:",_outlineViewDelegate,CPOutlineViewItemDidExpandNotification,_8e);
}
if(objj_msgSend(_outlineViewDelegate,"respondsToSelector:",sel_getUid("outlineViewItemWillCollapse:"))){
objj_msgSend(_91,"removeObserver:name:object:",_outlineViewDelegate,CPOutlineViewItemWillCollapseNotification,_8e);
}
if(objj_msgSend(_outlineViewDelegate,"respondsToSelector:",sel_getUid("outlineViewItemDidCollapse:"))){
objj_msgSend(_91,"removeObserver:name:object:",_outlineViewDelegate,CPOutlineViewItemDidCollapseNotification,_8e);
}
}
_outlineViewDelegate=_90;
_implementedOutlineViewDelegateMethods=0;
var _92=[_b,sel_getUid("outlineView:dataViewForTableColumn:item:"),_c,sel_getUid("outlineView:didClickTableColumn:"),_d,sel_getUid("outlineView:didDragTableColumn:"),_e,sel_getUid("outlineView:heightOfRowByItem:"),_f,sel_getUid("outlineView:isGroupItem:"),_10,sel_getUid("outlineView:mouseDownInHeaderOfTableColumn:"),_11,sel_getUid("outlineView:nextTypeSelectMatchFromItem:toItem:forString:"),_12,sel_getUid("outlineView:selectionIndexesForProposedSelection:"),_13,sel_getUid("outlineView:shouldCollapseItem:"),_14,sel_getUid("outlineView:shouldEditTableColumn:item:"),_15,sel_getUid("outlineView:shouldExpandItem:"),_16,sel_getUid("outlineView:shouldReorderColumn:toColumn:"),_17,sel_getUid("outlineView:shouldSelectItem:"),_18,sel_getUid("outlineView:shouldSelectTableColumn:"),_19,sel_getUid("outlineView:shouldShowOutlineViewForItem:"),_1a,sel_getUid("outlineView:shouldShowViewExpansionForTableColumn:item:"),_1b,sel_getUid("outlineView:shouldTrackView:forTableColumn:item:"),_1c,sel_getUid("outlineView:shouldTypeSelectForEvent:withCurrentSearchString:"),_1d,sel_getUid("outlineView:sizeToFitWidthOfColumn:"),_1e,sel_getUid("outlineView:toolTipForView:rect:tableColumn:item:mouseLocation:"),_1f,sel_getUid("outlineView:typeSelectStringForTableColumn:item:"),_20,sel_getUid("outlineView:willDisplayOutlineView:forTableColumn:item:"),_21,sel_getUid("outlineView:willDisplayView:forTableColumn:item:"),_22,sel_getUid("selectionShouldChangeInOutlineView:"),_23,sel_getUid("outlineView:menuForTableColumn:item:")],_93=objj_msgSend(_92,"count");
for(var i=0;i<_93;i+=2){
var _94=_92[i],_95=_92[i+1];
if(objj_msgSend(_outlineViewDelegate,"respondsToSelector:",_95)){
_implementedOutlineViewDelegateMethods|=_94;
}
}
if(objj_msgSend(_outlineViewDelegate,"respondsToSelector:",sel_getUid("outlineViewColumnDidMove:"))){
objj_msgSend(_91,"addObserver:selector:name:object:",_outlineViewDelegate,sel_getUid("outlineViewColumnDidMove:"),CPOutlineViewColumnDidMoveNotification,_8e);
}
if(objj_msgSend(_outlineViewDelegate,"respondsToSelector:",sel_getUid("outlineViewColumnDidResize:"))){
objj_msgSend(_91,"addObserver:selector:name:object:",_outlineViewDelegate,sel_getUid("outlineViewColumnDidMove:"),CPOutlineViewColumnDidResizeNotification,_8e);
}
if(objj_msgSend(_outlineViewDelegate,"respondsToSelector:",sel_getUid("outlineViewSelectionDidChange:"))){
objj_msgSend(_91,"addObserver:selector:name:object:",_outlineViewDelegate,sel_getUid("outlineViewSelectionDidChange:"),CPOutlineViewSelectionDidChangeNotification,_8e);
}
if(objj_msgSend(_outlineViewDelegate,"respondsToSelector:",sel_getUid("outlineViewSelectionIsChanging:"))){
objj_msgSend(_91,"addObserver:selector:name:object:",_outlineViewDelegate,sel_getUid("outlineViewSelectionIsChanging:"),CPOutlineViewSelectionIsChangingNotification,_8e);
}
if(objj_msgSend(_outlineViewDelegate,"respondsToSelector:",sel_getUid("outlineViewItemWillExpand:"))){
objj_msgSend(_91,"addObserver:selector:name:object:",_outlineViewDelegate,sel_getUid("outlineViewItemWillExpand:"),CPOutlineViewItemWillExpandNotification,_8e);
}
if(objj_msgSend(_outlineViewDelegate,"respondsToSelector:",sel_getUid("outlineViewItemDidExpand:"))){
objj_msgSend(_91,"addObserver:selector:name:object:",_outlineViewDelegate,sel_getUid("outlineViewItemDidExpand:"),CPOutlineViewItemDidExpandNotification,_8e);
}
if(objj_msgSend(_outlineViewDelegate,"respondsToSelector:",sel_getUid("outlineViewItemWillCollapse:"))){
objj_msgSend(_91,"addObserver:selector:name:object:",_outlineViewDelegate,sel_getUid("outlineViewItemWillCollapse:"),CPOutlineViewItemWillCollapseNotification,_8e);
}
if(objj_msgSend(_outlineViewDelegate,"respondsToSelector:",sel_getUid("outlineViewItemDidCollapse:"))){
objj_msgSend(_91,"addObserver:selector:name:object:",_outlineViewDelegate,sel_getUid("outlineViewItemDidCollapse:"),CPOutlineViewItemDidCollapseNotification,_8e);
}
}
}),new objj_method(sel_getUid("_sendDelegateDeleteKeyPressed"),function(_96,_97){
with(_96){
if(objj_msgSend(objj_msgSend(_96,"delegate"),"respondsToSelector:",sel_getUid("outlineViewDeleteKeyPressed:"))){
objj_msgSend(objj_msgSend(_96,"delegate"),"outlineViewDeleteKeyPressed:",_96);
return YES;
}
return NO;
}
}),new objj_method(sel_getUid("delegate"),function(_98,_99){
with(_98){
return _outlineViewDelegate;
}
}),new objj_method(sel_getUid("setDisclosureControlPrototype:"),function(_9a,_9b,_9c){
with(_9a){
_disclosureControlPrototype=_9c;
_disclosureControlData=nil;
_disclosureControlQueue=[];
objj_msgSend(_9a,"reloadData");
}
}),new objj_method(sel_getUid("reloadData"),function(_9d,_9e){
with(_9d){
objj_msgSend(_9d,"reloadItem:reloadChildren:",nil,YES);
}
}),new objj_method(sel_getUid("addTableColumn:"),function(_9f,_a0,_a1){
with(_9f){
objj_msgSendSuper({receiver:_9f,super_class:objj_getClass("CPOutlineView").super_class},"addTableColumn:",_a1);
if(objj_msgSend(_9f,"numberOfColumns")===1){
_outlineTableColumn=_a1;
}
}
}),new objj_method(sel_getUid("removeTableColumn:"),function(_a2,_a3,_a4){
with(_a2){
if(_a4===objj_msgSend(_a2,"outlineTableColumn")){
CPLog("CPOutlineView cannot remove outlineTableColumn with removeTableColumn:. User setOutlineTableColumn: instead.");
}else{
objj_msgSendSuper({receiver:_a2,super_class:objj_getClass("CPOutlineView").super_class},"removeTableColumn:",_a4);
}
}
}),new objj_method(sel_getUid("frameOfDataViewAtColumn:row:"),function(_a5,_a6,_a7,_a8){
with(_a5){
var _a9=objj_msgSend(_a5,"tableColumns")[_a7];
if(_a9===_outlineTableColumn){
return objj_msgSend(_a5,"_frameOfOutlineDataViewAtRow:",_a8);
}
return objj_msgSendSuper({receiver:_a5,super_class:objj_getClass("CPOutlineView").super_class},"frameOfDataViewAtColumn:row:",_a7,_a8);
}
}),new objj_method(sel_getUid("_dragViewForColumn:event:offset:"),function(_aa,_ab,_ac,_ad,_ae){
with(_aa){
var _af=objj_msgSend(objj_msgSend(_CPColumnDragView,"alloc"),"initWithLineColor:",objj_msgSend(_aa,"gridColor")),_b0=objj_msgSend(objj_msgSend(_aa,"tableColumns"),"objectAtIndex:",_ac),_b1={origin:{x:0,y:0},size:{width:objj_msgSend(_b0,"width"),height:(objj_msgSend(_aa,"exposedRect").size.height)+23}},_b2=objj_msgSend(_aa,"rectOfColumn:",_ac),_b3=objj_msgSend(_b0,"headerView"),row=objj_msgSend(_exposedRows,"firstIndex");
while(row!==CPNotFound){
var _b4=objj_msgSend(_aa,"_newDataViewForRow:tableColumn:",row,_b0),_b5=objj_msgSend(_aa,"frameOfDataViewAtColumn:row:",_ac,row);
_b5.origin.x=0;
_b5.origin.y=((_b5.origin.y)-(objj_msgSend(_aa,"exposedRect").origin.y))+23;
objj_msgSend(_b4,"setFrame:",_b5);
objj_msgSend(_b4,"setObjectValue:",objj_msgSend(_aa,"_objectValueForTableColumn:row:",_b0,row));
if(_b0===_outlineTableColumn){
var _b6=(objj_msgSend(_aa,"levelForRow:",row)+1)*objj_msgSend(_aa,"indentationPerLevel");
_b5.origin.x+=_b6;
_b5.size.width-=_b6;
objj_msgSend(_b4,"setFrame:",_b5);
}
objj_msgSend(_af,"addSubview:",_b4);
row=objj_msgSend(_exposedRows,"indexGreaterThanIndex:",row);
}
var _b7=objj_msgSend(_b3,"frame");
_b7.origin={x:0,y:0};
var _b8=objj_msgSend(objj_msgSend(_CPTableColumnHeaderView,"alloc"),"initWithFrame:",_b7);
objj_msgSend(_b8,"setStringValue:",objj_msgSend(_b3,"stringValue"));
objj_msgSend(_b8,"setThemeState:",objj_msgSend(_b3,"themeState"));
objj_msgSend(_af,"addSubview:",_b8);
objj_msgSend(_af,"setBackgroundColor:",objj_msgSend(CPColor,"whiteColor"));
objj_msgSend(_af,"setAlphaValue:",0.7);
objj_msgSend(_af,"setFrame:",_b1);
return _af;
}
}),new objj_method(sel_getUid("setDropItem:dropChildIndex:"),function(_b9,_ba,_bb,_bc){
with(_b9){
if(_dropItem!==_bb&&_bc<0&&objj_msgSend(_b9,"isExpandable:",_bb)&&!objj_msgSend(_b9,"isItemExpanded:",_bb)){
if(_dragHoverTimer){
objj_msgSend(_dragHoverTimer,"invalidate");
}
var _bd=function(){
if(_dropItem){
objj_msgSend(_dropOperationFeedbackView,"blink");
objj_msgSend(CPTimer,"scheduledTimerWithTimeInterval:callback:repeats:",0.3,objj_msgSend(_b9,"expandItem:",_dropItem),NO);
}
};
_dragHoverTimer=objj_msgSend(CPTimer,"scheduledTimerWithTimeInterval:callback:repeats:",0.8,_bd,NO);
}
if(_bc>=0){
objj_msgSend(_dragHoverTimer,"invalidate");
_dragHoverTimer=nil;
}
_dropItem=_bb;
_retargetedItem=_bb;
_shouldRetargetItem=YES;
_retargedChildIndex=_bc;
_shouldRetargetChildIndex=YES;
var _be=(_retargetedItem!==nil)?_itemInfosForItems[objj_msgSend(_retargetedItem,"UID")]:_rootItemInfo;
if(_retargedChildIndex===objj_msgSend(_be.children,"count")){
var _bf=objj_msgSend(_be.children,"lastObject");
_retargetedDropRow=objj_msgSend(_b9,"rowForItem:",_bf)+1;
}else{
var _bf=(_retargedChildIndex!==CPOutlineViewDropOnItemIndex)?_be.children[_retargedChildIndex]:_retargetedItem;
_retargetedDropRow=objj_msgSend(_b9,"rowForItem:",_bf);
}
}
}),new objj_method(sel_getUid("_draggingEnded"),function(_c0,_c1){
with(_c0){
objj_msgSendSuper({receiver:_c0,super_class:objj_getClass("CPOutlineView").super_class},"_draggingEnded");
_dropItem=nil;
objj_msgSend(_dragHoverTimer,"invalidate");
_dragHoverTimer=nil;
}
}),new objj_method(sel_getUid("_parentItemForUpperRow:andLowerRow:atMouseOffset:"),function(_c2,_c3,_c4,_c5,_c6){
with(_c2){
if(_shouldRetargetItem){
return _retargetedItem;
}
var _c7=objj_msgSend(_c2,"levelForRow:",_c5),_c8=objj_msgSend(_c2,"itemAtRow:",_c4),_c9=objj_msgSend(_c2,"levelForItem:",_c8);
while(_c9>_c7){
_c9=objj_msgSend(_c2,"levelForItem:",_c8);
if(_c6.x>(_c9+1)*objj_msgSend(_c2,"indentationPerLevel")){
return objj_msgSend(_c2,"parentForItem:",_c8);
}
_c8=objj_msgSend(_c2,"parentForItem:",_c8);
}
return objj_msgSend(_c2,"parentForItem:",objj_msgSend(_c2,"itemAtRow:",_c5));
}
}),new objj_method(sel_getUid("_rectForDropHighlightViewBetweenUpperRow:andLowerRow:offset:"),function(_ca,_cb,_cc,_cd,_ce){
with(_ca){
var _cf=objj_msgSendSuper({receiver:_ca,super_class:objj_getClass("CPOutlineView").super_class},"_rectForDropHighlightViewBetweenUpperRow:andLowerRow:offset:",_cc,_cd,_ce),_d0=objj_msgSend(_ca,"_parentItemForUpperRow:andLowerRow:atMouseOffset:",_cc,_cd,_ce),_d1=objj_msgSend(_ca,"levelForItem:",_d0);
_cf.origin.x=(_d1+1)*objj_msgSend(_ca,"indentationPerLevel");
_cf.size.width-=_cf.origin.x;
return _cf;
}
}),new objj_method(sel_getUid("_layoutDataViewsInRows:columns:"),function(_d2,_d3,_d4,_d5){
with(_d2){
var _d6=[],_d7=[];
objj_msgSend(_d4,"getIndexes:maxCount:inIndexRange:",_d6,-1,nil);
objj_msgSend(_d5,"getIndexes:maxCount:inIndexRange:",_d7,-1,nil);
var _d8=0,_d9=_d7.length;
for(;_d8<_d9;++_d8){
var _da=_d7[_d8],_db=_tableColumns[_da],_dc=objj_msgSend(_db,"UID"),_dd=_dataViewsForTableColumns[_dc],_de=0,_df=_d6.length;
for(;_de<_df;++_de){
var row=_d6[_de],_e0=_dd[row],_e1=objj_msgSend(_d2,"frameOfDataViewAtColumn:row:",_da,row);
objj_msgSend(_e0,"setFrame:",_e1);
if(_db===_outlineTableColumn){
var _e2=_disclosureControlsForRows[row],_e3=objj_msgSend(_d2,"frameOfOutlineDisclosureControlAtRow:",row);
objj_msgSend(_e2,"setFrame:",_e3);
}
}
}
}
}),new objj_method(sel_getUid("_loadDataViewsInRows:columns:"),function(_e4,_e5,_e6,_e7){
with(_e4){
objj_msgSendSuper({receiver:_e4,super_class:objj_getClass("CPOutlineView").super_class},"_loadDataViewsInRows:columns:",_e6,_e7);
var _e8=objj_msgSend(objj_msgSend(_e4,"tableColumns"),"indexOfObjectIdenticalTo:",objj_msgSend(_e4,"outlineTableColumn"));
if(!objj_msgSend(_e7,"containsIndex:",_e8)||objj_msgSend(_e4,"outlineTableColumn")===_draggedColumn){
return;
}
var _e9=[];
objj_msgSend(_e6,"getIndexes:maxCount:inIndexRange:",_e9,-1,nil);
var _ea=0,_eb=_e9.length;
for(;_ea<_eb;++_ea){
var row=_e9[_ea],_ec=_itemsForRows[row],_ed=objj_msgSend(_e4,"isExpandable:",_ec);
if(!_ed){
continue;
}
var _ee=objj_msgSend(_e4,"_dequeueDisclosureControl");
_disclosureControlsForRows[row]=_ee;
objj_msgSend(_ee,"setState:",objj_msgSend(_e4,"isItemExpanded:",_ec)?CPOnState:CPOffState);
var _ef=objj_msgSend(_e4,"isRowSelected:",row)?"setThemeState:":"unsetThemeState:";
objj_msgSend(_ee,"performSelector:withObject:",CPSelectorFromString(_ef),CPThemeStateSelected);
objj_msgSend(_ee,"setFrame:",objj_msgSend(_e4,"frameOfOutlineDisclosureControlAtRow:",row));
objj_msgSend(_e4,"addSubview:",_ee);
}
}
}),new objj_method(sel_getUid("_unloadDataViewsInRows:columns:"),function(_f0,_f1,_f2,_f3){
with(_f0){
objj_msgSendSuper({receiver:_f0,super_class:objj_getClass("CPOutlineView").super_class},"_unloadDataViewsInRows:columns:",_f2,_f3);
var _f4=objj_msgSend(objj_msgSend(_f0,"tableColumns"),"indexOfObjectIdenticalTo:",objj_msgSend(_f0,"outlineTableColumn"));
if(!objj_msgSend(_f3,"containsIndex:",_f4)){
return;
}
var _f5=[];
objj_msgSend(_f2,"getIndexes:maxCount:inIndexRange:",_f5,-1,nil);
var _f6=0,_f7=_f5.length;
for(;_f6<_f7;++_f6){
var row=_f5[_f6],_f8=_disclosureControlsForRows[row];
if(!_f8){
continue;
}
objj_msgSend(_f8,"removeFromSuperview");
objj_msgSend(_f0,"_enqueueDisclosureControl:",_f8);
_disclosureControlsForRows[row]=nil;
}
}
}),new objj_method(sel_getUid("_toggleFromDisclosureControl:"),function(_f9,_fa,_fb){
with(_f9){
var _fc=objj_msgSend(_fb,"frame"),_fd=objj_msgSend(_f9,"itemAtRow:",objj_msgSend(_f9,"rowAtPoint:",{x:(_fc.origin.x),y:(_fc.origin.y+(_fc.size.height)/2)}));
if(objj_msgSend(_f9,"isItemExpanded:",_fd)){
objj_msgSend(_f9,"collapseItem:",_fd);
}else{
objj_msgSend(_f9,"expandItem:",_fd);
}
}
}),new objj_method(sel_getUid("_enqueueDisclosureControl:"),function(_fe,_ff,_100){
with(_fe){
_disclosureControlQueue.push(_100);
}
}),new objj_method(sel_getUid("_dequeueDisclosureControl"),function(self,_101){
with(self){
if(_disclosureControlQueue.length){
return _disclosureControlQueue.pop();
}
if(!_disclosureControlData){
if(!_disclosureControlPrototype){
return nil;
}else{
_disclosureControlData=objj_msgSend(CPKeyedArchiver,"archivedDataWithRootObject:",_disclosureControlPrototype);
}
}
var _102=objj_msgSend(CPKeyedUnarchiver,"unarchiveObjectWithData:",_disclosureControlData);
objj_msgSend(_102,"setTarget:",self);
objj_msgSend(_102,"setAction:",sel_getUid("_toggleFromDisclosureControl:"));
return _102;
}
}),new objj_method(sel_getUid("_noteSelectionIsChanging"),function(self,_103){
with(self){
if(!_coalesceSelectionNotificationState||_coalesceSelectionNotificationState===_25){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:userInfo:",CPOutlineViewSelectionIsChangingNotification,self,nil);
}
if(_coalesceSelectionNotificationState===_25){
_coalesceSelectionNotificationState=_26;
}
}
}),new objj_method(sel_getUid("_noteSelectionDidChange"),function(self,_104){
with(self){
if(!_coalesceSelectionNotificationState){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:userInfo:",CPOutlineViewSelectionDidChangeNotification,self,nil);
}
if(_coalesceSelectionNotificationState===_25){
_coalesceSelectionNotificationState=_26;
}
}
}),new objj_method(sel_getUid("_noteItemWillExpand:"),function(self,_105,item){
with(self){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:userInfo:",CPOutlineViewItemWillExpandNotification,self,objj_msgSend(CPDictionary,"dictionaryWithObject:forKey:",item,"CPObject"));
}
}),new objj_method(sel_getUid("_noteItemDidExpand:"),function(self,_106,item){
with(self){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:userInfo:",CPOutlineViewItemDidExpandNotification,self,objj_msgSend(CPDictionary,"dictionaryWithObject:forKey:",item,"CPObject"));
}
}),new objj_method(sel_getUid("_noteItemWillCollapse:"),function(self,_107,item){
with(self){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:userInfo:",CPOutlineViewItemWillCollapseNotification,self,objj_msgSend(CPDictionary,"dictionaryWithObject:forKey:",item,"CPObject"));
}
}),new objj_method(sel_getUid("_noteItemDidCollapse:"),function(self,_108,item){
with(self){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:userInfo:",CPOutlineViewItemDidCollapseNotification,self,objj_msgSend(CPDictionary,"dictionaryWithObject:forKey:",item,"CPObject"));
}
})]);
var _59=function(_109,_10a){
if(!_10a){
return;
}
with(_109){
var _10b=_itemInfosForItems,_10c=_outlineViewDataSource,_10d=objj_msgSend(_10a,"UID"),_10e=_10b[_10d];
if(!_10e){
return [];
}
var _10f=_10e.parent,_110=_10f?_10b[objj_msgSend(_10f,"UID")]:_rootItemInfo,_111=_110.children,_112=objj_msgSend(_111,"indexOfObjectIdenticalTo:",_10a),_113=objj_msgSend(_10c,"outlineView:child:ofItem:",_109,_112,_10f);
if(_10a!==_113){
_10b[objj_msgSend(_10a,"UID")]=nil;
_10b[objj_msgSend(_113,"UID")]=_10e;
_111[_112]=_113;
_itemsForRows[_10e.row]=_113;
}
_10e.isExpandable=objj_msgSend(_10c,"outlineView:isItemExpandable:",_109,_113);
_10e.isExpanded=_10e.isExpandable&&_10e.isExpanded;
}
};
var _58=function(_114,_115,_116){
with(_114){
var _117=_itemInfosForItems,_118=_outlineViewDataSource;
if(!_115){
var _119=_rootItemInfo;
}else{
var _11a=objj_msgSend(_115,"UID"),_119=_117[_11a];
if(!_119){
return [];
}
_119.isExpandable=objj_msgSend(_118,"outlineView:isItemExpandable:",_114,_115);
if(!_119.isExpandable&&_119.isExpanded){
_119.isExpanded=NO;
_119.children=[];
}
}
var _11b=_119.weight,_11c=_115?[_115]:[];
if(_119.isExpanded&&(!(_implementedOutlineViewDataSourceMethods&_2)||!objj_msgSend(_118,"outlineView:shouldDeferDisplayingChildrenOfItem:",_114,_115))){
var _11d=0,_11e=objj_msgSend(_118,"outlineView:numberOfChildrenOfItem:",_114,_115),_11f=_119.level+1;
_119.children=[];
for(;_11d<_11e;++_11d){
var _120=objj_msgSend(_118,"outlineView:child:ofItem:",_114,_11d,_115),_121=_117[objj_msgSend(_120,"UID")];
if(!_121){
_121={isExpanded:NO,isExpandable:NO,children:[],weight:1};
_117[objj_msgSend(_120,"UID")]=_121;
}
_119.children[_11d]=_120;
var _122=_58(_114,_120,YES);
_121.parent=_115;
_121.level=_11f;
_11c=_11c.concat(_122);
}
}
_119.weight=_11c.length;
if(!_116){
var _11d=MAX(_119.row,0),_123=_itemsForRows;
_11c.unshift(_11d,_11b);
_123.splice.apply(_123,_11c);
var _11e=_123.length;
for(;_11d<_11e;++_11d){
_117[objj_msgSend(_123[_11d],"UID")].row=_11d;
}
var _124=_119.weight-_11b;
if(_124!==0){
var _125=_119.parent;
while(_125){
var _126=_117[objj_msgSend(_125,"UID")];
_126.weight+=_124;
_125=_126.parent;
}
if(_115){
_rootItemInfo.weight+=_124;
}
}
}
}
return _11c;
};
var _27=objj_allocateClassPair(CPObject,"_CPOutlineViewTableViewDataSource"),_28=_27.isa;
class_addIvars(_27,[new objj_ivar("_outlineView")]);
objj_registerClassPair(_27);
class_addMethods(_27,[new objj_method(sel_getUid("initWithOutlineView:"),function(self,_127,_128){
with(self){
self=objj_msgSendSuper({receiver:self,super_class:objj_getClass("_CPOutlineViewTableViewDataSource").super_class},"init");
if(self){
_outlineView=_128;
}
return self;
}
}),new objj_method(sel_getUid("numberOfRowsInTableView:"),function(self,_129,_12a){
with(self){
return _outlineView._itemsForRows.length;
}
}),new objj_method(sel_getUid("tableView:objectValueForTableColumn:row:"),function(self,_12b,_12c,_12d,aRow){
with(self){
return objj_msgSend(_outlineView._outlineViewDataSource,"outlineView:objectValueForTableColumn:byItem:",_outlineView,_12d,_outlineView._itemsForRows[aRow]);
}
}),new objj_method(sel_getUid("tableView:setObjectValue:forTableColumn:row:"),function(self,_12e,_12f,_130,_131,aRow){
with(self){
if(!(_outlineView._implementedOutlineViewDataSourceMethods&_1)){
return;
}
objj_msgSend(_outlineView._outlineViewDataSource,"outlineView:setObjectValue:forTableColumn:byItem:",_outlineView,_130,_131,_outlineView._itemsForRows[aRow]);
}
}),new objj_method(sel_getUid("tableView:writeRowsWithIndexes:toPasteboard:"),function(self,_132,_133,_134,_135){
with(self){
if(!(_outlineView._implementedOutlineViewDataSourceMethods&_9)){
return NO;
}
var _136=[],_137=objj_msgSend(_134,"firstIndex");
while(_137!==CPNotFound){
objj_msgSend(_136,"addObject:",objj_msgSend(_outlineView,"itemAtRow:",_137));
_137=objj_msgSend(_134,"indexGreaterThanIndex:",_137);
}
return objj_msgSend(_outlineView._outlineViewDataSource,"outlineView:writeItems:toPasteboard:",_outlineView,_136,_135);
}
}),new objj_method(sel_getUid("_childIndexForDropOperation:row:offset:"),function(self,_138,_139,_13a,_13b){
with(self){
if(_outlineView._shouldRetargetChildIndex){
return _outlineView._retargedChildIndex;
}
var _13c=CPNotFound;
if(_139===CPTableViewDropAbove){
var _13d=objj_msgSend(_outlineView,"_parentItemForUpperRow:andLowerRow:atMouseOffset:",_13a-1,_13a,_13b),_13e=(_13d!==nil)?_outlineView._itemInfosForItems[objj_msgSend(_13d,"UID")]:_outlineView._rootItemInfo,_13f=_13e.children;
_13c=objj_msgSend(_13f,"indexOfObject:",objj_msgSend(_outlineView,"itemAtRow:",_13a));
if(_13c===CPNotFound){
_13c=_13f.length;
}
}else{
if(_139===CPTableViewDropOn){
_13c=-1;
}
}
return _13c;
}
}),new objj_method(sel_getUid("_parentItemForDropOperation:row:offset:"),function(self,_140,_141,_142,_143){
with(self){
if(_141===CPTableViewDropAbove){
return objj_msgSend(_outlineView,"_parentItemForUpperRow:andLowerRow:atMouseOffset:",_142-1,_142,_143);
}
return objj_msgSend(_outlineView,"itemAtRow:",_142);
}
}),new objj_method(sel_getUid("tableView:validateDrop:proposedRow:proposedDropOperation:"),function(self,_144,_145,_146,_147,_148){
with(self){
if(!(_outlineView._implementedOutlineViewDataSourceMethods&_4)){
return CPDragOperationNone;
}
_outlineView._retargetedItem=nil;
_outlineView._shouldRetargetItem=NO;
_outlineView._retargedChildIndex=nil;
_outlineView._shouldRetargetChildIndex=NO;
var _149=objj_msgSend(_outlineView,"convertPoint:fromView:",objj_msgSend(_146,"draggingLocation"),nil),_14a=objj_msgSend(self,"_parentItemForDropOperation:row:offset:",_148,_147,_149),_14b=objj_msgSend(self,"_childIndexForDropOperation:row:offset:",_148,_147,_149);
return objj_msgSend(_outlineView._outlineViewDataSource,"outlineView:validateDrop:proposedItem:proposedChildIndex:",_outlineView,_146,_14a,_14b);
}
}),new objj_method(sel_getUid("tableView:acceptDrop:row:dropOperation:"),function(self,_14c,_14d,_14e,_14f,_150){
with(self){
if(!(_outlineView._implementedOutlineViewDataSourceMethods&_3)){
return NO;
}
var _151=objj_msgSend(_outlineView,"convertPoint:fromView:",objj_msgSend(_14e,"draggingLocation"),nil),_152=objj_msgSend(self,"_parentItemForDropOperation:row:offset:",_150,_14f,_151),_153=objj_msgSend(self,"_childIndexForDropOperation:row:offset:",_150,_14f,_151);
_outlineView._retargetedItem=nil;
_outlineView._shouldRetargetItem=NO;
_outlineView._retargedChildIndex=nil;
_outlineView._shouldRetargetChildIndex=NO;
return objj_msgSend(_outlineView._outlineViewDataSource,"outlineView:acceptDrop:item:childIndex:",_outlineView,_14e,_152,_153);
}
}),new objj_method(sel_getUid("tableView:sortDescriptorsDidChange:"),function(self,_154,_155,_156){
with(self){
if((_outlineView._implementedOutlineViewDataSourceMethods&_a)){
objj_msgSend(objj_msgSend(_outlineView,"dataSource"),"outlineView:sortDescriptorsDidChange:",_outlineView,_156);
}
}
})]);
var _27=objj_allocateClassPair(CPObject,"_CPOutlineViewTableViewDelegate"),_28=_27.isa;
class_addIvars(_27,[new objj_ivar("_outlineView")]);
objj_registerClassPair(_27);
class_addMethods(_27,[new objj_method(sel_getUid("initWithOutlineView:"),function(self,_157,_158){
with(self){
self=objj_msgSendSuper({receiver:self,super_class:objj_getClass("_CPOutlineViewTableViewDelegate").super_class},"init");
if(self){
_outlineView=_158;
}
return self;
}
}),new objj_method(sel_getUid("tableView:dataViewForTableColumn:row:"),function(self,_159,_15a,_15b,_15c){
with(self){
var _15d=nil;
if((_outlineView._implementedOutlineViewDelegateMethods&_b)){
_15d=objj_msgSend(_outlineView._outlineViewDelegate,"outlineView:dataViewForTableColumn:item:",_outlineView,_15b,objj_msgSend(_outlineView,"itemAtRow:",_15c));
}
if(!_15d){
_15d=objj_msgSend(_15b,"dataViewForRow:",_15c);
}
return _15d;
}
}),new objj_method(sel_getUid("tableView:shouldSelectRow:"),function(self,_15e,_15f,_160){
with(self){
if((_outlineView._implementedOutlineViewDelegateMethods&_17)){
return objj_msgSend(_outlineView._outlineViewDelegate,"outlineView:shouldSelectItem:",_outlineView,objj_msgSend(_outlineView,"itemAtRow:",_160));
}
return YES;
}
}),new objj_method(sel_getUid("tableView:shouldEditTableColumn:row:"),function(self,_161,_162,_163,aRow){
with(self){
if((_outlineView._implementedOutlineViewDelegateMethods&_14)){
return objj_msgSend(_outlineView._outlineViewDelegate,"outlineView:shouldEditTableColumn:item:",_outlineView,_163,objj_msgSend(_outlineView,"itemAtRow:",aRow));
}
return NO;
}
}),new objj_method(sel_getUid("tableView:heightOfRow:"),function(self,_164,_165,_166){
with(self){
if((_outlineView._implementedOutlineViewDelegateMethods&_e)){
return objj_msgSend(_outlineView._outlineViewDelegate,"outlineView:heightOfRowByItem:",_outlineView,objj_msgSend(_outlineView,"itemAtRow:",_166));
}
return objj_msgSend(_165,"rowHeight");
}
}),new objj_method(sel_getUid("tableView:willDisplayView:forTableColumn:row:"),function(self,_167,_168,_169,_16a,_16b){
with(self){
if((_outlineView._implementedOutlineViewDelegateMethods&_21)){
var item=objj_msgSend(_outlineView,"itemAtRow:",_16b);
objj_msgSend(_outlineView._outlineViewDelegate,"outlineView:willDisplayView:forTableColumn:item:",_outlineView,_169,_16a,item);
}
}
}),new objj_method(sel_getUid("tableView:isGroupRow:"),function(self,_16c,_16d,aRow){
with(self){
if((_outlineView._implementedOutlineViewDelegateMethods&_f)){
return objj_msgSend(_outlineView._outlineViewDelegate,"outlineView:isGroupItem:",_outlineView,objj_msgSend(_outlineView,"itemAtRow:",aRow));
}
return NO;
}
}),new objj_method(sel_getUid("tableView:menuForTableColumn:row:"),function(self,_16e,_16f,_170,aRow){
with(self){
if((_outlineView._implementedOutlineViewDelegateMethods&_23)){
var item=objj_msgSend(_outlineView,"itemAtRow:",aRow);
return objj_msgSend(_outlineView._outlineViewDelegate,"outlineView:menuForTableColumn:item:",_outlineView,_170,item);
}
return nil;
}
})]);
var _27=objj_allocateClassPair(CPButton,"CPDisclosureButton"),_28=_27.isa;
class_addIvars(_27,[new objj_ivar("_angle")]);
objj_registerClassPair(_27);
class_addMethods(_27,[new objj_method(sel_getUid("initWithFrame:"),function(self,_171,_172){
with(self){
self=objj_msgSendSuper({receiver:self,super_class:objj_getClass("CPDisclosureButton").super_class},"initWithFrame:",_172);
if(self){
objj_msgSend(self,"setBordered:",NO);
}
return self;
}
}),new objj_method(sel_getUid("setState:"),function(self,_173,_174){
with(self){
objj_msgSendSuper({receiver:self,super_class:objj_getClass("CPDisclosureButton").super_class},"setState:",_174);
if(objj_msgSend(self,"state")===CPOnState){
_angle=0;
}else{
_angle=-PI_2;
}
}
}),new objj_method(sel_getUid("drawRect:"),function(self,_175,_176){
with(self){
var _177=objj_msgSend(self,"bounds"),_178=objj_msgSend(objj_msgSend(CPGraphicsContext,"currentContext"),"graphicsPort");
CGContextBeginPath(_178);
CGContextTranslateCTM(_178,(_177.size.width)/2,(_177.size.height)/2);
CGContextRotateCTM(_178,_angle);
CGContextTranslateCTM(_178,-(_177.size.width)/2,-(_177.size.height)/2);
CGContextTranslateCTM(_178,FLOOR(((_177.size.width)-9)/2),FLOOR(((_177.size.height)-8)/2));
CGContextMoveToPoint(_178,0,0);
CGContextAddLineToPoint(_178,9,0);
CGContextAddLineToPoint(_178,4.5,8);
CGContextAddLineToPoint(_178,0,0);
CGContextClosePath(_178);
CGContextSetFillColor(_178,_179(objj_msgSend(self,"hasThemeState:",CPThemeStateSelected),objj_msgSend(self,"hasThemeState:",CPThemeStateHighlighted)));
CGContextFillPath(_178);
CGContextBeginPath(_178);
CGContextMoveToPoint(_178,0,0);
if(_angle===0){
CGContextAddLineToPoint(_178,4.5,8);
CGContextAddLineToPoint(_178,9,0);
}else{
CGContextAddLineToPoint(_178,4.5,8);
}
CGContextSetStrokeColor(_178,objj_msgSend(CPColor,"colorWithCalibratedWhite:alpha:",1,0.8));
CGContextStrokePath(_178);
}
})]);
var _17a="CPOutlineViewIndentationPerLevelKey",_17b="CPOutlineViewOutlineTableColumnKey",_17c="CPOutlineViewDataSourceKey",_17d="CPOutlineViewDelegateKey";
var _27=objj_getClass("CPOutlineView");
if(!_27){
throw new SyntaxError("*** Could not find definition for class \"CPOutlineView\"");
}
var _28=_27.isa;
class_addMethods(_27,[new objj_method(sel_getUid("initWithCoder:"),function(self,_17e,_17f){
with(self){
self=objj_msgSendSuper({receiver:self,super_class:objj_getClass("CPOutlineView").super_class},"initWithCoder:",_17f);
if(self){
_rootItemInfo={isExpanded:YES,isExpandable:NO,level:-1,row:-1,children:[],weight:0};
_itemsForRows=[];
_itemInfosForItems={};
_disclosureControlsForRows=[];
objj_msgSend(self,"setIndentationMarkerFollowsDataView:",YES);
objj_msgSend(self,"setDisclosureControlPrototype:",objj_msgSend(objj_msgSend(CPDisclosureButton,"alloc"),"initWithFrame:",CGRectMake(0,0,10,10)));
_outlineTableColumn=objj_msgSend(_17f,"decodeObjectForKey:",_17b);
_indentationPerLevel=objj_msgSend(_17f,"decodeFloatForKey:",_17a);
_outlineViewDataSource=objj_msgSend(_17f,"decodeObjectForKey:",_17c);
_outlineViewDelegate=objj_msgSend(_17f,"decodeObjectForKey:",_17d);
objj_msgSendSuper({receiver:self,super_class:objj_getClass("CPOutlineView").super_class},"setDataSource:",objj_msgSend(objj_msgSend(_CPOutlineViewTableViewDataSource,"alloc"),"initWithOutlineView:",self));
objj_msgSendSuper({receiver:self,super_class:objj_getClass("CPOutlineView").super_class},"setDelegate:",objj_msgSend(objj_msgSend(_CPOutlineViewTableViewDelegate,"alloc"),"initWithOutlineView:",self));
}
return self;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(self,_180,_181){
with(self){
var _182=_delegate,_183=_dataSource;
_delegate=nil;
_dataSource=nil;
objj_msgSendSuper({receiver:self,super_class:objj_getClass("CPOutlineView").super_class},"encodeWithCoder:",_181);
_delegate=_182;
_dataSource=_183;
objj_msgSend(_181,"encodeObject:forKey:",_outlineTableColumn,_17b);
objj_msgSend(_181,"encodeFloat:forKey:",_indentationPerLevel,_17a);
objj_msgSend(_181,"encodeObject:forKey:",_outlineViewDataSource,_17c);
objj_msgSend(_181,"encodeObject:forKey:",_outlineViewDelegate,_17d);
}
})]);
var _179=function(_184,_185){
return _184?(_185?objj_msgSend(CPColor,"colorWithCalibratedWhite:alpha:",0.9,1):objj_msgSend(CPColor,"colorWithCalibratedWhite:alpha:",1,1)):(_185?objj_msgSend(CPColor,"colorWithCalibratedWhite:alpha:",0.4,1):objj_msgSend(CPColor,"colorWithCalibratedWhite:alpha:",0.5,1));
};
p;9;CPPanel.jt;1172;@STATIC;1.0;i;10;CPWindow.jt;1138;
objj_executeFile("CPWindow.j",YES);
CPOKButton=1;
CPCancelButton=0;
CPDocModalWindowMask=1<<6;
var _1=objj_allocateClassPair(CPWindow,"CPPanel"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_becomesKeyOnlyIfNeeded"),new objj_ivar("_worksWhenModal")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("isFloatingPanel"),function(_3,_4){
with(_3){
return objj_msgSend(_3,"level")==CPFloatingWindowLevel;
}
}),new objj_method(sel_getUid("setFloatingPanel:"),function(_5,_6,_7){
with(_5){
objj_msgSend(_5,"setLevel:",_7?CPFloatingWindowLevel:CPNormalWindowLevel);
}
}),new objj_method(sel_getUid("becomesKeyOnlyIfNeeded"),function(_8,_9){
with(_8){
return _becomesKeyOnlyIfNeeded;
}
}),new objj_method(sel_getUid("setBecomesKeyOnlyIfNeeded:"),function(_a,_b,_c){
with(_a){
_becomesKeyOnlyIfNeeded=_c;
}
}),new objj_method(sel_getUid("worksWhenModal"),function(_d,_e){
with(_d){
return _worksWhenModal;
}
}),new objj_method(sel_getUid("setWorksWhenModal:"),function(_f,_10,_11){
with(_f){
_worksWhenModal=_11;
}
}),new objj_method(sel_getUid("canBecomeMainWindow"),function(_12,_13){
with(_12){
return NO;
}
})]);
p;14;CPPasteboard.jt;8393;@STATIC;1.0;I;21;Foundation/CPObject.jI;20;Foundation/CPArray.jI;25;Foundation/CPDictionary.jI;40;Foundation/CPPropertyListSerialization.jt;8248;
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("Foundation/CPArray.j",NO);
objj_executeFile("Foundation/CPDictionary.j",NO);
objj_executeFile("Foundation/CPPropertyListSerialization.j",NO);
CPGeneralPboard="CPGeneralPboard";
CPFontPboard="CPFontPboard";
CPRulerPboard="CPRulerPboard";
CPFindPboard="CPFindPboard";
CPDragPboard="CPDragPboard";
CPColorPboardType="CPColorPboardType";
CPFilenamesPboardType="CPFilenamesPboardType";
CPFontPboardType="CPFontPboardType";
CPHTMLPboardType="CPHTMLPboardType";
CPStringPboardType="CPStringPboardType";
CPURLPboardType="CPURLPboardType";
CPImagesPboardType="CPImagesPboardType";
CPVideosPboardType="CPVideosPboardType";
UTF8PboardType="public.utf8-plain-text";
CPImagePboardType="CPImagePboardType";
var _1=nil,_2=NO;
var _3=objj_allocateClassPair(CPObject,"CPPasteboard"),_4=_3.isa;
class_addIvars(_3,[new objj_ivar("_types"),new objj_ivar("_owners"),new objj_ivar("_provided"),new objj_ivar("_changeCount"),new objj_ivar("_stateUID"),new objj_ivar("_nativePasteboard")]);
objj_registerClassPair(_3);
class_addMethods(_3,[new objj_method(sel_getUid("_initWithName:"),function(_5,_6,_7){
with(_5){
_5=objj_msgSendSuper({receiver:_5,super_class:objj_getClass("CPPasteboard").super_class},"init");
if(_5){
_name=_7;
_types=[];
_owners=objj_msgSend(CPDictionary,"dictionary");
_provided=objj_msgSend(CPDictionary,"dictionary");
_changeCount=0;
if(_2){
_nativePasteboard=window.cpPasteboardWithName(_7);
objj_msgSend(_5,"_synchronizePasteboard");
}
}
return _5;
}
}),new objj_method(sel_getUid("addTypes:owner:"),function(_8,_9,_a,_b){
with(_8){
var i=0,_c=_a.length;
for(;i<_c;++i){
var _d=_a[i];
if(!objj_msgSend(_owners,"objectForKey:",_d)){
objj_msgSend(_types,"addObject:",_d);
objj_msgSend(_provided,"removeObjectForKey:",_d);
}
objj_msgSend(_owners,"setObject:forKey:",_b,_d);
}
if(_nativePasteboard){
var _e=objj_msgSend(_a,"copy");
if(objj_msgSend(_a,"containsObject:",CPStringPboardType)){
_e.push(UTF8PboardType);
}
_nativePasteboard.addTypes_(_e);
}
return ++_changeCount;
}
}),new objj_method(sel_getUid("declareTypes:owner:"),function(_f,_10,_11,_12){
with(_f){
objj_msgSend(_f,"_declareTypes:owner:updateNativePasteboard:",_11,_12,YES);
}
}),new objj_method(sel_getUid("_declareTypes:owner:updateNativePasteboard:"),function(_13,_14,_15,_16,_17){
with(_13){
objj_msgSend(_types,"setArray:",_15);
_owners=objj_msgSend(CPDictionary,"dictionary");
_provided=objj_msgSend(CPDictionary,"dictionary");
var _18=_types.length;
while(_18--){
objj_msgSend(_owners,"setObject:forKey:",_16,_types[_18]);
}
if(_nativePasteboard&&_17){
var _19=objj_msgSend(_15,"copy");
if(objj_msgSend(_15,"containsObject:",CPStringPboardType)){
_19.push(UTF8PboardType);
}
_nativePasteboard.declareTypes_(_19);
_changeCount=_nativePasteboard.changeCount();
}
return ++_changeCount;
}
}),new objj_method(sel_getUid("setData:forType:"),function(_1a,_1b,_1c,_1d){
with(_1a){
objj_msgSend(_provided,"setObject:forKey:",_1c,_1d);
if(_1d===CPStringPboardType){
objj_msgSend(_1a,"setData:forType:",_1c,UTF8PboardType);
}
return YES;
}
}),new objj_method(sel_getUid("setPropertyList:forType:"),function(_1e,_1f,_20,_21){
with(_1e){
return objj_msgSend(_1e,"setData:forType:",objj_msgSend(CPPropertyListSerialization,"dataFromPropertyList:format:",_20,CPPropertyList280NorthFormat_v1_0),_21);
}
}),new objj_method(sel_getUid("setString:forType:"),function(_22,_23,_24,_25){
with(_22){
objj_msgSend(_22,"setPropertyList:forType:",_24,_25);
}
}),new objj_method(sel_getUid("availableTypeFromArray:"),function(_26,_27,_28){
with(_26){
return objj_msgSend(objj_msgSend(_26,"types"),"firstObjectCommonWithArray:",_28);
}
}),new objj_method(sel_getUid("types"),function(_29,_2a){
with(_29){
objj_msgSend(_29,"_synchronizePasteboard");
return _types;
}
}),new objj_method(sel_getUid("changeCount"),function(_2b,_2c){
with(_2b){
return _changeCount;
}
}),new objj_method(sel_getUid("dataForType:"),function(_2d,_2e,_2f){
with(_2d){
var _30=objj_msgSend(_provided,"objectForKey:",_2f);
if(_30){
return _30;
}
var _31=objj_msgSend(_owners,"objectForKey:",_2f);
if(_31){
objj_msgSend(_31,"pasteboard:provideDataForType:",_2d,_2f);
return objj_msgSend(_provided,"objectForKey:",_2f);
}
if(_2f===CPStringPboardType){
return objj_msgSend(_2d,"dataForType:",UTF8PboardType);
}
return nil;
}
}),new objj_method(sel_getUid("_synchronizePasteboard"),function(_32,_33){
with(_32){
if(_nativePasteboard&&_nativePasteboard.changeCount()>_changeCount){
var _34=objj_msgSend(_nativePasteboard.types(),"copy");
if(objj_msgSend(_34,"containsObject:",UTF8PboardType)){
_34.push(CPStringPboardType);
}
objj_msgSend(_32,"_declareTypes:owner:updateNativePasteboard:",_34,_32,NO);
_changeCount=_nativePasteboard.changeCount();
}
}
}),new objj_method(sel_getUid("pasteboard:provideDataForType:"),function(_35,_36,_37,_38){
with(_35){
if(_38===CPStringPboardType){
var _39=_nativePasteboard.stringForType_(UTF8PboardType);
objj_msgSend(_35,"setString:forType:",_39,CPStringPboardType);
objj_msgSend(_35,"setString:forType:",_39,UTF8PboardType);
}else{
objj_msgSend(_35,"setString:forType:",_nativePasteboard.stringForType_(_38),_38);
}
}
}),new objj_method(sel_getUid("propertyListForType:"),function(_3a,_3b,_3c){
with(_3a){
var _3d=objj_msgSend(_3a,"dataForType:",_3c);
if(_3d){
return objj_msgSend(CPPropertyListSerialization,"propertyListFromData:format:",_3d,CPPropertyList280NorthFormat_v1_0);
}
return nil;
}
}),new objj_method(sel_getUid("stringForType:"),function(_3e,_3f,_40){
with(_3e){
return objj_msgSend(_3e,"propertyListForType:",_40);
}
}),new objj_method(sel_getUid("_generateStateUID"),function(_41,_42){
with(_41){
var _43=32;
_stateUID="";
while(_43--){
_stateUID+=FLOOR(RAND()*16).toString(16).toUpperCase();
}
return _stateUID;
}
}),new objj_method(sel_getUid("_stateUID"),function(_44,_45){
with(_44){
return _stateUID;
}
})]);
class_addMethods(_4,[new objj_method(sel_getUid("initialize"),function(_46,_47){
with(_46){
if(_46!=objj_msgSend(CPPasteboard,"class")){
return;
}
objj_msgSend(_46,"setVersion:",1);
_1=objj_msgSend(CPDictionary,"dictionary");
if(typeof window.cpPasteboardWithName!=="undefined"){
_2=YES;
}
}
}),new objj_method(sel_getUid("generalPasteboard"),function(_48,_49){
with(_48){
return objj_msgSend(CPPasteboard,"pasteboardWithName:",CPGeneralPboard);
}
}),new objj_method(sel_getUid("pasteboardWithName:"),function(_4a,_4b,_4c){
with(_4a){
var _4d=objj_msgSend(_1,"objectForKey:",_4c);
if(_4d){
return _4d;
}
_4d=objj_msgSend(objj_msgSend(CPPasteboard,"alloc"),"_initWithName:",_4c);
objj_msgSend(_1,"setObject:forKey:",_4d,_4c);
return _4d;
}
})]);
var _4e=nil;
var _3=objj_allocateClassPair(CPPasteboard,"_CPDOMDataTransferPasteboard"),_4=_3.isa;
class_addIvars(_3,[new objj_ivar("_dataTransfer")]);
objj_registerClassPair(_3);
class_addMethods(_3,[new objj_method(sel_getUid("_setDataTransfer:"),function(_4f,_50,_51){
with(_4f){
_dataTransfer=_51;
}
}),new objj_method(sel_getUid("_setPasteboard:"),function(_52,_53,_54){
with(_52){
_dataTransfer.clearData();
var _55=objj_msgSend(_54,"types"),_56=_55.length;
while(_56--){
var _57=_55[_56];
if(_57===CPStringPboardType){
_dataTransfer.setData(_57,objj_msgSend(_54,"stringForType:",_57));
}else{
_dataTransfer.setData(_57,objj_msgSend(objj_msgSend(_54,"dataForType:",_57),"rawString"));
}
}
}
}),new objj_method(sel_getUid("types"),function(_58,_59){
with(_58){
return Array.prototype.slice.apply(_dataTransfer.types);
}
}),new objj_method(sel_getUid("dataForType:"),function(_5a,_5b,_5c){
with(_5a){
var _5d=_dataTransfer.getData(_5c);
if(_5c===CPStringPboardType){
return objj_msgSend(CPData,"dataFromPropertyList:format:",_5d,kCFPropertyList280NorthFormat_v1_0);
}
return objj_msgSend(CPData,"dataWithRawString:",_5d);
}
}),new objj_method(sel_getUid("propertyListForType:"),function(_5e,_5f,_60){
with(_5e){
if(_60===CPStringPboardType){
return _dataTransfer.getData(_60);
}
return objj_msgSend(CPPropertyListSerialization,"propertyListFromData:format:",objj_msgSend(_5e,"dataForType:",_60),CPPropertyListUnknownFormat);
}
})]);
class_addMethods(_4,[new objj_method(sel_getUid("DOMDataTransferPasteboard"),function(_61,_62){
with(_61){
if(!_4e){
_4e=objj_msgSend(objj_msgSend(_CPDOMDataTransferPasteboard,"alloc"),"init");
}
return _4e;
}
})]);
p;15;CPPopUpButton.jt;16198;@STATIC;1.0;i;10;CPButton.ji;12;CPGeometry.ji;8;CPMenu.ji;12;CPMenuItem.jt;16117;
objj_executeFile("CPButton.j",YES);
objj_executeFile("CPGeometry.j",YES);
objj_executeFile("CPMenu.j",YES);
objj_executeFile("CPMenuItem.j",YES);
var _1=7;
CPPopUpButtonStatePullsDown=CPThemeState("pulls-down");
var _2=objj_allocateClassPair(CPButton,"CPPopUpButton"),_3=_2.isa;
class_addIvars(_2,[new objj_ivar("_selectedIndex"),new objj_ivar("_preferredEdge")]);
objj_registerClassPair(_2);
class_addMethods(_2,[new objj_method(sel_getUid("initWithFrame:pullsDown:"),function(_4,_5,_6,_7){
with(_4){
_4=objj_msgSendSuper({receiver:_4,super_class:objj_getClass("CPPopUpButton").super_class},"initWithFrame:",_6);
if(_4){
objj_msgSend(_4,"selectItemAtIndex:",CPNotFound);
_preferredEdge=CPMaxYEdge;
objj_msgSend(_4,"setValue:forThemeAttribute:",CPImageLeft,"image-position");
objj_msgSend(_4,"setValue:forThemeAttribute:",CPLeftTextAlignment,"alignment");
objj_msgSend(_4,"setValue:forThemeAttribute:",CPLineBreakByTruncatingTail,"line-break-mode");
objj_msgSend(_4,"setMenu:",objj_msgSend(objj_msgSend(CPMenu,"alloc"),"initWithTitle:",""));
objj_msgSend(_4,"setPullsDown:",_7);
var _8=CPKeyValueObservingOptionNew|CPKeyValueObservingOptionOld;
objj_msgSend(_4,"addObserver:forKeyPath:options:context:",_4,"menu.items",_8,nil);
objj_msgSend(_4,"addObserver:forKeyPath:options:context:",_4,"_firstItem.changeCount",_8,nil);
objj_msgSend(_4,"addObserver:forKeyPath:options:context:",_4,"selectedItem.changeCount",_8,nil);
}
return _4;
}
}),new objj_method(sel_getUid("initWithFrame:"),function(_9,_a,_b){
with(_9){
return objj_msgSend(_9,"initWithFrame:pullsDown:",_b,NO);
}
}),new objj_method(sel_getUid("setPullsDown:"),function(_c,_d,_e){
with(_c){
if(_e){
var _f=objj_msgSend(_c,"setThemeState:",CPPopUpButtonStatePullsDown);
}else{
var _f=objj_msgSend(_c,"unsetThemeState:",CPPopUpButtonStatePullsDown);
}
if(!_f){
return;
}
var _10=objj_msgSend(objj_msgSend(_c,"menu"),"itemArray");
if(objj_msgSend(_10,"count")<=0){
return;
}
objj_msgSend(_10[0],"setHidden:",objj_msgSend(_c,"pullsDown"));
objj_msgSend(_c,"synchronizeTitleAndSelectedItem");
}
}),new objj_method(sel_getUid("pullsDown"),function(_11,_12){
with(_11){
return objj_msgSend(_11,"hasThemeState:",CPPopUpButtonStatePullsDown);
}
}),new objj_method(sel_getUid("addItem:"),function(_13,_14,_15){
with(_13){
objj_msgSend(objj_msgSend(_13,"menu"),"addItem:",_15);
}
}),new objj_method(sel_getUid("addItemWithTitle:"),function(_16,_17,_18){
with(_16){
objj_msgSend(objj_msgSend(_16,"menu"),"addItemWithTitle:action:keyEquivalent:",_18,NULL,nil);
}
}),new objj_method(sel_getUid("addItemsWithTitles:"),function(_19,_1a,_1b){
with(_19){
var _1c=0,_1d=objj_msgSend(_1b,"count");
for(;_1c<_1d;++_1c){
objj_msgSend(_19,"addItemWithTitle:",_1b[_1c]);
}
}
}),new objj_method(sel_getUid("insertItemWithTitle:atIndex:"),function(_1e,_1f,_20,_21){
with(_1e){
var _22=objj_msgSend(_1e,"itemArray"),_23=objj_msgSend(_22,"count");
while(_23--){
if(objj_msgSend(_22[_23],"title")==_20){
objj_msgSend(_1e,"removeItemAtIndex:",_23);
}
}
objj_msgSend(objj_msgSend(_1e,"menu"),"insertItemWithTitle:action:keyEquivalent:atIndex:",_20,NULL,nil,_21);
}
}),new objj_method(sel_getUid("removeAllItems"),function(_24,_25){
with(_24){
var _26=objj_msgSend(_24,"menu"),_27=objj_msgSend(_26,"numberOfItems");
while(_27--){
objj_msgSend(_26,"removeItemAtIndex:",0);
}
}
}),new objj_method(sel_getUid("removeItemWithTitle:"),function(_28,_29,_2a){
with(_28){
objj_msgSend(_28,"removeItemAtIndex:",objj_msgSend(_28,"indexOfItemWithTitle:",_2a));
objj_msgSend(_28,"synchronizeTitleAndSelectedItem");
}
}),new objj_method(sel_getUid("removeItemAtIndex:"),function(_2b,_2c,_2d){
with(_2b){
objj_msgSend(objj_msgSend(_2b,"menu"),"removeItemAtIndex:",_2d);
objj_msgSend(_2b,"synchronizeTitleAndSelectedItem");
}
}),new objj_method(sel_getUid("selectedItem"),function(_2e,_2f){
with(_2e){
var _30=objj_msgSend(_2e,"indexOfSelectedItem");
if(_30<0||_30>objj_msgSend(_2e,"numberOfItems")-1){
return nil;
}
return objj_msgSend(objj_msgSend(_2e,"menu"),"itemAtIndex:",_30);
}
}),new objj_method(sel_getUid("titleOfSelectedItem"),function(_31,_32){
with(_31){
return objj_msgSend(objj_msgSend(_31,"selectedItem"),"title");
}
}),new objj_method(sel_getUid("indexOfSelectedItem"),function(_33,_34){
with(_33){
return _selectedIndex;
}
}),new objj_method(sel_getUid("selectedTag"),function(_35,_36){
with(_35){
return objj_msgSend(objj_msgSend(_35,"selectedItem"),"tag");
}
}),new objj_method(sel_getUid("_setSelectedTag:"),function(_37,_38,_39){
with(_37){
objj_msgSend(_37,"selectItemWithTag:",_39);
}
}),new objj_method(sel_getUid("selectItem:"),function(_3a,_3b,_3c){
with(_3a){
objj_msgSend(_3a,"selectItemAtIndex:",objj_msgSend(_3a,"indexOfItem:",_3c));
}
}),new objj_method(sel_getUid("selectItemAtIndex:"),function(_3d,_3e,_3f){
with(_3d){
objj_msgSend(_3d,"setObjectValue:",_3f);
}
}),new objj_method(sel_getUid("setSelectedIndex:"),function(_40,_41,_42){
with(_40){
objj_msgSend(_40,"setObjectValue:",_42);
}
}),new objj_method(sel_getUid("selectedIndex"),function(_43,_44){
with(_43){
return objj_msgSend(_43,"objectValue");
}
}),new objj_method(sel_getUid("setObjectValue:"),function(_45,_46,_47){
with(_45){
var _48=objj_msgSend(_45,"objectValue");
_47=parseInt(+_47,10);
if(_48===_47){
return;
}
if(_48>=0&&!objj_msgSend(_45,"pullsDown")){
objj_msgSend(objj_msgSend(_45,"selectedItem"),"setState:",CPOffState);
}
_selectedIndex=_47;
if(_48>=0&&!objj_msgSend(_45,"pullsDown")){
objj_msgSend(objj_msgSend(_45,"selectedItem"),"setState:",CPOnState);
}
objj_msgSend(_45,"synchronizeTitleAndSelectedItem");
}
}),new objj_method(sel_getUid("objectValue"),function(_49,_4a){
with(_49){
return _selectedIndex;
}
}),new objj_method(sel_getUid("selectItemWithTag:"),function(_4b,_4c,_4d){
with(_4b){
objj_msgSend(_4b,"selectItemAtIndex:",objj_msgSend(_4b,"indexOfItemWithTag:",_4d));
}
}),new objj_method(sel_getUid("selectItemWithTitle:"),function(_4e,_4f,_50){
with(_4e){
objj_msgSend(_4e,"selectItemAtIndex:",objj_msgSend(_4e,"indexOfItemWithTitle:",_50));
}
}),new objj_method(sel_getUid("numberOfItems"),function(_51,_52){
with(_51){
return objj_msgSend(objj_msgSend(_51,"menu"),"numberOfItems");
}
}),new objj_method(sel_getUid("itemArray"),function(_53,_54){
with(_53){
return objj_msgSend(objj_msgSend(_53,"menu"),"itemArray");
}
}),new objj_method(sel_getUid("itemAtIndex:"),function(_55,_56,_57){
with(_55){
return objj_msgSend(objj_msgSend(_55,"menu"),"itemAtIndex:",_57);
}
}),new objj_method(sel_getUid("itemTitleAtIndex:"),function(_58,_59,_5a){
with(_58){
return objj_msgSend(objj_msgSend(objj_msgSend(_58,"menu"),"itemAtIndex:",_5a),"title");
}
}),new objj_method(sel_getUid("itemTitles"),function(_5b,_5c){
with(_5b){
var _5d=[],_5e=objj_msgSend(_5b,"itemArray"),_5f=0,_60=objj_msgSend(_5e,"count");
for(;_5f<_60;++_5f){
_5d.push(objj_msgSend(_5e[_5f],"title"));
}
return _5d;
}
}),new objj_method(sel_getUid("itemWithTitle:"),function(_61,_62,_63){
with(_61){
var _64=objj_msgSend(_61,"menu"),_65=objj_msgSend(_64,"indexOfItemWithTitle:",_63);
if(_65===CPNotFound){
return nil;
}
return objj_msgSend(_64,"itemAtIndex:",_65);
}
}),new objj_method(sel_getUid("lastItem"),function(_66,_67){
with(_66){
return objj_msgSend(objj_msgSend(objj_msgSend(_66,"menu"),"itemArray"),"lastObject");
}
}),new objj_method(sel_getUid("indexOfItem:"),function(_68,_69,_6a){
with(_68){
return objj_msgSend(objj_msgSend(_68,"menu"),"indexOfItem:",_6a);
}
}),new objj_method(sel_getUid("indexOfItemWithTag:"),function(_6b,_6c,_6d){
with(_6b){
return objj_msgSend(objj_msgSend(_6b,"menu"),"indexOfItemWithTag:",_6d);
}
}),new objj_method(sel_getUid("indexOfItemWithTitle:"),function(_6e,_6f,_70){
with(_6e){
return objj_msgSend(objj_msgSend(_6e,"menu"),"indexOfItemWithTitle:",_70);
}
}),new objj_method(sel_getUid("indexOfItemWithRepresentedObject:"),function(_71,_72,_73){
with(_71){
return objj_msgSend(objj_msgSend(_71,"menu"),"indexOfItemWithRepresentedObject:",_73);
}
}),new objj_method(sel_getUid("indexOfItemWithTarget:action:"),function(_74,_75,_76,_77){
with(_74){
return objj_msgSend(objj_msgSend(_74,"menu"),"indexOfItemWithTarget:action:",_76,_77);
}
}),new objj_method(sel_getUid("preferredEdge"),function(_78,_79){
with(_78){
return _preferredEdge;
}
}),new objj_method(sel_getUid("setPreferredEdge:"),function(_7a,_7b,_7c){
with(_7a){
_preferredEdge=_7c;
}
}),new objj_method(sel_getUid("setTitle:"),function(_7d,_7e,_7f){
with(_7d){
if(objj_msgSend(_7d,"title")===_7f){
return;
}
if(objj_msgSend(_7d,"pullsDown")){
var _80=objj_msgSend(objj_msgSend(_7d,"menu"),"itemArray");
if(objj_msgSend(_80,"count")<=0){
objj_msgSend(_7d,"addItemWithTitle:",_7f);
}else{
objj_msgSend(_80[0],"setTitle:",_7f);
objj_msgSend(_7d,"synchronizeTitleAndSelectedItem");
}
}else{
var _81=objj_msgSend(_7d,"indexOfItemWithTitle:",_7f);
if(_81<0){
objj_msgSend(_7d,"addItemWithTitle:",_7f);
_81=objj_msgSend(_7d,"numberOfItems")-1;
}
objj_msgSend(_7d,"selectItemAtIndex:",_81);
}
}
}),new objj_method(sel_getUid("setImage:"),function(_82,_83,_84){
with(_82){
}
}),new objj_method(sel_getUid("synchronizeTitleAndSelectedItem"),function(_85,_86){
with(_85){
var _87=nil;
if(objj_msgSend(_85,"pullsDown")){
var _88=objj_msgSend(objj_msgSend(_85,"menu"),"itemArray");
if(objj_msgSend(_88,"count")>0){
_87=_88[0];
}
}else{
_87=objj_msgSend(_85,"selectedItem");
}
objj_msgSendSuper({receiver:_85,super_class:objj_getClass("CPPopUpButton").super_class},"setImage:",objj_msgSend(_87,"image"));
objj_msgSendSuper({receiver:_85,super_class:objj_getClass("CPPopUpButton").super_class},"setTitle:",objj_msgSend(_87,"title"));
}
}),new objj_method(sel_getUid("observeValueForKeyPath:ofObject:change:context:"),function(_89,_8a,_8b,_8c,_8d,_8e){
with(_89){
var _8f=objj_msgSend(_89,"pullsDown");
if(!_8f&&_8b==="selectedItem.changeCount"||_8f&&(_8b==="_firstItem"||_8b==="_firstItem.changeCount")){
objj_msgSend(_89,"synchronizeTitleAndSelectedItem");
}
if(_8b==="menu"){
_8b="menu.items";
objj_msgSend(_8d,"setObject:forKey:",CPKeyValueChangeSetting,CPKeyValueChangeKindKey);
objj_msgSend(_8d,"setObject:forKey:",objj_msgSend(objj_msgSend(_89,"menu"),"itemArray"),CPKeyValueChangeNewKey);
}
if(_8b==="menu.items"){
var _90=objj_msgSend(_8d,"objectForKey:",CPKeyValueChangeKindKey),_91=objj_msgSend(_89,"indexOfSelectedItem");
if(_90===CPKeyValueChangeRemoval){
var _92=CPNotFound,_93=objj_msgSend(_8d,"objectForKey:",CPKeyValueChangeIndexesKey);
if(objj_msgSend(_93,"containsIndex:",0)&&objj_msgSend(_89,"pullsDown")){
objj_msgSend(_89,"_firstItemDidChange");
}
while((_92=objj_msgSend(_93,"indexGreaterThanIndex:",_92))!==CPNotFound&&_92<=_91){
--_91;
}
objj_msgSend(_89,"selectItemAtIndex:",_91);
}else{
if(_90===CPKeyValueChangeReplacement){
var _93=objj_msgSend(_8d,"objectForKey:",CPKeyValueChangeIndexesKey);
if(_8f&&objj_msgSend(_93,"containsIndex:",0)||!_8f&&objj_msgSend(_93,"containsIndex:",_91)){
objj_msgSend(_89,"synchronizeTitleAndSelectedItem");
}
}else{
var _94=objj_msgSend(_8d,"objectForKey:",CPKeyValueChangeNewKey);
objj_msgSend(_94,"enumerateObjectsUsingBlock:",function(_95){
var _96=objj_msgSend(_95,"action");
if(!_96){
objj_msgSend(_95,"setAction:",_96=sel_getUid("_popUpItemAction:"));
}
if(_96===sel_getUid("_popUpItemAction:")){
objj_msgSend(_95,"setTarget:",_89);
}
});
if(_90===CPKeyValueChangeSetting){
objj_msgSend(_89,"_firstItemDidChange");
objj_msgSend(_89,"selectItemAtIndex:",CPNotFound);
objj_msgSend(_89,"selectItemAtIndex:",MIN(objj_msgSend(_94,"count")-1,_91));
}else{
var _93=objj_msgSend(_8d,"objectForKey:",CPKeyValueChangeIndexesKey);
if(objj_msgSend(_89,"pullsDown")&&objj_msgSend(_93,"containsIndex:",0)){
objj_msgSend(_89,"_firstItemDidChange");
if(objj_msgSend(_89,"numberOfItems")>1){
var _92=CPNotFound,_97=0;
while((_92=objj_msgSend(_93,"indexGreaterThanIndex:",_92))!==CPNotFound&&_92<=_97){
++_97;
}
objj_msgSend(objj_msgSend(_89,"itemAtIndex:",_97),"setHidden:",NO);
}
}
if(_91<0){
objj_msgSend(_89,"selectItemAtIndex:",0);
}else{
var _92=CPNotFound;
while((_92=objj_msgSend(_93,"indexGreaterThanIndex:",_92))!==CPNotFound&&_92<=_91){
++_91;
}
objj_msgSend(_89,"selectItemAtIndex:",_91);
}
}
}
}
}
}
}),new objj_method(sel_getUid("mouseDown:"),function(_98,_99,_9a){
with(_98){
if(!objj_msgSend(_98,"isEnabled")||!objj_msgSend(_98,"numberOfItems")){
return;
}
objj_msgSend(_98,"highlight:",YES);
var _9b=objj_msgSend(_98,"menu"),_9c=objj_msgSend(_98,"bounds"),_9d=CGRectGetWidth(_9c);
objj_msgSend(_9b,"setFont:",objj_msgSend(_98,"font"));
if(objj_msgSend(_98,"pullsDown")){
var _9e=nil,_9f=CGPointMake(0,CGRectGetMaxY(_9c));
}else{
var _a0=objj_msgSend(_98,"contentRectForBounds:",_9c),_9e=objj_msgSend(_98,"selectedItem"),_a1=objj_msgSend(_CPMenuWindow,"_standardLeftMargin")+objj_msgSend(_CPMenuItemStandardView,"_standardLeftMargin"),_9f=CGPointMake(CGRectGetMinX(_a0)-_a1,0);
_9d+=_a1;
objj_msgSend(_9b,"_highlightItemAtIndex:",CPNotFound);
}
objj_msgSend(_9b,"setMinimumWidth:",_9d);
objj_msgSend(_9b,"_popUpMenuPositioningItem:atLocation:topY:bottomY:inView:callback:",_9e,_9f,CGRectGetMinY(_9c),CGRectGetMaxY(_9c),_98,function(_a2){
objj_msgSend(_98,"highlight:",NO);
var _a3=objj_msgSend(_a2,"highlightedItem");
if(objj_msgSend(_a3,"_isSelectable")){
objj_msgSend(_98,"selectItem:",_a3);
}
});
}
}),new objj_method(sel_getUid("rightMouseDown:"),function(_a4,_a5,_a6){
with(_a4){
}
}),new objj_method(sel_getUid("_popUpItemAction:"),function(_a7,_a8,_a9){
with(_a7){
objj_msgSend(_a7,"sendAction:to:",objj_msgSend(_a7,"action"),objj_msgSend(_a7,"target"));
}
}),new objj_method(sel_getUid("_firstItemDidChange"),function(_aa,_ab){
with(_aa){
objj_msgSend(_aa,"willChangeValueForKey:","_firstItem");
objj_msgSend(_aa,"didChangeValueForKey:","_firstItem");
objj_msgSend(objj_msgSend(_aa,"_firstItem"),"setHidden:",YES);
}
}),new objj_method(sel_getUid("_firstItem"),function(_ac,_ad){
with(_ac){
if(objj_msgSend(_ac,"numberOfItems")<=0){
return nil;
}
return objj_msgSend(objj_msgSend(_ac,"menu"),"itemAtIndex:",0);
}
}),new objj_method(sel_getUid("takeValueFromKeyPath:ofObjects:"),function(_ae,_af,_b0,_b1){
with(_ae){
var _b2=_b1.length,_b3=objj_msgSend(_b1[0],"valueForKeyPath:",_b0);
objj_msgSend(_ae,"selectItemWithTag:",_b3);
objj_msgSend(_ae,"setEnabled:",YES);
while(_b2-->1){
if(_b3!==objj_msgSend(_b1[_b2],"valueForKeyPath:",_b0)){
objj_msgSend(objj_msgSend(_ae,"selectedItem"),"setState:",CPOffState);
}
}
}
})]);
class_addMethods(_3,[new objj_method(sel_getUid("defaultThemeClass"),function(_b4,_b5){
with(_b4){
return "popup-button";
}
}),new objj_method(sel_getUid("keyPathsForValuesAffectingSelectedIndex"),function(_b6,_b7){
with(_b6){
return objj_msgSend(CPSet,"setWithObject:","objectValue");
}
}),new objj_method(sel_getUid("keyPathsForValuesAffectingSelectedTag"),function(_b8,_b9){
with(_b8){
return objj_msgSend(CPSet,"setWithObject:","objectValue");
}
}),new objj_method(sel_getUid("keyPathsForValuesAffectingSelectedItem"),function(_ba,_bb){
with(_ba){
return objj_msgSend(CPSet,"setWithObject:","objectValue");
}
})]);
var _bc="CPPopUpButtonMenuKey",_bd="CPPopUpButtonSelectedIndexKey";
var _2=objj_getClass("CPPopUpButton");
if(!_2){
throw new SyntaxError("*** Could not find definition for class \"CPPopUpButton\"");
}
var _3=_2.isa;
class_addMethods(_2,[new objj_method(sel_getUid("initWithCoder:"),function(_be,_bf,_c0){
with(_be){
_be=objj_msgSendSuper({receiver:_be,super_class:objj_getClass("CPPopUpButton").super_class},"initWithCoder:",_c0);
if(_be){
objj_msgSend(_be,"synchronizeTitleAndSelectedItem");
if(objj_msgSend(_c0,"containsValueForKey:",_bc)){
CPLog.warn(_be+" was encoded with an older version of Cappuccino. Please nib2cib the original nib again or open and re-save in Atlas.");
objj_msgSend(_be,"setMenu:",objj_msgSend(_c0,"decodeObjectForKey:",_bc));
objj_msgSend(_be,"setObjectValue:",objj_msgSend(_c0,"decodeObjectForKey:",_bd));
}
var _c1=CPKeyValueObservingOptionNew|CPKeyValueObservingOptionOld;
objj_msgSend(_be,"addObserver:forKeyPath:options:context:",_be,"menu.items",_c1,nil);
objj_msgSend(_be,"addObserver:forKeyPath:options:context:",_be,"_firstItem.changeCount",_c1,nil);
objj_msgSend(_be,"addObserver:forKeyPath:options:context:",_be,"selectedItem.changeCount",_c1,nil);
}
return _be;
}
})]);
p;21;CPProgressIndicator.jt;10195;@STATIC;1.0;i;12;CGGeometry.ji;13;CPImageView.ji;8;CPView.jt;10128;
objj_executeFile("CGGeometry.j",YES);
objj_executeFile("CPImageView.j",YES);
objj_executeFile("CPView.j",YES);
CPProgressIndicatorBarStyle=0;
CPProgressIndicatorSpinningStyle=1;
CPProgressIndicatorHUDBarStyle=2;
var _1=nil,_2=nil,_3=nil,_4=nil;
var _5=objj_allocateClassPair(CPView,"CPProgressIndicator"),_6=_5.isa;
class_addIvars(_5,[new objj_ivar("_minValue"),new objj_ivar("_maxValue"),new objj_ivar("_doubleValue"),new objj_ivar("_controlSize"),new objj_ivar("_isIndeterminate"),new objj_ivar("_style"),new objj_ivar("_isAnimating"),new objj_ivar("_isDisplayedWhenStoppedSet"),new objj_ivar("_isDisplayedWhenStopped"),new objj_ivar("_barView")]);
objj_registerClassPair(_5);
class_addMethods(_5,[new objj_method(sel_getUid("initWithFrame:"),function(_7,_8,_9){
with(_7){
_7=objj_msgSendSuper({receiver:_7,super_class:objj_getClass("CPProgressIndicator").super_class},"initWithFrame:",_9);
if(_7){
_minValue=0;
_maxValue=100;
_doubleValue=0;
_style=CPProgressIndicatorBarStyle;
_isDisplayedWhenStoppedSet=NO;
_controlSize=CPRegularControlSize;
objj_msgSend(_7,"updateBackgroundColor");
objj_msgSend(_7,"drawBar");
}
return _7;
}
}),new objj_method(sel_getUid("setUsesThreadedAnimation:"),function(_a,_b,_c){
with(_a){
}
}),new objj_method(sel_getUid("startAnimation:"),function(_d,_e,_f){
with(_d){
_isAnimating=YES;
objj_msgSend(_d,"_hideOrDisplay");
}
}),new objj_method(sel_getUid("stopAnimation:"),function(_10,_11,_12){
with(_10){
_isAnimating=NO;
objj_msgSend(_10,"_hideOrDisplay");
}
}),new objj_method(sel_getUid("usesThreadedAnimation"),function(_13,_14){
with(_13){
return NO;
}
}),new objj_method(sel_getUid("incrementBy:"),function(_15,_16,_17){
with(_15){
objj_msgSend(_15,"setDoubleValue:",_doubleValue+_17);
}
}),new objj_method(sel_getUid("setDoubleValue:"),function(_18,_19,_1a){
with(_18){
_doubleValue=MIN(MAX(_1a,_minValue),_maxValue);
objj_msgSend(_18,"drawBar");
}
}),new objj_method(sel_getUid("doubleValue"),function(_1b,_1c){
with(_1b){
return _doubleValue;
}
}),new objj_method(sel_getUid("setMinValue:"),function(_1d,_1e,_1f){
with(_1d){
_minValue=_1f;
}
}),new objj_method(sel_getUid("minValue"),function(_20,_21){
with(_20){
return _minValue;
}
}),new objj_method(sel_getUid("setMaxValue:"),function(_22,_23,_24){
with(_22){
_maxValue=_24;
}
}),new objj_method(sel_getUid("maxValue"),function(_25,_26){
with(_25){
return _maxValue;
}
}),new objj_method(sel_getUid("setControlSize:"),function(_27,_28,_29){
with(_27){
if(_controlSize==_29){
return;
}
_controlSize=_29;
objj_msgSend(_27,"updateBackgroundColor");
}
}),new objj_method(sel_getUid("controlSize"),function(_2a,_2b){
with(_2a){
return _controlSize;
}
}),new objj_method(sel_getUid("setControlTint:"),function(_2c,_2d,_2e){
with(_2c){
}
}),new objj_method(sel_getUid("controlTint"),function(_2f,_30){
with(_2f){
return 0;
}
}),new objj_method(sel_getUid("setBezeled:"),function(_31,_32,_33){
with(_31){
}
}),new objj_method(sel_getUid("isBezeled"),function(_34,_35){
with(_34){
return YES;
}
}),new objj_method(sel_getUid("setIndeterminate:"),function(_36,_37,_38){
with(_36){
if(_isIndeterminate==_38){
return;
}
_isIndeterminate=_38;
objj_msgSend(_36,"updateBackgroundColor");
}
}),new objj_method(sel_getUid("isIndeterminate"),function(_39,_3a){
with(_39){
return _isIndeterminate;
}
}),new objj_method(sel_getUid("setStyle:"),function(_3b,_3c,_3d){
with(_3b){
if(_style==_3d){
return;
}
_style=_3d;
objj_msgSend(_3b,"updateBackgroundColor");
}
}),new objj_method(sel_getUid("sizeToFit"),function(_3e,_3f){
with(_3e){
if(_style==CPProgressIndicatorSpinningStyle){
objj_msgSend(_3e,"setFrameSize:",objj_msgSend(objj_msgSend(_1[_controlSize],"patternImage"),"size"));
}else{
objj_msgSend(_3e,"setFrameSize:",CGSizeMake(CGRectGetWidth(objj_msgSend(_3e,"frame")),_4[_2+"BezelBorder"+_3[CPProgressIndicatorBarStyle]+_CPControlIdentifierForControlSize(_controlSize)][0].height));
}
}
}),new objj_method(sel_getUid("setDisplayedWhenStopped:"),function(_40,_41,_42){
with(_40){
if(_isDisplayedWhenStoppedSet&&_isDisplayedWhenStopped==_42){
return;
}
_isDisplayedWhenStoppedSet=YES;
_isDisplayedWhenStopped=_42;
objj_msgSend(_40,"_hideOrDisplay");
}
}),new objj_method(sel_getUid("isDisplayedWhenStopped"),function(_43,_44){
with(_43){
if(_isDisplayedWhenStoppedSet){
return _isDisplayedWhenStopped;
}
if(_style==CPProgressIndicatorBarStyle||_style==CPProgressIndicatorHUDBarStyle){
return YES;
}
return NO;
}
}),new objj_method(sel_getUid("_hideOrDisplay"),function(_45,_46){
with(_45){
objj_msgSend(_45,"setHidden:",!_isAnimating&&!objj_msgSend(_45,"isDisplayedWhenStopped"));
}
}),new objj_method(sel_getUid("setFrameSize:"),function(_47,_48,_49){
with(_47){
objj_msgSendSuper({receiver:_47,super_class:objj_getClass("CPProgressIndicator").super_class},"setFrameSize:",_49);
objj_msgSend(_47,"drawBar");
}
}),new objj_method(sel_getUid("drawBar"),function(_4a,_4b){
with(_4a){
if(_style==CPProgressIndicatorSpinningStyle){
return;
}
if(!_barView){
_barView=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",CGRectMake(0,0,0,16));
objj_msgSend(_4a,"addSubview:",_barView);
}
objj_msgSend(_barView,"setBackgroundColor:",_CPControlThreePartImagePattern(NO,_4,_2,"Bar",_3[_style],_CPControlIdentifierForControlSize(_controlSize)));
var _4c=CGRectGetWidth(objj_msgSend(_4a,"bounds")),_4d=_4c*((_doubleValue-_minValue)/(_maxValue-_minValue));
if(_4d>0&&_4d<4){
_4d=4;
}
objj_msgSend(_barView,"setFrameSize:",CGSizeMake(_4d,16));
}
}),new objj_method(sel_getUid("updateBackgroundColor"),function(_4e,_4f){
with(_4e){
if(YES){
if(_style==CPProgressIndicatorSpinningStyle){
objj_msgSend(_barView,"removeFromSuperview");
_barView=nil;
objj_msgSend(_4e,"setBackgroundColor:",_1[_controlSize]);
}else{
objj_msgSend(_4e,"setBackgroundColor:",_CPControlThreePartImagePattern(NO,_4,_2,"BezelBorder",_3[_style],_CPControlIdentifierForControlSize(_controlSize)));
objj_msgSend(_4e,"drawBar");
}
}else{
objj_msgSend(_4e,"setBackgroundColor:",nil);
}
}
})]);
class_addMethods(_6,[new objj_method(sel_getUid("initialize"),function(_50,_51){
with(_50){
if(_50!=objj_msgSend(CPProgressIndicator,"class")){
return;
}
var _52=objj_msgSend(CPBundle,"bundleForClass:",_50);
_1=[];
_1[CPMiniControlSize]=objj_msgSend(CPColor,"colorWithPatternImage:",objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_52,"pathForResource:","CPProgressIndicator/CPProgressIndicatorSpinningStyleRegular.gif"),CGSizeMake(64,64)));
_1[CPSmallControlSize]=objj_msgSend(CPColor,"colorWithPatternImage:",objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_52,"pathForResource:","CPProgressIndicator/CPProgressIndicatorSpinningStyleRegular.gif"),CGSizeMake(64,64)));
_1[CPRegularControlSize]=objj_msgSend(CPColor,"colorWithPatternImage:",objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_52,"pathForResource:","CPProgressIndicator/CPProgressIndicatorSpinningStyleRegular.gif"),CGSizeMake(64,64)));
CPProgressIndicatorBezelBorderViewPool=[];
var _53=CPProgressIndicatorBarStyle,end=CPProgressIndicatorHUDBarStyle;
for(;_53<=end;++_53){
CPProgressIndicatorBezelBorderViewPool[_53]=[];
CPProgressIndicatorBezelBorderViewPool[_53][CPMiniControlSize]=[];
CPProgressIndicatorBezelBorderViewPool[_53][CPSmallControlSize]=[];
CPProgressIndicatorBezelBorderViewPool[_53][CPRegularControlSize]=[];
}
_2=objj_msgSend(_50,"className");
_3=[];
_3[CPProgressIndicatorBarStyle]="Bar";
_3[CPProgressIndicatorSpinningStyle]="Spinny";
_3[CPProgressIndicatorHUDBarStyle]="HUDBar";
var _54=_CPControlIdentifierForControlSize(CPRegularControlSize),_55=_CPControlIdentifierForControlSize(CPSmallControlSize),_56=_CPControlIdentifierForControlSize(CPMiniControlSize);
_4=[];
var _57=[_2+"BezelBorder"+_3[CPProgressIndicatorBarStyle],_2+"Bar"+_3[CPProgressIndicatorBarStyle],_2+"BezelBorder"+_3[CPProgressIndicatorHUDBarStyle],_2+"Bar"+_3[CPProgressIndicatorHUDBarStyle]];
for(var i=0,_58=_57.length;i<_58;i++){
var _59=_57[i];
_4[_59+_54]=[{width:3,height:16},{width:1,height:16},{width:3,height:16}];
_4[_59+_55]=[{width:3,height:16},{width:1,height:16},{width:3,height:16}];
_4[_59+_56]=[{width:3,height:16},{width:1,height:16},{width:3,height:16}];
}
}
})]);
var _5=objj_getClass("CPProgressIndicator");
if(!_5){
throw new SyntaxError("*** Could not find definition for class \"CPProgressIndicator\"");
}
var _6=_5.isa;
class_addMethods(_5,[new objj_method(sel_getUid("initWithCoder:"),function(_5a,_5b,_5c){
with(_5a){
if(_5a=objj_msgSendSuper({receiver:_5a,super_class:objj_getClass("CPProgressIndicator").super_class},"initWithCoder:",_5c)){
_minValue=objj_msgSend(_5c,"decodeObjectForKey:","_minValue");
_maxValue=objj_msgSend(_5c,"decodeObjectForKey:","_maxValue");
_doubleValue=objj_msgSend(_5c,"decodeObjectForKey:","_doubleValue");
_controlSize=objj_msgSend(_5c,"decodeObjectForKey:","_controlSize");
_isIndeterminate=objj_msgSend(_5c,"decodeObjectForKey:","_isIndeterminate");
_style=objj_msgSend(_5c,"decodeObjectForKey:","_style");
_isAnimating=objj_msgSend(_5c,"decodeObjectForKey:","_isAnimating");
_isDisplayedWhenStoppedSet=objj_msgSend(_5c,"decodeObjectForKey:","_isDisplayedWhenStoppedSet");
_isDisplayedWhenStopped=objj_msgSend(_5c,"decodeObjectForKey:","_isDisplayedWhenStopped");
}
return _5a;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_5d,_5e,_5f){
with(_5d){
objj_msgSendSuper({receiver:_5d,super_class:objj_getClass("CPProgressIndicator").super_class},"encodeWithCoder:",_5f);
objj_msgSend(_5f,"encodeObject:forKey:",_minValue,"_minValue");
objj_msgSend(_5f,"encodeObject:forKey:",_maxValue,"_maxValue");
objj_msgSend(_5f,"encodeObject:forKey:",_doubleValue,"_doubleValue");
objj_msgSend(_5f,"encodeObject:forKey:",_controlSize,"_controlSize");
objj_msgSend(_5f,"encodeObject:forKey:",_isIndeterminate,"_isIndeterminate");
objj_msgSend(_5f,"encodeObject:forKey:",_style,"_style");
objj_msgSend(_5f,"encodeObject:forKey:",_isAnimating,"_isAnimating");
objj_msgSend(_5f,"encodeObject:forKey:",_isDisplayedWhenStoppedSet,"_isDisplayedWhenStoppedSet");
objj_msgSend(_5f,"encodeObject:forKey:",_isDisplayedWhenStopped,"_isDisplayedWhenStopped");
}
})]);
p;9;CPRadio.jt;5571;@STATIC;1.0;I;21;Foundation/CPObject.jI;18;Foundation/CPSet.ji;10;CPButton.jt;5488;
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("Foundation/CPSet.j",NO);
objj_executeFile("CPButton.j",YES);
CPRadioImageOffset=4;
var _1=objj_allocateClassPair(CPButton,"CPRadio"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_radioGroup")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("initWithFrame:radioGroup:"),function(_3,_4,_5,_6){
with(_3){
_3=objj_msgSendSuper({receiver:_3,super_class:objj_getClass("CPRadio").super_class},"initWithFrame:",_5);
if(_3){
objj_msgSend(_3,"setRadioGroup:",_6);
objj_msgSend(_3,"setHighlightsBy:",CPContentsCellMask);
objj_msgSend(_3,"setShowsStateBy:",CPContentsCellMask);
objj_msgSend(_3,"setImagePosition:",CPImageLeft);
objj_msgSend(_3,"setAlignment:",CPLeftTextAlignment);
objj_msgSend(_3,"setBordered:",YES);
}
return _3;
}
}),new objj_method(sel_getUid("initWithFrame:"),function(_7,_8,_9){
with(_7){
return objj_msgSend(_7,"initWithFrame:radioGroup:",_9,objj_msgSend(CPRadioGroup,"new"));
}
}),new objj_method(sel_getUid("nextState"),function(_a,_b){
with(_a){
return CPOnState;
}
}),new objj_method(sel_getUid("setRadioGroup:"),function(_c,_d,_e){
with(_c){
if(_radioGroup===_e){
return;
}
objj_msgSend(_radioGroup,"_removeRadio:",_c);
_radioGroup=_e;
objj_msgSend(_radioGroup,"_addRadio:",_c);
}
}),new objj_method(sel_getUid("radioGroup"),function(_f,_10){
with(_f){
return _radioGroup;
}
}),new objj_method(sel_getUid("setObjectValue:"),function(_11,_12,_13){
with(_11){
objj_msgSendSuper({receiver:_11,super_class:objj_getClass("CPRadio").super_class},"setObjectValue:",_13);
if(objj_msgSend(_11,"state")===CPOnState){
objj_msgSend(_radioGroup,"_setSelectedRadio:",_11);
}
}
})]);
class_addMethods(_2,[new objj_method(sel_getUid("radioWithTitle:theme:"),function(_14,_15,_16,_17){
with(_14){
return objj_msgSend(_14,"buttonWithTitle:theme:",_16,_17);
}
}),new objj_method(sel_getUid("radioWithTitle:"),function(_18,_19,_1a){
with(_18){
return objj_msgSend(_18,"buttonWithTitle:",_1a);
}
}),new objj_method(sel_getUid("standardButtonWithTitle:"),function(_1b,_1c,_1d){
with(_1b){
var _1e=objj_msgSend(objj_msgSend(CPRadio,"alloc"),"init");
objj_msgSend(_1e,"setTitle:",_1d);
return _1e;
}
}),new objj_method(sel_getUid("defaultThemeClass"),function(_1f,_20){
with(_1f){
return "radio";
}
})]);
var _21="CPRadioRadioGroupKey";
var _1=objj_getClass("CPRadio");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"CPRadio\"");
}
var _2=_1.isa;
class_addMethods(_1,[new objj_method(sel_getUid("initWithCoder:"),function(_22,_23,_24){
with(_22){
_22=objj_msgSendSuper({receiver:_22,super_class:objj_getClass("CPRadio").super_class},"initWithCoder:",_24);
if(_22){
_radioGroup=objj_msgSend(_24,"decodeObjectForKey:",_21);
}
return _22;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_25,_26,_27){
with(_25){
objj_msgSendSuper({receiver:_25,super_class:objj_getClass("CPRadio").super_class},"encodeWithCoder:",_27);
objj_msgSend(_27,"encodeObject:forKey:",_radioGroup,_21);
}
})]);
var _1=objj_allocateClassPair(CPObject,"CPRadioGroup"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_radios"),new objj_ivar("_selectedRadio"),new objj_ivar("_target"),new objj_ivar("_action")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("target"),function(_28,_29){
with(_28){
return _target;
}
}),new objj_method(sel_getUid("setTarget:"),function(_2a,_2b,_2c){
with(_2a){
_target=_2c;
}
}),new objj_method(sel_getUid("action"),function(_2d,_2e){
with(_2d){
return _action;
}
}),new objj_method(sel_getUid("setAction:"),function(_2f,_30,_31){
with(_2f){
_action=_31;
}
}),new objj_method(sel_getUid("init"),function(_32,_33){
with(_32){
_32=objj_msgSendSuper({receiver:_32,super_class:objj_getClass("CPRadioGroup").super_class},"init");
if(_32){
_radios=objj_msgSend(CPSet,"set");
_selectedRadio=nil;
}
return _32;
}
}),new objj_method(sel_getUid("_addRadio:"),function(_34,_35,_36){
with(_34){
objj_msgSend(_radios,"addObject:",_36);
if(objj_msgSend(_36,"state")===CPOnState){
objj_msgSend(_34,"_setSelectedRadio:",_36);
}
}
}),new objj_method(sel_getUid("_removeRadio:"),function(_37,_38,_39){
with(_37){
if(_selectedRadio===_39){
_selectedRadio=nil;
}
objj_msgSend(_radios,"removeObject:",_39);
}
}),new objj_method(sel_getUid("_setSelectedRadio:"),function(_3a,_3b,_3c){
with(_3a){
if(_selectedRadio===_3c){
return;
}
objj_msgSend(_selectedRadio,"setState:",CPOffState);
_selectedRadio=_3c;
objj_msgSend(CPApp,"sendAction:to:from:",_action,_target,_3a);
}
}),new objj_method(sel_getUid("selectedRadio"),function(_3d,_3e){
with(_3d){
return _selectedRadio;
}
}),new objj_method(sel_getUid("radios"),function(_3f,_40){
with(_3f){
return objj_msgSend(_radios,"allObjects");
}
})]);
var _41="CPRadioGroupRadiosKey",_42="CPRadioGroupSelectedRadioKey";
var _1=objj_getClass("CPRadioGroup");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"CPRadioGroup\"");
}
var _2=_1.isa;
class_addMethods(_1,[new objj_method(sel_getUid("initWithCoder:"),function(_43,_44,_45){
with(_43){
_43=objj_msgSendSuper({receiver:_43,super_class:objj_getClass("CPRadioGroup").super_class},"init");
if(_43){
_radios=objj_msgSend(_45,"decodeObjectForKey:",_41);
_selectedRadio=objj_msgSend(_45,"decodeObjectForKey:",_42);
}
return _43;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_46,_47,_48){
with(_46){
objj_msgSend(_48,"encodeObject:forKey:",_radios,_41);
objj_msgSend(_48,"encodeObject:forKey:",_selectedRadio,_42);
}
})]);
p;13;CPResponder.jt;5870;@STATIC;1.0;I;21;Foundation/CPObject.jt;5825;
objj_executeFile("Foundation/CPObject.j",NO);
CPDeleteKeyCode=8;
CPTabKeyCode=9;
CPReturnKeyCode=13;
CPEscapeKeyCode=27;
CPSpaceKeyCode=32;
CPPageUpKeyCode=33;
CPPageDownKeyCode=34;
CPLeftArrowKeyCode=37;
CPUpArrowKeyCode=38;
CPRightArrowKeyCode=39;
CPDownArrowKeyCode=40;
CPDeleteForwardKeyCode=46;
var _1=objj_allocateClassPair(CPObject,"CPResponder"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_menu"),new objj_ivar("_nextResponder")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("acceptsFirstResponder"),function(_3,_4){
with(_3){
return NO;
}
}),new objj_method(sel_getUid("becomeFirstResponder"),function(_5,_6){
with(_5){
return YES;
}
}),new objj_method(sel_getUid("resignFirstResponder"),function(_7,_8){
with(_7){
return YES;
}
}),new objj_method(sel_getUid("setNextResponder:"),function(_9,_a,_b){
with(_9){
_nextResponder=_b;
}
}),new objj_method(sel_getUid("nextResponder"),function(_c,_d){
with(_c){
return _nextResponder;
}
}),new objj_method(sel_getUid("interpretKeyEvents:"),function(_e,_f,_10){
with(_e){
var _11=0,_12=objj_msgSend(_10,"count");
for(;_11<_12;++_11){
var _13=_10[_11],_14=objj_msgSend(_13,"modifierFlags"),_15=objj_msgSend(_13,"charactersIgnoringModifiers"),_16=objj_msgSend(CPKeyBinding,"selectorsForKey:modifierFlags:",_15,_14);
if(_16){
for(var s=0,_17=_16.length;s<_17;s++){
var _18=_16[s];
if(!_18){
continue;
}
objj_msgSend(_e,"doCommandBySelector:",CPSelectorFromString(_18));
}
}else{
if(!(_14&(CPCommandKeyMask|CPControlKeyMask))&&objj_msgSend(_e,"respondsToSelector:",sel_getUid("insertText:"))){
objj_msgSend(_e,"insertText:",objj_msgSend(_13,"characters"));
}
}
}
}
}),new objj_method(sel_getUid("mouseDown:"),function(_19,_1a,_1b){
with(_19){
objj_msgSend(_nextResponder,"performSelector:withObject:",_1a,_1b);
}
}),new objj_method(sel_getUid("rightMouseDown:"),function(_1c,_1d,_1e){
with(_1c){
objj_msgSend(_nextResponder,"performSelector:withObject:",_1d,_1e);
}
}),new objj_method(sel_getUid("mouseDragged:"),function(_1f,_20,_21){
with(_1f){
objj_msgSend(_nextResponder,"performSelector:withObject:",_20,_21);
}
}),new objj_method(sel_getUid("mouseUp:"),function(_22,_23,_24){
with(_22){
objj_msgSend(_nextResponder,"performSelector:withObject:",_23,_24);
}
}),new objj_method(sel_getUid("rightMouseUp:"),function(_25,_26,_27){
with(_25){
objj_msgSend(_nextResponder,"performSelector:withObject:",_26,_27);
}
}),new objj_method(sel_getUid("mouseMoved:"),function(_28,_29,_2a){
with(_28){
objj_msgSend(_nextResponder,"performSelector:withObject:",_29,_2a);
}
}),new objj_method(sel_getUid("mouseEntered:"),function(_2b,_2c,_2d){
with(_2b){
objj_msgSend(_nextResponder,"performSelector:withObject:",_2c,_2d);
}
}),new objj_method(sel_getUid("mouseExited:"),function(_2e,_2f,_30){
with(_2e){
objj_msgSend(_nextResponder,"performSelector:withObject:",_2f,_30);
}
}),new objj_method(sel_getUid("scrollWheel:"),function(_31,_32,_33){
with(_31){
objj_msgSend(_nextResponder,"performSelector:withObject:",_32,_33);
}
}),new objj_method(sel_getUid("keyDown:"),function(_34,_35,_36){
with(_34){
objj_msgSend(_nextResponder,"performSelector:withObject:",_35,_36);
}
}),new objj_method(sel_getUid("keyUp:"),function(_37,_38,_39){
with(_37){
objj_msgSend(_nextResponder,"performSelector:withObject:",_38,_39);
}
}),new objj_method(sel_getUid("flagsChanged:"),function(_3a,_3b,_3c){
with(_3a){
objj_msgSend(_nextResponder,"performSelector:withObject:",_3b,_3c);
}
}),new objj_method(sel_getUid("performKeyEquivalent:"),function(_3d,_3e,_3f){
with(_3d){
return NO;
}
}),new objj_method(sel_getUid("insertLineBreak:"),function(_40,_41,_42){
with(_40){
objj_msgSend(_40,"insertNewline:",_42);
}
}),new objj_method(sel_getUid("insertNewline:"),function(_43,_44,_45){
with(_43){
objj_msgSend(objj_msgSend(_43,"nextResponder"),"insertNewline:",_45);
}
}),new objj_method(sel_getUid("insertTab:"),function(_46,_47,_48){
with(_46){
}
}),new objj_method(sel_getUid("insertBackTab:"),function(_49,_4a,_4b){
with(_49){
}
}),new objj_method(sel_getUid("insertText:"),function(_4c,_4d,_4e){
with(_4c){
}
}),new objj_method(sel_getUid("doCommandBySelector:"),function(_4f,_50,_51){
with(_4f){
if(objj_msgSend(_4f,"respondsToSelector:",_51)){
objj_msgSend(_4f,"performSelector:",_51);
}else{
objj_msgSend(_nextResponder,"doCommandBySelector:",_51);
}
}
}),new objj_method(sel_getUid("tryToPerform:with:"),function(_52,_53,_54,_55){
with(_52){
if(objj_msgSend(_52,"respondsToSelector:",_54)){
objj_msgSend(_52,"performSelector:withObject:",_54,_55);
return YES;
}
return objj_msgSend(_nextResponder,"tryToPerform:with:",_54,_55);
}
}),new objj_method(sel_getUid("setMenu:"),function(_56,_57,_58){
with(_56){
_menu=_58;
}
}),new objj_method(sel_getUid("menu"),function(_59,_5a){
with(_59){
return _menu;
}
}),new objj_method(sel_getUid("undoManager"),function(_5b,_5c){
with(_5b){
return objj_msgSend(_nextResponder,"performSelector:",_5c);
}
}),new objj_method(sel_getUid("noResponderFor:"),function(_5d,_5e,_5f){
with(_5d){
}
})]);
var _60="CPResponderNextResponderKey",_61="CPResponderMenuKey";
var _1=objj_getClass("CPResponder");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"CPResponder\"");
}
var _2=_1.isa;
class_addMethods(_1,[new objj_method(sel_getUid("initWithCoder:"),function(_62,_63,_64){
with(_62){
_62=objj_msgSendSuper({receiver:_62,super_class:objj_getClass("CPResponder").super_class},"init");
if(_62){
objj_msgSend(_62,"setNextResponder:",objj_msgSend(_64,"decodeObjectForKey:",_60));
objj_msgSend(_62,"setMenu:",objj_msgSend(_64,"decodeObjectForKey:",_61));
}
return _62;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_65,_66,_67){
with(_65){
if(_nextResponder!==nil){
objj_msgSend(_67,"encodeConditionalObject:forKey:",_nextResponder,_60);
}
objj_msgSend(_67,"encodeObject:forKey:",_menu,_61);
}
})]);
p;13;CPSavePanel.jt;2730;@STATIC;1.0;i;9;CPPanel.jt;2698;
objj_executeFile("CPPanel.j",YES);
var _1=objj_allocateClassPair(CPPanel,"CPSavePanel"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_URL"),new objj_ivar("_isExtensionHidden"),new objj_ivar("_canSelectHiddenExtension"),new objj_ivar("_allowsOtherFileTypes"),new objj_ivar("_canCreateDirectories"),new objj_ivar("_allowedFileTypes")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("isExtensionHidden"),function(_3,_4){
with(_3){
return _isExtensionHidden;
}
}),new objj_method(sel_getUid("setExtensionHidden:"),function(_5,_6,_7){
with(_5){
_isExtensionHidden=_7;
}
}),new objj_method(sel_getUid("canSelectHiddenExtension"),function(_8,_9){
with(_8){
return _canSelectHiddenExtension;
}
}),new objj_method(sel_getUid("setCanSelectHiddenExtension:"),function(_a,_b,_c){
with(_a){
_canSelectHiddenExtension=_c;
}
}),new objj_method(sel_getUid("allowsOtherFileTypes"),function(_d,_e){
with(_d){
return _allowsOtherFileTypes;
}
}),new objj_method(sel_getUid("setAllowsOtherFileTypes:"),function(_f,_10,_11){
with(_f){
_allowsOtherFileTypes=_11;
}
}),new objj_method(sel_getUid("canCreateDirectories"),function(_12,_13){
with(_12){
return _canCreateDirectories;
}
}),new objj_method(sel_getUid("setCanCreateDirectories:"),function(_14,_15,_16){
with(_14){
_canCreateDirectories=_16;
}
}),new objj_method(sel_getUid("allowedFileTypes"),function(_17,_18){
with(_17){
return _allowedFileTypes;
}
}),new objj_method(sel_getUid("setAllowedFileTypes:"),function(_19,_1a,_1b){
with(_19){
_allowedFileTypes=_1b;
}
}),new objj_method(sel_getUid("init"),function(_1c,_1d){
with(_1c){
if(_1c=objj_msgSendSuper({receiver:_1c,super_class:objj_getClass("CPSavePanel").super_class},"init")){
_canCreateDirectories=YES;
}
return _1c;
}
}),new objj_method(sel_getUid("runModal"),function(_1e,_1f){
with(_1e){
objj_msgSend(objj_msgSend(CPRunLoop,"currentRunLoop"),"limitDateForMode:",CPDefaultRunLoopMode);
if(typeof window["cpSavePanel"]==="function"){
var _20=window.cpSavePanel({isExtensionHidden:_isExtensionHidden,canSelectHiddenExtension:_canSelectHiddenExtension,allowsOtherFileTypes:_allowsOtherFileTypes,canCreateDirectories:_canCreateDirectories,allowedFileTypes:_allowedFileTypes}),_21=_20.button;
_URL=_21?objj_msgSend(CPURL,"URLWithString:",_20.URL):nil;
}else{
var _22=window.prompt("Document Name:"),_21=_22!==null;
_URL=_21?objj_msgSend(objj_msgSend(_1e,"class"),"proposedFileURLWithDocumentName:",_22):nil;
}
return _21;
}
}),new objj_method(sel_getUid("URL"),function(_23,_24){
with(_23){
return _URL;
}
})]);
class_addMethods(_2,[new objj_method(sel_getUid("savePanel"),function(_25,_26){
with(_25){
return objj_msgSend(objj_msgSend(CPSavePanel,"alloc"),"init");
}
})]);
p;10;CPScreen.jt;421;@STATIC;1.0;I;21;Foundation/CPObject.jt;377;
objj_executeFile("Foundation/CPObject.j",NO);
var _1=objj_allocateClassPair(CPObject,"CPScreen"),_2=_1.isa;
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("visibleFrame"),function(_3,_4){
with(_3){
return {origin:{x:window.screen.availLeft,y:window.screen.availTop},size:{width:window.screen.availWidth,height:window.screen.availHeight}};
}
})]);
p;12;CPScroller.jt;16754;@STATIC;1.0;i;11;CPControl.jt;16718;
objj_executeFile("CPControl.j",YES);
CPScrollerNoPart=0;
CPScrollerDecrementPage=1;
CPScrollerKnob=2;
CPScrollerIncrementPage=3;
CPScrollerDecrementLine=4;
CPScrollerIncrementLine=5;
CPScrollerKnobSlot=6;
CPScrollerIncrementArrow=0;
CPScrollerDecrementArrow=1;
CPNoScrollerParts=0;
CPOnlyScrollerArrows=1;
CPAllScrollerParts=2;
var _1=[CPScrollerKnobSlot,CPScrollerDecrementLine,CPScrollerIncrementLine,CPScrollerKnob],_2={},_3={};
_2[CPScrollerDecrementLine]="decrement-line";
_2[CPScrollerIncrementLine]="increment-line";
_2[CPScrollerKnobSlot]="knob-slot";
_2[CPScrollerKnob]="knob";
var _4=objj_allocateClassPair(CPControl,"CPScroller"),_5=_4.isa;
class_addIvars(_4,[new objj_ivar("_controlSize"),new objj_ivar("_usableParts"),new objj_ivar("_partRects"),new objj_ivar("_isVertical"),new objj_ivar("_knobProportion"),new objj_ivar("_hitPart"),new objj_ivar("_trackingPart"),new objj_ivar("_trackingFloatValue"),new objj_ivar("_trackingStartPoint")]);
objj_registerClassPair(_4);
class_addMethods(_4,[new objj_method(sel_getUid("isVertical"),function(_6,_7){
with(_6){
return _isVertical;
}
}),new objj_method(sel_getUid("initWithFrame:"),function(_8,_9,_a){
with(_8){
_8=objj_msgSendSuper({receiver:_8,super_class:objj_getClass("CPScroller").super_class},"initWithFrame:",_a);
if(_8){
_controlSize=CPRegularControlSize;
_partRects=[];
objj_msgSend(_8,"setFloatValue:",0);
objj_msgSend(_8,"setKnobProportion:",1);
_hitPart=CPScrollerNoPart;
objj_msgSend(_8,"_calculateIsVertical");
}
return _8;
}
}),new objj_method(sel_getUid("setControlSize:"),function(_b,_c,_d){
with(_b){
if(_controlSize==_d){
return;
}
_controlSize=_d;
objj_msgSend(_b,"setNeedsLayout");
objj_msgSend(_b,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("controlSize"),function(_e,_f){
with(_e){
return _controlSize;
}
}),new objj_method(sel_getUid("setObjectValue:"),function(_10,_11,_12){
with(_10){
objj_msgSendSuper({receiver:_10,super_class:objj_getClass("CPScroller").super_class},"setObjectValue:",MIN(1,MAX(0,+_12)));
}
}),new objj_method(sel_getUid("setKnobProportion:"),function(_13,_14,_15){
with(_13){
_knobProportion=MIN(1,MAX(0.0001,_15));
objj_msgSend(_13,"setNeedsDisplay:",YES);
objj_msgSend(_13,"setNeedsLayout");
}
}),new objj_method(sel_getUid("knobProportion"),function(_16,_17){
with(_16){
return _knobProportion;
}
}),new objj_method(sel_getUid("currentValueForThemeAttribute:"),function(_18,_19,_1a){
with(_18){
var _1b=_themeState;
if(_2[_hitPart]+"-color"!==_1a){
_1b&=~CPThemeStateHighlighted;
}
return objj_msgSend(_18,"valueForThemeAttribute:inState:",_1a,_1b);
}
}),new objj_method(sel_getUid("rectForPart:"),function(_1c,_1d,_1e){
with(_1c){
if(_1e==CPScrollerNoPart){
return {origin:{x:0,y:0},size:{width:0,height:0}};
}
return _partRects[_1e];
}
}),new objj_method(sel_getUid("testPart:"),function(_1f,_20,_21){
with(_1f){
_21=objj_msgSend(_1f,"convertPoint:fromView:",_21,nil);
if(CGRectContainsPoint(objj_msgSend(_1f,"rectForPart:",CPScrollerKnob),_21)){
return CPScrollerKnob;
}
if(CGRectContainsPoint(objj_msgSend(_1f,"rectForPart:",CPScrollerDecrementPage),_21)){
return CPScrollerDecrementPage;
}
if(CGRectContainsPoint(objj_msgSend(_1f,"rectForPart:",CPScrollerIncrementPage),_21)){
return CPScrollerIncrementPage;
}
if(CGRectContainsPoint(objj_msgSend(_1f,"rectForPart:",CPScrollerDecrementLine),_21)){
return CPScrollerDecrementLine;
}
if(CGRectContainsPoint(objj_msgSend(_1f,"rectForPart:",CPScrollerIncrementLine),_21)){
return CPScrollerIncrementLine;
}
if(CGRectContainsPoint(objj_msgSend(_1f,"rectForPart:",CPScrollerKnobSlot),_21)){
return CPScrollerKnobSlot;
}
return CPScrollerNoPart;
}
}),new objj_method(sel_getUid("checkSpaceForParts"),function(_22,_23){
with(_22){
var _24=objj_msgSend(_22,"bounds");
if(_knobProportion===1){
_usableParts=CPNoScrollerParts;
_partRects[CPScrollerDecrementPage]=CGRectMakeZero();
_partRects[CPScrollerKnob]=CGRectMakeZero();
_partRects[CPScrollerIncrementPage]=CGRectMakeZero();
_partRects[CPScrollerDecrementLine]=CGRectMakeZero();
_partRects[CPScrollerIncrementLine]=CGRectMakeZero();
_partRects[CPScrollerKnobSlot]=CGRectMakeCopy(_24);
return;
}
_usableParts=CPAllScrollerParts;
var _25=objj_msgSend(_22,"currentValueForThemeAttribute:","knob-inset"),_26=objj_msgSend(_22,"currentValueForThemeAttribute:","track-inset"),_27=(_24.size.width),_28=(_24.size.height);
if(objj_msgSend(_22,"isVertical")){
var _29=objj_msgSend(_22,"currentValueForThemeAttribute:","decrement-line-size"),_2a=objj_msgSend(_22,"currentValueForThemeAttribute:","increment-line-size"),_2b=_29.height+_26.top,_2c=_2a.height+_26.bottom,_2d=_28-_2b-_2c,_2e=objj_msgSend(_22,"currentValueForThemeAttribute:","minimum-knob-length"),_2f=_27-_25.left-_25.right,_30=MAX(_2e,(_2d*_knobProportion)),_31=_2b+(_2d-_30)*objj_msgSend(_22,"floatValue");
_partRects[CPScrollerDecrementPage]={origin:{x:0,y:_2b},size:{width:_27,height:_31-_2b}};
_partRects[CPScrollerKnob]={origin:{x:_25.left,y:_31},size:{width:_2f,height:_30}};
_partRects[CPScrollerIncrementPage]={origin:{x:0,y:_31+_30},size:{width:_27,height:_28-(_31+_30)-_2c}};
_partRects[CPScrollerKnobSlot]={origin:{x:_26.left,y:_2b},size:{width:_27-_26.left-_26.right,height:_2d}};
_partRects[CPScrollerDecrementLine]={origin:{x:0,y:0},size:{width:_29.width,height:_29.height}};
_partRects[CPScrollerIncrementLine]={origin:{x:0,y:_28-_2a.height},size:{width:_2a.width,height:_2a.height}};
if(_28<_30+_29.height+_2a.height+_26.top+_26.bottom){
_partRects[CPScrollerKnob]={origin:{x:0,y:0},size:{width:0,height:0}};
}
if(_28<_29.height+_2a.height-2){
_partRects[CPScrollerIncrementLine]={origin:{x:0,y:0},size:{width:0,height:0}};
_partRects[CPScrollerDecrementLine]={origin:{x:0,y:0},size:{width:0,height:0}};
_partRects[CPScrollerKnobSlot]={origin:{x:_26.left,y:0},size:{width:_27-_26.left-_26.right,height:_28}};
}
}else{
var _29=objj_msgSend(_22,"currentValueForThemeAttribute:","decrement-line-size"),_2a=objj_msgSend(_22,"currentValueForThemeAttribute:","increment-line-size"),_32=_29.width+_26.left,_33=_2a.width+_26.right,_2d=_27-_32-_33,_2e=objj_msgSend(_22,"currentValueForThemeAttribute:","minimum-knob-length"),_2f=MAX(_2e,(_2d*_knobProportion)),_30=_28-_25.top-_25.bottom,_31=_32+(_2d-_2f)*objj_msgSend(_22,"floatValue");
_partRects[CPScrollerDecrementPage]={origin:{x:_32,y:0},size:{width:_31-_32,height:_28}};
_partRects[CPScrollerKnob]={origin:{x:_31,y:_25.top},size:{width:_2f,height:_30}};
_partRects[CPScrollerIncrementPage]={origin:{x:_31+_2f,y:0},size:{width:_27-(_31+_2f)-_33,height:_28}};
_partRects[CPScrollerKnobSlot]={origin:{x:_32,y:_26.top},size:{width:_2d,height:_28-_26.top-_26.bottom}};
_partRects[CPScrollerDecrementLine]={origin:{x:0,y:0},size:{width:_29.width,height:_29.height}};
_partRects[CPScrollerIncrementLine]={origin:{x:_27-_2a.width,y:0},size:{width:_2a.width,height:_2a.height}};
if(_27<_2f+_29.width+_2a.width+_26.left+_26.right){
_partRects[CPScrollerKnob]={origin:{x:0,y:0},size:{width:0,height:0}};
}
if(_27<_29.width+_2a.width-2){
_partRects[CPScrollerIncrementLine]={origin:{x:0,y:0},size:{width:0,height:0}};
_partRects[CPScrollerDecrementLine]={origin:{x:0,y:0},size:{width:0,height:0}};
_partRects[CPScrollerKnobSlot]={origin:{x:0,y:0},size:{width:_27,height:_2d}};
}
}
}
}),new objj_method(sel_getUid("usableParts"),function(_34,_35){
with(_34){
return _usableParts;
}
}),new objj_method(sel_getUid("drawArrow:highlight:"),function(_36,_37,_38,_39){
with(_36){
}
}),new objj_method(sel_getUid("drawKnob"),function(_3a,_3b){
with(_3a){
}
}),new objj_method(sel_getUid("drawKnobSlot"),function(_3c,_3d){
with(_3c){
}
}),new objj_method(sel_getUid("createViewForPart:"),function(_3e,_3f,_40){
with(_3e){
var _41=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",{origin:{x:0,y:0},size:{width:0,height:0}});
objj_msgSend(_41,"setHitTests:",NO);
return _41;
}
}),new objj_method(sel_getUid("rectForEphemeralSubviewNamed:"),function(_42,_43,_44){
with(_42){
return _partRects[_44];
}
}),new objj_method(sel_getUid("createEphemeralSubviewNamed:"),function(_45,_46,_47){
with(_45){
var _48=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",{origin:{x:0,y:0},size:{width:0,height:0}});
objj_msgSend(_48,"setHitTests:",NO);
return _48;
}
}),new objj_method(sel_getUid("layoutSubviews"),function(_49,_4a){
with(_49){
objj_msgSend(_49,"checkSpaceForParts");
var _4b=0,_4c=_1.length;
for(;_4b<_4c;++_4b){
var _4d=_1[_4b];
if(_4b===0){
view=objj_msgSend(_49,"layoutEphemeralSubviewNamed:positioned:relativeToEphemeralSubviewNamed:",_4d,CPWindowBelow,_1[_4b+1]);
}else{
view=objj_msgSend(_49,"layoutEphemeralSubviewNamed:positioned:relativeToEphemeralSubviewNamed:",_4d,CPWindowAbove,_1[_4b-1]);
}
if(view){
objj_msgSend(view,"setBackgroundColor:",objj_msgSend(_49,"currentValueForThemeAttribute:",_2[_4d]+"-color"));
}
}
}
}),new objj_method(sel_getUid("drawParts"),function(_4e,_4f){
with(_4e){
objj_msgSend(_4e,"drawKnobSlot");
objj_msgSend(_4e,"drawKnob");
objj_msgSend(_4e,"drawArrow:highlight:",CPScrollerDecrementArrow,NO);
objj_msgSend(_4e,"drawArrow:highlight:",CPScrollerIncrementArrow,NO);
}
}),new objj_method(sel_getUid("hitPart"),function(_50,_51){
with(_50){
return _hitPart;
}
}),new objj_method(sel_getUid("trackKnob:"),function(_52,_53,_54){
with(_52){
var _55=objj_msgSend(_54,"type");
if(_55===CPLeftMouseUp){
_hitPart=CPScrollerNoPart;
return;
}
if(_55===CPLeftMouseDown){
_trackingFloatValue=objj_msgSend(_52,"floatValue");
_trackingStartPoint=objj_msgSend(_52,"convertPoint:fromView:",objj_msgSend(_54,"locationInWindow"),nil);
}else{
if(_55===CPLeftMouseDragged){
var _56=objj_msgSend(_52,"rectForPart:",CPScrollerKnob),_57=objj_msgSend(_52,"rectForPart:",CPScrollerKnobSlot),_58=!objj_msgSend(_52,"isVertical")?((_57.size.width)-(_56.size.width)):((_57.size.height)-(_56.size.height));
if(_58<=0){
objj_msgSend(_52,"setFloatValue:",0);
}else{
var _59=objj_msgSend(_52,"convertPoint:fromView:",objj_msgSend(_54,"locationInWindow"),nil),_5a=!objj_msgSend(_52,"isVertical")?_59.x-_trackingStartPoint.x:_59.y-_trackingStartPoint.y;
objj_msgSend(_52,"setFloatValue:",_trackingFloatValue+_5a/_58);
}
}
}
objj_msgSend(CPApp,"setTarget:selector:forNextEventMatchingMask:untilDate:inMode:dequeue:",_52,sel_getUid("trackKnob:"),CPLeftMouseDraggedMask|CPLeftMouseUpMask,nil,nil,YES);
objj_msgSend(_52,"sendAction:to:",objj_msgSend(_52,"action"),objj_msgSend(_52,"target"));
}
}),new objj_method(sel_getUid("trackScrollButtons:"),function(_5b,_5c,_5d){
with(_5b){
var _5e=objj_msgSend(_5d,"type");
if(_5e===CPLeftMouseUp){
objj_msgSend(_5b,"highlight:",NO);
objj_msgSend(CPEvent,"stopPeriodicEvents");
_hitPart=CPScrollerNoPart;
return;
}
if(_5e===CPLeftMouseDown){
_trackingPart=objj_msgSend(_5b,"hitPart");
_trackingStartPoint=objj_msgSend(_5b,"convertPoint:fromView:",objj_msgSend(_5d,"locationInWindow"),nil);
if(objj_msgSend(_5d,"modifierFlags")&CPAlternateKeyMask){
if(_trackingPart==CPScrollerDecrementLine){
_hitPart=CPScrollerDecrementPage;
}else{
if(_trackingPart==CPScrollerIncrementLine){
_hitPart=CPScrollerIncrementPage;
}else{
if(_trackingPart==CPScrollerDecrementPage||_trackingPart==CPScrollerIncrementPage){
var _5f=objj_msgSend(_5b,"rectForPart:",CPScrollerKnob),_60=!objj_msgSend(_5b,"isVertical")?(_5f.size.width):(_5f.size.height),_61=objj_msgSend(_5b,"rectForPart:",CPScrollerKnobSlot),_62=(!objj_msgSend(_5b,"isVertical")?(_61.size.width):(_61.size.height))-_60;
objj_msgSend(_5b,"setFloatValue:",((!objj_msgSend(_5b,"isVertical")?_trackingStartPoint.x-(_61.origin.x):_trackingStartPoint.y-(_61.origin.y))-_60/2)/_62);
_hitPart=CPScrollerKnob;
objj_msgSend(_5b,"sendAction:to:",objj_msgSend(_5b,"action"),objj_msgSend(_5b,"target"));
return objj_msgSend(_5b,"trackKnob:",_5d);
}
}
}
}
objj_msgSend(_5b,"highlight:",YES);
objj_msgSend(_5b,"sendAction:to:",objj_msgSend(_5b,"action"),objj_msgSend(_5b,"target"));
objj_msgSend(CPEvent,"startPeriodicEventsAfterDelay:withPeriod:",0.5,0.04);
}else{
if(_5e===CPLeftMouseDragged){
_trackingStartPoint=objj_msgSend(_5b,"convertPoint:fromView:",objj_msgSend(_5d,"locationInWindow"),nil);
if(_trackingPart==CPScrollerDecrementPage||_trackingPart==CPScrollerIncrementPage){
var _63=objj_msgSend(_5b,"testPart:",objj_msgSend(_5d,"locationInWindow"));
if(_63==CPScrollerDecrementPage||_63==CPScrollerIncrementPage){
_trackingPart=_63;
_hitPart=_63;
}
}
objj_msgSend(_5b,"highlight:",CGRectContainsPoint(objj_msgSend(_5b,"rectForPart:",_trackingPart),_trackingStartPoint));
}else{
if(_5e==CPPeriodic&&CGRectContainsPoint(objj_msgSend(_5b,"rectForPart:",_trackingPart),_trackingStartPoint)){
objj_msgSend(_5b,"sendAction:to:",objj_msgSend(_5b,"action"),objj_msgSend(_5b,"target"));
}
}
}
objj_msgSend(CPApp,"setTarget:selector:forNextEventMatchingMask:untilDate:inMode:dequeue:",_5b,sel_getUid("trackScrollButtons:"),CPPeriodicMask|CPLeftMouseDraggedMask|CPLeftMouseUpMask,nil,nil,YES);
}
}),new objj_method(sel_getUid("_calculateIsVertical"),function(_64,_65){
with(_64){
var _66=objj_msgSend(_64,"bounds"),_67=(_66.size.width),_68=(_66.size.height);
_isVertical=_67<_68?1:(_67>_68?0:-1);
if(_isVertical===1){
objj_msgSend(_64,"setThemeState:",CPThemeStateVertical);
}else{
if(_isVertical===0){
objj_msgSend(_64,"unsetThemeState:",CPThemeStateVertical);
}
}
}
}),new objj_method(sel_getUid("setFrameSize:"),function(_69,_6a,_6b){
with(_69){
objj_msgSendSuper({receiver:_69,super_class:objj_getClass("CPScroller").super_class},"setFrameSize:",_6b);
objj_msgSend(_69,"checkSpaceForParts");
objj_msgSend(_69,"setNeedsLayout");
}
}),new objj_method(sel_getUid("mouseDown:"),function(_6c,_6d,_6e){
with(_6c){
if(!objj_msgSend(_6c,"isEnabled")){
return;
}
_hitPart=objj_msgSend(_6c,"testPart:",objj_msgSend(_6e,"locationInWindow"));
switch(_hitPart){
case CPScrollerKnob:
return objj_msgSend(_6c,"trackKnob:",_6e);
case CPScrollerDecrementLine:
case CPScrollerIncrementLine:
case CPScrollerDecrementPage:
case CPScrollerIncrementPage:
return objj_msgSend(_6c,"trackScrollButtons:",_6e);
}
}
})]);
class_addMethods(_5,[new objj_method(sel_getUid("defaultThemeClass"),function(_6f,_70){
with(_6f){
return "scroller";
}
}),new objj_method(sel_getUid("themeAttributes"),function(_71,_72){
with(_71){
return objj_msgSend(CPDictionary,"dictionaryWithJSObject:",{"scroller-width":15,"knob-slot-color":objj_msgSend(CPColor,"lightGrayColor"),"decrement-line-color":objj_msgSend(CPNull,"null"),"increment-line-color":objj_msgSend(CPNull,"null"),"knob-color":objj_msgSend(CPColor,"grayColor"),"decrement-line-size":{width:0,height:0},"increment-line-size":{width:0,height:0},"track-inset":{top:(0),right:(0),bottom:(0),left:(0)},"knob-inset":{top:(0),right:(0),bottom:(0),left:(0)},"minimum-knob-length":21});
}
}),new objj_method(sel_getUid("scrollerWidth"),function(_73,_74){
with(_73){
return objj_msgSend(objj_msgSend(objj_msgSend(CPScroller,"alloc"),"init"),"currentValueForThemeAttribute:","scroller-width");
}
}),new objj_method(sel_getUid("scrollerWidthForControlSize:"),function(_75,_76,_77){
with(_75){
return objj_msgSend(_75,"scrollerWidth");
}
})]);
var _78="CPScrollerControlSize",_79="CPScrollerKnobProportion";
var _4=objj_getClass("CPScroller");
if(!_4){
throw new SyntaxError("*** Could not find definition for class \"CPScroller\"");
}
var _5=_4.isa;
class_addMethods(_4,[new objj_method(sel_getUid("initWithCoder:"),function(_7a,_7b,_7c){
with(_7a){
if(_7a=objj_msgSendSuper({receiver:_7a,super_class:objj_getClass("CPScroller").super_class},"initWithCoder:",_7c)){
_controlSize=CPRegularControlSize;
if(objj_msgSend(_7c,"containsValueForKey:",_78)){
_controlSize=objj_msgSend(_7c,"decodeIntForKey:",_78);
}
_knobProportion=1;
if(objj_msgSend(_7c,"containsValueForKey:",_79)){
_knobProportion=objj_msgSend(_7c,"decodeFloatForKey:",_79);
}
_partRects=[];
_hitPart=CPScrollerNoPart;
objj_msgSend(_7a,"_calculateIsVertical");
var _7d=objj_msgSend(_7a,"frame"),_7e=objj_msgSend(CPScroller,"scrollerWidth");
if(objj_msgSend(_7a,"isVertical")&&CGRectGetWidth(_7d)!==_7e){
_7d.size.width=_7e;
}
if(!objj_msgSend(_7a,"isVertical")&&CGRectGetHeight(_7d)!==_7e){
_7d.size.height=_7e;
}
objj_msgSend(_7a,"setFrame:",_7d);
}
return _7a;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_7f,_80,_81){
with(_7f){
objj_msgSendSuper({receiver:_7f,super_class:objj_getClass("CPScroller").super_class},"encodeWithCoder:",_81);
objj_msgSend(_81,"encodeInt:forKey:",_controlSize,_78);
objj_msgSend(_81,"encodeFloat:forKey:",_knobProportion,_79);
}
})]);
var _4=objj_getClass("CPScroller");
if(!_4){
throw new SyntaxError("*** Could not find definition for class \"CPScroller\"");
}
var _5=_4.isa;
class_addMethods(_4,[new objj_method(sel_getUid("setFloatValue:knobProportion:"),function(_82,_83,_84,_85){
with(_82){
objj_msgSend(_82,"setFloatValue:",_84);
objj_msgSend(_82,"setKnobProportion:",_85);
}
})]);
p;14;CPScrollView.jt;27369;@STATIC;1.0;i;7;CPBox.ji;12;CPClipView.ji;12;CPScroller.ji;8;CPView.jt;27292;
objj_executeFile("CPBox.j",YES);
objj_executeFile("CPClipView.j",YES);
objj_executeFile("CPScroller.j",YES);
objj_executeFile("CPView.j",YES);
var _1=objj_allocateClassPair(CPView,"CPScrollView"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_contentView"),new objj_ivar("_headerClipView"),new objj_ivar("_cornerView"),new objj_ivar("_bottomCornerView"),new objj_ivar("_hasVerticalScroller"),new objj_ivar("_hasHorizontalScroller"),new objj_ivar("_autohidesScrollers"),new objj_ivar("_verticalScroller"),new objj_ivar("_horizontalScroller"),new objj_ivar("_recursionCount"),new objj_ivar("_verticalLineScroll"),new objj_ivar("_verticalPageScroll"),new objj_ivar("_horizontalLineScroll"),new objj_ivar("_horizontalPageScroll"),new objj_ivar("_borderType")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("initWithFrame:"),function(_3,_4,_5){
with(_3){
_3=objj_msgSendSuper({receiver:_3,super_class:objj_getClass("CPScrollView").super_class},"initWithFrame:",_5);
if(_3){
_verticalLineScroll=10;
_verticalPageScroll=10;
_horizontalLineScroll=10;
_horizontalPageScroll=10;
_borderType=CPNoBorder;
_contentView=objj_msgSend(objj_msgSend(CPClipView,"alloc"),"initWithFrame:",objj_msgSend(_3,"_insetBounds"));
objj_msgSend(_3,"addSubview:",_contentView);
_headerClipView=objj_msgSend(objj_msgSend(CPClipView,"alloc"),"init");
objj_msgSend(_3,"addSubview:",_headerClipView);
_bottomCornerView=objj_msgSend(objj_msgSend(CPView,"alloc"),"init");
objj_msgSend(_3,"addSubview:",_bottomCornerView);
objj_msgSend(_3,"setHasVerticalScroller:",YES);
objj_msgSend(_3,"setHasHorizontalScroller:",YES);
}
return _3;
}
}),new objj_method(sel_getUid("_insetBounds"),function(_6,_7){
with(_6){
return objj_msgSend(objj_msgSend(_6,"class"),"_insetBounds:borderType:",objj_msgSend(_6,"bounds"),_borderType);
}
}),new objj_method(sel_getUid("contentSize"),function(_8,_9){
with(_8){
return objj_msgSend(_contentView,"frame").size;
}
}),new objj_method(sel_getUid("documentView"),function(_a,_b){
with(_a){
return objj_msgSend(_contentView,"documentView");
}
}),new objj_method(sel_getUid("setContentView:"),function(_c,_d,_e){
with(_c){
if(_contentView===_e||!_e){
return;
}
var _f=objj_msgSend(_e,"documentView");
if(_f){
objj_msgSend(_f,"removeFromSuperview");
}
objj_msgSend(_contentView,"removeFromSuperview");
_contentView=_e;
objj_msgSend(_contentView,"setDocumentView:",_f);
objj_msgSend(_c,"addSubview:",_contentView);
objj_msgSend(_c,"reflectScrolledClipView:",_contentView);
}
}),new objj_method(sel_getUid("contentView"),function(_10,_11){
with(_10){
return _contentView;
}
}),new objj_method(sel_getUid("setDocumentView:"),function(_12,_13,_14){
with(_12){
objj_msgSend(_contentView,"setDocumentView:",_14);
objj_msgSend(_12,"_updateCornerAndHeaderView");
objj_msgSend(_12,"reflectScrolledClipView:",_contentView);
}
}),new objj_method(sel_getUid("reflectScrolledClipView:"),function(_15,_16,_17){
with(_15){
if(_contentView!==_17){
return;
}
if(_recursionCount>5){
return;
}
++_recursionCount;
var _18=objj_msgSend(_15,"documentView");
if(!_18){
if(_autohidesScrollers){
objj_msgSend(_verticalScroller,"setHidden:",YES);
objj_msgSend(_horizontalScroller,"setHidden:",YES);
}else{
}
objj_msgSend(_contentView,"setFrame:",objj_msgSend(_15,"_insetBounds"));
objj_msgSend(_headerClipView,"setFrame:",{origin:{x:0,y:0},size:{width:0,height:0}});
--_recursionCount;
return;
}
var _19=objj_msgSend(_18,"frame"),_1a=objj_msgSend(_15,"_insetBounds"),_1b=objj_msgSend(_15,"_headerClipViewFrame"),_1c=(_1b.size.height);
_1a.origin.y+=_1c;
_1a.size.height-=_1c;
var _1d={width:(_19.size.width)-(_1a.size.width),height:(_19.size.height)-(_1a.size.height)},_1e=(objj_msgSend(_verticalScroller,"frame").size.width),_1f=(objj_msgSend(_horizontalScroller,"frame").size.height),_20=_1d.height>0,_21=_1d.width>0,_22=_hasVerticalScroller&&(!_autohidesScrollers||_20),_23=_hasHorizontalScroller&&(!_autohidesScrollers||_21);
if(_22){
_1d.width+=_1e;
_21=_1d.width>0;
_23=_hasHorizontalScroller&&(!_autohidesScrollers||_21);
}
if(_23){
_1d.height+=_1f;
_20=_1d.height>0;
_22=_hasVerticalScroller&&(!_autohidesScrollers||_20);
}
objj_msgSend(_verticalScroller,"setHidden:",!_22);
objj_msgSend(_verticalScroller,"setEnabled:",_20);
objj_msgSend(_horizontalScroller,"setHidden:",!_23);
objj_msgSend(_horizontalScroller,"setEnabled:",_21);
if(_22){
_1a.size.width-=_1e;
}
if(_23){
_1a.size.height-=_1f;
}
var _24=objj_msgSend(_contentView,"bounds").origin,_25=!objj_msgSend(_verticalScroller,"isHidden"),_26=!objj_msgSend(_horizontalScroller,"isHidden");
if(_22){
var _27=MAX((_1a.origin.y),MAX((objj_msgSend(_15,"_cornerViewFrame").origin.y+objj_msgSend(_15,"_cornerViewFrame").size.height),(_1b.origin.y+_1b.size.height)));
var _28=(_1a.origin.y+_1a.size.height)-_27;
objj_msgSend(_verticalScroller,"setFloatValue:",(_1d.height<=0)?0:_24.y/_1d.height);
objj_msgSend(_verticalScroller,"setKnobProportion:",(_1a.size.height)/(_19.size.height));
objj_msgSend(_verticalScroller,"setFrame:",{origin:{x:(_1a.origin.x+_1a.size.width),y:_27},size:{width:_1e,height:_28}});
}else{
if(_25){
objj_msgSend(_verticalScroller,"setFloatValue:",0);
objj_msgSend(_verticalScroller,"setKnobProportion:",1);
}
}
if(_23){
objj_msgSend(_horizontalScroller,"setFloatValue:",(_1d.width<=0)?0:_24.x/_1d.width);
objj_msgSend(_horizontalScroller,"setKnobProportion:",(_1a.size.width)/(_19.size.width));
objj_msgSend(_horizontalScroller,"setFrame:",{origin:{x:(_1a.origin.x),y:(_1a.origin.y+_1a.size.height)},size:{width:(_1a.size.width),height:_1f}});
}else{
if(_26){
objj_msgSend(_horizontalScroller,"setFloatValue:",0);
objj_msgSend(_horizontalScroller,"setKnobProportion:",1);
}
}
objj_msgSend(_contentView,"setFrame:",_1a);
objj_msgSend(_headerClipView,"setFrame:",_1b);
objj_msgSend(objj_msgSend(_headerClipView,"documentView"),"setNeedsDisplay:",YES);
objj_msgSend(_cornerView,"setFrame:",objj_msgSend(_15,"_cornerViewFrame"));
objj_msgSend(objj_msgSend(_15,"bottomCornerView"),"setFrame:",objj_msgSend(_15,"_bottomCornerViewFrame"));
objj_msgSend(objj_msgSend(_15,"bottomCornerView"),"setBackgroundColor:",objj_msgSend(_15,"currentValueForThemeAttribute:","bottom-corner-color"));
--_recursionCount;
}
}),new objj_method(sel_getUid("setBorderType:"),function(_29,_2a,_2b){
with(_29){
if(_borderType==_2b){
return;
}
_borderType=_2b;
objj_msgSend(_29,"reflectScrolledClipView:",_contentView);
objj_msgSend(_29,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("borderType"),function(_2c,_2d){
with(_2c){
return _borderType;
}
}),new objj_method(sel_getUid("setHorizontalScroller:"),function(_2e,_2f,_30){
with(_2e){
if(_horizontalScroller===_30){
return;
}
objj_msgSend(_horizontalScroller,"removeFromSuperview");
objj_msgSend(_horizontalScroller,"setTarget:",nil);
objj_msgSend(_horizontalScroller,"setAction:",nil);
_horizontalScroller=_30;
objj_msgSend(_horizontalScroller,"setTarget:",_2e);
objj_msgSend(_horizontalScroller,"setAction:",sel_getUid("_horizontalScrollerDidScroll:"));
objj_msgSend(_2e,"addSubview:",_horizontalScroller);
objj_msgSend(_2e,"reflectScrolledClipView:",_contentView);
}
}),new objj_method(sel_getUid("horizontalScroller"),function(_31,_32){
with(_31){
return _horizontalScroller;
}
}),new objj_method(sel_getUid("setHasHorizontalScroller:"),function(_33,_34,_35){
with(_33){
if(_hasHorizontalScroller===_35){
return;
}
_hasHorizontalScroller=_35;
if(_hasHorizontalScroller&&!_horizontalScroller){
var _36=objj_msgSend(_33,"_insetBounds");
objj_msgSend(_33,"setHorizontalScroller:",objj_msgSend(objj_msgSend(CPScroller,"alloc"),"initWithFrame:",CGRectMake(0,0,MAX((_36.size.width),objj_msgSend(CPScroller,"scrollerWidth")+1),objj_msgSend(CPScroller,"scrollerWidth"))));
objj_msgSend(objj_msgSend(_33,"horizontalScroller"),"setFrameSize:",CGSizeMake((_36.size.width),objj_msgSend(CPScroller,"scrollerWidth")));
}
objj_msgSend(_33,"reflectScrolledClipView:",_contentView);
}
}),new objj_method(sel_getUid("hasHorizontalScroller"),function(_37,_38){
with(_37){
return _hasHorizontalScroller;
}
}),new objj_method(sel_getUid("setVerticalScroller:"),function(_39,_3a,_3b){
with(_39){
if(_verticalScroller===_3b){
return;
}
objj_msgSend(_verticalScroller,"removeFromSuperview");
objj_msgSend(_verticalScroller,"setTarget:",nil);
objj_msgSend(_verticalScroller,"setAction:",nil);
_verticalScroller=_3b;
objj_msgSend(_verticalScroller,"setTarget:",_39);
objj_msgSend(_verticalScroller,"setAction:",sel_getUid("_verticalScrollerDidScroll:"));
objj_msgSend(_39,"addSubview:",_verticalScroller);
objj_msgSend(_39,"reflectScrolledClipView:",_contentView);
}
}),new objj_method(sel_getUid("verticalScroller"),function(_3c,_3d){
with(_3c){
return _verticalScroller;
}
}),new objj_method(sel_getUid("setHasVerticalScroller:"),function(_3e,_3f,_40){
with(_3e){
if(_hasVerticalScroller===_40){
return;
}
_hasVerticalScroller=_40;
if(_hasVerticalScroller&&!_verticalScroller){
var _41=objj_msgSend(_3e,"_insetBounds");
objj_msgSend(_3e,"setVerticalScroller:",objj_msgSend(objj_msgSend(CPScroller,"alloc"),"initWithFrame:",{origin:{x:0,y:0},size:{width:objj_msgSend(CPScroller,"scrollerWidth"),height:MAX((_41.size.height),objj_msgSend(CPScroller,"scrollerWidth")+1)}}));
objj_msgSend(objj_msgSend(_3e,"verticalScroller"),"setFrameSize:",CGSizeMake(objj_msgSend(CPScroller,"scrollerWidth"),(_41.size.height)));
}
objj_msgSend(_3e,"reflectScrolledClipView:",_contentView);
}
}),new objj_method(sel_getUid("hasVerticalScroller"),function(_42,_43){
with(_42){
return _hasVerticalScroller;
}
}),new objj_method(sel_getUid("setAutohidesScrollers:"),function(_44,_45,_46){
with(_44){
if(_autohidesScrollers==_46){
return;
}
_autohidesScrollers=_46;
objj_msgSend(_44,"reflectScrolledClipView:",_contentView);
}
}),new objj_method(sel_getUid("autohidesScrollers"),function(_47,_48){
with(_47){
return _autohidesScrollers;
}
}),new objj_method(sel_getUid("_updateCornerAndHeaderView"),function(_49,_4a){
with(_49){
var _4b=objj_msgSend(_49,"documentView"),_4c=objj_msgSend(_49,"_headerView"),_4d=objj_msgSend(_4b,"respondsToSelector:",sel_getUid("headerView"))?objj_msgSend(_4b,"headerView"):nil;
if(_4c!==_4d){
objj_msgSend(_4c,"removeFromSuperview");
objj_msgSend(_headerClipView,"setDocumentView:",_4d);
}
var _4e=objj_msgSend(_4b,"respondsToSelector:",sel_getUid("cornerView"))?objj_msgSend(_4b,"cornerView"):nil;
if(_cornerView!==_4e){
objj_msgSend(_cornerView,"removeFromSuperview");
_cornerView=_4e;
if(_cornerView){
objj_msgSend(_49,"addSubview:",_cornerView);
}
}
objj_msgSend(_49,"reflectScrolledClipView:",_contentView);
}
}),new objj_method(sel_getUid("_headerView"),function(_4f,_50){
with(_4f){
return objj_msgSend(_headerClipView,"documentView");
}
}),new objj_method(sel_getUid("_cornerViewFrame"),function(_51,_52){
with(_51){
if(!_cornerView){
return {origin:{x:0,y:0},size:{width:0,height:0}};
}
var _53=objj_msgSend(_51,"_insetBounds"),_54=objj_msgSend(_cornerView,"frame");
_54.origin.x=(_53.origin.x+_53.size.width)-(_54.size.width);
_54.origin.y=(_53.origin.y);
return _54;
}
}),new objj_method(sel_getUid("_headerClipViewFrame"),function(_55,_56){
with(_55){
var _57=objj_msgSend(_55,"_headerView");
if(!_57){
return {origin:{x:0,y:0},size:{width:0,height:0}};
}
var _58=objj_msgSend(_55,"_insetBounds");
_58.size.height=(objj_msgSend(_57,"frame").size.height);
_58.size.width-=(objj_msgSend(_55,"_cornerViewFrame").size.width);
return _58;
}
}),new objj_method(sel_getUid("_bottomCornerViewFrame"),function(_59,_5a){
with(_59){
if(objj_msgSend(objj_msgSend(_59,"horizontalScroller"),"isHidden")||objj_msgSend(objj_msgSend(_59,"verticalScroller"),"isHidden")){
return CGRectMakeZero();
}
var _5b=objj_msgSend(objj_msgSend(_59,"verticalScroller"),"frame"),_5c=CGRectMakeZero();
_5c.origin.x=CGRectGetMinX(_5b);
_5c.origin.y=CGRectGetMaxY(_5b);
_5c.size.width=objj_msgSend(CPScroller,"scrollerWidth");
_5c.size.height=objj_msgSend(CPScroller,"scrollerWidth");
return _5c;
}
}),new objj_method(sel_getUid("setBottomCornerView:"),function(_5d,_5e,_5f){
with(_5d){
if(_bottomCornerView===_5f){
return;
}
objj_msgSend(_bottomCornerView,"removeFromSuperview");
objj_msgSend(_5f,"setFrame:",objj_msgSend(_5d,"_bottomCornerViewFrame"));
objj_msgSend(_5d,"addSubview:",_5f);
_bottomCornerView=_5f;
objj_msgSend(_5d,"_updateCornerAndHeaderView");
}
}),new objj_method(sel_getUid("bottomCornerView"),function(_60,_61){
with(_60){
return _bottomCornerView;
}
}),new objj_method(sel_getUid("_verticalScrollerDidScroll:"),function(_62,_63,_64){
with(_62){
var _65=objj_msgSend(_64,"floatValue"),_66=objj_msgSend(objj_msgSend(_contentView,"documentView"),"frame"),_67=objj_msgSend(_contentView,"bounds");
switch(objj_msgSend(_verticalScroller,"hitPart")){
case CPScrollerDecrementLine:
_67.origin.y-=_verticalLineScroll;
break;
case CPScrollerIncrementLine:
_67.origin.y+=_verticalLineScroll;
break;
case CPScrollerDecrementPage:
_67.origin.y-=(_67.size.height)-_verticalPageScroll;
break;
case CPScrollerIncrementPage:
_67.origin.y+=(_67.size.height)-_verticalPageScroll;
break;
case CPScrollerKnobSlot:
case CPScrollerKnob:
default:
_67.origin.y=ROUND(_65*((_66.size.height)-(_67.size.height)));
}
objj_msgSend(_contentView,"scrollToPoint:",_67.origin);
}
}),new objj_method(sel_getUid("_horizontalScrollerDidScroll:"),function(_68,_69,_6a){
with(_68){
var _6b=objj_msgSend(_6a,"floatValue"),_6c=objj_msgSend(objj_msgSend(_68,"documentView"),"frame"),_6d=objj_msgSend(_contentView,"bounds");
switch(objj_msgSend(_horizontalScroller,"hitPart")){
case CPScrollerDecrementLine:
_6d.origin.x-=_horizontalLineScroll;
break;
case CPScrollerIncrementLine:
_6d.origin.x+=_horizontalLineScroll;
break;
case CPScrollerDecrementPage:
_6d.origin.x-=(_6d.size.width)-_horizontalPageScroll;
break;
case CPScrollerIncrementPage:
_6d.origin.x+=(_6d.size.width)-_horizontalPageScroll;
break;
case CPScrollerKnobSlot:
case CPScrollerKnob:
default:
_6d.origin.x=ROUND(_6b*((_6c.size.width)-(_6d.size.width)));
}
objj_msgSend(_contentView,"scrollToPoint:",_6d.origin);
objj_msgSend(_headerClipView,"scrollToPoint:",CGPointMake(_6d.origin.x,0));
}
}),new objj_method(sel_getUid("tile"),function(_6e,_6f){
with(_6e){
}
}),new objj_method(sel_getUid("resizeSubviewsWithOldSize:"),function(_70,_71,_72){
with(_70){
objj_msgSend(_70,"reflectScrolledClipView:",_contentView);
}
}),new objj_method(sel_getUid("setLineScroll:"),function(_73,_74,_75){
with(_73){
objj_msgSend(_73,"setHorizontalLineScroll:",_75);
objj_msgSend(_73,"setVerticalLineScroll:",_75);
}
}),new objj_method(sel_getUid("lineScroll"),function(_76,_77){
with(_76){
return objj_msgSend(_76,"horizontalLineScroll");
}
}),new objj_method(sel_getUid("setHorizontalLineScroll:"),function(_78,_79,_7a){
with(_78){
_horizontalLineScroll=_7a;
}
}),new objj_method(sel_getUid("horizontalLineScroll"),function(_7b,_7c){
with(_7b){
return _horizontalLineScroll;
}
}),new objj_method(sel_getUid("setVerticalLineScroll:"),function(_7d,_7e,_7f){
with(_7d){
_verticalLineScroll=_7f;
}
}),new objj_method(sel_getUid("verticalLineScroll"),function(_80,_81){
with(_80){
return _verticalLineScroll;
}
}),new objj_method(sel_getUid("setPageScroll:"),function(_82,_83,_84){
with(_82){
objj_msgSend(_82,"setHorizontalPageScroll:",_84);
objj_msgSend(_82,"setVerticalPageScroll:",_84);
}
}),new objj_method(sel_getUid("pageScroll"),function(_85,_86){
with(_85){
return objj_msgSend(_85,"horizontalPageScroll");
}
}),new objj_method(sel_getUid("setHorizontalPageScroll:"),function(_87,_88,_89){
with(_87){
_horizontalPageScroll=_89;
}
}),new objj_method(sel_getUid("horizontalPageScroll"),function(_8a,_8b){
with(_8a){
return _horizontalPageScroll;
}
}),new objj_method(sel_getUid("setVerticalPageScroll:"),function(_8c,_8d,_8e){
with(_8c){
_verticalPageScroll=_8e;
}
}),new objj_method(sel_getUid("verticalPageScroll"),function(_8f,_90){
with(_8f){
return _verticalPageScroll;
}
}),new objj_method(sel_getUid("drawRect:"),function(_91,_92,_93){
with(_91){
objj_msgSendSuper({receiver:_91,super_class:objj_getClass("CPScrollView").super_class},"drawRect:",_93);
if(_borderType==CPNoBorder){
return;
}
var _94=objj_msgSend(_91,"bounds"),_95=objj_msgSend(objj_msgSend(CPGraphicsContext,"currentContext"),"graphicsPort");
CGContextSetLineWidth(_95,1);
switch(_borderType){
case CPLineBorder:
CGContextSetStrokeColor(_95,objj_msgSend(_91,"currentValueForThemeAttribute:","border-color"));
CGContextStrokeRect(_95,{origin:{x:_94.origin.x+0.5,y:_94.origin.y+0.5},size:{width:_94.size.width-2*0.5,height:_94.size.height-2*0.5}});
break;
case CPBezelBorder:
objj_msgSend(_91,"_drawGrayBezelInContext:bounds:",_95,_94);
break;
case CPGrooveBorder:
objj_msgSend(_91,"_drawGrooveInContext:bounds:",_95,_94);
break;
default:
break;
}
}
}),new objj_method(sel_getUid("_drawGrayBezelInContext:bounds:"),function(_96,_97,_98,_99){
with(_96){
CGContextBeginPath(_98);
CGContextSetStrokeColor(_98,objj_msgSend(CPColor,"colorWithWhite:alpha:",142/255,1));
var y=(_99.origin.y)+0.5;
CGContextMoveToPoint(_98,(_99.origin.x),y);
CGContextAddLineToPoint(_98,(_99.origin.x)+1,y);
CGContextStrokePath(_98);
CGContextBeginPath(_98);
CGContextSetStrokeColor(_98,objj_msgSend(CPColor,"colorWithWhite:alpha:",192/255,1));
CGContextMoveToPoint(_98,(_99.origin.x)+1,y);
CGContextAddLineToPoint(_98,(_99.origin.x+_99.size.width)-1,y);
CGContextStrokePath(_98);
CGContextBeginPath(_98);
CGContextSetStrokeColor(_98,objj_msgSend(CPColor,"colorWithWhite:alpha:",142/255,1));
CGContextMoveToPoint(_98,(_99.origin.x+_99.size.width)-1,y);
CGContextAddLineToPoint(_98,(_99.origin.x+_99.size.width),y);
CGContextStrokePath(_98);
CGContextBeginPath(_98);
CGContextSetStrokeColor(_98,objj_msgSend(CPColor,"colorWithWhite:alpha:",190/255,1));
var x=(_99.origin.x+_99.size.width)-0.5;
CGContextMoveToPoint(_98,x,(_99.origin.y)+1);
CGContextAddLineToPoint(_98,x,(_99.origin.y+_99.size.height));
CGContextMoveToPoint(_98,x-0.5,(_99.origin.y+_99.size.height)-0.5);
CGContextAddLineToPoint(_98,(_99.origin.x),(_99.origin.y+_99.size.height)-0.5);
x=(_99.origin.x)+0.5;
CGContextMoveToPoint(_98,x,(_99.origin.y+_99.size.height));
CGContextAddLineToPoint(_98,x,(_99.origin.y)+1);
CGContextStrokePath(_98);
}
}),new objj_method(sel_getUid("_drawGrooveInContext:bounds:"),function(_9a,_9b,_9c,_9d){
with(_9a){
CGContextBeginPath(_9c);
CGContextSetStrokeColor(_9c,objj_msgSend(CPColor,"colorWithWhite:alpha:",159/255,1));
var y=(_9d.origin.y)+0.5;
CGContextMoveToPoint(_9c,(_9d.origin.x),y);
CGContextAddLineToPoint(_9c,(_9d.origin.x+_9d.size.width),y);
var x=(_9d.origin.x+_9d.size.width)-1.5;
CGContextMoveToPoint(_9c,x,(_9d.origin.y)+2);
CGContextAddLineToPoint(_9c,x,(_9d.origin.y+_9d.size.height)-1);
y=(_9d.origin.y+_9d.size.height)-1.5;
CGContextMoveToPoint(_9c,(_9d.origin.x+_9d.size.width)-1,y);
CGContextAddLineToPoint(_9c,(_9d.origin.x)+2,y);
x=(_9d.origin.x)+0.5;
CGContextMoveToPoint(_9c,x,(_9d.origin.y+_9d.size.height));
CGContextAddLineToPoint(_9c,x,(_9d.origin.y));
CGContextStrokePath(_9c);
CGContextBeginPath(_9c);
CGContextSetStrokeColor(_9c,objj_msgSend(CPColor,"whiteColor"));
var _9e={origin:{x:_9d.origin.x+1,y:_9d.origin.y+1},size:{width:_9d.size.width,height:_9d.size.height}};
_9e.size.width-=1;
_9e.size.height-=1;
CGContextStrokeRect(_9c,{origin:{x:_9e.origin.x+0.5,y:_9e.origin.y+0.5},size:{width:_9e.size.width-2*0.5,height:_9e.size.height-2*0.5}});
CGContextBeginPath(_9c);
CGContextSetStrokeColor(_9c,objj_msgSend(CPColor,"colorWithWhite:alpha:",192/255,1));
y=(_9d.origin.y)+2.5;
CGContextMoveToPoint(_9c,(_9d.origin.x)+2,y);
CGContextAddLineToPoint(_9c,(_9d.origin.x+_9d.size.width)-2,y);
CGContextStrokePath(_9c);
}
}),new objj_method(sel_getUid("scrollWheel:"),function(_9f,_a0,_a1){
with(_9f){
objj_msgSend(_9f,"_respondToScrollWheelEventWithDeltaX:deltaY:",objj_msgSend(_a1,"deltaX"),objj_msgSend(_a1,"deltaY"));
}
}),new objj_method(sel_getUid("_respondToScrollWheelEventWithDeltaX:deltaY:"),function(_a2,_a3,_a4,_a5){
with(_a2){
var _a6=objj_msgSend(objj_msgSend(_a2,"documentView"),"frame"),_a7=objj_msgSend(_contentView,"bounds"),_a8=objj_msgSend(_contentView,"frame"),_a9=objj_msgSend(_a2,"enclosingScrollView");
_a7.origin.x=ROUND(_a7.origin.x+_a4);
_a7.origin.y=ROUND(_a7.origin.y+_a5);
var _aa=objj_msgSend(_contentView,"constrainScrollPoint:",CGPointCreateCopy(_a7.origin)),_ab=_a7.origin.x-_aa.x,_ac=_a7.origin.y-_aa.y;
objj_msgSend(_contentView,"scrollToPoint:",_aa);
objj_msgSend(_headerClipView,"scrollToPoint:",CGPointMake(_aa.x,0));
if(_ab||_ac){
objj_msgSend(_a9,"_respondToScrollWheelEventWithDeltaX:deltaY:",_ab,_ac);
}
}
}),new objj_method(sel_getUid("scrollPageUp:"),function(_ad,_ae,_af){
with(_ad){
var _b0=objj_msgSend(_contentView,"bounds");
objj_msgSend(_ad,"moveByOffset:",CGSizeMake(0,-((_b0.size.height)-_verticalPageScroll)));
}
}),new objj_method(sel_getUid("scrollPageDown:"),function(_b1,_b2,_b3){
with(_b1){
var _b4=objj_msgSend(_contentView,"bounds");
objj_msgSend(_b1,"moveByOffset:",CGSizeMake(0,(_b4.size.height)-_verticalPageScroll));
}
}),new objj_method(sel_getUid("scrollToBeginningOfDocument:"),function(_b5,_b6,_b7){
with(_b5){
objj_msgSend(_contentView,"scrollToPoint:",{x:0,y:0});
objj_msgSend(_headerClipView,"scrollToPoint:",{x:0,y:0});
}
}),new objj_method(sel_getUid("scrollToEndOfDocument:"),function(_b8,_b9,_ba){
with(_b8){
var _bb=objj_msgSend(_contentView,"bounds"),_bc=objj_msgSend(objj_msgSend(_b8,"documentView"),"frame"),_bd={x:0,y:(_bc.size.height)-(_bb.size.height)};
objj_msgSend(_contentView,"scrollToPoint:",_bd);
objj_msgSend(_headerClipView,"scrollToPoint:",{x:0,y:0});
}
}),new objj_method(sel_getUid("moveLeft:"),function(_be,_bf,_c0){
with(_be){
objj_msgSend(_be,"moveByOffset:",CGSizeMake(-_horizontalLineScroll,0));
}
}),new objj_method(sel_getUid("moveRight:"),function(_c1,_c2,_c3){
with(_c1){
objj_msgSend(_c1,"moveByOffset:",CGSizeMake(_horizontalLineScroll,0));
}
}),new objj_method(sel_getUid("moveUp:"),function(_c4,_c5,_c6){
with(_c4){
objj_msgSend(_c4,"moveByOffset:",CGSizeMake(0,-_verticalLineScroll));
}
}),new objj_method(sel_getUid("moveDown:"),function(_c7,_c8,_c9){
with(_c7){
objj_msgSend(_c7,"moveByOffset:",CGSizeMake(0,_verticalLineScroll));
}
}),new objj_method(sel_getUid("moveByOffset:"),function(_ca,_cb,_cc){
with(_ca){
var _cd=objj_msgSend(objj_msgSend(_ca,"documentView"),"frame"),_ce=objj_msgSend(_contentView,"bounds");
_ce.origin.x+=_cc.width;
_ce.origin.y+=_cc.height;
objj_msgSend(_contentView,"scrollToPoint:",_ce.origin);
objj_msgSend(_headerClipView,"scrollToPoint:",CGPointMake(_ce.origin.x,0));
}
})]);
class_addMethods(_2,[new objj_method(sel_getUid("defaultThemeClass"),function(_cf,_d0){
with(_cf){
return "scrollview";
}
}),new objj_method(sel_getUid("themeAttributes"),function(_d1,_d2){
with(_d1){
return objj_msgSend(CPDictionary,"dictionaryWithJSObject:",{"bottom-corner-color":objj_msgSend(CPColor,"whiteColor"),"border-color":objj_msgSend(CPColor,"blackColor")});
}
}),new objj_method(sel_getUid("contentSizeForFrameSize:hasHorizontalScroller:hasVerticalScroller:borderType:"),function(_d3,_d4,_d5,_d6,_d7,_d8){
with(_d3){
var _d9=objj_msgSend(_d3,"_insetBounds:borderType:",{origin:{x:0,y:0},size:{width:_d5.width,height:_d5.height}},_d8),_da=objj_msgSend(CPScroller,"scrollerWidth");
if(_d6){
_d9.size.height-=_da;
}
if(_d7){
_d9.size.width-=_da;
}
return _d9.size;
}
}),new objj_method(sel_getUid("frameSizeForContentSize:hasHorizontalScroller:hasVerticalScroller:borderType:"),function(_db,_dc,_dd,_de,_df,_e0){
with(_db){
var _e1=objj_msgSend(_db,"_insetBounds:borderType:",{origin:{x:0,y:0},size:{width:_dd.width,height:_dd.height}},_e0),_e2=_dd.width-_e1.size.width,_e3=_dd.height-_e1.size.height,_e4={width:_dd.width+_e2,height:_dd.height+_e3},_e5=objj_msgSend(CPScroller,"scrollerWidth");
if(_de){
_e4.height-=_e5;
}
if(_df){
_e4.width-=_e5;
}
return _e4;
}
}),new objj_method(sel_getUid("_insetBounds:borderType:"),function(_e6,_e7,_e8,_e9){
with(_e6){
switch(_e9){
case CPLineBorder:
case CPBezelBorder:
return {origin:{x:_e8.origin.x+1,y:_e8.origin.y+1},size:{width:_e8.size.width-2*1,height:_e8.size.height-2*1}};
case CPGrooveBorder:
_e8={origin:{x:_e8.origin.x+2,y:_e8.origin.y+2},size:{width:_e8.size.width-2*2,height:_e8.size.height-2*2}};
++_e8.origin.y;
--_e8.size.height;
return _e8;
case CPNoBorder:
default:
return _e8;
}
}
})]);
var _ea="CPScrollViewContentView",_eb="CPScrollViewHeaderClipViewKey",_ec="CPScrollViewVLineScroll",_ed="CPScrollViewHLineScroll",_ee="CPScrollViewVPageScroll",_ef="CPScrollViewHPageScroll",_f0="CPScrollViewHasVScroller",_f1="CPScrollViewHasHScroller",_f2="CPScrollViewVScroller",_f3="CPScrollViewHScroller",_f4="CPScrollViewAutohidesScroller",_f5="CPScrollViewCornerViewKey",_f6="CPScrollViewBottomCornerViewKey",_f7="CPScrollViewBorderTypeKey";
var _1=objj_getClass("CPScrollView");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"CPScrollView\"");
}
var _2=_1.isa;
class_addMethods(_1,[new objj_method(sel_getUid("initWithCoder:"),function(_f8,_f9,_fa){
with(_f8){
if(_f8=objj_msgSendSuper({receiver:_f8,super_class:objj_getClass("CPScrollView").super_class},"initWithCoder:",_fa)){
_verticalLineScroll=objj_msgSend(_fa,"decodeFloatForKey:",_ec);
_verticalPageScroll=objj_msgSend(_fa,"decodeFloatForKey:",_ee);
_horizontalLineScroll=objj_msgSend(_fa,"decodeFloatForKey:",_ed);
_horizontalPageScroll=objj_msgSend(_fa,"decodeFloatForKey:",_ef);
_contentView=objj_msgSend(_fa,"decodeObjectForKey:",_ea);
_headerClipView=objj_msgSend(_fa,"decodeObjectForKey:",_eb);
if(!_headerClipView){
_headerClipView=objj_msgSend(objj_msgSend(CPClipView,"alloc"),"init");
objj_msgSend(_f8,"addSubview:",_headerClipView);
}
_verticalScroller=objj_msgSend(_fa,"decodeObjectForKey:",_f2);
_horizontalScroller=objj_msgSend(_fa,"decodeObjectForKey:",_f3);
_hasVerticalScroller=objj_msgSend(_fa,"decodeBoolForKey:",_f0);
_hasHorizontalScroller=objj_msgSend(_fa,"decodeBoolForKey:",_f1);
_autohidesScrollers=objj_msgSend(_fa,"decodeBoolForKey:",_f4);
_borderType=objj_msgSend(_fa,"decodeIntForKey:",_f7);
_cornerView=objj_msgSend(_fa,"decodeObjectForKey:",_f5);
_bottomCornerView=objj_msgSend(_fa,"decodeObjectForKey:",_f6);
objj_msgSend(objj_msgSend(CPRunLoop,"currentRunLoop"),"performSelector:target:argument:order:modes:",sel_getUid("_updateCornerAndHeaderView"),_f8,_contentView,0,[CPDefaultRunLoopMode]);
}
return _f8;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_fb,_fc,_fd){
with(_fb){
objj_msgSendSuper({receiver:_fb,super_class:objj_getClass("CPScrollView").super_class},"encodeWithCoder:",_fd);
objj_msgSend(_fd,"encodeObject:forKey:",_contentView,_ea);
objj_msgSend(_fd,"encodeObject:forKey:",_headerClipView,_eb);
objj_msgSend(_fd,"encodeObject:forKey:",_verticalScroller,_f2);
objj_msgSend(_fd,"encodeObject:forKey:",_horizontalScroller,_f3);
objj_msgSend(_fd,"encodeFloat:forKey:",_verticalLineScroll,_ec);
objj_msgSend(_fd,"encodeFloat:forKey:",_verticalPageScroll,_ee);
objj_msgSend(_fd,"encodeFloat:forKey:",_horizontalLineScroll,_ed);
objj_msgSend(_fd,"encodeFloat:forKey:",_horizontalPageScroll,_ef);
objj_msgSend(_fd,"encodeBool:forKey:",_hasVerticalScroller,_f0);
objj_msgSend(_fd,"encodeBool:forKey:",_hasHorizontalScroller,_f1);
objj_msgSend(_fd,"encodeBool:forKey:",_autohidesScrollers,_f4);
objj_msgSend(_fd,"encodeObject:forKey:",_cornerView,_f5);
objj_msgSend(_fd,"encodeObject:forKey:",_bottomCornerView,_f6);
objj_msgSend(_fd,"encodeInt:forKey:",_borderType,_f7);
}
})]);
p;15;CPSearchField.jt;21744;@STATIC;1.0;i;10;CPButton.ji;13;CPTextField.jt;21691;
objj_executeFile("CPButton.j",YES);
objj_executeFile("CPTextField.j",YES);
CPSearchFieldRecentsTitleMenuItemTag=1000;
CPSearchFieldRecentsMenuItemTag=1001;
CPSearchFieldClearRecentsMenuItemTag=1002;
CPSearchFieldNoRecentsMenuItemTag=1003;
var _1=nil,_2=nil,_3=nil,_4=nil;
var _5=25,_6=22,_7=22;
var _8="CPAutosavedRecentsChangedNotification";
var _9="   ";
var _a=objj_allocateClassPair(CPTextField,"CPSearchField"),_b=_a.isa;
class_addIvars(_a,[new objj_ivar("_searchButton"),new objj_ivar("_cancelButton"),new objj_ivar("_searchMenuTemplate"),new objj_ivar("_searchMenu"),new objj_ivar("_recentsAutosaveName"),new objj_ivar("_recentSearches"),new objj_ivar("_maximumRecents"),new objj_ivar("_sendsWholeSearchString"),new objj_ivar("_sendsSearchStringImmediately"),new objj_ivar("_canResignFirstResponder"),new objj_ivar("_partialStringTimer")]);
objj_registerClassPair(_a);
class_addMethods(_a,[new objj_method(sel_getUid("initWithFrame:"),function(_c,_d,_e){
with(_c){
if(_c=objj_msgSendSuper({receiver:_c,super_class:objj_getClass("CPSearchField").super_class},"initWithFrame:",_e)){
_maximumRecents=10;
_sendsWholeSearchString=NO;
_sendsSearchStringImmediately=NO;
_recentsAutosaveName=nil;
objj_msgSend(_c,"_init");
_cancelButton._DOMElement.style.cursor="default";
_searchButton._DOMElement.style.cursor="default";
}
return _c;
}
}),new objj_method(sel_getUid("_init"),function(_f,_10){
with(_f){
_recentSearches=objj_msgSend(CPArray,"array");
objj_msgSend(_f,"setBezeled:",YES);
objj_msgSend(_f,"setBezelStyle:",CPTextFieldRoundedBezel);
objj_msgSend(_f,"setBordered:",YES);
objj_msgSend(_f,"setEditable:",YES);
objj_msgSend(_f,"setContinuous:",YES);
var _11=objj_msgSend(_f,"bounds"),_12=objj_msgSend(objj_msgSend(CPButton,"alloc"),"initWithFrame:",objj_msgSend(_f,"cancelButtonRectForBounds:",_11)),_13=objj_msgSend(objj_msgSend(CPButton,"alloc"),"initWithFrame:",objj_msgSend(_f,"searchButtonRectForBounds:",_11));
objj_msgSend(_f,"setCancelButton:",_12);
objj_msgSend(_f,"resetCancelButton");
objj_msgSend(_f,"setSearchButton:",_13);
objj_msgSend(_f,"resetSearchButton");
_canResignFirstResponder=YES;
}
}),new objj_method(sel_getUid("viewWillMoveToSuperview:"),function(_14,_15,_16){
with(_14){
objj_msgSendSuper({receiver:_14,super_class:objj_getClass("CPSearchField").super_class},"viewWillMoveToSuperview:",_16);
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"removeObserver:name:object:",_14,CPControlTextDidChangeNotification,_14);
if(_16){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"addObserver:selector:name:object:",_14,sel_getUid("_searchFieldTextDidChange:"),CPControlTextDidChangeNotification,_14);
}
}
}),new objj_method(sel_getUid("setSearchButton:"),function(_17,_18,_19){
with(_17){
if(_19!=_searchButton){
objj_msgSend(_searchButton,"removeFromSuperview");
_searchButton=_19;
objj_msgSend(_searchButton,"setFrame:",objj_msgSend(_17,"searchButtonRectForBounds:",objj_msgSend(_17,"bounds")));
objj_msgSend(_searchButton,"setAutoresizingMask:",CPViewMaxXMargin);
objj_msgSend(_17,"addSubview:",_searchButton);
}
}
}),new objj_method(sel_getUid("searchButton"),function(_1a,_1b){
with(_1a){
return _searchButton;
}
}),new objj_method(sel_getUid("resetSearchButton"),function(_1c,_1d){
with(_1c){
var _1e=objj_msgSend(_1c,"searchButton"),_1f=(_searchMenuTemplate===nil)?_1:_2;
objj_msgSend(_1e,"setBordered:",NO);
objj_msgSend(_1e,"setImageScaling:",CPScaleToFit);
objj_msgSend(_1e,"setImage:",_1f);
objj_msgSend(_1e,"setAutoresizingMask:",CPViewMaxXMargin);
}
}),new objj_method(sel_getUid("setCancelButton:"),function(_20,_21,_22){
with(_20){
if(_22!=_cancelButton){
objj_msgSend(_cancelButton,"removeFromSuperview");
_cancelButton=_22;
objj_msgSend(_cancelButton,"setFrame:",objj_msgSend(_20,"cancelButtonRectForBounds:",objj_msgSend(_20,"bounds")));
objj_msgSend(_cancelButton,"setAutoresizingMask:",CPViewMinXMargin);
objj_msgSend(_cancelButton,"setTarget:",_20);
objj_msgSend(_cancelButton,"setAction:",sel_getUid("cancelOperation:"));
objj_msgSend(_20,"_updateCancelButtonVisibility");
objj_msgSend(_20,"addSubview:",_cancelButton);
}
}
}),new objj_method(sel_getUid("cancelButton"),function(_23,_24){
with(_23){
return _cancelButton;
}
}),new objj_method(sel_getUid("resetCancelButton"),function(_25,_26){
with(_25){
var _27=objj_msgSend(_25,"cancelButton");
objj_msgSend(_27,"setBordered:",NO);
objj_msgSend(_27,"setImageScaling:",CPScaleToFit);
objj_msgSend(_27,"setImage:",_3);
objj_msgSend(_27,"setAlternateImage:",_4);
objj_msgSend(_27,"setAutoresizingMask:",CPViewMinXMargin);
objj_msgSend(_27,"setTarget:",_25);
objj_msgSend(_27,"setAction:",sel_getUid("cancelOperation:"));
}
}),new objj_method(sel_getUid("searchTextRectForBounds:"),function(_28,_29,_2a){
with(_28){
var _2b=0,_2c=(_2a.size.width),_2d=objj_msgSend(_28,"bounds");
if(_searchButton){
var _2e=objj_msgSend(_28,"searchButtonRectForBounds:",_2d);
_2b=(_2e.origin.x+_2e.size.width)+2;
}
if(_cancelButton){
var _2f=objj_msgSend(_28,"cancelButtonRectForBounds:",_2d);
_2c=(_2f.origin.x)-_2b;
}
return {origin:{x:_2b,y:(_2a.origin.y)},size:{width:_2c,height:(_2a.size.height)}};
}
}),new objj_method(sel_getUid("searchButtonRectForBounds:"),function(_30,_31,_32){
with(_30){
return {origin:{x:5,y:((_32.size.height)-_7)/2},size:{width:_5,height:_7}};
}
}),new objj_method(sel_getUid("cancelButtonRectForBounds:"),function(_33,_34,_35){
with(_33){
return {origin:{x:(_35.size.width)-_6-5,y:((_35.size.height)-_6)/2},size:{width:_7,height:_7}};
}
}),new objj_method(sel_getUid("searchMenuTemplate"),function(_36,_37){
with(_36){
return _searchMenuTemplate;
}
}),new objj_method(sel_getUid("setSearchMenuTemplate:"),function(_38,_39,_3a){
with(_38){
_searchMenuTemplate=_3a;
objj_msgSend(_38,"resetSearchButton");
objj_msgSend(_38,"_loadRecentSearchList");
objj_msgSend(_38,"_updateSearchMenu");
}
}),new objj_method(sel_getUid("sendsWholeSearchString"),function(_3b,_3c){
with(_3b){
return _sendsWholeSearchString;
}
}),new objj_method(sel_getUid("setSendsWholeSearchString:"),function(_3d,_3e,_3f){
with(_3d){
_sendsWholeSearchString=_3f;
}
}),new objj_method(sel_getUid("sendsSearchStringImmediately"),function(_40,_41){
with(_40){
return _sendsSearchStringImmediately;
}
}),new objj_method(sel_getUid("setSendsSearchStringImmediately:"),function(_42,_43,_44){
with(_42){
_sendsSearchStringImmediately=_44;
}
}),new objj_method(sel_getUid("maximumRecents"),function(_45,_46){
with(_45){
return _maximumRecents;
}
}),new objj_method(sel_getUid("setMaximumRecents:"),function(_47,_48,max){
with(_47){
if(max>254){
max=254;
}else{
if(max<0){
max=10;
}
}
_maximumRecents=max;
}
}),new objj_method(sel_getUid("recentSearches"),function(_49,_4a){
with(_49){
return _recentSearches;
}
}),new objj_method(sel_getUid("setRecentSearches:"),function(_4b,_4c,_4d){
with(_4b){
var max=MIN(objj_msgSend(_4b,"maximumRecents"),objj_msgSend(_4d,"count")),_4d=objj_msgSend(_4d,"subarrayWithRange:",CPMakeRange(0,max));
_recentSearches=_4d;
objj_msgSend(_4b,"_autosaveRecentSearchList");
}
}),new objj_method(sel_getUid("recentsAutosaveName"),function(_4e,_4f){
with(_4e){
return _recentsAutosaveName;
}
}),new objj_method(sel_getUid("setRecentsAutosaveName:"),function(_50,_51,_52){
with(_50){
if(_recentsAutosaveName!=nil){
objj_msgSend(_50,"_deregisterForAutosaveNotification");
}
_recentsAutosaveName=_52;
if(_recentsAutosaveName!=nil){
objj_msgSend(_50,"_registerForAutosaveNotification");
}
}
}),new objj_method(sel_getUid("contentRectForBounds:"),function(_53,_54,_55){
with(_53){
var _56=objj_msgSendSuper({receiver:_53,super_class:objj_getClass("CPSearchField").super_class},"contentRectForBounds:",_55);
return objj_msgSend(_53,"searchTextRectForBounds:",_56);
}
}),new objj_method(sel_getUid("menu"),function(_57,_58){
with(_57){
return _searchMenu;
}
}),new objj_method(sel_getUid("isOpaque"),function(_59,_5a){
with(_59){
return objj_msgSendSuper({receiver:_59,super_class:objj_getClass("CPSearchField").super_class},"isOpaque")&&objj_msgSend(_cancelButton,"isOpaque")&&objj_msgSend(_searchButton,"isOpaque");
}
}),new objj_method(sel_getUid("_updateCancelButtonVisibility"),function(_5b,_5c){
with(_5b){
objj_msgSend(_cancelButton,"setHidden:",(objj_msgSend(objj_msgSend(_5b,"stringValue"),"length")===0));
}
}),new objj_method(sel_getUid("_searchFieldTextDidChange:"),function(_5d,_5e,_5f){
with(_5d){
if(!objj_msgSend(_5d,"sendsWholeSearchString")){
if(objj_msgSend(_5d,"sendsSearchStringImmediately")){
objj_msgSend(_5d,"_sendPartialString");
}else{
objj_msgSend(_partialStringTimer,"invalidate");
var _60=objj_msgSend(CPSearchField,"_keyboardDelayForPartialSearchString:",objj_msgSend(_5d,"stringValue"));
_partialStringTimer=objj_msgSend(CPTimer,"scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:",_60,_5d,sel_getUid("_sendPartialString"),nil,NO);
}
}
objj_msgSend(_5d,"_updateCancelButtonVisibility");
}
}),new objj_method(sel_getUid("_sendAction:"),function(_61,_62,_63){
with(_61){
objj_msgSend(_61,"sendAction:to:",objj_msgSend(_61,"action"),objj_msgSend(_61,"target"));
}
}),new objj_method(sel_getUid("sendAction:to:"),function(_64,_65,_66,_67){
with(_64){
objj_msgSendSuper({receiver:_64,super_class:objj_getClass("CPSearchField").super_class},"sendAction:to:",_66,_67);
objj_msgSend(_partialStringTimer,"invalidate");
objj_msgSend(_64,"_addStringToRecentSearches:",objj_msgSend(_64,"stringValue"));
objj_msgSend(_64,"_updateCancelButtonVisibility");
}
}),new objj_method(sel_getUid("_addStringToRecentSearches:"),function(_68,_69,_6a){
with(_68){
if(_6a===nil||_6a===""||objj_msgSend(_recentSearches,"containsObject:",_6a)){
return;
}
var _6b=objj_msgSend(CPMutableArray,"arrayWithArray:",_recentSearches);
objj_msgSend(_6b,"addObject:",_6a);
objj_msgSend(_68,"setRecentSearches:",_6b);
objj_msgSend(_68,"_updateSearchMenu");
}
}),new objj_method(sel_getUid("hitTest:"),function(_6c,_6d,_6e){
with(_6c){
if((_6e.x>=(objj_msgSend(_6c,"frame").origin.x)&&_6e.y>=(objj_msgSend(_6c,"frame").origin.y)&&_6e.x<(objj_msgSend(_6c,"frame").origin.x+objj_msgSend(_6c,"frame").size.width)&&_6e.y<(objj_msgSend(_6c,"frame").origin.y+objj_msgSend(_6c,"frame").size.height))){
return _6c;
}else{
return nil;
}
}
}),new objj_method(sel_getUid("resignFirstResponder"),function(_6f,_70){
with(_6f){
return _canResignFirstResponder&&objj_msgSendSuper({receiver:_6f,super_class:objj_getClass("CPSearchField").super_class},"resignFirstResponder");
}
}),new objj_method(sel_getUid("mouseDown:"),function(_71,_72,_73){
with(_71){
var _74=objj_msgSend(_73,"locationInWindow"),_75=objj_msgSend(_71,"convertPoint:fromView:",_74,nil);
if((_75.x>=(objj_msgSend(_71,"searchButtonRectForBounds:",objj_msgSend(_71,"bounds")).origin.x)&&_75.y>=(objj_msgSend(_71,"searchButtonRectForBounds:",objj_msgSend(_71,"bounds")).origin.y)&&_75.x<(objj_msgSend(_71,"searchButtonRectForBounds:",objj_msgSend(_71,"bounds")).origin.x+objj_msgSend(_71,"searchButtonRectForBounds:",objj_msgSend(_71,"bounds")).size.width)&&_75.y<(objj_msgSend(_71,"searchButtonRectForBounds:",objj_msgSend(_71,"bounds")).origin.y+objj_msgSend(_71,"searchButtonRectForBounds:",objj_msgSend(_71,"bounds")).size.height))){
if(_searchMenuTemplate==nil){
objj_msgSend(_71,"_sendAction:",_71);
}else{
objj_msgSend(_71,"_showMenu");
}
}else{
if((_75.x>=(objj_msgSend(_71,"cancelButtonRectForBounds:",objj_msgSend(_71,"bounds")).origin.x)&&_75.y>=(objj_msgSend(_71,"cancelButtonRectForBounds:",objj_msgSend(_71,"bounds")).origin.y)&&_75.x<(objj_msgSend(_71,"cancelButtonRectForBounds:",objj_msgSend(_71,"bounds")).origin.x+objj_msgSend(_71,"cancelButtonRectForBounds:",objj_msgSend(_71,"bounds")).size.width)&&_75.y<(objj_msgSend(_71,"cancelButtonRectForBounds:",objj_msgSend(_71,"bounds")).origin.y+objj_msgSend(_71,"cancelButtonRectForBounds:",objj_msgSend(_71,"bounds")).size.height))){
objj_msgSend(_cancelButton,"mouseDown:",_73);
}else{
objj_msgSendSuper({receiver:_71,super_class:objj_getClass("CPSearchField").super_class},"mouseDown:",_73);
}
}
}
}),new objj_method(sel_getUid("defaultSearchMenuTemplate"),function(_76,_77){
with(_76){
var _78=objj_msgSend(objj_msgSend(CPMenu,"alloc"),"init"),_79;
_79=objj_msgSend(objj_msgSend(CPMenuItem,"alloc"),"initWithTitle:action:keyEquivalent:","Recent Searches",nil,"");
objj_msgSend(_79,"setTag:",CPSearchFieldRecentsTitleMenuItemTag);
objj_msgSend(_79,"setEnabled:",NO);
objj_msgSend(_78,"addItem:",_79);
_79=objj_msgSend(objj_msgSend(CPMenuItem,"alloc"),"initWithTitle:action:keyEquivalent:","Recent search item",sel_getUid("_searchFieldSearch:"),"");
objj_msgSend(_79,"setTag:",CPSearchFieldRecentsMenuItemTag);
objj_msgSend(_79,"setTarget:",_76);
objj_msgSend(_78,"addItem:",_79);
_79=objj_msgSend(objj_msgSend(CPMenuItem,"alloc"),"initWithTitle:action:keyEquivalent:","Clear Recent Searches",sel_getUid("_searchFieldClearRecents:"),"");
objj_msgSend(_79,"setTag:",CPSearchFieldClearRecentsMenuItemTag);
objj_msgSend(_79,"setTarget:",_76);
objj_msgSend(_78,"addItem:",_79);
_79=objj_msgSend(objj_msgSend(CPMenuItem,"alloc"),"initWithTitle:action:keyEquivalent:","No Recent Searches",nil,"");
objj_msgSend(_79,"setTag:",CPSearchFieldNoRecentsMenuItemTag);
objj_msgSend(_79,"setEnabled:",NO);
objj_msgSend(_78,"addItem:",_79);
return _78;
}
}),new objj_method(sel_getUid("_updateSearchMenu"),function(_7a,_7b){
with(_7a){
if(_searchMenuTemplate===nil){
return;
}
var _7c=objj_msgSend(objj_msgSend(CPMenu,"alloc"),"init"),_7d=objj_msgSend(_recentSearches,"count"),_7e=objj_msgSend(_searchMenuTemplate,"numberOfItems");
for(var i=0;i<_7e;i++){
var _7f=objj_msgSend(objj_msgSend(_searchMenuTemplate,"itemAtIndex:",i),"copy");
switch(objj_msgSend(_7f,"tag")){
case CPSearchFieldRecentsTitleMenuItemTag:
if(_7d===0){
continue;
}
if(objj_msgSend(_7c,"numberOfItems")>0){
objj_msgSend(_7a,"_addSeparatorToMenu:",_7c);
}
break;
case CPSearchFieldRecentsMenuItemTag:
var _80=sel_getUid("_searchFieldSearch:");
for(var _81=0;_81<_7d;++_81){
var _82=objj_msgSend(objj_msgSend(CPMenuItem,"alloc"),"initWithTitle:action:keyEquivalent:",_9+objj_msgSend(_recentSearches,"objectAtIndex:",_81),_80,objj_msgSend(_7f,"keyEquivalent"));
objj_msgSend(_7f,"setTarget:",_7a);
objj_msgSend(_7c,"addItem:",_82);
}
continue;
case CPSearchFieldClearRecentsMenuItemTag:
if(_7d===0){
continue;
}
if(objj_msgSend(_7c,"numberOfItems")>0){
objj_msgSend(_7a,"_addSeparatorToMenu:",_7c);
}
objj_msgSend(_7f,"setAction:",sel_getUid("_searchFieldClearRecents:"));
objj_msgSend(_7f,"setTarget:",_7a);
break;
case CPSearchFieldNoRecentsMenuItemTag:
if(_7d!==0){
continue;
}
if(objj_msgSend(_7c,"numberOfItems")>0){
objj_msgSend(_7a,"_addSeparatorToMenu:",_7c);
}
break;
}
objj_msgSend(_7f,"setEnabled:",(objj_msgSend(_7f,"isEnabled")&&objj_msgSend(_7f,"action")!=nil&&objj_msgSend(_7f,"target")!=nil));
objj_msgSend(_7c,"addItem:",_7f);
}
objj_msgSend(_7c,"setDelegate:",_7a);
_searchMenu=_7c;
}
}),new objj_method(sel_getUid("_addSeparatorToMenu:"),function(_83,_84,_85){
with(_83){
var _86=objj_msgSend(CPMenuItem,"separatorItem");
objj_msgSend(_86,"setEnabled:",NO);
objj_msgSend(_85,"addItem:",_86);
}
}),new objj_method(sel_getUid("menuWillOpen:"),function(_87,_88,_89){
with(_87){
_canResignFirstResponder=NO;
}
}),new objj_method(sel_getUid("menuDidClose:"),function(_8a,_8b,_8c){
with(_8a){
_canResignFirstResponder=YES;
objj_msgSend(_8a,"becomeFirstResponder");
}
}),new objj_method(sel_getUid("_showMenu"),function(_8d,_8e){
with(_8d){
if(_searchMenu===nil||objj_msgSend(_searchMenu,"numberOfItems")===0||!objj_msgSend(_8d,"isEnabled")){
return;
}
var _8f=objj_msgSend(objj_msgSend(_8d,"superview"),"convertRect:toView:",objj_msgSend(_8d,"frame"),nil),_90=CPMakePoint(_8f.origin.x+10,_8f.origin.y+_8f.size.height-4);
var _91=objj_msgSend(CPEvent,"mouseEventWithType:location:modifierFlags:timestamp:windowNumber:context:eventNumber:clickCount:pressure:",CPRightMouseDown,_90,0,objj_msgSend(objj_msgSend(CPApp,"currentEvent"),"timestamp"),objj_msgSend(objj_msgSend(_8d,"window"),"windowNumber"),nil,1,1,0);
objj_msgSend(_8d,"selectAll:",nil);
objj_msgSend(CPMenu,"popUpContextMenu:withEvent:forView:",_searchMenu,_91,_8d);
}
}),new objj_method(sel_getUid("_sendPartialString"),function(_92,_93){
with(_92){
objj_msgSendSuper({receiver:_92,super_class:objj_getClass("CPSearchField").super_class},"sendAction:to:",objj_msgSend(_92,"action"),objj_msgSend(_92,"target"));
objj_msgSend(_partialStringTimer,"invalidate");
}
}),new objj_method(sel_getUid("cancelOperation:"),function(_94,_95,_96){
with(_94){
objj_msgSend(_94,"setObjectValue:","");
objj_msgSend(_94,"textDidChange:",objj_msgSend(CPNotification,"notificationWithName:object:userInfo:",CPControlTextDidChangeNotification,_94,nil));
objj_msgSend(_94,"_updateCancelButtonVisibility");
}
}),new objj_method(sel_getUid("_searchFieldSearch:"),function(_97,_98,_99){
with(_97){
var _9a=objj_msgSend(objj_msgSend(_99,"title"),"substringFromIndex:",objj_msgSend(_9,"length"));
if(objj_msgSend(_99,"tag")!=CPSearchFieldRecentsMenuItemTag){
objj_msgSend(_97,"_addStringToRecentSearches:",_9a);
}
objj_msgSend(_97,"setObjectValue:",_9a);
objj_msgSend(_97,"_sendPartialString");
objj_msgSend(_97,"selectAll:",nil);
objj_msgSend(_97,"_updateCancelButtonVisibility");
}
}),new objj_method(sel_getUid("_searchFieldClearRecents:"),function(_9b,_9c,_9d){
with(_9b){
objj_msgSend(_9b,"setRecentSearches:",objj_msgSend(CPArray,"array"));
objj_msgSend(_9b,"_updateSearchMenu");
objj_msgSend(_9b,"setStringValue:","");
objj_msgSend(_9b,"_updateCancelButtonVisibility");
}
}),new objj_method(sel_getUid("_registerForAutosaveNotification"),function(_9e,_9f){
with(_9e){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"addObserver:selector:name:object:",_9e,sel_getUid("_updateAutosavedRecents:"),_8,_recentsAutosaveName);
}
}),new objj_method(sel_getUid("_deregisterForAutosaveNotification"),function(_a0,_a1){
with(_a0){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"removeObserver:name:object:",_a0,_8,_recentsAutosaveName);
}
}),new objj_method(sel_getUid("_autosaveRecentSearchList"),function(_a2,_a3){
with(_a2){
if(_recentsAutosaveName!=nil){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:",_8,_recentsAutosaveName);
}
}
}),new objj_method(sel_getUid("_updateAutosavedRecents:"),function(_a4,_a5,_a6){
with(_a4){
var _a7=objj_msgSend(_a6,"object");
objj_msgSend(objj_msgSend(CPUserDefaults,"standardUserDefaults"),"setObject:forKey:",_recentSearches,_a7);
}
}),new objj_method(sel_getUid("_loadRecentSearchList"),function(_a8,_a9){
with(_a8){
var _aa=objj_msgSend(_a8,"recentsAutosaveName");
if(_aa===nil){
return;
}
var _ab=objj_msgSend(objj_msgSend(CPUserDefaults,"standardUserDefaults"),"objectForKey:",_aa);
if(_ab!==nil){
_recentSearches=_ab;
}
}
})]);
class_addMethods(_b,[new objj_method(sel_getUid("defaultThemeClass"),function(_ac,_ad){
with(_ac){
return "searchfield";
}
}),new objj_method(sel_getUid("initialize"),function(_ae,_af){
with(_ae){
if(_ae!=objj_msgSend(CPSearchField,"class")){
return;
}
var _b0=objj_msgSend(CPBundle,"bundleForClass:",_ae);
_1=objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_b0,"pathForResource:","CPSearchField/CPSearchFieldSearch.png"),{width:_5,height:_7});
_2=objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_b0,"pathForResource:","CPSearchField/CPSearchFieldFind.png"),{width:_5,height:_7});
_3=objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_b0,"pathForResource:","CPSearchField/CPSearchFieldCancel.png"),{width:_6,height:_7});
_4=objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_b0,"pathForResource:","CPSearchField/CPSearchFieldCancelPressed.png"),{width:_6,height:_7});
}
}),new objj_method(sel_getUid("_keyboardDelayForPartialSearchString:"),function(_b1,_b2,_b3){
with(_b1){
return (6-MIN(objj_msgSend(_b3,"length"),4))/10;
}
})]);
var _b4="CPRecentsAutosaveNameKey",_b5="CPSendsWholeSearchStringKey",_b6="CPSendsSearchStringImmediatelyKey",_b7="CPMaximumRecentsKey",_b8="CPSearchMenuTemplateKey";
var _a=objj_getClass("CPSearchField");
if(!_a){
throw new SyntaxError("*** Could not find definition for class \"CPSearchField\"");
}
var _b=_a.isa;
class_addMethods(_a,[new objj_method(sel_getUid("encodeWithCoder:"),function(_b9,_ba,_bb){
with(_b9){
objj_msgSend(_searchButton,"removeFromSuperview");
objj_msgSend(_cancelButton,"removeFromSuperview");
objj_msgSendSuper({receiver:_b9,super_class:objj_getClass("CPSearchField").super_class},"encodeWithCoder:",_bb);
if(_searchButton){
objj_msgSend(_b9,"addSubview:",_searchButton);
}
if(_cancelButton){
objj_msgSend(_b9,"addSubview:",_cancelButton);
}
objj_msgSend(_bb,"encodeBool:forKey:",_sendsWholeSearchString,_b5);
objj_msgSend(_bb,"encodeBool:forKey:",_sendsSearchStringImmediately,_b6);
objj_msgSend(_bb,"encodeInt:forKey:",_maximumRecents,_b7);
if(_recentsAutosaveName){
objj_msgSend(_bb,"encodeObject:forKey:",_recentsAutosaveName,_b4);
}
if(_searchMenuTemplate){
objj_msgSend(_bb,"encodeObject:forKey:",_searchMenuTemplate,_b8);
}
}
}),new objj_method(sel_getUid("initWithCoder:"),function(_bc,_bd,_be){
with(_bc){
if(_bc=objj_msgSendSuper({receiver:_bc,super_class:objj_getClass("CPSearchField").super_class},"initWithCoder:",_be)){
objj_msgSend(_bc,"setRecentsAutosaveName:",objj_msgSend(_be,"decodeObjectForKey:",_b4));
_sendsWholeSearchString=objj_msgSend(_be,"decodeBoolForKey:",_b5);
_sendsSearchStringImmediately=objj_msgSend(_be,"decodeBoolForKey:",_b6);
_maximumRecents=objj_msgSend(_be,"decodeIntForKey:",_b7);
var _bf=objj_msgSend(_be,"decodeObjectForKey:",_b8);
if(_bf){
objj_msgSend(_bc,"setSearchMenuTemplate:",_bf);
}
objj_msgSend(_bc,"_init");
}
return _bc;
}
})]);
p;19;CPSecureTextField.jt;285;@STATIC;1.0;i;13;CPTextField.jt;249;
objj_executeFile("CPTextField.j",YES);
var _1=objj_allocateClassPair(CPTextField,"CPSecureTextField"),_2=_1.isa;
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("isSecure"),function(_3,_4){
with(_3){
return YES;
}
})]);
p;20;CPSegmentedControl.jt;23367;@STATIC;1.0;I;20;Foundation/CPArray.ji;11;CPControl.jt;23306;
objj_executeFile("Foundation/CPArray.j",NO);
objj_executeFile("CPControl.j",YES);
CPSegmentSwitchTrackingSelectOne=0;
CPSegmentSwitchTrackingSelectAny=1;
CPSegmentSwitchTrackingMomentary=2;
var _1=objj_allocateClassPair(CPControl,"CPSegmentedControl"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_segments"),new objj_ivar("_themeStates"),new objj_ivar("_selectedSegment"),new objj_ivar("_segmentStyle"),new objj_ivar("_trackingMode"),new objj_ivar("_trackingSegment"),new objj_ivar("_trackingHighlighted")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("initWithFrame:"),function(_3,_4,_5){
with(_3){
_segments=[];
_themeStates=[];
_3=objj_msgSendSuper({receiver:_3,super_class:objj_getClass("CPSegmentedControl").super_class},"initWithFrame:",_5);
if(_3){
_selectedSegment=-1;
_trackingMode=CPSegmentSwitchTrackingSelectOne;
}
return _3;
}
}),new objj_method(sel_getUid("selectedTag"),function(_6,_7){
with(_6){
return objj_msgSend(_segments[_selectedSegment],"tag");
}
}),new objj_method(sel_getUid("setSegmentCount:"),function(_8,_9,_a){
with(_8){
if(_segments.length==_a){
return;
}
var _b=CGRectGetHeight(objj_msgSend(_8,"bounds")),_c=MAX(0,_segments.length-1),_d=MAX(0,_a-1);
if(_segments.length<_a){
for(var _e=_segments.length;_e<_a;++_e){
_segments[_e]=objj_msgSend(objj_msgSend(_CPSegmentItem,"alloc"),"init");
_themeStates[_e]=CPThemeStateNormal;
}
}else{
if(_a<_segments.length){
_segments.length=_a;
_themeStates.length=_a;
}
}
if(_selectedSegment>=_segments.length){
_selectedSegment=-1;
}
var _f=objj_msgSend(_8,"currentValueForThemeAttribute:","divider-thickness"),_10=_f*(_d-_c),_11=objj_msgSend(_8,"frame");
if(_10){
objj_msgSend(_8,"setFrameSize:",CGSizeMake(_11.size.width+_10,_11.size.height));
}
objj_msgSend(_8,"tileWithChangedSegment:",0);
}
}),new objj_method(sel_getUid("segmentCount"),function(_12,_13){
with(_12){
return _segments.length;
}
}),new objj_method(sel_getUid("setSelectedSegment:"),function(_14,_15,_16){
with(_14){
objj_msgSend(_14,"setSelected:forSegment:",YES,_16);
}
}),new objj_method(sel_getUid("selectedSegment"),function(_17,_18){
with(_17){
return _selectedSegment;
}
}),new objj_method(sel_getUid("selectSegmentWithTag:"),function(_19,_1a,_1b){
with(_19){
var _1c=0;
for(;_1c<_segments.length;++_1c){
if(_segments[_1c].tag==_1b){
objj_msgSend(_19,"setSelectedSegment:",_1c);
return YES;
}
}
return NO;
}
}),new objj_method(sel_getUid("isTracking"),function(_1d,_1e){
with(_1d){
}
}),new objj_method(sel_getUid("setTrackingMode:"),function(_1f,_20,_21){
with(_1f){
if(_trackingMode==_21){
return;
}
_trackingMode=_21;
if(_trackingMode==CPSegmentSwitchTrackingSelectOne){
var _22=0,_23=NO;
for(;_22<_segments.length;++_22){
if(objj_msgSend(_segments[_22],"selected")){
if(_23){
objj_msgSend(_1f,"setSelected:forSegment:",NO,_22);
}else{
_23=YES;
}
}
}
}else{
if(_trackingMode==CPSegmentSwitchTrackingMomentary){
var _22=0;
for(;_22<_segments.length;++_22){
if(objj_msgSend(_segments[_22],"selected")){
objj_msgSend(_1f,"setSelected:forSegment:",NO,_22);
}
}
}
}
}
}),new objj_method(sel_getUid("trackingMode"),function(_24,_25){
with(_24){
return _trackingMode;
}
}),new objj_method(sel_getUid("setWidth:forSegment:"),function(_26,_27,_28,_29){
with(_26){
objj_msgSend(_segments[_29],"setWidth:",_28);
objj_msgSend(_26,"tileWithChangedSegment:",_29);
}
}),new objj_method(sel_getUid("widthForSegment:"),function(_2a,_2b,_2c){
with(_2a){
return objj_msgSend(_segments[_2c],"width");
}
}),new objj_method(sel_getUid("setImage:forSegment:"),function(_2d,_2e,_2f,_30){
with(_2d){
objj_msgSend(_segments[_30],"setImage:",_2f);
objj_msgSend(_2d,"tileWithChangedSegment:",_30);
}
}),new objj_method(sel_getUid("imageForSegment:"),function(_31,_32,_33){
with(_31){
return objj_msgSend(_segments[_33],"image");
}
}),new objj_method(sel_getUid("setLabel:forSegment:"),function(_34,_35,_36,_37){
with(_34){
objj_msgSend(_segments[_37],"setLabel:",_36);
objj_msgSend(_34,"tileWithChangedSegment:",_37);
}
}),new objj_method(sel_getUid("labelForSegment:"),function(_38,_39,_3a){
with(_38){
return objj_msgSend(_segments[_3a],"label");
}
}),new objj_method(sel_getUid("setMenu:forSegment:"),function(_3b,_3c,_3d,_3e){
with(_3b){
objj_msgSend(_segments[_3e],"setMenu:",_3d);
}
}),new objj_method(sel_getUid("menuForSegment:"),function(_3f,_40,_41){
with(_3f){
return objj_msgSend(_segments[_41],"menu");
}
}),new objj_method(sel_getUid("setSelected:forSegment:"),function(_42,_43,_44,_45){
with(_42){
var _46=_segments[_45];
if(objj_msgSend(_46,"selected")==_44){
return;
}
objj_msgSend(_46,"setSelected:",_44);
_themeStates[_45]=_44?CPThemeStateSelected:CPThemeStateNormal;
if(_44){
var _47=_selectedSegment;
_selectedSegment=_45;
if(_trackingMode==CPSegmentSwitchTrackingSelectOne&&_47!=_45&&_47!=-1){
objj_msgSend(_segments[_47],"setSelected:",NO);
_themeStates[_47]=CPThemeStateNormal;
objj_msgSend(_42,"drawSegmentBezel:highlight:",_47,NO);
}
}
if(_trackingMode!=CPSegmentSwitchTrackingMomentary){
objj_msgSend(_42,"drawSegmentBezel:highlight:",_45,NO);
}
objj_msgSend(_42,"setNeedsLayout");
objj_msgSend(_42,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("isSelectedForSegment:"),function(_48,_49,_4a){
with(_48){
return objj_msgSend(_segments[_4a],"selected");
}
}),new objj_method(sel_getUid("setEnabled:forSegment:"),function(_4b,_4c,_4d,_4e){
with(_4b){
objj_msgSend(_segments[_4e],"setEnabled:",_4d);
if(_4d){
_themeStates[_4e]&=~CPThemeStateDisabled;
}else{
_themeStates[_4e]|=CPThemeStateDisabled;
}
objj_msgSend(_4b,"setNeedsLayout");
objj_msgSend(_4b,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("isEnabledForSegment:"),function(_4f,_50,_51){
with(_4f){
return objj_msgSend(_segments[_51],"enabled");
}
}),new objj_method(sel_getUid("setTag:forSegment:"),function(_52,_53,_54,_55){
with(_52){
objj_msgSend(_segments[_55],"setTag:",_54);
}
}),new objj_method(sel_getUid("tagForSegment:"),function(_56,_57,_58){
with(_56){
return objj_msgSend(_segments[_58],"tag");
}
}),new objj_method(sel_getUid("drawSegmentBezel:highlight:"),function(_59,_5a,_5b,_5c){
with(_59){
if(_5c){
_themeStates[_5b]|=CPThemeStateHighlighted;
}else{
_themeStates[_5b]&=~CPThemeStateHighlighted;
}
objj_msgSend(_59,"setNeedsLayout");
objj_msgSend(_59,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("_leftOffsetForSegment:"),function(_5d,_5e,_5f){
with(_5d){
var _60=objj_msgSend(_5d,"currentValueForThemeAttribute:","bezel-inset");
if(_5f==0){
return _60.left;
}
var _61=objj_msgSend(_5d,"currentValueForThemeAttribute:","divider-thickness");
return objj_msgSend(_5d,"_leftOffsetForSegment:",_5f-1)+objj_msgSend(_5d,"widthForSegment:",_5f-1)+_61;
}
}),new objj_method(sel_getUid("_indexOfLastSegment"),function(_62,_63){
with(_62){
var _64=objj_msgSend(_segments,"count")-1;
if(_64<0){
_64=0;
}
return _64;
}
}),new objj_method(sel_getUid("rectForEphemeralSubviewNamed:"),function(_65,_66,_67){
with(_65){
var _68=objj_msgSend(_65,"currentValueForThemeAttribute:","default-height"),_69=objj_msgSend(_65,"currentValueForThemeAttribute:","content-inset"),_6a=objj_msgSend(_65,"currentValueForThemeAttribute:","bezel-inset"),_6b=objj_msgSend(_65,"bounds");
if(_67==="left-segment-bezel"){
return CGRectMake(_6a.left,_6a.top,_69.left,_68);
}else{
if(_67==="right-segment-bezel"){
return CPRectMake(CGRectGetWidth(objj_msgSend(_65,"bounds"))-_69.right,_6a.top,_69.right,_68);
}else{
if(_67.indexOf("segment-bezel")===0){
var _6c=parseInt(_67.substring("segment-bezel-".length),10),_6d=CGRectCreateCopy(objj_msgSend(_segments[_6c],"frame"));
if(_6c===0){
_6d.origin.x+=_69.left;
_6d.size.width-=_69.left;
}
if(_6c===_segments.length-1){
_6d.size.width=CGRectGetWidth(objj_msgSend(_65,"bounds"))-_69.right-_6d.origin.x;
}
return _6d;
}else{
if(_67.indexOf("divider-bezel")===0){
var _6c=parseInt(_67.substring("divider-bezel-".length),10),_6e=objj_msgSend(_65,"widthForSegment:",_6c),_6f=objj_msgSend(_65,"_leftOffsetForSegment:",_6c),_70=objj_msgSend(_65,"currentValueForThemeAttribute:","divider-thickness");
return CGRectMake(_6f+_6e,_6a.top,_70,_68);
}else{
if(_67.indexOf("segment-content")===0){
var _6c=parseInt(_67.substring("segment-content-".length),10);
return objj_msgSend(_65,"contentFrameForSegment:",_6c);
}
}
}
}
}
return objj_msgSendSuper({receiver:_65,super_class:objj_getClass("CPSegmentedControl").super_class},"rectForEphemeralSubviewNamed:",_67);
}
}),new objj_method(sel_getUid("createEphemeralSubviewNamed:"),function(_71,_72,_73){
with(_71){
if(objj_msgSend(_73,"hasPrefix:","segment-content")){
return objj_msgSend(objj_msgSend(_CPImageAndTextView,"alloc"),"initWithFrame:",{origin:{x:0,y:0},size:{width:0,height:0}});
}
return objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",{origin:{x:0,y:0},size:{width:0,height:0}});
}
}),new objj_method(sel_getUid("layoutSubviews"),function(_74,_75){
with(_74){
if(_segments.length<=0){
return;
}
var _76=_themeStates[0];
_76|=_themeState&CPThemeStateDisabled;
var _77=objj_msgSend(_74,"valueForThemeAttribute:inState:","left-segment-bezel-color",_76),_78=objj_msgSend(_74,"layoutEphemeralSubviewNamed:positioned:relativeToEphemeralSubviewNamed:","left-segment-bezel",CPWindowBelow,nil);
objj_msgSend(_78,"setBackgroundColor:",_77);
var _76=_themeStates[_themeStates.length-1];
_76|=_themeState&CPThemeStateDisabled;
var _79=objj_msgSend(_74,"valueForThemeAttribute:inState:","right-segment-bezel-color",_76),_7a=objj_msgSend(_74,"layoutEphemeralSubviewNamed:positioned:relativeToEphemeralSubviewNamed:","right-segment-bezel",CPWindowBelow,nil);
objj_msgSend(_7a,"setBackgroundColor:",_79);
for(var i=0,_7b=_themeStates.length;i<_7b;i++){
var _76=_themeStates[i];
_76|=_themeState&CPThemeStateDisabled;
var _7c=objj_msgSend(_74,"valueForThemeAttribute:inState:","center-segment-bezel-color",_76),_7d=objj_msgSend(_74,"layoutEphemeralSubviewNamed:positioned:relativeToEphemeralSubviewNamed:","segment-bezel-"+i,CPWindowBelow,nil);
objj_msgSend(_7d,"setBackgroundColor:",_7c);
var _7e=_segments[i],_7f=objj_msgSend(_74,"layoutEphemeralSubviewNamed:positioned:relativeToEphemeralSubviewNamed:","segment-content-"+i,CPWindowAbove,"segment-bezel-"+i);
objj_msgSend(_7f,"setText:",objj_msgSend(_7e,"label"));
objj_msgSend(_7f,"setImage:",objj_msgSend(_7e,"image"));
objj_msgSend(_7f,"setFont:",objj_msgSend(_74,"valueForThemeAttribute:inState:","font",_76));
objj_msgSend(_7f,"setTextColor:",objj_msgSend(_74,"valueForThemeAttribute:inState:","text-color",_76));
objj_msgSend(_7f,"setAlignment:",objj_msgSend(_74,"valueForThemeAttribute:inState:","alignment",_76));
objj_msgSend(_7f,"setVerticalAlignment:",objj_msgSend(_74,"valueForThemeAttribute:inState:","vertical-alignment",_76));
objj_msgSend(_7f,"setLineBreakMode:",objj_msgSend(_74,"valueForThemeAttribute:inState:","line-break-mode",_76));
objj_msgSend(_7f,"setTextShadowColor:",objj_msgSend(_74,"valueForThemeAttribute:inState:","text-shadow-color",_76));
objj_msgSend(_7f,"setTextShadowOffset:",objj_msgSend(_74,"valueForThemeAttribute:inState:","text-shadow-offset",_76));
objj_msgSend(_7f,"setImageScaling:",objj_msgSend(_74,"valueForThemeAttribute:inState:","image-scaling",_76));
if(objj_msgSend(_7e,"image")&&objj_msgSend(_7e,"label")){
objj_msgSend(_7f,"setImagePosition:",objj_msgSend(_74,"valueForThemeAttribute:inState:","image-position",_76));
}else{
if(objj_msgSend(_7e,"image")){
objj_msgSend(_7f,"setImagePosition:",CPImageOnly);
}
}
if(i==_7b-1){
continue;
}
var _80=_themeStates[i]|_themeStates[i+1];
_80=(_80&CPThemeStateSelected&~CPThemeStateHighlighted)?CPThemeStateSelected:CPThemeStateNormal;
_80|=_themeState&CPThemeStateDisabled;
var _81=objj_msgSend(_74,"valueForThemeAttribute:inState:","divider-bezel-color",_80),_82=objj_msgSend(_74,"layoutEphemeralSubviewNamed:positioned:relativeToEphemeralSubviewNamed:","divider-bezel-"+i,CPWindowBelow,nil);
objj_msgSend(_82,"setBackgroundColor:",_81);
}
}
}),new objj_method(sel_getUid("drawSegment:highlight:"),function(_83,_84,_85,_86){
with(_83){
}
}),new objj_method(sel_getUid("tileWithChangedSegment:"),function(_87,_88,_89){
with(_87){
if(_89>=_segments.length){
return;
}
var _8a=_segments[_89],_8b=objj_msgSend(_8a,"width"),_8c=_themeStates[_89]|(_themeState&CPThemeStateDisabled),_8d=objj_msgSend(_87,"valueForThemeAttribute:inState:","content-inset",_8c),_8e=objj_msgSend(_87,"font");
if(!_8b){
if(objj_msgSend(_8a,"image")&&objj_msgSend(_8a,"label")){
_8b=objj_msgSend(objj_msgSend(_8a,"label"),"sizeWithFont:",_8e).width+objj_msgSend(objj_msgSend(_8a,"image"),"size").width+_8d.left+_8d.right;
}else{
if(_8a.image){
_8b=objj_msgSend(objj_msgSend(_8a,"image"),"size").width+_8d.left+_8d.right;
}else{
if(_8a.label){
_8b=objj_msgSend(objj_msgSend(_8a,"label"),"sizeWithFont:",_8e).width+_8d.left+_8d.right;
}else{
_8b=0;
}
}
}
}
var _8f=_8b-CGRectGetWidth(objj_msgSend(_8a,"frame"));
if(!_8f){
objj_msgSend(_87,"setNeedsLayout");
objj_msgSend(_87,"setNeedsDisplay:",YES);
return;
}
var _90=objj_msgSend(_87,"frame");
objj_msgSend(_87,"setFrameSize:",CGSizeMake(CGRectGetWidth(_90)+_8f,CGRectGetHeight(_90)));
objj_msgSend(_8a,"setWidth:",_8b);
objj_msgSend(_8a,"setFrame:",objj_msgSend(_87,"frameForSegment:",_89));
var _91=_89+1;
for(;_91<_segments.length;++_91){
objj_msgSend(_segments[_91],"frame").origin.x+=_8f;
objj_msgSend(_87,"drawSegmentBezel:highlight:",_91,NO);
objj_msgSend(_87,"drawSegment:highlight:",_91,NO);
}
objj_msgSend(_87,"drawSegmentBezel:highlight:",_89,NO);
objj_msgSend(_87,"drawSegment:highlight:",_89,NO);
objj_msgSend(_87,"setNeedsLayout");
objj_msgSend(_87,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("frameForSegment:"),function(_92,_93,_94){
with(_92){
return objj_msgSend(_92,"bezelFrameForSegment:",_94);
}
}),new objj_method(sel_getUid("bezelFrameForSegment:"),function(_95,_96,_97){
with(_95){
var _98=objj_msgSend(_95,"currentValueForThemeAttribute:","default-height"),_99=objj_msgSend(_95,"currentValueForThemeAttribute:","bezel-inset"),_9a=objj_msgSend(_95,"widthForSegment:",_97),_9b=objj_msgSend(_95,"_leftOffsetForSegment:",_97);
return CGRectMake(_9b,_99.top,_9a,_98);
}
}),new objj_method(sel_getUid("contentFrameForSegment:"),function(_9c,_9d,_9e){
with(_9c){
var _9f=objj_msgSend(_9c,"currentValueForThemeAttribute:","default-height"),_a0=objj_msgSend(_9c,"currentValueForThemeAttribute:","content-inset"),_a1=objj_msgSend(_9c,"widthForSegment:",_9e),_a2=objj_msgSend(_9c,"_leftOffsetForSegment:",_9e);
return CGRectMake(_a2+_a0.left,_a0.top,_a1-_a0.left-_a0.right,_9f-_a0.top-_a0.bottom);
}
}),new objj_method(sel_getUid("testSegment:"),function(_a3,_a4,_a5){
with(_a3){
var _a6=objj_msgSend(_a3,"convertPoint:fromView:",_a5,nil),_a7=_segments.length;
while(_a7--){
if(CGRectContainsPoint(objj_msgSend(_segments[_a7],"frame"),_a5)){
return _a7;
}
}
if(_segments.length){
var _a8=CGRectCreateCopy(objj_msgSend(_segments[_segments.length-1],"frame"));
_a8.size.width=CGRectGetWidth(objj_msgSend(_a3,"bounds"))-_a8.origin.x;
if(CGRectContainsPoint(_a8,_a5)){
return _segments.length-1;
}
}
return -1;
}
}),new objj_method(sel_getUid("mouseDown:"),function(_a9,_aa,_ab){
with(_a9){
if(!objj_msgSend(_a9,"isEnabled")){
return;
}
objj_msgSend(_a9,"trackSegment:",_ab);
}
}),new objj_method(sel_getUid("mouseUp:"),function(_ac,_ad,_ae){
with(_ac){
}
}),new objj_method(sel_getUid("trackSegment:"),function(_af,_b0,_b1){
with(_af){
var _b2=objj_msgSend(_b1,"type"),_b3=objj_msgSend(_af,"convertPoint:fromView:",objj_msgSend(_b1,"locationInWindow"),nil);
if(_b2==CPLeftMouseUp){
if(_trackingSegment==-1){
return;
}
if(_trackingSegment===objj_msgSend(_af,"testSegment:",_b3)){
if(_trackingMode==CPSegmentSwitchTrackingSelectAny){
objj_msgSend(_af,"setSelected:forSegment:",!objj_msgSend(_af,"isSelectedForSegment:",_trackingSegment),_trackingSegment);
_selectedSegment=_trackingSegment;
}else{
objj_msgSend(_af,"setSelected:forSegment:",YES,_trackingSegment);
}
objj_msgSend(_af,"sendAction:to:",objj_msgSend(_af,"action"),objj_msgSend(_af,"target"));
if(_trackingMode==CPSegmentSwitchTrackingMomentary){
objj_msgSend(_af,"setSelected:forSegment:",NO,_trackingSegment);
_selectedSegment=-1;
}
}
objj_msgSend(_af,"drawSegmentBezel:highlight:",_trackingSegment,NO);
_trackingSegment=-1;
return;
}
if(_b2==CPLeftMouseDown){
var _b4=objj_msgSend(_af,"testSegment:",_b3);
if(_b4>-1&&objj_msgSend(_af,"isEnabledForSegment:",_b4)){
_trackingHighlighted=YES;
_trackingSegment=_b4;
objj_msgSend(_af,"drawSegmentBezel:highlight:",_trackingSegment,YES);
}
}else{
if(_b2==CPLeftMouseDragged){
if(_trackingSegment==-1){
return;
}
var _b5=objj_msgSend(_af,"testSegment:",_b3)===_trackingSegment;
if(_b5!=_trackingHighlighted){
_trackingHighlighted=_b5;
objj_msgSend(_af,"drawSegmentBezel:highlight:",_trackingSegment,_trackingHighlighted);
}
}
}
objj_msgSend(CPApp,"setTarget:selector:forNextEventMatchingMask:untilDate:inMode:dequeue:",_af,sel_getUid("trackSegment:"),CPLeftMouseDraggedMask|CPLeftMouseUpMask,nil,nil,YES);
}
}),new objj_method(sel_getUid("setFont:"),function(_b6,_b7,_b8){
with(_b6){
objj_msgSendSuper({receiver:_b6,super_class:objj_getClass("CPSegmentedControl").super_class},"setFont:",_b8);
objj_msgSend(_b6,"tileWithChangedSegment:",0);
}
})]);
class_addMethods(_2,[new objj_method(sel_getUid("defaultThemeClass"),function(_b9,_ba){
with(_b9){
return "segmented-control";
}
}),new objj_method(sel_getUid("themeAttributes"),function(_bb,_bc){
with(_bb){
return objj_msgSend(CPDictionary,"dictionaryWithObjects:forKeys:",[CPCenterTextAlignment,CPCenterVerticalTextAlignment,CPImageLeft,CPScaleNone,{top:(0),right:(0),bottom:(0),left:(0)},{top:(0),right:(0),bottom:(0),left:(0)},objj_msgSend(CPNull,"null"),objj_msgSend(CPNull,"null"),objj_msgSend(CPNull,"null"),objj_msgSend(CPNull,"null"),1,24],["alignment","vertical-alignment","image-position","image-scaling","bezel-inset","content-inset","left-segment-bezel-color","right-segment-bezel-color","center-segment-bezel-color","divider-bezel-color","divider-thickness","default-height"]);
}
})]);
var _bd="CPSegmentedControlSegmentsKey",_be="CPSegmentedControlSelectedKey",_bf="CPSegmentedControlSegmentStyleKey",_c0="CPSegmentedControlTrackingModeKey";
var _1=objj_getClass("CPSegmentedControl");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"CPSegmentedControl\"");
}
var _2=_1.isa;
class_addMethods(_1,[new objj_method(sel_getUid("initWithCoder:"),function(_c1,_c2,_c3){
with(_c1){
_c1=objj_msgSendSuper({receiver:_c1,super_class:objj_getClass("CPSegmentedControl").super_class},"initWithCoder:",_c3);
if(_c1){
var _c4=objj_msgSend(_c1,"frame"),_c5=_c4.size.width;
_c4.size.width=0;
objj_msgSend(_c1,"setFrame:",_c4);
_segments=objj_msgSend(_c3,"decodeObjectForKey:",_bd);
_segmentStyle=objj_msgSend(_c3,"decodeIntForKey:",_bf);
_themeStates=[];
if(objj_msgSend(_c3,"containsValueForKey:",_be)){
_selectedSegment=objj_msgSend(_c3,"decodeIntForKey:",_be);
}else{
_selectedSegment=-1;
}
if(objj_msgSend(_c3,"containsValueForKey:",_c0)){
_trackingMode=objj_msgSend(_c3,"decodeIntForKey:",_c0);
}else{
_trackingMode=CPSegmentSwitchTrackingSelectOne;
}
for(var i=0;i<_segments.length;i++){
_themeStates[i]=objj_msgSend(_segments[i],"selected")?CPThemeStateSelected:CPThemeStateNormal;
objj_msgSend(_c1,"tileWithChangedSegment:",i);
}
var _c6=MAX(_c5-objj_msgSend(_c1,"frame").size.width,0),_c7=FLOOR(_c6/_segments.length);
for(var i=0;i<_segments.length;i++){
objj_msgSend(_c1,"setWidth:forSegment:",objj_msgSend(_segments[i],"width")+_c7,i);
}
objj_msgSend(_c1,"tileWithChangedSegment:",0);
}
return _c1;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_c8,_c9,_ca){
with(_c8){
objj_msgSendSuper({receiver:_c8,super_class:objj_getClass("CPSegmentedControl").super_class},"encodeWithCoder:",_ca);
objj_msgSend(_ca,"encodeObject:forKey:",_segments,_bd);
objj_msgSend(_ca,"encodeInt:forKey:",_selectedSegment,_be);
objj_msgSend(_ca,"encodeInt:forKey:",_segmentStyle,_bf);
objj_msgSend(_ca,"encodeInt:forKey:",_trackingMode,_c0);
}
})]);
var _1=objj_allocateClassPair(CPObject,"_CPSegmentItem"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("image"),new objj_ivar("label"),new objj_ivar("menu"),new objj_ivar("selected"),new objj_ivar("enabled"),new objj_ivar("tag"),new objj_ivar("width"),new objj_ivar("frame")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("image"),function(_cb,_cc){
with(_cb){
return image;
}
}),new objj_method(sel_getUid("setImage:"),function(_cd,_ce,_cf){
with(_cd){
image=_cf;
}
}),new objj_method(sel_getUid("label"),function(_d0,_d1){
with(_d0){
return label;
}
}),new objj_method(sel_getUid("setLabel:"),function(_d2,_d3,_d4){
with(_d2){
label=_d4;
}
}),new objj_method(sel_getUid("menu"),function(_d5,_d6){
with(_d5){
return menu;
}
}),new objj_method(sel_getUid("setMenu:"),function(_d7,_d8,_d9){
with(_d7){
menu=_d9;
}
}),new objj_method(sel_getUid("selected"),function(_da,_db){
with(_da){
return selected;
}
}),new objj_method(sel_getUid("setSelected:"),function(_dc,_dd,_de){
with(_dc){
selected=_de;
}
}),new objj_method(sel_getUid("enabled"),function(_df,_e0){
with(_df){
return enabled;
}
}),new objj_method(sel_getUid("setEnabled:"),function(_e1,_e2,_e3){
with(_e1){
enabled=_e3;
}
}),new objj_method(sel_getUid("tag"),function(_e4,_e5){
with(_e4){
return tag;
}
}),new objj_method(sel_getUid("setTag:"),function(_e6,_e7,_e8){
with(_e6){
tag=_e8;
}
}),new objj_method(sel_getUid("width"),function(_e9,_ea){
with(_e9){
return width;
}
}),new objj_method(sel_getUid("setWidth:"),function(_eb,_ec,_ed){
with(_eb){
width=_ed;
}
}),new objj_method(sel_getUid("frame"),function(_ee,_ef){
with(_ee){
return frame;
}
}),new objj_method(sel_getUid("setFrame:"),function(_f0,_f1,_f2){
with(_f0){
frame=_f2;
}
}),new objj_method(sel_getUid("init"),function(_f3,_f4){
with(_f3){
if(_f3=objj_msgSendSuper({receiver:_f3,super_class:objj_getClass("_CPSegmentItem").super_class},"init")){
image=nil;
label="";
menu=nil;
selected=NO;
enabled=YES;
tag=-1;
width=0;
frame=CGRectMakeZero();
}
return _f3;
}
})]);
var _f5="CPSegmentItemImageKey",_f6="CPSegmentItemLabelKey",_f7="CPSegmentItemMenuKey",_f8="CPSegmentItemSelectedKey",_f9="CPSegmentItemEnabledKey",_fa="CPSegmentItemTagKey",_fb="CPSegmentItemWidthKey";
var _1=objj_getClass("_CPSegmentItem");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"_CPSegmentItem\"");
}
var _2=_1.isa;
class_addMethods(_1,[new objj_method(sel_getUid("initWithCoder:"),function(_fc,_fd,_fe){
with(_fc){
_fc=objj_msgSendSuper({receiver:_fc,super_class:objj_getClass("_CPSegmentItem").super_class},"init");
if(_fc){
image=objj_msgSend(_fe,"decodeObjectForKey:",_f5);
label=objj_msgSend(_fe,"decodeObjectForKey:",_f6);
menu=objj_msgSend(_fe,"decodeObjectForKey:",_f7);
selected=objj_msgSend(_fe,"decodeBoolForKey:",_f8);
enabled=objj_msgSend(_fe,"decodeBoolForKey:",_f9);
tag=objj_msgSend(_fe,"decodeIntForKey:",_fa);
width=objj_msgSend(_fe,"decodeFloatForKey:",_fb);
frame=CGRectMakeZero();
}
return _fc;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_ff,_100,_101){
with(_ff){
objj_msgSend(_101,"encodeObject:forKey:",image,_f5);
objj_msgSend(_101,"encodeObject:forKey:",label,_f6);
objj_msgSend(_101,"encodeObject:forKey:",menu,_f7);
objj_msgSend(_101,"encodeBool:forKey:",selected,_f8);
objj_msgSend(_101,"encodeBool:forKey:",enabled,_f9);
objj_msgSend(_101,"encodeInt:forKey:",tag,_fa);
objj_msgSend(_101,"encodeFloat:forKey:",width,_fb);
}
})]);
p;10;CPShadow.jt;1333;@STATIC;1.0;I;21;Foundation/CPObject.jt;1288;
objj_executeFile("Foundation/CPObject.j",NO);
var _1=objj_allocateClassPair(CPObject,"CPShadow"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_offset"),new objj_ivar("_blurRadius"),new objj_ivar("_color"),new objj_ivar("_cssString")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("_initWithOffset:blurRadius:color:"),function(_3,_4,_5,_6,_7){
with(_3){
_3=objj_msgSendSuper({receiver:_3,super_class:objj_getClass("CPShadow").super_class},"init");
if(_3){
_offset=_5;
_blurRadius=_6;
_color=_7;
_cssString=objj_msgSend(_color,"cssString")+" "+Math.round(_5.width)+"px "+Math.round(_5.height)+"px "+Math.round(_blurRadius)+"px";
}
return _3;
}
}),new objj_method(sel_getUid("shadowOffset"),function(_8,_9){
with(_8){
return _offset;
}
}),new objj_method(sel_getUid("shadowBlurRadius"),function(_a,_b){
with(_a){
return _blurRadius;
}
}),new objj_method(sel_getUid("shadowColor"),function(_c,_d){
with(_c){
return _color;
}
}),new objj_method(sel_getUid("cssString"),function(_e,_f){
with(_e){
return _cssString;
}
})]);
class_addMethods(_2,[new objj_method(sel_getUid("shadowWithOffset:blurRadius:color:"),function(_10,_11,_12,_13,_14){
with(_10){
return objj_msgSend(objj_msgSend(CPShadow,"alloc"),"_initWithOffset:blurRadius:color:",_12,_13,_14);
}
})]);
p;14;CPShadowView.jt;6828;@STATIC;1.0;I;21;Foundation/CPBundle.ji;12;CGGeometry.ji;9;CPImage.ji;13;CPImageView.ji;8;CPView.jt;6723;
objj_executeFile("Foundation/CPBundle.j",NO);
objj_executeFile("CGGeometry.j",YES);
objj_executeFile("CPImage.j",YES);
objj_executeFile("CPImageView.j",YES);
objj_executeFile("CPView.j",YES);
CPLightShadow=0;
CPHeavyShadow=1;
var _1=nil,_2=nil;
var _3=3,_4=3,_5=3,_6=5,_7=7,_8=7,_9=5,_a=5;
var _b=objj_allocateClassPair(CPView,"CPShadowView"),_c=_b.isa;
class_addIvars(_b,[new objj_ivar("_weight")]);
objj_registerClassPair(_b);
class_addMethods(_b,[new objj_method(sel_getUid("initWithFrame:"),function(_d,_e,_f){
with(_d){
_d=objj_msgSendSuper({receiver:_d,super_class:objj_getClass("CPShadowView").super_class},"initWithFrame:",_f);
if(_d){
_weight=CPLightShadow;
objj_msgSend(_d,"setBackgroundColor:",_1);
objj_msgSend(_d,"setHitTests:",NO);
}
return _d;
}
}),new objj_method(sel_getUid("setWeight:"),function(_10,_11,_12){
with(_10){
if(_weight==_12){
return;
}
_weight=_12;
if(_weight==CPLightShadow){
objj_msgSend(_10,"setBackgroundColor:",_1);
}else{
objj_msgSend(_10,"setBackgroundColor:",_2);
}
}
}),new objj_method(sel_getUid("leftInset"),function(_13,_14){
with(_13){
return _weight==CPLightShadow?_3:_7;
}
}),new objj_method(sel_getUid("rightInset"),function(_15,_16){
with(_15){
return _weight==CPLightShadow?_4:_8;
}
}),new objj_method(sel_getUid("topInset"),function(_17,_18){
with(_17){
return _weight==CPLightShadow?_5:_9;
}
}),new objj_method(sel_getUid("bottomInset"),function(_19,_1a){
with(_19){
return _weight==CPLightShadow?_6:_a;
}
}),new objj_method(sel_getUid("horizontalInset"),function(_1b,_1c){
with(_1b){
if(_weight==CPLightShadow){
return _3+_4;
}
return _7+_8;
}
}),new objj_method(sel_getUid("verticalInset"),function(_1d,_1e){
with(_1d){
if(_weight==CPLightShadow){
return _5+_6;
}
return _9+_a;
}
}),new objj_method(sel_getUid("frameForContentFrame:"),function(_1f,_20,_21){
with(_1f){
return objj_msgSend(objj_msgSend(_1f,"class"),"frameForContentFrame:withWeight:",_21,_weight);
}
}),new objj_method(sel_getUid("setFrameForContentFrame:"),function(_22,_23,_24){
with(_22){
objj_msgSend(_22,"setFrame:",objj_msgSend(_22,"frameForContentFrame:",_24));
}
})]);
class_addMethods(_c,[new objj_method(sel_getUid("initialize"),function(_25,_26){
with(_25){
if(_25!=objj_msgSend(CPShadowView,"class")){
return;
}
var _27=objj_msgSend(CPBundle,"bundleForClass:",objj_msgSend(_25,"class"));
_1=objj_msgSend(CPColor,"colorWithPatternImage:",objj_msgSend(objj_msgSend(CPNinePartImage,"alloc"),"initWithImageSlices:",[objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_27,"pathForResource:","CPShadowView/CPShadowViewLightTopLeft.png"),CGSizeMake(9,9)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_27,"pathForResource:","CPShadowView/CPShadowViewLightTop.png"),CGSizeMake(1,9)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_27,"pathForResource:","CPShadowView/CPShadowViewLightTopRight.png"),CGSizeMake(9,9)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_27,"pathForResource:","CPShadowView/CPShadowViewLightLeft.png"),CGSizeMake(9,1)),nil,objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_27,"pathForResource:","CPShadowView/CPShadowViewLightRight.png"),CGSizeMake(9,1)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_27,"pathForResource:","CPShadowView/CPShadowViewLightBottomLeft.png"),CGSizeMake(9,9)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_27,"pathForResource:","CPShadowView/CPShadowViewLightBottom.png"),CGSizeMake(1,9)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_27,"pathForResource:","CPShadowView/CPShadowViewLightBottomRight.png"),CGSizeMake(9,9))]));
_2=objj_msgSend(CPColor,"colorWithPatternImage:",objj_msgSend(objj_msgSend(CPNinePartImage,"alloc"),"initWithImageSlices:",[objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_27,"pathForResource:","CPShadowView/CPShadowViewHeavyTopLeft.png"),CGSizeMake(17,17)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_27,"pathForResource:","CPShadowView/CPShadowViewHeavyTop.png"),CGSizeMake(1,17)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_27,"pathForResource:","CPShadowView/CPShadowViewHeavyTopRight.png"),CGSizeMake(17,17)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_27,"pathForResource:","CPShadowView/CPShadowViewHeavyLeft.png"),CGSizeMake(17,1)),nil,objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_27,"pathForResource:","CPShadowView/CPShadowViewHeavyRight.png"),CGSizeMake(17,1)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_27,"pathForResource:","CPShadowView/CPShadowViewHeavyBottomLeft.png"),CGSizeMake(17,17)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_27,"pathForResource:","CPShadowView/CPShadowViewHeavyBottom.png"),CGSizeMake(1,17)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_27,"pathForResource:","CPShadowView/CPShadowViewHeavyBottomRight.png"),CGSizeMake(17,17))]));
}
}),new objj_method(sel_getUid("shadowViewEnclosingView:"),function(_28,_29,_2a){
with(_28){
return objj_msgSend(_28,"shadowViewEnclosingView:withWeight:",_2a,CPLightShadow);
}
}),new objj_method(sel_getUid("shadowViewEnclosingView:withWeight:"),function(_2b,_2c,_2d,_2e){
with(_2b){
var _2f=objj_msgSend(objj_msgSend(CPShadowView,"alloc"),"initWithFrame:",objj_msgSend(_2d,"frame"));
objj_msgSend(_2f,"setWeight:",_2e);
var _30=objj_msgSend(_2f,"frame").size,_31=_30.width-objj_msgSend(_2f,"leftInset")-objj_msgSend(_2f,"rightInset"),_32=_30.height-objj_msgSend(_2f,"topInset")-objj_msgSend(_2f,"bottomInset"),_33=objj_msgSend(_2d,"superview");
objj_msgSend(_2f,"setHitTests:",objj_msgSend(_2d,"hitTests"));
objj_msgSend(_2f,"setAutoresizingMask:",objj_msgSend(_2d,"autoresizingMask"));
objj_msgSend(_2d,"removeFromSuperview");
objj_msgSend(_2f,"addSubview:",_2d);
objj_msgSend(_2d,"setFrame:",CGRectMake(objj_msgSend(_2f,"leftInset"),objj_msgSend(_2f,"topInset"),_31,_32));
objj_msgSend(_33,"addSubview:",_2f);
return _2f;
}
}),new objj_method(sel_getUid("frameForContentFrame:withWeight:"),function(_34,_35,_36,_37){
with(_34){
if(_37==CPLightShadow){
return CGRectMake((_36.origin.x)-_3,(_36.origin.y)-_5,(_36.size.width)+_3+_4,(_36.size.height)+_5+_6);
}else{
return CGRectMake((_36.origin.x)-_7,(_36.origin.y)-_9,(_36.size.width)+_7+_8,(_36.size.height)+_9+_a);
}
}
})]);
p;10;CPSlider.jt;11847;@STATIC;1.0;i;11;CPControl.jt;11811;
objj_executeFile("CPControl.j",YES);
CPLinearSlider=0;
CPCircularSlider=1;
var _1=objj_allocateClassPair(CPControl,"CPSlider"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_minValue"),new objj_ivar("_maxValue"),new objj_ivar("_altIncrementValue"),new objj_ivar("_isVertical")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("initWithFrame:"),function(_3,_4,_5){
with(_3){
_3=objj_msgSendSuper({receiver:_3,super_class:objj_getClass("CPSlider").super_class},"initWithFrame:",_5);
if(_3){
_minValue=0;
_maxValue=100;
objj_msgSend(_3,"setObjectValue:",50);
objj_msgSend(_3,"setContinuous:",YES);
objj_msgSend(_3,"_recalculateIsVertical");
}
return _3;
}
}),new objj_method(sel_getUid("setMinValue:"),function(_6,_7,_8){
with(_6){
if(_minValue===_8){
return;
}
_minValue=_8;
var _9=objj_msgSend(_6,"doubleValue");
if(_9<_minValue){
objj_msgSend(_6,"setDoubleValue:",_minValue);
}
objj_msgSend(_6,"setNeedsLayout");
objj_msgSend(_6,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("minValue"),function(_a,_b){
with(_a){
return _minValue;
}
}),new objj_method(sel_getUid("setMaxValue:"),function(_c,_d,_e){
with(_c){
if(_maxValue===_e){
return;
}
_maxValue=_e;
var _f=objj_msgSend(_c,"doubleValue");
if(_f>_maxValue){
objj_msgSend(_c,"setDoubleValue:",_maxValue);
}
objj_msgSend(_c,"setNeedsLayout");
objj_msgSend(_c,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("maxValue"),function(_10,_11){
with(_10){
return _maxValue;
}
}),new objj_method(sel_getUid("setObjectValue:"),function(_12,_13,_14){
with(_12){
objj_msgSendSuper({receiver:_12,super_class:objj_getClass("CPSlider").super_class},"setObjectValue:",MIN(MAX(_14,_minValue),_maxValue));
objj_msgSend(_12,"setNeedsLayout");
objj_msgSend(_12,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("setSliderType:"),function(_15,_16,_17){
with(_15){
if(_17===CPCircularSlider){
objj_msgSend(_15,"setThemeState:",CPThemeStateCircular);
}else{
objj_msgSend(_15,"unsetThemeState:",CPThemeStateCircular);
}
}
}),new objj_method(sel_getUid("sliderType"),function(_18,_19){
with(_18){
return objj_msgSend(_18,"hasThemeState:",CPThemeStateCircular)?CPCircularSlider:CPLinearSlider;
}
}),new objj_method(sel_getUid("trackRectForBounds:"),function(_1a,_1b,_1c){
with(_1a){
if(objj_msgSend(_1a,"hasThemeState:",CPThemeStateCircular)){
var _1d=CGRectCreateCopy(_1c);
_1c.size.width=MIN(_1c.size.width,_1c.size.height);
_1c.size.height=_1c.size.width;
if(_1c.size.width<_1d.size.width){
_1c.origin.x+=(_1d.size.width-_1c.size.width)/2;
}else{
_1c.origin.y+=(_1d.size.height-_1c.size.height)/2;
}
}else{
var _1e=objj_msgSend(_1a,"currentValueForThemeAttribute:","track-width");
if(_1e<=0){
return {origin:{x:0,y:0},size:{width:0,height:0}};
}
if(objj_msgSend(_1a,"isVertical")){
_1c.origin.x=((_1c.size.width)-_1e)/2;
_1c.size.width=_1e;
}else{
_1c.origin.y=((_1c.size.height)-_1e)/2;
_1c.size.height=_1e;
}
}
return _1c;
}
}),new objj_method(sel_getUid("knobRectForBounds:"),function(_1f,_20,_21){
with(_1f){
var _22=objj_msgSend(_1f,"currentValueForThemeAttribute:","knob-size");
if(_22.width<=0||_22.height<=0){
return {origin:{x:0,y:0},size:{width:0,height:0}};
}
var _23={origin:{x:0,y:0},size:{width:_22.width,height:_22.height}},_24=objj_msgSend(_1f,"trackRectForBounds:",_21);
if(!_24||(_24.size.width<=0||_24.size.height<=0)){
_24=_21;
}
if(objj_msgSend(_1f,"hasThemeState:",CPThemeStateCircular)){
var _25=3*PI_2-(1-objj_msgSend(_1f,"doubleValue")-_minValue)/(_maxValue-_minValue)*PI2,_26=CGRectGetWidth(_24)/2-8;
_23.origin.x=_26*COS(_25)+CGRectGetMidX(_24)-3;
_23.origin.y=_26*SIN(_25)+CGRectGetMidY(_24)-2;
}else{
if(objj_msgSend(_1f,"isVertical")){
_23.origin.x=(_24.origin.x+(_24.size.width)/2)-_22.width/2;
_23.origin.y=((_maxValue-objj_msgSend(_1f,"doubleValue"))/(_maxValue-_minValue))*((_24.size.height)-_22.height);
}else{
_23.origin.x=((objj_msgSend(_1f,"doubleValue")-_minValue)/(_maxValue-_minValue))*((_24.size.width)-_22.width);
_23.origin.y=(_24.origin.y+(_24.size.height)/2)-_22.height/2;
}
}
return _23;
}
}),new objj_method(sel_getUid("rectForEphemeralSubviewNamed:"),function(_27,_28,_29){
with(_27){
if(_29==="track-view"){
return objj_msgSend(_27,"trackRectForBounds:",objj_msgSend(_27,"bounds"));
}else{
if(_29==="knob-view"){
return objj_msgSend(_27,"knobRectForBounds:",objj_msgSend(_27,"bounds"));
}
}
return objj_msgSendSuper({receiver:_27,super_class:objj_getClass("CPSlider").super_class},"rectForEphemeralSubviewNamed:",_29);
}
}),new objj_method(sel_getUid("createEphemeralSubviewNamed:"),function(_2a,_2b,_2c){
with(_2a){
if(_2c==="track-view"||_2c==="knob-view"){
var _2d=objj_msgSend(objj_msgSend(CPView,"alloc"),"init");
objj_msgSend(_2d,"setHitTests:",NO);
return _2d;
}
return objj_msgSendSuper({receiver:_2a,super_class:objj_getClass("CPSlider").super_class},"createEphemeralSubviewNamed:",_2c);
}
}),new objj_method(sel_getUid("setAltIncrementValue:"),function(_2e,_2f,_30){
with(_2e){
_altIncrementValue=_30;
}
}),new objj_method(sel_getUid("altIncrementValue"),function(_31,_32){
with(_31){
return _altIncrementValue;
}
}),new objj_method(sel_getUid("setFrameSize:"),function(_33,_34,_35){
with(_33){
objj_msgSendSuper({receiver:_33,super_class:objj_getClass("CPSlider").super_class},"setFrameSize:",_35);
objj_msgSend(_33,"_recalculateIsVertical");
}
}),new objj_method(sel_getUid("_recalculateIsVertical"),function(_36,_37){
with(_36){
var _38=objj_msgSend(_36,"bounds"),_39=(_38.size.width),_3a=(_38.size.height);
_isVertical=_39<_3a?1:(_39>_3a?0:-1);
if(_isVertical===1){
objj_msgSend(_36,"setThemeState:",CPThemeStateVertical);
}else{
if(_isVertical===0){
objj_msgSend(_36,"unsetThemeState:",CPThemeStateVertical);
}
}
}
}),new objj_method(sel_getUid("isVertical"),function(_3b,_3c){
with(_3b){
return _isVertical;
}
}),new objj_method(sel_getUid("layoutSubviews"),function(_3d,_3e){
with(_3d){
var _3f=objj_msgSend(_3d,"layoutEphemeralSubviewNamed:positioned:relativeToEphemeralSubviewNamed:","track-view",CPWindowBelow,"knob-view");
if(_3f){
objj_msgSend(_3f,"setBackgroundColor:",objj_msgSend(_3d,"currentValueForThemeAttribute:","track-color"));
}
var _40=objj_msgSend(_3d,"layoutEphemeralSubviewNamed:positioned:relativeToEphemeralSubviewNamed:","knob-view",CPWindowAbove,"track-view");
if(_40){
objj_msgSend(_40,"setBackgroundColor:",objj_msgSend(_3d,"currentValueForThemeAttribute:","knob-color"));
}
}
}),new objj_method(sel_getUid("tracksMouseOutsideOfFrame"),function(_41,_42){
with(_41){
return YES;
}
}),new objj_method(sel_getUid("_valueAtPoint:"),function(_43,_44,_45){
with(_43){
var _46=objj_msgSend(_43,"bounds"),_47=objj_msgSend(_43,"knobRectForBounds:",_46),_48=objj_msgSend(_43,"trackRectForBounds:",_46);
if(objj_msgSend(_43,"hasThemeState:",CPThemeStateCircular)){
var _49=(_47.size.width);
_48.origin.x+=_49/2;
_48.size.width-=_49;
var _4a=objj_msgSend(_43,"minValue"),dx=_45.x-(_48.origin.x+(_48.size.width)/2),dy=_45.y-(_48.origin.y+(_48.size.height)/2);
return MAX(0,MIN(1,1-(3*PI_2-ATAN2(dy,dx))%PI2/PI2))*(objj_msgSend(_43,"maxValue")-_4a)+_4a;
}else{
if(objj_msgSend(_43,"isVertical")){
var _4b=(_47.size.height);
_48.origin.y+=_4b/2;
_48.size.height-=_4b;
var _4a=objj_msgSend(_43,"minValue");
return MAX(0,MIN(1,((_48.origin.y+_48.size.height)-_45.y)/(_48.size.height)))*(objj_msgSend(_43,"maxValue")-_4a)+_4a;
}else{
var _49=(_47.size.width);
_48.origin.x+=_49/2;
_48.size.width-=_49;
var _4a=objj_msgSend(_43,"minValue");
return MAX(0,MIN(1,(_45.x-(_48.origin.x))/(_48.size.width)))*(objj_msgSend(_43,"maxValue")-_4a)+_4a;
}
}
}
}),new objj_method(sel_getUid("startTrackingAt:"),function(_4c,_4d,_4e){
with(_4c){
var _4f=objj_msgSend(_4c,"bounds"),_50=objj_msgSend(_4c,"knobRectForBounds:",{origin:{x:_4f.origin.x,y:_4f.origin.y},size:{width:_4f.size.width,height:_4f.size.height}});
if((_4e.x>=(_50.origin.x)&&_4e.y>=(_50.origin.y)&&_4e.x<(_50.origin.x+_50.size.width)&&_4e.y<(_50.origin.y+_50.size.height))){
_dragOffset={width:(_50.origin.x+(_50.size.width)/2)-_4e.x,height:(_50.origin.y+(_50.size.height)/2)-_4e.y};
}else{
var _51=objj_msgSend(_4c,"trackRectForBounds:",_4f);
if(_51&&(_4e.x>=(_51.origin.x)&&_4e.y>=(_51.origin.y)&&_4e.x<(_51.origin.x+_51.size.width)&&_4e.y<(_51.origin.y+_51.size.height))){
_dragOffset={width:0,height:0};
objj_msgSend(_4c,"setObjectValue:",objj_msgSend(_4c,"_valueAtPoint:",_4e));
}else{
return NO;
}
}
objj_msgSend(_4c,"setHighlighted:",YES);
objj_msgSend(_4c,"setNeedsLayout");
objj_msgSend(_4c,"setNeedsDisplay:",YES);
return YES;
}
}),new objj_method(sel_getUid("continueTracking:at:"),function(_52,_53,_54,_55){
with(_52){
objj_msgSend(_52,"setObjectValue:",objj_msgSend(_52,"_valueAtPoint:",{x:_55.x+_dragOffset.width,y:_55.y+_dragOffset.height}));
return YES;
}
}),new objj_method(sel_getUid("stopTracking:at:mouseIsUp:"),function(_56,_57,_58,_59,_5a){
with(_56){
objj_msgSend(_56,"setHighlighted:",NO);
if(objj_msgSend(_target,"respondsToSelector:",sel_getUid("sliderDidFinish:"))){
objj_msgSend(_target,"sliderDidFinish:",_56);
}
objj_msgSend(_56,"setNeedsLayout");
objj_msgSend(_56,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("isContinuous"),function(_5b,_5c){
with(_5b){
return (_sendActionOn&CPLeftMouseDraggedMask)!==0;
}
}),new objj_method(sel_getUid("setContinuous:"),function(_5d,_5e,_5f){
with(_5d){
if(_5f){
_sendActionOn|=CPLeftMouseDraggedMask;
}else{
_sendActionOn&=~CPLeftMouseDraggedMask;
}
}
}),new objj_method(sel_getUid("takeValueFromKeyPath:ofObjects:"),function(_60,_61,_62,_63){
with(_60){
var _64=_63.length,_65=objj_msgSend(_63[0],"valueForKeyPath:",_62);
objj_msgSend(_60,"setObjectValue:",_65);
while(_64-->1){
if(_65!==(objj_msgSend(_63[_64],"valueForKeyPath:",_62))){
return objj_msgSend(_60,"setFloatValue:",1);
}
}
}
})]);
class_addMethods(_2,[new objj_method(sel_getUid("defaultThemeClass"),function(_66,_67){
with(_66){
return "slider";
}
}),new objj_method(sel_getUid("themeAttributes"),function(_68,_69){
with(_68){
return objj_msgSend(CPDictionary,"dictionaryWithObjects:forKeys:",[objj_msgSend(CPNull,"null"),{width:0,height:0},0,objj_msgSend(CPNull,"null")],["knob-color","knob-size","track-width","track-color"]);
}
})]);
var _6a="CPSliderMinValueKey",_6b="CPSliderMaxValueKey",_6c="CPSliderAltIncrValueKey";
var _1=objj_getClass("CPSlider");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"CPSlider\"");
}
var _2=_1.isa;
class_addMethods(_1,[new objj_method(sel_getUid("initWithCoder:"),function(_6d,_6e,_6f){
with(_6d){
_minValue=objj_msgSend(_6f,"decodeDoubleForKey:",_6a);
_maxValue=objj_msgSend(_6f,"decodeDoubleForKey:",_6b);
_6d=objj_msgSendSuper({receiver:_6d,super_class:objj_getClass("CPSlider").super_class},"initWithCoder:",_6f);
if(_6d){
_altIncrementValue=objj_msgSend(_6f,"decodeDoubleForKey:",_6c);
objj_msgSend(_6d,"_recalculateIsVertical");
objj_msgSend(_6d,"setNeedsLayout");
objj_msgSend(_6d,"setNeedsDisplay:",YES);
}
return _6d;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_70,_71,_72){
with(_70){
objj_msgSendSuper({receiver:_70,super_class:objj_getClass("CPSlider").super_class},"encodeWithCoder:",_72);
objj_msgSend(_72,"encodeDouble:forKey:",_minValue,_6a);
objj_msgSend(_72,"encodeDouble:forKey:",_maxValue,_6b);
objj_msgSend(_72,"encodeDouble:forKey:",_altIncrementValue,_6c);
}
})]);
var _1=objj_getClass("CPSlider");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"CPSlider\"");
}
var _2=_1.isa;
class_addMethods(_1,[new objj_method(sel_getUid("value"),function(_73,_74){
with(_73){
CPLog.warn("[CPSlider value] is deprecated, use doubleValue or objectValue instead.");
return objj_msgSend(_73,"doubleValue");
}
}),new objj_method(sel_getUid("setValue:"),function(_75,_76,_77){
with(_75){
CPLog.warn("[CPSlider setValue:] is deprecated, use setDoubleValue: or setObjectValue: instead.");
objj_msgSend(_75,"setObjectValue:",_77);
}
})]);
p;21;CPSliderColorPicker.jt;14235;@STATIC;1.0;i;8;CPView.ji;15;CPColorPicker.jt;14183;
objj_executeFile("CPView.j",YES);
objj_executeFile("CPColorPicker.j",YES);
var _1=objj_allocateClassPair(CPColorPicker,"CPSliderColorPicker"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_contentView"),new objj_ivar("_redSlider"),new objj_ivar("_greenSlider"),new objj_ivar("_blueSlider"),new objj_ivar("_hueSlider"),new objj_ivar("_saturationSlider"),new objj_ivar("_brightnessSlider"),new objj_ivar("_rgbLabel"),new objj_ivar("_hsbLabel"),new objj_ivar("_redLabel"),new objj_ivar("_greenLabel"),new objj_ivar("_blueLabel"),new objj_ivar("_hueLabel"),new objj_ivar("_saturationLabel"),new objj_ivar("_brightnessLabel"),new objj_ivar("_hexLabel"),new objj_ivar("_hexValue"),new objj_ivar("_hexValue"),new objj_ivar("_redValue"),new objj_ivar("_greenValue"),new objj_ivar("_blueValue"),new objj_ivar("_hueValue"),new objj_ivar("_saturationValue"),new objj_ivar("_brightnessValue")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("initWithPickerMask:colorPanel:"),function(_3,_4,_5,_6){
with(_3){
return objj_msgSendSuper({receiver:_3,super_class:objj_getClass("CPSliderColorPicker").super_class},"initWithPickerMask:colorPanel:",_5,_6);
}
}),new objj_method(sel_getUid("initView"),function(_7,_8){
with(_7){
aFrame=CGRectMake(0,0,CPColorPickerViewWidth,CPColorPickerViewHeight);
_contentView=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",aFrame);
objj_msgSend(_contentView,"setAutoresizingMask:",CPViewWidthSizable|CPViewHeightSizable);
_rgbLabel=objj_msgSend(objj_msgSend(CPTextField,"alloc"),"initWithFrame:",CGRectMake(0,10,100,20));
objj_msgSend(_rgbLabel,"setStringValue:","Red, Green, Blue");
objj_msgSend(_rgbLabel,"setTextColor:",objj_msgSend(CPColor,"blackColor"));
_redLabel=objj_msgSend(objj_msgSend(CPTextField,"alloc"),"initWithFrame:",CGRectMake(0,37,15,20));
objj_msgSend(_redLabel,"setStringValue:","R");
objj_msgSend(_redLabel,"setTextColor:",objj_msgSend(CPColor,"blackColor"));
_redSlider=objj_msgSend(objj_msgSend(CPSlider,"alloc"),"initWithFrame:",CGRectMake(15,35,aFrame.size.width-70,20));
objj_msgSend(_redSlider,"setMaxValue:",1);
objj_msgSend(_redSlider,"setMinValue:",0);
objj_msgSend(_redSlider,"setTarget:",_7);
objj_msgSend(_redSlider,"setAction:",sel_getUid("sliderChanged:"));
objj_msgSend(_redSlider,"setAutoresizingMask:",CPViewWidthSizable);
_redValue=objj_msgSend(objj_msgSend(CPTextField,"alloc"),"initWithFrame:",CGRectMake(aFrame.size.width-45,30,45,28));
objj_msgSend(_redValue,"setAutoresizingMask:",CPViewMinXMargin);
objj_msgSend(_redValue,"setEditable:",YES);
objj_msgSend(_redValue,"setBezeled:",YES);
objj_msgSend(_redValue,"setDelegate:",_7);
objj_msgSend(_contentView,"addSubview:",_redValue);
_greenLabel=objj_msgSend(objj_msgSend(CPTextField,"alloc"),"initWithFrame:",CGRectMake(0,63,15,20));
objj_msgSend(_greenLabel,"setStringValue:","G");
objj_msgSend(_greenLabel,"setTextColor:",objj_msgSend(CPColor,"blackColor"));
_greenSlider=objj_msgSend(objj_msgSend(CPSlider,"alloc"),"initWithFrame:",CGRectMake(15,61,aFrame.size.width-70,20));
objj_msgSend(_greenSlider,"setMaxValue:",1);
objj_msgSend(_greenSlider,"setMinValue:",0);
objj_msgSend(_greenSlider,"setTarget:",_7);
objj_msgSend(_greenSlider,"setAction:",sel_getUid("sliderChanged:"));
objj_msgSend(_greenSlider,"setAutoresizingMask:",CPViewWidthSizable);
_greenValue=objj_msgSend(objj_msgSend(CPTextField,"alloc"),"initWithFrame:",CGRectMake(aFrame.size.width-45,56,45,28));
objj_msgSend(_greenValue,"setAutoresizingMask:",CPViewMinXMargin);
objj_msgSend(_greenValue,"setEditable:",YES);
objj_msgSend(_greenValue,"setBezeled:",YES);
objj_msgSend(_greenValue,"setDelegate:",_7);
objj_msgSend(_contentView,"addSubview:",_greenValue);
_blueLabel=objj_msgSend(objj_msgSend(CPTextField,"alloc"),"initWithFrame:",CGRectMake(0,90,15,20));
objj_msgSend(_blueLabel,"setStringValue:","B");
objj_msgSend(_blueLabel,"setTextColor:",objj_msgSend(CPColor,"blackColor"));
_blueSlider=objj_msgSend(objj_msgSend(CPSlider,"alloc"),"initWithFrame:",CGRectMake(15,87,aFrame.size.width-70,20));
objj_msgSend(_blueSlider,"setMaxValue:",1);
objj_msgSend(_blueSlider,"setMinValue:",0);
objj_msgSend(_blueSlider,"setTarget:",_7);
objj_msgSend(_blueSlider,"setAction:",sel_getUid("sliderChanged:"));
objj_msgSend(_blueSlider,"setAutoresizingMask:",CPViewWidthSizable);
_blueValue=objj_msgSend(objj_msgSend(CPTextField,"alloc"),"initWithFrame:",CGRectMake(aFrame.size.width-45,82,45,28));
objj_msgSend(_blueValue,"setAutoresizingMask:",CPViewMinXMargin);
objj_msgSend(_blueValue,"setEditable:",YES);
objj_msgSend(_blueValue,"setBezeled:",YES);
objj_msgSend(_blueValue,"setDelegate:",_7);
objj_msgSend(_contentView,"addSubview:",_blueValue);
_hsbLabel=objj_msgSend(objj_msgSend(CPTextField,"alloc"),"initWithFrame:",CGRectMake(0,120,190,20));
objj_msgSend(_hsbLabel,"setStringValue:","Hue, Saturation, Brightness");
objj_msgSend(_hsbLabel,"setTextColor:",objj_msgSend(CPColor,"blackColor"));
_hueLabel=objj_msgSend(objj_msgSend(CPTextField,"alloc"),"initWithFrame:",CGRectMake(0,145,15,20));
objj_msgSend(_hueLabel,"setStringValue:","H");
objj_msgSend(_hueLabel,"setTextColor:",objj_msgSend(CPColor,"blackColor"));
_hueSlider=objj_msgSend(objj_msgSend(CPSlider,"alloc"),"initWithFrame:",CGRectMake(15,143,aFrame.size.width-70,20));
objj_msgSend(_hueSlider,"setMaxValue:",359);
objj_msgSend(_hueSlider,"setMinValue:",0);
objj_msgSend(_hueSlider,"setTarget:",_7);
objj_msgSend(_hueSlider,"setAction:",sel_getUid("sliderChanged:"));
objj_msgSend(_hueSlider,"setAutoresizingMask:",CPViewWidthSizable);
_hueValue=objj_msgSend(objj_msgSend(CPTextField,"alloc"),"initWithFrame:",CGRectMake(aFrame.size.width-45,138,45,28));
objj_msgSend(_hueValue,"setAutoresizingMask:",CPViewMinXMargin);
objj_msgSend(_hueValue,"setEditable:",YES);
objj_msgSend(_hueValue,"setBezeled:",YES);
objj_msgSend(_hueValue,"setDelegate:",_7);
objj_msgSend(_contentView,"addSubview:",_hueValue);
_saturationLabel=objj_msgSend(objj_msgSend(CPTextField,"alloc"),"initWithFrame:",CGRectMake(0,170,15,20));
objj_msgSend(_saturationLabel,"setStringValue:","S");
objj_msgSend(_saturationLabel,"setTextColor:",objj_msgSend(CPColor,"blackColor"));
_saturationSlider=objj_msgSend(objj_msgSend(CPSlider,"alloc"),"initWithFrame:",CGRectMake(15,168,aFrame.size.width-70,20));
objj_msgSend(_saturationSlider,"setMaxValue:",100);
objj_msgSend(_saturationSlider,"setMinValue:",0);
objj_msgSend(_saturationSlider,"setTarget:",_7);
objj_msgSend(_saturationSlider,"setAction:",sel_getUid("sliderChanged:"));
objj_msgSend(_saturationSlider,"setAutoresizingMask:",CPViewWidthSizable);
_saturationValue=objj_msgSend(objj_msgSend(CPTextField,"alloc"),"initWithFrame:",CGRectMake(aFrame.size.width-45,164,45,28));
objj_msgSend(_saturationValue,"setAutoresizingMask:",CPViewMinXMargin);
objj_msgSend(_saturationValue,"setEditable:",YES);
objj_msgSend(_saturationValue,"setBezeled:",YES);
objj_msgSend(_saturationValue,"setDelegate:",_7);
objj_msgSend(_contentView,"addSubview:",_saturationValue);
_brightnessLabel=objj_msgSend(objj_msgSend(CPTextField,"alloc"),"initWithFrame:",CGRectMake(0,196,15,20));
objj_msgSend(_brightnessLabel,"setStringValue:","B");
objj_msgSend(_brightnessLabel,"setTextColor:",objj_msgSend(CPColor,"blackColor"));
_brightnessSlider=objj_msgSend(objj_msgSend(CPSlider,"alloc"),"initWithFrame:",CGRectMake(15,194,aFrame.size.width-70,20));
objj_msgSend(_brightnessSlider,"setMaxValue:",100);
objj_msgSend(_brightnessSlider,"setMinValue:",0);
objj_msgSend(_brightnessSlider,"setTarget:",_7);
objj_msgSend(_brightnessSlider,"setAction:",sel_getUid("sliderChanged:"));
objj_msgSend(_brightnessSlider,"setAutoresizingMask:",CPViewWidthSizable);
_brightnessValue=objj_msgSend(objj_msgSend(CPTextField,"alloc"),"initWithFrame:",CGRectMake(aFrame.size.width-45,190,45,28));
objj_msgSend(_brightnessValue,"setAutoresizingMask:",CPViewMinXMargin);
objj_msgSend(_brightnessValue,"setEditable:",YES);
objj_msgSend(_brightnessValue,"setBezeled:",YES);
objj_msgSend(_brightnessValue,"setDelegate:",_7);
objj_msgSend(_contentView,"addSubview:",_brightnessValue);
_hexLabel=objj_msgSend(objj_msgSend(CPTextField,"alloc"),"initWithFrame:",CGRectMake(0,230,30,20));
objj_msgSend(_hexLabel,"setStringValue:","Hex");
objj_msgSend(_hexLabel,"setTextColor:",objj_msgSend(CPColor,"blackColor"));
_hexValue=objj_msgSend(objj_msgSend(CPTextField,"alloc"),"initWithFrame:",CGRectMake(32,225,80,28));
objj_msgSend(_hexValue,"setEditable:",YES);
objj_msgSend(_hexValue,"setBezeled:",YES);
objj_msgSend(_hexValue,"setDelegate:",_7);
objj_msgSend(_contentView,"addSubview:",_hexValue);
objj_msgSend(_contentView,"addSubview:",_rgbLabel);
objj_msgSend(_contentView,"addSubview:",_redLabel);
objj_msgSend(_contentView,"addSubview:",_greenLabel);
objj_msgSend(_contentView,"addSubview:",_blueLabel);
objj_msgSend(_contentView,"addSubview:",_redSlider);
objj_msgSend(_contentView,"addSubview:",_greenSlider);
objj_msgSend(_contentView,"addSubview:",_blueSlider);
objj_msgSend(_contentView,"addSubview:",_hsbLabel);
objj_msgSend(_contentView,"addSubview:",_hueLabel);
objj_msgSend(_contentView,"addSubview:",_saturationLabel);
objj_msgSend(_contentView,"addSubview:",_brightnessLabel);
objj_msgSend(_contentView,"addSubview:",_hueSlider);
objj_msgSend(_contentView,"addSubview:",_saturationSlider);
objj_msgSend(_contentView,"addSubview:",_brightnessSlider);
objj_msgSend(_contentView,"addSubview:",_hexLabel);
}
}),new objj_method(sel_getUid("provideNewView:"),function(_9,_a,_b){
with(_9){
if(_b){
objj_msgSend(_9,"initView");
}
return _contentView;
}
}),new objj_method(sel_getUid("currentMode"),function(_c,_d){
with(_c){
return CPSliderColorPickerMode;
}
}),new objj_method(sel_getUid("supportsMode:"),function(_e,_f,_10){
with(_e){
return (_10==CPSliderColorPickerMode)?YES:NO;
}
}),new objj_method(sel_getUid("sliderChanged:"),function(_11,_12,_13){
with(_11){
var _14,_15=objj_msgSend(_11,"colorPanel"),_16=objj_msgSend(_15,"opacity");
switch(_13){
case _hueSlider:
case _saturationSlider:
case _brightnessSlider:
_14=objj_msgSend(CPColor,"colorWithHue:saturation:brightness:alpha:",objj_msgSend(_hueSlider,"floatValue"),objj_msgSend(_saturationSlider,"floatValue"),objj_msgSend(_brightnessSlider,"floatValue"),_16);
objj_msgSend(_11,"updateRGBSliders:",_14);
break;
case _redSlider:
case _greenSlider:
case _blueSlider:
_14=objj_msgSend(CPColor,"colorWithCalibratedRed:green:blue:alpha:",objj_msgSend(_redSlider,"floatValue"),objj_msgSend(_greenSlider,"floatValue"),objj_msgSend(_blueSlider,"floatValue"),_16);
objj_msgSend(_11,"updateHSBSliders:",_14);
break;
}
objj_msgSend(_11,"updateLabels");
objj_msgSend(_11,"updateHex:",_14);
objj_msgSend(_15,"setColor:",_14);
}
}),new objj_method(sel_getUid("setColor:"),function(_17,_18,_19){
with(_17){
objj_msgSend(_17,"updateRGBSliders:",_19);
objj_msgSend(_17,"updateHSBSliders:",_19);
objj_msgSend(_17,"updateHex:",_19);
objj_msgSend(_17,"updateLabels");
}
}),new objj_method(sel_getUid("updateHSBSliders:"),function(_1a,_1b,_1c){
with(_1a){
var hsb=objj_msgSend(_1c,"hsbComponents");
objj_msgSend(_hueSlider,"setFloatValue:",hsb[0]);
objj_msgSend(_saturationSlider,"setFloatValue:",hsb[1]);
objj_msgSend(_brightnessSlider,"setFloatValue:",hsb[2]);
}
}),new objj_method(sel_getUid("updateHex:"),function(_1d,_1e,_1f){
with(_1d){
objj_msgSend(_hexValue,"setStringValue:",objj_msgSend(_1f,"hexString"));
}
}),new objj_method(sel_getUid("updateRGBSliders:"),function(_20,_21,_22){
with(_20){
var rgb=objj_msgSend(_22,"components");
objj_msgSend(_redSlider,"setFloatValue:",rgb[0]);
objj_msgSend(_greenSlider,"setFloatValue:",rgb[1]);
objj_msgSend(_blueSlider,"setFloatValue:",rgb[2]);
}
}),new objj_method(sel_getUid("updateLabels"),function(_23,_24){
with(_23){
objj_msgSend(_hueValue,"setStringValue:",ROUND(objj_msgSend(_hueSlider,"floatValue")));
objj_msgSend(_saturationValue,"setStringValue:",ROUND(objj_msgSend(_saturationSlider,"floatValue")));
objj_msgSend(_brightnessValue,"setStringValue:",ROUND(objj_msgSend(_brightnessSlider,"floatValue")));
objj_msgSend(_redValue,"setStringValue:",ROUND(objj_msgSend(_redSlider,"floatValue")*255));
objj_msgSend(_greenValue,"setStringValue:",ROUND(objj_msgSend(_greenSlider,"floatValue")*255));
objj_msgSend(_blueValue,"setStringValue:",ROUND(objj_msgSend(_blueSlider,"floatValue")*255));
}
}),new objj_method(sel_getUid("provideNewButtonImage"),function(_25,_26){
with(_25){
return objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(objj_msgSend(CPBundle,"bundleForClass:",CPColorPicker),"pathForResource:","slider_button.png"),CGSizeMake(32,32));
}
}),new objj_method(sel_getUid("provideNewAlternateButtonImage"),function(_27,_28){
with(_27){
return objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(objj_msgSend(CPBundle,"bundleForClass:",CPColorPicker),"pathForResource:","slider_button_h.png"),CGSizeMake(32,32));
}
}),new objj_method(sel_getUid("controlTextDidEndEditing:"),function(_29,_2a,_2b){
with(_29){
var _2c=objj_msgSend(_2b,"object"),_2d=objj_msgSend(objj_msgSend(_2c,"stringValue"),"stringByTrimmingWhitespace");
if(_2c===_hexValue){
var _2e=objj_msgSend(CPColor,"colorWithHexString:",_2d);
if(_2e){
objj_msgSend(_29,"setColor:",_2e);
objj_msgSend(objj_msgSend(_29,"colorPanel"),"setColor:",_2e);
}
}else{
switch(_2c){
case _redValue:
objj_msgSend(_redSlider,"setFloatValue:",MAX(MIN(ROUND(_2d),255)/255,0));
objj_msgSend(_29,"sliderChanged:",_redSlider);
break;
case _greenValue:
objj_msgSend(_greenSlider,"setFloatValue:",MAX(MIN(ROUND(_2d),255)/255,0));
objj_msgSend(_29,"sliderChanged:",_greenSlider);
break;
case _blueValue:
objj_msgSend(_blueSlider,"setFloatValue:",MAX(MIN(ROUND(_2d),255)/255,0));
objj_msgSend(_29,"sliderChanged:",_blueSlider);
break;
case _hueValue:
objj_msgSend(_hueSlider,"setFloatValue:",MAX(MIN(ROUND(_2d),360),0));
objj_msgSend(_29,"sliderChanged:",_hueSlider);
break;
case _saturationValue:
objj_msgSend(_saturationSlider,"setFloatValue:",MAX(MIN(ROUND(_2d),100),0));
objj_msgSend(_29,"sliderChanged:",_saturationSlider);
break;
case _brightnessValue:
objj_msgSend(_brightnessSlider,"setFloatValue:",MAX(MIN(ROUND(_2d),100),0));
objj_msgSend(_29,"sliderChanged:",_brightnessSlider);
break;
}
}
}
})]);
p;9;CPSound.jt;4720;@STATIC;1.0;I;21;Foundation/CPObject.jt;4675;
objj_executeFile("Foundation/CPObject.j",NO);
CPSoundLoadStateEmpty=0;
CPSoundLoadStateLoading=1;
CPSoundLoadStateCanBePlayed=2;
CPSoundLoadStateError=3;
CPSoundPlayBackStatePlay=0;
CPSoundPlayBackStateStop=1;
CPSoundPlayBackStatePause=2;
var _1=objj_allocateClassPair(CPObject,"CPSound"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_name"),new objj_ivar("_delegate"),new objj_ivar("_audioTag"),new objj_ivar("_loadStatus"),new objj_ivar("_playBackStatus")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("name"),function(_3,_4){
with(_3){
return _name;
}
}),new objj_method(sel_getUid("setName:"),function(_5,_6,_7){
with(_5){
_name=_7;
}
}),new objj_method(sel_getUid("delegate"),function(_8,_9){
with(_8){
return _delegate;
}
}),new objj_method(sel_getUid("setDelegate:"),function(_a,_b,_c){
with(_a){
_delegate=_c;
}
}),new objj_method(sel_getUid("init"),function(_d,_e){
with(_d){
if(_d=objj_msgSendSuper({receiver:_d,super_class:objj_getClass("CPSound").super_class},"init")){
_loadStatus=CPSoundLoadStateEmpty;
_loops=NO;
_audioTag=document.createElement("audio");
_audioTag.preload=YES;
_audioTag.addEventListener("canplay",function(){
objj_msgSend(objj_msgSend(CPRunLoop,"currentRunLoop"),"limitDateForMode:",CPDefaultRunLoopMode);
objj_msgSend(_d,"_soundDidload");
},true);
_audioTag.addEventListener("ended",function(){
objj_msgSend(objj_msgSend(CPRunLoop,"currentRunLoop"),"limitDateForMode:",CPDefaultRunLoopMode);
objj_msgSend(_d,"_soundDidEnd");
},true);
_audioTag.addEventListener("error",function(){
objj_msgSend(objj_msgSend(CPRunLoop,"currentRunLoop"),"limitDateForMode:",CPDefaultRunLoopMode);
objj_msgSend(_d,"_soundError");
},true);
}
return _d;
}
}),new objj_method(sel_getUid("initWithContentsOfFile:byReference:"),function(_f,_10,_11,_12){
with(_f){
if(_f=objj_msgSend(_f,"init")){
_loadStatus=CPSoundLoadStateLoading;
_audioTag.src=_11;
}
return _f;
}
}),new objj_method(sel_getUid("initWithContentsOfURL:byReference:"),function(_13,_14,_15,_16){
with(_13){
return objj_msgSend(_13,"initWithContentsOfFile:byReference:",objj_msgSend(_15,"absoluteString"),NO);
}
}),new objj_method(sel_getUid("initWithData:"),function(_17,_18,_19){
with(_17){
if(_17=objj_msgSend(_17,"init")){
_loadStatus=CPSoundLoadStateLoading;
_audioTag.src=objj_msgSend(_19,"rawString");
}
return _17;
}
}),new objj_method(sel_getUid("_soundDidload"),function(_1a,_1b){
with(_1a){
_loadStatus=CPSoundLoadStateCanBePlayed;
}
}),new objj_method(sel_getUid("_soundDidEnd"),function(_1c,_1d){
with(_1c){
if(!objj_msgSend(_1c,"loops")){
objj_msgSend(_1c,"stop");
}
}
}),new objj_method(sel_getUid("_soundError"),function(_1e,_1f){
with(_1e){
_loadStatus=CPSoundLoadStateError;
CPLog.error("Cannot load sound. Maybe the format of your sound is not compatible with your browser.");
}
}),new objj_method(sel_getUid("play"),function(_20,_21){
with(_20){
if((_loadStatus!==CPSoundLoadStateCanBePlayed)||(_playBackStatus===CPSoundPlayBackStatePlay)){
return NO;
}
_audioTag.play();
_playBackStatus=CPSoundPlayBackStatePlay;
return YES;
}
}),new objj_method(sel_getUid("stop"),function(_22,_23){
with(_22){
if((_loadStatus!==CPSoundLoadStateCanBePlayed)||(_playBackStatus===CPSoundPlayBackStateStop)){
return NO;
}
_audioTag.pause();
_audioTag.currentTime=0;
_playBackStatus=CPSoundPlayBackStateStop;
if(_delegate&&objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("sound:didFinishPlaying:"))){
objj_msgSend(_delegate,"sound:didFinishPlaying:",_22,YES);
}
return YES;
}
}),new objj_method(sel_getUid("pause"),function(_24,_25){
with(_24){
if((_loadStatus!==CPSoundLoadStateCanBePlayed)||(_playBackStatus===CPSoundPlayBackStatePause)){
return NO;
}
_audioTag.pause();
_playBackStatus=CPSoundPlayBackStatePause;
return YES;
}
}),new objj_method(sel_getUid("resume"),function(_26,_27){
with(_26){
if((_loadStatus!==CPSoundLoadStateCanBePlayed)||(_playBackStatus!==CPSoundPlayBackStatePause)){
return NO;
}
_audioTag.play();
_playBackStatus=CPSoundPlayBackStatePlay;
return YES;
}
}),new objj_method(sel_getUid("loops"),function(_28,_29){
with(_28){
return _audioTag.loop;
}
}),new objj_method(sel_getUid("setLoops:"),function(_2a,_2b,_2c){
with(_2a){
_audioTag.loop=_2c;
}
}),new objj_method(sel_getUid("volume"),function(_2d,_2e){
with(_2d){
return _audioTag.volume;
}
}),new objj_method(sel_getUid("setVolume:"),function(_2f,_30,_31){
with(_2f){
if(_31>1){
_31=1;
}else{
if(_31<0){
_31=0;
}
}
_audioTag.volume=_31;
}
}),new objj_method(sel_getUid("duration"),function(_32,_33){
with(_32){
return _audioTag.duration;
}
}),new objj_method(sel_getUid("isPlaying"),function(_34,_35){
with(_34){
return (_playBackStatus===CPSoundPlayBackStatePlay);
}
})]);
p;13;CPSplitView.jt;22624;@STATIC;1.0;i;13;CPButtonBar.ji;9;CPImage.ji;8;CPView.jt;22561;
objj_executeFile("CPButtonBar.j",YES);
objj_executeFile("CPImage.j",YES);
objj_executeFile("CPView.j",YES);
CPSplitViewDidResizeSubviewsNotification="CPSplitViewDidResizeSubviewsNotification";
CPSplitViewWillResizeSubviewsNotification="CPSplitViewWillResizeSubviewsNotification";
var _1=nil,_2=nil;
var _3=objj_allocateClassPair(CPView,"CPSplitView"),_4=_3.isa;
class_addIvars(_3,[new objj_ivar("_delegate"),new objj_ivar("_isVertical"),new objj_ivar("_isPaneSplitter"),new objj_ivar("_currentDivider"),new objj_ivar("_initialOffset"),new objj_ivar("_preCollapsePosition"),new objj_ivar("_originComponent"),new objj_ivar("_sizeComponent"),new objj_ivar("_DOMDividerElements"),new objj_ivar("_dividerImagePath"),new objj_ivar("_drawingDivider"),new objj_ivar("_needsResizeSubviews"),new objj_ivar("_buttonBars")]);
objj_registerClassPair(_3);
class_addMethods(_3,[new objj_method(sel_getUid("initWithFrame:"),function(_5,_6,_7){
with(_5){
if(_5=objj_msgSendSuper({receiver:_5,super_class:objj_getClass("CPSplitView").super_class},"initWithFrame:",_7)){
_currentDivider=CPNotFound;
_DOMDividerElements=[];
_buttonBars=[];
objj_msgSend(_5,"_setVertical:",YES);
}
return _5;
}
}),new objj_method(sel_getUid("dividerThickness"),function(_8,_9){
with(_8){
return objj_msgSend(_8,"currentValueForThemeAttribute:",objj_msgSend(_8,"isPaneSplitter")?"pane-divider-thickness":"divider-thickness");
}
}),new objj_method(sel_getUid("isVertical"),function(_a,_b){
with(_a){
return _isVertical;
}
}),new objj_method(sel_getUid("setVertical:"),function(_c,_d,_e){
with(_c){
if(!objj_msgSend(_c,"_setVertical:",_e)){
return;
}
var _f=objj_msgSend(_c,"frame"),_10=objj_msgSend(_c,"dividerThickness");
objj_msgSend(_c,"_postNotificationWillResize");
var _11=ROUND((_f.size[_sizeComponent]-_10*(_subviews.length-1))/_subviews.length),_12=0,_13=_subviews.length;
if(objj_msgSend(_c,"isVertical")){
for(;_12<_13;++_12){
objj_msgSend(_subviews[_12],"setFrame:",CGRectMake(ROUND((_11+_10)*_12),0,_11,_f.size.height));
}
}else{
for(;_12<_13;++_12){
objj_msgSend(_subviews[_12],"setFrame:",CGRectMake(0,ROUND((_11+_10)*_12),_f.size.width,_11));
}
}
objj_msgSend(_c,"setNeedsDisplay:",YES);
objj_msgSend(_c,"_postNotificationDidResize");
}
}),new objj_method(sel_getUid("_setVertical:"),function(_14,_15,_16){
with(_14){
var _17=(_isVertical!=_16);
_isVertical=_16;
_originComponent=objj_msgSend(_14,"isVertical")?"x":"y";
_sizeComponent=objj_msgSend(_14,"isVertical")?"width":"height";
_dividerImagePath=objj_msgSend(_14,"isVertical")?objj_msgSend(_2,"filename"):objj_msgSend(_1,"filename");
return _17;
}
}),new objj_method(sel_getUid("isPaneSplitter"),function(_18,_19){
with(_18){
return _isPaneSplitter;
}
}),new objj_method(sel_getUid("setIsPaneSplitter:"),function(_1a,_1b,_1c){
with(_1a){
if(_isPaneSplitter==_1c){
return;
}
_isPaneSplitter=_1c;
if(_DOMDividerElements[_drawingDivider]){
objj_msgSend(_1a,"_setupDOMDivider");
}
_needsResizeSubviews=YES;
objj_msgSend(_1a,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("didAddSubview:"),function(_1d,_1e,_1f){
with(_1d){
_needsResizeSubviews=YES;
}
}),new objj_method(sel_getUid("isSubviewCollapsed:"),function(_20,_21,_22){
with(_20){
return objj_msgSend(_22,"frame").size[_sizeComponent]<1?YES:NO;
}
}),new objj_method(sel_getUid("rectOfDividerAtIndex:"),function(_23,_24,_25){
with(_23){
var _26=objj_msgSend(_subviews[_25],"frame"),_27=CGRectMakeZero();
_27.size=objj_msgSend(_23,"frame").size;
_27.size[_sizeComponent]=objj_msgSend(_23,"dividerThickness");
_27.origin[_originComponent]=_26.origin[_originComponent]+_26.size[_sizeComponent];
return _27;
}
}),new objj_method(sel_getUid("effectiveRectOfDividerAtIndex:"),function(_28,_29,_2a){
with(_28){
var _2b=objj_msgSend(_28,"rectOfDividerAtIndex:",_2a),_2c=2;
_2b.size[_sizeComponent]+=_2c*2;
_2b.origin[_originComponent]-=_2c;
return _2b;
}
}),new objj_method(sel_getUid("drawRect:"),function(_2d,_2e,_2f){
with(_2d){
var _30=objj_msgSend(_subviews,"count")-1;
while((_30--)>0){
_drawingDivider=_30;
objj_msgSend(_2d,"drawDividerInRect:",objj_msgSend(_2d,"rectOfDividerAtIndex:",_30));
}
}
}),new objj_method(sel_getUid("willRemoveSubview:"),function(_31,_32,_33){
with(_31){
var _34=_DOMDividerElements.pop();
if(_34){
_DOMElement.removeChild(_34);
}
_needsResizeSubviews=YES;
objj_msgSend(_31,"setNeedsLayout");
objj_msgSend(_31,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("layoutSubviews"),function(_35,_36){
with(_35){
objj_msgSend(_35,"_adjustSubviewsWithCalculatedSize");
}
}),new objj_method(sel_getUid("drawDividerInRect:"),function(_37,_38,_39){
with(_37){
if(!_DOMDividerElements[_drawingDivider]){
_DOMDividerElements[_drawingDivider]=document.createElement("div");
_DOMDividerElements[_drawingDivider].style.position="absolute";
_DOMDividerElements[_drawingDivider].style.backgroundRepeat="repeat";
_DOMElement.appendChild(_DOMDividerElements[_drawingDivider]);
}
objj_msgSend(_37,"_setupDOMDivider");
if(NULL){
var _3a={x:CGPointMake((_39.origin.x),(_39.origin.y)).x*NULL.a+CGPointMake((_39.origin.x),(_39.origin.y)).y*NULL.c+NULL.tx,y:CGPointMake((_39.origin.x),(_39.origin.y)).x*NULL.b+CGPointMake((_39.origin.x),(_39.origin.y)).y*NULL.d+NULL.ty};
}else{
var _3a={x:(_39.origin.x),y:(_39.origin.y)};
}
_DOMDividerElements[_drawingDivider].style.left=ROUND(_3a.x)+"px";
_DOMDividerElements[_drawingDivider].style.top=ROUND(_3a.y)+"px";
_DOMDividerElements[_drawingDivider].style.width=MAX(0,ROUND((_39.size.width)))+"px";
_DOMDividerElements[_drawingDivider].style.height=MAX(0,ROUND((_39.size.height)))+"px";
}
}),new objj_method(sel_getUid("_setupDOMDivider"),function(_3b,_3c){
with(_3b){
if(_isPaneSplitter){
_DOMDividerElements[_drawingDivider].style.backgroundColor="";
_DOMDividerElements[_drawingDivider].style.backgroundImage="url('"+_dividerImagePath+"')";
}else{
_DOMDividerElements[_drawingDivider].style.backgroundColor=objj_msgSend(objj_msgSend(_3b,"currentValueForThemeAttribute:","pane-divider-color"),"cssString");
_DOMDividerElements[_drawingDivider].style.backgroundImage="";
}
}
}),new objj_method(sel_getUid("viewWillDraw"),function(_3d,_3e){
with(_3d){
objj_msgSend(_3d,"_adjustSubviewsWithCalculatedSize");
}
}),new objj_method(sel_getUid("_adjustSubviewsWithCalculatedSize"),function(_3f,_40){
with(_3f){
if(!_needsResizeSubviews){
return;
}
_needsResizeSubviews=NO;
var _41=objj_msgSend(_3f,"subviews"),_42=_41.length,_43=CGSizeMakeZero();
if(objj_msgSend(_3f,"isVertical")){
_43.width+=objj_msgSend(_3f,"dividerThickness")*(_42-1);
_43.height=CGRectGetHeight(objj_msgSend(_3f,"frame"));
}else{
_43.width=CGRectGetWidth(objj_msgSend(_3f,"frame"));
_43.height+=objj_msgSend(_3f,"dividerThickness")*(_42-1);
}
while(_42--){
_43[_sizeComponent]+=objj_msgSend(_41[_42],"frame").size[_sizeComponent];
}
objj_msgSend(_3f,"resizeSubviewsWithOldSize:",_43);
}
}),new objj_method(sel_getUid("cursorAtPoint:hitDividerAtIndex:"),function(_44,_45,_46,_47){
with(_44){
var _48=objj_msgSend(_subviews[_47],"frame"),_49=_48.origin[_originComponent]+_48.size[_sizeComponent],_4a=objj_msgSend(_44,"effectiveRectOfDividerAtIndex:",_47),_4b=_buttonBars[_47],_4c=null,_4d=null;
if(_4b!=null){
_4c=objj_msgSend(_4b,"resizeControlFrame");
_4c.origin=objj_msgSend(_44,"convertPoint:fromView:",_4c.origin,_4b);
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("splitView:effectiveRect:forDrawnRect:ofDividerAtIndex:"))){
_4a=objj_msgSend(_delegate,"splitView:effectiveRect:forDrawnRect:ofDividerAtIndex:",_44,_4a,_4a,_47);
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("splitView:additionalEffectiveRectOfDividerAtIndex:"))){
_4d=objj_msgSend(_delegate,"splitView:additionalEffectiveRectOfDividerAtIndex:",_44,_47);
}
return CGRectContainsPoint(_4a,_46)||(_4d&&CGRectContainsPoint(_4d,_46))||(_4c&&CGRectContainsPoint(_4c,_46));
}
}),new objj_method(sel_getUid("hitTest:"),function(_4e,_4f,_50){
with(_4e){
if(objj_msgSend(_4e,"isHidden")||!objj_msgSend(_4e,"hitTests")||!CGRectContainsPoint(objj_msgSend(_4e,"frame"),_50)){
return nil;
}
var _51=objj_msgSend(_4e,"convertPoint:fromView:",_50,objj_msgSend(_4e,"superview")),_52=objj_msgSend(_subviews,"count")-1;
for(var i=0;i<_52;i++){
if(objj_msgSend(_4e,"cursorAtPoint:hitDividerAtIndex:",_51,i)){
return _4e;
}
}
return objj_msgSendSuper({receiver:_4e,super_class:objj_getClass("CPSplitView").super_class},"hitTest:",_50);
}
}),new objj_method(sel_getUid("trackDivider:"),function(_53,_54,_55){
with(_53){
var _56=objj_msgSend(_55,"type");
if(_56==CPLeftMouseUp){
if(_currentDivider!=CPNotFound){
_currentDivider=CPNotFound;
objj_msgSend(_53,"_updateResizeCursor:",_55);
objj_msgSend(_53,"_postNotificationDidResize");
}
return;
}
if(_56==CPLeftMouseDown){
var _57=objj_msgSend(_53,"convertPoint:fromView:",objj_msgSend(_55,"locationInWindow"),nil);
_currentDivider=CPNotFound;
var _58=objj_msgSend(_subviews,"count")-1;
for(var i=0;i<_58;i++){
var _59=objj_msgSend(_subviews[i],"frame"),_5a=_59.origin[_originComponent]+_59.size[_sizeComponent];
if(objj_msgSend(_53,"cursorAtPoint:hitDividerAtIndex:",_57,i)){
if(objj_msgSend(_55,"clickCount")==2&&objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("splitView:canCollapseSubview:"))&&objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("splitView:shouldCollapseSubview:forDoubleClickOnDividerAtIndex:"))){
var _5b=objj_msgSend(_53,"minPossiblePositionOfDividerAtIndex:",i),_5c=objj_msgSend(_53,"maxPossiblePositionOfDividerAtIndex:",i);
if(objj_msgSend(_delegate,"splitView:canCollapseSubview:",_53,_subviews[i])&&objj_msgSend(_delegate,"splitView:shouldCollapseSubview:forDoubleClickOnDividerAtIndex:",_53,_subviews[i],i)){
if(objj_msgSend(_53,"isSubviewCollapsed:",_subviews[i])){
objj_msgSend(_53,"setPosition:ofDividerAtIndex:",_preCollapsePosition?_preCollapsePosition:(_5b+(_5c-_5b)/2),i);
}else{
objj_msgSend(_53,"setPosition:ofDividerAtIndex:",_5b,i);
}
}else{
if(objj_msgSend(_delegate,"splitView:canCollapseSubview:",_53,_subviews[i+1])&&objj_msgSend(_delegate,"splitView:shouldCollapseSubview:forDoubleClickOnDividerAtIndex:",_53,_subviews[i+1],i)){
if(objj_msgSend(_53,"isSubviewCollapsed:",_subviews[i+1])){
objj_msgSend(_53,"setPosition:ofDividerAtIndex:",_preCollapsePosition?_preCollapsePosition:(_5b+(_5c-_5b)/2),i);
}else{
objj_msgSend(_53,"setPosition:ofDividerAtIndex:",_5c,i);
}
}
}
}else{
_currentDivider=i;
_initialOffset=_5a-_57[_originComponent];
objj_msgSend(_53,"_postNotificationWillResize");
}
}
}
if(_currentDivider===CPNotFound){
return;
}
}else{
if(_56==CPLeftMouseDragged&&_currentDivider!=CPNotFound){
var _57=objj_msgSend(_53,"convertPoint:fromView:",objj_msgSend(_55,"locationInWindow"),nil);
objj_msgSend(_53,"setPosition:ofDividerAtIndex:",(_57[_originComponent]+_initialOffset),_currentDivider);
objj_msgSend(_53,"_updateResizeCursor:",_55);
}
}
objj_msgSend(CPApp,"setTarget:selector:forNextEventMatchingMask:untilDate:inMode:dequeue:",_53,sel_getUid("trackDivider:"),CPLeftMouseDraggedMask|CPLeftMouseUpMask,nil,nil,YES);
}
}),new objj_method(sel_getUid("mouseDown:"),function(_5d,_5e,_5f){
with(_5d){
objj_msgSend(_5d,"trackDivider:",_5f);
}
}),new objj_method(sel_getUid("viewDidMoveToWindow"),function(_60,_61){
with(_60){
}
}),new objj_method(sel_getUid("mouseEntered:"),function(_62,_63,_64){
with(_62){
if(_currentDivider==CPNotFound){
objj_msgSend(_62,"_updateResizeCursor:",_64);
}
}
}),new objj_method(sel_getUid("mouseMoved:"),function(_65,_66,_67){
with(_65){
if(_currentDivider==CPNotFound){
objj_msgSend(_65,"_updateResizeCursor:",_67);
}
}
}),new objj_method(sel_getUid("mouseExited:"),function(_68,_69,_6a){
with(_68){
if(_currentDivider==CPNotFound){
objj_msgSend(objj_msgSend(CPCursor,"arrowCursor"),"set");
}
}
}),new objj_method(sel_getUid("_updateResizeCursor:"),function(_6b,_6c,_6d){
with(_6b){
var _6e=objj_msgSend(_6b,"convertPoint:fromView:",objj_msgSend(_6d,"locationInWindow"),nil);
if(objj_msgSend(_6d,"type")===CPLeftMouseUp&&!objj_msgSend(objj_msgSend(_6b,"window"),"acceptsMouseMovedEvents")){
objj_msgSend(objj_msgSend(CPCursor,"arrowCursor"),"set");
return;
}
for(var i=0,_6f=objj_msgSend(_subviews,"count")-1;i<_6f;i++){
if(_currentDivider===i||(_currentDivider==CPNotFound&&objj_msgSend(_6b,"cursorAtPoint:hitDividerAtIndex:",_6e,i))){
var _70=objj_msgSend(_subviews[i],"frame"),_71=_70.size[_sizeComponent],_72=_70.origin[_originComponent]+_71,_73=objj_msgSend(_6b,"_realPositionForPosition:ofDividerAtIndex:",_72-1,i)<_72,_74=objj_msgSend(_6b,"_realPositionForPosition:ofDividerAtIndex:",_72+1,i)>_72,_75=objj_msgSend(CPCursor,"arrowCursor");
if(_71===0){
_74=YES;
}else{
if(!_73&&objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("splitView:canCollapseSubview:"))&&objj_msgSend(_delegate,"splitView:canCollapseSubview:",_6b,_subviews[i])){
_73=YES;
}
}
if(_isVertical&&_73&&_74){
_75=objj_msgSend(CPCursor,"resizeLeftRightCursor");
}else{
if(_isVertical&&_73){
_75=objj_msgSend(CPCursor,"resizeLeftCursor");
}else{
if(_isVertical&&_74){
_75=objj_msgSend(CPCursor,"resizeRightCursor");
}else{
if(_73&&_74){
_75=objj_msgSend(CPCursor,"resizeUpDownCursor");
}else{
if(_73){
_75=objj_msgSend(CPCursor,"resizeUpCursor");
}else{
if(_74){
_75=objj_msgSend(CPCursor,"resizeDownCursor");
}
}
}
}
}
}
objj_msgSend(_75,"set");
return;
}
}
objj_msgSend(objj_msgSend(CPCursor,"arrowCursor"),"set");
}
}),new objj_method(sel_getUid("maxPossiblePositionOfDividerAtIndex:"),function(_76,_77,_78){
with(_76){
var _79=objj_msgSend(_subviews[_78+1],"frame");
if(_78+1<objj_msgSend(_subviews,"count")-1){
return _79.origin[_originComponent]+_79.size[_sizeComponent]-objj_msgSend(_76,"dividerThickness");
}else{
return objj_msgSend(_76,"frame").size[_sizeComponent]-objj_msgSend(_76,"dividerThickness");
}
}
}),new objj_method(sel_getUid("minPossiblePositionOfDividerAtIndex:"),function(_7a,_7b,_7c){
with(_7a){
if(_7c>0){
var _7d=objj_msgSend(_subviews[_7c-1],"frame");
return _7d.origin[_originComponent]+_7d.size[_sizeComponent]+objj_msgSend(_7a,"dividerThickness");
}else{
return 0;
}
}
}),new objj_method(sel_getUid("_realPositionForPosition:ofDividerAtIndex:"),function(_7e,_7f,_80,_81){
with(_7e){
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("splitView:constrainSplitPosition:ofSubviewAt:"))){
_80=objj_msgSend(_delegate,"splitView:constrainSplitPosition:ofSubviewAt:",_7e,_80,_81);
}
var _82=objj_msgSend(_7e,"maxPossiblePositionOfDividerAtIndex:",_81),_83=objj_msgSend(_7e,"minPossiblePositionOfDividerAtIndex:",_81),_84=_82,_85=_83;
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("splitView:constrainMinCoordinate:ofSubviewAt:"))){
_85=objj_msgSend(_delegate,"splitView:constrainMinCoordinate:ofSubviewAt:",_7e,_83,_81);
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("splitView:constrainMaxCoordinate:ofSubviewAt:"))){
_84=objj_msgSend(_delegate,"splitView:constrainMaxCoordinate:ofSubviewAt:",_7e,_82,_81);
}
var _86=_subviews[_81],_87=MAX(MIN(_80,_84),_85);
if(_80<_83+(_85-_83)/2){
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("splitView:canCollapseSubview:"))){
if(objj_msgSend(_delegate,"splitView:canCollapseSubview:",_7e,_86)){
_87=_83;
}
}
}
return _87;
}
}),new objj_method(sel_getUid("setPosition:ofDividerAtIndex:"),function(_88,_89,_8a,_8b){
with(_88){
objj_msgSend(_88,"_adjustSubviewsWithCalculatedSize");
var _8c=objj_msgSend(_88,"_realPositionForPosition:ofDividerAtIndex:",_8a,_8b);
var _8d=_subviews[_8b],_8e=objj_msgSend(_8d,"frame"),_8f=_subviews[_8b+1],_90=objj_msgSend(_8f,"frame");
_preCollapsePosition=0;
var _91=_8e.size[_sizeComponent];
_8e.size[_sizeComponent]=_8c-_8e.origin[_originComponent];
if(_91!==0&&_8e.size[_sizeComponent]===0){
_preCollapsePosition=_91;
}
objj_msgSend(_subviews[_8b],"setFrame:",_8e);
_91=_90.size[_sizeComponent];
_90.size[_sizeComponent]=_90.origin[_originComponent]+_90.size[_sizeComponent]-_8c-objj_msgSend(_88,"dividerThickness");
if(_91!==0&&_90.size[_sizeComponent]===0){
_preCollapsePosition=_91;
}
_90.origin[_originComponent]=_8c+objj_msgSend(_88,"dividerThickness");
objj_msgSend(_subviews[_8b+1],"setFrame:",_90);
objj_msgSend(_88,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("setFrameSize:"),function(_92,_93,_94){
with(_92){
objj_msgSend(_92,"_adjustSubviewsWithCalculatedSize");
objj_msgSendSuper({receiver:_92,super_class:objj_getClass("CPSplitView").super_class},"setFrameSize:",_94);
objj_msgSend(_92,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("resizeSubviewsWithOldSize:"),function(_95,_96,_97){
with(_95){
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("splitView:resizeSubviewsWithOldSize:"))){
objj_msgSend(_delegate,"splitView:resizeSubviewsWithOldSize:",_95,_97);
return;
}
objj_msgSend(_95,"_postNotificationWillResize");
var _98=0,_99=objj_msgSend(_subviews,"count"),_9a=objj_msgSend(_95,"bounds"),_9b=objj_msgSend(_95,"dividerThickness"),_9c=_99-1,_9d=0,_9e=0,_9f=-1,_a0=0,_a1=objj_msgSend(_95,"isVertical");
for(_98=0;_98<_99;++_98){
var _a2=_subviews[_98],_a3=_a1?objj_msgSend(_a2,"autoresizingMask")&CPViewWidthSizable:objj_msgSend(_a2,"autoresizingMask")&CPViewHeightSizable;
if(_a3){
_9d+=objj_msgSend(_a2,"frame").size[_sizeComponent];
_9f=_98;
_a0++;
}
}
if(_a0===_99){
_9d=0;
}
var _9e=_9d?_9a.size[_sizeComponent]-_9d:0,_a4=_9a.size[_sizeComponent]-_97[_sizeComponent],_a5=(_97[_sizeComponent]-_9c*_9b-_9e),_a6=_a5<=0?0:(_9a.size[_sizeComponent]-_9c*_9b-_9e)/_a5;
for(_98=0;_98<_99;++_98){
var _a2=_subviews[_98],_a7=CGRectMakeCopy(_9a),_a3=_a1?objj_msgSend(_a2,"autoresizingMask")&CPViewWidthSizable:objj_msgSend(_a2,"autoresizingMask")&CPViewHeightSizable;
if(_98+1===_99){
_a7.size[_sizeComponent]=_9a.size[_sizeComponent]-_a7.origin[_originComponent];
}else{
if(_9d&&_a3&&_9f===_98){
_a7.size[_sizeComponent]=MAX(0,ROUND(objj_msgSend(_a2,"frame").size[_sizeComponent]+_a4));
}else{
if(_a3||!_9d){
_a7.size[_sizeComponent]=MAX(0,ROUND(_a6*objj_msgSend(_a2,"frame").size[_sizeComponent]));
_a4-=(_a7.size[_sizeComponent]-objj_msgSend(_a2,"frame").size[_sizeComponent]);
}else{
if(_9d&&!_a3){
_a7.size[_sizeComponent]=objj_msgSend(_a2,"frame").size[_sizeComponent];
}
}
}
}
_9a.origin[_originComponent]+=_a7.size[_sizeComponent]+_9b;
objj_msgSend(_a2,"setFrame:",_a7);
}
objj_msgSend(_95,"_postNotificationDidResize");
}
}),new objj_method(sel_getUid("setDelegate:"),function(_a8,_a9,_aa){
with(_a8){
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("splitViewDidResizeSubviews:"))){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"removeObserver:name:object:",_delegate,CPSplitViewDidResizeSubviewsNotification,_a8);
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("splitViewWillResizeSubviews:"))){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"removeObserver:name:object:",_delegate,CPSplitViewWillResizeSubviewsNotification,_a8);
}
_delegate=_aa;
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("splitViewDidResizeSubviews:"))){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"addObserver:selector:name:object:",_delegate,sel_getUid("splitViewDidResizeSubviews:"),CPSplitViewDidResizeSubviewsNotification,_a8);
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("splitViewWillResizeSubviews:"))){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"addObserver:selector:name:object:",_delegate,sel_getUid("splitViewWillResizeSubviews:"),CPSplitViewWillResizeSubviewsNotification,_a8);
}
}
}),new objj_method(sel_getUid("setButtonBar:forDividerAtIndex:"),function(_ab,_ac,_ad,_ae){
with(_ab){
if(!_ad){
_buttonBars[_ae]=nil;
return;
}
var _af=objj_msgSend(_ad,"superview"),_b0=_ad;
while(_af&&_af!==_ab){
_b0=_af;
_af=objj_msgSend(_af,"superview");
}
if(_af!==_ab){
objj_msgSend(CPException,"raise:reason:",CPInvalidArgumentException,"CPSplitView button bar must be a subview of the split view.");
}
var _b1=objj_msgSend(objj_msgSend(_ab,"subviews"),"indexOfObject:",_b0);
objj_msgSend(_ad,"setHasResizeControl:",YES);
objj_msgSend(_ad,"setResizeControlIsLeftAligned:",_ae<_b1);
_buttonBars[_ae]=_ad;
}
}),new objj_method(sel_getUid("_postNotificationWillResize"),function(_b2,_b3){
with(_b2){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:",CPSplitViewWillResizeSubviewsNotification,_b2);
}
}),new objj_method(sel_getUid("_postNotificationDidResize"),function(_b4,_b5){
with(_b4){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:",CPSplitViewDidResizeSubviewsNotification,_b4);
}
})]);
class_addMethods(_4,[new objj_method(sel_getUid("defaultThemeClass"),function(_b6,_b7){
with(_b6){
return "splitview";
}
}),new objj_method(sel_getUid("themeAttributes"),function(_b8,_b9){
with(_b8){
return objj_msgSend(CPDictionary,"dictionaryWithObjects:forKeys:",[1,10,objj_msgSend(CPColor,"grayColor")],["divider-thickness","pane-divider-thickness","pane-divider-color"]);
}
}),new objj_method(sel_getUid("initialize"),function(_ba,_bb){
with(_ba){
if(_ba!=objj_msgSend(CPSplitView,"class")){
return;
}
var _bc=objj_msgSend(CPBundle,"bundleForClass:",_ba);
_1=objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_bc,"pathForResource:","CPSplitView/CPSplitViewHorizontal.png"),CPSizeMake(5,10));
_2=objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_bc,"pathForResource:","CPSplitView/CPSplitViewVertical.png"),CPSizeMake(10,5));
}
})]);
var _bd="CPSplitViewDelegateKey",_be="CPSplitViewIsVerticalKey",_bf="CPSplitViewIsPaneSplitterKey",_c0="CPSplitViewButtonBarsKey";
var _3=objj_getClass("CPSplitView");
if(!_3){
throw new SyntaxError("*** Could not find definition for class \"CPSplitView\"");
}
var _4=_3.isa;
class_addMethods(_3,[new objj_method(sel_getUid("initWithCoder:"),function(_c1,_c2,_c3){
with(_c1){
_c1=objj_msgSendSuper({receiver:_c1,super_class:objj_getClass("CPSplitView").super_class},"initWithCoder:",_c3);
if(_c1){
_currentDivider=CPNotFound;
_DOMDividerElements=[];
_buttonBars=objj_msgSend(_c3,"decodeObjectForKey:",_c0)||[];
objj_msgSend(_c1,"setDelegate:",objj_msgSend(_c3,"decodeObjectForKey:",_bd));
_isPaneSplitter=objj_msgSend(_c3,"decodeBoolForKey:",_bf);
objj_msgSend(_c1,"_setVertical:",objj_msgSend(_c3,"decodeBoolForKey:",_be));
}
return _c1;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_c4,_c5,_c6){
with(_c4){
objj_msgSendSuper({receiver:_c4,super_class:objj_getClass("CPSplitView").super_class},"encodeWithCoder:",_c6);
objj_msgSend(_c6,"encodeConditionalObject:forKey:",_delegate,_bd);
objj_msgSend(_c6,"encodeBool:forKey:",_isVertical,_be);
objj_msgSend(_c6,"encodeBool:forKey:",_isPaneSplitter,_bf);
}
})]);
p;11;CPStepper.jt;7918;@STATIC;1.0;I;18;AppKit/CPControl.jI;17;AppKit/CPButton.jI;20;AppKit/CPTextField.jt;7829;
objj_executeFile("AppKit/CPControl.j",NO);
objj_executeFile("AppKit/CPButton.j",NO);
objj_executeFile("AppKit/CPTextField.j",NO);
var _1=CPSizeMake(19,13);
var _2=objj_allocateClassPair(CPControl,"CPStepper"),_3=_2.isa;
class_addIvars(_2,[new objj_ivar("_valueWraps"),new objj_ivar("_increment"),new objj_ivar("_maxValue"),new objj_ivar("_minValue"),new objj_ivar("_buttonDown"),new objj_ivar("_buttonUp")]);
objj_registerClassPair(_2);
class_addMethods(_2,[new objj_method(sel_getUid("valueWraps"),function(_4,_5){
with(_4){
return _valueWraps;
}
}),new objj_method(sel_getUid("setValueWraps:"),function(_6,_7,_8){
with(_6){
_valueWraps=_8;
}
}),new objj_method(sel_getUid("increment"),function(_9,_a){
with(_9){
return _increment;
}
}),new objj_method(sel_getUid("setIncrement:"),function(_b,_c,_d){
with(_b){
_increment=_d;
}
}),new objj_method(sel_getUid("maxValue"),function(_e,_f){
with(_e){
return _maxValue;
}
}),new objj_method(sel_getUid("setMaxValue:"),function(_10,_11,_12){
with(_10){
_maxValue=_12;
}
}),new objj_method(sel_getUid("minValue"),function(_13,_14){
with(_13){
return _minValue;
}
}),new objj_method(sel_getUid("setMinValue:"),function(_15,_16,_17){
with(_15){
_minValue=_17;
}
}),new objj_method(sel_getUid("initWithFrame:"),function(_18,_19,_1a){
with(_18){
if(_18=objj_msgSendSuper({receiver:_18,super_class:objj_getClass("CPStepper").super_class},"initWithFrame:",_1a)){
_maxValue=59;
_minValue=0;
_increment=1;
_valueWraps=YES;
objj_msgSend(_18,"setDoubleValue:",0);
_buttonUp=objj_msgSend(objj_msgSend(CPButton,"alloc"),"initWithFrame:",CPRectMake(_1a.size.width-_1.width,0,_1.width,_1.height));
objj_msgSend(_buttonUp,"setContinuous:",YES);
objj_msgSend(_buttonUp,"setTarget:",_18);
objj_msgSend(_buttonUp,"setAction:",sel_getUid("_buttonDidClick:"));
objj_msgSend(_buttonUp,"setAutoresizingMask:",CPViewNotSizable);
objj_msgSend(_18,"addSubview:",_buttonUp);
_buttonDown=objj_msgSend(objj_msgSend(CPButton,"alloc"),"initWithFrame:",CPRectMake(_1a.size.width-_1.width,_1.height,_1.width,_1.height-1));
objj_msgSend(_buttonDown,"setContinuous:",YES);
objj_msgSend(_buttonDown,"setTarget:",_18);
objj_msgSend(_buttonDown,"setAction:",sel_getUid("_buttonDidClick:"));
objj_msgSend(_buttonDown,"setAutoresizingMask:",CPViewNotSizable);
objj_msgSend(_18,"addSubview:",_buttonDown);
objj_msgSend(_18,"setNeedsLayout");
}
return _18;
}
}),new objj_method(sel_getUid("setEnabled:"),function(_1b,_1c,_1d){
with(_1b){
objj_msgSendSuper({receiver:_1b,super_class:objj_getClass("CPStepper").super_class},"setEnabled:",_1d);
objj_msgSend(_buttonUp,"setEnabled:",_1d);
objj_msgSend(_buttonDown,"setEnabled:",_1d);
}
}),new objj_method(sel_getUid("setFrame:"),function(_1e,_1f,_20){
with(_1e){
if(_20.size.width>=CGRectGetWidth(_20)){
objj_msgSendSuper({receiver:_1e,super_class:objj_getClass("CPStepper").super_class},"setFrame:",_20);
}
}
}),new objj_method(sel_getUid("layoutSubviews"),function(_21,_22){
with(_21){
objj_msgSend(_buttonUp,"setValue:forThemeAttribute:inState:",objj_msgSend(_21,"valueForThemeAttribute:inState:","bezel-color-up-button",CPThemeStateBordered),"bezel-color",CPThemeStateBordered);
objj_msgSend(_buttonUp,"setValue:forThemeAttribute:inState:",objj_msgSend(_21,"valueForThemeAttribute:inState:","bezel-color-up-button",CPThemeStateBordered|CPThemeStateDisabled),"bezel-color",CPThemeStateBordered|CPThemeStateDisabled);
objj_msgSend(_buttonUp,"setValue:forThemeAttribute:inState:",objj_msgSend(_21,"valueForThemeAttribute:inState:","bezel-color-up-button",CPThemeStateBordered|CPThemeStateHighlighted),"bezel-color",CPThemeStateBordered|CPThemeStateHighlighted);
objj_msgSend(_buttonDown,"setValue:forThemeAttribute:inState:",objj_msgSend(_21,"valueForThemeAttribute:inState:","bezel-color-down-button",CPThemeStateBordered),"bezel-color",CPThemeStateBordered);
objj_msgSend(_buttonDown,"setValue:forThemeAttribute:inState:",objj_msgSend(_21,"valueForThemeAttribute:inState:","bezel-color-down-button",CPThemeStateBordered|CPThemeStateDisabled),"bezel-color",CPThemeStateBordered|CPThemeStateDisabled);
objj_msgSend(_buttonDown,"setValue:forThemeAttribute:inState:",objj_msgSend(_21,"valueForThemeAttribute:inState:","bezel-color-down-button",CPThemeStateBordered|CPThemeStateHighlighted),"bezel-color",CPThemeStateBordered|CPThemeStateHighlighted);
}
}),new objj_method(sel_getUid("setAutorepeat:"),function(_23,_24,_25){
with(_23){
objj_msgSend(_buttonUp,"setContinuous:",_25);
objj_msgSend(_buttonDown,"setContinuous:",_25);
}
}),new objj_method(sel_getUid("setDoubleValue:"),function(_26,_27,_28){
with(_26){
if(_28>_maxValue){
objj_msgSendSuper({receiver:_26,super_class:objj_getClass("CPStepper").super_class},"setDoubleValue:",_valueWraps?_minValue:_maxValue);
}else{
if(_28<_minValue){
objj_msgSendSuper({receiver:_26,super_class:objj_getClass("CPStepper").super_class},"setDoubleValue:",_valueWraps?_maxValue:_minValue);
}else{
objj_msgSendSuper({receiver:_26,super_class:objj_getClass("CPStepper").super_class},"setDoubleValue:",_28);
}
}
}
}),new objj_method(sel_getUid("_buttonDidClick:"),function(_29,_2a,_2b){
with(_29){
if(!objj_msgSend(_29,"isEnabled")){
return;
}
if(_2b==_buttonUp){
objj_msgSend(_29,"setDoubleValue:",(objj_msgSend(_29,"doubleValue")+_increment));
}else{
objj_msgSend(_29,"setDoubleValue:",(objj_msgSend(_29,"doubleValue")-_increment));
}
if(_target&&_action&&objj_msgSend(_target,"respondsToSelector:",_action)){
objj_msgSend(_29,"sendAction:to:",_action,_target);
}
}
}),new objj_method(sel_getUid("performClickUp:"),function(_2c,_2d,_2e){
with(_2c){
objj_msgSend(_buttonUp,"performClick:",_2e);
}
}),new objj_method(sel_getUid("performClickDown:"),function(_2f,_30,_31){
with(_2f){
objj_msgSend(_buttonDown,"performClick:",_31);
}
})]);
class_addMethods(_3,[new objj_method(sel_getUid("stepperWithInitialValue:minValue:maxValue:"),function(_32,_33,_34,_35,_36){
with(_32){
var _37=objj_msgSend(objj_msgSend(CPStepper,"alloc"),"initWithFrame:",CPRectMake(0,0,19,25));
objj_msgSend(_37,"setDoubleValue:",_34);
objj_msgSend(_37,"setMinValue:",_35);
objj_msgSend(_37,"setMaxValue:",_36);
return _37;
}
}),new objj_method(sel_getUid("stepper"),function(_38,_39){
with(_38){
return objj_msgSend(CPStepper,"stepperWithInitialValue:minValue:maxValue:",0,0,59);
}
}),new objj_method(sel_getUid("defaultThemeClass"),function(_3a,_3b){
with(_3a){
return "stepper";
}
}),new objj_method(sel_getUid("themeAttributes"),function(_3c,_3d){
with(_3c){
return objj_msgSend(CPDictionary,"dictionaryWithObjects:forKeys:",[objj_msgSend(CPNull,"null"),objj_msgSend(CPNull,"null")],["bezel-color-up-button","bezel-color-down-button"]);
}
})]);
var _2=objj_getClass("CPStepper");
if(!_2){
throw new SyntaxError("*** Could not find definition for class \"CPStepper\"");
}
var _3=_2.isa;
class_addMethods(_2,[new objj_method(sel_getUid("initWithCoder:"),function(_3e,_3f,_40){
with(_3e){
if(_3e=objj_msgSendSuper({receiver:_3e,super_class:objj_getClass("CPStepper").super_class},"initWithCoder:",_40)){
_maxValue=objj_msgSend(_40,"decodeObjectForKey:","_maxValue");
_minValue=objj_msgSend(_40,"decodeObjectForKey:","_minValue");
_increment=objj_msgSend(_40,"decodeObjectForKey:","_increment");
_buttonUp=objj_msgSend(_40,"decodeObjectForKey:","_buttonUp");
_buttonDown=objj_msgSend(_40,"decodeObjectForKey:","_buttonDown");
}
return _3e;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_41,_42,_43){
with(_41){
objj_msgSendSuper({receiver:_41,super_class:objj_getClass("CPStepper").super_class},"encodeWithCoder:",_43);
objj_msgSend(_43,"encodeObject:forKey:",_maxValue,"_maxValue");
objj_msgSend(_43,"encodeObject:forKey:",_minValue,"_minValue");
objj_msgSend(_43,"encodeObject:forKey:",_increment,"_increment");
objj_msgSend(_43,"encodeObject:forKey:",_buttonUp,"_buttonUp");
objj_msgSend(_43,"encodeObject:forKey:",_buttonDown,"_buttonDown");
}
})]);
p;17;CPStringDrawing.jt;1148;@STATIC;1.0;I;21;Foundation/CPString.ji;18;CPPlatformString.jt;1080;
objj_executeFile("Foundation/CPString.j",NO);
objj_executeFile("CPPlatformString.j",YES);
var _1={};
CPStringSizeCachingEnabled=YES;
var _2=objj_getClass("CPString");
if(!_2){
throw new SyntaxError("*** Could not find definition for class \"CPString\"");
}
var _3=_2.isa;
class_addMethods(_2,[new objj_method(sel_getUid("cssString"),function(_4,_5){
with(_4){
return _4;
}
}),new objj_method(sel_getUid("sizeWithFont:"),function(_6,_7,_8){
with(_6){
return objj_msgSend(_6,"sizeWithFont:inWidth:",_8,NULL);
}
}),new objj_method(sel_getUid("sizeWithFont:inWidth:"),function(_9,_a,_b,_c){
with(_9){
if(!CPStringSizeCachingEnabled){
return objj_msgSend(CPPlatformString,"sizeOfString:withFont:forWidth:",_9,_b,_c);
}
var _d=_9+objj_msgSend(_b,"cssString")+_c,_e=_1[_d];
if(_e===undefined){
_e=objj_msgSend(CPPlatformString,"sizeOfString:withFont:forWidth:",_9,_b,_c);
_1[_d]=_e;
}
return CGSizeMakeCopy(_e);
}
})]);
class_addMethods(_3,[new objj_method(sel_getUid("metricsOfFont:"),function(_f,_10,_11){
with(_f){
return objj_msgSend(CPPlatformString,"metricsOfFont:",_11);
}
})]);
p;15;CPTableColumn.jt;15046;@STATIC;1.0;I;25;Foundation/CPDictionary.jI;21;Foundation/CPObject.jI;23;Foundation/CPIndexSet.jI;29;Foundation/CPSortDescriptor.jI;21;Foundation/CPString.ji;19;CPTableHeaderView.jt;14858;
objj_executeFile("Foundation/CPDictionary.j",NO);
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("Foundation/CPIndexSet.j",NO);
objj_executeFile("Foundation/CPSortDescriptor.j",NO);
objj_executeFile("Foundation/CPString.j",NO);
objj_executeFile("CPTableHeaderView.j",YES);
CPTableColumnNoResizing=0;
CPTableColumnAutoresizingMask=1<<0;
CPTableColumnUserResizingMask=1<<1;
var _1=objj_allocateClassPair(CPObject,"CPTableColumn"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_tableView"),new objj_ivar("_headerView"),new objj_ivar("_dataView"),new objj_ivar("_dataViewData"),new objj_ivar("_width"),new objj_ivar("_minWidth"),new objj_ivar("_maxWidth"),new objj_ivar("_resizingMask"),new objj_ivar("_identifier"),new objj_ivar("_isEditable"),new objj_ivar("_sortDescriptorPrototype"),new objj_ivar("_isHidden"),new objj_ivar("_headerToolTip"),new objj_ivar("_disableResizingPosting")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("disableResizingPosting"),function(_3,_4){
with(_3){
return _disableResizingPosting;
}
}),new objj_method(sel_getUid("setDisableResizingPosting:"),function(_5,_6,_7){
with(_5){
_disableResizingPosting=_7;
}
}),new objj_method(sel_getUid("init"),function(_8,_9){
with(_8){
return objj_msgSend(_8,"initWithIdentifier:","");
}
}),new objj_method(sel_getUid("initWithIdentifier:"),function(_a,_b,_c){
with(_a){
_a=objj_msgSendSuper({receiver:_a,super_class:objj_getClass("CPTableColumn").super_class},"init");
if(_a){
_dataViewData={};
_width=100;
_minWidth=10;
_maxWidth=1000000;
_resizingMask=CPTableColumnAutoresizingMask|CPTableColumnUserResizingMask;
_disableResizingPosting=NO;
objj_msgSend(_a,"setIdentifier:",_c);
var _d=objj_msgSend(objj_msgSend(_CPTableColumnHeaderView,"alloc"),"initWithFrame:",CGRectMakeZero());
objj_msgSend(_a,"setHeaderView:",_d);
objj_msgSend(_a,"setDataView:",objj_msgSend(CPTextField,"new"));
}
return _a;
}
}),new objj_method(sel_getUid("setTableView:"),function(_e,_f,_10){
with(_e){
_tableView=_10;
}
}),new objj_method(sel_getUid("tableView"),function(_11,_12){
with(_11){
return _tableView;
}
}),new objj_method(sel_getUid("_tryToResizeToWidth:"),function(_13,_14,_15){
with(_13){
var min=objj_msgSend(_13,"minWidth"),max=objj_msgSend(_13,"maxWidth"),_16=MIN(MAX(_15,min),max);
objj_msgSend(_13,"setWidth:",_16);
return _16-_15;
}
}),new objj_method(sel_getUid("setWidth:"),function(_17,_18,_19){
with(_17){
_19=+_19;
if(_width===_19){
return;
}
var _1a=MIN(MAX(_19,objj_msgSend(_17,"minWidth")),objj_msgSend(_17,"maxWidth"));
if(_width===_1a){
return;
}
var _1b=_width;
_width=_1a;
var _1c=objj_msgSend(_17,"tableView");
if(_1c){
var _1d=objj_msgSend(objj_msgSend(_1c,"tableColumns"),"indexOfObjectIdenticalTo:",_17),_1e=_1c._dirtyTableColumnRangeIndex;
if(_1e<0){
_1c._dirtyTableColumnRangeIndex=_1d;
}else{
_1c._dirtyTableColumnRangeIndex=MIN(_1d,_1c._dirtyTableColumnRangeIndex);
}
var _1f=_1c._exposedRows,_20=objj_msgSend(CPIndexSet,"indexSetWithIndexesInRange:",CPMakeRange(_1d,objj_msgSend(_1c._exposedColumns,"lastIndex")-_1d+1));
objj_msgSend(_1c,"_layoutDataViewsInRows:columns:",_1f,_20);
objj_msgSend(_1c,"tile");
if(!_disableResizingPosting){
objj_msgSend(_17,"_postDidResizeNotificationWithOldWidth:",_1b);
}
}
}
}),new objj_method(sel_getUid("width"),function(_21,_22){
with(_21){
return _width;
}
}),new objj_method(sel_getUid("setMinWidth:"),function(_23,_24,_25){
with(_23){
_25=+_25;
if(_minWidth===_25){
return;
}
_minWidth=_25;
var _26=objj_msgSend(_23,"width"),_27=MAX(_26,objj_msgSend(_23,"minWidth"));
if(_26!==_27){
objj_msgSend(_23,"setWidth:",_27);
}
}
}),new objj_method(sel_getUid("minWidth"),function(_28,_29){
with(_28){
return _minWidth;
}
}),new objj_method(sel_getUid("setMaxWidth:"),function(_2a,_2b,_2c){
with(_2a){
_2c=+_2c;
if(_maxWidth===_2c){
return;
}
_maxWidth=_2c;
var _2d=objj_msgSend(_2a,"width"),_2e=MIN(_2d,objj_msgSend(_2a,"maxWidth"));
if(_2d!==_2e){
objj_msgSend(_2a,"setWidth:",_2e);
}
}
}),new objj_method(sel_getUid("maxWidth"),function(_2f,_30){
with(_2f){
return _maxWidth;
}
}),new objj_method(sel_getUid("setResizingMask:"),function(_31,_32,_33){
with(_31){
_resizingMask=_33;
}
}),new objj_method(sel_getUid("resizingMask"),function(_34,_35){
with(_34){
return _resizingMask;
}
}),new objj_method(sel_getUid("sizeToFit"),function(_36,_37){
with(_36){
var _38=(objj_msgSend(_headerView,"frame").size.width);
if(_38<objj_msgSend(_36,"minWidth")){
objj_msgSend(_36,"setMinWidth:",_38);
}else{
if(_38>objj_msgSend(_36,"maxWidth")){
objj_msgSend(_36,"setMaxWidth:",_38);
}
}
if(_width!==_38){
objj_msgSend(_36,"setWidth:",_38);
}
}
}),new objj_method(sel_getUid("setHeaderView:"),function(_39,_3a,_3b){
with(_39){
if(!_3b){
objj_msgSend(CPException,"raise:reason:",CPInvalidArgumentException,"Attempt to set nil header view on "+objj_msgSend(_39,"description"));
}
_headerView=_3b;
var _3c=objj_msgSend(_tableView,"headerView");
objj_msgSend(_3c,"setNeedsLayout");
objj_msgSend(_3c,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("headerView"),function(_3d,_3e){
with(_3d){
return _headerView;
}
}),new objj_method(sel_getUid("setDataView:"),function(_3f,_40,_41){
with(_3f){
if(_dataView){
_dataViewData[objj_msgSend(_dataView,"UID")]=nil;
}
objj_msgSend(_41,"setThemeState:",CPThemeStateTableDataView);
_dataView=_41;
_dataViewData[objj_msgSend(_41,"UID")]=objj_msgSend(CPKeyedArchiver,"archivedDataWithRootObject:",_41);
}
}),new objj_method(sel_getUid("dataView"),function(_42,_43){
with(_42){
return _dataView;
}
}),new objj_method(sel_getUid("dataViewForRow:"),function(_44,_45,_46){
with(_44){
return objj_msgSend(_44,"dataView");
}
}),new objj_method(sel_getUid("_newDataViewForRow:"),function(_47,_48,_49){
with(_47){
var _4a=objj_msgSend(_47,"dataViewForRow:",_49),_4b=objj_msgSend(_4a,"UID");
var x=objj_msgSend(_47,"tableView")._cachedDataViews[_4b];
if(x&&x.length){
return x.pop();
}
if(!_dataViewData[_4b]){
_dataViewData[_4b]=objj_msgSend(CPKeyedArchiver,"archivedDataWithRootObject:",_4a);
}
var _4c=objj_msgSend(CPKeyedUnarchiver,"unarchiveObjectWithData:",_dataViewData[_4b]);
_4c.identifier=_4b;
objj_msgSend(_4c,"setAutoresizingMask:",CPViewNotSizable);
return _4c;
}
}),new objj_method(sel_getUid("setIdentifier:"),function(_4d,_4e,_4f){
with(_4d){
_identifier=_4f;
}
}),new objj_method(sel_getUid("identifier"),function(_50,_51){
with(_50){
return _identifier;
}
}),new objj_method(sel_getUid("setEditable:"),function(_52,_53,_54){
with(_52){
_isEditable=_54;
}
}),new objj_method(sel_getUid("isEditable"),function(_55,_56){
with(_55){
return _isEditable;
}
}),new objj_method(sel_getUid("setSortDescriptorPrototype:"),function(_57,_58,_59){
with(_57){
_sortDescriptorPrototype=_59;
}
}),new objj_method(sel_getUid("sortDescriptorPrototype"),function(_5a,_5b){
with(_5a){
return _sortDescriptorPrototype;
}
}),new objj_method(sel_getUid("setHidden:"),function(_5c,_5d,_5e){
with(_5c){
_5e=!!_5e;
if(_isHidden===_5e){
return;
}
_isHidden=_5e;
objj_msgSend(objj_msgSend(_5c,"headerView"),"setHidden:",_5e);
objj_msgSend(objj_msgSend(_5c,"tableView"),"_tableColumnVisibilityDidChange:",_5c);
}
}),new objj_method(sel_getUid("isHidden"),function(_5f,_60){
with(_5f){
return _isHidden;
}
}),new objj_method(sel_getUid("setHeaderToolTip:"),function(_61,_62,_63){
with(_61){
_headerToolTip=_63;
}
}),new objj_method(sel_getUid("headerToolTip"),function(_64,_65){
with(_64){
return _headerToolTip;
}
}),new objj_method(sel_getUid("_postDidResizeNotificationWithOldWidth:"),function(_66,_67,_68){
with(_66){
objj_msgSend(objj_msgSend(_66,"tableView"),"_didResizeTableColumn:",_66);
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:userInfo:",CPTableViewColumnDidResizeNotification,objj_msgSend(_66,"tableView"),objj_msgSend(CPDictionary,"dictionaryWithObjects:forKeys:",[_66,_68],["CPTableColumn","CPOldWidth"]));
}
})]);
var _1=objj_allocateClassPair(CPBinder,"CPTableColumnValueBinder"),_2=_1.isa;
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("setValueFor:"),function(_69,_6a,_6b){
with(_69){
var _6c=objj_msgSend(_source,"tableView"),_6d=objj_msgSend(objj_msgSend(_6c,"tableColumns"),"indexOfObjectIdenticalTo:",_source),_6e=objj_msgSend(CPIndexSet,"indexSetWithIndexesInRange:",CPMakeRange(0,objj_msgSend(_6c,"numberOfRows"))),_6f=objj_msgSend(CPIndexSet,"indexSetWithIndex:",_6d);
objj_msgSend(_6c,"reloadDataForRowIndexes:columnIndexes:",_6e,_6f);
}
})]);
var _1=objj_getClass("CPTableColumn");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"CPTableColumn\"");
}
var _2=_1.isa;
class_addMethods(_1,[new objj_method(sel_getUid("bind:toObject:withKeyPath:options:"),function(_70,_71,_72,_73,_74,_75){
with(_70){
objj_msgSendSuper({receiver:_70,super_class:objj_getClass("CPTableColumn").super_class},"bind:toObject:withKeyPath:options:",_72,_73,_74,_75);
if(!objj_msgSend(_72,"isEqual:","someListOfExceptedBindings(notAcceptedBindings)")){
objj_msgSend(objj_msgSend(_70,"tableView"),"_establishBindingsIfUnbound:",_73);
}
}
}),new objj_method(sel_getUid("_prepareDataView:forRow:"),function(_76,_77,_78,_79){
with(_76){
var _7a=objj_msgSend(CPBinder,"allBindingsForObject:",_76),_7b=objj_msgSend(_7a,"allKeys");
for(var i=0,_7c=objj_msgSend(_7b,"count");i<_7c;i++){
var _7d=_7b[i],_7e=objj_msgSend(_78,"_replacementKeyPathForBinding:",_7d),_7f=objj_msgSend(_7a,"objectForKey:",_7d),_80=_7f._info,_81=objj_msgSend(_80,"objectForKey:",CPObservedObjectKey),_82=objj_msgSend(_80,"objectForKey:",CPObservedKeyPathKey),_83=_82.lastIndexOf("."),_84;
if(_83===CPNotFound){
_84=objj_msgSend(objj_msgSend(_81,"valueForKeyPath:",_82),"objectAtIndex:",_79);
}else{
var _85=_82.substring(0,_83),_86=_82.substring(_83+1),_87=objj_msgSend(_81,"valueForKeyPath:",_85);
if(objj_msgSend(_87,"isKindOfClass:",CPArray)){
_84=objj_msgSend(objj_msgSend(_87,"objectAtIndex:",_79),"valueForKeyPath:",_86);
}else{
_84=objj_msgSend(objj_msgSend(_87,"valueForKeyPath:",_86),"objectAtIndex:",_79);
}
}
_84=objj_msgSend(_7f,"transformValue:withOptions:",_84,objj_msgSend(_80,"objectForKey:",CPOptionsKey));
objj_msgSend(_78,"setValue:forKey:",_84,"objectValue");
}
}
}),new objj_method(sel_getUid("_reverseSetDataView:forRow:"),function(_88,_89,_8a,_8b){
with(_88){
var _8c=objj_msgSend(CPBinder,"allBindingsForObject:",_88),_8d=objj_msgSend(_8c,"allKeys"),_8e=objj_msgSend(_8a,"valueForKey:","objectValue");
for(var i=0,_8f=objj_msgSend(_8d,"count");i<_8f;i++){
var _90=_8d[i],_91=objj_msgSend(_8a,"_replacementKeyPathForBinding:",_90),_92=objj_msgSend(_8c,"objectForKey:",_90),_93=_92._info,_94=objj_msgSend(_93,"objectForKey:",CPObservedObjectKey),_95=objj_msgSend(_93,"objectForKey:",CPObservedKeyPathKey),_96=_95.lastIndexOf(".");
if(_96===CPNotFound){
objj_msgSend(objj_msgSend(_94,"valueForKeyPath:",_95),"replaceObjectAtIndex:withObject:",_8b,_8e);
}else{
var _97=_95.substring(0,_96),_98=_95.substring(_96+1),_99=objj_msgSend(_94,"valueForKeyPath:",_97);
if(objj_msgSend(_99,"isKindOfClass:",CPArray)){
objj_msgSend(objj_msgSend(_99,"objectAtIndex:",_8b),"setValue:forKeyPath:",_8e,_98);
}else{
objj_msgSend(objj_msgSend(_99,"valueForKeyPath:",_98),"replaceObjectAtIndex:withObject:",_8b,_8e);
}
}
}
}
})]);
class_addMethods(_2,[new objj_method(sel_getUid("_binderClassForBinding:"),function(_9a,_9b,_9c){
with(_9a){
if(_9c==CPValueBinding){
return objj_msgSend(CPTableColumnValueBinder,"class");
}
return objj_msgSendSuper({receiver:_9a,super_class:objj_getMetaClass("CPTableColumn").super_class},"_binderClassForBinding:",_9c);
}
})]);
var _9d="CPTableColumnIdentifierKey",_9e="CPTableColumnHeaderViewKey",_9f="CPTableColumnDataViewKey",_a0="CPTableColumnWidthKey",_a1="CPTableColumnMinWidthKey",_a2="CPTableColumnMaxWidthKey",_a3="CPTableColumnResizingMaskKey",_a4="CPTableColumnIsHiddenKey",_a5="CPSortDescriptorPrototypeKey",_a6="CPTableColumnIsEditableKey";
var _1=objj_getClass("CPTableColumn");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"CPTableColumn\"");
}
var _2=_1.isa;
class_addMethods(_1,[new objj_method(sel_getUid("initWithCoder:"),function(_a7,_a8,_a9){
with(_a7){
_a7=objj_msgSendSuper({receiver:_a7,super_class:objj_getClass("CPTableColumn").super_class},"init");
if(_a7){
_dataViewData={};
_width=objj_msgSend(_a9,"decodeFloatForKey:",_a0);
_minWidth=objj_msgSend(_a9,"decodeFloatForKey:",_a1);
_maxWidth=objj_msgSend(_a9,"decodeFloatForKey:",_a2);
objj_msgSend(_a7,"setIdentifier:",objj_msgSend(_a9,"decodeObjectForKey:",_9d));
objj_msgSend(_a7,"setHeaderView:",objj_msgSend(_a9,"decodeObjectForKey:",_9e));
objj_msgSend(_a7,"setDataView:",objj_msgSend(_a9,"decodeObjectForKey:",_9f));
objj_msgSend(_a7,"setHeaderView:",objj_msgSend(_a9,"decodeObjectForKey:",_9e));
_resizingMask=objj_msgSend(_a9,"decodeIntForKey:",_a3);
_isHidden=objj_msgSend(_a9,"decodeBoolForKey:",_a4);
_isEditable=objj_msgSend(_a9,"decodeBoolForKey:",_a6);
_sortDescriptorPrototype=objj_msgSend(_a9,"decodeObjectForKey:",_a5);
}
return _a7;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_aa,_ab,_ac){
with(_aa){
objj_msgSend(_ac,"encodeObject:forKey:",_identifier,_9d);
objj_msgSend(_ac,"encodeObject:forKey:",_width,_a0);
objj_msgSend(_ac,"encodeObject:forKey:",_minWidth,_a1);
objj_msgSend(_ac,"encodeObject:forKey:",_maxWidth,_a2);
objj_msgSend(_ac,"encodeObject:forKey:",_headerView,_9e);
objj_msgSend(_ac,"encodeObject:forKey:",_dataView,_9f);
objj_msgSend(_ac,"encodeObject:forKey:",_resizingMask,_a3);
objj_msgSend(_ac,"encodeBool:forKey:",_isHidden,_a4);
objj_msgSend(_ac,"encodeBool:forKey:",_isEditable,_a6);
objj_msgSend(_ac,"encodeObject:forKey:",_sortDescriptorPrototype,_a5);
}
})]);
var _1=objj_getClass("CPTableColumn");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"CPTableColumn\"");
}
var _2=_1.isa;
class_addMethods(_1,[new objj_method(sel_getUid("setHeaderCell:"),function(_ad,_ae,_af){
with(_ad){
objj_msgSend(CPException,"raise:reason:",CPUnsupportedMethodException,"setHeaderCell: is not supported. Use -setHeaderView:aView instead.");
}
}),new objj_method(sel_getUid("headerCell"),function(_b0,_b1){
with(_b0){
objj_msgSend(CPException,"raise:reason:",CPUnsupportedMethodException,"headCell is not supported. Use -headerView instead.");
}
}),new objj_method(sel_getUid("setDataCell:"),function(_b2,_b3,_b4){
with(_b2){
objj_msgSend(CPException,"raise:reason:",CPUnsupportedMethodException,"setDataCell: is not supported. Use -setDataView:aView instead.");
}
}),new objj_method(sel_getUid("dataCell"),function(_b5,_b6){
with(_b5){
objj_msgSend(CPException,"raise:reason:",CPUnsupportedMethodException,"dataCell is not supported. Use -dataView instead.");
}
}),new objj_method(sel_getUid("dataCellForRow:"),function(_b7,_b8,row){
with(_b7){
objj_msgSend(CPException,"raise:reason:",CPUnsupportedMethodException,"dataCellForRow: is not supported. Use -dataViewForRow:row instead.");
}
})]);
p;19;CPTableHeaderView.jt;21741;@STATIC;1.0;I;23;Foundation/CPIndexSet.ji;15;CPTableColumn.ji;13;CPTableView.ji;8;CPView.jt;21643;
objj_executeFile("Foundation/CPIndexSet.j",NO);
objj_executeFile("CPTableColumn.j",YES);
objj_executeFile("CPTableView.j",YES);
objj_executeFile("CPView.j",YES);
var _1=objj_allocateClassPair(CPView,"_CPTableColumnHeaderView"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_textField")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("initWithFrame:"),function(_3,_4,_5){
with(_3){
_3=objj_msgSendSuper({receiver:_3,super_class:objj_getClass("_CPTableColumnHeaderView").super_class},"initWithFrame:",_5);
if(_3){
objj_msgSend(_3,"_init");
}
return _3;
}
}),new objj_method(sel_getUid("_init"),function(_6,_7){
with(_6){
_textField=objj_msgSend(objj_msgSend(_CPImageAndTextView,"alloc"),"initWithFrame:",{origin:{x:0,y:0},size:{width:0,height:0}});
objj_msgSend(_textField,"setAutoresizingMask:",CPViewWidthSizable|CPViewHeightSizable);
objj_msgSend(_textField,"setLineBreakMode:",CPLineBreakByTruncatingTail);
objj_msgSend(_textField,"setAlignment:",CPLeftTextAlignment);
objj_msgSend(_textField,"setVerticalAlignment:",CPCenterVerticalTextAlignment);
objj_msgSend(_6,"addSubview:",_textField);
}
}),new objj_method(sel_getUid("layoutSubviews"),function(_8,_9){
with(_8){
objj_msgSend(_8,"setBackgroundColor:",objj_msgSend(_8,"currentValueForThemeAttribute:","background-color"));
var _a=objj_msgSend(_8,"currentValueForThemeAttribute:","text-inset"),_b=objj_msgSend(_8,"bounds");
objj_msgSend(_textField,"setFrame:",{origin:{x:_a.right,y:_a.top},size:{width:_b.size.width-_a.right-_a.left,height:_b.size.height-_a.top-_a.bottom}});
objj_msgSend(_textField,"setTextColor:",objj_msgSend(_8,"currentValueForThemeAttribute:","text-color"));
objj_msgSend(_textField,"setFont:",objj_msgSend(_8,"currentValueForThemeAttribute:","text-font"));
objj_msgSend(_textField,"setTextShadowColor:",objj_msgSend(_8,"currentValueForThemeAttribute:","text-shadow-color"));
objj_msgSend(_textField,"setTextShadowOffset:",objj_msgSend(_8,"currentValueForThemeAttribute:","text-shadow-offset"));
objj_msgSend(_textField,"setAlignment:",objj_msgSend(_8,"currentValueForThemeAttribute:","text-alignment"));
}
}),new objj_method(sel_getUid("setStringValue:"),function(_c,_d,_e){
with(_c){
objj_msgSend(_textField,"setText:",_e);
}
}),new objj_method(sel_getUid("stringValue"),function(_f,_10){
with(_f){
return objj_msgSend(_textField,"text");
}
}),new objj_method(sel_getUid("textField"),function(_11,_12){
with(_11){
return _textField;
}
}),new objj_method(sel_getUid("sizeToFit"),function(_13,_14){
with(_13){
objj_msgSend(_textField,"sizeToFit");
}
}),new objj_method(sel_getUid("setFont:"),function(_15,_16,_17){
with(_15){
objj_msgSend(_15,"setValue:forThemeAttribute:",_17,"text-font");
}
}),new objj_method(sel_getUid("_setIndicatorImage:"),function(_18,_19,_1a){
with(_18){
if(_1a){
objj_msgSend(_textField,"setImage:",_1a);
objj_msgSend(_textField,"setImagePosition:",CPImageRight);
}else{
objj_msgSend(_textField,"setImagePosition:",CPNoImage);
}
}
})]);
class_addMethods(_2,[new objj_method(sel_getUid("defaultThemeClass"),function(_1b,_1c){
with(_1b){
return "columnHeader";
}
}),new objj_method(sel_getUid("themeAttributes"),function(_1d,_1e){
with(_1d){
return objj_msgSend(CPDictionary,"dictionaryWithObjects:forKeys:",[objj_msgSend(CPNull,"null"),objj_msgSend(CPNull,"null"),CGInsetMakeZero(),objj_msgSend(CPNull,"null"),objj_msgSend(CPNull,"null"),objj_msgSend(CPNull,"null"),CGSizeMakeZero()],["background-color","text-alignment","text-inset","text-color","text-font","text-shadow-color","text-shadow-offset"]);
}
})]);
var _1f="_CPTableColumnHeaderViewStringValueKey",_20="_CPTableColumnHeaderViewFontKey",_21="_CPTableColumnHeaderViewImageKey";
var _1=objj_getClass("_CPTableColumnHeaderView");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"_CPTableColumnHeaderView\"");
}
var _2=_1.isa;
class_addMethods(_1,[new objj_method(sel_getUid("initWithCoder:"),function(_22,_23,_24){
with(_22){
if(_22=objj_msgSendSuper({receiver:_22,super_class:objj_getClass("_CPTableColumnHeaderView").super_class},"initWithCoder:",_24)){
objj_msgSend(_22,"_init");
objj_msgSend(_22,"_setIndicatorImage:",objj_msgSend(_24,"decodeObjectForKey:",_21));
objj_msgSend(_22,"setStringValue:",objj_msgSend(_24,"decodeObjectForKey:",_1f));
objj_msgSend(_22,"setFont:",objj_msgSend(_24,"decodeObjectForKey:",_20));
}
return _22;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_25,_26,_27){
with(_25){
objj_msgSendSuper({receiver:_25,super_class:objj_getClass("_CPTableColumnHeaderView").super_class},"encodeWithCoder:",_27);
objj_msgSend(_27,"encodeObject:forKey:",objj_msgSend(_textField,"text"),_1f);
objj_msgSend(_27,"encodeObject:forKey:",objj_msgSend(_textField,"image"),_21);
objj_msgSend(_27,"encodeObject:forKey:",objj_msgSend(_textField,"font"),_20);
}
})]);
var _1=objj_allocateClassPair(CPView,"CPTableHeaderView"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_mouseDownLocation"),new objj_ivar("_previousTrackingLocation"),new objj_ivar("_activeColumn"),new objj_ivar("_pressedColumn"),new objj_ivar("_isResizing"),new objj_ivar("_isDragging"),new objj_ivar("_isTrackingColumn"),new objj_ivar("_drawsColumnLines"),new objj_ivar("_columnOldWidth"),new objj_ivar("_tableView")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("tableView"),function(_28,_29){
with(_28){
return _tableView;
}
}),new objj_method(sel_getUid("setTableView:"),function(_2a,_2b,_2c){
with(_2a){
_tableView=_2c;
}
}),new objj_method(sel_getUid("_init"),function(_2d,_2e){
with(_2d){
_mouseDownLocation={x:0,y:0};
_previousTrackingLocation={x:0,y:0};
_activeColumn=-1;
_pressedColumn=-1;
_isResizing=NO;
_isDragging=NO;
_isTrackingColumn=NO;
_drawsColumnLines=YES;
_columnOldWidth=0;
objj_msgSend(_2d,"setBackgroundColor:",objj_msgSend(_2d,"currentValueForThemeAttribute:","background-color"));
}
}),new objj_method(sel_getUid("initWithFrame:"),function(_2f,_30,_31){
with(_2f){
_2f=objj_msgSendSuper({receiver:_2f,super_class:objj_getClass("CPTableHeaderView").super_class},"initWithFrame:",_31);
if(_2f){
objj_msgSend(_2f,"_init");
}
return _2f;
}
}),new objj_method(sel_getUid("columnAtPoint:"),function(_32,_33,_34){
with(_32){
return objj_msgSend(_tableView,"columnAtPoint:",CGPointMake(_34.x,_34.y));
}
}),new objj_method(sel_getUid("headerRectOfColumn:"),function(_35,_36,_37){
with(_35){
var _38=objj_msgSend(_35,"bounds"),_39=objj_msgSend(_tableView,"rectOfColumn:",_37);
_38.origin.x=(_39.origin.x);
_38.size.width=(_39.size.width);
return _38;
}
}),new objj_method(sel_getUid("setDrawsColumnLines:"),function(_3a,_3b,_3c){
with(_3a){
_drawsColumnLines=_3c;
}
}),new objj_method(sel_getUid("drawsColumnLines"),function(_3d,_3e){
with(_3d){
return _drawsColumnLines;
}
}),new objj_method(sel_getUid("_cursorRectForColumn:"),function(_3f,_40,_41){
with(_3f){
if(_41==-1||!(objj_msgSend(_tableView._tableColumns[_41],"resizingMask")&CPTableColumnUserResizingMask)){
return {origin:{x:0,y:0},size:{width:0,height:0}};
}
var _42=objj_msgSend(_3f,"headerRectOfColumn:",_41);
_42.origin.x=(_42.origin.x+_42.size.width)-5;
_42.size.width=20;
return _42;
}
}),new objj_method(sel_getUid("_setPressedColumn:"),function(_43,_44,_45){
with(_43){
if(_pressedColumn!=-1){
var _46=objj_msgSend(_tableView._tableColumns[_pressedColumn],"headerView");
objj_msgSend(_46,"unsetThemeState:",CPThemeStateHighlighted);
}
if(_45!=-1){
var _46=objj_msgSend(_tableView._tableColumns[_45],"headerView");
objj_msgSend(_46,"setThemeState:",CPThemeStateHighlighted);
}
_pressedColumn=_45;
}
}),new objj_method(sel_getUid("mouseDown:"),function(_47,_48,_49){
with(_47){
objj_msgSend(_47,"trackMouse:",_49);
}
}),new objj_method(sel_getUid("trackMouse:"),function(_4a,_4b,_4c){
with(_4a){
var _4d=objj_msgSend(_4c,"type"),_4e=objj_msgSend(_4a,"convertPoint:fromView:",objj_msgSend(_4c,"locationInWindow"),nil);
_4e.x-=5;
var _4f=objj_msgSend(_4a,"columnAtPoint:",_4e),_50=objj_msgSend(_4a,"shouldResizeTableColumn:at:",_4f,{x:_4e.x+5,y:_4e.y});
if(_4d===CPLeftMouseUp){
if(_50){
objj_msgSend(_4a,"stopResizingTableColumn:at:",_activeColumn,_4e);
}else{
if(objj_msgSend(_4a,"_shouldStopTrackingTableColumn:at:",_4f,_4e)){
objj_msgSend(_tableView,"_didClickTableColumn:modifierFlags:",_4f,objj_msgSend(_4c,"modifierFlags"));
objj_msgSend(_4a,"stopTrackingTableColumn:at:",_4f,_4e);
_isTrackingColumn=NO;
}
}
objj_msgSend(_4a,"_updateResizeCursor:",objj_msgSend(CPApp,"currentEvent"));
_activeColumn=CPNotFound;
return;
}
if(_4d===CPLeftMouseDown){
if(_4f===-1){
return;
}
_mouseDownLocation=_4e;
_activeColumn=_4f;
objj_msgSend(_tableView,"_sendDelegateDidMouseDownInHeader:",_4f);
if(_50){
objj_msgSend(_4a,"startResizingTableColumn:at:",_4f,_4e);
}else{
objj_msgSend(_4a,"startTrackingTableColumn:at:",_4f,_4e);
_isTrackingColumn=YES;
}
}else{
if(_4d===CPLeftMouseDragged){
if(_50){
objj_msgSend(_4a,"continueResizingTableColumn:at:",_activeColumn,_4e);
}else{
if(_activeColumn===_4f&&(_4e.x>=(objj_msgSend(_4a,"headerRectOfColumn:",_4f).origin.x)&&_4e.y>=(objj_msgSend(_4a,"headerRectOfColumn:",_4f).origin.y)&&_4e.x<(objj_msgSend(_4a,"headerRectOfColumn:",_4f).origin.x+objj_msgSend(_4a,"headerRectOfColumn:",_4f).size.width)&&_4e.y<(objj_msgSend(_4a,"headerRectOfColumn:",_4f).origin.y+objj_msgSend(_4a,"headerRectOfColumn:",_4f).size.height))){
if(_isTrackingColumn&&_pressedColumn!==-1){
if(!objj_msgSend(_4a,"continueTrackingTableColumn:at:",_4f,_4e)){
return;
}
}else{
objj_msgSend(_4a,"startTrackingTableColumn:at:",_4f,_4e);
}
}else{
if(_isTrackingColumn&&_pressedColumn!==-1){
objj_msgSend(_4a,"stopTrackingTableColumn:at:",_activeColumn,_4e);
}
}
}
}
}
_previousTrackingLocation=_4e;
objj_msgSend(CPApp,"setTarget:selector:forNextEventMatchingMask:untilDate:inMode:dequeue:",_4a,sel_getUid("trackMouse:"),CPLeftMouseDraggedMask|CPLeftMouseUpMask,nil,nil,YES);
}
}),new objj_method(sel_getUid("startTrackingTableColumn:at:"),function(_51,_52,_53,_54){
with(_51){
objj_msgSend(_51,"_setPressedColumn:",_53);
}
}),new objj_method(sel_getUid("continueTrackingTableColumn:at:"),function(_55,_56,_57,_58){
with(_55){
if(objj_msgSend(_55,"_shouldDragTableColumn:at:",_57,_58)){
var _59=objj_msgSend(_55,"headerRectOfColumn:",_57),_5a={x:0,y:0},_5b=objj_msgSend(_tableView,"_dragViewForColumn:event:offset:",_57,objj_msgSend(CPApp,"currentEvent"),_5a),_5c={x:0,y:0};
_5c.x=((_59.origin.x)+_5a.x)+(_58.x-_mouseDownLocation.x);
_5c.y=(_59.origin.y)+_5a.y;
objj_msgSend(_55,"dragView:at:offset:event:pasteboard:source:slideBack:",_5b,_5c,{width:0,height:0},objj_msgSend(CPApp,"currentEvent"),objj_msgSend(CPPasteboard,"pasteboardWithName:",CPDragPboard),_55,YES);
return NO;
}
return YES;
}
}),new objj_method(sel_getUid("_shouldStopTrackingTableColumn:at:"),function(_5d,_5e,_5f,_60){
with(_5d){
return _isTrackingColumn&&_activeColumn===_5f&&(_60.x>=(objj_msgSend(_5d,"headerRectOfColumn:",_5f).origin.x)&&_60.y>=(objj_msgSend(_5d,"headerRectOfColumn:",_5f).origin.y)&&_60.x<(objj_msgSend(_5d,"headerRectOfColumn:",_5f).origin.x+objj_msgSend(_5d,"headerRectOfColumn:",_5f).size.width)&&_60.y<(objj_msgSend(_5d,"headerRectOfColumn:",_5f).origin.y+objj_msgSend(_5d,"headerRectOfColumn:",_5f).size.height));
}
}),new objj_method(sel_getUid("stopTrackingTableColumn:at:"),function(_61,_62,_63,_64){
with(_61){
objj_msgSend(_61,"_setPressedColumn:",CPNotFound);
objj_msgSend(_61,"_updateResizeCursor:",objj_msgSend(CPApp,"currentEvent"));
}
}),new objj_method(sel_getUid("_shouldDragTableColumn:at:"),function(_65,_66,_67,_68){
with(_65){
return objj_msgSend(_tableView,"allowsColumnReordering")&&ABS(_68.x-_mouseDownLocation.x)>=10;
}
}),new objj_method(sel_getUid("_headerRectOfLastVisibleColumn"),function(_69,_6a){
with(_69){
var _6b=objj_msgSend(_tableView,"tableColumns"),_6c=objj_msgSend(_6b,"count");
while(_6c--){
var _6d=objj_msgSend(_6b,"objectAtIndex:",_6c);
if(!objj_msgSend(_6d,"isHidden")){
return objj_msgSend(_69,"headerRectOfColumn:",_6c);
}
}
return nil;
}
}),new objj_method(sel_getUid("_constrainDragView:at:"),function(_6e,_6f,_70,_71){
with(_6e){
var _72=objj_msgSend(_tableView,"tableColumns"),_73=objj_msgSend(_6e,"_headerRectOfLastVisibleColumn"),_74=objj_msgSend(_6e,"headerRectOfColumn:",_activeColumn),_75=objj_msgSend(_70,"window"),_76=objj_msgSend(_75,"frame");
_76.origin=objj_msgSend(objj_msgSend(_6e,"window"),"convertGlobalToBase:",_76.origin);
_76.origin=objj_msgSend(_6e,"convertPoint:fromView:",_76.origin,nil);
_76.origin.x=MAX(0,MIN((_76.origin.x),(_73.origin.x+_73.size.width)-(_74.size.width)));
_76.origin.y=(_73.origin.y);
_76.origin=objj_msgSend(_6e,"convertPoint:toView:",_76.origin,nil);
_76.origin=objj_msgSend(objj_msgSend(_6e,"window"),"convertBaseToGlobal:",_76.origin);
objj_msgSend(_75,"setFrame:",_76);
}
}),new objj_method(sel_getUid("_moveColumn:toColumn:"),function(_77,_78,_79,_7a){
with(_77){
objj_msgSend(_tableView,"moveColumn:toColumn:",_79,_7a);
_activeColumn=_7a;
_pressedColumn=_activeColumn;
}
}),new objj_method(sel_getUid("draggedView:beganAt:"),function(_7b,_7c,_7d,_7e){
with(_7b){
_isDragging=YES;
var _7f=objj_msgSend(objj_msgSend(_tableView,"tableColumns"),"objectAtIndex:",_activeColumn);
objj_msgSend(objj_msgSend(_7f,"headerView"),"setHidden:",YES);
objj_msgSend(_tableView,"_setDraggedColumn:",_7f);
objj_msgSend(_7b,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("draggedView:movedTo:"),function(_80,_81,_82,_83){
with(_80){
objj_msgSend(_80,"_constrainDragView:at:",_82,_83);
var _84=objj_msgSend(_82,"window"),_85=objj_msgSend(_84,"frame");
var _86=CGPointCreateCopy(_83);
if(_83.x<_previousTrackingLocation.x){
_86={x:(_85.origin.x),y:(_85.origin.y)};
}else{
if(_83.x>_previousTrackingLocation.x){
_86={x:(_85.origin.x+_85.size.width),y:(_85.origin.y)};
}
}
_86=objj_msgSend(objj_msgSend(_80,"window"),"convertGlobalToBase:",_86);
_86=objj_msgSend(_80,"convertPoint:fromView:",_86,nil);
var _87=objj_msgSend(_80,"columnAtPoint:",_86);
if(_87!==-1){
var _88=objj_msgSend(_80,"headerRectOfColumn:",_87),_89=objj_msgSend(_80,"convertPoint:fromView:",CGPointMake((_88.origin.x+(_88.size.width)/2),(_88.origin.y+(_88.size.height)/2)),_80);
if(_87<_activeColumn&&_86.x<_89.x){
objj_msgSend(_80,"_moveColumn:toColumn:",_activeColumn,_87);
}else{
if(_87>_activeColumn&&_86.x>_89.x){
objj_msgSend(_80,"_moveColumn:toColumn:",_activeColumn,_87);
}
}
}
_previousTrackingLocation=_83;
}
}),new objj_method(sel_getUid("draggedView:endedAt:operation:"),function(_8a,_8b,_8c,_8d,_8e){
with(_8a){
_isDragging=NO;
_isTrackingColumn=NO;
objj_msgSend(_tableView,"_setDraggedColumn:",nil);
objj_msgSend(objj_msgSend(objj_msgSend(objj_msgSend(_tableView,"tableColumns"),"objectAtIndex:",_activeColumn),"headerView"),"setHidden:",NO);
objj_msgSend(_8a,"stopTrackingTableColumn:at:",_activeColumn,_8d);
objj_msgSend(_8a,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("shouldResizeTableColumn:at:"),function(_8f,_90,_91,_92){
with(_8f){
if(_isResizing){
return YES;
}
if(_isTrackingColumn){
return NO;
}
return objj_msgSend(_tableView,"allowsColumnResizing")&&(_92.x>=(objj_msgSend(_8f,"_cursorRectForColumn:",_91).origin.x)&&_92.y>=(objj_msgSend(_8f,"_cursorRectForColumn:",_91).origin.y)&&_92.x<(objj_msgSend(_8f,"_cursorRectForColumn:",_91).origin.x+objj_msgSend(_8f,"_cursorRectForColumn:",_91).size.width)&&_92.y<(objj_msgSend(_8f,"_cursorRectForColumn:",_91).origin.y+objj_msgSend(_8f,"_cursorRectForColumn:",_91).size.height));
}
}),new objj_method(sel_getUid("startResizingTableColumn:at:"),function(_93,_94,_95,_96){
with(_93){
_isResizing=YES;
var _97=objj_msgSend(objj_msgSend(_tableView,"tableColumns"),"objectAtIndex:",_95);
objj_msgSend(_97,"setDisableResizingPosting:",YES);
objj_msgSend(_tableView,"setDisableAutomaticResizing:",YES);
}
}),new objj_method(sel_getUid("continueResizingTableColumn:at:"),function(_98,_99,_9a,_9b){
with(_98){
var _9c=objj_msgSend(objj_msgSend(_tableView,"tableColumns"),"objectAtIndex:",_9a),_9d=objj_msgSend(_9c,"width")+_9b.x-_previousTrackingLocation.x;
if(_9d<objj_msgSend(_9c,"minWidth")){
objj_msgSend(objj_msgSend(CPCursor,"resizeRightCursor"),"set");
}else{
if(_9d>objj_msgSend(_9c,"maxWidth")){
objj_msgSend(objj_msgSend(CPCursor,"resizeLeftCursor"),"set");
}else{
_tableView._lastColumnShouldSnap=NO;
objj_msgSend(_9c,"setWidth:",_9d);
objj_msgSend(objj_msgSend(CPCursor,"resizeLeftRightCursor"),"set");
objj_msgSend(_98,"setNeedsLayout");
objj_msgSend(_98,"setNeedsDisplay:",YES);
}
}
}
}),new objj_method(sel_getUid("stopResizingTableColumn:at:"),function(_9e,_9f,_a0,_a1){
with(_9e){
var _a2=objj_msgSend(objj_msgSend(_tableView,"tableColumns"),"objectAtIndex:",_a0);
objj_msgSend(_a2,"_postDidResizeNotificationWithOldWidth:",_columnOldWidth);
objj_msgSend(_a2,"setDisableResizingPosting:",NO);
objj_msgSend(_tableView,"setDisableAutomaticResizing:",NO);
_isResizing=NO;
}
}),new objj_method(sel_getUid("_updateResizeCursor:"),function(_a3,_a4,_a5){
with(_a3){
if(!objj_msgSend(_tableView,"allowsColumnResizing")||(objj_msgSend(_a5,"type")===CPLeftMouseUp&&!objj_msgSend(objj_msgSend(_a3,"window"),"acceptsMouseMovedEvents"))){
objj_msgSend(objj_msgSend(CPCursor,"arrowCursor"),"set");
return;
}
var _a6=objj_msgSend(_a3,"convertPoint:fromView:",objj_msgSend(_a5,"locationInWindow"),nil),_a7=CGPointMake(_a6.x-5,_a6.y),_a8=objj_msgSend(_a3,"columnAtPoint:",_a7);
if(_a8>=0&&(_a6.x>=(objj_msgSend(_a3,"_cursorRectForColumn:",_a8).origin.x)&&_a6.y>=(objj_msgSend(_a3,"_cursorRectForColumn:",_a8).origin.y)&&_a6.x<(objj_msgSend(_a3,"_cursorRectForColumn:",_a8).origin.x+objj_msgSend(_a3,"_cursorRectForColumn:",_a8).size.width)&&_a6.y<(objj_msgSend(_a3,"_cursorRectForColumn:",_a8).origin.y+objj_msgSend(_a3,"_cursorRectForColumn:",_a8).size.height))){
var _a9=objj_msgSend(objj_msgSend(_tableView,"tableColumns"),"objectAtIndex:",_a8),_aa=objj_msgSend(_a9,"width");
if(_aa==objj_msgSend(_a9,"minWidth")){
objj_msgSend(objj_msgSend(CPCursor,"resizeRightCursor"),"set");
}else{
if(_aa==objj_msgSend(_a9,"maxWidth")){
objj_msgSend(objj_msgSend(CPCursor,"resizeLeftCursor"),"set");
}else{
objj_msgSend(objj_msgSend(CPCursor,"resizeLeftRightCursor"),"set");
}
}
}else{
objj_msgSend(objj_msgSend(CPCursor,"arrowCursor"),"set");
}
}
}),new objj_method(sel_getUid("mouseEntered:"),function(_ab,_ac,_ad){
with(_ab){
objj_msgSend(_ab,"_updateResizeCursor:",_ad);
}
}),new objj_method(sel_getUid("mouseMoved:"),function(_ae,_af,_b0){
with(_ae){
objj_msgSend(_ae,"_updateResizeCursor:",_b0);
}
}),new objj_method(sel_getUid("mouseExited:"),function(_b1,_b2,_b3){
with(_b1){
objj_msgSend(objj_msgSend(CPCursor,"arrowCursor"),"set");
}
}),new objj_method(sel_getUid("layoutSubviews"),function(_b4,_b5){
with(_b4){
var _b6=objj_msgSend(_tableView,"tableColumns"),_b7=objj_msgSend(_b6,"count");
for(var i=0;i<_b7;i++){
var _b8=objj_msgSend(_b6,"objectAtIndex:",i),_b9=objj_msgSend(_b8,"headerView");
var _ba=objj_msgSend(_b4,"headerRectOfColumn:",i);
_ba.size.height-=0.5;
if(i>0){
_ba.origin.x+=0.5;
_ba.size.width-=1;
}
objj_msgSend(_b9,"setFrame:",_ba);
if(objj_msgSend(_b9,"superview")!=_b4){
objj_msgSend(_b4,"addSubview:",_b9);
}
}
objj_msgSend(_b4,"setBackgroundColor:",objj_msgSend(_b4,"currentValueForThemeAttribute:","background-color"));
}
}),new objj_method(sel_getUid("drawRect:"),function(_bb,_bc,_bd){
with(_bb){
if(!_tableView||!objj_msgSend(_bb,"drawsColumnLines")){
return;
}
var _be=objj_msgSend(objj_msgSend(CPGraphicsContext,"currentContext"),"graphicsPort"),_bf=objj_msgSend(_tableView,"columnIndexesInRect:",_bd),_c0=[],_c1=objj_msgSend(_tableView,"tableColumns"),_c2=_tableView._exposedColumns,_c3=objj_msgSend(_c2,"firstIndex"),_c4=CPMakeRange(_c3,objj_msgSend(_c2,"lastIndex")-_c3+1);
CGContextSetLineWidth(_be,1);
CGContextSetStrokeColor(_be,objj_msgSend(_bb,"currentValueForThemeAttribute:","divider-color"));
objj_msgSend(_bf,"getIndexes:maxCount:inIndexRange:",_c0,-1,_c4);
var _c5=0,_c6=_c0.length,_c7;
CGContextBeginPath(_be);
for(;_c5<_c6;_c5++){
var _c8=_c0[_c5],_c9=objj_msgSend(_bb,"headerRectOfColumn:",_c8);
_c7=(_c9.origin.x+_c9.size.width);
CGContextMoveToPoint(_be,ROUND(_c7)+0.5,ROUND((_c9.origin.y)));
CGContextAddLineToPoint(_be,ROUND(_c7)+0.5,ROUND((_c9.origin.y+_c9.size.height)));
}
CGContextClosePath(_be);
CGContextStrokePath(_be);
}
})]);
class_addMethods(_2,[new objj_method(sel_getUid("defaultThemeClass"),function(_ca,_cb){
with(_ca){
return "tableHeaderRow";
}
}),new objj_method(sel_getUid("themeAttributes"),function(_cc,_cd){
with(_cc){
return objj_msgSend(CPDictionary,"dictionaryWithObjects:forKeys:",[objj_msgSend(CPNull,"null"),objj_msgSend(CPColor,"grayColor")],["background-color","divider-color"]);
}
})]);
var _ce="CPTableHeaderViewTableViewKey",_cf="CPTableHeaderViewDrawsColumnLines";
var _1=objj_getClass("CPTableHeaderView");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"CPTableHeaderView\"");
}
var _2=_1.isa;
class_addMethods(_1,[new objj_method(sel_getUid("initWithCoder:"),function(_d0,_d1,_d2){
with(_d0){
if(_d0=objj_msgSendSuper({receiver:_d0,super_class:objj_getClass("CPTableHeaderView").super_class},"initWithCoder:",_d2)){
objj_msgSend(_d0,"_init");
_tableView=objj_msgSend(_d2,"decodeObjectForKey:",_ce);
if(objj_msgSend(_d2,"containsValueForKey:",_cf)){
_drawsColumnLines=objj_msgSend(_d2,"decodeBoolForKey:",_cf);
}else{
_drawsColumnLines=YES;
CPLog.warn("The tableview header being decoded is using an old cib. Please run Nib2Cib.");
}
}
return _d0;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_d3,_d4,_d5){
with(_d3){
objj_msgSendSuper({receiver:_d3,super_class:objj_getClass("CPTableHeaderView").super_class},"encodeWithCoder:",_d5);
objj_msgSend(_d5,"encodeObject:forKey:",_tableView,_ce);
objj_msgSend(_d5,"encodeBool:forKey:",_drawsColumnLines,_cf);
}
})]);
p;13;CPTableView.jt;110172;@STATIC;1.0;I;20;Foundation/CPArray.jI;23;Foundation/CPIndexSet.ji;12;CGGradient.ji;11;CPControl.ji;15;CPTableColumn.ji;15;_CPCornerView.ji;12;CPScroller.jt;110008;
objj_executeFile("Foundation/CPArray.j",NO);
objj_executeFile("Foundation/CPIndexSet.j",NO);
objj_executeFile("CGGradient.j",YES);
objj_executeFile("CPControl.j",YES);
objj_executeFile("CPTableColumn.j",YES);
objj_executeFile("_CPCornerView.j",YES);
objj_executeFile("CPScroller.j",YES);
CPTableViewColumnDidMoveNotification="CPTableViewColumnDidMoveNotification";
CPTableViewColumnDidResizeNotification="CPTableViewColumnDidResizeNotification";
CPTableViewSelectionDidChangeNotification="CPTableViewSelectionDidChangeNotification";
CPTableViewSelectionIsChangingNotification="CPTableViewSelectionIsChangingNotification";
var _1=1<<0,_2=1<<1,_3=1<<2,_4=1<<3,_5=1<<4,_6=1<<5,_7=1<<6,_8=1<<7;
var _9=1<<0,_a=1<<1,_b=1<<2,_c=1<<3,_d=1<<4,_e=1<<5,_f=1<<6,_10=1<<7,_11=1<<8,_12=1<<9,_13=1<<10,_14=1<<11,_15=1<<12,_16=1<<13,_17=1<<14,_18=1<<15,_19=1<<16,_1a=1<<17,_1b=1<<18,_1c=1<<19,_1d=1<<20;
CPTableViewDraggingDestinationFeedbackStyleNone=-1;
CPTableViewDraggingDestinationFeedbackStyleRegular=0;
CPTableViewDraggingDestinationFeedbackStyleSourceList=1;
CPTableViewDropOn=0;
CPTableViewDropAbove=1;
CPSourceListGradient="CPSourceListGradient";
CPSourceListTopLineColor="CPSourceListTopLineColor";
CPSourceListBottomLineColor="CPSourceListBottomLineColor";
CPTableViewSelectionHighlightStyleNone=-1;
CPTableViewSelectionHighlightStyleRegular=0;
CPTableViewSelectionHighlightStyleSourceList=1;
CPTableViewGridNone=0;
CPTableViewSolidVerticalGridLineMask=1<<0;
CPTableViewSolidHorizontalGridLineMask=1<<1;
CPTableViewNoColumnAutoresizing=0;
CPTableViewUniformColumnAutoresizingStyle=1;
CPTableViewSequentialColumnAutoresizingStyle=2;
CPTableViewReverseSequentialColumnAutoresizingStyle=3;
CPTableViewLastColumnOnlyAutoresizingStyle=4;
CPTableViewFirstColumnOnlyAutoresizingStyle=5;
var _1e=objj_allocateClassPair(CPView,"_CPTableDrawView"),_1f=_1e.isa;
class_addIvars(_1e,[new objj_ivar("_tableView")]);
objj_registerClassPair(_1e);
class_addMethods(_1e,[new objj_method(sel_getUid("initWithTableView:"),function(_20,_21,_22){
with(_20){
_20=objj_msgSendSuper({receiver:_20,super_class:objj_getClass("_CPTableDrawView").super_class},"init");
if(_20){
_tableView=_22;
}
return _20;
}
}),new objj_method(sel_getUid("drawRect:"),function(_23,_24,_25){
with(_23){
var _26=objj_msgSend(_23,"frame"),_27=objj_msgSend(objj_msgSend(CPGraphicsContext,"currentContext"),"graphicsPort");
CGContextTranslateCTM(_27,-(_26.origin.x),-(_26.origin.y));
objj_msgSend(_tableView,"_drawRect:",_25);
}
})]);
var _1e=objj_allocateClassPair(CPControl,"CPTableView"),_1f=_1e.isa;
class_addIvars(_1e,[new objj_ivar("_dataSource"),new objj_ivar("_implementedDataSourceMethods"),new objj_ivar("_delegate"),new objj_ivar("_implementedDelegateMethods"),new objj_ivar("_tableColumns"),new objj_ivar("_tableColumnRanges"),new objj_ivar("_dirtyTableColumnRangeIndex"),new objj_ivar("_numberOfHiddenColumns"),new objj_ivar("_reloadAllRows"),new objj_ivar("_objectValues"),new objj_ivar("_exposedRect"),new objj_ivar("_exposedRows"),new objj_ivar("_exposedColumns"),new objj_ivar("_dataViewsForTableColumns"),new objj_ivar("_cachedDataViews"),new objj_ivar("_allowsColumnReordering"),new objj_ivar("_allowsColumnResizing"),new objj_ivar("_allowsColumnSelection"),new objj_ivar("_allowsMultipleSelection"),new objj_ivar("_allowsEmptySelection"),new objj_ivar("_sortDescriptors"),new objj_ivar("_intercellSpacing"),new objj_ivar("_rowHeight"),new objj_ivar("_usesAlternatingRowBackgroundColors"),new objj_ivar("_alternatingRowBackgroundColors"),new objj_ivar("_selectionHighlightStyle"),new objj_ivar("_currentHighlightedTableColumn"),new objj_ivar("_gridStyleMask"),new objj_ivar("_numberOfRows"),new objj_ivar("_groupRows"),new objj_ivar("_cachedRowHeights"),new objj_ivar("_autosaveName"),new objj_ivar("_autosaveTableColumns"),new objj_ivar("_headerView"),new objj_ivar("_cornerView"),new objj_ivar("_selectedColumnIndexes"),new objj_ivar("_selectedRowIndexes"),new objj_ivar("_selectionAnchorRow"),new objj_ivar("_lastSelectedRow"),new objj_ivar("_previouslySelectedRowIndexes"),new objj_ivar("_startTrackingPoint"),new objj_ivar("_startTrackingTimestamp"),new objj_ivar("_trackingPointMovedOutOfClickSlop"),new objj_ivar("_editingCellIndex"),new objj_ivar("_tableDrawView"),new objj_ivar("_doubleAction"),new objj_ivar("_clickedRow"),new objj_ivar("_columnAutoResizingStyle"),new objj_ivar("_lastTrackedRowIndex"),new objj_ivar("_originalMouseDownPoint"),new objj_ivar("_verticalMotionCanDrag"),new objj_ivar("_destinationDragStyle"),new objj_ivar("_isSelectingSession"),new objj_ivar("_draggedRowIndexes"),new objj_ivar("_wasSelectionBroken"),new objj_ivar("_dropOperationFeedbackView"),new objj_ivar("_dragOperationDefaultMask"),new objj_ivar("_retargetedDropRow"),new objj_ivar("_retargetedDropOperation"),new objj_ivar("_disableAutomaticResizing"),new objj_ivar("_lastColumnShouldSnap"),new objj_ivar("_implementsCustomDrawRow"),new objj_ivar("_draggedColumn"),new objj_ivar("_differedColumnDataToRemove")]);
objj_registerClassPair(_1e);
class_addMethods(_1e,[new objj_method(sel_getUid("disableAutomaticResizing"),function(_28,_29){
with(_28){
return _disableAutomaticResizing;
}
}),new objj_method(sel_getUid("setDisableAutomaticResizing:"),function(_2a,_2b,_2c){
with(_2a){
_disableAutomaticResizing=_2c;
}
}),new objj_method(sel_getUid("initWithFrame:"),function(_2d,_2e,_2f){
with(_2d){
_2d=objj_msgSendSuper({receiver:_2d,super_class:objj_getClass("CPTableView").super_class},"initWithFrame:",_2f);
if(_2d){
_allowsColumnReordering=YES;
_allowsColumnResizing=YES;
_allowsMultipleSelection=NO;
_allowsEmptySelection=YES;
_allowsColumnSelection=NO;
_disableAutomaticResizing=NO;
_selectionHighlightStyle=CPTableViewSelectionHighlightStyleRegular;
objj_msgSend(_2d,"setUsesAlternatingRowBackgroundColors:",NO);
objj_msgSend(_2d,"setAlternatingRowBackgroundColors:",[objj_msgSend(CPColor,"whiteColor"),objj_msgSend(CPColor,"colorWithRed:green:blue:alpha:",245/255,249/255,252/255,1)]);
_tableColumns=[];
_tableColumnRanges=[];
_dirtyTableColumnRangeIndex=CPNotFound;
_numberOfHiddenColumns=0;
_intercellSpacing={width:3,height:2};
_rowHeight=23;
objj_msgSend(_2d,"setGridColor:",objj_msgSend(CPColor,"colorWithHexString:","dce0e2"));
objj_msgSend(_2d,"setGridStyleMask:",CPTableViewGridNone);
objj_msgSend(_2d,"setHeaderView:",objj_msgSend(objj_msgSend(CPTableHeaderView,"alloc"),"initWithFrame:",{origin:{x:0,y:0},size:{width:objj_msgSend(_2d,"bounds").size.width,height:_rowHeight}}));
objj_msgSend(_2d,"setCornerView:",objj_msgSend(objj_msgSend(_CPCornerView,"alloc"),"initWithFrame:",{origin:{x:0,y:0},size:{width:objj_msgSend(CPScroller,"scrollerWidth"),height:(objj_msgSend(_headerView,"frame").size.height)}}));
_currentHighlightedTableColumn=nil;
_draggedRowIndexes=objj_msgSend(CPIndexSet,"indexSet");
_verticalMotionCanDrag=YES;
_isSelectingSession=NO;
_retargetedDropRow=nil;
_retargetedDropOperation=nil;
_dragOperationDefaultMask=nil;
_destinationDragStyle=CPTableViewDraggingDestinationFeedbackStyleRegular;
objj_msgSend(_2d,"setBackgroundColor:",objj_msgSend(CPColor,"whiteColor"));
objj_msgSend(_2d,"_init");
}
return _2d;
}
}),new objj_method(sel_getUid("_init"),function(_30,_31){
with(_30){
_tableViewFlags=0;
_lastSelectedRow=-1;
_selectedColumnIndexes=objj_msgSend(CPIndexSet,"indexSet");
_selectedRowIndexes=objj_msgSend(CPIndexSet,"indexSet");
_dropOperationFeedbackView=objj_msgSend(objj_msgSend(_CPDropOperationDrawingView,"alloc"),"initWithFrame:",{origin:{x:0,y:0},size:{width:0,height:0}});
objj_msgSend(_dropOperationFeedbackView,"setTableView:",_30);
_lastColumnShouldSnap=NO;
if(!_alternatingRowBackgroundColors){
_alternatingRowBackgroundColors=[objj_msgSend(CPColor,"whiteColor"),objj_msgSend(CPColor,"colorWithHexString:","e4e7ff")];
}
_selectionHighlightColor=objj_msgSend(CPColor,"colorWithHexString:","5f83b9");
_tableColumnRanges=[];
_dirtyTableColumnRangeIndex=0;
_numberOfHiddenColumns=0;
_objectValues={};
_dataViewsForTableColumns={};
_dataViews=[];
_numberOfRows=0;
_exposedRows=objj_msgSend(CPIndexSet,"indexSet");
_exposedColumns=objj_msgSend(CPIndexSet,"indexSet");
_cachedDataViews={};
_cachedRowHeights=[];
_groupRows=objj_msgSend(CPIndexSet,"indexSet");
_tableDrawView=objj_msgSend(objj_msgSend(_CPTableDrawView,"alloc"),"initWithTableView:",_30);
objj_msgSend(_tableDrawView,"setBackgroundColor:",objj_msgSend(CPColor,"clearColor"));
objj_msgSend(_30,"addSubview:",_tableDrawView);
_draggedColumn=nil;
_differedColumnDataToRemove=[];
_implementsCustomDrawRow=objj_msgSend(_30,"implementsSelector:",sel_getUid("drawRow:clipRect:"));
if(!_sortDescriptors){
_sortDescriptors=[];
}
}
}),new objj_method(sel_getUid("setDataSource:"),function(_32,_33,_34){
with(_32){
if(_dataSource===_34){
return;
}
_dataSource=_34;
_implementedDataSourceMethods=0;
if(!_dataSource){
return;
}
var _35=!!objj_msgSend(_32,"infoForBinding:","content");
if(objj_msgSend(_dataSource,"respondsToSelector:",sel_getUid("numberOfRowsInTableView:"))){
_implementedDataSourceMethods|=_1;
}
if(objj_msgSend(_dataSource,"respondsToSelector:",sel_getUid("tableView:objectValueForTableColumn:row:"))){
_implementedDataSourceMethods|=_2;
}
if(objj_msgSend(_dataSource,"respondsToSelector:",sel_getUid("tableView:setObjectValue:forTableColumn:row:"))){
_implementedDataSourceMethods|=_3;
}
if(objj_msgSend(_dataSource,"respondsToSelector:",sel_getUid("tableView:acceptDrop:row:dropOperation:"))){
_implementedDataSourceMethods|=_4;
}
if(objj_msgSend(_dataSource,"respondsToSelector:",sel_getUid("tableView:namesOfPromisedFilesDroppedAtDestination:forDraggedRowsWithIndexes:"))){
_implementedDataSourceMethods|=_5;
}
if(objj_msgSend(_dataSource,"respondsToSelector:",sel_getUid("tableView:validateDrop:proposedRow:proposedDropOperation:"))){
_implementedDataSourceMethods|=_6;
}
if(objj_msgSend(_dataSource,"respondsToSelector:",sel_getUid("tableView:writeRowsWithIndexes:toPasteboard:"))){
_implementedDataSourceMethods|=_7;
}
if(objj_msgSend(_dataSource,"respondsToSelector:",sel_getUid("tableView:sortDescriptorsDidChange:"))){
_implementedDataSourceMethods|=_8;
}
objj_msgSend(_32,"reloadData");
}
}),new objj_method(sel_getUid("dataSource"),function(_36,_37){
with(_36){
return _dataSource;
}
}),new objj_method(sel_getUid("reloadDataForRowIndexes:columnIndexes:"),function(_38,_39,_3a,_3b){
with(_38){
objj_msgSend(_38,"reloadData");
}
}),new objj_method(sel_getUid("reloadData"),function(_3c,_3d){
with(_3c){
_reloadAllRows=YES;
_objectValues={};
_cachedRowHeights=[];
objj_msgSend(_3c,"noteNumberOfRowsChanged");
objj_msgSend(_3c,"setNeedsLayout");
objj_msgSend(_3c,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("setDoubleAction:"),function(_3e,_3f,_40){
with(_3e){
_doubleAction=_40;
}
}),new objj_method(sel_getUid("doubleAction"),function(_41,_42){
with(_41){
return _doubleAction;
}
}),new objj_method(sel_getUid("clickedRow"),function(_43,_44){
with(_43){
return _clickedRow;
}
}),new objj_method(sel_getUid("setAllowsColumnReordering:"),function(_45,_46,_47){
with(_45){
_allowsColumnReordering=!!_47;
}
}),new objj_method(sel_getUid("allowsColumnReordering"),function(_48,_49){
with(_48){
return _allowsColumnReordering;
}
}),new objj_method(sel_getUid("setAllowsColumnResizing:"),function(_4a,_4b,_4c){
with(_4a){
_allowsColumnResizing=!!_4c;
}
}),new objj_method(sel_getUid("allowsColumnResizing"),function(_4d,_4e){
with(_4d){
return _allowsColumnResizing;
}
}),new objj_method(sel_getUid("setAllowsMultipleSelection:"),function(_4f,_50,_51){
with(_4f){
_allowsMultipleSelection=!!_51;
}
}),new objj_method(sel_getUid("allowsMultipleSelection"),function(_52,_53){
with(_52){
return _allowsMultipleSelection;
}
}),new objj_method(sel_getUid("setAllowsEmptySelection:"),function(_54,_55,_56){
with(_54){
_allowsEmptySelection=!!_56;
}
}),new objj_method(sel_getUid("allowsEmptySelection"),function(_57,_58){
with(_57){
return _allowsEmptySelection;
}
}),new objj_method(sel_getUid("setAllowsColumnSelection:"),function(_59,_5a,_5b){
with(_59){
_allowsColumnSelection=!!_5b;
}
}),new objj_method(sel_getUid("allowsColumnSelection"),function(_5c,_5d){
with(_5c){
return _allowsColumnSelection;
}
}),new objj_method(sel_getUid("setIntercellSpacing:"),function(_5e,_5f,_60){
with(_5e){
if((_intercellSpacing.width==_60.width&&_intercellSpacing.height==_60.height)){
return;
}
_intercellSpacing={width:_60.width,height:_60.height};
_dirtyTableColumnRangeIndex=0;
objj_msgSend(_5e,"_recalculateTableColumnRanges");
objj_msgSend(_5e,"setNeedsLayout");
objj_msgSend(_headerView,"setNeedsDisplay:",YES);
objj_msgSend(_headerView,"setNeedsLayout");
objj_msgSend(_5e,"reloadData");
}
}),new objj_method(sel_getUid("setThemeState:"),function(_61,_62,_63){
with(_61){
}
}),new objj_method(sel_getUid("intercellSpacing"),function(_64,_65){
with(_64){
return {width:_intercellSpacing.width,height:_intercellSpacing.height};
}
}),new objj_method(sel_getUid("setRowHeight:"),function(_66,_67,_68){
with(_66){
_68=+_68;
if(_rowHeight===_68){
return;
}
_rowHeight=MAX(0,_68);
objj_msgSend(_66,"setNeedsLayout");
}
}),new objj_method(sel_getUid("rowHeight"),function(_69,_6a){
with(_69){
return _rowHeight;
}
}),new objj_method(sel_getUid("setUsesAlternatingRowBackgroundColors:"),function(_6b,_6c,_6d){
with(_6b){
_usesAlternatingRowBackgroundColors=_6d;
}
}),new objj_method(sel_getUid("usesAlternatingRowBackgroundColors"),function(_6e,_6f){
with(_6e){
return _usesAlternatingRowBackgroundColors;
}
}),new objj_method(sel_getUid("setAlternatingRowBackgroundColors:"),function(_70,_71,_72){
with(_70){
objj_msgSend(_70,"setValue:forThemeAttribute:",_72,"alternating-row-colors");
objj_msgSend(_70,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("alternatingRowBackgroundColors"),function(_73,_74){
with(_73){
return objj_msgSend(_73,"currentValueForThemeAttribute:","alternating-row-colors");
}
}),new objj_method(sel_getUid("selectionHighlightStyle"),function(_75,_76){
with(_75){
return _selectionHighlightStyle;
}
}),new objj_method(sel_getUid("setSelectionHighlightStyle:"),function(_77,_78,_79){
with(_77){
if(_79==CPTableViewSelectionHighlightStyleSourceList&&!CPFeatureIsCompatible(CPHTMLCanvasFeature)){
return;
}
_selectionHighlightStyle=_79;
objj_msgSend(_77,"setNeedsDisplay:",YES);
if(_79===CPTableViewSelectionHighlightStyleSourceList){
_destinationDragStyle=CPTableViewDraggingDestinationFeedbackStyleSourceList;
}else{
_destinationDragStyle=CPTableViewDraggingDestinationFeedbackStyleRegular;
}
}
}),new objj_method(sel_getUid("setSelectionHighlightColor:"),function(_7a,_7b,_7c){
with(_7a){
objj_msgSend(_7a,"setValue:forThemeAttribute:",_7c,"selection-color");
objj_msgSend(_7a,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("selectionHighlightColor"),function(_7d,_7e){
with(_7d){
return objj_msgSend(_7d,"currentValueForThemeAttribute:","selection-color");
}
}),new objj_method(sel_getUid("setSelectionGradientColors:"),function(_7f,_80,_81){
with(_7f){
objj_msgSend(_7f,"setValue:forThemeAttribute:",_81,"sourcelist-selection-color");
objj_msgSend(_7f,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("selectionGradientColors"),function(_82,_83){
with(_82){
return objj_msgSend(_82,"currentValueForThemeAttribute:","sourcelist-selection-color");
}
}),new objj_method(sel_getUid("setGridColor:"),function(_84,_85,_86){
with(_84){
objj_msgSend(_84,"setValue:forThemeAttribute:",_86,"grid-color");
objj_msgSend(_84,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("gridColor"),function(_87,_88){
with(_87){
return objj_msgSend(_87,"currentValueForThemeAttribute:","grid-color");
}
}),new objj_method(sel_getUid("setGridStyleMask:"),function(_89,_8a,_8b){
with(_89){
if(_gridStyleMask===_8b){
return;
}
_gridStyleMask=_8b;
objj_msgSend(_89,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("gridStyleMask"),function(_8c,_8d){
with(_8c){
return _gridStyleMask;
}
}),new objj_method(sel_getUid("addTableColumn:"),function(_8e,_8f,_90){
with(_8e){
objj_msgSend(_tableColumns,"addObject:",_90);
objj_msgSend(_90,"setTableView:",_8e);
if(_dirtyTableColumnRangeIndex<0){
_dirtyTableColumnRangeIndex=(_tableColumns.length)-1;
}else{
_dirtyTableColumnRangeIndex=MIN((_tableColumns.length)-1,_dirtyTableColumnRangeIndex);
}
if(objj_msgSend(objj_msgSend(_8e,"sortDescriptors"),"count")>0){
var _91=objj_msgSend(objj_msgSend(_8e,"sortDescriptors"),"objectAtIndex:",0);
if(_90===objj_msgSend(_8e,"_tableColumnForSortDescriptor:",_91)){
var _92=objj_msgSend(_91,"ascending")?objj_msgSend(_8e,"_tableHeaderSortImage"):objj_msgSend(_8e,"_tableHeaderReverseSortImage");
objj_msgSend(_8e,"setIndicatorImage:inTableColumn:",_92,_90);
}
}
objj_msgSend(_8e,"tile");
objj_msgSend(_8e,"setNeedsLayout");
}
}),new objj_method(sel_getUid("removeTableColumn:"),function(_93,_94,_95){
with(_93){
if(objj_msgSend(_95,"tableView")!==_93){
return;
}
var _96=objj_msgSend(_tableColumns,"indexOfObjectIdenticalTo:",_95);
if(_96===CPNotFound){
return;
}
objj_msgSend(_differedColumnDataToRemove,"addObject:",{"column":_95,"shouldBeHidden":objj_msgSend(_95,"isHidden")});
objj_msgSend(_95,"setHidden:",YES);
objj_msgSend(_95,"setTableView:",nil);
var _97=objj_msgSend(_95,"UID");
if(_objectValues[_97]){
_objectValues[_97]=nil;
}
if(_dirtyTableColumnRangeIndex<0){
_dirtyTableColumnRangeIndex=_96;
}else{
_dirtyTableColumnRangeIndex=MIN(_96,_dirtyTableColumnRangeIndex);
}
objj_msgSend(_93,"setNeedsLayout");
}
}),new objj_method(sel_getUid("_setDraggedColumn:"),function(_98,_99,_9a){
with(_98){
if(_draggedColumn===_9a){
return;
}
_draggedColumn=_9a;
objj_msgSend(_98,"reloadDataForRowIndexes:columnIndexes:",_exposedRows,objj_msgSend(CPIndexSet,"indexSetWithIndex:",objj_msgSend(_tableColumns,"indexOfObject:",_9a)));
}
}),new objj_method(sel_getUid("_moveColumn:toColumn:"),function(_9b,_9c,_9d,_9e){
with(_9b){
_9d=+_9d;
_9e=+_9e;
if(_9d===_9e){
return;
}
if(_dirtyTableColumnRangeIndex<0){
_dirtyTableColumnRangeIndex=MIN(_9d,_9e);
}else{
_dirtyTableColumnRangeIndex=MIN(_9d,_9e,_dirtyTableColumnRangeIndex);
}
var _9f=_tableColumns[_9d];
objj_msgSend(_tableColumns,"removeObjectAtIndex:",_9d);
objj_msgSend(_tableColumns,"insertObject:atIndex:",_9f,_9e);
objj_msgSend(objj_msgSend(_9b,"headerView"),"setNeedsLayout");
objj_msgSend(objj_msgSend(_9b,"headerView"),"setNeedsDisplay:",YES);
var _a0=objj_msgSend(CPIndexSet,"indexSetWithIndexesInRange:",CPMakeRange(0,objj_msgSend(_9b,"numberOfRows"))),_a1=objj_msgSend(CPIndexSet,"indexSetWithIndexesInRange:",CPMakeRange(_9d,_9e));
objj_msgSend(_9b,"reloadDataForRowIndexes:columnIndexes:",_a0,_a1);
}
}),new objj_method(sel_getUid("moveColumn:toColumn:"),function(_a2,_a3,_a4,_a5){
with(_a2){
objj_msgSend(_a2,"_moveColumn:toColumn:",_a4,_a5);
objj_msgSend(_a2,"_autosave");
}
}),new objj_method(sel_getUid("_tableColumnVisibilityDidChange:"),function(_a6,_a7,_a8){
with(_a6){
var _a9=objj_msgSend(objj_msgSend(_a6,"tableColumns"),"indexOfObjectIdenticalTo:",_a8);
if(_dirtyTableColumnRangeIndex<0){
_dirtyTableColumnRangeIndex=_a9;
}else{
_dirtyTableColumnRangeIndex=MIN(_a9,_dirtyTableColumnRangeIndex);
}
objj_msgSend(objj_msgSend(_a6,"headerView"),"setNeedsLayout");
objj_msgSend(objj_msgSend(_a6,"headerView"),"setNeedsDisplay:",YES);
var _aa=objj_msgSend(CPIndexSet,"indexSetWithIndexesInRange:",CPMakeRange(0,objj_msgSend(_a6,"numberOfRows")));
objj_msgSend(_a6,"reloadDataForRowIndexes:columnIndexes:",_aa,objj_msgSend(CPIndexSet,"indexSetWithIndex:",_a9));
}
}),new objj_method(sel_getUid("tableColumns"),function(_ab,_ac){
with(_ab){
return _tableColumns;
}
}),new objj_method(sel_getUid("columnWithIdentifier:"),function(_ad,_ae,_af){
with(_ad){
var _b0=0,_b1=(_tableColumns.length);
for(;_b0<_b1;++_b0){
if(objj_msgSend(_tableColumns[_b0],"identifier")===_af){
return _b0;
}
}
return CPNotFound;
}
}),new objj_method(sel_getUid("tableColumnWithIdentifier:"),function(_b2,_b3,_b4){
with(_b2){
var _b5=objj_msgSend(_b2,"columnWithIdentifier:",_b4);
if(_b5===CPNotFound){
return nil;
}
return _tableColumns[_b5];
}
}),new objj_method(sel_getUid("_didResizeTableColumn:"),function(_b6,_b7,_b8){
with(_b6){
objj_msgSend(_b6,"_autosave");
}
}),new objj_method(sel_getUid("selectColumnIndexes:byExtendingSelection:"),function(_b9,_ba,_bb,_bc){
with(_b9){
if((objj_msgSend(_bb,"firstIndex")!=CPNotFound&&objj_msgSend(_bb,"firstIndex")<0)||objj_msgSend(_bb,"lastIndex")>=objj_msgSend(_b9,"numberOfColumns")){
return;
}
if(objj_msgSend(_selectedRowIndexes,"count")>0){
objj_msgSend(_b9,"_updateHighlightWithOldRows:newRows:",_selectedRowIndexes,objj_msgSend(CPIndexSet,"indexSet"));
_selectedRowIndexes=objj_msgSend(CPIndexSet,"indexSet");
}
var _bd=objj_msgSend(_selectedColumnIndexes,"copy");
if(_bc){
objj_msgSend(_selectedColumnIndexes,"addIndexes:",_bb);
}else{
_selectedColumnIndexes=objj_msgSend(_bb,"copy");
}
objj_msgSend(_b9,"_updateHighlightWithOldColumns:newColumns:",_bd,_selectedColumnIndexes);
objj_msgSend(_b9,"setNeedsDisplay:",YES);
if(_headerView){
objj_msgSend(_headerView,"setNeedsDisplay:",YES);
}
objj_msgSend(_b9,"_noteSelectionDidChange");
}
}),new objj_method(sel_getUid("_setSelectedRowIndexes:"),function(_be,_bf,_c0){
with(_be){
if(objj_msgSend(_selectedRowIndexes,"isEqualToIndexSet:",_c0)){
return;
}
var _c1=_selectedRowIndexes;
_lastSelectedRow=(objj_msgSend(_c0,"count")>0)?objj_msgSend(_c0,"lastIndex"):-1;
_selectedRowIndexes=objj_msgSend(_c0,"copy");
objj_msgSend(_be,"_updateHighlightWithOldRows:newRows:",_c1,_selectedRowIndexes);
objj_msgSend(_be,"setNeedsDisplay:",YES);
var _c2=objj_msgSend(objj_msgSend(_be,"class"),"_binderClassForBinding:","selectionIndexes");
objj_msgSend(objj_msgSend(_c2,"getBinding:forObject:","selectionIndexes",_be),"reverseSetValueFor:","selectedRowIndexes");
objj_msgSend(_be,"_noteSelectionDidChange");
}
}),new objj_method(sel_getUid("selectRowIndexes:byExtendingSelection:"),function(_c3,_c4,_c5,_c6){
with(_c3){
if(objj_msgSend(_c5,"isEqualToIndexSet:",_selectedRowIndexes)||((objj_msgSend(_c5,"firstIndex")!=CPNotFound&&objj_msgSend(_c5,"firstIndex")<0)||objj_msgSend(_c5,"lastIndex")>=objj_msgSend(_c3,"numberOfRows"))){
return;
}
if(objj_msgSend(_selectedColumnIndexes,"count")>0){
objj_msgSend(_c3,"_updateHighlightWithOldColumns:newColumns:",_selectedColumnIndexes,objj_msgSend(CPIndexSet,"indexSet"));
_selectedColumnIndexes=objj_msgSend(CPIndexSet,"indexSet");
if(_headerView){
objj_msgSend(_headerView,"setNeedsDisplay:",YES);
}
}
var _c7;
if(_c6){
_c7=objj_msgSend(_selectedRowIndexes,"copy");
objj_msgSend(_c7,"addIndexes:",_c5);
}else{
_c7=objj_msgSend(_c5,"copy");
}
objj_msgSend(_c3,"_setSelectedRowIndexes:",_c7);
}
}),new objj_method(sel_getUid("_updateHighlightWithOldRows:newRows:"),function(_c8,_c9,_ca,_cb){
with(_c8){
var _cc=objj_msgSend(_exposedRows,"firstIndex"),_cd=objj_msgSend(_exposedRows,"lastIndex")-_cc+1,_ce=[],_cf=[],_d0=objj_msgSend(_ca,"copy"),_d1=objj_msgSend(_cb,"copy");
objj_msgSend(_d0,"removeMatches:",_d1);
objj_msgSend(_d0,"getIndexes:maxCount:inIndexRange:",_ce,-1,CPMakeRange(_cc,_cd));
objj_msgSend(_d1,"getIndexes:maxCount:inIndexRange:",_cf,-1,CPMakeRange(_cc,_cd));
for(var _d2 in _dataViewsForTableColumns){
var _d3=_dataViewsForTableColumns[_d2],_d4=_ce.length;
while(_d4--){
objj_msgSend(_c8,"_performSelection:forRow:context:",NO,_ce[_d4],_d3);
}
_d4=_cf.length;
while(_d4--){
objj_msgSend(_c8,"_performSelection:forRow:context:",YES,_cf[_d4],_d3);
}
}
}
}),new objj_method(sel_getUid("_performSelection:forRow:context:"),function(_d5,_d6,_d7,_d8,_d9){
with(_d5){
var _da=_d9[_d8],_db=_d7?"setThemeState:":"unsetThemeState:";
objj_msgSend(_da,"performSelector:withObject:",CPSelectorFromString(_db),CPThemeStateSelectedDataView);
}
}),new objj_method(sel_getUid("_updateHighlightWithOldColumns:newColumns:"),function(_dc,_dd,_de,_df){
with(_dc){
var _e0=objj_msgSend(_exposedColumns,"firstIndex"),_e1=objj_msgSend(_exposedColumns,"lastIndex")-_e0+1,_e2=[],_e3=[],_e4=objj_msgSend(_de,"copy"),_e5=objj_msgSend(_df,"copy"),_e6=[];
objj_msgSend(_e4,"removeMatches:",_e5);
objj_msgSend(_e4,"getIndexes:maxCount:inIndexRange:",_e2,-1,CPMakeRange(_e0,_e1));
objj_msgSend(_e5,"getIndexes:maxCount:inIndexRange:",_e3,-1,CPMakeRange(_e0,_e1));
objj_msgSend(_exposedRows,"getIndexes:maxCount:inIndexRange:",_e6,-1,nil);
var _e7=_e6.length,_e8=_e2.length;
while(_e8--){
var _e9=_e2[_e8],_ea=objj_msgSend(_tableColumns[_e9],"UID"),_eb=_dataViewsForTableColumns[_ea];
for(var i=0;i<_e7;i++){
var _ec=_e6[i],_ed=_eb[_ec];
objj_msgSend(_ed,"unsetThemeState:",CPThemeStateSelectedDataView);
}
if(_headerView){
var _ee=objj_msgSend(_tableColumns[_e9],"headerView");
objj_msgSend(_ee,"unsetThemeState:",CPThemeStateSelected);
}
}
_e8=_e3.length;
while(_e8--){
var _e9=_e3[_e8],_ea=objj_msgSend(_tableColumns[_e9],"UID"),_eb=_dataViewsForTableColumns[_ea];
for(var i=0;i<_e7;i++){
var _ec=_e6[i],_ed=_eb[_ec];
objj_msgSend(_ed,"setThemeState:",CPThemeStateSelectedDataView);
}
if(_headerView){
var _ee=objj_msgSend(_tableColumns[_e9],"headerView");
objj_msgSend(_ee,"setThemeState:",CPThemeStateSelected);
}
}
}
}),new objj_method(sel_getUid("selectedColumn"),function(_ef,_f0){
with(_ef){
objj_msgSend(_selectedColumnIndexes,"lastIndex");
}
}),new objj_method(sel_getUid("selectedColumnIndexes"),function(_f1,_f2){
with(_f1){
return _selectedColumnIndexes;
}
}),new objj_method(sel_getUid("selectedRow"),function(_f3,_f4){
with(_f3){
return _lastSelectedRow;
}
}),new objj_method(sel_getUid("selectedRowIndexes"),function(_f5,_f6){
with(_f5){
return objj_msgSend(_selectedRowIndexes,"copy");
}
}),new objj_method(sel_getUid("deselectColumn:"),function(_f7,_f8,_f9){
with(_f7){
var _fa=objj_msgSend(_selectedColumnIndexes,"copy");
objj_msgSend(_fa,"removeIndex:",_f9);
objj_msgSend(_f7,"selectColumnIndexes:byExtendingSelection:",_fa,NO);
objj_msgSend(_f7,"_noteSelectionDidChange");
}
}),new objj_method(sel_getUid("deselectRow:"),function(_fb,_fc,_fd){
with(_fb){
var _fe=objj_msgSend(_selectedRowIndexes,"copy");
objj_msgSend(_fe,"removeIndex:",_fd);
objj_msgSend(_fb,"selectRowIndexes:byExtendingSelection:",_fe,NO);
objj_msgSend(_fb,"_noteSelectionDidChange");
}
}),new objj_method(sel_getUid("numberOfSelectedColumns"),function(_ff,_100){
with(_ff){
return objj_msgSend(_selectedColumnIndexes,"count");
}
}),new objj_method(sel_getUid("numberOfSelectedRows"),function(self,_101){
with(self){
return objj_msgSend(_selectedRowIndexes,"count");
}
}),new objj_method(sel_getUid("isColumnSelected:"),function(self,_102,_103){
with(self){
return objj_msgSend(_selectedColumnIndexes,"containsIndex:",_103);
}
}),new objj_method(sel_getUid("isRowSelected:"),function(self,_104,aRow){
with(self){
return objj_msgSend(_selectedRowIndexes,"containsIndex:",aRow);
}
}),new objj_method(sel_getUid("deselectAll"),function(self,_105){
with(self){
objj_msgSend(self,"selectRowIndexes:byExtendingSelection:",objj_msgSend(CPIndexSet,"indexSet"),NO);
objj_msgSend(self,"selectColumnIndexes:byExtendingSelection:",objj_msgSend(CPIndexSet,"indexSet"),NO);
}
}),new objj_method(sel_getUid("numberOfColumns"),function(self,_106){
with(self){
return (_tableColumns.length);
}
}),new objj_method(sel_getUid("numberOfRows"),function(self,_107){
with(self){
if(_numberOfRows!==nil){
return _numberOfRows;
}
var _108=objj_msgSend(self,"infoForBinding:","content");
if(_108){
var _109=objj_msgSend(_108,"objectForKey:",CPObservedObjectKey),_10a=objj_msgSend(_108,"objectForKey:",CPObservedKeyPathKey);
_numberOfRows=objj_msgSend(objj_msgSend(_109,"valueForKeyPath:",_10a),"count");
}else{
if(_dataSource&&(_implementedDataSourceMethods&_1)){
_numberOfRows=objj_msgSend(_dataSource,"numberOfRowsInTableView:",self)||0;
}else{
if(_dataSource){
CPLog("no content binding established and data source "+objj_msgSend(_dataSource,"description")+" does not implement numberOfRowsInTableView:");
}
_numberOfRows=0;
}
}
return _numberOfRows;
}
}),new objj_method(sel_getUid("editColumn:row:withEvent:select:"),function(self,_10b,_10c,_10d,_10e,flag){
with(self){
if(!objj_msgSend(self,"isRowSelected:",_10d)){
objj_msgSend(objj_msgSend(CPException,"exceptionWithName:reason:userInfo:","Error","Attempt to edit row="+_10d+" when not selected.",nil),"raise");
}
objj_msgSend(self,"scrollRowToVisible:",_10d);
objj_msgSend(self,"scrollColumnToVisible:",_10c);
_editingCellIndex=CGPointMake(_10c,_10d);
_editingCellIndex._shouldSelect=flag;
objj_msgSend(self,"reloadDataForRowIndexes:columnIndexes:",objj_msgSend(CPIndexSet,"indexSetWithIndex:",_10d),objj_msgSend(CPIndexSet,"indexSetWithIndex:",_10c));
}
}),new objj_method(sel_getUid("editedColumn"),function(self,_10f){
with(self){
if(!_editingCellIndex){
return CPNotFound;
}
return _editingCellIndex.x;
}
}),new objj_method(sel_getUid("editedRow"),function(self,_110){
with(self){
if(!_editingCellIndex){
return CPNotFound;
}
return _editingCellIndex.y;
}
}),new objj_method(sel_getUid("cornerView"),function(self,_111){
with(self){
return _cornerView;
}
}),new objj_method(sel_getUid("setCornerView:"),function(self,_112,_113){
with(self){
if(_cornerView===_113){
return;
}
_cornerView=_113;
var _114=objj_msgSend(objj_msgSend(self,"superview"),"superview");
if(objj_msgSend(_114,"isKindOfClass:",objj_msgSend(CPScrollView,"class"))&&objj_msgSend(_114,"documentView")===self){
objj_msgSend(_114,"_updateCornerAndHeaderView");
}
}
}),new objj_method(sel_getUid("headerView"),function(self,_115){
with(self){
return _headerView;
}
}),new objj_method(sel_getUid("setHeaderView:"),function(self,_116,_117){
with(self){
if(_headerView===_117){
return;
}
objj_msgSend(_headerView,"setTableView:",nil);
_headerView=_117;
if(_headerView){
objj_msgSend(_headerView,"setTableView:",self);
objj_msgSend(_headerView,"setFrameSize:",{width:(objj_msgSend(self,"frame").size.width),height:(objj_msgSend(_headerView,"frame").size.height)});
}
var _118=objj_msgSend(objj_msgSend(self,"superview"),"superview");
if(objj_msgSend(_118,"isKindOfClass:",objj_msgSend(CPScrollView,"class"))&&objj_msgSend(_118,"documentView")===self){
objj_msgSend(_118,"_updateCornerAndHeaderView");
}
}
}),new objj_method(sel_getUid("_recalculateTableColumnRanges"),function(self,_119){
with(self){
if(_dirtyTableColumnRangeIndex<0){
return;
}
_numberOfHiddenColumns=0;
var _11a=_dirtyTableColumnRangeIndex,_11b=(_tableColumns.length),x=_11a===0?0:CPMaxRange(_tableColumnRanges[_11a-1]);
for(;_11a<_11b;++_11a){
var _11c=_tableColumns[_11a];
if(objj_msgSend(_11c,"isHidden")){
_numberOfHiddenColumns+=1;
_tableColumnRanges[_11a]=CPMakeRange(x,0);
}else{
var _11d=objj_msgSend(_tableColumns[_11a],"width")+_intercellSpacing.width;
_tableColumnRanges[_11a]=CPMakeRange(x,_11d);
x+=_11d;
}
}
_tableColumnRanges.length=_11b;
_dirtyTableColumnRangeIndex=CPNotFound;
}
}),new objj_method(sel_getUid("rectOfColumn:"),function(self,_11e,_11f){
with(self){
_11f=+_11f;
if(_11f<0||_11f>=(_tableColumns.length)){
return {origin:{x:0,y:0},size:{width:0,height:0}};
}
var _120=objj_msgSend(objj_msgSend(self,"tableColumns"),"objectAtIndex:",_11f);
if(objj_msgSend(_120,"isHidden")){
return {origin:{x:0,y:0},size:{width:0,height:0}};
}
if(_dirtyTableColumnRangeIndex!==CPNotFound){
objj_msgSend(self,"_recalculateTableColumnRanges");
}
var _121=_tableColumnRanges[_11f];
return {origin:{x:_121.location,y:0},size:{width:_121.length,height:(objj_msgSend(self,"bounds").size.height)}};
}
}),new objj_method(sel_getUid("_rectOfRow:checkRange:"),function(self,_122,_123,_124){
with(self){
var _125=objj_msgSend(self,"numberOfRows")-1;
if(_124&&(_123>_125||_123<0)){
return {origin:{x:0,y:0},size:{width:0,height:0}};
}
if(_implementedDelegateMethods&_d){
var _126=MIN(_123,_125);
if(_126!==CPNotFound){
var y=_cachedRowHeights[_126].heightAboveRow,_127=_cachedRowHeights[_126].height+_intercellSpacing.height,_128=_123-_126;
}else{
y=_123*(_rowHeight+_intercellSpacing.height);
_127=_rowHeight+_intercellSpacing.height;
}
if(_128>0){
y+=_128*(_rowHeight+_intercellSpacing.height);
_127=_rowHeight+_intercellSpacing.height;
}
}else{
var y=_123*(_rowHeight+_intercellSpacing.height),_127=_rowHeight+_intercellSpacing.height;
}
return {origin:{x:0,y:y},size:{width:(objj_msgSend(self,"bounds").size.width),height:_127}};
}
}),new objj_method(sel_getUid("rectOfRow:"),function(self,_129,_12a){
with(self){
return objj_msgSend(self,"_rectOfRow:checkRange:",_12a,YES);
}
}),new objj_method(sel_getUid("rowsInRect:"),function(self,_12b,_12c){
with(self){
if(_numberOfRows<=0){
return CPMakeRange(0,0);
}
var _12d=objj_msgSend(self,"bounds");
if(!CGRectIntersectsRect(_12c,_12d)){
return CPMakeRange(0,0);
}
var _12e=objj_msgSend(self,"rowAtPoint:",_12c.origin);
if(_12e<0){
_12e=0;
}
var _12f=objj_msgSend(self,"rowAtPoint:",{x:0,y:(_12c.origin.y+_12c.size.height)});
if(_12f<0){
_12f=_numberOfRows-1;
}
return CPMakeRange(_12e,_12f-_12e+1);
}
}),new objj_method(sel_getUid("_unboundedRowsInRect:"),function(self,_130,_131){
with(self){
var _132=objj_msgSend(self,"rowsInRect:",_131),_133=CPMaxRange(_132),_134=objj_msgSend(self,"_rectOfRow:checkRange:",_133,NO),_135=(_131.origin.y+_131.size.height),_136=(_134.origin.y+_134.size.height);
if(_135<=_136){
return _132;
}
var _137=CEIL(_135-_136)/(objj_msgSend(self,"rowHeight")+_intercellSpacing.height);
_132.length+=_137+1;
return _132;
}
}),new objj_method(sel_getUid("columnIndexesInRect:"),function(self,_138,_139){
with(self){
var _13a=MAX(0,objj_msgSend(self,"columnAtPoint:",{x:_139.origin.x,y:0})),_13b=objj_msgSend(self,"columnAtPoint:",{x:(_139.origin.x+_139.size.width),y:0});
if(_13b===CPNotFound){
_13b=(_tableColumns.length)-1;
}
if(_numberOfHiddenColumns<=0){
return objj_msgSend(CPIndexSet,"indexSetWithIndexesInRange:",CPMakeRange(_13a,_13b-_13a+1));
}
var _13c=objj_msgSend(CPIndexSet,"indexSet");
for(;_13a<=_13b;++_13a){
var _13d=_tableColumns[_13a];
if(!objj_msgSend(_13d,"isHidden")){
objj_msgSend(_13c,"addIndex:",_13a);
}
}
return _13c;
}
}),new objj_method(sel_getUid("columnAtPoint:"),function(self,_13e,_13f){
with(self){
var _140=objj_msgSend(self,"bounds");
if(!(_13f.x>=(_140.origin.x)&&_13f.y>=(_140.origin.y)&&_13f.x<(_140.origin.x+_140.size.width)&&_13f.y<(_140.origin.y+_140.size.height))){
return CPNotFound;
}
if(_dirtyTableColumnRangeIndex!==CPNotFound){
objj_msgSend(self,"_recalculateTableColumnRanges");
}
var x=_13f.x,low=0,high=_tableColumnRanges.length-1;
while(low<=high){
var _141=FLOOR(low+(high-low)/2),_142=_tableColumnRanges[_141];
if(x<_142.location){
high=_141-1;
}else{
if(x>=CPMaxRange(_142)){
low=_141+1;
}else{
var _143=_tableColumnRanges.length;
while(_141<_143&&objj_msgSend(_tableColumns[_141],"isHidden")){
++_141;
}
if(_141<_143){
return _141;
}
return CPNotFound;
}
}
}
return CPNotFound;
}
}),new objj_method(sel_getUid("rowAtPoint:"),function(self,_144,_145){
with(self){
if(_implementedDelegateMethods&_d){
return idx=objj_msgSend(_cachedRowHeights,"indexOfObject:inSortedRange:options:usingComparator:",_145,nil,0,function(_146,_147){
var _148=_147.heightAboveRow;
if(_146.y<_148){
return CPOrderedAscending;
}
if(_146.y>_148+_147.height+_intercellSpacing.height){
return CPOrderedDescending;
}
return CPOrderedSame;
});
}
var y=_145.y,row=FLOOR(y/(_rowHeight+_intercellSpacing.height));
if(row>=_numberOfRows){
return CPNotFound;
}
return row;
}
}),new objj_method(sel_getUid("frameOfDataViewAtColumn:row:"),function(self,_149,_14a,aRow){
with(self){
if(_dirtyTableColumnRangeIndex!==CPNotFound){
objj_msgSend(self,"_recalculateTableColumnRanges");
}
if(_14a>objj_msgSend(self,"numberOfColumns")||aRow>objj_msgSend(self,"numberOfRows")){
return {origin:{x:0,y:0},size:{width:0,height:0}};
}
var _14b=_tableColumnRanges[_14a],_14c=objj_msgSend(self,"rectOfRow:",aRow),_14d=FLOOR(_intercellSpacing.width/2),_14e=FLOOR(_intercellSpacing.height/2);
return {origin:{x:_14b.location+_14d,y:(_14c.origin.y)+_14e},size:{width:_14b.length-_intercellSpacing.width,height:(_14c.size.height)-_intercellSpacing.height}};
}
}),new objj_method(sel_getUid("resizeWithOldSuperviewSize:"),function(self,_14f,_150){
with(self){
objj_msgSendSuper({receiver:self,super_class:objj_getClass("CPTableView").super_class},"resizeWithOldSuperviewSize:",_150);
if(_disableAutomaticResizing){
return;
}
var mask=_columnAutoResizingStyle;
if(!_lastColumnShouldSnap){
var _151=objj_msgSend(self,"superview");
if(!_151||!objj_msgSend(_151,"isKindOfClass:",objj_msgSend(CPClipView,"class"))){
return;
}
var _152=objj_msgSend(_151,"bounds").size.width,_153=(objj_msgSend(self,"rectOfColumn:",objj_msgSend(self,"numberOfColumns")-1).origin.x+objj_msgSend(self,"rectOfColumn:",objj_msgSend(self,"numberOfColumns")-1).size.width);
if(_153>=_152&&_153<=_150.width||_153<=_152&&_153>=_150.width){
_lastColumnShouldSnap=YES;
}else{
if(mask===CPTableViewUniformColumnAutoresizingStyle){
return;
}
}
}
if(mask===CPTableViewUniformColumnAutoresizingStyle){
objj_msgSend(self,"_resizeAllColumnUniformlyWithOldSize:",_150);
}else{
if(mask===CPTableViewLastColumnOnlyAutoresizingStyle){
objj_msgSend(self,"sizeLastColumnToFit");
}else{
if(mask===CPTableViewFirstColumnOnlyAutoresizingStyle){
objj_msgSend(self,"_autoResizeFirstColumn");
}
}
}
}
}),new objj_method(sel_getUid("_autoResizeFirstColumn"),function(self,_154){
with(self){
var _155=objj_msgSend(self,"superview");
if(!_155){
return;
}
if(_dirtyTableColumnRangeIndex!==CPNotFound){
objj_msgSend(self,"_recalculateTableColumnRanges");
}
var _156=(_tableColumns.length),_157=nil,_158=0,i=0;
for(;i<_156;i++){
var _159=_tableColumns[i];
if(!objj_msgSend(_159,"isHidden")){
if(!_157){
_157=_159;
}
_158+=objj_msgSend(_159,"width")+_intercellSpacing.width;
}
}
if(_157){
var _15a=objj_msgSend(_155,"bounds").size,_15b=_15a.width-_158;
_15b+=objj_msgSend(_157,"width");
objj_msgSend(_157,"_tryToResizeToWidth:",_15b);
}
objj_msgSend(self,"setNeedsLayout");
}
}),new objj_method(sel_getUid("_resizeAllColumnUniformlyWithOldSize:"),function(self,_15c,_15d){
with(self){
var _15e=objj_msgSend(self,"superview");
if(!_15e||!objj_msgSend(_15e,"isKindOfClass:",objj_msgSend(CPClipView,"class"))){
return;
}
if(_dirtyTableColumnRangeIndex!==CPNotFound){
objj_msgSend(self,"_recalculateTableColumnRanges");
}
var _15f=objj_msgSend(_15e,"bounds").size.width,_160=(_tableColumns.length),_161=objj_msgSend(CPIndexSet,"indexSet"),_162=0,i=0;
for(;i<_160;i++){
var _163=_tableColumns[i];
if(!objj_msgSend(_163,"isHidden")&&(objj_msgSend(_163,"resizingMask")&CPTableColumnAutoresizingMask)){
objj_msgSend(_161,"addIndex:",i);
}
}
var _164=(objj_msgSend(self,"rectOfColumn:",objj_msgSend(_161,"lastIndex")).origin.x+objj_msgSend(self,"rectOfColumn:",objj_msgSend(_161,"lastIndex")).size.width),_162=_15f-_164,_165=objj_msgSend(_161,"count"),_166=0;
while(_162&&_165){
_166+=_162/_165;
_162=0;
var _167=CPNotFound;
while((_167=objj_msgSend(_161,"indexGreaterThanIndex:",_167))!==CPNotFound){
var item=_tableColumns[_167],_168=objj_msgSend(item,"width")+_166,_169=objj_msgSend(item,"_tryToResizeToWidth:",_168);
if(_169){
objj_msgSend(_161,"removeIndex:",_167);
_162+=_169;
}
}
}
while(_160--&&objj_msgSend(_tableColumns[_160],"isHidden")){
}
var _16a=_15f-(objj_msgSend(self,"rectOfColumn:",_160).origin.x+objj_msgSend(self,"rectOfColumn:",_160).size.width)-(objj_msgSend(self,"intercellSpacing").width||1),_16b=objj_msgSend(item,"width")+_16a;
objj_msgSend(item,"_tryToResizeToWidth:",_16b);
}
}),new objj_method(sel_getUid("setColumnAutoresizingStyle:"),function(self,_16c,_16d){
with(self){
_columnAutoResizingStyle=_16d;
}
}),new objj_method(sel_getUid("columnAutoresizingStyle"),function(self,_16e){
with(self){
return _columnAutoResizingStyle;
}
}),new objj_method(sel_getUid("sizeLastColumnToFit"),function(self,_16f){
with(self){
_lastColumnShouldSnap=YES;
var _170=objj_msgSend(self,"superview");
if(!_170){
return;
}
var _171=objj_msgSend(_170,"bounds").size;
if(_dirtyTableColumnRangeIndex!==CPNotFound){
objj_msgSend(self,"_recalculateTableColumnRanges");
}
var _172=(_tableColumns.length);
while(_172--&&objj_msgSend(_tableColumns[_172],"isHidden")){
}
if(_172>=0){
var _173=_tableColumns[_172],_174=MAX(0,_171.width-CGRectGetMinX(objj_msgSend(self,"rectOfColumn:",_172))-_intercellSpacing.width);
objj_msgSend(_173,"_tryToResizeToWidth:",_174);
}
objj_msgSend(self,"setNeedsLayout");
}
}),new objj_method(sel_getUid("noteNumberOfRowsChanged"),function(self,_175){
with(self){
var _176=_numberOfRows;
_numberOfRows=nil;
_cachedRowHeights=[];
objj_msgSend(self,"noteHeightOfRowsWithIndexesChanged:",objj_msgSend(CPIndexSet,"indexSetWithIndexesInRange:",CPMakeRange(0,objj_msgSend(self,"numberOfRows"))));
var _177=_176-_numberOfRows;
if(_177>0){
var _178=objj_msgSend(_selectedRowIndexes,"count");
objj_msgSend(_selectedRowIndexes,"removeIndexesInRange:",CPMakeRange(_numberOfRows,_177));
if(!objj_msgSend(_selectedRowIndexes,"containsIndex:",objj_msgSend(self,"selectedRow"))){
_lastSelectedRow=CPNotFound;
}
if(_178>objj_msgSend(_selectedRowIndexes,"count")){
objj_msgSend(self,"_noteSelectionDidChange");
}
}
objj_msgSend(self,"tile");
}
}),new objj_method(sel_getUid("noteHeightOfRowsWithIndexesChanged:"),function(self,_179,_17a){
with(self){
if(!(_implementedDelegateMethods&_d)){
return;
}
var i=objj_msgSend(_17a,"firstIndex"),_17b=_numberOfRows-i,_17c=(i>0)?_cachedRowHeights[i-1].height+_cachedRowHeights[i-1].heightAboveRow+_intercellSpacing.height:0;
for(;i<_17b;i++){
if(objj_msgSend(_17a,"containsIndex:",i)){
var _17d=objj_msgSend(_delegate,"tableView:heightOfRow:",self,i);
}
_cachedRowHeights[i]={"height":_17d,"heightAboveRow":_17c};
_17c+=_17d+_intercellSpacing.height;
}
}
}),new objj_method(sel_getUid("tile"),function(self,_17e){
with(self){
if(_dirtyTableColumnRangeIndex!==CPNotFound){
objj_msgSend(self,"_recalculateTableColumnRanges");
}
var _17f=_tableColumnRanges.length>0?CPMaxRange(objj_msgSend(_tableColumnRanges,"lastObject")):0,_180=objj_msgSend(self,"superview");
if(!(_implementedDelegateMethods&_d)){
var _181=(_rowHeight+_intercellSpacing.height)*_numberOfRows;
}else{
if(objj_msgSend(self,"numberOfRows")===0){
var _181=0;
}else{
if(objj_msgSend(self,"numberOfRows")!==_cachedRowHeights.length){
objj_msgSend(self,"noteHeightOfRowsWithIndexesChanged:",objj_msgSend(CPIndexSet,"indexSetWithIndexesInRange:",CPMakeRange(0,objj_msgSend(self,"numberOfRows"))));
}
var _182=_cachedRowHeights[_cachedRowHeights.length-1],_181=_182.heightAboveRow+_182.height+_intercellSpacing.height;
}
}
if(objj_msgSend(_180,"isKindOfClass:",objj_msgSend(CPClipView,"class"))){
var _183=objj_msgSend(_180,"bounds").size;
_17f=MAX(_183.width,_17f);
_181=MAX(_183.height,_181);
}
objj_msgSend(self,"setFrameSize:",{width:_17f,height:_181});
objj_msgSend(self,"setNeedsLayout");
objj_msgSend(self,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("scrollRowToVisible:"),function(self,_184,_185){
with(self){
var _186=objj_msgSend(self,"visibleRect"),_187=objj_msgSend(self,"rectOfRow:",_185);
_186.origin.y=_187.origin.y;
_186.size.height=_187.size.height;
objj_msgSend(self,"scrollRectToVisible:",_186);
}
}),new objj_method(sel_getUid("scrollColumnToVisible:"),function(self,_188,_189){
with(self){
var _18a=objj_msgSend(self,"visibleRect"),_18b=objj_msgSend(self,"rectOfColumn:",_189);
_18a.origin.x=_18b.origin.x;
_18a.size.width=_18b.size.width;
objj_msgSend(self,"scrollRectToVisible:",_18a);
objj_msgSend(_headerView,"scrollRectToVisible:",_18b);
}
}),new objj_method(sel_getUid("setAutosaveName:"),function(self,_18c,_18d){
with(self){
if(_autosaveName===_18d){
return;
}
_autosaveName=_18d;
objj_msgSend(self,"setAutosaveTableColumns:",!!_18d);
objj_msgSend(self,"_restoreFromAutosave");
}
}),new objj_method(sel_getUid("autosaveName"),function(self,_18e){
with(self){
return _autosaveName;
}
}),new objj_method(sel_getUid("setAutosaveTableColumns:"),function(self,_18f,_190){
with(self){
_autosaveTableColumns=_190;
}
}),new objj_method(sel_getUid("autosaveTableColumns"),function(self,_191){
with(self){
return _autosaveTableColumns;
}
}),new objj_method(sel_getUid("_columnsKeyForAutosaveName:"),function(self,_192,_193){
with(self){
return "CPTableView Columns "+_193;
}
}),new objj_method(sel_getUid("_autosaveEnabled"),function(self,_194){
with(self){
return objj_msgSend(self,"autosaveName")&&objj_msgSend(self,"autosaveTableColumns");
}
}),new objj_method(sel_getUid("_autosave"),function(self,_195){
with(self){
if(!objj_msgSend(self,"_autosaveEnabled")){
return;
}
var _196=objj_msgSend(CPUserDefaults,"standardUserDefaults"),_197=objj_msgSend(self,"autosaveName");
var _198=objj_msgSend(self,"tableColumns"),_199=[];
for(var i=0;i<objj_msgSend(_198,"count");i++){
var _19a=objj_msgSend(_198,"objectAtIndex:",i),_19b=objj_msgSend(CPDictionary,"dictionaryWithJSObject:",{"identifier":objj_msgSend(_19a,"identifier"),"width":objj_msgSend(_19a,"width")});
objj_msgSend(_199,"addObject:",_19b);
}
objj_msgSend(_196,"setObject:forKey:",_199,objj_msgSend(self,"_columnsKeyForAutosaveName:",_197));
}
}),new objj_method(sel_getUid("_restoreFromAutosave"),function(self,_19c){
with(self){
if(!objj_msgSend(self,"_autosaveEnabled")){
return;
}
var _19d=objj_msgSend(CPUserDefaults,"standardUserDefaults"),_19e=objj_msgSend(self,"autosaveName"),_19f=objj_msgSend(_19d,"objectForKey:",objj_msgSend(self,"_columnsKeyForAutosaveName:",_19e));
for(var i=0;i<objj_msgSend(_19f,"count");i++){
var _1a0=objj_msgSend(_19f,"objectAtIndex:",i),_1a1=objj_msgSend(_1a0,"objectForKey:","identifier"),_1a2=objj_msgSend(self,"columnWithIdentifier:",_1a1),_1a3=objj_msgSend(self,"tableColumnWithIdentifier:",_1a1);
objj_msgSend(self,"_moveColumn:toColumn:",_1a2,i);
objj_msgSend(_1a3,"setWidth:",objj_msgSend(_1a0,"objectForKey:","width"));
}
}
}),new objj_method(sel_getUid("setDelegate:"),function(self,_1a4,_1a5){
with(self){
if(_delegate===_1a5){
return;
}
var _1a6=objj_msgSend(CPNotificationCenter,"defaultCenter");
if(_delegate){
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("tableViewColumnDidMove:"))){
objj_msgSend(_1a6,"removeObserver:name:object:",_delegate,CPTableViewColumnDidMoveNotification,self);
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("tableViewColumnDidResize:"))){
objj_msgSend(_1a6,"removeObserver:name:object:",_delegate,CPTableViewColumnDidResizeNotification,self);
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("tableViewSelectionDidChange:"))){
objj_msgSend(_1a6,"removeObserver:name:object:",_delegate,CPTableViewSelectionDidChangeNotification,self);
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("tableViewSelectionIsChanging:"))){
objj_msgSend(_1a6,"removeObserver:name:object:",_delegate,CPTableViewSelectionIsChangingNotification,self);
}
}
_delegate=_1a5;
_implementedDelegateMethods=0;
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("selectionShouldChangeInTableView:"))){
_implementedDelegateMethods|=_9;
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("tableView:dataViewForTableColumn:row:"))){
_implementedDelegateMethods|=_a;
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("tableView:didClickTableColumn:"))){
_implementedDelegateMethods|=_b;
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("tableView:didDragTableColumn:"))){
_implementedDelegateMethods|=_c;
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("tableView:heightOfRow:"))){
_implementedDelegateMethods|=_d;
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("tableView:isGroupRow:"))){
_implementedDelegateMethods|=_e;
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("tableView:mouseDownInHeaderOfTableColumn:"))){
_implementedDelegateMethods|=_f;
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("tableView:nextTypeSelectMatchFromRow:toRow:forString:"))){
_implementedDelegateMethods|=_10;
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("tableView:selectionIndexesForProposedSelection:"))){
_implementedDelegateMethods|=_11;
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("tableView:shouldEditTableColumn:row:"))){
_implementedDelegateMethods|=_12;
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("tableView:shouldSelectRow:"))){
_implementedDelegateMethods|=_13;
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("tableView:shouldSelectTableColumn:"))){
_implementedDelegateMethods|=_14;
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("tableView:shouldShowViewExpansionForTableColumn:row:"))){
_implementedDelegateMethods|=_15;
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("tableView:shouldTrackView:forTableColumn:row:"))){
_implementedDelegateMethods|=_16;
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("tableView:shouldTypeSelectForEvent:withCurrentSearchString:"))){
_implementedDelegateMethods|=_17;
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("tableView:toolTipForView:rect:tableColumn:row:mouseLocation:"))){
_implementedDelegateMethods|=_18;
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("tableView:typeSelectStringForTableColumn:row:"))){
_implementedDelegateMethods|=_19;
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("tableView:willDisplayView:forTableColumn:row:"))){
_implementedDelegateMethods|=_1a;
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("tableView:menuForTableColumn:row:"))){
_implementedDelegateMethods|=_1d;
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("tableViewColumnDidMove:"))){
objj_msgSend(_1a6,"addObserver:selector:name:object:",_delegate,sel_getUid("tableViewColumnDidMove:"),CPTableViewColumnDidMoveNotification,self);
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("tableViewColumnDidResize:"))){
objj_msgSend(_1a6,"addObserver:selector:name:object:",_delegate,sel_getUid("tableViewColumnDidResize:"),CPTableViewColumnDidResizeNotification,self);
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("tableViewSelectionDidChange:"))){
objj_msgSend(_1a6,"addObserver:selector:name:object:",_delegate,sel_getUid("tableViewSelectionDidChange:"),CPTableViewSelectionDidChangeNotification,self);
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("tableViewSelectionIsChanging:"))){
objj_msgSend(_1a6,"addObserver:selector:name:object:",_delegate,sel_getUid("tableViewSelectionIsChanging:"),CPTableViewSelectionIsChangingNotification,self);
}
}
}),new objj_method(sel_getUid("delegate"),function(self,_1a7){
with(self){
return _delegate;
}
}),new objj_method(sel_getUid("_sendDelegateDidClickColumn:"),function(self,_1a8,_1a9){
with(self){
if(_implementedDelegateMethods&_b){
objj_msgSend(_delegate,"tableView:didClickTableColumn:",self,_tableColumns[_1a9]);
}
}
}),new objj_method(sel_getUid("_sendDelegateDidDragColumn:"),function(self,_1aa,_1ab){
with(self){
if(_implementedDelegateMethods&_c){
objj_msgSend(_delegate,"tableView:didDragTableColumn:",self,_tableColumns[_1ab]);
}
}
}),new objj_method(sel_getUid("_sendDelegateDidMouseDownInHeader:"),function(self,_1ac,_1ad){
with(self){
if(_implementedDelegateMethods&_f){
objj_msgSend(_delegate,"tableView:mouseDownInHeaderOfTableColumn:",self,_tableColumns[_1ad]);
}
}
}),new objj_method(sel_getUid("_sendDelegateDeleteKeyPressed"),function(self,_1ae){
with(self){
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("tableViewDeleteKeyPressed:"))){
objj_msgSend(_delegate,"tableViewDeleteKeyPressed:",self);
return YES;
}
return NO;
}
}),new objj_method(sel_getUid("_sendDataSourceSortDescriptorsDidChange:"),function(self,_1af,_1b0){
with(self){
if(_implementedDataSourceMethods&_8){
objj_msgSend(_dataSource,"tableView:sortDescriptorsDidChange:",self,_1b0);
}
}
}),new objj_method(sel_getUid("_didClickTableColumn:modifierFlags:"),function(self,_1b1,_1b2,_1b3){
with(self){
objj_msgSend(self,"_sendDelegateDidClickColumn:",_1b2);
if(_allowsColumnSelection){
objj_msgSend(self,"_noteSelectionIsChanging");
if(_1b3&CPCommandKeyMask){
if(objj_msgSend(self,"isColumnSelected:",_1b2)){
objj_msgSend(self,"deselectColumn:",_1b2);
}else{
if(objj_msgSend(self,"allowsMultipleSelection")==YES){
objj_msgSend(self,"selectColumnIndexes:byExtendingSelection:",objj_msgSend(CPIndexSet,"indexSetWithIndex:",_1b2),YES);
}
}
return;
}else{
if(_1b3&CPShiftKeyMask){
var _1b4=MIN(_1b2,objj_msgSend(_selectedColumnIndexes,"lastIndex")),_1b5=MAX(_1b2,objj_msgSend(_selectedColumnIndexes,"firstIndex"));
objj_msgSend(self,"selectColumnIndexes:byExtendingSelection:",objj_msgSend(CPIndexSet,"indexSetWithIndexesInRange:",CPMakeRange(_1b4,_1b5-_1b4+1)),YES);
return;
}else{
objj_msgSend(self,"selectColumnIndexes:byExtendingSelection:",objj_msgSend(CPIndexSet,"indexSetWithIndex:",_1b2),NO);
}
}
}
objj_msgSend(self,"_changeSortDescriptorsForClickOnColumn:",_1b2);
}
}),new objj_method(sel_getUid("_changeSortDescriptorsForClickOnColumn:"),function(self,_1b6,_1b7){
with(self){
var _1b8=objj_msgSend(_tableColumns,"objectAtIndex:",_1b7),_1b9=objj_msgSend(_1b8,"sortDescriptorPrototype");
if(!_1b9){
return;
}
var _1ba=nil,_1bb=objj_msgSend(self,"sortDescriptors"),_1bc=objj_msgSend(CPArray,"arrayWithArray:",_1bb),e=objj_msgSend(_1bc,"objectEnumerator"),_1bd=nil,_1be=objj_msgSend(CPArray,"array");
if(objj_msgSend(_sortDescriptors,"count")>0){
_1ba=objj_msgSend(objj_msgSend(self,"sortDescriptors"),"objectAtIndex:",0);
}
while((_1bd=objj_msgSend(e,"nextObject"))!=nil){
if(objj_msgSend(objj_msgSend(_1bd,"key"),"isEqual:",objj_msgSend(_1b9,"key"))){
objj_msgSend(_1be,"addObject:",_1bd);
}
}
if(objj_msgSend(objj_msgSend(_1b9,"key"),"isEqual:",objj_msgSend(_1ba,"key"))){
_1b9=objj_msgSend(_1ba,"reversedSortDescriptor");
}
objj_msgSend(_1bc,"removeObjectsInArray:",_1be);
objj_msgSend(_1bc,"insertObject:atIndex:",_1b9,0);
objj_msgSend(self,"setHighlightedTableColumn:",_1b8);
objj_msgSend(self,"setSortDescriptors:",_1bc);
}
}),new objj_method(sel_getUid("setIndicatorImage:inTableColumn:"),function(self,_1bf,_1c0,_1c1){
with(self){
if(_1c1){
var _1c2=objj_msgSend(_1c1,"headerView");
if(objj_msgSend(_1c2,"respondsToSelector:",sel_getUid("_setIndicatorImage:"))){
objj_msgSend(_1c2,"_setIndicatorImage:",_1c0);
}
}
}
}),new objj_method(sel_getUid("_tableHeaderSortImage"),function(self,_1c3){
with(self){
return objj_msgSend(self,"currentValueForThemeAttribute:","sort-image");
}
}),new objj_method(sel_getUid("_tableHeaderReverseSortImage"),function(self,_1c4){
with(self){
return objj_msgSend(self,"currentValueForThemeAttribute:","sort-image-reversed");
}
}),new objj_method(sel_getUid("highlightedTableColumn"),function(self,_1c5){
with(self){
return _currentHighlightedTableColumn;
}
}),new objj_method(sel_getUid("setHighlightedTableColumn:"),function(self,_1c6,_1c7){
with(self){
if(_currentHighlightedTableColumn==_1c7){
return;
}
if(_headerView){
if(_currentHighlightedTableColumn!=nil){
objj_msgSend(objj_msgSend(_currentHighlightedTableColumn,"headerView"),"unsetThemeState:",CPThemeStateSelected);
}
if(_1c7!=nil){
objj_msgSend(objj_msgSend(_1c7,"headerView"),"setThemeState:",CPThemeStateSelected);
}
}
_currentHighlightedTableColumn=_1c7;
}
}),new objj_method(sel_getUid("canDragRowsWithIndexes:atPoint:"),function(self,_1c8,_1c9,_1ca){
with(self){
return YES;
}
}),new objj_method(sel_getUid("dragImageForRowsWithIndexes:tableColumns:event:offset:"),function(self,_1cb,_1cc,_1cd,_1ce,_1cf){
with(self){
return objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:","Frameworks/AppKit/Resources/GenericFile.png",CGSizeMake(32,32));
}
}),new objj_method(sel_getUid("dragViewForRowsWithIndexes:tableColumns:event:offset:"),function(self,_1d0,_1d1,_1d2,_1d3,_1d4){
with(self){
var _1d5=objj_msgSend(self,"bounds"),view=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",_1d5);
objj_msgSend(view,"setAlphaValue:",0.7);
var _1d6=objj_msgSend(_1d2,"count");
while(_1d6--){
var _1d7=objj_msgSend(_1d2,"objectAtIndex:",_1d6),row=objj_msgSend(_1d1,"firstIndex");
while(row!==CPNotFound){
var _1d8=objj_msgSend(self,"_newDataViewForRow:tableColumn:",row,_1d7);
objj_msgSend(_1d8,"setFrame:",objj_msgSend(self,"frameOfDataViewAtColumn:row:",_1d6,row));
objj_msgSend(_1d8,"setObjectValue:",objj_msgSend(self,"_objectValueForTableColumn:row:",_1d7,row));
objj_msgSend(_1d7,"_prepareDataView:forRow:",_1d8,row);
objj_msgSend(view,"addSubview:",_1d8);
row=objj_msgSend(_1d1,"indexGreaterThanIndex:",row);
}
}
var _1d9=objj_msgSend(self,"convertPoint:fromView:",objj_msgSend(_1d3,"locationInWindow"),nil);
_1d4.x=(_1d5.size.width)/2-_1d9.x;
_1d4.y=(_1d5.size.height)/2-_1d9.y;
return view;
}
}),new objj_method(sel_getUid("_dragViewForColumn:event:offset:"),function(self,_1da,_1db,_1dc,_1dd){
with(self){
var _1de=objj_msgSend(objj_msgSend(_CPColumnDragView,"alloc"),"initWithLineColor:",objj_msgSend(self,"gridColor")),_1df=objj_msgSend(objj_msgSend(self,"tableColumns"),"objectAtIndex:",_1db),_1e0={origin:{x:0,y:0},size:{width:objj_msgSend(_1df,"width"),height:(objj_msgSend(self,"exposedRect").size.height)+23}},_1e1=objj_msgSend(self,"rectOfColumn:",_1db),_1e2=objj_msgSend(_1df,"headerView"),row=objj_msgSend(_exposedRows,"firstIndex");
while(row!==CPNotFound){
var _1e3=objj_msgSend(self,"_newDataViewForRow:tableColumn:",row,_1df),_1e4=objj_msgSend(self,"frameOfDataViewAtColumn:row:",_1db,row);
_1e4.origin.x=0;
_1e4.origin.y=((_1e4.origin.y)-(objj_msgSend(self,"exposedRect").origin.y))+23;
objj_msgSend(_1e3,"setFrame:",_1e4);
objj_msgSend(_1e3,"setObjectValue:",objj_msgSend(self,"_objectValueForTableColumn:row:",_1df,row));
objj_msgSend(_1de,"addSubview:",_1e3);
row=objj_msgSend(_exposedRows,"indexGreaterThanIndex:",row);
}
var _1e5=objj_msgSend(_1e2,"frame");
_1e5.origin={x:0,y:0};
var _1e6=objj_msgSend(objj_msgSend(_CPTableColumnHeaderView,"alloc"),"initWithFrame:",_1e5);
objj_msgSend(_1e6,"setStringValue:",objj_msgSend(_1e2,"stringValue"));
objj_msgSend(_1e6,"setThemeState:",objj_msgSend(_1e2,"themeState"));
objj_msgSend(_1de,"addSubview:",_1e6);
objj_msgSend(_1de,"setBackgroundColor:",objj_msgSend(CPColor,"whiteColor"));
objj_msgSend(_1de,"setAlphaValue:",0.7);
objj_msgSend(_1de,"setFrame:",_1e0);
return _1de;
}
}),new objj_method(sel_getUid("setDraggingSourceOperationMask:forLocal:"),function(self,_1e7,mask,_1e8){
with(self){
_dragOperationDefaultMask=mask;
}
}),new objj_method(sel_getUid("setDropRow:dropOperation:"),function(self,_1e9,row,_1ea){
with(self){
if(row>objj_msgSend(self,"numberOfRows")&&_1ea===CPTableViewDropOn){
var _1eb=objj_msgSend(self,"numberOfRows")+1,_1ec="Attempt to set dropRow="+row+" dropOperation=CPTableViewDropOn when [0 - "+_1eb+"] is valid range of rows.";
objj_msgSend(objj_msgSend(CPException,"exceptionWithName:reason:userInfo:","Error",_1ec,nil),"raise");
}
_retargetedDropRow=row;
_retargetedDropOperation=_1ea;
}
}),new objj_method(sel_getUid("setDraggingDestinationFeedbackStyle:"),function(self,_1ed,_1ee){
with(self){
_destinationDragStyle=_1ee;
}
}),new objj_method(sel_getUid("draggingDestinationFeedbackStyle"),function(self,_1ef){
with(self){
return _destinationDragStyle;
}
}),new objj_method(sel_getUid("setVerticalMotionCanBeginDrag:"),function(self,_1f0,_1f1){
with(self){
_verticalMotionCanDrag=_1f1;
}
}),new objj_method(sel_getUid("verticalMotionCanBeginDrag"),function(self,_1f2){
with(self){
return _verticalMotionCanDrag;
}
}),new objj_method(sel_getUid("_tableColumnForSortDescriptor:"),function(self,_1f3,_1f4){
with(self){
var _1f5=objj_msgSend(self,"tableColumns");
for(var i=0;i<objj_msgSend(_1f5,"count");i++){
var _1f6=objj_msgSend(_1f5,"objectAtIndex:",i),_1f7=objj_msgSend(_1f6,"sortDescriptorPrototype");
if(!_1f7){
continue;
}
if(objj_msgSend(_1f7,"key")===objj_msgSend(_1f4,"key")&&objj_msgSend(_1f7,"selector")===objj_msgSend(_1f4,"selector")){
return _1f6;
}
}
return nil;
}
}),new objj_method(sel_getUid("setSortDescriptors:"),function(self,_1f8,_1f9){
with(self){
var _1fa=objj_msgSend(objj_msgSend(self,"sortDescriptors"),"copy"),_1fb=nil;
if(_1f9==nil){
_1fb=objj_msgSend(CPArray,"array");
}else{
_1fb=objj_msgSend(CPArray,"arrayWithArray:",_1f9);
}
if(objj_msgSend(_1fb,"isEqual:",_1fa)){
return;
}
_sortDescriptors=_1fb;
var _1fc=nil,_1fd=nil;
if(objj_msgSend(_1fb,"count")>0){
var _1fe=objj_msgSend(_1fb,"objectAtIndex:",0);
_1fd=objj_msgSend(self,"_tableColumnForSortDescriptor:",_1fe);
}
if(objj_msgSend(_1fa,"count")>0){
var _1ff=objj_msgSend(_1fa,"objectAtIndex:",0);
_1fc=objj_msgSend(self,"_tableColumnForSortDescriptor:",_1ff);
}
var _200=objj_msgSend(_1fe,"ascending")?objj_msgSend(self,"_tableHeaderSortImage"):objj_msgSend(self,"_tableHeaderReverseSortImage");
objj_msgSend(self,"setIndicatorImage:inTableColumn:",nil,_1fc);
objj_msgSend(self,"setIndicatorImage:inTableColumn:",_200,_1fd);
objj_msgSend(self,"_sendDataSourceSortDescriptorsDidChange:",_1fa);
var _201=objj_msgSend(objj_msgSend(self,"class"),"_binderClassForBinding:","sortDescriptors");
objj_msgSend(objj_msgSend(_201,"getBinding:forObject:","sortDescriptors",self),"reverseSetValueFor:","sortDescriptors");
}
}),new objj_method(sel_getUid("sortDescriptors"),function(self,_202){
with(self){
return _sortDescriptors;
}
}),new objj_method(sel_getUid("_objectValueForTableColumn:row:"),function(self,_203,_204,_205){
with(self){
var _206=objj_msgSend(_204,"UID"),_207=_objectValues[_206];
if(!_207){
_207=[];
_objectValues[_206]=_207;
}
var _208=_207[_205];
if(_208===undefined){
if(_implementedDataSourceMethods&_2){
_208=objj_msgSend(_dataSource,"tableView:objectValueForTableColumn:row:",self,_204,_205);
_207[_205]=_208;
}else{
if(!objj_msgSend(self,"infoForBinding:","content")){
CPLog("no content binding established and data source "+objj_msgSend(_dataSource,"description")+" does not implement tableView:objectValueForTableColumn:row:");
}
}
}
return _208;
}
}),new objj_method(sel_getUid("exposedRect"),function(self,_209){
with(self){
if(!_exposedRect){
var _20a=objj_msgSend(self,"superview");
if(objj_msgSend(_20a,"isKindOfClass:",objj_msgSend(CPClipView,"class"))){
_exposedRect=objj_msgSend(_20a,"bounds");
}else{
_exposedRect=objj_msgSend(self,"bounds");
}
}
return _exposedRect;
}
}),new objj_method(sel_getUid("load"),function(self,_20b){
with(self){
if(_reloadAllRows){
objj_msgSend(self,"_unloadDataViewsInRows:columns:",_exposedRows,_exposedColumns);
_exposedRows=objj_msgSend(CPIndexSet,"indexSet");
_exposedColumns=objj_msgSend(CPIndexSet,"indexSet");
_reloadAllRows=NO;
}
var _20c=objj_msgSend(self,"exposedRect"),_20d=objj_msgSend(CPIndexSet,"indexSetWithIndexesInRange:",objj_msgSend(self,"rowsInRect:",_20c)),_20e=objj_msgSend(self,"columnIndexesInRect:",_20c),_20f=objj_msgSend(_exposedRows,"copy"),_210=objj_msgSend(_exposedColumns,"copy");
objj_msgSend(_20f,"removeIndexes:",_20d);
objj_msgSend(_210,"removeIndexes:",_20e);
var _211=objj_msgSend(_20d,"copy"),_212=objj_msgSend(_20e,"copy");
objj_msgSend(_211,"removeIndexes:",_exposedRows);
objj_msgSend(_212,"removeIndexes:",_exposedColumns);
var _213=objj_msgSend(_20d,"copy"),_214=objj_msgSend(_20e,"copy");
objj_msgSend(_213,"removeIndexes:",_211);
objj_msgSend(_214,"removeIndexes:",_212);
objj_msgSend(self,"_unloadDataViewsInRows:columns:",_213,_210);
objj_msgSend(self,"_unloadDataViewsInRows:columns:",_20f,_214);
objj_msgSend(self,"_unloadDataViewsInRows:columns:",_20f,_210);
objj_msgSend(self,"_unloadDataViewsInRows:columns:",_211,_212);
objj_msgSend(self,"_loadDataViewsInRows:columns:",_213,_212);
objj_msgSend(self,"_loadDataViewsInRows:columns:",_211,_214);
objj_msgSend(self,"_loadDataViewsInRows:columns:",_211,_212);
_exposedRows=_20d;
_exposedColumns=_20e;
objj_msgSend(_tableDrawView,"setFrame:",_20c);
objj_msgSend(self,"setNeedsDisplay:",YES);
for(var _215 in _cachedDataViews){
var _216=_cachedDataViews[_215],_217=_216.length;
while(_217--){
objj_msgSend(_216[_217],"removeFromSuperview");
}
}
if(objj_msgSend(_differedColumnDataToRemove,"count")){
for(var i=0;i<_differedColumnDataToRemove.length;i++){
var data=_differedColumnDataToRemove[i],_218=data.column;
objj_msgSend(_218,"setHidden:",data.shouldBeHidden);
objj_msgSend(_tableColumns,"removeObject:",_218);
}
objj_msgSend(_differedColumnDataToRemove,"removeAllObjects");
}
}
}),new objj_method(sel_getUid("_unloadDataViewsInRows:columns:"),function(self,_219,rows,_21a){
with(self){
if(!objj_msgSend(rows,"count")||!objj_msgSend(_21a,"count")){
return;
}
var _21b=[],_21c=[];
objj_msgSend(rows,"getIndexes:maxCount:inIndexRange:",_21b,-1,nil);
objj_msgSend(_21a,"getIndexes:maxCount:inIndexRange:",_21c,-1,nil);
var _21d=0,_21e=_21c.length;
for(;_21d<_21e;++_21d){
var _21f=_21c[_21d],_220=_tableColumns[_21f],_221=objj_msgSend(_220,"UID"),_222=0,_223=_21b.length;
for(;_222<_223;++_222){
var row=_21b[_222],_224=_dataViewsForTableColumns[_221];
if(!_224||row>=_224.length){
continue;
}
var _225=objj_msgSend(_224,"objectAtIndex:",row);
objj_msgSend(_224,"replaceObjectAtIndex:withObject:",row,nil);
objj_msgSend(self,"_enqueueReusableDataView:",_225);
}
}
}
}),new objj_method(sel_getUid("_loadDataViewsInRows:columns:"),function(self,_226,rows,_227){
with(self){
if(!objj_msgSend(rows,"count")||!objj_msgSend(_227,"count")){
return;
}
var _228=[],_229=[],_22a=[];
objj_msgSend(rows,"getIndexes:maxCount:inIndexRange:",_228,-1,nil);
objj_msgSend(_227,"getIndexes:maxCount:inIndexRange:",_22a,-1,nil);
if(_dirtyTableColumnRangeIndex!==CPNotFound){
objj_msgSend(self,"_recalculateTableColumnRanges");
}
var _22b=0,_22c=_22a.length;
for(;_22b<_22c;++_22b){
var _22d=_22a[_22b],_22e=_tableColumns[_22d];
if(objj_msgSend(_22e,"isHidden")||_22e===_draggedColumn){
continue;
}
var _22f=objj_msgSend(_22e,"UID");
if(!_dataViewsForTableColumns[_22f]){
_dataViewsForTableColumns[_22f]=[];
}
var _230=0,_231=_228.length,_232=objj_msgSend(_selectedColumnIndexes,"containsIndex:",_22d);
for(;_230<_231;++_230){
var row=_228[_230],_233=objj_msgSend(self,"_newDataViewForRow:tableColumn:",row,_22e),_234=objj_msgSend(_233,"isKindOfClass:",objj_msgSend(CPButton,"class")),_235=objj_msgSend(_233,"isKindOfClass:",objj_msgSend(CPTextField,"class"));
objj_msgSend(_233,"setFrame:",objj_msgSend(self,"frameOfDataViewAtColumn:row:",_22d,row));
objj_msgSend(_233,"setObjectValue:",objj_msgSend(self,"_objectValueForTableColumn:row:",_22e,row));
objj_msgSend(_22e,"_prepareDataView:forRow:",_233,row);
if(_232||objj_msgSend(self,"isRowSelected:",row)){
objj_msgSend(_233,"setThemeState:",CPThemeStateSelectedDataView);
}else{
objj_msgSend(_233,"unsetThemeState:",CPThemeStateSelectedDataView);
}
if(_implementedDelegateMethods&_e){
if(objj_msgSend(_delegate,"tableView:isGroupRow:",self,row)){
objj_msgSend(_groupRows,"addIndex:",row);
objj_msgSend(_233,"setThemeState:",CPThemeStateGroupRow);
}else{
objj_msgSend(_groupRows,"removeIndexesInRange:",CPMakeRange(row,1));
objj_msgSend(_233,"unsetThemeState:",CPThemeStateGroupRow);
}
objj_msgSend(self,"setNeedsDisplay:",YES);
}
if(_implementedDelegateMethods&_1a){
objj_msgSend(_delegate,"tableView:willDisplayView:forTableColumn:row:",self,_233,_22e,row);
}
if(objj_msgSend(_233,"superview")!==self){
objj_msgSend(self,"addSubview:",_233);
}
_dataViewsForTableColumns[_22f][row]=_233;
if(_234||(_editingCellIndex&&_editingCellIndex.x===_22d&&_editingCellIndex.y===row)){
if(_235){
objj_msgSend(_233,"setEditable:",YES);
objj_msgSend(_233,"setSendsActionOnEndEditing:",YES);
objj_msgSend(_233,"setSelectable:",YES);
objj_msgSend(_233,"selectText:",nil);
objj_msgSend(_233,"setBezeled:",YES);
objj_msgSend(_233,"setDelegate:",self);
}
objj_msgSend(_233,"setTarget:",self);
objj_msgSend(_233,"setAction:",sel_getUid("_commitDataViewObjectValue:"));
_233.tableViewEditedColumnObj=_22e;
_233.tableViewEditedRowIndex=row;
}else{
if(_235){
objj_msgSend(_233,"setEditable:",NO);
objj_msgSend(_233,"setSelectable:",NO);
}
}
}
}
}
}),new objj_method(sel_getUid("_layoutDataViewsInRows:columns:"),function(self,_236,rows,_237){
with(self){
var _238=[],_239=[];
objj_msgSend(rows,"getIndexes:maxCount:inIndexRange:",_238,-1,nil);
objj_msgSend(_237,"getIndexes:maxCount:inIndexRange:",_239,-1,nil);
var _23a=0,_23b=_239.length;
for(;_23a<_23b;++_23a){
var _23c=_239[_23a],_23d=_tableColumns[_23c],_23e=objj_msgSend(_23d,"UID"),_23f=_dataViewsForTableColumns[_23e],_240=0,_241=_238.length;
for(;_240<_241;++_240){
var row=_238[_240],_242=_23f[row];
objj_msgSend(_242,"setFrame:",objj_msgSend(self,"frameOfDataViewAtColumn:row:",_23c,row));
}
}
}
}),new objj_method(sel_getUid("_commitDataViewObjectValue:"),function(self,_243,_244){
with(self){
_editingCellIndex=nil;
if(_implementedDataSourceMethods&_3){
objj_msgSend(_dataSource,"tableView:setObjectValue:forTableColumn:row:",self,objj_msgSend(_244,"objectValue"),_244.tableViewEditedColumnObj,_244.tableViewEditedRowIndex);
}
objj_msgSend(_244.tableViewEditedColumnObj,"_reverseSetDataView:forRow:",_244,_244.tableViewEditedRowIndex);
if(objj_msgSend(_244,"respondsToSelector:",sel_getUid("setEditable:"))){
objj_msgSend(_244,"setEditable:",NO);
}
if(objj_msgSend(_244,"respondsToSelector:",sel_getUid("setSelectable:"))){
objj_msgSend(_244,"setSelectable:",NO);
}
if(objj_msgSend(_244,"isKindOfClass:",objj_msgSend(CPTextField,"class"))){
objj_msgSend(_244,"setBezeled:",NO);
}
objj_msgSend(self,"reloadDataForRowIndexes:columnIndexes:",objj_msgSend(CPIndexSet,"indexSetWithIndex:",_244.tableViewEditedRowIndex),objj_msgSend(CPIndexSet,"indexSetWithIndex:",objj_msgSend(_tableColumns,"indexOfObject:",_244.tableViewEditedColumnObj)));
objj_msgSend(objj_msgSend(self,"window"),"makeFirstResponder:",self);
}
}),new objj_method(sel_getUid("controlTextDidBlur:"),function(self,_245,_246){
with(self){
var _247=objj_msgSend(_246,"object");
if(objj_msgSend(_247,"respondsToSelector:",sel_getUid("setEditable:"))){
objj_msgSend(_247,"setEditable:",NO);
}
if(objj_msgSend(_247,"respondsToSelector:",sel_getUid("setSelectable:"))){
objj_msgSend(_247,"setSelectable:",NO);
}
if(objj_msgSend(_247,"isKindOfClass:",objj_msgSend(CPTextField,"class"))){
objj_msgSend(_247,"setBezeled:",NO);
}
_editingCellIndex=nil;
}
}),new objj_method(sel_getUid("_newDataViewForRow:tableColumn:"),function(self,_248,aRow,_249){
with(self){
if((_implementedDelegateMethods&_a)){
var _24a=objj_msgSend(_delegate,"tableView:dataViewForTableColumn:row:",self,_249,aRow);
objj_msgSend(_249,"setDataView:",_24a);
}
return objj_msgSend(_249,"_newDataViewForRow:",aRow);
}
}),new objj_method(sel_getUid("_enqueueReusableDataView:"),function(self,_24b,_24c){
with(self){
if(!_24c){
return;
}
var _24d=_24c.identifier;
if(!_cachedDataViews[_24d]){
_cachedDataViews[_24d]=[_24c];
}else{
_cachedDataViews[_24d].push(_24c);
}
}
}),new objj_method(sel_getUid("setFrameSize:"),function(self,_24e,_24f){
with(self){
objj_msgSendSuper({receiver:self,super_class:objj_getClass("CPTableView").super_class},"setFrameSize:",_24f);
if(_headerView){
objj_msgSend(_headerView,"setFrameSize:",{width:(objj_msgSend(self,"frame").size.width),height:(objj_msgSend(_headerView,"frame").size.height)});
}
_exposedRect=nil;
}
}),new objj_method(sel_getUid("setFrameOrigin:"),function(self,_250,_251){
with(self){
objj_msgSendSuper({receiver:self,super_class:objj_getClass("CPTableView").super_class},"setFrameOrigin:",_251);
_exposedRect=nil;
}
}),new objj_method(sel_getUid("setBoundsOrigin:"),function(self,_252,_253){
with(self){
objj_msgSendSuper({receiver:self,super_class:objj_getClass("CPTableView").super_class},"setBoundsOrigin:",_253);
_exposedRect=nil;
}
}),new objj_method(sel_getUid("setBoundsSize:"),function(self,_254,_255){
with(self){
objj_msgSendSuper({receiver:self,super_class:objj_getClass("CPTableView").super_class},"setBoundsSize:",_255);
_exposedRect=nil;
}
}),new objj_method(sel_getUid("setNeedsDisplay:"),function(self,_256,_257){
with(self){
objj_msgSendSuper({receiver:self,super_class:objj_getClass("CPTableView").super_class},"setNeedsDisplay:",_257);
objj_msgSend(_tableDrawView,"setNeedsDisplay:",_257);
}
}),new objj_method(sel_getUid("_drawRect:"),function(self,_258,_259){
with(self){
var _25a=objj_msgSend(self,"exposedRect");
objj_msgSend(self,"drawBackgroundInClipRect:",_25a);
objj_msgSend(self,"highlightSelectionInClipRect:",_25a);
objj_msgSend(self,"drawGridInClipRect:",_25a);
if(_implementsCustomDrawRow){
objj_msgSend(self,"_drawRows:clipRect:",_exposedRows,_25a);
}
}
}),new objj_method(sel_getUid("drawBackgroundInClipRect:"),function(self,_25b,_25c){
with(self){
if(!_usesAlternatingRowBackgroundColors){
return;
}
var _25d=objj_msgSend(self,"alternatingRowBackgroundColors"),_25e=objj_msgSend(_25d,"count");
if(_25e===0){
return;
}
var _25f=objj_msgSend(objj_msgSend(CPGraphicsContext,"currentContext"),"graphicsPort");
if(_25e===1){
CGContextSetFillColor(_25f,_25d[0]);
CGContextFillRect(_25f,_25c);
return;
}
var _260=objj_msgSend(self,"_unboundedRowsInRect:",_25c),_261=CPMaxRange(_260),_262=0,_263=[],row=_260.location;
while(_262<_25e){
CGContextBeginPath(_25f);
for(var row=_262;row<=_261;row+=_25e){
if(!objj_msgSend(_groupRows,"containsIndex:",row)){
CGContextAddRect(_25f,CGRectIntersection(_25c,objj_msgSend(self,"_rectOfRow:checkRange:",row,NO)));
}else{
_263.push(CGRectIntersection(_25c,objj_msgSend(self,"_rectOfRow:checkRange:",row,NO)));
}
}
CGContextClosePath(_25f);
CGContextSetFillColor(_25f,_25d[_262]);
CGContextFillPath(_25f);
_262++;
}
objj_msgSend(self,"_drawGroupRowsForRects:",_263);
}
}),new objj_method(sel_getUid("drawGridInClipRect:"),function(self,_264,_265){
with(self){
var _266=objj_msgSend(objj_msgSend(CPGraphicsContext,"currentContext"),"graphicsPort"),_267=objj_msgSend(self,"gridStyleMask");
if(!(_267&(CPTableViewSolidHorizontalGridLineMask|CPTableViewSolidVerticalGridLineMask))){
return;
}
CGContextBeginPath(_266);
if(_267&CPTableViewSolidHorizontalGridLineMask){
var _268=objj_msgSend(self,"_unboundedRowsInRect:",_265),row=_268.location,_269=CPMaxRange(_268)-1,rowY=-0.5,minX=(_265.origin.x),maxX=(_265.origin.x+_265.size.width);
for(;row<=_269;++row){
var _26a=objj_msgSend(self,"_rectOfRow:checkRange:",row,NO),rowY=(_26a.origin.y+_26a.size.height)-0.5;
CGContextMoveToPoint(_266,minX,rowY);
CGContextAddLineToPoint(_266,maxX,rowY);
}
if(_rowHeight>0){
var _26b=_rowHeight+_intercellSpacing.height,_26c=(_265.origin.y+_265.size.height);
while(rowY<_26c){
rowY+=_26b;
CGContextMoveToPoint(_266,minX,rowY);
CGContextAddLineToPoint(_266,maxX,rowY);
}
}
}
if(_267&CPTableViewSolidVerticalGridLineMask){
var _26d=objj_msgSend(self,"columnIndexesInRect:",_265),_26e=[];
objj_msgSend(_26d,"getIndexes:maxCount:inIndexRange:",_26e,-1,nil);
var _26f=0,_270=_26e.length,minY=(_265.origin.y),maxY=(_265.origin.y+_265.size.height);
for(;_26f<_270;++_26f){
var _271=objj_msgSend(self,"rectOfColumn:",_26e[_26f]),_272=(_271.origin.x+_271.size.width)+0.5;
CGContextMoveToPoint(_266,_272,minY);
CGContextAddLineToPoint(_266,_272,maxY);
}
}
CGContextClosePath(_266);
CGContextSetStrokeColor(_266,objj_msgSend(self,"gridColor"));
CGContextStrokePath(_266);
}
}),new objj_method(sel_getUid("highlightSelectionInClipRect:"),function(self,_273,_274){
with(self){
if(_selectionHighlightStyle===CPTableViewSelectionHighlightStyleNone){
return;
}
var _275=objj_msgSend(objj_msgSend(CPGraphicsContext,"currentContext"),"graphicsPort"),_276=[],_277=sel_getUid("rectOfRow:");
if(objj_msgSend(_selectedRowIndexes,"count")>=1){
var _278=objj_msgSend(CPIndexSet,"indexSetWithIndexesInRange:",objj_msgSend(self,"rowsInRect:",_274)),_279=objj_msgSend(_278,"firstIndex"),_27a=CPMakeRange(_279,objj_msgSend(_278,"lastIndex")-_279+1);
objj_msgSend(_selectedRowIndexes,"getIndexes:maxCount:inIndexRange:",_276,-1,_27a);
}else{
if(objj_msgSend(_selectedColumnIndexes,"count")>=1){
_277=sel_getUid("rectOfColumn:");
var _27b=objj_msgSend(self,"columnIndexesInRect:",_274),_27c=objj_msgSend(_27b,"firstIndex"),_27a=CPMakeRange(_27c,objj_msgSend(_27b,"lastIndex")-_27c+1);
objj_msgSend(_selectedColumnIndexes,"getIndexes:maxCount:inIndexRange:",_276,-1,_27a);
}
}
var _27d=count2=objj_msgSend(_276,"count");
if(!_27d){
return;
}
var _27e=(_selectionHighlightStyle===CPTableViewSelectionHighlightStyleSourceList&&objj_msgSend(_selectedRowIndexes,"count")>=1),_27f=0.5*(_gridStyleMask&CPTableViewSolidHorizontalGridLineMask);
CGContextBeginPath(_275);
if(_27e){
var _280=objj_msgSend(self,"selectionGradientColors"),_281=objj_msgSend(_280,"objectForKey:",CPSourceListTopLineColor),_282=objj_msgSend(_280,"objectForKey:",CPSourceListBottomLineColor),_283=objj_msgSend(_280,"objectForKey:",CPSourceListGradient);
}
var _284=objj_msgSend(self,"selectionHighlightColor");
if(objj_msgSend(_groupRows,"count")){
var _285=objj_msgSend(CPColor,"colorWithCalibratedWhite:alpha:",212/255,1),_286=objj_msgSend(CPColor,"colorWithCalibratedWhite:alpha:",185/255,1),_287=CGGradientCreateWithColorComponents(CGColorSpaceCreateDeviceRGB(),[212/255,212/255,212/255,1,197/255,197/255,197/255,1],[0,1],2);
}
while(_27d--){
var _288=_276[_27d],_289=CGRectIntersection(objj_msgSend(self,_277,_288),_274);
if(!_27e){
var _28a=objj_msgSend(_groupRows,"containsIndex:",_288);
}
if(_27e||_28a){
var minX=(_289.origin.x),minY=(_289.origin.y),maxX=(_289.origin.x+_289.size.width),maxY=(_289.origin.y+_289.size.height)-_27f;
if(!_27e){
objj_msgSend(_284,"setFill");
CGContextClosePath(_275);
CGContextFillPath(_275);
CGContextBeginPath(_275);
}
CGContextAddRect(_275,_289);
CGContextDrawLinearGradient(_275,(_28a)?_287:_283,_289.origin,{x:minX,y:maxY},0);
CGContextClosePath(_275);
CGContextBeginPath(_275);
CGContextMoveToPoint(_275,minX,minY+0.5);
CGContextAddLineToPoint(_275,maxX,minY+0.5);
CGContextClosePath(_275);
CGContextSetStrokeColor(_275,(_28a)?_285:_281);
CGContextStrokePath(_275);
CGContextBeginPath(_275);
CGContextMoveToPoint(_275,minX,maxY-0.5);
CGContextAddLineToPoint(_275,maxX,maxY-0.5);
CGContextClosePath(_275);
CGContextSetStrokeColor(_275,(_28a)?_286:_282);
CGContextStrokePath(_275);
}else{
CGContextAddRect(_275,_289);
}
}
CGContextClosePath(_275);
if(!_27e){
objj_msgSend(_284,"setFill");
CGContextFillPath(_275);
}
CGContextBeginPath(_275);
var _28b=objj_msgSend(self,"gridStyleMask");
for(var i=0;i<count2;i++){
var rect=objj_msgSend(self,_277,_276[i]),minX=(rect.origin.x)-0.5,maxX=(rect.origin.x+rect.size.width)-0.5,minY=(rect.origin.y)-0.5,maxY=(rect.origin.y+rect.size.height)-0.5;
if(objj_msgSend(_selectedRowIndexes,"count")>=1&&_28b&CPTableViewSolidVerticalGridLineMask){
var _27b=objj_msgSend(self,"columnIndexesInRect:",_274),_28c=[],_28d=objj_msgSend(_27b,"firstIndex"),_27a=CPMakeRange(_28d,objj_msgSend(_27b,"lastIndex")-_28d+1);
objj_msgSend(_27b,"getIndexes:maxCount:inIndexRange:",_28c,-1,_27a);
var _28e=objj_msgSend(_28c,"count");
for(var c=_28d;c<_28e;c++){
var _28f=objj_msgSend(self,"rectOfColumn:",_28c[c]),colX=(_28f.origin.x+_28f.size.width)+0.5;
CGContextMoveToPoint(_275,colX,minY);
CGContextAddLineToPoint(_275,colX,maxY);
}
}
if(objj_msgSend(_276,"containsObject:",_276[i]+1)){
CGContextMoveToPoint(_275,minX,maxY);
CGContextAddLineToPoint(_275,maxX,maxY);
}
}
CGContextClosePath(_275);
CGContextSetStrokeColor(_275,objj_msgSend(self,"currentValueForThemeAttribute:","highlighted-grid-color"));
CGContextStrokePath(_275);
}
}),new objj_method(sel_getUid("_drawGroupRowsForRects:"),function(self,_290,_291){
with(self){
if(_selectionHighlightStyle===CPTableViewSelectionHighlightStyleSourceList||!_291.length){
return;
}
var _292=objj_msgSend(objj_msgSend(CPGraphicsContext,"currentContext"),"graphicsPort"),i=_291.length;
CGContextBeginPath(_292);
var _293=objj_msgSend(self,"selectionGradientColors"),_294=objj_msgSend(CPColor,"colorWithHexString:","d3d3d3"),_295=objj_msgSend(CPColor,"colorWithHexString:","bebebd"),_296=CGGradientCreateWithColorComponents(CGColorSpaceCreateDeviceRGB(),[220/255,220/255,220/255,1,199/255,199/255,199/255,1],[0,1],2),_297=YES;
while(i--){
var _298=_291[i];
CGContextAddRect(_292,_298);
if(_297){
var minX=CGRectGetMinX(_298),minY=CGRectGetMinY(_298),maxX=CGRectGetMaxX(_298),maxY=CGRectGetMaxY(_298);
CGContextDrawLinearGradient(_292,_296,_298.origin,CGPointMake(minX,maxY),0);
CGContextClosePath(_292);
CGContextBeginPath(_292);
CGContextMoveToPoint(_292,minX,minY);
CGContextAddLineToPoint(_292,maxX,minY);
CGContextClosePath(_292);
CGContextSetStrokeColor(_292,_294);
CGContextStrokePath(_292);
CGContextBeginPath(_292);
CGContextMoveToPoint(_292,minX,maxY);
CGContextAddLineToPoint(_292,maxX,maxY-1);
CGContextClosePath(_292);
CGContextSetStrokeColor(_292,_295);
CGContextStrokePath(_292);
}
}
CGContextClosePath(_292);
}
}),new objj_method(sel_getUid("_drawRows:clipRect:"),function(self,_299,_29a,_29b){
with(self){
var row=objj_msgSend(_29a,"firstIndex");
while(row!==CPNotFound){
objj_msgSend(self,"drawRow:clipRect:",row,CGRectIntersection(_29b,objj_msgSend(self,"rectOfRow:",row)));
row=objj_msgSend(_29a,"indexGreaterThanIndex:",row);
}
}
}),new objj_method(sel_getUid("drawRow:clipRect:"),function(self,_29c,row,rect){
with(self){
}
}),new objj_method(sel_getUid("layoutSubviews"),function(self,_29d){
with(self){
objj_msgSend(self,"load");
}
}),new objj_method(sel_getUid("viewWillMoveToSuperview:"),function(self,_29e,_29f){
with(self){
var _2a0=objj_msgSend(self,"superview"),_2a1=objj_msgSend(CPNotificationCenter,"defaultCenter");
if(_2a0){
objj_msgSend(_2a1,"removeObserver:name:object:",self,CPViewFrameDidChangeNotification,_2a0);
objj_msgSend(_2a1,"removeObserver:name:object:",self,CPViewBoundsDidChangeNotification,_2a0);
}
if(objj_msgSend(_29f,"isKindOfClass:",objj_msgSend(CPClipView,"class"))){
objj_msgSend(_29f,"setPostsFrameChangedNotifications:",YES);
objj_msgSend(_29f,"setPostsBoundsChangedNotifications:",YES);
objj_msgSend(_2a1,"addObserver:selector:name:object:",self,sel_getUid("superviewFrameChanged:"),CPViewFrameDidChangeNotification,_29f);
objj_msgSend(_2a1,"addObserver:selector:name:object:",self,sel_getUid("superviewBoundsChanged:"),CPViewBoundsDidChangeNotification,_29f);
}
}
}),new objj_method(sel_getUid("superviewBoundsChanged:"),function(self,_2a2,_2a3){
with(self){
_exposedRect=nil;
objj_msgSend(self,"setNeedsDisplay:",YES);
objj_msgSend(self,"setNeedsLayout");
}
}),new objj_method(sel_getUid("superviewFrameChanged:"),function(self,_2a4,_2a5){
with(self){
_exposedRect=nil;
objj_msgSend(self,"tile");
}
}),new objj_method(sel_getUid("tracksMouseOutsideOfFrame"),function(self,_2a6){
with(self){
return YES;
}
}),new objj_method(sel_getUid("startTrackingAt:"),function(self,_2a7,_2a8){
with(self){
var row=objj_msgSend(self,"rowAtPoint:",_2a8);
if(row<0&&_allowsEmptySelection){
objj_msgSend(self,"selectRowIndexes:byExtendingSelection:",objj_msgSend(CPIndexSet,"indexSet"),NO);
}
objj_msgSend(self,"_noteSelectionIsChanging");
if(objj_msgSend(self,"mouseDownFlags")&CPShiftKeyMask){
_selectionAnchorRow=(ABS(objj_msgSend(_selectedRowIndexes,"firstIndex")-row)<ABS(objj_msgSend(_selectedRowIndexes,"lastIndex")-row))?objj_msgSend(_selectedRowIndexes,"firstIndex"):objj_msgSend(_selectedRowIndexes,"lastIndex");
}else{
_selectionAnchorRow=row;
}
_startTrackingPoint=_2a8;
_startTrackingTimestamp=new Date();
if(_implementedDataSourceMethods&_3){
_trackingPointMovedOutOfClickSlop=NO;
}
if(row>=0&&!(_implementedDataSourceMethods&_7)){
objj_msgSend(self,"_updateSelectionWithMouseAtRow:",row);
}
objj_msgSend(objj_msgSend(self,"window"),"makeFirstResponder:",self);
return YES;
}
}),new objj_method(sel_getUid("menuForEvent:"),function(self,_2a9,_2aa){
with(self){
if(!(_implementedDelegateMethods&_1d)){
return objj_msgSendSuper({receiver:self,super_class:objj_getClass("CPTableView").super_class},"menuForEvent:",_2aa);
}
var _2ab=objj_msgSend(self,"convertPoint:fromView:",objj_msgSend(_2aa,"locationInWindow"),nil),row=objj_msgSend(self,"rowAtPoint:",_2ab),_2ac=objj_msgSend(self,"columnAtPoint:",_2ab),_2ad=objj_msgSend(objj_msgSend(self,"tableColumns"),"objectAtIndex:",_2ac);
return objj_msgSend(_delegate,"tableView:menuForTableColumn:row:",self,_2ad,row);
}
}),new objj_method(sel_getUid("trackMouse:"),function(self,_2ae,_2af){
with(self){
if(!objj_msgSend(_draggedRowIndexes,"count")){
objj_msgSend(self,"autoscroll:",_2af);
objj_msgSendSuper({receiver:self,super_class:objj_getClass("CPTableView").super_class},"trackMouse:",_2af);
}else{
objj_msgSend(CPApp,"sendEvent:",_2af);
}
}
}),new objj_method(sel_getUid("continueTracking:at:"),function(self,_2b0,_2b1,_2b2){
with(self){
var row=objj_msgSend(self,"rowAtPoint:",_2b2);
if(!_isSelectingSession&&_implementedDataSourceMethods&_7){
if(row>=0&&(ABS(_startTrackingPoint.x-_2b2.x)>3||(_verticalMotionCanDrag&&ABS(_startTrackingPoint.y-_2b2.y)>3))||(objj_msgSend(_selectedRowIndexes,"containsIndex:",row))){
if(objj_msgSend(_selectedRowIndexes,"containsIndex:",row)){
_draggedRowIndexes=objj_msgSend(objj_msgSend(CPIndexSet,"alloc"),"initWithIndexSet:",_selectedRowIndexes);
}else{
_draggedRowIndexes=objj_msgSend(CPIndexSet,"indexSetWithIndex:",row);
}
var _2b3=objj_msgSend(CPPasteboard,"pasteboardWithName:",CPDragPboard);
if(objj_msgSend(self,"canDragRowsWithIndexes:atPoint:",_draggedRowIndexes,_2b2)&&objj_msgSend(_dataSource,"tableView:writeRowsWithIndexes:toPasteboard:",self,_draggedRowIndexes,_2b3)){
var _2b4=objj_msgSend(CPApp,"currentEvent"),_2b5=CPPointMakeZero(),_2b6=objj_msgSend(_tableColumns,"objectsAtIndexes:",_exposedColumns);
var view=objj_msgSend(self,"dragViewForRowsWithIndexes:tableColumns:event:offset:",_draggedRowIndexes,_2b6,_2b4,_2b5);
if(!view){
var _2b7=objj_msgSend(self,"dragImageForRowsWithIndexes:tableColumns:event:offset:",_draggedRowIndexes,_2b6,_2b4,_2b5);
view=objj_msgSend(objj_msgSend(CPImageView,"alloc"),"initWithFrame:",CPMakeRect(0,0,objj_msgSend(_2b7,"size").width,objj_msgSend(_2b7,"size").height));
objj_msgSend(view,"setImage:",_2b7);
}
var _2b8=objj_msgSend(view,"bounds"),_2b9=CPPointMake(_2b2.x-CGRectGetWidth(_2b8)/2+_2b5.x,_2b2.y-CGRectGetHeight(_2b8)/2+_2b5.y);
objj_msgSend(self,"dragView:at:offset:event:pasteboard:source:slideBack:",view,_2b9,CPPointMakeZero(),objj_msgSend(CPApp,"currentEvent"),_2b3,self,YES);
_startTrackingPoint=nil;
return NO;
}
_draggedRowIndexes=objj_msgSend(CPIndexSet,"indexSet");
}else{
if(ABS(_startTrackingPoint.x-_2b2.x)<5&&ABS(_startTrackingPoint.y-_2b2.y)<5){
return YES;
}
}
}
_isSelectingSession=YES;
if(row>=0&&row!==_lastTrackedRowIndex){
_lastTrackedRowIndex=row;
objj_msgSend(self,"_updateSelectionWithMouseAtRow:",row);
}
if((_implementedDataSourceMethods&_3)&&!_trackingPointMovedOutOfClickSlop){
var _2ba=5;
if(ABS(_2b2.x-_startTrackingPoint.x)>_2ba||ABS(_2b2.y-_startTrackingPoint.y)>_2ba){
_trackingPointMovedOutOfClickSlop=YES;
}
}
return YES;
}
}),new objj_method(sel_getUid("stopTracking:at:mouseIsUp:"),function(self,_2bb,_2bc,_2bd,_2be){
with(self){
_isSelectingSession=NO;
var _2bf=1000,_2c0,_2c1,_2c2,_2c3=YES;
if(_implementedDataSourceMethods&_7){
_2c2=objj_msgSend(self,"rowAtPoint:",_2bd);
if(_2c2!==-1){
if(objj_msgSend(_draggedRowIndexes,"count")>0){
_draggedRowIndexes=objj_msgSend(CPIndexSet,"indexSet");
return;
}
_previouslySelectedRowIndexes=objj_msgSend(_selectedRowIndexes,"copy");
objj_msgSend(self,"_updateSelectionWithMouseAtRow:",_2c2);
}
}
if(_2be&&!_trackingPointMovedOutOfClickSlop&&(objj_msgSend(objj_msgSend(CPApp,"currentEvent"),"clickCount")>1)&&((_implementedDataSourceMethods&_3)||objj_msgSend(self,"infoForBinding:","content"))){
_2c0=objj_msgSend(self,"columnAtPoint:",_2bc);
if(_2c0!==-1){
_2c1=_tableColumns[_2c0];
if(objj_msgSend(_2c1,"isEditable")){
_2c2=objj_msgSend(self,"rowAtPoint:",_2bd);
if(_2c2!==-1){
if(_implementedDelegateMethods&_12){
_2c3=objj_msgSend(_delegate,"tableView:shouldEditTableColumn:row:",self,_2c1,_2c2);
}
if(_2c3){
objj_msgSend(self,"editColumn:row:withEvent:select:",_2c0,_2c2,nil,YES);
return;
}
}
}
}
}
if(objj_msgSend(objj_msgSend(CPApp,"currentEvent"),"clickCount")===2&&_doubleAction){
_clickedRow=objj_msgSend(self,"rowAtPoint:",_2bd);
objj_msgSend(self,"sendAction:to:",_doubleAction,_target);
}
}
}),new objj_method(sel_getUid("draggingEntered:"),function(self,_2c4,_2c5){
with(self){
var _2c6=objj_msgSend(self,"convertPoint:fromView:",objj_msgSend(_2c5,"draggingLocation"),nil),_2c7=objj_msgSend(self,"_proposedDropOperationAtPoint:",_2c6),row=objj_msgSend(self,"_proposedRowAtPoint:",_2c6);
if(_retargetedDropRow!==nil){
row=_retargetedDropRow;
}
var _2c8=objj_msgSend(self,"registeredDraggedTypes"),_2c9=objj_msgSend(_2c8,"count"),i=0;
for(;i<_2c9;i++){
if(objj_msgSend(objj_msgSend(objj_msgSend(_2c5,"draggingPasteboard"),"types"),"containsObject:",objj_msgSend(_2c8,"objectAtIndex:",i))){
return objj_msgSend(self,"_validateDrop:proposedRow:proposedDropOperation:",_2c5,row,_2c7);
}
}
return CPDragOperationNone;
}
}),new objj_method(sel_getUid("draggingExited:"),function(self,_2ca,_2cb){
with(self){
objj_msgSend(_dropOperationFeedbackView,"removeFromSuperview");
}
}),new objj_method(sel_getUid("draggingEnded:"),function(self,_2cc,_2cd){
with(self){
objj_msgSend(self,"_draggingEnded");
}
}),new objj_method(sel_getUid("_draggingEnded"),function(self,_2ce){
with(self){
_retargetedDropOperation=nil;
_retargetedDropRow=nil;
_draggedRowIndexes=objj_msgSend(CPIndexSet,"indexSet");
objj_msgSend(_dropOperationFeedbackView,"removeFromSuperview");
}
}),new objj_method(sel_getUid("wantsPeriodicDraggingUpdates"),function(self,_2cf){
with(self){
return YES;
}
}),new objj_method(sel_getUid("_proposedDropOperationAtPoint:"),function(self,_2d0,_2d1){
with(self){
if(_retargetedDropOperation!==nil){
return _retargetedDropOperation;
}
var row=objj_msgSend(self,"_proposedRowAtPoint:",_2d1),_2d2=objj_msgSend(self,"rectOfRow:",row);
if(objj_msgSend(self,"intercellSpacing").height<5){
_2d2=CPRectInset(_2d2,0,5-objj_msgSend(self,"intercellSpacing").height);
}
if(CGRectContainsPoint(_2d2,_2d1)&&row<_numberOfRows){
return CPTableViewDropOn;
}
return CPTableViewDropAbove;
}
}),new objj_method(sel_getUid("_proposedRowAtPoint:"),function(self,_2d3,_2d4){
with(self){
var row=objj_msgSend(self,"rowAtPoint:",_2d4),_2d5=row+1,rect=objj_msgSend(self,"rectOfRow:",row),_2d6=(rect.origin.y+rect.size.height),_2d7=_2d6-((_2d6-(rect.origin.y))*0.3),_2d8=objj_msgSend(self,"numberOfRows");
if(row<0){
row=((rect.origin.y+rect.size.height)<_2d4.y)?_2d8:row;
}else{
if(_2d4.y>MAX(_2d7,_2d6-6)){
row=_2d5;
}
}
row=MIN(_2d8,row);
return row;
}
}),new objj_method(sel_getUid("_validateDrop:proposedRow:proposedDropOperation:"),function(self,_2d9,info,row,_2da){
with(self){
if(_implementedDataSourceMethods&_6){
return objj_msgSend(_dataSource,"tableView:validateDrop:proposedRow:proposedDropOperation:",self,info,row,_2da);
}
return CPDragOperationNone;
}
}),new objj_method(sel_getUid("_rectForDropHighlightViewOnRow:"),function(self,_2db,_2dc){
with(self){
if(_2dc>=objj_msgSend(self,"numberOfRows")){
_2dc=objj_msgSend(self,"numberOfRows")-1;
}
return objj_msgSend(self,"_rectOfRow:checkRange:",_2dc,NO);
}
}),new objj_method(sel_getUid("_rectForDropHighlightViewBetweenUpperRow:andLowerRow:offset:"),function(self,_2dd,_2de,_2df,_2e0){
with(self){
if(_2df>objj_msgSend(self,"numberOfRows")){
_2df=objj_msgSend(self,"numberOfRows");
}
return objj_msgSend(self,"_rectOfRow:checkRange:",_2df,NO);
}
}),new objj_method(sel_getUid("draggingUpdated:"),function(self,_2e1,_2e2){
with(self){
_retargetedDropRow=nil;
_retargetedDropOperation=nil;
var _2e3=objj_msgSend(self,"convertPoint:fromView:",objj_msgSend(_2e2,"draggingLocation"),nil),_2e4=objj_msgSend(self,"_proposedDropOperationAtPoint:",_2e3),_2e5=objj_msgSend(self,"numberOfRows"),row=objj_msgSend(self,"_proposedRowAtPoint:",_2e3),_2e6=objj_msgSend(self,"_validateDrop:proposedRow:proposedDropOperation:",_2e2,row,_2e4);
if(_retargetedDropRow!==nil){
row=_retargetedDropRow;
}
if(_retargetedDropOperation!==nil){
_2e4=_retargetedDropOperation;
}
if(_2e4===CPTableViewDropOn&&row>=_2e5){
row=_2e5-1;
}
var rect={origin:{x:0,y:0},size:{width:0,height:0}};
if(row===-1){
rect=objj_msgSend(self,"exposedRect");
}else{
if(_2e4===CPTableViewDropAbove){
rect=objj_msgSend(self,"_rectForDropHighlightViewBetweenUpperRow:andLowerRow:offset:",row-1,row,_2e3);
}else{
rect=objj_msgSend(self,"_rectForDropHighlightViewOnRow:",row);
}
}
objj_msgSend(_dropOperationFeedbackView,"setDropOperation:",row!==-1?_2e4:CPDragOperationNone);
objj_msgSend(_dropOperationFeedbackView,"setHidden:",(_2e6==CPDragOperationNone));
objj_msgSend(_dropOperationFeedbackView,"setFrame:",rect);
objj_msgSend(_dropOperationFeedbackView,"setCurrentRow:",row);
objj_msgSend(self,"addSubview:",_dropOperationFeedbackView);
return _2e6;
}
}),new objj_method(sel_getUid("prepareForDragOperation:"),function(self,_2e7,_2e8){
with(self){
objj_msgSend(_dropOperationFeedbackView,"removeFromSuperview");
return (_implementedDataSourceMethods&_6);
}
}),new objj_method(sel_getUid("performDragOperation:"),function(self,_2e9,_2ea){
with(self){
var _2eb=objj_msgSend(self,"convertPoint:fromView:",objj_msgSend(_2ea,"draggingLocation"),nil),_2ec=objj_msgSend(self,"_proposedDropOperationAtPoint:",_2eb),row=_retargetedDropRow;
if(row===nil){
var row=objj_msgSend(self,"_proposedRowAtPoint:",_2eb);
}
return objj_msgSend(_dataSource,"tableView:acceptDrop:row:dropOperation:",self,_2ea,row,_2ec);
}
}),new objj_method(sel_getUid("concludeDragOperation:"),function(self,_2ed,_2ee){
with(self){
objj_msgSend(self,"reloadData");
}
}),new objj_method(sel_getUid("draggedImage:endedAt:operation:"),function(self,_2ef,_2f0,_2f1,_2f2){
with(self){
if(objj_msgSend(_dataSource,"respondsToSelector:",sel_getUid("tableView:didEndDraggedImage:atPosition:operation:"))){
objj_msgSend(_dataSource,"tableView:didEndDraggedImage:atPosition:operation:",self,_2f0,_2f1,_2f2);
}
}
}),new objj_method(sel_getUid("draggedView:endedAt:operation:"),function(self,_2f3,_2f4,_2f5,_2f6){
with(self){
objj_msgSend(self,"_draggingEnded");
objj_msgSend(self,"draggedImage:endedAt:operation:",_2f4,_2f5,_2f6);
}
}),new objj_method(sel_getUid("_updateSelectionWithMouseAtRow:"),function(self,_2f7,aRow){
with(self){
if(aRow<0){
return;
}
var _2f8,_2f9=NO;
if(objj_msgSend(self,"mouseDownFlags")&(CPCommandKeyMask|CPControlKeyMask|CPAlternateKeyMask)){
if(objj_msgSend(_selectedRowIndexes,"containsIndex:",aRow)){
_2f8=objj_msgSend(_selectedRowIndexes,"copy");
objj_msgSend(_2f8,"removeIndex:",aRow);
}else{
if(_allowsMultipleSelection){
_2f8=objj_msgSend(_selectedRowIndexes,"copy");
objj_msgSend(_2f8,"addIndex:",aRow);
}else{
_2f8=objj_msgSend(CPIndexSet,"indexSetWithIndex:",aRow);
}
}
}else{
if(_allowsMultipleSelection){
_2f8=objj_msgSend(CPIndexSet,"indexSetWithIndexesInRange:",CPMakeRange(MIN(aRow,_selectionAnchorRow),ABS(aRow-_selectionAnchorRow)+1));
_2f9=objj_msgSend(self,"mouseDownFlags")&CPShiftKeyMask&&((_lastSelectedRow==objj_msgSend(_selectedRowIndexes,"lastIndex")&&aRow>_lastSelectedRow)||(_lastSelectedRow==objj_msgSend(_selectedRowIndexes,"firstIndex")&&aRow<_lastSelectedRow));
}else{
if(aRow>=0&&aRow<_numberOfRows){
_2f8=objj_msgSend(CPIndexSet,"indexSetWithIndex:",aRow);
}else{
_2f8=objj_msgSend(CPIndexSet,"indexSet");
}
}
}
if(objj_msgSend(_2f8,"isEqualToIndexSet:",_selectedRowIndexes)){
return;
}
if(_implementedDelegateMethods&_9&&!objj_msgSend(_delegate,"selectionShouldChangeInTableView:",self)){
return;
}
if(_implementedDelegateMethods&_11){
_2f8=objj_msgSend(_delegate,"tableView:selectionIndexesForProposedSelection:",self,_2f8);
}
if(_implementedDelegateMethods&_13){
var _2fa=[];
objj_msgSend(_2f8,"getIndexes:maxCount:inIndexRange:",_2fa,-1,nil);
var _2fb=_2fa.length;
while(_2fb--){
var _2fc=_2fa[_2fb];
if(!objj_msgSend(_delegate,"tableView:shouldSelectRow:",self,_2fc)){
objj_msgSend(_2f8,"removeIndex:",_2fc);
}
}
if(objj_msgSend(_2f8,"count")===0){
return;
}
}
if(!_allowsEmptySelection&&objj_msgSend(_2f8,"count")===0){
return;
}
if(objj_msgSend(_2f8,"isEqualToIndexSet:",_selectedRowIndexes)){
return;
}
objj_msgSend(self,"selectRowIndexes:byExtendingSelection:",_2f8,_2f9);
_lastSelectedRow=objj_msgSend(_2f8,"containsIndex:",aRow)?aRow:objj_msgSend(_2f8,"lastIndex");
}
}),new objj_method(sel_getUid("_noteSelectionIsChanging"),function(self,_2fd){
with(self){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:userInfo:",CPTableViewSelectionIsChangingNotification,self,nil);
}
}),new objj_method(sel_getUid("_noteSelectionDidChange"),function(self,_2fe){
with(self){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:userInfo:",CPTableViewSelectionDidChangeNotification,self,nil);
}
}),new objj_method(sel_getUid("becomeFirstResponder"),function(self,_2ff){
with(self){
return YES;
}
}),new objj_method(sel_getUid("acceptsFirstResponder"),function(self,_300){
with(self){
return YES;
}
}),new objj_method(sel_getUid("keyDown:"),function(self,_301,_302){
with(self){
var _303=objj_msgSend(_302,"charactersIgnoringModifiers"),_304=objj_msgSend(_302,"modifierFlags");
if(_303===CPUpArrowFunctionKey||_303===CPDownArrowFunctionKey){
if(objj_msgSend(self,"numberOfRows")!==0){
objj_msgSend(self,"_moveSelectionWithEvent:upward:",_302,(_303===CPUpArrowFunctionKey));
return;
}
}else{
if(_303===CPDeleteCharacter||_303===CPDeleteFunctionKey){
if(objj_msgSend(self,"_sendDelegateDeleteKeyPressed")){
return;
}
}
}
objj_msgSendSuper({receiver:self,super_class:objj_getClass("CPTableView").super_class},"keyDown:",_302);
}
}),new objj_method(sel_getUid("_selectionIsBroken"),function(self,_305){
with(self){
return objj_msgSend(self,"selectedRowIndexes")._ranges.length!==1;
}
}),new objj_method(sel_getUid("_moveSelectionWithEvent:upward:"),function(self,_306,_307,_308){
with(self){
if(_implementedDelegateMethods&_9&&!objj_msgSend(_delegate,"selectionShouldChangeInTableView:",self)){
return;
}
var _309=objj_msgSend(self,"selectedRowIndexes");
if(objj_msgSend(_309,"count")>0){
var _30a=((objj_msgSend(_307,"modifierFlags")&CPShiftKeyMask)&&_allowsMultipleSelection),i=objj_msgSend(self,"selectedRow");
if(objj_msgSend(self,"_selectionIsBroken")){
while(objj_msgSend(_309,"containsIndex:",i)){
_308?i--:i++;
}
_wasSelectionBroken=true;
}else{
if(_wasSelectionBroken&&((_308&&i!==objj_msgSend(_309,"firstIndex"))||(!_308&&i!==objj_msgSend(_309,"lastindex")))){
_308?i=objj_msgSend(_309,"firstIndex")-1:i=objj_msgSend(_309,"lastIndex");
_wasSelectionBroken=false;
}else{
_308?i--:i++;
}
}
}else{
var _30a=NO;
if(objj_msgSend(self,"numberOfRows")>0){
var i=_308?objj_msgSend(self,"numberOfRows")-1:0;
}
}
if(i>=objj_msgSend(self,"numberOfRows")||i<0){
return;
}
if(_implementedDelegateMethods&_13){
while(!objj_msgSend(_delegate,"tableView:shouldSelectRow:",self,i)&&(i<objj_msgSend(self,"numberOfRows")||i>0)){
_308?i--:i++;
}
if(!objj_msgSend(_delegate,"tableView:shouldSelectRow:",self,i)){
return;
}
}
if(objj_msgSend(_309,"containsIndex:",i)&&_30a){
var _30b=i;
_308?i++:i--;
objj_msgSend(_309,"removeIndex:",i);
_30a=NO;
}else{
if(_30a){
if(objj_msgSend(_309,"containsIndex:",i)){
i=_308?objj_msgSend(_309,"firstIndex")-1:objj_msgSend(_309,"lastIndex")+1;
i=MIN(MAX(i,0),objj_msgSend(self,"numberOfRows")-1);
}
objj_msgSend(_309,"addIndex:",i);
var _30b=i;
}else{
_309=objj_msgSend(CPIndexSet,"indexSetWithIndex:",i);
var _30b=i;
}
}
objj_msgSend(self,"selectRowIndexes:byExtendingSelection:",_309,_30a);
_lastSelectedRow=_30b;
if(i!==CPNotFound){
objj_msgSend(self,"scrollRowToVisible:",i);
}
}
})]);
class_addMethods(_1f,[new objj_method(sel_getUid("defaultThemeClass"),function(self,_30c){
with(self){
return "tableview";
}
}),new objj_method(sel_getUid("themeAttributes"),function(self,_30d){
with(self){
return objj_msgSend(CPDictionary,"dictionaryWithObjects:forKeys:",[objj_msgSend(CPNull,"null"),objj_msgSend(CPNull,"null"),objj_msgSend(CPNull,"null"),objj_msgSend(CPNull,"null"),objj_msgSend(CPNull,"null"),objj_msgSend(CPNull,"null"),objj_msgSend(CPNull,"null")],["alternating-row-colors","grid-color","highlighted-grid-color","selection-color","sourcelist-selection-color","sort-image","sort-image-reversed"]);
}
})]);
var _1e=objj_getClass("CPTableView");
if(!_1e){
throw new SyntaxError("*** Could not find definition for class \"CPTableView\"");
}
var _1f=_1e.isa;
class_addMethods(_1e,[new objj_method(sel_getUid("_replacementKeyPathForBinding:"),function(self,_30e,_30f){
with(self){
if(_30f==="selectionIndexes"){
return "selectedRowIndexes";
}
return objj_msgSendSuper({receiver:self,super_class:objj_getClass("CPTableView").super_class},"_replacementKeyPathForBinding:",_30f);
}
}),new objj_method(sel_getUid("_establishBindingsIfUnbound:"),function(self,_310,_311){
with(self){
if(objj_msgSend(objj_msgSend(self,"infoForBinding:","content"),"objectForKey:",CPObservedObjectKey)!==_311){
objj_msgSend(self,"bind:toObject:withKeyPath:options:","content",_311,"arrangedObjects",nil);
}
if(objj_msgSend(objj_msgSend(self,"infoForBinding:","selectionIndexes"),"objectForKey:",CPObservedObjectKey)!==_311){
objj_msgSend(self,"bind:toObject:withKeyPath:options:","selectionIndexes",_311,"selectionIndexes",nil);
}
}
}),new objj_method(sel_getUid("setContent:"),function(self,_312,_313){
with(self){
objj_msgSend(self,"reloadData");
}
})]);
var _314="CPTableViewDataSourceKey",_315="CPTableViewDelegateKey",_316="CPTableViewHeaderViewKey",_317="CPTableViewTableColumnsKey",_318="CPTableViewRowHeightKey",_319="CPTableViewIntercellSpacingKey",_31a="CPTableViewSelectionHighlightStyleKey",_31b="CPTableViewMultipleSelectionKey",_31c="CPTableViewEmptySelectionKey",_31d="CPTableViewColumnReorderingKey",_31e="CPTableViewColumnResizingKey",_31f="CPTableViewColumnSelectionKey",_320="CPTableViewColumnAutoresizingStyleKey",_321="CPTableViewGridColorKey",_322="CPTableViewGridStyleMaskKey",_323="CPTableViewUsesAlternatingBackgroundKey",_324="CPTableViewAlternatingRowColorsKey",_316="CPTableViewHeaderViewKey",_325="CPTableViewCornerViewKey",_326="CPTableViewAutosaveNameKey";
var _1e=objj_getClass("CPTableView");
if(!_1e){
throw new SyntaxError("*** Could not find definition for class \"CPTableView\"");
}
var _1f=_1e.isa;
class_addMethods(_1e,[new objj_method(sel_getUid("initWithCoder:"),function(self,_327,_328){
with(self){
self=objj_msgSendSuper({receiver:self,super_class:objj_getClass("CPTableView").super_class},"initWithCoder:",_328);
if(self){
_allowsColumnReordering=objj_msgSend(_328,"decodeBoolForKey:",_31d);
_allowsColumnResizing=objj_msgSend(_328,"decodeBoolForKey:",_31e);
_allowsMultipleSelection=objj_msgSend(_328,"decodeBoolForKey:",_31b);
_allowsEmptySelection=objj_msgSend(_328,"decodeBoolForKey:",_31c);
_allowsColumnSelection=objj_msgSend(_328,"decodeBoolForKey:",_31f);
_selectionHighlightStyle=objj_msgSend(_328,"decodeIntForKey:",_31a);
_columnAutoResizingStyle=objj_msgSend(_328,"decodeIntForKey:",_320);
_tableColumns=objj_msgSend(_328,"decodeObjectForKey:",_317)||[];
objj_msgSend(_tableColumns,"makeObjectsPerformSelector:withObject:",sel_getUid("setTableView:"),self);
if(objj_msgSend(_328,"containsValueForKey:",_318)){
_rowHeight=objj_msgSend(_328,"decodeFloatForKey:",_318);
}else{
_rowHeight=23;
}
_intercellSpacing=objj_msgSend(_328,"decodeSizeForKey:",_319)||{width:3,height:2};
objj_msgSend(self,"setGridColor:",objj_msgSend(_328,"decodeObjectForKey:",_321));
_gridStyleMask=objj_msgSend(_328,"decodeIntForKey:",_322)||CPTableViewGridNone;
_usesAlternatingRowBackgroundColors=objj_msgSend(_328,"decodeObjectForKey:",_323);
objj_msgSend(self,"setAlternatingRowBackgroundColors:",objj_msgSend(_328,"decodeObjectForKey:",_324));
_headerView=objj_msgSend(_328,"decodeObjectForKey:",_316);
_cornerView=objj_msgSend(_328,"decodeObjectForKey:",_325);
objj_msgSend(self,"setDataSource:",objj_msgSend(_328,"decodeObjectForKey:",_314));
objj_msgSend(self,"setDelegate:",objj_msgSend(_328,"decodeObjectForKey:",_315));
objj_msgSend(self,"_init");
objj_msgSend(self,"viewWillMoveToSuperview:",objj_msgSend(self,"superview"));
objj_msgSend(self,"setAutosaveName:",objj_msgSend(_328,"decodeObjectForKey:",_326));
}
return self;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(self,_329,_32a){
with(self){
objj_msgSendSuper({receiver:self,super_class:objj_getClass("CPTableView").super_class},"encodeWithCoder:",_32a);
objj_msgSend(_32a,"encodeObject:forKey:",_dataSource,_314);
objj_msgSend(_32a,"encodeObject:forKey:",_delegate,_315);
objj_msgSend(_32a,"encodeFloat:forKey:",_rowHeight,_318);
objj_msgSend(_32a,"encodeSize:forKey:",_intercellSpacing,_319);
objj_msgSend(_32a,"encodeInt:forKey:",_selectionHighlightStyle,_31a);
objj_msgSend(_32a,"encodeInt:forKey:",_columnAutoResizingStyle,_320);
objj_msgSend(_32a,"encodeBool:forKey:",_allowsMultipleSelection,_31b);
objj_msgSend(_32a,"encodeBool:forKey:",_allowsEmptySelection,_31c);
objj_msgSend(_32a,"encodeBool:forKey:",_allowsColumnReordering,_31d);
objj_msgSend(_32a,"encodeBool:forKey:",_allowsColumnResizing,_31e);
objj_msgSend(_32a,"encodeBool:forKey:",_allowsColumnSelection,_31f);
objj_msgSend(_32a,"encodeObject:forKey:",_tableColumns,_317);
objj_msgSend(_32a,"encodeObject:forKey:",objj_msgSend(self,"gridColor"),_321);
objj_msgSend(_32a,"encodeInt:forKey:",_gridStyleMask,_322);
objj_msgSend(_32a,"encodeBool:forKey:",_usesAlternatingRowBackgroundColors,_323);
objj_msgSend(_32a,"encodeObject:forKey:",objj_msgSend(self,"alternatingRowBackgroundColors"),_324);
objj_msgSend(_32a,"encodeObject:forKey:",_cornerView,_325);
objj_msgSend(_32a,"encodeObject:forKey:",_headerView,_316);
objj_msgSend(_32a,"encodeObject:forKey:",_autosaveName,_326);
}
})]);
var _1e=objj_getClass("CPIndexSet");
if(!_1e){
throw new SyntaxError("*** Could not find definition for class \"CPIndexSet\"");
}
var _1f=_1e.isa;
class_addMethods(_1e,[new objj_method(sel_getUid("removeMatches:"),function(self,_32b,_32c){
with(self){
var _32d=objj_msgSend(self,"firstIndex"),_32e=MIN(_32d,objj_msgSend(_32c,"firstIndex")),_32f=(_32e==_32d);
while(_32e!=CPNotFound){
var _330=(_32f)?_32c:self;
otherIndex=objj_msgSend(_330,"indexGreaterThanOrEqualToIndex:",_32e);
if(otherIndex==_32e){
objj_msgSend(self,"removeIndex:",_32e);
objj_msgSend(_32c,"removeIndex:",_32e);
}
_32e=otherIndex;
_32f=!_32f;
}
}
})]);
var _1e=objj_allocateClassPair(CPView,"_CPDropOperationDrawingView"),_1f=_1e.isa;
class_addIvars(_1e,[new objj_ivar("dropOperation"),new objj_ivar("tableView"),new objj_ivar("currentRow"),new objj_ivar("isBlinking")]);
objj_registerClassPair(_1e);
class_addMethods(_1e,[new objj_method(sel_getUid("dropOperation"),function(self,_331){
with(self){
return dropOperation;
}
}),new objj_method(sel_getUid("setDropOperation:"),function(self,_332,_333){
with(self){
dropOperation=_333;
}
}),new objj_method(sel_getUid("tableView"),function(self,_334){
with(self){
return tableView;
}
}),new objj_method(sel_getUid("setTableView:"),function(self,_335,_336){
with(self){
tableView=_336;
}
}),new objj_method(sel_getUid("currentRow"),function(self,_337){
with(self){
return currentRow;
}
}),new objj_method(sel_getUid("setCurrentRow:"),function(self,_338,_339){
with(self){
currentRow=_339;
}
}),new objj_method(sel_getUid("isBlinking"),function(self,_33a){
with(self){
return isBlinking;
}
}),new objj_method(sel_getUid("setIsBlinking:"),function(self,_33b,_33c){
with(self){
isBlinking=_33c;
}
}),new objj_method(sel_getUid("drawRect:"),function(self,_33d,_33e){
with(self){
if(tableView._destinationDragStyle===CPTableViewDraggingDestinationFeedbackStyleNone||isBlinking){
return;
}
var _33f=objj_msgSend(objj_msgSend(CPGraphicsContext,"currentContext"),"graphicsPort");
CGContextSetStrokeColor(_33f,objj_msgSend(CPColor,"colorWithHexString:","4886ca"));
CGContextSetLineWidth(_33f,3);
if(currentRow===-1){
CGContextStrokeRect(_33f,objj_msgSend(self,"bounds"));
}else{
if(dropOperation===CPTableViewDropOn){
var _340=objj_msgSend(tableView,"selectedRowIndexes"),_341={origin:{x:_33e.origin.x+2,y:_33e.origin.y+2},size:{width:_33e.size.width-4,height:_33e.size.height-5}};
if(objj_msgSend(_340,"containsIndex:",currentRow)){
CGContextSetLineWidth(_33f,2);
CGContextSetStrokeColor(_33f,objj_msgSend(CPColor,"whiteColor"));
}else{
CGContextSetFillColor(_33f,objj_msgSend(CPColor,"colorWithRed:green:blue:alpha:",72/255,134/255,202/255,0.25));
CGContextFillRoundedRectangleInRect(_33f,_341,8,YES,YES,YES,YES);
}
CGContextStrokeRoundedRectangleInRect(_33f,_341,8,YES,YES,YES,YES);
}else{
if(dropOperation===CPTableViewDropAbove){
objj_msgSend(self,"setFrameOrigin:",{x:_frame.origin.x,y:_frame.origin.y-8});
var _340=objj_msgSend(tableView,"selectedRowIndexes");
if(objj_msgSend(_340,"containsIndex:",currentRow-1)||objj_msgSend(_340,"containsIndex:",currentRow)){
CGContextSetStrokeColor(_33f,objj_msgSend(CPColor,"whiteColor"));
CGContextSetLineWidth(_33f,4);
CGContextStrokeEllipseInRect(_33f,{origin:{x:_33e.origin.x+4,y:_33e.origin.y+4},size:{width:8,height:8}});
CGContextBeginPath(_33f);
CGContextMoveToPoint(_33f,10,_33e.origin.y+8);
CGContextAddLineToPoint(_33f,_33e.size.width-_33e.origin.y-8,_33e.origin.y+8);
CGContextClosePath(_33f);
CGContextStrokePath(_33f);
CGContextSetStrokeColor(_33f,objj_msgSend(CPColor,"colorWithHexString:","4886ca"));
CGContextSetLineWidth(_33f,3);
}
CGContextStrokeEllipseInRect(_33f,{origin:{x:_33e.origin.x+4,y:_33e.origin.y+4},size:{width:8,height:8}});
CGContextBeginPath(_33f);
CGContextMoveToPoint(_33f,10,_33e.origin.y+8);
CGContextAddLineToPoint(_33f,_33e.size.width-_33e.origin.y-8,_33e.origin.y+8);
CGContextClosePath(_33f);
CGContextStrokePath(_33f);
}
}
}
}
}),new objj_method(sel_getUid("blink"),function(self,_342){
with(self){
if(dropOperation!==CPTableViewDropOn){
return;
}
isBlinking=YES;
var _343=function(){
objj_msgSend(self,"setHidden:",NO);
isBlinking=NO;
};
var _344=function(){
objj_msgSend(self,"setHidden:",YES);
isBlinking=YES;
};
objj_msgSend(self,"setHidden:",YES);
objj_msgSend(CPTimer,"scheduledTimerWithTimeInterval:callback:repeats:",0.1,_343,NO);
objj_msgSend(CPTimer,"scheduledTimerWithTimeInterval:callback:repeats:",0.19,_344,NO);
objj_msgSend(CPTimer,"scheduledTimerWithTimeInterval:callback:repeats:",0.27,_343,NO);
}
})]);
var _1e=objj_allocateClassPair(CPView,"_CPColumnDragView"),_1f=_1e.isa;
class_addIvars(_1e,[new objj_ivar("_lineColor")]);
objj_registerClassPair(_1e);
class_addMethods(_1e,[new objj_method(sel_getUid("initWithLineColor:"),function(self,_345,_346){
with(self){
self=objj_msgSendSuper({receiver:self,super_class:objj_getClass("_CPColumnDragView").super_class},"initWithFrame:",{origin:{x:0,y:0},size:{width:0,height:0}});
if(self){
_lineColor=_346;
}
return self;
}
}),new objj_method(sel_getUid("drawRect:"),function(self,_347,_348){
with(self){
var _349=objj_msgSend(objj_msgSend(CPGraphicsContext,"currentContext"),"graphicsPort");
CGContextSetStrokeColor(_349,_lineColor);
var _34a=[{x:0.5,y:0},{x:0.5,y:_348.size.height}];
CGContextStrokeLineSegments(_349,_34a,2);
_34a=[{x:_348.size.width-0.5,y:0},{x:_348.size.width-0.5,y:_348.size.height}];
CGContextStrokeLineSegments(_349,_34a,2);
}
})]);
p;11;CPTabView.jt;10581;@STATIC;1.0;i;7;CPBox.ji;20;CPSegmentedControl.ji;15;CPTabViewItem.ji;8;CPView.jt;10493;
objj_executeFile("CPBox.j",YES);
objj_executeFile("CPSegmentedControl.j",YES);
objj_executeFile("CPTabViewItem.j",YES);
objj_executeFile("CPView.j",YES);
CPTopTabsBezelBorder=0;
CPBottomTabsBezelBorder=2;
CPNoTabsBezelBorder=4;
CPNoTabsLineBorder=5;
CPNoTabsNoBorder=6;
var _1=1,_2=2,_3=4,_4=8;
var _5=objj_allocateClassPair(CPView,"CPTabView"),_6=_5.isa;
class_addIvars(_5,[new objj_ivar("_items"),new objj_ivar("_tabs"),new objj_ivar("_box"),new objj_ivar("_selectedIndex"),new objj_ivar("_type"),new objj_ivar("_font"),new objj_ivar("_delegate"),new objj_ivar("_delegateSelectors")]);
objj_registerClassPair(_5);
class_addMethods(_5,[new objj_method(sel_getUid("initWithFrame:"),function(_7,_8,_9){
with(_7){
if(_7=objj_msgSendSuper({receiver:_7,super_class:objj_getClass("CPTabView").super_class},"initWithFrame:",_9)){
_items=objj_msgSend(CPArray,"array");
_selectedIndex=CPNotFound;
objj_msgSend(_7,"_init");
objj_msgSend(_7,"setTabViewType:",CPTopTabsBezelBorder);
}
return _7;
}
}),new objj_method(sel_getUid("_init"),function(_a,_b){
with(_a){
_tabs=objj_msgSend(objj_msgSend(CPSegmentedControl,"alloc"),"initWithFrame:",CGRectMake(0,0,0,0));
objj_msgSend(_tabs,"setHitTests:",NO);
var _c=objj_msgSend(_tabs,"valueForThemeAttribute:","default-height");
objj_msgSend(_tabs,"setFrameSize:",CGSizeMake(0,_c));
_box=objj_msgSend(objj_msgSend(CPBox,"alloc"),"initWithFrame:",objj_msgSend(_a,"bounds"));
objj_msgSend(_a,"setBackgroundColor:",objj_msgSend(CPColor,"colorWithCalibratedWhite:alpha:",0.95,1));
objj_msgSend(_box,"setAutoresizingMask:",CPViewWidthSizable|CPViewHeightSizable);
objj_msgSend(_tabs,"setAutoresizingMask:",CPViewMinXMargin|CPViewMaxXMargin);
objj_msgSend(_a,"addSubview:",_box);
objj_msgSend(_a,"addSubview:",_tabs);
}
}),new objj_method(sel_getUid("addTabViewItem:"),function(_d,_e,_f){
with(_d){
objj_msgSend(_d,"insertTabViewItem:atIndex:",_f,objj_msgSend(_items,"count"));
}
}),new objj_method(sel_getUid("insertTabViewItem:atIndex:"),function(_10,_11,_12,_13){
with(_10){
objj_msgSend(_items,"insertObject:atIndex:",_12,_13);
objj_msgSend(_10,"_updateItems");
objj_msgSend(_10,"_repositionTabs");
objj_msgSend(_12,"_setTabView:",_10);
if(_delegateSelectors&_4){
objj_msgSend(_delegate,"tabViewDidChangeNumberOfTabViewItems:",_10);
}
}
}),new objj_method(sel_getUid("removeTabViewItem:"),function(_14,_15,_16){
with(_14){
var _17=objj_msgSend(_items,"count");
for(var i=0;i<_17;i++){
if(objj_msgSend(_items,"objectAtIndex:",i)===_16){
objj_msgSend(_items,"removeObjectAtIndex:",i);
break;
}
}
objj_msgSend(_14,"_updateItems");
objj_msgSend(_14,"_repositionTabs");
objj_msgSend(_16,"_setTabView:",nil);
if(_delegateSelectors&_4){
objj_msgSend(_delegate,"tabViewDidChangeNumberOfTabViewItems:",_14);
}
}
}),new objj_method(sel_getUid("indexOfTabViewItem:"),function(_18,_19,_1a){
with(_18){
return objj_msgSend(_items,"indexOfObjectIdenticalTo:",_1a);
}
}),new objj_method(sel_getUid("indexOfTabViewItemWithIdentifier:"),function(_1b,_1c,_1d){
with(_1b){
for(var _1e=objj_msgSend(_items,"count");_1e>=0;_1e--){
if(objj_msgSend(objj_msgSend(_items[_1e],"identifier"),"isEqual:",_1d)){
return _1e;
}
}
return CPNotFound;
}
}),new objj_method(sel_getUid("numberOfTabViewItems"),function(_1f,_20){
with(_1f){
return objj_msgSend(_items,"count");
}
}),new objj_method(sel_getUid("tabViewItemAtIndex:"),function(_21,_22,_23){
with(_21){
return objj_msgSend(_items,"objectAtIndex:",_23);
}
}),new objj_method(sel_getUid("tabViewItems"),function(_24,_25){
with(_24){
return objj_msgSend(_items,"copy");
}
}),new objj_method(sel_getUid("selectFirstTabViewItem:"),function(_26,_27,_28){
with(_26){
if(objj_msgSend(_items,"count")===0){
return;
}
objj_msgSend(_26,"selectTabViewItemAtIndex:",0);
}
}),new objj_method(sel_getUid("selectLastTabViewItem:"),function(_29,_2a,_2b){
with(_29){
if(objj_msgSend(_items,"count")===0){
return;
}
objj_msgSend(_29,"selectTabViewItemAtIndex:",objj_msgSend(_items,"count")-1);
}
}),new objj_method(sel_getUid("selectNextTabViewItem:"),function(_2c,_2d,_2e){
with(_2c){
if(_selectedIndex===CPNotFound){
return;
}
var _2f=_selectedIndex+1;
if(_2f===objj_msgSend(_items,"count")){
return;
}
objj_msgSend(_2c,"selectTabViewItemAtIndex:",_2f);
}
}),new objj_method(sel_getUid("selectPreviousTabViewItem:"),function(_30,_31,_32){
with(_30){
if(_selectedIndex===CPNotFound){
return;
}
var _33=_selectedIndex-1;
if(_33<0){
return;
}
objj_msgSend(_30,"selectTabViewItemAtIndex:",_33);
}
}),new objj_method(sel_getUid("selectTabViewItem:"),function(_34,_35,_36){
with(_34){
objj_msgSend(_34,"selectTabViewItemAtIndex:",objj_msgSend(_34,"indexOfTabViewItem:",_36));
}
}),new objj_method(sel_getUid("selectTabViewItemAtIndex:"),function(_37,_38,_39){
with(_37){
var _3a=objj_msgSend(_items,"objectAtIndex:",_39);
if(_39===_selectedIndex){
return;
}
var _3a=objj_msgSend(_37,"tabViewItemAtIndex:",_39);
if((_delegateSelectors&_2)&&!objj_msgSend(_delegate,"tabView:shouldSelectTabViewItem:",_37,_3a)){
return;
}
if(_delegateSelectors&_3){
objj_msgSend(_delegate,"tabView:willSelectTabViewItem:",_37,_3a);
}
objj_msgSend(_tabs,"selectSegmentWithTag:",_39);
objj_msgSend(_37,"_setSelectedIndex:",_39);
if(_delegateSelectors&_1){
objj_msgSend(_delegate,"tabView:didSelectTabViewItem:",_37,_3a);
}
}
}),new objj_method(sel_getUid("selectedTabViewItem"),function(_3b,_3c){
with(_3b){
return objj_msgSend(_items,"objectAtIndex:",_selectedIndex);
}
}),new objj_method(sel_getUid("font"),function(_3d,_3e){
with(_3d){
return _font;
}
}),new objj_method(sel_getUid("setFont:"),function(_3f,_40,_41){
with(_3f){
if(objj_msgSend(_font,"isEqual:",_41)){
return;
}
_font=_41;
objj_msgSend(_tabs,"setFont:",_font);
}
}),new objj_method(sel_getUid("setTabViewType:"),function(_42,_43,_44){
with(_42){
if(_type===_44){
return;
}
_type=_44;
if(_type!==CPTopTabsBezelBorder&&_type!==CPBottomTabsBezelBorder){
objj_msgSend(_box,"setFrame:",objj_msgSend(_42,"bounds"));
objj_msgSend(_tabs,"removeFromSuperview");
}else{
var _45=objj_msgSend(_42,"frame"),_46=CGRectGetHeight(objj_msgSend(_tabs,"frame")),_47=_type===CPTopTabsBezelBorder?_46/2:0;
objj_msgSend(_box,"setFrame:",CGRectMake(0,_47,CGRectGetWidth(_45),CGRectGetHeight(_45)-_46/2));
objj_msgSend(_42,"addSubview:",_tabs);
}
switch(_type){
case CPTopTabsBezelBorder:
case CPBottomTabsBezelBorder:
case CPNoTabsBezelBorder:
objj_msgSend(_box,"setBorderType:",CPBezelBorder);
break;
case CPNoTabsLineBorder:
objj_msgSend(_box,"setBorderType:",CPLineBorder);
break;
case CPNoTabsNoBorder:
objj_msgSend(_box,"setBorderType:",CPNoBorder);
break;
}
}
}),new objj_method(sel_getUid("tabViewType"),function(_48,_49){
with(_48){
return _type;
}
}),new objj_method(sel_getUid("delegate"),function(_4a,_4b){
with(_4a){
return _delegate;
}
}),new objj_method(sel_getUid("setDelegate:"),function(_4c,_4d,_4e){
with(_4c){
if(_delegate==_4e){
return;
}
_delegate=_4e;
_delegateSelectors=0;
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("tabView:shouldSelectTabViewItem:"))){
_delegateSelectors|=_2;
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("tabView:willSelectTabViewItem:"))){
_delegateSelectors|=_3;
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("tabView:didSelectTabViewItem:"))){
_delegateSelectors|=_1;
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("tabViewDidChangeNumberOfTabViewItems:"))){
_delegateSelectors|=_4;
}
}
}),new objj_method(sel_getUid("setBackgroundColor:"),function(_4f,_50,_51){
with(_4f){
objj_msgSend(_box,"setBackgroundColor:",_51);
}
}),new objj_method(sel_getUid("backgroundColor"),function(_52,_53){
with(_52){
return objj_msgSend(_box,"backgroundColor");
}
}),new objj_method(sel_getUid("mouseDown:"),function(_54,_55,_56){
with(_54){
var _57=objj_msgSend(_tabs,"testSegment:",objj_msgSend(_tabs,"convertPoint:fromView:",objj_msgSend(_56,"locationInWindow"),nil));
if(_57!=CPNotFound){
objj_msgSend(_54,"selectTabViewItemAtIndex:",_57);
objj_msgSend(_tabs,"trackSegment:",_56);
}
}
}),new objj_method(sel_getUid("_repositionTabs"),function(_58,_59){
with(_58){
var _5a=CGRectGetWidth(objj_msgSend(_58,"bounds"))/2,_5b=CGRectGetHeight(objj_msgSend(_tabs,"bounds"))/2;
if(_type===CPBottomTabsBezelBorder){
objj_msgSend(_tabs,"setCenter:",CGPointMake(_5a,CGRectGetHeight(objj_msgSend(_58,"bounds"))-_5b));
}else{
objj_msgSend(_tabs,"setCenter:",CGPointMake(_5a,_5b));
}
}
}),new objj_method(sel_getUid("_setSelectedIndex:"),function(_5c,_5d,_5e){
with(_5c){
_selectedIndex=_5e;
objj_msgSend(_box,"setContentView:",objj_msgSend(objj_msgSend(_items,"objectAtIndex:",_selectedIndex),"view"));
}
}),new objj_method(sel_getUid("_updateItems"),function(_5f,_60){
with(_5f){
var _61=objj_msgSend(_items,"count");
objj_msgSend(_tabs,"setSegmentCount:",_61);
for(var i=0;i<_61;i++){
objj_msgSend(_tabs,"setLabel:forSegment:",objj_msgSend(objj_msgSend(_items,"objectAtIndex:",i),"label"),i);
objj_msgSend(_tabs,"setTag:forSegment:",i,i);
}
if(_selectedIndex===CPNotFound){
objj_msgSend(_5f,"selectFirstTabViewItem:",_5f);
}
}
})]);
var _62="CPTabViewItemsKey",_63="CPTabViewSelectedItemKey",_64="CPTabViewTypeKey",_65="CPTabViewFontKey",_66="CPTabViewDelegateKey";
var _5=objj_getClass("CPTabView");
if(!_5){
throw new SyntaxError("*** Could not find definition for class \"CPTabView\"");
}
var _6=_5.isa;
class_addMethods(_5,[new objj_method(sel_getUid("initWithCoder:"),function(_67,_68,_69){
with(_67){
if(_67=objj_msgSendSuper({receiver:_67,super_class:objj_getClass("CPTabView").super_class},"initWithCoder:",_69)){
objj_msgSend(_67,"_init");
_font=objj_msgSend(_69,"decodeObjectForKey:",_65);
objj_msgSend(_tabs,"setFont:",_font);
_items=objj_msgSend(_69,"decodeObjectForKey:",_62);
objj_msgSend(_67,"_updateItems");
objj_msgSend(_67,"_repositionTabs");
var _6a=objj_msgSend(_69,"decodeObjectForKey:",_63);
if(_6a){
objj_msgSend(_67,"selectTabViewItem:",_6a);
}
objj_msgSend(_67,"setDelegate:",objj_msgSend(_69,"decodeObjectForKey:",_66));
objj_msgSend(_67,"setTabViewType:",objj_msgSend(_69,"decodeIntForKey:",_64));
}
return _67;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_6b,_6c,_6d){
with(_6b){
objj_msgSendSuper({receiver:_6b,super_class:objj_getClass("CPTabView").super_class},"encodeWithCoder:",_6d);
objj_msgSend(_6d,"encodeObject:forKey:",_items,_62);
objj_msgSend(_6d,"encodeObject:forKey:",objj_msgSend(_6b,"selectedTabViewItem"),_63);
objj_msgSend(_6d,"encodeInt:forKey:",_type,_64);
objj_msgSend(_6d,"encodeObject:forKey:",_font,_65);
objj_msgSend(_6d,"encodeConditionalObject:forKey:",_delegate,_66);
}
})]);
p;15;CPTabViewItem.jt;2858;@STATIC;1.0;I;21;Foundation/CPObject.ji;8;CPView.jt;2801;
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("CPView.j",YES);
CPSelectedTab=0;
CPBackgroundTab=1;
CPPressedTab=2;
var _1=objj_allocateClassPair(CPObject,"CPTabViewItem"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_identifier"),new objj_ivar("_label"),new objj_ivar("_view"),new objj_ivar("_auxiliaryView"),new objj_ivar("_tabView")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("init"),function(_3,_4){
with(_3){
return objj_msgSend(_3,"initWithIdentifier:","");
}
}),new objj_method(sel_getUid("initWithIdentifier:"),function(_5,_6,_7){
with(_5){
_5=objj_msgSendSuper({receiver:_5,super_class:objj_getClass("CPTabViewItem").super_class},"init");
if(_5){
_identifier=_7;
}
return _5;
}
}),new objj_method(sel_getUid("setLabel:"),function(_8,_9,_a){
with(_8){
_label=_a;
}
}),new objj_method(sel_getUid("label"),function(_b,_c){
with(_b){
return _label;
}
}),new objj_method(sel_getUid("tabState"),function(_d,_e){
with(_d){
return _tabState;
}
}),new objj_method(sel_getUid("setIdentifier:"),function(_f,_10,_11){
with(_f){
_identifier=_11;
}
}),new objj_method(sel_getUid("identifier"),function(_12,_13){
with(_12){
return _identifier;
}
}),new objj_method(sel_getUid("setView:"),function(_14,_15,_16){
with(_14){
_view=_16;
}
}),new objj_method(sel_getUid("view"),function(_17,_18){
with(_17){
return _view;
}
}),new objj_method(sel_getUid("setAuxiliaryView:"),function(_19,_1a,_1b){
with(_19){
_auxiliaryView=_1b;
}
}),new objj_method(sel_getUid("auxiliaryView"),function(_1c,_1d){
with(_1c){
return _auxiliaryView;
}
}),new objj_method(sel_getUid("tabView"),function(_1e,_1f){
with(_1e){
return _tabView;
}
}),new objj_method(sel_getUid("_setTabView:"),function(_20,_21,_22){
with(_20){
_tabView=_22;
}
})]);
var _23="CPTabViewItemIdentifierKey",_24="CPTabViewItemLabelKey",_25="CPTabViewItemViewKey",_26="CPTabViewItemAuxViewKey";
var _1=objj_getClass("CPTabViewItem");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"CPTabViewItem\"");
}
var _2=_1.isa;
class_addMethods(_1,[new objj_method(sel_getUid("initWithCoder:"),function(_27,_28,_29){
with(_27){
_27=objj_msgSendSuper({receiver:_27,super_class:objj_getClass("CPTabViewItem").super_class},"init");
if(_27){
_identifier=objj_msgSend(_29,"decodeObjectForKey:",_23);
_label=objj_msgSend(_29,"decodeObjectForKey:",_24);
_view=objj_msgSend(_29,"decodeObjectForKey:",_25);
_auxiliaryView=objj_msgSend(_29,"decodeObjectForKey:",_26);
}
return _27;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_2a,_2b,_2c){
with(_2a){
objj_msgSend(_2c,"encodeObject:forKey:",_identifier,_23);
objj_msgSend(_2c,"encodeObject:forKey:",_label,_24);
objj_msgSend(_2c,"encodeObject:forKey:",_view,_25);
objj_msgSend(_2c,"encodeObject:forKey:",_auxiliaryView,_26);
}
})]);
p;8;CPText.jt;219;@STATIC;1.0;t;201;
CPEnterCharacter="";
CPBackspaceCharacter="\b";
CPTabCharacter="\t";
CPNewlineCharacter="\n";
CPFormFeedCharacter="\f";
CPCarriageReturnCharacter="\r";
CPBackTabCharacter="";
CPDeleteCharacter="";
p;13;CPTextField.jt;34807;@STATIC;1.0;i;11;CPControl.ji;17;CPStringDrawing.ji;17;CPCompatibility.ji;21;_CPImageAndTextView.jt;34701;
objj_executeFile("CPControl.j",YES);
objj_executeFile("CPStringDrawing.j",YES);
objj_executeFile("CPCompatibility.j",YES);
objj_executeFile("_CPImageAndTextView.j",YES);
CPTextFieldSquareBezel=0;
CPTextFieldRoundedBezel=1;
CPTextFieldDidFocusNotification="CPTextFieldDidFocusNotification";
CPTextFieldDidBlurNotification="CPTextFieldDidBlurNotification";
var _1=nil,_2=nil,_3=nil,_4=nil,_5=nil,_6=NO,_7=NO,_8=NO,_9=nil,_a=nil,_b=nil;
var _c="";
var _d=objj_getClass("CPString");
if(!_d){
throw new SyntaxError("*** Could not find definition for class \"CPString\"");
}
var _e=_d.isa;
class_addMethods(_d,[new objj_method(sel_getUid("string"),function(_f,_10){
with(_f){
return _f;
}
})]);
CPTextFieldStateRounded=CPThemeState("rounded");
CPTextFieldStatePlaceholder=CPThemeState("placeholder");
var _d=objj_allocateClassPair(CPControl,"CPTextField"),_e=_d.isa;
class_addIvars(_d,[new objj_ivar("_isEditing"),new objj_ivar("_isEditable"),new objj_ivar("_isSelectable"),new objj_ivar("_isSecure"),new objj_ivar("_willBecomeFirstResponderByClick"),new objj_ivar("_drawsBackground"),new objj_ivar("_textFieldBackgroundColor"),new objj_ivar("_placeholderString"),new objj_ivar("_delegate"),new objj_ivar("_textDidChangeValue"),new objj_ivar("_bezelStyle"),new objj_ivar("_isBordered"),new objj_ivar("_controlSize")]);
objj_registerClassPair(_d);
class_addMethods(_d,[new objj_method(sel_getUid("_inputElement"),function(_11,_12){
with(_11){
if(!_1){
_1=document.createElement("input");
_1.style.position="absolute";
_1.style.border="0px";
_1.style.padding="0px";
_1.style.margin="0px";
_1.style.whiteSpace="pre";
_1.style.background="transparent";
_1.style.outline="none";
_b=function(_13){
if(_4&&_4._DOMElement!=_1.parentNode){
return;
}
if(!_6){
objj_msgSend(objj_msgSend(_4,"window"),"makeFirstResponder:",nil);
return;
}
CPTextFieldHandleBlur(_13,_1);
_7=YES;
return true;
};
CPTextFieldHandleBlur=function(_14){
_4=nil;
objj_msgSend(objj_msgSend(CPRunLoop,"currentRunLoop"),"limitDateForMode:",CPDefaultRunLoopMode);
};
_1.onblur=_b;
_3=_1;
}
if(CPFeatureIsCompatible(CPInputTypeCanBeChangedFeature)){
if(objj_msgSend(_11,"isSecure")){
_1.type="password";
}else{
_1.type="text";
}
return _1;
}
if(objj_msgSend(_11,"isSecure")){
if(!_2){
_2=document.createElement("input");
_2.style.position="absolute";
_2.style.border="0px";
_2.style.padding="0px";
_2.style.margin="0px";
_2.style.whiteSpace="pre";
_2.style.background="transparent";
_2.style.outline="none";
_2.type="password";
_2.onblur=_b;
}
_1=_2;
}else{
_1=_3;
}
return _1;
}
}),new objj_method(sel_getUid("initWithFrame:"),function(_15,_16,_17){
with(_15){
_15=objj_msgSendSuper({receiver:_15,super_class:objj_getClass("CPTextField").super_class},"initWithFrame:",_17);
if(_15){
objj_msgSend(_15,"setStringValue:","");
objj_msgSend(_15,"setPlaceholderString:","");
_sendActionOn=CPKeyUpMask|CPKeyDownMask;
objj_msgSend(_15,"setValue:forThemeAttribute:",CPLeftTextAlignment,"alignment");
}
return _15;
}
}),new objj_method(sel_getUid("setEditable:"),function(_18,_19,_1a){
with(_18){
if(_isEditable===_1a){
return;
}
_isEditable=_1a;
if(_1a){
_isSelectable=YES;
}
if(!_1a&&objj_msgSend(objj_msgSend(_18,"window"),"firstResponder")===_18){
objj_msgSend(objj_msgSend(_18,"window"),"makeFirstResponder:",nil);
}
}
}),new objj_method(sel_getUid("isEditable"),function(_1b,_1c){
with(_1b){
return _isEditable;
}
}),new objj_method(sel_getUid("setEnabled:"),function(_1d,_1e,_1f){
with(_1d){
objj_msgSendSuper({receiver:_1d,super_class:objj_getClass("CPTextField").super_class},"setEnabled:",_1f);
if(!_1f&&objj_msgSend(objj_msgSend(_1d,"window"),"firstResponder")===_1d){
objj_msgSend(objj_msgSend(_1d,"window"),"makeFirstResponder:",nil);
}
}
}),new objj_method(sel_getUid("setSelectable:"),function(_20,_21,_22){
with(_20){
_isSelectable=_22;
}
}),new objj_method(sel_getUid("isSelectable"),function(_23,_24){
with(_23){
return _isSelectable;
}
}),new objj_method(sel_getUid("setSecure:"),function(_25,_26,_27){
with(_25){
_isSecure=_27;
}
}),new objj_method(sel_getUid("isSecure"),function(_28,_29){
with(_28){
return _isSecure;
}
}),new objj_method(sel_getUid("setBezeled:"),function(_2a,_2b,_2c){
with(_2a){
if(_2c){
objj_msgSend(_2a,"setThemeState:",CPThemeStateBezeled);
}else{
objj_msgSend(_2a,"unsetThemeState:",CPThemeStateBezeled);
}
}
}),new objj_method(sel_getUid("isBezeled"),function(_2d,_2e){
with(_2d){
return objj_msgSend(_2d,"hasThemeState:",CPThemeStateBezeled);
}
}),new objj_method(sel_getUid("setBezelStyle:"),function(_2f,_30,_31){
with(_2f){
var _32=_31===CPTextFieldRoundedBezel;
if(_32){
objj_msgSend(_2f,"setThemeState:",CPTextFieldStateRounded);
}else{
objj_msgSend(_2f,"unsetThemeState:",CPTextFieldStateRounded);
}
}
}),new objj_method(sel_getUid("bezelStyle"),function(_33,_34){
with(_33){
if(objj_msgSend(_33,"hasThemeState:",CPTextFieldStateRounded)){
return CPTextFieldRoundedBezel;
}
return CPTextFieldSquareBezel;
}
}),new objj_method(sel_getUid("setBordered:"),function(_35,_36,_37){
with(_35){
if(_37){
objj_msgSend(_35,"setThemeState:",CPThemeStateBordered);
}else{
objj_msgSend(_35,"unsetThemeState:",CPThemeStateBordered);
}
}
}),new objj_method(sel_getUid("isBordered"),function(_38,_39){
with(_38){
return objj_msgSend(_38,"hasThemeState:",CPThemeStateBordered);
}
}),new objj_method(sel_getUid("setDrawsBackground:"),function(_3a,_3b,_3c){
with(_3a){
if(_drawsBackground==_3c){
return;
}
_drawsBackground=_3c;
objj_msgSend(_3a,"setNeedsLayout");
objj_msgSend(_3a,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("drawsBackground"),function(_3d,_3e){
with(_3d){
return _drawsBackground;
}
}),new objj_method(sel_getUid("setTextFieldBackgroundColor:"),function(_3f,_40,_41){
with(_3f){
if(_textFieldBackgroundColor==_41){
return;
}
_textFieldBackgroundColor=_41;
objj_msgSend(_3f,"setNeedsLayout");
objj_msgSend(_3f,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("textFieldBackgroundColor"),function(_42,_43){
with(_42){
return _textFieldBackgroundColor;
}
}),new objj_method(sel_getUid("acceptsFirstResponder"),function(_44,_45){
with(_44){
return objj_msgSend(_44,"isEditable")&&objj_msgSend(_44,"isEnabled");
}
}),new objj_method(sel_getUid("becomeFirstResponder"),function(_46,_47){
with(_46){
if(_4&&objj_msgSend(_4,"window")!==objj_msgSend(_46,"window")){
objj_msgSend(objj_msgSend(_4,"window"),"makeFirstResponder:",nil);
}
objj_msgSend(_46,"setThemeState:",CPThemeStateEditing);
objj_msgSend(_46,"_updatePlaceholderState");
objj_msgSend(_46,"setNeedsLayout");
_isEditing=NO;
var _48=objj_msgSend(_46,"stringValue"),_49=objj_msgSend(_46,"_inputElement"),_4a=objj_msgSend(_46,"currentValueForThemeAttribute:","font");
objj_msgSend(_4a,"_getMetrics");
_49.value=_48;
_49.style.color=objj_msgSend(objj_msgSend(_46,"currentValueForThemeAttribute:","text-color"),"cssString");
_49.style.font=objj_msgSend(_4a,"cssString");
_49.style.zIndex=1000;
switch(objj_msgSend(_46,"alignment")){
case CPCenterTextAlignment:
_49.style.textAlign="center";
break;
case CPRightTextAlignment:
_49.style.textAlign="right";
break;
default:
_49.style.textAlign="left";
}
var _4b=objj_msgSend(_46,"contentRectForBounds:",objj_msgSend(_46,"bounds")),_4c=objj_msgSend(_46,"currentValueForThemeAttribute:","vertical-alignment");
switch(_4c){
case CPTopVerticalTextAlignment:
var _4d=((_4b.origin.y)+1)+"px";
break;
case CPCenterVerticalTextAlignment:
var _4d=((_4b.origin.y+(_4b.size.height)/2)-(_4a._lineHeight/2)+1)+"px";
break;
case CPBottomVerticalTextAlignment:
var _4d=((_4b.origin.y+_4b.size.height)-_4a._lineHeight)+"px";
break;
default:
var _4d=((_4b.origin.y)+1)+"px";
break;
}
_49.style.top=_4d;
_49.style.left=((_4b.origin.x)-1)+"px";
_49.style.width=(_4b.size.width)+"px";
_49.style.height=_4a._lineHeight+"px";
_DOMElement.appendChild(_49);
window.setTimeout(function(){
_49.focus();
if(!_willBecomeFirstResponderByClick){
objj_msgSend(_46,"selectText:",_46);
}
_willBecomeFirstResponderByClick=NO;
objj_msgSend(_46,"textDidFocus:",objj_msgSend(CPNotification,"notificationWithName:object:userInfo:",CPTextFieldDidFocusNotification,_46,nil));
_4=_46;
},0);
_49.value=objj_msgSend(_46,"stringValue");
objj_msgSend(objj_msgSend(objj_msgSend(_46,"window"),"platformWindow"),"_propagateCurrentDOMEvent:",YES);
_8=YES;
if(document.attachEvent){
_9=objj_msgSend(objj_msgSend(_46,"window"),"platformWindow")._DOMBodyElement.onselectstart;
_a=objj_msgSend(objj_msgSend(_46,"window"),"platformWindow")._DOMBodyElement.ondrag;
objj_msgSend(objj_msgSend(_46,"window"),"platformWindow")._DOMBodyElement.ondrag=function(){
};
objj_msgSend(objj_msgSend(_46,"window"),"platformWindow")._DOMBodyElement.onselectstart=function(){
};
}
return YES;
}
}),new objj_method(sel_getUid("resignFirstResponder"),function(_4e,_4f){
with(_4e){
objj_msgSend(_4e,"unsetThemeState:",CPThemeStateEditing);
objj_msgSend(_4e,"_updatePlaceholderState");
objj_msgSend(_4e,"setNeedsLayout");
var _50=objj_msgSend(_4e,"_inputElement");
if(objj_msgSend(_4e,"stringValue")!==_50.value){
objj_msgSend(_4e,"_setStringValue:",_50.value);
}
_6=YES;
if(_8){
_50.blur();
}
if(!_7){
_b();
}
_7=NO;
_6=NO;
if(_50.parentNode==_DOMElement){
_50.parentNode.removeChild(_50);
}
_8=NO;
if(document.attachEvent){
objj_msgSend(objj_msgSend(_4e,"window"),"platformWindow")._DOMBodyElement.ondrag=_a;
objj_msgSend(objj_msgSend(_4e,"window"),"platformWindow")._DOMBodyElement.onselectstart=_9;
_9=nil;
_a=nil;
}
if(_isEditing){
_isEditing=NO;
objj_msgSend(_4e,"textDidEndEditing:",objj_msgSend(CPNotification,"notificationWithName:object:userInfo:",CPControlTextDidEndEditingNotification,_4e,nil));
if(objj_msgSend(_4e,"sendsActionOnEndEditing")){
objj_msgSend(_4e,"sendAction:to:",objj_msgSend(_4e,"action"),objj_msgSend(_4e,"target"));
}
}
objj_msgSend(_4e,"textDidBlur:",objj_msgSend(CPNotification,"notificationWithName:object:userInfo:",CPTextFieldDidBlurNotification,_4e,nil));
return YES;
}
}),new objj_method(sel_getUid("needsPanelToBecomeKey"),function(_51,_52){
with(_51){
return YES;
}
}),new objj_method(sel_getUid("mouseDown:"),function(_53,_54,_55){
with(_53){
if(objj_msgSend(_53,"isEditable")&&objj_msgSend(_53,"isEnabled")){
_willBecomeFirstResponderByClick=YES;
objj_msgSend(objj_msgSend(_53,"window"),"makeFirstResponder:",_53);
}else{
if(objj_msgSend(_53,"isSelectable")){
if(document.attachEvent){
_9=objj_msgSend(objj_msgSend(_53,"window"),"platformWindow")._DOMBodyElement.onselectstart;
_a=objj_msgSend(objj_msgSend(_53,"window"),"platformWindow")._DOMBodyElement.ondrag;
objj_msgSend(objj_msgSend(_53,"window"),"platformWindow")._DOMBodyElement.ondrag=function(){
};
objj_msgSend(objj_msgSend(_53,"window"),"platformWindow")._DOMBodyElement.onselectstart=function(){
};
}
return objj_msgSend(objj_msgSend(objj_msgSend(_55,"window"),"platformWindow"),"_propagateCurrentDOMEvent:",YES);
}else{
return objj_msgSend(objj_msgSend(_53,"nextResponder"),"mouseDown:",_55);
}
}
}
}),new objj_method(sel_getUid("mouseUp:"),function(_56,_57,_58){
with(_56){
if(!objj_msgSend(_56,"isSelectable")&&(!objj_msgSend(_56,"isEditable")||!objj_msgSend(_56,"isEnabled"))){
objj_msgSend(objj_msgSend(_56,"nextResponder"),"mouseUp:",_58);
}else{
if(objj_msgSend(_56,"isSelectable")){
if(document.attachEvent){
objj_msgSend(objj_msgSend(_56,"window"),"platformWindow")._DOMBodyElement.ondrag=_a;
objj_msgSend(objj_msgSend(_56,"window"),"platformWindow")._DOMBodyElement.onselectstart=_9;
_9=nil;
_a=nil;
}
return objj_msgSend(objj_msgSend(objj_msgSend(_58,"window"),"platformWindow"),"_propagateCurrentDOMEvent:",YES);
}
}
}
}),new objj_method(sel_getUid("mouseDragged:"),function(_59,_5a,_5b){
with(_59){
if(!objj_msgSend(_59,"isSelectable")&&(!objj_msgSend(_59,"isEditable")||!objj_msgSend(_59,"isEnabled"))){
objj_msgSend(objj_msgSend(_59,"nextResponder"),"mouseDragged:",_5b);
}else{
if(objj_msgSend(_59,"isSelectable")){
return objj_msgSend(objj_msgSend(objj_msgSend(_5b,"window"),"platformWindow"),"_propagateCurrentDOMEvent:",YES);
}
}
}
}),new objj_method(sel_getUid("keyUp:"),function(_5c,_5d,_5e){
with(_5c){
var _5f=objj_msgSend(_5c,"stringValue");
objj_msgSend(_5c,"_setStringValue:",objj_msgSend(_5c,"_inputElement").value);
if(_5f!==objj_msgSend(_5c,"stringValue")){
if(!_isEditing){
_isEditing=YES;
objj_msgSend(_5c,"textDidBeginEditing:",objj_msgSend(CPNotification,"notificationWithName:object:userInfo:",CPControlTextDidBeginEditingNotification,_5c,nil));
}
objj_msgSend(_5c,"textDidChange:",objj_msgSend(CPNotification,"notificationWithName:object:userInfo:",CPControlTextDidChangeNotification,_5c,nil));
}
objj_msgSend(objj_msgSend(objj_msgSend(_5c,"window"),"platformWindow"),"_propagateCurrentDOMEvent:",YES);
}
}),new objj_method(sel_getUid("keyDown:"),function(_60,_61,_62){
with(_60){
if(objj_msgSend(_62,"_couldBeKeyEquivalent")&&objj_msgSend(_60,"performKeyEquivalent:",_62)){
return;
}
objj_msgSend(objj_msgSend(objj_msgSend(_60,"window"),"platformWindow"),"_propagateCurrentDOMEvent:",YES);
objj_msgSend(_60,"interpretKeyEvents:",[_62]);
objj_msgSend(objj_msgSend(CPRunLoop,"currentRunLoop"),"limitDateForMode:",CPDefaultRunLoopMode);
}
}),new objj_method(sel_getUid("doCommandBySelector:"),function(_63,_64,_65){
with(_63){
if(objj_msgSend(_63,"respondsToSelector:",_65)){
objj_msgSend(_63,"performSelector:",_65);
}
}
}),new objj_method(sel_getUid("insertNewline:"),function(_66,_67,_68){
with(_66){
if(_isEditing){
_isEditing=NO;
objj_msgSend(_66,"textDidEndEditing:",objj_msgSend(CPNotification,"notificationWithName:object:userInfo:",CPControlTextDidEndEditingNotification,_66,nil));
}
objj_msgSend(_66,"sendAction:to:",objj_msgSend(_66,"action"),objj_msgSend(_66,"target"));
objj_msgSend(_66,"selectText:",nil);
objj_msgSend(objj_msgSend(objj_msgSend(_66,"window"),"platformWindow"),"_propagateCurrentDOMEvent:",NO);
}
}),new objj_method(sel_getUid("insertNewlineIgnoringFieldEditor:"),function(_69,_6a,_6b){
with(_69){
var _6c=objj_msgSend(_69,"stringValue");
objj_msgSend(_69,"_inputElement").value+=CPNewlineCharacter;
objj_msgSend(_69,"_setStringValue:",objj_msgSend(_69,"_inputElement").value);
if(_6c!==objj_msgSend(_69,"stringValue")){
if(!_isEditing){
_isEditing=YES;
objj_msgSend(_69,"textDidBeginEditing:",objj_msgSend(CPNotification,"notificationWithName:object:userInfo:",CPControlTextDidBeginEditingNotification,_69,nil));
}
objj_msgSend(_69,"textDidChange:",objj_msgSend(CPNotification,"notificationWithName:object:userInfo:",CPControlTextDidChangeNotification,_69,nil));
}
}
}),new objj_method(sel_getUid("insertTabIgnoringFieldEditor:"),function(_6d,_6e,_6f){
with(_6d){
var _70=objj_msgSend(_6d,"stringValue");
objj_msgSend(_6d,"_inputElement").value+=CPTabCharacter;
objj_msgSend(_6d,"_setStringValue:",objj_msgSend(_6d,"_inputElement").value);
if(_70!==objj_msgSend(_6d,"stringValue")){
if(!_isEditing){
_isEditing=YES;
objj_msgSend(_6d,"textDidBeginEditing:",objj_msgSend(CPNotification,"notificationWithName:object:userInfo:",CPControlTextDidBeginEditingNotification,_6d,nil));
}
objj_msgSend(_6d,"textDidChange:",objj_msgSend(CPNotification,"notificationWithName:object:userInfo:",CPControlTextDidChangeNotification,_6d,nil));
}
}
}),new objj_method(sel_getUid("textDidBlur:"),function(_71,_72,_73){
with(_71){
if(objj_msgSend(_73,"object")!=_71){
return;
}
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotification:",_73);
}
}),new objj_method(sel_getUid("textDidFocus:"),function(_74,_75,_76){
with(_74){
if(objj_msgSend(_76,"object")!=_74){
return;
}
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotification:",_76);
}
}),new objj_method(sel_getUid("textDidChange:"),function(_77,_78,_79){
with(_77){
if(objj_msgSend(_79,"object")!==_77){
return;
}
objj_msgSend(_77,"_continuouslyReverseSetBinding");
objj_msgSendSuper({receiver:_77,super_class:objj_getClass("CPTextField").super_class},"textDidChange:",_79);
}
}),new objj_method(sel_getUid("sendAction:to:"),function(_7a,_7b,_7c,_7d){
with(_7a){
objj_msgSend(_7a,"_reverseSetBinding");
objj_msgSend(CPApp,"sendAction:to:from:",_7c,_7d,_7a);
}
}),new objj_method(sel_getUid("objectValue"),function(_7e,_7f){
with(_7e){
return objj_msgSendSuper({receiver:_7e,super_class:objj_getClass("CPTextField").super_class},"objectValue");
}
}),new objj_method(sel_getUid("_setStringValue:"),function(_80,_81,_82){
with(_80){
objj_msgSend(_80,"willChangeValueForKey:","objectValue");
objj_msgSendSuper({receiver:_80,super_class:objj_getClass("CPTextField").super_class},"setObjectValue:",String(_82));
objj_msgSend(_80,"_updatePlaceholderState");
objj_msgSend(_80,"didChangeValueForKey:","objectValue");
}
}),new objj_method(sel_getUid("setObjectValue:"),function(_83,_84,_85){
with(_83){
objj_msgSendSuper({receiver:_83,super_class:objj_getClass("CPTextField").super_class},"setObjectValue:",_85);
if(_4===_83||objj_msgSend(objj_msgSend(_83,"window"),"firstResponder")===_83){
objj_msgSend(_83,"_inputElement").value=_85;
}
objj_msgSend(_83,"_updatePlaceholderState");
}
}),new objj_method(sel_getUid("_updatePlaceholderState"),function(_86,_87){
with(_86){
var _88=objj_msgSend(_86,"stringValue");
if((!_88||_88.length===0)&&!objj_msgSend(_86,"hasThemeState:",CPThemeStateEditing)){
objj_msgSend(_86,"setThemeState:",CPTextFieldStatePlaceholder);
}else{
objj_msgSend(_86,"unsetThemeState:",CPTextFieldStatePlaceholder);
}
}
}),new objj_method(sel_getUid("setPlaceholderString:"),function(_89,_8a,_8b){
with(_89){
if(_placeholderString===_8b){
return;
}
_placeholderString=_8b;
if(objj_msgSend(_89,"hasThemeState:",CPTextFieldStatePlaceholder)){
objj_msgSend(_89,"setNeedsLayout");
objj_msgSend(_89,"setNeedsDisplay:",YES);
}
}
}),new objj_method(sel_getUid("placeholderString"),function(_8c,_8d){
with(_8c){
return _placeholderString;
}
}),new objj_method(sel_getUid("sizeToFit"),function(_8e,_8f){
with(_8e){
objj_msgSend(_8e,"setFrameSize:",objj_msgSend(_8e,"_minimumFrameSize"));
}
}),new objj_method(sel_getUid("_minimumFrameSize"),function(_90,_91){
with(_90){
var _92=objj_msgSend(_90,"frameSize"),_93=objj_msgSend(_90,"currentValueForThemeAttribute:","content-inset"),_94=objj_msgSend(_90,"currentValueForThemeAttribute:","min-size"),_95=objj_msgSend(_90,"currentValueForThemeAttribute:","max-size"),_96=objj_msgSend(_90,"lineBreakMode"),_97=(objj_msgSend(_90,"stringValue")||" "),_98={width:_92.width,height:_92.height},_99=objj_msgSend(_90,"currentValueForThemeAttribute:","font");
_98.width-=_93.left+_93.right;
_98.height-=_93.top+_93.bottom;
if(_92.width!==0&&!objj_msgSend(_90,"isBezeled")&&(_96===CPLineBreakByWordWrapping||_96===CPLineBreakByCharWrapping)){
_98=objj_msgSend(_97,"sizeWithFont:inWidth:",_99,_98.width);
}else{
_98=objj_msgSend(_97,"sizeWithFont:",_99);
}
_92.height=_98.height+_93.top+_93.bottom;
if(objj_msgSend(_90,"isBezeled")){
_92.height=MAX(_92.height,_94.height);
if(_95.width>0){
_92.width=MIN(_92.width,_95.width);
}
if(_95.height>0){
_92.height=MIN(_92.height,_95.height);
}
}else{
_92.width=_98.width+_93.left+_93.right;
}
_92.width=MAX(_92.width,_94.width);
return _92;
}
}),new objj_method(sel_getUid("selectText:"),function(_9a,_9b,_9c){
with(_9a){
if((objj_msgSend(_9a,"isEditable")||objj_msgSend(_9a,"isSelectable"))){
var _9d=objj_msgSend(_9a,"_inputElement");
if(objj_msgSend(objj_msgSend(_9a,"window"),"firstResponder")===_9a){
window.setTimeout(function(){
_9d.select();
},0);
}else{
if(objj_msgSend(_9a,"window")!==nil&&objj_msgSend(objj_msgSend(_9a,"window"),"makeFirstResponder:",_9a)){
window.setTimeout(function(){
objj_msgSend(_9a,"selectText:",_9c);
},0);
}
}
}
}
}),new objj_method(sel_getUid("copy:"),function(_9e,_9f,_a0){
with(_9e){
if(!objj_msgSend(CPPlatform,"isBrowser")){
var _a1=objj_msgSend(_9e,"selectedRange");
if(_a1.length<1){
return;
}
var _a2=objj_msgSend(CPPasteboard,"generalPasteboard"),_a3=objj_msgSend(_9e,"stringValue"),_a4=objj_msgSend(_a3,"substringWithRange:",_a1);
objj_msgSend(_a2,"declareTypes:owner:",[CPStringPboardType],nil);
objj_msgSend(_a2,"setString:forType:",_a4,CPStringPboardType);
}
}
}),new objj_method(sel_getUid("cut:"),function(_a5,_a6,_a7){
with(_a5){
if(!objj_msgSend(CPPlatform,"isBrowser")){
objj_msgSend(_a5,"copy:",_a7);
objj_msgSend(_a5,"deleteBackward:",_a7);
}else{
objj_msgSend(CPTimer,"scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:",0,_a5,sel_getUid("keyUp:"),nil,NO);
}
}
}),new objj_method(sel_getUid("paste:"),function(_a8,_a9,_aa){
with(_a8){
if(!objj_msgSend(CPPlatform,"isBrowser")){
var _ab=objj_msgSend(CPPasteboard,"generalPasteboard");
if(!objj_msgSend(objj_msgSend(_ab,"types"),"containsObject:",CPStringPboardType)){
return;
}
objj_msgSend(_a8,"deleteBackward:",_aa);
var _ac=objj_msgSend(_a8,"selectedRange"),_ad=objj_msgSend(_a8,"stringValue"),_ae=objj_msgSend(_ab,"stringForType:",CPStringPboardType),_af=objj_msgSend(_ad,"stringByReplacingCharactersInRange:withString:",_ac,_ae);
objj_msgSend(_a8,"setStringValue:",_af);
objj_msgSend(_a8,"setSelectedRange:",CPMakeRange(_ac.location+_ae.length,0));
}else{
objj_msgSend(CPTimer,"scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:",0,_a8,sel_getUid("keyUp:"),nil,NO);
}
}
}),new objj_method(sel_getUid("selectedRange"),function(_b0,_b1){
with(_b0){
if(objj_msgSend(objj_msgSend(_b0,"window"),"firstResponder")!==_b0){
return CPMakeRange(0,0);
}
try{
var _b2=objj_msgSend(_b0,"_inputElement"),_b3=_b2.selectionStart,_b4=_b2.selectionEnd;
if(objj_msgSend(_b3,"isKindOfClass:",CPNumber)){
return CPMakeRange(_b3,_b4-_b3);
}
var _b5=_b2.ownerDocument||_b2.document,_b6=_b5.selection.createRange(),_b7=_b2.createTextRange();
if(_b7.inRange(_b6)){
_b7.setEndPoint("EndToStart",_b6);
return CPMakeRange(_b7.text.length,_b6.text.length);
}
}
catch(e){
}
return CPMakeRange(0,0);
}
}),new objj_method(sel_getUid("setSelectedRange:"),function(_b8,_b9,_ba){
with(_b8){
if(!objj_msgSend(objj_msgSend(_b8,"window"),"firstResponder")===_b8){
return;
}
var _bb=objj_msgSend(_b8,"_inputElement");
try{
if(objj_msgSend(_bb.selectionStart,"isKindOfClass:",CPNumber)){
_bb.selectionStart=_ba.location;
_bb.selectionEnd=CPMaxRange(_ba);
}else{
var _bc=_bb.ownerDocument||_bb.document,_bd=_bc.selection.createRange(),_be=_bb.createTextRange();
if(_be.inRange(_bd)){
_be.collapse(true);
_be.move("character",_ba.location);
_be.moveEnd("character",_ba.length);
_be.select();
}
}
}
catch(e){
}
}
}),new objj_method(sel_getUid("selectAll:"),function(_bf,_c0,_c1){
with(_bf){
objj_msgSend(_bf,"selectText:",_c1);
}
}),new objj_method(sel_getUid("deleteBackward:"),function(_c2,_c3,_c4){
with(_c2){
var _c5=objj_msgSend(_c2,"selectedRange");
if(_c5.length<2){
return;
}
_c5.location+=1;
_c5.length-=1;
var _c6=objj_msgSend(_c2,"stringValue"),_c7=objj_msgSend(_c6,"stringByReplacingCharactersInRange:withString:",_c5,"");
objj_msgSend(_c2,"setStringValue:",_c7);
objj_msgSend(_c2,"setSelectedRange:",CPMakeRange(_c5.location,0));
}
}),new objj_method(sel_getUid("setDelegate:"),function(_c8,_c9,_ca){
with(_c8){
var _cb=objj_msgSend(CPNotificationCenter,"defaultCenter");
if(_delegate){
objj_msgSend(_cb,"removeObserver:name:object:",_delegate,CPControlTextDidBeginEditingNotification,_c8);
objj_msgSend(_cb,"removeObserver:name:object:",_delegate,CPControlTextDidChangeNotification,_c8);
objj_msgSend(_cb,"removeObserver:name:object:",_delegate,CPControlTextDidEndEditingNotification,_c8);
objj_msgSend(_cb,"removeObserver:name:object:",_delegate,CPTextFieldDidFocusNotification,_c8);
objj_msgSend(_cb,"removeObserver:name:object:",_delegate,CPTextFieldDidBlurNotification,_c8);
}
_delegate=_ca;
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("controlTextDidBeginEditing:"))){
objj_msgSend(_cb,"addObserver:selector:name:object:",_delegate,sel_getUid("controlTextDidBeginEditing:"),CPControlTextDidBeginEditingNotification,_c8);
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("controlTextDidChange:"))){
objj_msgSend(_cb,"addObserver:selector:name:object:",_delegate,sel_getUid("controlTextDidChange:"),CPControlTextDidChangeNotification,_c8);
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("controlTextDidEndEditing:"))){
objj_msgSend(_cb,"addObserver:selector:name:object:",_delegate,sel_getUid("controlTextDidEndEditing:"),CPControlTextDidEndEditingNotification,_c8);
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("controlTextDidFocus:"))){
objj_msgSend(_cb,"addObserver:selector:name:object:",_delegate,sel_getUid("controlTextDidFocus:"),CPTextFieldDidFocusNotification,_c8);
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("controlTextDidBlur:"))){
objj_msgSend(_cb,"addObserver:selector:name:object:",_delegate,sel_getUid("controlTextDidBlur:"),CPTextFieldDidBlurNotification,_c8);
}
}
}),new objj_method(sel_getUid("delegate"),function(_cc,_cd){
with(_cc){
return _delegate;
}
}),new objj_method(sel_getUid("contentRectForBounds:"),function(_ce,_cf,_d0){
with(_ce){
var _d1=objj_msgSend(_ce,"currentValueForThemeAttribute:","content-inset");
if(!_d1){
return _d0;
}
_d0.origin.x+=_d1.left;
_d0.origin.y+=_d1.top;
_d0.size.width-=_d1.left+_d1.right;
_d0.size.height-=_d1.top+_d1.bottom;
return _d0;
}
}),new objj_method(sel_getUid("bezelRectForBounds:"),function(_d2,_d3,_d4){
with(_d2){
var _d5=objj_msgSend(_d2,"currentValueForThemeAttribute:","bezel-inset");
if(((_d5).top===0&&(_d5).right===0&&(_d5).bottom===0&&(_d5).left===0)){
return _d4;
}
_d4.origin.x+=_d5.left;
_d4.origin.y+=_d5.top;
_d4.size.width-=_d5.left+_d5.right;
_d4.size.height-=_d5.top+_d5.bottom;
return _d4;
}
}),new objj_method(sel_getUid("rectForEphemeralSubviewNamed:"),function(_d6,_d7,_d8){
with(_d6){
if(_d8==="bezel-view"){
return objj_msgSend(_d6,"bezelRectForBounds:",objj_msgSend(_d6,"bounds"));
}else{
if(_d8==="content-view"){
return objj_msgSend(_d6,"contentRectForBounds:",objj_msgSend(_d6,"bounds"));
}
}
return objj_msgSendSuper({receiver:_d6,super_class:objj_getClass("CPTextField").super_class},"rectForEphemeralSubviewNamed:",_d8);
}
}),new objj_method(sel_getUid("createEphemeralSubviewNamed:"),function(_d9,_da,_db){
with(_d9){
if(_db==="bezel-view"){
var _dc=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",{origin:{x:0,y:0},size:{width:0,height:0}});
objj_msgSend(_dc,"setHitTests:",NO);
return _dc;
}else{
var _dc=objj_msgSend(objj_msgSend(_CPImageAndTextView,"alloc"),"initWithFrame:",{origin:{x:0,y:0},size:{width:0,height:0}});
objj_msgSend(_dc,"setHitTests:",NO);
return _dc;
}
return objj_msgSendSuper({receiver:_d9,super_class:objj_getClass("CPTextField").super_class},"createEphemeralSubviewNamed:",_db);
}
}),new objj_method(sel_getUid("layoutSubviews"),function(_dd,_de){
with(_dd){
var _df=objj_msgSend(_dd,"layoutEphemeralSubviewNamed:positioned:relativeToEphemeralSubviewNamed:","bezel-view",CPWindowBelow,"content-view");
if(_df){
objj_msgSend(_df,"setBackgroundColor:",objj_msgSend(_dd,"currentValueForThemeAttribute:","bezel-color"));
}
var _e0=objj_msgSend(_dd,"layoutEphemeralSubviewNamed:positioned:relativeToEphemeralSubviewNamed:","content-view",CPWindowAbove,"bezel-view");
if(_e0){
objj_msgSend(_e0,"setHidden:",objj_msgSend(_dd,"hasThemeState:",CPThemeStateEditing));
var _e1="";
if(objj_msgSend(_dd,"hasThemeState:",CPTextFieldStatePlaceholder)){
_e1=objj_msgSend(_dd,"placeholderString");
}else{
_e1=objj_msgSend(_dd,"stringValue");
if(objj_msgSend(_dd,"isSecure")){
_e1=_e2(_e1);
}
}
objj_msgSend(_e0,"setText:",_e1);
objj_msgSend(_e0,"setTextColor:",objj_msgSend(_dd,"currentValueForThemeAttribute:","text-color"));
objj_msgSend(_e0,"setFont:",objj_msgSend(_dd,"currentValueForThemeAttribute:","font"));
objj_msgSend(_e0,"setAlignment:",objj_msgSend(_dd,"currentValueForThemeAttribute:","alignment"));
objj_msgSend(_e0,"setVerticalAlignment:",objj_msgSend(_dd,"currentValueForThemeAttribute:","vertical-alignment"));
objj_msgSend(_e0,"setLineBreakMode:",objj_msgSend(_dd,"currentValueForThemeAttribute:","line-break-mode"));
objj_msgSend(_e0,"setTextShadowColor:",objj_msgSend(_dd,"currentValueForThemeAttribute:","text-shadow-color"));
objj_msgSend(_e0,"setTextShadowOffset:",objj_msgSend(_dd,"currentValueForThemeAttribute:","text-shadow-offset"));
}
}
}),new objj_method(sel_getUid("takeValueFromKeyPath:ofObjects:"),function(_e3,_e4,_e5,_e6){
with(_e3){
var _e7=_e6.length,_e8=objj_msgSend(_e6[0],"valueForKeyPath:",_e5);
objj_msgSend(_e3,"setStringValue:",_e8);
objj_msgSend(_e3,"setPlaceholderString:","");
while(_e7-->1){
if(_e8!==objj_msgSend(_e6[_e7],"valueForKeyPath:",_e5)){
objj_msgSend(_e3,"setPlaceholderString:","Multiple Values");
objj_msgSend(_e3,"setStringValue:","");
}
}
}
})]);
class_addMethods(_e,[new objj_method(sel_getUid("textFieldWithStringValue:placeholder:width:"),function(_e9,_ea,_eb,_ec,_ed){
with(_e9){
return objj_msgSend(_e9,"textFieldWithStringValue:placeholder:width:theme:",_eb,_ec,_ed,objj_msgSend(CPTheme,"defaultTheme"));
}
}),new objj_method(sel_getUid("textFieldWithStringValue:placeholder:width:theme:"),function(_ee,_ef,_f0,_f1,_f2,_f3){
with(_ee){
var _f4=objj_msgSend(objj_msgSend(_ee,"alloc"),"initWithFrame:",CGRectMake(0,0,_f2,29));
objj_msgSend(_f4,"setTheme:",_f3);
objj_msgSend(_f4,"setStringValue:",_f0);
objj_msgSend(_f4,"setPlaceholderString:",_f1);
objj_msgSend(_f4,"setBordered:",YES);
objj_msgSend(_f4,"setBezeled:",YES);
objj_msgSend(_f4,"setEditable:",YES);
objj_msgSend(_f4,"sizeToFit");
return _f4;
}
}),new objj_method(sel_getUid("roundedTextFieldWithStringValue:placeholder:width:"),function(_f5,_f6,_f7,_f8,_f9){
with(_f5){
return objj_msgSend(_f5,"roundedTextFieldWithStringValue:placeholder:width:theme:",_f7,_f8,_f9,objj_msgSend(CPTheme,"defaultTheme"));
}
}),new objj_method(sel_getUid("roundedTextFieldWithStringValue:placeholder:width:theme:"),function(_fa,_fb,_fc,_fd,_fe,_ff){
with(_fa){
var _100=objj_msgSend(objj_msgSend(CPTextField,"alloc"),"initWithFrame:",CGRectMake(0,0,_fe,29));
objj_msgSend(_100,"setTheme:",_ff);
objj_msgSend(_100,"setStringValue:",_fc);
objj_msgSend(_100,"setPlaceholderString:",_fd);
objj_msgSend(_100,"setBezelStyle:",CPTextFieldRoundedBezel);
objj_msgSend(_100,"setBordered:",YES);
objj_msgSend(_100,"setBezeled:",YES);
objj_msgSend(_100,"setEditable:",YES);
objj_msgSend(_100,"sizeToFit");
return _100;
}
}),new objj_method(sel_getUid("labelWithTitle:"),function(self,_101,_102){
with(self){
return objj_msgSend(self,"labelWithTitle:theme:",_102,objj_msgSend(CPTheme,"defaultTheme"));
}
}),new objj_method(sel_getUid("labelWithTitle:theme:"),function(self,_103,_104,_105){
with(self){
var _106=objj_msgSend(objj_msgSend(self,"alloc"),"init");
objj_msgSend(_106,"setStringValue:",_104);
objj_msgSend(_106,"sizeToFit");
return _106;
}
}),new objj_method(sel_getUid("defaultThemeClass"),function(self,_107){
with(self){
return "textfield";
}
}),new objj_method(sel_getUid("_binderClassForBinding:"),function(self,_108,_109){
with(self){
if(_109===CPValueBinding){
return objj_msgSend(_CPTextFieldValueBinder,"class");
}
return objj_msgSendSuper({receiver:self,super_class:objj_getMetaClass("CPTextField").super_class},"_binderClassForBinding:",_109);
}
}),new objj_method(sel_getUid("themeAttributes"),function(self,_10a){
with(self){
return objj_msgSend(CPDictionary,"dictionaryWithObjects:forKeys:",[{top:(0),right:(0),bottom:(0),left:(0)},{top:(2),right:(2),bottom:(2),left:(2)},objj_msgSend(CPNull,"null")],["bezel-inset","content-inset","bezel-color"]);
}
})]);
var _e2=function(_10b){
if(!_10b){
return "";
}
return Array(_10b.length+1).join(_c);
};
var _10c="CPTextFieldIsEditableKey",_10d="CPTextFieldIsSelectableKey",_10e="CPTextFieldIsBorderedKey",_10f="CPTextFieldIsBezeledKey",_110="CPTextFieldBezelStyleKey",_111="CPTextFieldDrawsBackgroundKey",_112="CPTextFieldLineBreakModeKey",_113="CPTextFieldAlignmentKey",_114="CPTextFieldBackgroundColorKey",_115="CPTextFieldPlaceholderStringKey";
var _d=objj_getClass("CPTextField");
if(!_d){
throw new SyntaxError("*** Could not find definition for class \"CPTextField\"");
}
var _e=_d.isa;
class_addMethods(_d,[new objj_method(sel_getUid("initWithCoder:"),function(self,_116,_117){
with(self){
self=objj_msgSendSuper({receiver:self,super_class:objj_getClass("CPTextField").super_class},"initWithCoder:",_117);
if(self){
objj_msgSend(self,"setEditable:",objj_msgSend(_117,"decodeBoolForKey:",_10c));
objj_msgSend(self,"setSelectable:",objj_msgSend(_117,"decodeBoolForKey:",_10d));
objj_msgSend(self,"setDrawsBackground:",objj_msgSend(_117,"decodeBoolForKey:",_111));
objj_msgSend(self,"setTextFieldBackgroundColor:",objj_msgSend(_117,"decodeObjectForKey:",_114));
objj_msgSend(self,"setLineBreakMode:",objj_msgSend(_117,"decodeIntForKey:",_112));
objj_msgSend(self,"setAlignment:",objj_msgSend(_117,"decodeIntForKey:",_113));
objj_msgSend(self,"setPlaceholderString:",objj_msgSend(_117,"decodeObjectForKey:",_115));
}
return self;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(self,_118,_119){
with(self){
objj_msgSendSuper({receiver:self,super_class:objj_getClass("CPTextField").super_class},"encodeWithCoder:",_119);
objj_msgSend(_119,"encodeBool:forKey:",_isEditable,_10c);
objj_msgSend(_119,"encodeBool:forKey:",_isSelectable,_10d);
objj_msgSend(_119,"encodeBool:forKey:",_drawsBackground,_111);
objj_msgSend(_119,"encodeObject:forKey:",_textFieldBackgroundColor,_114);
objj_msgSend(_119,"encodeInt:forKey:",objj_msgSend(self,"lineBreakMode"),_112);
objj_msgSend(_119,"encodeInt:forKey:",objj_msgSend(self,"alignment"),_113);
objj_msgSend(_119,"encodeObject:forKey:",_placeholderString,_115);
}
})]);
var _d=objj_allocateClassPair(CPBinder,"_CPTextFieldValueBinder"),_e=_d.isa;
objj_registerClassPair(_d);
class_addMethods(_d,[new objj_method(sel_getUid("setValueFor:"),function(self,_11a,_11b){
with(self){
var _11c=objj_msgSend(_info,"objectForKey:",CPObservedObjectKey),_11d=objj_msgSend(_info,"objectForKey:",CPObservedKeyPathKey),_11e=objj_msgSend(_info,"objectForKey:",CPOptionsKey),_11f=objj_msgSend(_11c,"valueForKeyPath:",_11d),_120=CPIsControllerMarker(_11f);
if(_120){
switch(_11f){
case CPMultipleValuesMarker:
_11f=objj_msgSend(_11e,"objectForKey:",CPMultipleValuesPlaceholderBindingOption)||"Multiple Values";
break;
case CPNoSelectionMarker:
_11f=objj_msgSend(_11e,"objectForKey:",CPNoSelectionPlaceholderBindingOption)||"No Selection";
break;
case CPNotApplicableMarker:
if(objj_msgSend(_11e,"objectForKey:",CPRaisesForNotApplicableKeysBindingOption)){
objj_msgSend(CPException,"raise:reason:",CPGenericException,"can't transform non applicable key on: "+_source+" value: "+_11f);
}
_11f=objj_msgSend(_11e,"objectForKey:",CPNotApplicablePlaceholderBindingOption)||"Not Applicable";
break;
case CPNullMarker:
_11f=objj_msgSend(_11e,"objectForKey:",CPNullPlaceholderBindingOption)||"";
break;
}
objj_msgSend(_source,"setPlaceholderString:",_11f);
objj_msgSend(_source,"setObjectValue:",nil);
}else{
_11f=objj_msgSend(self,"transformValue:withOptions:",_11f,_11e);
objj_msgSend(_source,"setObjectValue:",_11f);
}
}
})]);
p;9;CPTheme.jt;13257;@STATIC;1.0;I;21;Foundation/CPObject.jI;21;Foundation/CPString.jI;30;Foundation/CPKeyedUnarchiver.jt;13150;
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("Foundation/CPString.j",NO);
objj_executeFile("Foundation/CPKeyedUnarchiver.j",NO);
var _1={},_2=nil,_3=nil;
var _4=objj_allocateClassPair(CPObject,"CPTheme"),_5=_4.isa;
class_addIvars(_4,[new objj_ivar("_name"),new objj_ivar("_attributes")]);
objj_registerClassPair(_4);
class_addMethods(_4,[new objj_method(sel_getUid("initWithName:"),function(_6,_7,_8){
with(_6){
_6=objj_msgSendSuper({receiver:_6,super_class:objj_getClass("CPTheme").super_class},"init");
if(_6){
_name=_8;
_attributes=objj_msgSend(CPDictionary,"dictionary");
_1[_name]=_6;
}
return _6;
}
}),new objj_method(sel_getUid("name"),function(_9,_a){
with(_9){
return _name;
}
}),new objj_method(sel_getUid("classNames"),function(_b,_c){
with(_b){
return objj_msgSend(_attributes,"allKeys");
}
}),new objj_method(sel_getUid("attributesForClass:"),function(_d,_e,_f){
with(_d){
if(!_f){
return nil;
}
var _10=nil;
if(objj_msgSend(_f,"isKindOfClass:",objj_msgSend(CPString,"class"))){
var _11=CPClassFromString(_f);
if(_11){
_f=_11;
}else{
_10=_f;
}
}
if(!_10){
if(objj_msgSend(_f,"isKindOfClass:",objj_msgSend(CPView,"class"))){
if(objj_msgSend(_f,"respondsToSelector:",sel_getUid("defaultThemeClass"))){
_10=objj_msgSend(_f,"defaultThemeClass");
}else{
if(objj_msgSend(_f,"respondsToSelector:",sel_getUid("themeClass"))){
CPLog.warn("%@ themeClass is deprecated in favor of defaultThemeClass",CPStringFromClass(objj_msgSend(anObject,"class")));
_10=objj_msgSend(_f,"themeClass");
}else{
return nil;
}
}
}else{
objj_msgSend(CPException,"raise:reason:",CPInvalidArgumentException,"aClass must be a class object or a string.");
}
}
return objj_msgSend(_attributes,"objectForKey:",_10);
}
}),new objj_method(sel_getUid("attributeNamesForClass:"),function(_12,_13,_14){
with(_12){
var _15=objj_msgSend(_12,"attributesForClass:",_14);
if(_15){
return objj_msgSend(_15,"allKeys");
}else{
return objj_msgSend(CPArray,"array");
}
}
}),new objj_method(sel_getUid("attributeWithName:forClass:"),function(_16,_17,_18,_19){
with(_16){
var _1a=objj_msgSend(_16,"attributesForClass:",_19);
if(!_1a){
return nil;
}
return objj_msgSend(_1a,"objectForKey:",_18);
}
}),new objj_method(sel_getUid("valueForAttributeWithName:forClass:"),function(_1b,_1c,_1d,_1e){
with(_1b){
return objj_msgSend(_1b,"valueForAttributeWithName:inState:forClass:",_1d,CPThemeStateNormal,_1e);
}
}),new objj_method(sel_getUid("valueForAttributeWithName:inState:forClass:"),function(_1f,_20,_21,_22,_23){
with(_1f){
var _24=objj_msgSend(_1f,"attributeWithName:forClass:",_21,_23);
if(!_24){
return nil;
}
return objj_msgSend(_24,"valueForState:",_22);
}
}),new objj_method(sel_getUid("takeThemeFromObject:"),function(_25,_26,_27){
with(_25){
var _28=objj_msgSend(_27,"_themeAttributeDictionary"),_29=nil,_2a=objj_msgSend(_28,"keyEnumerator"),_2b=objj_msgSend(_27,"themeClass");
while(_29=objj_msgSend(_2a,"nextObject")){
objj_msgSend(_25,"_recordAttribute:forClass:",objj_msgSend(_28,"objectForKey:",_29),_2b);
}
}
}),new objj_method(sel_getUid("_recordAttribute:forClass:"),function(_2c,_2d,_2e,_2f){
with(_2c){
if(!objj_msgSend(_2e,"hasValues")){
return;
}
var _30=objj_msgSend(_attributes,"objectForKey:",_2f);
if(!_30){
_30=objj_msgSend(CPDictionary,"dictionary");
objj_msgSend(_attributes,"setObject:forKey:",_30,_2f);
}
var _31=objj_msgSend(_2e,"name"),_32=objj_msgSend(_30,"objectForKey:",_31);
if(_32){
objj_msgSend(_30,"setObject:forKey:",objj_msgSend(_32,"attributeMergedWithAttribute:",_2e),_31);
}else{
objj_msgSend(_30,"setObject:forKey:",_2e,_31);
}
}
})]);
class_addMethods(_5,[new objj_method(sel_getUid("setDefaultTheme:"),function(_33,_34,_35){
with(_33){
_2=_35;
}
}),new objj_method(sel_getUid("defaultTheme"),function(_36,_37){
with(_36){
return _2;
}
}),new objj_method(sel_getUid("setDefaultHudTheme:"),function(_38,_39,_3a){
with(_38){
_3=_3a;
}
}),new objj_method(sel_getUid("defaultHudTheme"),function(_3b,_3c){
with(_3b){
if(!_3){
_3=objj_msgSend(CPTheme,"themeNamed:",objj_msgSend(objj_msgSend(_3b,"defaultTheme"),"name")+"-HUD");
}
return _3;
}
}),new objj_method(sel_getUid("themeNamed:"),function(_3d,_3e,_3f){
with(_3d){
return _1[_3f];
}
})]);
var _40="CPThemeNameKey",_41="CPThemeAttributesKey";
var _4=objj_getClass("CPTheme");
if(!_4){
throw new SyntaxError("*** Could not find definition for class \"CPTheme\"");
}
var _5=_4.isa;
class_addMethods(_4,[new objj_method(sel_getUid("initWithCoder:"),function(_42,_43,_44){
with(_42){
_42=objj_msgSendSuper({receiver:_42,super_class:objj_getClass("CPTheme").super_class},"init");
if(_42){
_name=objj_msgSend(_44,"decodeObjectForKey:",_40);
_attributes=objj_msgSend(_44,"decodeObjectForKey:",_41);
_1[_name]=_42;
}
return _42;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_45,_46,_47){
with(_45){
objj_msgSend(_47,"encodeObject:forKey:",_name,_40);
objj_msgSend(_47,"encodeObject:forKey:",_attributes,_41);
}
})]);
var _4=objj_allocateClassPair(CPKeyedUnarchiver,"_CPThemeKeyedUnarchiver"),_5=_4.isa;
class_addIvars(_4,[new objj_ivar("_bundle")]);
objj_registerClassPair(_4);
class_addMethods(_4,[new objj_method(sel_getUid("initForReadingWithData:bundle:"),function(_48,_49,_4a,_4b){
with(_48){
_48=objj_msgSendSuper({receiver:_48,super_class:objj_getClass("_CPThemeKeyedUnarchiver").super_class},"initForReadingWithData:",_4a);
if(_48){
_bundle=_4b;
}
return _48;
}
}),new objj_method(sel_getUid("bundle"),function(_4c,_4d){
with(_4c){
return _bundle;
}
}),new objj_method(sel_getUid("awakenCustomResources"),function(_4e,_4f){
with(_4e){
return YES;
}
})]);
var _50={},_51={},_52=0;
CPThemeState=function(_53){
var _54=_50[_53];
if(_54===undefined){
if(_53.indexOf("+")===-1){
_54=1<<_52++;
}else{
var _54=0,_55=_53.split("+"),_56=_55.length;
while(_56--){
var _57=_55[_56],_58=_50[_57];
if(_58===undefined){
_58=1<<_52++;
_50[_57]=_58;
_51[_58]=_57;
}
_54|=_58;
}
}
_50[_53]=_54;
_51[_54]=_53;
}
return _54;
};
CPThemeStateName=function(_59){
var _5a=_51[_59];
if(_5a!==undefined){
return _5a;
}
if(!(_59&(_59-1))){
return "";
}
var _5b=1,_5a="";
for(;_5b<_59;_5b<<=1){
if(_59&_5b){
_5a+=(_5a.length===0?"":"+")+_51[_5b];
}
}
_51[_59]=_5a;
return _5a;
};
_51[0]="normal";
CPThemeStateNormal=_50["normal"]=0;
CPThemeStateDisabled=CPThemeState("disabled");
CPThemeStateHovered=CPThemeState("hovered");
CPThemeStateHighlighted=CPThemeState("highlighted");
CPThemeStateSelected=CPThemeState("selected");
CPThemeStateTableDataView=CPThemeState("tableDataView");
CPThemeStateSelectedDataView=CPThemeStateSelectedTableDataView=CPThemeState("selectedTableDataView");
CPThemeStateGroupRow=CPThemeState("CPThemeStateGroupRow");
CPThemeStateBezeled=CPThemeState("bezeled");
CPThemeStateBordered=CPThemeState("bordered");
CPThemeStateEditable=CPThemeState("editable");
CPThemeStateEditing=CPThemeState("editing");
CPThemeStateVertical=CPThemeState("vertical");
CPThemeStateDefault=CPThemeState("default");
CPThemeStateCircular=CPThemeState("circular");
var _4=objj_allocateClassPair(CPObject,"_CPThemeAttribute"),_5=_4.isa;
class_addIvars(_4,[new objj_ivar("_name"),new objj_ivar("_defaultValue"),new objj_ivar("_values"),new objj_ivar("_cache"),new objj_ivar("_parentAttribute")]);
objj_registerClassPair(_4);
class_addMethods(_4,[new objj_method(sel_getUid("values"),function(_5c,_5d){
with(_5c){
return _values;
}
}),new objj_method(sel_getUid("initWithName:defaultValue:"),function(_5e,_5f,_60,_61){
with(_5e){
_5e=objj_msgSendSuper({receiver:_5e,super_class:objj_getClass("_CPThemeAttribute").super_class},"init");
if(_5e){
_cache={};
_name=_60;
_defaultValue=_61;
_values=objj_msgSend(CPDictionary,"dictionary");
}
return _5e;
}
}),new objj_method(sel_getUid("name"),function(_62,_63){
with(_62){
return _name;
}
}),new objj_method(sel_getUid("defaultValue"),function(_64,_65){
with(_64){
return _defaultValue;
}
}),new objj_method(sel_getUid("hasValues"),function(_66,_67){
with(_66){
return objj_msgSend(_values,"count")>0;
}
}),new objj_method(sel_getUid("isTrivial"),function(_68,_69){
with(_68){
return (objj_msgSend(_values,"count")===1)&&(Number(objj_msgSend(_values,"allKeys")[0])===CPThemeStateNormal);
}
}),new objj_method(sel_getUid("setValue:"),function(_6a,_6b,_6c){
with(_6a){
_cache={};
if(_6c===undefined||_6c===nil){
_values=objj_msgSend(CPDictionary,"dictionary");
}else{
_values=objj_msgSend(CPDictionary,"dictionaryWithObject:forKey:",_6c,String(CPThemeStateNormal));
}
}
}),new objj_method(sel_getUid("setValue:forState:"),function(_6d,_6e,_6f,_70){
with(_6d){
_cache={};
if((_6f===undefined)||(_6f===nil)){
objj_msgSend(_values,"removeObjectForKey:",String(_70));
}else{
objj_msgSend(_values,"setObject:forKey:",_6f,String(_70));
}
}
}),new objj_method(sel_getUid("value"),function(_71,_72){
with(_71){
return objj_msgSend(_71,"valueForState:",CPThemeStateNormal);
}
}),new objj_method(sel_getUid("valueForState:"),function(_73,_74,_75){
with(_73){
var _76=_cache[_75];
if(_76!==undefined){
return _76;
}
_76=objj_msgSend(_values,"objectForKey:",String(_75));
if((_76===undefined||_76===nil)&&_75!==CPThemeStateNormal){
if(_75&(_75-1)){
var _77=0,_78=objj_msgSend(_values,"allKeys"),_79=_78.length;
while(_79--){
var _7a=Number(_78[_79]);
if((_7a&_75)===_7a){
var _7b=_7c[_7a];
if(_7b===undefined){
_7b=_7d(_7a);
}
if(_7b>_77){
_77=_7b;
_76=objj_msgSend(_values,"objectForKey:",String(_7a));
}
}
}
}
if(_76===undefined||_76===nil){
_76=objj_msgSend(_values,"objectForKey:",String(CPThemeStateNormal));
}
}
if(_76===undefined||_76===nil){
_76=objj_msgSend(_parentAttribute,"valueForState:",_75);
}
if(_76===undefined||_76===nil){
_76=_defaultValue;
}
_cache[_75]=_76;
return _76;
}
}),new objj_method(sel_getUid("setParentAttribute:"),function(_7e,_7f,_80){
with(_7e){
if(_parentAttribute===_80){
return;
}
_cache={};
_parentAttribute=_80;
}
}),new objj_method(sel_getUid("attributeMergedWithAttribute:"),function(_81,_82,_83){
with(_81){
var _84=objj_msgSend(objj_msgSend(_CPThemeAttribute,"alloc"),"initWithName:defaultValue:",_name,_defaultValue);
_84._values=objj_msgSend(_values,"copy");
objj_msgSend(_84._values,"addEntriesFromDictionary:",_83._values);
return _84;
}
})]);
var _4=objj_getClass("_CPThemeAttribute");
if(!_4){
throw new SyntaxError("*** Could not find definition for class \"_CPThemeAttribute\"");
}
var _5=_4.isa;
class_addMethods(_4,[new objj_method(sel_getUid("initWithCoder:"),function(_85,_86,_87){
with(_85){
_85=objj_msgSendSuper({receiver:_85,super_class:objj_getClass("_CPThemeAttribute").super_class},"init");
if(_85){
_cache={};
_name=objj_msgSend(_87,"decodeObjectForKey:","name");
_values=objj_msgSend(CPDictionary,"dictionary");
if(objj_msgSend(_87,"containsValueForKey:","value")){
var _88=CPThemeStateNormal;
if(objj_msgSend(_87,"containsValueForKey:","state")){
_88=CPThemeState(objj_msgSend(_87,"decodeObjectForKey:","state"));
}
objj_msgSend(_values,"setObject:forKey:",objj_msgSend(_87,"decodeObjectForKey:","value"),_88);
}else{
var _89=objj_msgSend(_87,"decodeObjectForKey:","values"),_8a=objj_msgSend(_89,"allKeys"),_8b=_8a.length;
while(_8b--){
var key=_8a[_8b];
objj_msgSend(_values,"setObject:forKey:",objj_msgSend(_89,"objectForKey:",key),CPThemeState(key));
}
}
}
return _85;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_8c,_8d,_8e){
with(_8c){
objj_msgSend(_8e,"encodeObject:forKey:",_name,"name");
var _8f=objj_msgSend(_values,"allKeys"),_90=_8f.length;
if(_90===1){
var _91=_8f[0];
if(Number(_91)!==CPThemeStateNormal){
objj_msgSend(_8e,"encodeObject:forKey:",CPThemeStateName(Number(_91)),"state");
}
objj_msgSend(_8e,"encodeObject:forKey:",objj_msgSend(_values,"objectForKey:",_91),"value");
}else{
var _92=objj_msgSend(CPDictionary,"dictionary");
while(_90--){
var key=_8f[_90];
objj_msgSend(_92,"setObject:forKey:",objj_msgSend(_values,"objectForKey:",key),CPThemeStateName(Number(key)));
}
objj_msgSend(_8e,"encodeObject:forKey:",_92,"values");
}
}
})]);
var _7c=[0,1,1,2,1,2,2,3,1,2,2,3,2,3,3,4,1,2,2,3,2,3,3,4,2,3,3,4,3,4,4,5,1,2,2,3,2,3,3,4,2,3,3,4,3,4,4,5,2,3,3,4,3,4,4,5,3,4,4,5,4,5,5,6];
var _7d=function(_93){
var _94=0,_95=_93;
while(_93){
++_94;
_93&=(_93-1);
}
_7c[_95]=_94;
return _94;
};
_7d.displayName="numberOfOnes";
CPThemeAttributeEncode=function(_96,_97){
var _98=_97._values,_99=objj_msgSend(_98,"count"),key="$a"+objj_msgSend(_97,"name");
if(_99===1){
var _9a=objj_msgSend(_98,"allKeys")[0];
if(Number(_9a)===0){
objj_msgSend(_96,"encodeObject:forKey:",objj_msgSend(_98,"objectForKey:",_9a),key);
return YES;
}
}
if(_99>=1){
objj_msgSend(_96,"encodeObject:forKey:",_97,key);
return YES;
}
return NO;
};
CPThemeAttributeDecode=function(_9b,_9c,_9d,_9e,_9f){
var key="$a"+_9c;
if(!objj_msgSend(_9b,"containsValueForKey:",key)){
var _a0=objj_msgSend(objj_msgSend(_CPThemeAttribute,"alloc"),"initWithName:defaultValue:",_9c,_9d);
}else{
var _a0=objj_msgSend(_9b,"decodeObjectForKey:",key);
if(!_a0.isa||!objj_msgSend(_a0,"isKindOfClass:",objj_msgSend(_CPThemeAttribute,"class"))){
var _a1=objj_msgSend(objj_msgSend(_CPThemeAttribute,"alloc"),"initWithName:defaultValue:",_9c,_9d);
objj_msgSend(_a1,"setValue:",_a0);
_a0=_a1;
}
}
if(_9e&&_9f){
objj_msgSend(_a0,"setParentAttribute:",objj_msgSend(_9e,"attributeWithName:forClass:",_9c,_9f));
}
return _a0;
};
p;14;CPThemeBlend.jt;1813;@STATIC;1.0;I;21;Foundation/CPObject.ji;9;CPTheme.ji;22;_CPCibCustomResource.ji;23;_CPCibKeyedUnarchiver.jt;1700;
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("CPTheme.j",YES);
objj_executeFile("_CPCibCustomResource.j",YES);
objj_executeFile("_CPCibKeyedUnarchiver.j",YES);
var _1=objj_allocateClassPair(CPObject,"CPThemeBlend"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_bundle"),new objj_ivar("_themes"),new objj_ivar("_loadDelegate")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("initWithContentsOfURL:"),function(_3,_4,_5){
with(_3){
_3=objj_msgSendSuper({receiver:_3,super_class:objj_getClass("CPThemeBlend").super_class},"init");
if(_3){
_bundle=objj_msgSend(objj_msgSend(CPBundle,"alloc"),"initWithPath:",_5);
}
return _3;
}
}),new objj_method(sel_getUid("themes"),function(_6,_7){
with(_6){
return _themes;
}
}),new objj_method(sel_getUid("themeNames"),function(_8,_9){
with(_8){
var _a=[];
for(var i=0;i<_themes.length;++i){
_a.push(_themes[i].substring(0,_themes[i].indexOf(".keyedtheme")));
}
return _a;
}
}),new objj_method(sel_getUid("loadWithDelegate:"),function(_b,_c,_d){
with(_b){
_loadDelegate=_d;
objj_msgSend(_bundle,"loadWithDelegate:",_b);
}
}),new objj_method(sel_getUid("bundleDidFinishLoading:"),function(_e,_f,_10){
with(_e){
_themes=objj_msgSend(_bundle,"objectForInfoDictionaryKey:","CPKeyedThemes");
var _11=_themes.length;
while(_11--){
var _12=objj_msgSend(_10,"pathForResource:",_themes[_11]),_13=objj_msgSend(objj_msgSend(_CPThemeKeyedUnarchiver,"alloc"),"initForReadingWithData:bundle:",objj_msgSend(objj_msgSend(CPURL,"URLWithString:",_12),"staticResourceData"),_bundle);
objj_msgSend(_13,"decodeObjectForKey:","root");
objj_msgSend(_13,"finishDecoding");
}
objj_msgSend(_loadDelegate,"blendDidFinishLoading:",_e);
}
})]);
p;14;CPTokenField.jt;31702;@STATIC;1.0;I;27;Foundation/CPCharacterSet.jI;23;Foundation/CPIndexSet.jI;20;Foundation/CPTimer.ji;10;CPButton.ji;14;CPScrollView.ji;13;CPTextField.ji;13;CPTableView.ji;10;CPWindow.ji;15;_CPMenuWindow.jt;31492;
objj_executeFile("Foundation/CPCharacterSet.j",NO);
objj_executeFile("Foundation/CPIndexSet.j",NO);
objj_executeFile("Foundation/CPTimer.j",NO);
objj_executeFile("CPButton.j",YES);
objj_executeFile("CPScrollView.j",YES);
objj_executeFile("CPTextField.j",YES);
objj_executeFile("CPTableView.j",YES);
objj_executeFile("CPWindow.j",YES);
objj_executeFile("_CPMenuWindow.j",YES);
var _1=nil,_2=nil,_3=nil,_4=nil,_5=nil,_6=NO,_7=NO,_8=NO,_9=nil,_a=nil,_b=NO,_c=nil,_d=nil,_e=nil,_f=nil;
var _10="CPThemeStateAutoCompleting",_11="CPTokenFieldTableColumnIdentifier",_12=0,_13=1,_14=2;
var _15=objj_allocateClassPair(CPTextField,"CPTokenField"),_16=_15.isa;
class_addIvars(_15,[new objj_ivar("_tokenScrollView"),new objj_ivar("_shouldScrollTo"),new objj_ivar("_selectedRange"),new objj_ivar("_autocompleteContainer"),new objj_ivar("_autocompleteScrollView"),new objj_ivar("_autocompleteView"),new objj_ivar("_completionDelay"),new objj_ivar("_showCompletionsTimer"),new objj_ivar("_cachedCompletions"),new objj_ivar("_tokenizingCharacterSet"),new objj_ivar("_mouseDownEvent"),new objj_ivar("_preventResign"),new objj_ivar("_shouldNotifyTarget")]);
objj_registerClassPair(_15);
class_addMethods(_15,[new objj_method(sel_getUid("tokenizingCharacterSet"),function(_17,_18){
with(_17){
return _tokenizingCharacterSet;
}
}),new objj_method(sel_getUid("setTokenizingCharacterSet:"),function(_19,_1a,_1b){
with(_19){
_tokenizingCharacterSet=_1b;
}
}),new objj_method(sel_getUid("initWithFrame:"),function(_1c,_1d,_1e){
with(_1c){
if(_1c=objj_msgSendSuper({receiver:_1c,super_class:objj_getClass("CPTokenField").super_class},"initWithFrame:",_1e)){
_selectedRange=CPMakeRange(0,0);
_tokenScrollView=objj_msgSend(objj_msgSend(CPScrollView,"alloc"),"initWithFrame:",CGRectMakeZero());
objj_msgSend(_tokenScrollView,"setHasHorizontalScroller:",NO);
objj_msgSend(_tokenScrollView,"setHasVerticalScroller:",NO);
objj_msgSend(_tokenScrollView,"setAutoresizingMask:",CPViewWidthSizable|CPViewHeightSizable);
var _1f=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",CGRectMakeZero());
objj_msgSend(_1f,"setAutoresizingMask:",CPViewWidthSizable);
objj_msgSend(_tokenScrollView,"setDocumentView:",_1f);
objj_msgSend(_1c,"addSubview:",_tokenScrollView);
_tokenIndex=0;
_cachedCompletions=[];
_completionDelay=objj_msgSend(CPTokenField,"defaultCompletionDelay");
_tokenizingCharacterSet=objj_msgSend(objj_msgSend(_1c,"class"),"defaultTokenizingCharacterSet");
_autocompleteContainer=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",CPRectMake(0,0,_1e.size.width,92));
objj_msgSend(_autocompleteContainer,"setBackgroundColor:",objj_msgSend(_CPMenuWindow,"backgroundColorForBackgroundStyle:",_CPMenuWindowPopUpBackgroundStyle));
_autocompleteScrollView=objj_msgSend(objj_msgSend(CPScrollView,"alloc"),"initWithFrame:",CPRectMake(1,1,_1e.size.width-2,90));
objj_msgSend(_autocompleteScrollView,"setAutohidesScrollers:",YES);
objj_msgSend(_autocompleteScrollView,"setHasHorizontalScroller:",NO);
objj_msgSend(_autocompleteContainer,"addSubview:",_autocompleteScrollView);
_autocompleteView=objj_msgSend(objj_msgSend(CPTableView,"alloc"),"initWithFrame:",CPRectMakeZero());
var _20=objj_msgSend(objj_msgSend(CPTableColumn,"alloc"),"initWithIdentifier:",_11);
objj_msgSend(_20,"setResizingMask:",CPTableColumnAutoresizingMask);
objj_msgSend(_autocompleteView,"addTableColumn:",_20);
objj_msgSend(_autocompleteView,"setDataSource:",_1c);
objj_msgSend(_autocompleteView,"setDelegate:",_1c);
objj_msgSend(_autocompleteView,"setAllowsMultipleSelection:",NO);
objj_msgSend(_autocompleteView,"setHeaderView:",nil);
objj_msgSend(_autocompleteView,"setCornerView:",nil);
objj_msgSend(_autocompleteView,"setRowHeight:",30);
objj_msgSend(_autocompleteView,"setGridStyleMask:",CPTableViewSolidHorizontalGridLineMask);
objj_msgSend(_autocompleteView,"setBackgroundColor:",objj_msgSend(CPColor,"clearColor"));
objj_msgSend(_autocompleteView,"setGridColor:",objj_msgSend(CPColor,"colorWithRed:green:blue:alpha:",242/255,243/255,245/255,1));
objj_msgSend(_autocompleteScrollView,"setDocumentView:",_autocompleteView);
objj_msgSend(_1c,"setBezeled:",YES);
objj_msgSend(_1c,"setObjectValue:",[]);
objj_msgSend(_1c,"setNeedsLayout");
}
return _1c;
}
}),new objj_method(sel_getUid("_retrieveCompletions"),function(_21,_22){
with(_21){
var _23=0;
_cachedCompletions=objj_msgSend(_21,"tokenField:completionsForSubstring:indexOfToken:indexOfSelectedItem:",_21,objj_msgSend(_21,"_inputElement").value,_tokenIndex,_23);
objj_msgSend(_autocompleteView,"selectRowIndexes:byExtendingSelection:",objj_msgSend(CPIndexSet,"indexSetWithIndex:",_23),NO);
objj_msgSend(_autocompleteView,"reloadData");
}
}),new objj_method(sel_getUid("_autocompleteWithDOMEvent:"),function(_24,_25,_26){
with(_24){
if(!_cachedCompletions||!objj_msgSend(_24,"hasThemeState:",_10)){
return;
}
objj_msgSend(_24,"_hideCompletions");
var _27=_cachedCompletions[objj_msgSend(_autocompleteView,"selectedRow")],_28=_27!==""&&objj_msgSend(_24,"_inputElement").value!=="";
if(!_27){
_27=objj_msgSend(_24,"_inputElement").value;
}
if(!_27||_27===""){
if(_26&&_26.keyCode===CPTabKeyCode){
if(!_26.shiftKey){
objj_msgSend(objj_msgSend(_24,"window"),"selectNextKeyView:",_24);
}else{
objj_msgSend(objj_msgSend(_24,"window"),"selectPreviousKeyView:",_24);
}
}else{
objj_msgSend(objj_msgSend(_24,"window"),"makeFirstResponder:",nil);
}
return;
}
var _29=objj_msgSend(_24,"objectValue");
if(_28){
objj_msgSend(_29,"removeObjectAtIndex:",_selectedRange.location);
}
objj_msgSend(_29,"insertObject:atIndex:",_27,_selectedRange.location);
var _2a=_selectedRange.location;
objj_msgSend(_24,"setObjectValue:",_29);
_selectedRange=CPMakeRange(_2a+1,0);
objj_msgSend(_24,"_inputElement").value="";
objj_msgSend(_24,"setNeedsLayout");
objj_msgSend(_24,"_controlTextDidChange");
}
}),new objj_method(sel_getUid("_autocomplete"),function(_2b,_2c){
with(_2b){
objj_msgSend(_2b,"_autocompleteWithDOMEvent:",nil);
}
}),new objj_method(sel_getUid("_selectToken:byExtendingSelection:"),function(_2d,_2e,_2f,_30){
with(_2d){
var _31=objj_msgSend(objj_msgSend(_2d,"_tokens"),"indexOfObject:",_2f);
if(_31==CPNotFound){
if(!_30){
_selectedRange=CPMakeRange(objj_msgSend(objj_msgSend(_2d,"_tokens"),"count"),0);
}
}else{
if(_30){
_selectedRange=CPUnionRange(_selectedRange,CPMakeRange(_31,1));
}else{
_selectedRange=CPMakeRange(_31,1);
}
}
objj_msgSend(_2d,"setNeedsLayout");
}
}),new objj_method(sel_getUid("_deselectToken:"),function(_32,_33,_34){
with(_32){
var _35=objj_msgSend(objj_msgSend(_32,"_tokens"),"indexOfObject:",_34);
if(CPLocationInRange(_35,_selectedRange)){
_selectedRange=CPMakeRange(MAX(_35,_selectedRange.location),MIN(_selectedRange.length,_35-_selectedRange.location));
}
objj_msgSend(_32,"setNeedsLayout");
}
}),new objj_method(sel_getUid("_deleteToken:"),function(_36,_37,_38){
with(_36){
var _39=objj_msgSend(objj_msgSend(_36,"_tokens"),"indexOfObject:",_38),_3a=objj_msgSend(_36,"objectValue");
objj_msgSend(_36,"_deselectToken:",_38);
var _3b=CPCopyRange(_selectedRange);
objj_msgSend(_3a,"removeObjectAtIndex:",_39);
objj_msgSend(_36,"setObjectValue:",_3a);
_selectedRange=_3b;
objj_msgSend(_36,"setNeedsLayout");
objj_msgSend(_36,"_controlTextDidChange");
}
}),new objj_method(sel_getUid("_controlTextDidChange"),function(_3c,_3d){
with(_3c){
var _3e=objj_msgSend(objj_msgSend(_3c,"class"),"_binderClassForBinding:",CPValueBinding),_3f=objj_msgSend(_3e,"getBinding:forObject:",CPValueBinding,_3c);
if(_3f){
objj_msgSend(_3f,"reverseSetValueFor:","objectValue");
}
objj_msgSend(_3c,"textDidChange:",objj_msgSend(CPNotification,"notificationWithName:object:userInfo:",CPControlTextDidChangeNotification,_3c,nil));
_shouldNotifyTarget=YES;
}
}),new objj_method(sel_getUid("_removeSelectedTokens:"),function(_40,_41,_42){
with(_40){
var _43=objj_msgSend(_40,"objectValue");
for(var i=_selectedRange.length-1;i>=0;i--){
objj_msgSend(_43,"removeObjectAtIndex:",_selectedRange.location+i);
}
var _44=_selectedRange.location;
objj_msgSend(_40,"setObjectValue:",_43);
_selectedRange=CPMakeRange(_44,0);
objj_msgSend(_40,"_controlTextDidChange");
}
}),new objj_method(sel_getUid("becomeFirstResponder"),function(_45,_46){
with(_45){
if(_4&&objj_msgSend(_4,"window")!==objj_msgSend(_45,"window")){
objj_msgSend(objj_msgSend(_4,"window"),"makeFirstResponder:",nil);
}
objj_msgSend(_45,"setThemeState:",CPThemeStateEditing);
objj_msgSend(_45,"_updatePlaceholderState");
objj_msgSend(_45,"setNeedsLayout");
var _47=objj_msgSend(_45,"stringValue"),_48=objj_msgSend(_45,"_inputElement");
_48.value=nil;
_48.style.color=objj_msgSend(objj_msgSend(_45,"currentValueForThemeAttribute:","text-color"),"cssString");
_48.style.font=objj_msgSend(objj_msgSend(_45,"currentValueForThemeAttribute:","font"),"cssString");
_48.style.zIndex=1000;
switch(objj_msgSend(_45,"alignment")){
case CPCenterTextAlignment:
_48.style.textAlign="center";
break;
case CPRightTextAlignment:
_48.style.textAlign="right";
break;
default:
_48.style.textAlign="left";
}
var _49=objj_msgSend(_45,"contentRectForBounds:",objj_msgSend(_45,"bounds"));
_48.style.top=CGRectGetMinY(_49)+"px";
_48.style.left=(CGRectGetMinX(_49)-1)+"px";
_48.style.width=CGRectGetWidth(_49)+"px";
_48.style.height=CGRectGetHeight(_49)+"px";
objj_msgSend(_tokenScrollView,"documentView")._DOMElement.appendChild(_48);
window.setTimeout(function(){
_48.focus();
_4=_45;
},0);
objj_msgSend(_45,"textDidBeginEditing:",objj_msgSend(CPNotification,"notificationWithName:object:userInfo:",CPControlTextDidBeginEditingNotification,_45,nil));
objj_msgSend(objj_msgSend(objj_msgSend(_45,"window"),"platformWindow"),"_propagateCurrentDOMEvent:",YES);
_8=YES;
if(document.attachEvent){
_9=document.body.onselectstart;
_a=document.body.ondrag;
document.body.ondrag=function(){
};
document.body.onselectstart=function(){
};
}
return YES;
}
}),new objj_method(sel_getUid("resignFirstResponder"),function(_4a,_4b){
with(_4a){
if(_preventResign){
return NO;
}
objj_msgSend(_4a,"unsetThemeState:",CPThemeStateEditing);
objj_msgSend(_4a,"_autocomplete");
var _4c=objj_msgSend(_4a,"_inputElement");
_6=YES;
_4c.blur();
if(!_7){
_c();
}
_7=NO;
_6=NO;
if(_4c.parentNode==objj_msgSend(_tokenScrollView,"documentView")._DOMElement){
_4c.parentNode.removeChild(_4c);
}
_8=NO;
if(document.attachEvent){
_9=nil;
_a=nil;
document.body.ondrag=_a;
document.body.onselectstart=_9;
}
objj_msgSend(_4a,"_updatePlaceholderState");
objj_msgSend(_4a,"setNeedsLayout");
if(_shouldNotifyTarget){
_shouldNotifyTarget=NO;
objj_msgSend(_4a,"textDidEndEditing:",objj_msgSend(CPNotification,"notificationWithName:object:userInfo:",CPControlTextDidEndEditingNotification,_4a,nil));
if(objj_msgSend(_4a,"sendsActionOnEndEditing")){
objj_msgSend(_4a,"sendAction:to:",objj_msgSend(_4a,"action"),objj_msgSend(_4a,"target"));
}
}
return YES;
}
}),new objj_method(sel_getUid("mouseDown:"),function(_4d,_4e,_4f){
with(_4d){
_preventResign=YES;
_mouseDownEvent=_4f;
objj_msgSend(_4d,"_selectToken:byExtendingSelection:",nil,NO);
objj_msgSendSuper({receiver:_4d,super_class:objj_getClass("CPTokenField").super_class},"mouseDown:",_4f);
}
}),new objj_method(sel_getUid("mouseUp:"),function(_50,_51,_52){
with(_50){
_preventResign=NO;
_mouseDownEvent=nil;
}
}),new objj_method(sel_getUid("mouseDownOnToken:withEvent:"),function(_53,_54,_55,_56){
with(_53){
_preventResign=YES;
_mouseDownEvent=_56;
}
}),new objj_method(sel_getUid("mouseUpOnToken:withEvent:"),function(_57,_58,_59,_5a){
with(_57){
if(_mouseDownEvent&&CGPointEqualToPoint(objj_msgSend(_mouseDownEvent,"locationInWindow"),objj_msgSend(_5a,"locationInWindow"))){
objj_msgSend(_57,"_selectToken:byExtendingSelection:",_59,objj_msgSend(_5a,"modifierFlags")&CPShiftKeyMask);
objj_msgSend(objj_msgSend(_57,"window"),"makeFirstResponder:",_57);
_shouldScrollTo=_59;
}
_preventResign=NO;
}
}),new objj_method(sel_getUid("_tokens"),function(_5b,_5c){
with(_5b){
return objj_msgSendSuper({receiver:_5b,super_class:objj_getClass("CPTokenField").super_class},"objectValue");
}
}),new objj_method(sel_getUid("stringValue"),function(_5d,_5e){
with(_5d){
return objj_msgSend(objj_msgSend(_5d,"objectValue"),"componentsJoinedByString:",",");
}
}),new objj_method(sel_getUid("objectValue"),function(_5f,_60){
with(_5f){
var _61=[];
for(var i=0,_62=objj_msgSend(objj_msgSend(_5f,"_tokens"),"count");i<_62;i++){
var _63=objj_msgSend(objj_msgSend(_5f,"_tokens"),"objectAtIndex:",i);
if(objj_msgSend(_63,"isKindOfClass:",objj_msgSend(CPString,"class"))){
continue;
}
objj_msgSend(_61,"addObject:",objj_msgSend(_63,"representedObject"));
}
if(objj_msgSend(_5f,"_inputElement").value!=""){
objj_msgSend(_61,"insertObject:atIndex:",objj_msgSend(_5f,"_inputElement").value,_selectedRange.location);
}
return _61;
}
}),new objj_method(sel_getUid("setObjectValue:"),function(_64,_65,_66){
with(_64){
if(_66!==nil&&!objj_msgSend(_66,"isKindOfClass:",objj_msgSend(CPArray,"class"))){
objj_msgSendSuper({receiver:_64,super_class:objj_getClass("CPTokenField").super_class},"setObjectValue:",nil);
return;
}
var _67=objj_msgSendSuper({receiver:_64,super_class:objj_getClass("CPTokenField").super_class},"objectValue");
if(_66===_67||objj_msgSend(_66,"isEqualToArray:",_67)){
return;
}
var _68=objj_msgSend(_tokenScrollView,"documentView");
var _69=objj_msgSend(_64,"_tokens"),_6a=[];
if(_66!==nil){
for(var i=0,_6b=objj_msgSend(_66,"count");i<_6b;i++){
var _6c=_66[i],_6d=objj_msgSend(_64,"tokenField:displayStringForRepresentedObject:",_64,_6c),_6e=nil;
for(var j=0,_6f=objj_msgSend(_69,"count");j<_6f;j++){
var _70=_69[j];
if(objj_msgSend(_70,"representedObject")==_6c){
objj_msgSend(_69,"removeObjectAtIndex:",j);
_6e=_70;
break;
}
}
if(_6e===nil){
_6e=objj_msgSend(objj_msgSend(_CPTokenFieldToken,"alloc"),"init");
objj_msgSend(_6e,"setTokenField:",_64);
objj_msgSend(_6e,"setRepresentedObject:",_6c);
objj_msgSend(_6e,"setStringValue:",_6d);
objj_msgSend(_68,"addSubview:",_6e);
}
_6a.push(_6e);
}
}
for(var j=0,_6f=objj_msgSend(_69,"count");j<_6f;j++){
objj_msgSend(_69[j],"removeFromSuperview");
}
_value=_6a;
objj_msgSend(_64,"_selectToken:byExtendingSelection:",nil,NO);
objj_msgSend(_64,"_updatePlaceholderState");
_shouldScrollTo=_14;
objj_msgSend(_64,"setNeedsLayout");
objj_msgSend(_64,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("sendAction:to:"),function(_71,_72,_73,_74){
with(_71){
_shouldNotifyTarget=NO;
objj_msgSendSuper({receiver:_71,super_class:objj_getClass("CPTokenField").super_class},"sendAction:to:",_73,_74);
}
}),new objj_method(sel_getUid("_setStringValue:"),function(_75,_76,_77){
with(_75){
}
}),new objj_method(sel_getUid("viewDidMoveToWindow"),function(_78,_79){
with(_78){
objj_msgSend(objj_msgSend(objj_msgSend(_78,"window"),"contentView"),"addSubview:",_autocompleteContainer);
_autocompleteContainer._DOMElement.style.zIndex=1000;
}
}),new objj_method(sel_getUid("removeFromSuperview"),function(_7a,_7b){
with(_7a){
objj_msgSend(_autocompleteContainer,"removeFromSuperview");
}
}),new objj_method(sel_getUid("_inputElement"),function(_7c,_7d){
with(_7c){
if(!_1){
_1=document.createElement("input");
_1.style.position="absolute";
_1.style.border="0px";
_1.style.padding="0px";
_1.style.margin="0px";
_1.style.whiteSpace="pre";
_1.style.background="transparent";
_1.style.outline="none";
_c=function(_7e){
if(_4&&objj_msgSend(_4._tokenScrollView,"documentView")._DOMElement!=_1.parentNode){
return;
}
if(_4&&_4._preventResign){
return false;
}
if(!_6&&!_b){
objj_msgSend(objj_msgSend(_4,"window"),"makeFirstResponder:",nil);
return;
}
CPTokenFieldHandleBlur(_7e,_1);
_7=YES;
return true;
};
_f=function(_7f){
_7f=_7f||window.event;
_5=objj_msgSend(_4,"stringValue");
var _80=objj_msgSend(objj_msgSend(_4,"autocompleteView"),"selectedRow");
if(_7f.keyCode===CPUpArrowKeyCode){
_80-=1;
}else{
if(_7f.keyCode===CPDownArrowKeyCode){
_80+=1;
}
}
if(_80>objj_msgSend(objj_msgSend(_4,"autocompleteView"),"numberOfRows")-1){
_80=objj_msgSend(objj_msgSend(_4,"autocompleteView"),"numberOfRows")-1;
}
if(_80<0){
_80=0;
}
objj_msgSend(objj_msgSend(_4,"autocompleteView"),"selectRowIndexes:byExtendingSelection:",objj_msgSend(CPIndexSet,"indexSetWithIndex:",_80),NO);
var _81=objj_msgSend(_4,"autocompleteView"),_82=objj_msgSend(objj_msgSend(_81,"enclosingScrollView"),"contentView"),_83=objj_msgSend(_81,"rectOfRow:",_80),_84=_4;
if(_83&&!CPRectContainsRect(objj_msgSend(_82,"bounds"),_83)){
objj_msgSend(_82,"scrollToPoint:",objj_msgSend(_81,"rectOfRow:",_80).origin);
}
if(_7f.keyCode===CPReturnKeyCode||_7f.keyCode===CPTabKeyCode){
if(_7f.preventDefault){
_7f.preventDefault();
}
if(_7f.stopPropagation){
_7f.stopPropagation();
}
_7f.cancelBubble=true;
if(!objj_msgSend(_4,"hasThemeState:",_10)){
if(_7f&&_7f.keyCode===CPReturnKeyCode){
objj_msgSend(_84,"sendAction:to:",objj_msgSend(_84,"action"),objj_msgSend(_84,"target"));
objj_msgSend(objj_msgSend(_84,"window"),"makeFirstResponder:",nil);
}else{
if(_7f&&_7f.keyCode===CPTabKeyCode){
if(!_7f.shiftKey){
objj_msgSend(objj_msgSend(_84,"window"),"selectNextKeyView:",_84);
}else{
objj_msgSend(objj_msgSend(_84,"window"),"selectPreviousKeyView:",_84);
}
}
}
}
objj_msgSend(_84,"_autocompleteWithDOMEvent:",_7f);
objj_msgSend(_84,"setNeedsLayout");
}else{
if(_7f.keyCode===CPEscapeKeyCode){
objj_msgSend(_4,"_hideCompletions");
}else{
if(_7f.keyCode===CPUpArrowKeyCode||_7f.keyCode===CPDownArrowKeyCode){
if(_7f.preventDefault){
_7f.preventDefault();
}
if(_7f.stopPropagation){
_7f.stopPropagation();
}
_7f.cancelBubble=true;
}else{
if(_7f.keyCode==CPLeftArrowKeyCode&&_84._selectedRange.location>0&&_1.value==""){
if(!_7f.shiftKey){
if(_84._selectedRange.length){
_84._selectedRange.length=0;
}else{
_84._selectedRange.location--;
}
}else{
_84._selectedRange.location--;
_84._selectedRange.length++;
}
_84._shouldScrollTo=_13;
objj_msgSend(_84,"setNeedsLayout");
}else{
if(_7f.keyCode==CPRightArrowKeyCode&&_84._selectedRange.location<objj_msgSend(objj_msgSend(_84,"_tokens"),"count")&&_1.value==""){
if(!_7f.shiftKey){
if(_84._selectedRange.length){
_84._selectedRange.location=CPMaxRange(_84._selectedRange);
_84._selectedRange.length=0;
}else{
_84._selectedRange.location=MIN(objj_msgSend(objj_msgSend(_84,"_tokens"),"count"),_84._selectedRange.location+_84._selectedRange.length+1);
}
}else{
_84._selectedRange.length++;
}
_84._shouldScrollTo=_14;
objj_msgSend(_84,"setNeedsLayout");
}else{
if(_7f.keyCode===CPDeleteKeyCode){
if(_1.value==""){
objj_msgSend(_7c,"_hideCompletions");
if(CPEmptyRange(_4._selectedRange)){
if(_4._selectedRange.location>0){
var _85=objj_msgSend(_4,"_tokens"),_86=objj_msgSend(_85,"objectAtIndex:",(_4._selectedRange.location-1));
objj_msgSend(_4,"_selectToken:byExtendingSelection:",_86,NO);
}
}else{
objj_msgSend(_4,"_removeSelectedTokens:",nil);
}
}else{
objj_msgSend(_4,"_delayedShowCompletions");
}
}else{
if(_7f.keyCode===CPDeleteForwardKeyCode&&_1.value==""){
objj_msgSend(_7c,"_hideCompletions");
if(CPEmptyRange(_4._selectedRange)){
var _85=objj_msgSend(_4,"_tokens");
if(_4._selectedRange.location<objj_msgSend(_85,"count")){
objj_msgSend(_4,"_deleteToken:",_85[_4._selectedRange.location]);
}
}else{
objj_msgSend(_4,"_removeSelectedTokens:",nil);
}
}
}
}
}
}
}
}
return true;
};
_e=function(_87){
_87=_87||window.event;
var _88=String.fromCharCode(_87.keyCode||_87.which),_89=_4;
if(objj_msgSend(objj_msgSend(_89,"tokenizingCharacterSet"),"characterIsMember:",_88)){
if(_87.preventDefault){
_87.preventDefault();
}
if(_87.stopPropagation){
_87.stopPropagation();
}
_87.cancelBubble=true;
objj_msgSend(_89,"_autocompleteWithDOMEvent:",_87);
objj_msgSend(_89,"setNeedsLayout");
return true;
}
objj_msgSend(_4,"_delayedShowCompletions");
_89._selectedRange.length=0;
objj_msgSend(_89,"setNeedsLayout");
objj_msgSend(objj_msgSend(CPRunLoop,"currentRunLoop"),"limitDateForMode:",CPDefaultRunLoopMode);
};
_d=function(){
if(objj_msgSend(_4,"stringValue")!==_5){
_5=objj_msgSend(_4,"stringValue");
objj_msgSend(_4,"textDidChange:",objj_msgSend(CPNotification,"notificationWithName:object:userInfo:",CPControlTextDidChangeNotification,_4,nil));
}
objj_msgSend(_7c,"setNeedsLayout");
objj_msgSend(objj_msgSend(CPRunLoop,"currentRunLoop"),"limitDateForMode:",CPDefaultRunLoopMode);
};
CPTokenFieldHandleBlur=function(_8a){
_4=nil;
objj_msgSend(objj_msgSend(CPRunLoop,"currentRunLoop"),"limitDateForMode:",CPDefaultRunLoopMode);
};
if(document.attachEvent){
_1.attachEvent("on"+CPDOMEventKeyUp,_d);
_1.attachEvent("on"+CPDOMEventKeyDown,_f);
_1.attachEvent("on"+CPDOMEventKeyPress,_e);
}else{
_1.addEventListener(CPDOMEventKeyUp,_d,NO);
_1.addEventListener(CPDOMEventKeyDown,_f,NO);
_1.addEventListener(CPDOMEventKeyPress,_e,NO);
}
_1.onblur=_c;
_3=_1;
}
if(CPFeatureIsCompatible(CPInputTypeCanBeChangedFeature)){
if(objj_msgSend(_4,"isSecure")){
_1.type="password";
}else{
_1.type="text";
}
return _1;
}
return _1;
}
}),new objj_method(sel_getUid("setCompletionDelay:"),function(_8b,_8c,_8d){
with(_8b){
_completionDelay=_8d;
}
}),new objj_method(sel_getUid("completionDelay"),function(_8e,_8f){
with(_8e){
return _completionDelay;
}
}),new objj_method(sel_getUid("_showCompletions:"),function(_90,_91,_92){
with(_90){
objj_msgSend(_90,"_retrieveCompletions");
objj_msgSend(_90,"setThemeState:",_10);
objj_msgSend(_90,"setNeedsLayout");
}
}),new objj_method(sel_getUid("_delayedShowCompletions"),function(_93,_94){
with(_93){
_showCompletionsTimer=objj_msgSend(CPTimer,"scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:",objj_msgSend(_93,"completionDelay"),_93,sel_getUid("_showCompletions:"),nil,NO);
}
}),new objj_method(sel_getUid("_cancelShowCompletions"),function(_95,_96){
with(_95){
if(objj_msgSend(_showCompletionsTimer,"isValid")){
objj_msgSend(_showCompletionsTimer,"invalidate");
}
}
}),new objj_method(sel_getUid("_hideCompletions"),function(_97,_98){
with(_97){
objj_msgSend(_97,"_cancelShowCompletions");
objj_msgSend(_97,"unsetThemeState:",_10);
objj_msgSend(_97,"setNeedsLayout");
}
}),new objj_method(sel_getUid("layoutSubviews"),function(_99,_9a){
with(_99){
objj_msgSendSuper({receiver:_99,super_class:objj_getClass("CPTokenField").super_class},"layoutSubviews");
objj_msgSend(_tokenScrollView,"setFrame:",objj_msgSend(_99,"rectForEphemeralSubviewNamed:","content-view"));
var _9b=objj_msgSend(_99,"layoutEphemeralSubviewNamed:positioned:relativeToEphemeralSubviewNamed:","content-view",CPWindowAbove,"bezel-view");
if(_9b){
objj_msgSend(_9b,"setHidden:",objj_msgSend(_99,"stringValue")!=="");
}
var _9c=objj_msgSend(_99,"frame"),_9d=objj_msgSend(_tokenScrollView,"documentView"),_9e=objj_msgSend(_99,"_tokens");
objj_msgSend(objj_msgSend(_autocompleteView,"tableColumnWithIdentifier:",_11),"setWidth:",objj_msgSend(objj_msgSend(_autocompleteScrollView,"contentView"),"frame").size.width);
if(objj_msgSend(_99,"hasThemeState:",_10)&&objj_msgSend(_cachedCompletions,"count")){
objj_msgSend(_autocompleteContainer,"setHidden:",NO);
var _9f=objj_msgSend(_99,"convertPoint:toView:",objj_msgSend(_99,"bounds").origin,objj_msgSend(_autocompleteContainer,"superview"));
objj_msgSend(_autocompleteContainer,"setFrameOrigin:",CPPointMake(_9f.x,_9f.y+_9c.size.height));
objj_msgSend(_autocompleteContainer,"setFrameSize:",CPSizeMake(CPRectGetWidth(objj_msgSend(_99,"bounds")),92));
objj_msgSend(_autocompleteScrollView,"setFrameSize:",CPSizeMake(objj_msgSend(_autocompleteContainer,"frame").size.width-2,90));
}else{
objj_msgSend(_autocompleteContainer,"setHidden:",YES);
}
if(!objj_msgSend(_9e,"isKindOfClass:",objj_msgSend(CPArray,"class"))){
return;
}
var _a0=CGRectMakeCopy(objj_msgSend(_9d,"bounds")),_a1=_a0.origin,_a2=_a0.size,_a3=CPPointMake(_a1.x,_a1.y),_a4=CPSizeMake(2,2),_a5=objj_msgSend(objj_msgSend(_99,"window"),"firstResponder")==_99,_a6=objj_msgSend(_CPTokenFieldToken,"new");
objj_msgSend(_a6,"sizeToFit");
var _a7=CGRectGetHeight(objj_msgSend(_a6,"bounds"));
var _a8=function(_a9,_aa){
var r=CGRectMake(0,0,_a9,_aa);
if(_a3.x+_a9>=_a2.width&&_a3.x>_a1.x){
_a3.x=_a1.x;
_a3.y+=_aa+_a4.height;
}
r.origin.x=_a3.x;
r.origin.y=_a3.y;
if(CGRectGetHeight(objj_msgSend(_9d,"bounds"))<_a3.y+_aa){
objj_msgSend(_9d,"setFrame:",CGRectMake(0,0,CGRectGetWidth(objj_msgSend(_tokenScrollView,"bounds")),_a3.y+_aa));
}
_a3.x+=_a9+_a4.width;
return r;
};
var _ab=function(_ac){
var _ad=objj_msgSend(_99,"_inputElement"),_ae=1;
if(_selectedRange.length===0){
_ae=objj_msgSend((_ad.value||"")+"X","sizeWithFont:",objj_msgSend(_99,"font")).width;
if(_ac){
_ae=MAX(_a2.width-_a3.x-1,_ae);
}
}
var _af=_a8(_ae,_a7);
_ad.style.left=_af.origin.x+"px";
_ad.style.top=_af.origin.y+"px";
_ad.style.width=_af.size.width+"px";
_ad.style.height=_af.size.height+"px";
if(_selectedRange.length==0){
objj_msgSend(objj_msgSend(_tokenScrollView,"documentView"),"scrollRectToVisible:",_af);
}
};
for(var i=0,_b0=objj_msgSend(_9e,"count");i<_b0;i++){
if(_a5&&i==CPMaxRange(_selectedRange)){
_ab(false);
}
var _b1=objj_msgSend(_9e,"objectAtIndex:",i);
if(objj_msgSend(_b1,"isKindOfClass:",objj_msgSend(CPString,"class"))){
continue;
}
objj_msgSend(_b1,"setHighlighted:",CPLocationInRange(i,_selectedRange));
objj_msgSend(_b1,"sizeToFit");
var _b2=objj_msgSend(_9d,"bounds").size,_b3=objj_msgSend(_b1,"bounds").size,_b4=_a8(_b3.width,_b3.height);
objj_msgSend(_b1,"setFrame:",_b4);
}
if(_a5&&CPMaxRange(_selectedRange)>=objj_msgSend(_9e,"count")){
_ab(true);
}
if(_a5&&_selectedRange.length){
objj_msgSend(_99,"_inputElement").style.left="-10000px";
objj_msgSend(_99,"_inputElement").focus();
}
if(CGRectGetHeight(objj_msgSend(_9d,"bounds"))>_a3.y+_a7){
objj_msgSend(_9d,"setFrame:",CGRectMake(0,0,CGRectGetWidth(objj_msgSend(_tokenScrollView,"bounds")),_a3.y+_a7));
}
if(_shouldScrollTo!==_12){
if(!(_a5&&_selectedRange.length==0)){
var _b5=_shouldScrollTo;
if(_b5===_13){
_b5=_9e[_selectedRange.location];
}else{
if(_b5===_14){
_b5=_9e[MAX(0,CPMaxRange(_selectedRange)-1)];
}
}
objj_msgSend(_99,"_scrollTokenViewToVisible:",_b5);
}
_shouldScrollTo=_12;
}
}
}),new objj_method(sel_getUid("_scrollTokenViewToVisible:"),function(_b6,_b7,_b8){
with(_b6){
if(!_b8){
return;
}
return objj_msgSend(objj_msgSend(_tokenScrollView,"documentView"),"scrollRectToVisible:",objj_msgSend(_b8,"frame"));
}
}),new objj_method(sel_getUid("numberOfRowsInTableView:"),function(_b9,_ba,_bb){
with(_b9){
return objj_msgSend(_cachedCompletions,"count");
}
}),new objj_method(sel_getUid("tableView:objectValueForTableColumn:row:"),function(_bc,_bd,_be,_bf,row){
with(_bc){
return objj_msgSend(_bc,"tokenField:displayStringForRepresentedObject:",_bc,objj_msgSend(_cachedCompletions,"objectAtIndex:",row));
}
}),new objj_method(sel_getUid("tableViewSelectionDidChange:"),function(_c0,_c1,_c2){
with(_c0){
window.setTimeout(function(){
objj_msgSend(objj_msgSend(_c0,"window"),"makeFirstResponder:",_c0);
},2);
}
}),new objj_method(sel_getUid("autocompleteView"),function(_c3,_c4){
with(_c3){
return _autocompleteView;
}
})]);
class_addMethods(_16,[new objj_method(sel_getUid("defaultTokenizingCharacterSet"),function(_c5,_c6){
with(_c5){
return objj_msgSend(CPCharacterSet,"characterSetWithCharactersInString:",",");
}
}),new objj_method(sel_getUid("defaultThemeClass"),function(_c7,_c8){
with(_c7){
return "tokenfield";
}
}),new objj_method(sel_getUid("defaultCompletionDelay"),function(_c9,_ca){
with(_c9){
return 0.5;
}
})]);
var _15=objj_getClass("CPTokenField");
if(!_15){
throw new SyntaxError("*** Could not find definition for class \"CPTokenField\"");
}
var _16=_15.isa;
class_addMethods(_15,[new objj_method(sel_getUid("tokenField:completionsForSubstring:indexOfToken:indexOfSelectedItem:"),function(_cb,_cc,_cd,_ce,_cf,_d0){
with(_cb){
if(objj_msgSend(objj_msgSend(_cb,"delegate"),"respondsToSelector:",sel_getUid("tokenField:completionsForSubstring:indexOfToken:indexOfSelectedItem:"))){
return objj_msgSend(objj_msgSend(_cb,"delegate"),"tokenField:completionsForSubstring:indexOfToken:indexOfSelectedItem:",_cd,_ce,_tokenIndex,_d0);
}
return [];
}
}),new objj_method(sel_getUid("tokenField:displayStringForRepresentedObject:"),function(_d1,_d2,_d3,_d4){
with(_d1){
if(objj_msgSend(objj_msgSend(_d1,"delegate"),"respondsToSelector:",sel_getUid("tokenField:displayStringForRepresentedObject:"))){
var _d5=objj_msgSend(objj_msgSend(_d1,"delegate"),"tokenField:displayStringForRepresentedObject:",_d3,_d4);
if(_d5!==nil){
return _d5;
}
}
return _d4;
}
})]);
var _15=objj_allocateClassPair(CPTextField,"_CPTokenFieldToken"),_16=_15.isa;
class_addIvars(_15,[new objj_ivar("_deleteButton"),new objj_ivar("_tokenField"),new objj_ivar("_representedObject")]);
objj_registerClassPair(_15);
class_addMethods(_15,[new objj_method(sel_getUid("initWithFrame:"),function(_d6,_d7,_d8){
with(_d6){
if(_d6=objj_msgSendSuper({receiver:_d6,super_class:objj_getClass("_CPTokenFieldToken").super_class},"initWithFrame:",_d8)){
_deleteButton=objj_msgSend(objj_msgSend(_CPTokenFieldTokenCloseButton,"alloc"),"initWithFrame:",CPRectMakeZero());
objj_msgSend(_d6,"addSubview:",_deleteButton);
objj_msgSend(_d6,"setEditable:",NO);
objj_msgSend(_d6,"setHighlighted:",NO);
objj_msgSend(_d6,"setBezeled:",YES);
}
return _d6;
}
}),new objj_method(sel_getUid("tokenField"),function(_d9,_da){
with(_d9){
return _tokenField;
}
}),new objj_method(sel_getUid("setTokenField:"),function(_db,_dc,_dd){
with(_db){
_tokenField=_dd;
}
}),new objj_method(sel_getUid("representedObject"),function(_de,_df){
with(_de){
return _representedObject;
}
}),new objj_method(sel_getUid("setRepresentedObject:"),function(_e0,_e1,_e2){
with(_e0){
_representedObject=_e2;
}
}),new objj_method(sel_getUid("_minimumFrameSize"),function(_e3,_e4){
with(_e3){
var _e5=CGSizeMakeZero(),_e6=objj_msgSend(_e3,"currentValueForThemeAttribute:","min-size"),_e7=objj_msgSend(_e3,"currentValueForThemeAttribute:","content-inset");
_e5.height=_e6.height;
_e5.width=MAX(_e6.width,objj_msgSend((objj_msgSend(_e3,"stringValue")||" "),"sizeWithFont:",objj_msgSend(_e3,"font")).width+_e7.left+_e7.right);
return _e5;
}
}),new objj_method(sel_getUid("layoutSubviews"),function(_e8,_e9){
with(_e8){
objj_msgSendSuper({receiver:_e8,super_class:objj_getClass("_CPTokenFieldToken").super_class},"layoutSubviews");
var _ea=objj_msgSend(_e8,"layoutEphemeralSubviewNamed:positioned:relativeToEphemeralSubviewNamed:","bezel-view",CPWindowBelow,"content-view");
if(_ea){
objj_msgSend(_deleteButton,"setTarget:",_e8);
objj_msgSend(_deleteButton,"setAction:",sel_getUid("_delete:"));
var _eb=objj_msgSend(_ea,"frame"),_ec=objj_msgSend(_deleteButton,"currentValueForThemeAttribute:","offset"),_ed=objj_msgSend(_deleteButton,"currentValueForThemeAttribute:","min-size");
objj_msgSend(_deleteButton,"setFrame:",CPRectMake(CPRectGetMaxX(_eb)-_ec.x,CPRectGetMinY(_eb)+_ec.y,_ed.width,_ed.height));
}
}
}),new objj_method(sel_getUid("mouseDown:"),function(_ee,_ef,_f0){
with(_ee){
objj_msgSend(_tokenField,"mouseDownOnToken:withEvent:",_ee,_f0);
}
}),new objj_method(sel_getUid("mouseUp:"),function(_f1,_f2,_f3){
with(_f1){
objj_msgSend(_tokenField,"mouseUpOnToken:withEvent:",_f1,_f3);
}
}),new objj_method(sel_getUid("_delete:"),function(_f4,_f5,_f6){
with(_f4){
objj_msgSend(_tokenField,"_deleteToken:",_f4);
}
})]);
class_addMethods(_16,[new objj_method(sel_getUid("defaultThemeClass"),function(_f7,_f8){
with(_f7){
return "tokenfield-token";
}
})]);
var _15=objj_allocateClassPair(CPButton,"_CPTokenFieldTokenCloseButton"),_16=_15.isa;
objj_registerClassPair(_15);
class_addMethods(_16,[new objj_method(sel_getUid("themeAttributes"),function(_f9,_fa){
with(_f9){
var _fb=objj_msgSend(CPButton,"themeAttributes");
objj_msgSend(_fb,"setObject:forKey:",CGPointMake(15,5),"offset");
return _fb;
}
}),new objj_method(sel_getUid("defaultThemeClass"),function(_fc,_fd){
with(_fc){
return "tokenfield-token-close-button";
}
})]);
p;11;CPToolbar.jt;24918;@STATIC;1.0;I;21;Foundation/CPObject.ji;15;CPPopUpButton.ji;15;CPToolbarItem.jt;24832;
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("CPPopUpButton.j",YES);
objj_executeFile("CPToolbarItem.j",YES);
CPToolbarDisplayModeDefault=0;
CPToolbarDisplayModeIconAndLabel=1;
CPToolbarDisplayModeIconOnly=2;
CPToolbarDisplayModeLabelOnly=3;
var _1=nil,_2=nil;
var _3=objj_allocateClassPair(CPObject,"CPToolbar"),_4=_3.isa;
class_addIvars(_3,[new objj_ivar("_identifier"),new objj_ivar("_displayMode"),new objj_ivar("_showsBaselineSeparator"),new objj_ivar("_allowsUserCustomization"),new objj_ivar("_isVisible"),new objj_ivar("_delegate"),new objj_ivar("_itemIdentifiers"),new objj_ivar("_identifiedItems"),new objj_ivar("_defaultItems"),new objj_ivar("_allowedItems"),new objj_ivar("_selectableItems"),new objj_ivar("_items"),new objj_ivar("_itemsSortedByVisibilityPriority"),new objj_ivar("_toolbarView"),new objj_ivar("_window")]);
objj_registerClassPair(_3);
class_addMethods(_3,[new objj_method(sel_getUid("init"),function(_5,_6){
with(_5){
return objj_msgSend(_5,"initWithIdentifier:","");
}
}),new objj_method(sel_getUid("initWithIdentifier:"),function(_7,_8,_9){
with(_7){
_7=objj_msgSendSuper({receiver:_7,super_class:objj_getClass("CPToolbar").super_class},"init");
if(_7){
_items=[];
_identifier=_9;
_isVisible=YES;
objj_msgSend(CPToolbar,"_addToolbar:forIdentifier:",_7,_identifier);
}
return _7;
}
}),new objj_method(sel_getUid("setDisplayMode:"),function(_a,_b,_c){
with(_a){
}
}),new objj_method(sel_getUid("identifier"),function(_d,_e){
with(_d){
return _identifier;
}
}),new objj_method(sel_getUid("delegate"),function(_f,_10){
with(_f){
return _delegate;
}
}),new objj_method(sel_getUid("isVisible"),function(_11,_12){
with(_11){
return _isVisible;
}
}),new objj_method(sel_getUid("setVisible:"),function(_13,_14,_15){
with(_13){
if(_isVisible===_15){
return;
}
_isVisible=_15;
objj_msgSend(_window,"_noteToolbarChanged");
}
}),new objj_method(sel_getUid("_window"),function(_16,_17){
with(_16){
return _window;
}
}),new objj_method(sel_getUid("_setWindow:"),function(_18,_19,_1a){
with(_18){
_window=_1a;
}
}),new objj_method(sel_getUid("setDelegate:"),function(_1b,_1c,_1d){
with(_1b){
if(_delegate===_1d){
return;
}
_delegate=_1d;
objj_msgSend(_1b,"_reloadToolbarItems");
}
}),new objj_method(sel_getUid("_loadConfiguration"),function(_1e,_1f){
with(_1e){
}
}),new objj_method(sel_getUid("_toolbarView"),function(_20,_21){
with(_20){
if(!_toolbarView){
_toolbarView=objj_msgSend(objj_msgSend(_CPToolbarView,"alloc"),"initWithFrame:",CPRectMake(0,0,1200,59));
objj_msgSend(_toolbarView,"setToolbar:",_20);
objj_msgSend(_toolbarView,"setAutoresizingMask:",CPViewWidthSizable);
objj_msgSend(_toolbarView,"reloadToolbarItems");
}
return _toolbarView;
}
}),new objj_method(sel_getUid("_reloadToolbarItems"),function(_22,_23){
with(_22){
_itemIdentifiers=objj_msgSend(_defaultItems,"valueForKey:","itemIdentifier")||[];
if(_delegate){
var _24=objj_msgSend(objj_msgSend(_delegate,"toolbarDefaultItemIdentifiers:",_22),"mutableCopy");
if(_24){
_itemIdentifiers=objj_msgSend(_itemIdentifiers,"arrayByAddingObjectsFromArray:",_24);
}
}
var _25=0,_26=objj_msgSend(_itemIdentifiers,"count");
_items=[];
for(;_25<_26;++_25){
var _27=_itemIdentifiers[_25],_28=objj_msgSend(CPToolbarItem,"_standardItemWithItemIdentifier:",_27);
if(!_28){
_28=objj_msgSend(_identifiedItems,"objectForKey:",_27);
}
if(!_28&&_delegate){
_28=objj_msgSend(_delegate,"toolbar:itemForItemIdentifier:willBeInsertedIntoToolbar:",_22,_27,YES);
}
_28=objj_msgSend(_28,"copy");
if(_28===nil){
objj_msgSend(CPException,"raise:reason:",CPInvalidArgumentException,"Toolbar delegate "+_delegate+" returned nil toolbar item for identifier \""+_27+"\"");
}
_28._toolbar=_22;
objj_msgSend(_items,"addObject:",_28);
}
_itemsSortedByVisibilityPriority=objj_msgSend(_items,"sortedArrayUsingFunction:context:",_29,NULL);
objj_msgSend(_toolbarView,"reloadToolbarItems");
}
}),new objj_method(sel_getUid("items"),function(_2a,_2b){
with(_2a){
return _items;
}
}),new objj_method(sel_getUid("visibleItems"),function(_2c,_2d){
with(_2c){
return objj_msgSend(_toolbarView,"visibleItems");
}
}),new objj_method(sel_getUid("itemsSortedByVisibilityPriority"),function(_2e,_2f){
with(_2e){
return _itemsSortedByVisibilityPriority;
}
}),new objj_method(sel_getUid("validateVisibleItems"),function(_30,_31){
with(_30){
var _32=objj_msgSend(_30,"visibleItems"),_33=objj_msgSend(_32,"count");
while(_33--){
objj_msgSend(_32[_33],"validate");
}
}
}),new objj_method(sel_getUid("_itemForItemIdentifier:willBeInsertedIntoToolbar:"),function(_34,_35,_36,_37){
with(_34){
var _38=objj_msgSend(_identifiedItems,"objectForKey:",_36);
if(!_38){
_38=objj_msgSend(CPToolbarItem,"_standardItemWithItemIdentifier:",_36);
if(_delegate&&!_38){
_38=objj_msgSend(objj_msgSend(_delegate,"toolbar:itemForItemIdentifier:willBeInsertedIntoToolbar:",_34,_36,_37),"copy");
if(!_38){
objj_msgSend(CPException,"raise:reason:",CPInvalidArgumentException,"Toolbar delegate "+_delegate+" returned nil toolbar item for identifier "+_36);
}
}
objj_msgSend(_identifiedItems,"setObject:forKey:",_38,_36);
}
return _38;
}
}),new objj_method(sel_getUid("_itemsWithIdentifiers:"),function(_39,_3a,_3b){
with(_39){
var _3c=[];
for(var i=0;i<_3b.length;i++){
objj_msgSend(_3c,"addObject:",objj_msgSend(_39,"_itemForItemIdentifier:willBeInsertedIntoToolbar:",_3b[i],NO));
}
return _3c;
}
}),new objj_method(sel_getUid("_defaultToolbarItems"),function(_3d,_3e){
with(_3d){
if(!_defaultItems&&objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("toolbarDefaultItemIdentifiers:"))){
_defaultItems=[];
var _3f=objj_msgSend(_delegate,"toolbarDefaultItemIdentifiers:",_3d),_40=0,_41=objj_msgSend(_3f,"count");
for(;_40<_41;++_40){
objj_msgSend(_defaultItems,"addObject:",objj_msgSend(_3d,"_itemForItemIdentifier:willBeInsertedIntoToolbar:",_3f[_40],NO));
}
}
return _defaultItems;
}
}),new objj_method(sel_getUid("toolbarItemDidChange:"),function(_42,_43,_44){
with(_42){
if(objj_msgSend(_identifiedItems,"objectForKey:",objj_msgSend(_44,"itemIdentifier"))){
objj_msgSend(_identifiedItems,"setObject:forKey:",_44,objj_msgSend(_44,"itemIdentifier"));
}
var _45=0,_46=objj_msgSend(_items,"count");
for(;_45<=_46;++_45){
var _47=_items[_45];
if(objj_msgSend(_47,"itemIdentifier")===objj_msgSend(_44,"itemIdentifier")){
_items[_45]=_44;
_itemsSortedByVisibilityPriority=objj_msgSend(_items,"sortedArrayUsingFunction:context:",_29,NULL);
objj_msgSend(_toolbarView,"reloadToolbarItems");
}
}
}
})]);
class_addMethods(_4,[new objj_method(sel_getUid("initialize"),function(_48,_49){
with(_48){
if(_48!=objj_msgSend(CPToolbar,"class")){
return;
}
_1=objj_msgSend(CPDictionary,"dictionary");
_2=objj_msgSend(CPDictionary,"dictionary");
}
}),new objj_method(sel_getUid("_addToolbar:forIdentifier:"),function(_4a,_4b,_4c,_4d){
with(_4a){
var _4e=objj_msgSend(_1,"objectForKey:",_4d);
if(!_4e){
_4e=[];
objj_msgSend(_1,"setObject:forKey:",_4e,_4d);
}
objj_msgSend(_4e,"addObject:",_4c);
}
})]);
var _4f="CPToolbarIdentifierKey",_50="CPToolbarDisplayModeKey",_51="CPToolbarShowsBaselineSeparatorKey",_52="CPToolbarAllowsUserCustomizationKey",_53="CPToolbarIsVisibleKey",_54="CPToolbarDelegateKey",_55="CPToolbarIdentifiedItemsKey",_56="CPToolbarDefaultItemsKey",_57="CPToolbarAllowedItemsKey",_58="CPToolbarSelectableItemsKey";
var _3=objj_getClass("CPToolbar");
if(!_3){
throw new SyntaxError("*** Could not find definition for class \"CPToolbar\"");
}
var _4=_3.isa;
class_addMethods(_3,[new objj_method(sel_getUid("initWithCoder:"),function(_59,_5a,_5b){
with(_59){
_59=objj_msgSendSuper({receiver:_59,super_class:objj_getClass("CPToolbar").super_class},"init");
if(_59){
_identifier=objj_msgSend(_5b,"decodeObjectForKey:",_4f);
_displayMode=objj_msgSend(_5b,"decodeIntForKey:",_50);
_showsBaselineSeparator=objj_msgSend(_5b,"decodeBoolForKey:",_51);
_allowsUserCustomization=objj_msgSend(_5b,"decodeBoolForKey:",_52);
_isVisible=objj_msgSend(_5b,"decodeBoolForKey:",_53);
_identifiedItems=objj_msgSend(_5b,"decodeObjectForKey:",_55);
_defaultItems=objj_msgSend(_5b,"decodeObjectForKey:",_56);
_allowedItems=objj_msgSend(_5b,"decodeObjectForKey:",_57);
_selectableItems=objj_msgSend(_5b,"decodeObjectForKey:",_58);
objj_msgSend(objj_msgSend(_identifiedItems,"allValues"),"makeObjectsPerformSelector:withObject:",sel_getUid("_setToolbar:"),_59);
_items=[];
objj_msgSend(CPToolbar,"_addToolbar:forIdentifier:",_59,_identifier);
objj_msgSend(_59,"setDelegate:",objj_msgSend(_5b,"decodeObjectForKey:",_54));
objj_msgSend(objj_msgSend(CPRunLoop,"currentRunLoop"),"performSelector:target:argument:order:modes:",sel_getUid("_reloadToolbarItems"),_59,nil,0,[CPDefaultRunLoopMode]);
}
return _59;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_5c,_5d,_5e){
with(_5c){
objj_msgSend(_5e,"encodeObject:forKey:",_identifier,_4f);
objj_msgSend(_5e,"encodeInt:forKey:",_displayMode,_50);
objj_msgSend(_5e,"encodeBool:forKey:",_showsBaselineSeparator,_51);
objj_msgSend(_5e,"encodeBool:forKey:",_allowsUserCustomization,_52);
objj_msgSend(_5e,"encodeBool:forKey:",_isVisible,_53);
objj_msgSend(_5e,"encodeObject:forKey:",_identifiedItems,_55);
objj_msgSend(_5e,"encodeObject:forKey:",_defaultItems,_56);
objj_msgSend(_5e,"encodeObject:forKey:",_allowedItems,_57);
objj_msgSend(_5e,"encodeObject:forKey:",_selectableItems,_58);
objj_msgSend(_5e,"encodeConditionalObject:forKey:",_delegate,_54);
}
})]);
var _5f=nil,_60=nil,_61=nil;
var _62=5,_63=10,_64=20;
var _65=function(_66,_67,_68,_69){
return {index:_66,view:_67,label:_68,minWidth:_69};
};
var _3=objj_allocateClassPair(CPView,"_CPToolbarView"),_4=_3.isa;
class_addIvars(_3,[new objj_ivar("_toolbar"),new objj_ivar("_flexibleWidthIndexes"),new objj_ivar("_visibleFlexibleWidthIndexes"),new objj_ivar("_itemInfos"),new objj_ivar("_viewsForToolbarItems"),new objj_ivar("_visibleItems"),new objj_ivar("_invisibleItems"),new objj_ivar("_additionalItemsButton"),new objj_ivar("_labelColor"),new objj_ivar("_labelShadowColor"),new objj_ivar("_minWidth"),new objj_ivar("_FIXME_isHUD")]);
objj_registerClassPair(_3);
class_addMethods(_3,[new objj_method(sel_getUid("visibleItems"),function(_6a,_6b){
with(_6a){
return _visibleItems;
}
}),new objj_method(sel_getUid("initWithFrame:"),function(_6c,_6d,_6e){
with(_6c){
_6c=objj_msgSendSuper({receiver:_6c,super_class:objj_getClass("_CPToolbarView").super_class},"initWithFrame:",_6e);
if(_6c){
_minWidth=0;
_labelColor=objj_msgSend(CPColor,"blackColor");
_labelShadowColor=objj_msgSend(CPColor,"colorWithWhite:alpha:",1,0.75);
_additionalItemsButton=objj_msgSend(objj_msgSend(CPPopUpButton,"alloc"),"initWithFrame:pullsDown:",CGRectMake(0,0,10,15),YES);
objj_msgSend(_additionalItemsButton,"setBordered:",NO);
objj_msgSend(_additionalItemsButton,"setImagePosition:",CPImageOnly);
objj_msgSend(objj_msgSend(_additionalItemsButton,"menu"),"setShowsStateColumn:",NO);
objj_msgSend(objj_msgSend(_additionalItemsButton,"menu"),"setAutoenablesItems:",NO);
objj_msgSend(_additionalItemsButton,"setAlternateImage:",_61);
}
return _6c;
}
}),new objj_method(sel_getUid("setToolbar:"),function(_6f,_70,_71){
with(_6f){
_toolbar=_71;
}
}),new objj_method(sel_getUid("toolbar"),function(_72,_73){
with(_72){
return _toolbar;
}
}),new objj_method(sel_getUid("FIXME_setIsHUD:"),function(_74,_75,_76){
with(_74){
if(_FIXME_isHUD===_76){
return;
}
_FIXME_isHUD=_76;
var _77=objj_msgSend(_toolbar,"items"),_78=objj_msgSend(_77,"count");
while(_78--){
objj_msgSend(objj_msgSend(_74,"viewForItem:",_77[_78]),"FIXME_setIsHUD:",_76);
}
}
}),new objj_method(sel_getUid("resizeSubviewsWithOldSize:"),function(_79,_7a,_7b){
with(_79){
objj_msgSend(_79,"tile");
}
}),new objj_method(sel_getUid("viewForItem:"),function(_7c,_7d,_7e){
with(_7c){
return _viewsForToolbarItems[objj_msgSend(_7e,"UID")]||nil;
}
}),new objj_method(sel_getUid("tile"),function(_7f,_80){
with(_7f){
var _81=objj_msgSend(_toolbar,"items"),_82=CGRectGetWidth(objj_msgSend(_7f,"bounds")),_83=_minWidth,_84=[];
_visibleItems=_81;
if(_82<_83){
_82-=_64;
_visibleItems=objj_msgSend(_visibleItems,"copy");
var _85=objj_msgSend(_toolbar,"itemsSortedByVisibilityPriority"),_86=_85.length;
while(_83>_82&&_86){
var _87=_85[--_86],_88=objj_msgSend(_7f,"viewForItem:",_87);
_83-=objj_msgSend(_88,"minSize").width+_63;
objj_msgSend(_visibleItems,"removeObjectIdenticalTo:",_87);
objj_msgSend(_84,"addObject:",_87);
objj_msgSend(_88,"setHidden:",YES);
objj_msgSend(_88,"FIXME_setIsHUD:",_FIXME_isHUD);
}
}
var _86=objj_msgSend(_81,"count"),_89=0;
while(_86--){
var _88=objj_msgSend(_7f,"viewForItem:",_81[_86]),_8a=objj_msgSend(_88,"minSize");
if(_89<_8a.height){
_89=_8a.height;
}
}
var _86=_visibleItems.length,_8b=objj_msgSend(CPIndexSet,"indexSet");
while(_86--){
var _87=_visibleItems[_86],_88=objj_msgSend(_7f,"viewForItem:",_87),_8a=objj_msgSend(_88,"minSize");
if(_8a.width!==objj_msgSend(_88,"maxSize").width){
objj_msgSend(_8b,"addIndex:",_86);
}else{
objj_msgSend(_88,"setFrameSize:",CGSizeMake(_8a.width,_89));
}
objj_msgSend(_88,"setHidden:",NO);
}
var _8c=_82-_83,_8d=0;
while(_8c&&objj_msgSend(_8b,"count")){
_8d+=_8c/objj_msgSend(_8b,"count");
_8c=0;
var _8e=CPNotFound;
while((_8e=objj_msgSend(_8b,"indexGreaterThanIndex:",_8e))!==CPNotFound){
var _87=_visibleItems[_8e],_88=objj_msgSend(_7f,"viewForItem:",_87),_8f=objj_msgSend(_88,"minSize").width+_8d,_90=MIN(_8f,objj_msgSend(_88,"maxSize").width);
if(_90<_8f){
objj_msgSend(_8b,"removeIndex:",_8e);
_8c+=_8f-_90;
}
objj_msgSend(_88,"setFrameSize:",CGSizeMake(_90,_89));
}
}
var _8e=0,_86=_visibleItems.length,x=_63;
for(;_8e<_86;++_8e){
var _88=objj_msgSend(_7f,"viewForItem:",_visibleItems[_8e]),_91=CGRectGetWidth(objj_msgSend(_88,"frame"));
objj_msgSend(_88,"setFrame:",CGRectMake(x,0,_91,_89));
x+=_91+_63;
}
var _92=NO;
if(objj_msgSend(_84,"count")){
var _8e=0,_86=objj_msgSend(_81,"count");
_invisibleItems=[];
for(;_8e<_86;++_8e){
var _87=_81[_8e];
if(objj_msgSend(_84,"indexOfObjectIdenticalTo:",_87)!==CPNotFound){
objj_msgSend(_invisibleItems,"addObject:",_87);
var _93=objj_msgSend(_87,"itemIdentifier");
if(_93!==CPToolbarSpaceItemIdentifier&&_93!==CPToolbarFlexibleSpaceItemIdentifier&&_93!==CPToolbarSeparatorItemIdentifier){
_92=YES;
}
}
}
}
if(_92){
objj_msgSend(_additionalItemsButton,"setFrameOrigin:",CGPointMake(_82+5,(CGRectGetHeight(objj_msgSend(_7f,"bounds"))-CGRectGetHeight(objj_msgSend(_additionalItemsButton,"frame")))/2));
objj_msgSend(_7f,"addSubview:",_additionalItemsButton);
objj_msgSend(_additionalItemsButton,"removeAllItems");
objj_msgSend(_additionalItemsButton,"addItemWithTitle:","Additional Items");
objj_msgSend(objj_msgSend(_additionalItemsButton,"itemArray")[0],"setImage:",_60);
var _8e=0,_86=objj_msgSend(_invisibleItems,"count"),_94=NO;
for(;_8e<_86;++_8e){
var _87=_invisibleItems[_8e],_93=objj_msgSend(_87,"itemIdentifier");
if(_93===CPToolbarSpaceItemIdentifier||_93===CPToolbarFlexibleSpaceItemIdentifier){
continue;
}
if(_93===CPToolbarSeparatorItemIdentifier){
if(_94){
objj_msgSend(_additionalItemsButton,"addItem:",objj_msgSend(CPMenuItem,"separatorItem"));
}
continue;
}
_94=YES;
var _95=objj_msgSend(objj_msgSend(CPMenuItem,"alloc"),"initWithTitle:action:keyEquivalent:",objj_msgSend(_87,"label"),sel_getUid("didSelectMenuItem:"),nil);
objj_msgSend(_95,"setRepresentedObject:",_87);
objj_msgSend(_95,"setImage:",objj_msgSend(_87,"image"));
objj_msgSend(_95,"setTarget:",_7f);
objj_msgSend(_95,"setEnabled:",objj_msgSend(_87,"isEnabled"));
objj_msgSend(_additionalItemsButton,"addItem:",_95);
}
}else{
objj_msgSend(_additionalItemsButton,"removeFromSuperview");
}
}
}),new objj_method(sel_getUid("didSelectMenuItem:"),function(_96,_97,_98){
with(_96){
var _99=objj_msgSend(_98,"representedObject");
objj_msgSend(CPApp,"sendAction:to:from:",objj_msgSend(_99,"action"),objj_msgSend(_99,"target"),_99);
}
}),new objj_method(sel_getUid("reloadToolbarItems"),function(_9a,_9b){
with(_9a){
var _9c=objj_msgSend(_9a,"subviews"),_9d=_9c.length;
while(_9d--){
objj_msgSend(_9c[_9d],"removeFromSuperview");
}
var _9e=objj_msgSend(_toolbar,"items"),_9f=0;
_9d=_9e.length;
_minWidth=_63;
_viewsForToolbarItems={};
for(;_9f<_9d;++_9f){
var _a0=_9e[_9f],_a1=objj_msgSend(objj_msgSend(_CPToolbarItemView,"alloc"),"initWithToolbarItem:toolbar:",_a0,_9a);
_viewsForToolbarItems[objj_msgSend(_a0,"UID")]=_a1;
if(objj_msgSend(_a0,"toolTip")&&objj_msgSend(_a1,"respondsToSelector:",sel_getUid("setToolTip:"))){
objj_msgSend(_a1,"setToolTip:",objj_msgSend(_a0,"toolTip"));
}
objj_msgSend(_9a,"addSubview:",_a1);
_minWidth+=objj_msgSend(_a1,"minSize").width+_63;
}
objj_msgSend(_9a,"tile");
}
})]);
class_addMethods(_4,[new objj_method(sel_getUid("initialize"),function(_a2,_a3){
with(_a2){
if(_a2!==objj_msgSend(_CPToolbarView,"class")){
return;
}
var _a4=objj_msgSend(CPBundle,"bundleForClass:",_a2);
_60=objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_a4,"pathForResource:","_CPToolbarView/_CPToolbarViewExtraItemsImage.png"),CPSizeMake(10,15));
_61=objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_a4,"pathForResource:","_CPToolbarView/_CPToolbarViewExtraItemsAlternateImage.png"),CGSizeMake(10,15));
}
})]);
var _29=function(lhs,rhs){
var _a5=objj_msgSend(lhs,"visibilityPriority"),_a6=objj_msgSend(rhs,"visibilityPriority");
if(_a5==_a6){
return CPOrderedSame;
}
if(_a5>_a6){
return CPOrderedAscending;
}
return CPOrderedDescending;
};
var _a7=5,_a8=2;
var _3=objj_allocateClassPair(CPControl,"_CPToolbarItemView"),_4=_3.isa;
class_addIvars(_3,[new objj_ivar("_minSize"),new objj_ivar("_maxSize"),new objj_ivar("_labelSize"),new objj_ivar("_toolbarItem"),new objj_ivar("_toolbar"),new objj_ivar("_imageView"),new objj_ivar("_view"),new objj_ivar("_labelField"),new objj_ivar("_FIXME_isHUD")]);
objj_registerClassPair(_3);
class_addMethods(_3,[new objj_method(sel_getUid("minSize"),function(_a9,_aa){
with(_a9){
return _minSize;
}
}),new objj_method(sel_getUid("maxSize"),function(_ab,_ac){
with(_ab){
return _maxSize;
}
}),new objj_method(sel_getUid("initWithToolbarItem:toolbar:"),function(_ad,_ae,_af,_b0){
with(_ad){
_ad=objj_msgSendSuper({receiver:_ad,super_class:objj_getClass("_CPToolbarItemView").super_class},"init");
if(_ad){
_toolbarItem=_af;
_labelField=objj_msgSend(objj_msgSend(CPTextField,"alloc"),"initWithFrame:",CGRectMakeZero());
objj_msgSend(_labelField,"setFont:",objj_msgSend(CPFont,"systemFontOfSize:",11));
objj_msgSend(_labelField,"setTextColor:",objj_msgSend(_ad,"FIXME_labelColor"));
objj_msgSend(_labelField,"setTextShadowColor:",objj_msgSend(_ad,"FIXME_labelShadowColor"));
objj_msgSend(_labelField,"setTextShadowOffset:",CGSizeMake(0,1));
objj_msgSend(_labelField,"setAutoresizingMask:",CPViewWidthSizable|CPViewMinXMargin);
objj_msgSend(_ad,"addSubview:",_labelField);
objj_msgSend(_ad,"updateFromItem");
_toolbar=_b0;
var _b1=["label","image","alternateImage","minSize","maxSize","target","action","enabled"],_b2=0,_b3=objj_msgSend(_b1,"count");
for(;_b2<_b3;++_b2){
objj_msgSend(_toolbarItem,"addObserver:forKeyPath:options:context:",_ad,_b1[_b2],0,NULL);
}
}
return _ad;
}
}),new objj_method(sel_getUid("FIXME_setIsHUD:"),function(_b4,_b5,_b6){
with(_b4){
_FIXME_isHUD=_b6;
objj_msgSend(_labelField,"setTextColor:",objj_msgSend(_b4,"FIXME_labelColor"));
objj_msgSend(_labelField,"setTextShadowColor:",objj_msgSend(_b4,"FIXME_labelShadowColor"));
}
}),new objj_method(sel_getUid("updateFromItem"),function(_b7,_b8){
with(_b7){
var _b9=objj_msgSend(_toolbarItem,"itemIdentifier");
if(_b9===CPToolbarSpaceItemIdentifier||_b9===CPToolbarFlexibleSpaceItemIdentifier||_b9===CPToolbarSeparatorItemIdentifier){
objj_msgSend(_view,"removeFromSuperview");
objj_msgSend(_imageView,"removeFromSuperview");
_minSize=objj_msgSend(_toolbarItem,"minSize");
_maxSize=objj_msgSend(_toolbarItem,"maxSize");
if(_b9===CPToolbarSeparatorItemIdentifier){
_view=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",CGRectMake(0,0,2,32));
sizes={};
sizes["CPToolbarItemSeparator"]=[CGSizeMake(2,26),CGSizeMake(2,1),CGSizeMake(2,26)];
objj_msgSend(_view,"setBackgroundColor:",_CPControlThreePartImagePattern(YES,sizes,"CPToolbarItem","Separator"));
objj_msgSend(_b7,"addSubview:",_view);
}
return;
}
objj_msgSend(_b7,"setTarget:",objj_msgSend(_toolbarItem,"target"));
objj_msgSend(_b7,"setAction:",objj_msgSend(_toolbarItem,"action"));
var _ba=objj_msgSend(_toolbarItem,"view")||nil;
if(_ba!==_view){
if(!_ba){
objj_msgSend(_view,"removeFromSuperview");
}else{
objj_msgSend(_b7,"addSubview:",_ba);
objj_msgSend(_imageView,"removeFromSuperview");
}
_view=_ba;
}
if(!_view){
if(!_imageView){
_imageView=objj_msgSend(objj_msgSend(CPImageView,"alloc"),"initWithFrame:",objj_msgSend(_b7,"bounds"));
objj_msgSend(_imageView,"setImageScaling:",CPScaleProportionally);
objj_msgSend(_b7,"addSubview:",_imageView);
}
objj_msgSend(_imageView,"setImage:",objj_msgSend(_toolbarItem,"image"));
}
var _bb=objj_msgSend(_toolbarItem,"minSize"),_bc=objj_msgSend(_toolbarItem,"maxSize");
objj_msgSend(_labelField,"setStringValue:",objj_msgSend(_toolbarItem,"label"));
objj_msgSend(_labelField,"sizeToFit");
objj_msgSend(_b7,"setEnabled:",objj_msgSend(_toolbarItem,"isEnabled"));
_labelSize=objj_msgSend(_labelField,"frame").size;
_minSize=CGSizeMake(MAX(_labelSize.width,_bb.width),_labelSize.height+_bb.height+_a8+_a7);
_maxSize=CGSizeMake(MAX(_labelSize.width,_bb.width),100000000);
objj_msgSend(_toolbar,"tile");
}
}),new objj_method(sel_getUid("layoutSubviews"),function(_bd,_be){
with(_bd){
var _bf=objj_msgSend(_toolbarItem,"itemIdentifier");
if(_bf===CPToolbarSpaceItemIdentifier||_bf===CPToolbarFlexibleSpaceItemIdentifier){
return;
}
var _c0=objj_msgSend(_bd,"bounds"),_c1=(_c0.size.width);
if(_bf===CPToolbarSeparatorItemIdentifier){
return objj_msgSend(_view,"setFrame:",CGRectMake(ROUND((_c1-2)/2),0,2,(_c0.size.height)));
}
var _c2=_view||_imageView,_c3=objj_msgSend(_toolbarItem,"maxSize"),_c4=(_c0.size.height)-_labelSize.height-_a8-_a7,_c5=MIN(_c3.width,_c1),_c6=MIN(_c3.height,_c4);
objj_msgSend(_c2,"setFrame:",CGRectMake(ROUND((_c1-_c5)/2),_a7+ROUND((_c4-_c6)/2),_c5,_c6));
objj_msgSend(_labelField,"setFrameOrigin:",CGPointMake(ROUND((_c1-_labelSize.width)/2),_a7+_c4+_a8));
}
}),new objj_method(sel_getUid("mouseDown:"),function(_c7,_c8,_c9){
with(_c7){
if(objj_msgSend(_toolbarItem,"view")){
return objj_msgSend(objj_msgSend(_c7,"nextResponder"),"mouseDown:",_c9);
}
var _ca=objj_msgSend(_toolbarItem,"itemIdentifier");
if(_ca===CPToolbarSpaceItemIdentifier||_ca===CPToolbarFlexibleSpaceItemIdentifier||_ca===CPToolbarSeparatorItemIdentifier){
return objj_msgSend(objj_msgSend(_c7,"nextResponder"),"mouseDown:",_c9);
}
objj_msgSendSuper({receiver:_c7,super_class:objj_getClass("_CPToolbarItemView").super_class},"mouseDown:",_c9);
}
}),new objj_method(sel_getUid("setEnabled:"),function(_cb,_cc,_cd){
with(_cb){
objj_msgSendSuper({receiver:_cb,super_class:objj_getClass("_CPToolbarItemView").super_class},"setEnabled:",_cd);
if(_cd){
objj_msgSend(_imageView,"setAlphaValue:",1);
objj_msgSend(_labelField,"setAlphaValue:",1);
}else{
objj_msgSend(_imageView,"setAlphaValue:",0.5);
objj_msgSend(_labelField,"setAlphaValue:",0.5);
}
objj_msgSend(_toolbar,"tile");
}
}),new objj_method(sel_getUid("FIXME_labelColor"),function(_ce,_cf){
with(_ce){
if(_FIXME_isHUD){
return objj_msgSend(CPColor,"whiteColor");
}
return objj_msgSend(CPColor,"blackColor");
}
}),new objj_method(sel_getUid("FIXME_labelShadowColor"),function(_d0,_d1){
with(_d0){
if(_FIXME_isHUD){
return objj_msgSend(_d0,"isHighlighted")?objj_msgSend(CPColor,"colorWithWhite:alpha:",1,0.5):objj_msgSend(CPColor,"clearColor");
}
return objj_msgSend(_d0,"isHighlighted")?objj_msgSend(CPColor,"colorWithWhite:alpha:",0,0.3):objj_msgSend(CPColor,"colorWithWhite:alpha:",1,0.75);
}
}),new objj_method(sel_getUid("setHighlighted:"),function(_d2,_d3,_d4){
with(_d2){
objj_msgSendSuper({receiver:_d2,super_class:objj_getClass("_CPToolbarItemView").super_class},"setHighlighted:",_d4);
if(_d4){
var _d5=objj_msgSend(_toolbarItem,"alternateImage");
if(_d5){
objj_msgSend(_imageView,"setImage:",_d5);
}
objj_msgSend(_labelField,"setTextShadowOffset:",CGSizeMakeZero());
}else{
var _d6=objj_msgSend(_toolbarItem,"image");
if(_d6){
objj_msgSend(_imageView,"setImage:",_d6);
}
objj_msgSend(_labelField,"setTextShadowOffset:",CGSizeMake(0,1));
}
objj_msgSend(_labelField,"setTextShadowColor:",objj_msgSend(_d2,"FIXME_labelShadowColor"));
}
}),new objj_method(sel_getUid("sendAction:to:"),function(_d7,_d8,_d9,_da){
with(_d7){
objj_msgSend(CPApp,"sendAction:to:from:",_d9,_da,_toolbarItem);
}
}),new objj_method(sel_getUid("observeValueForKeyPath:ofObject:change:context:"),function(_db,_dc,_dd,_de,_df,_e0){
with(_db){
if(_dd==="enabled"){
objj_msgSend(_db,"setEnabled:",objj_msgSend(_de,"isEnabled"));
}else{
if(_dd==="target"){
objj_msgSend(_db,"setTarget:",objj_msgSend(_de,"target"));
}else{
if(_dd==="action"){
objj_msgSend(_db,"setAction:",objj_msgSend(_de,"action"));
}else{
objj_msgSend(_db,"updateFromItem");
}
}
}
}
})]);
p;15;CPToolbarItem.jt;13698;@STATIC;1.0;I;21;Foundation/CPObject.jI;21;Foundation/CPString.ji;9;CPImage.ji;8;CPView.ji;29;_CPToolbarFlexibleSpaceItem.ji;26;_CPToolbarShowColorsItem.ji;25;_CPToolbarSeparatorItem.ji;21;_CPToolbarSpaceItem.jt;13480;
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("Foundation/CPString.j",NO);
objj_executeFile("CPImage.j",YES);
objj_executeFile("CPView.j",YES);
CPToolbarItemVisibilityPriorityStandard=0;
CPToolbarItemVisibilityPriorityLow=-1000;
CPToolbarItemVisibilityPriorityHigh=1000;
CPToolbarItemVisibilityPriorityUser=2000;
CPToolbarSeparatorItemIdentifier="CPToolbarSeparatorItem";
CPToolbarSpaceItemIdentifier="CPToolbarSpaceItem";
CPToolbarFlexibleSpaceItemIdentifier="CPToolbarFlexibleSpaceItem";
CPToolbarShowColorsItemIdentifier="CPToolbarShowColorsItem";
CPToolbarShowFontsItemIdentifier="CPToolbarShowFontsItem";
CPToolbarCustomizeToolbarItemIdentifier="CPToolbarCustomizeToolbarItem";
CPToolbarPrintItemIdentifier="CPToolbarPrintItem";
var _1=objj_allocateClassPair(CPObject,"CPToolbarItem"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_itemIdentifier"),new objj_ivar("_toolbar"),new objj_ivar("_label"),new objj_ivar("_paletteLabel"),new objj_ivar("_toolTip"),new objj_ivar("_tag"),new objj_ivar("_target"),new objj_ivar("_action"),new objj_ivar("_isEnabled"),new objj_ivar("_image"),new objj_ivar("_alternateImage"),new objj_ivar("_view"),new objj_ivar("_minSize"),new objj_ivar("_maxSize"),new objj_ivar("_visibilityPriority"),new objj_ivar("_autovalidates")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("init"),function(_3,_4){
with(_3){
return objj_msgSend(_3,"initWithItemIdentifier:","");
}
}),new objj_method(sel_getUid("initWithItemIdentifier:"),function(_5,_6,_7){
with(_5){
_5=objj_msgSendSuper({receiver:_5,super_class:objj_getClass("CPToolbarItem").super_class},"init");
if(_5){
_itemIdentifier=_7;
_tag=0;
_isEnabled=YES;
_minSize=CGSizeMakeZero();
_maxSize=CGSizeMakeZero();
_visibilityPriority=CPToolbarItemVisibilityPriorityStandard;
_autovalidates=YES;
}
return _5;
}
}),new objj_method(sel_getUid("itemIdentifier"),function(_8,_9){
with(_8){
return _itemIdentifier;
}
}),new objj_method(sel_getUid("toolbar"),function(_a,_b){
with(_a){
return _toolbar;
}
}),new objj_method(sel_getUid("_setToolbar:"),function(_c,_d,_e){
with(_c){
_toolbar=_e;
}
}),new objj_method(sel_getUid("label"),function(_f,_10){
with(_f){
return _label;
}
}),new objj_method(sel_getUid("setLabel:"),function(_11,_12,_13){
with(_11){
_label=_13;
}
}),new objj_method(sel_getUid("paletteLabel"),function(_14,_15){
with(_14){
return _paletteLabel;
}
}),new objj_method(sel_getUid("setPaletteLabel:"),function(_16,_17,_18){
with(_16){
_paletteLabel=_18;
}
}),new objj_method(sel_getUid("toolTip"),function(_19,_1a){
with(_19){
if(objj_msgSend(_view,"respondsToSelector:",sel_getUid("toolTip"))){
return objj_msgSend(_view,"toolTip");
}
return _toolTip;
}
}),new objj_method(sel_getUid("setToolTip:"),function(_1b,_1c,_1d){
with(_1b){
if(objj_msgSend(_view,"respondsToSelector:",sel_getUid("setToolTip:"))){
objj_msgSend(_view,"setToolTip:",_1d);
}
_toolTip=_1d;
}
}),new objj_method(sel_getUid("tag"),function(_1e,_1f){
with(_1e){
if(objj_msgSend(_view,"respondsToSelector:",sel_getUid("tag"))){
return objj_msgSend(_view,"tag");
}
return _tag;
}
}),new objj_method(sel_getUid("setTag:"),function(_20,_21,_22){
with(_20){
if(objj_msgSend(_view,"respondsToSelector:",sel_getUid("setTag:"))){
objj_msgSend(_view,"setTag:",_22);
}
_tag=_22;
}
}),new objj_method(sel_getUid("target"),function(_23,_24){
with(_23){
if(_view){
return objj_msgSend(_view,"respondsToSelector:",sel_getUid("target"))?objj_msgSend(_view,"target"):nil;
}
return _target;
}
}),new objj_method(sel_getUid("setTarget:"),function(_25,_26,_27){
with(_25){
if(!_view){
_target=_27;
}else{
if(objj_msgSend(_view,"respondsToSelector:",sel_getUid("setTarget:"))){
objj_msgSend(_view,"setTarget:",_27);
}
}
}
}),new objj_method(sel_getUid("action"),function(_28,_29){
with(_28){
if(_view){
return objj_msgSend(_view,"respondsToSelector:",sel_getUid("action"))?objj_msgSend(_view,"action"):nil;
}
return _action;
}
}),new objj_method(sel_getUid("setAction:"),function(_2a,_2b,_2c){
with(_2a){
if(!_view){
_action=_2c;
}else{
if(objj_msgSend(_view,"respondsToSelector:",sel_getUid("setAction:"))){
objj_msgSend(_view,"setAction:",_2c);
}
}
}
}),new objj_method(sel_getUid("isEnabled"),function(_2d,_2e){
with(_2d){
if(objj_msgSend(_view,"respondsToSelector:",sel_getUid("isEnabled"))){
return objj_msgSend(_view,"isEnabled");
}
return _isEnabled;
}
}),new objj_method(sel_getUid("setEnabled:"),function(_2f,_30,_31){
with(_2f){
if(objj_msgSend(_view,"respondsToSelector:",sel_getUid("setEnabled:"))){
objj_msgSend(_view,"setEnabled:",_31);
}
_isEnabled=_31;
}
}),new objj_method(sel_getUid("image"),function(_32,_33){
with(_32){
if(objj_msgSend(_view,"respondsToSelector:",sel_getUid("image"))){
return objj_msgSend(_view,"image");
}
return _image;
}
}),new objj_method(sel_getUid("setImage:"),function(_34,_35,_36){
with(_34){
if(objj_msgSend(_view,"respondsToSelector:",sel_getUid("setImage:"))){
objj_msgSend(_view,"setImage:",_36);
}
_image=_36;
if(!_image){
return;
}
if(_minSize.width===0&&_minSize.height===0&&_maxSize.width===0&&_maxSize.height===0){
var _37=objj_msgSend(_image,"size");
if(_37.width>0||_37.height>0){
objj_msgSend(_34,"setMinSize:",_37);
objj_msgSend(_34,"setMaxSize:",_37);
}
}
}
}),new objj_method(sel_getUid("setAlternateImage:"),function(_38,_39,_3a){
with(_38){
if(objj_msgSend(_view,"respondsToSelector:",sel_getUid("setAlternateImage:"))){
objj_msgSend(_view,"setAlternateImage:",_3a);
}
_alternateImage=_3a;
}
}),new objj_method(sel_getUid("alternateImage"),function(_3b,_3c){
with(_3b){
if(objj_msgSend(_view,"respondsToSelector:",sel_getUid("alternateIamge"))){
return objj_msgSend(_view,"alternateImage");
}
return _alternateImage;
}
}),new objj_method(sel_getUid("view"),function(_3d,_3e){
with(_3d){
return _view;
}
}),new objj_method(sel_getUid("setView:"),function(_3f,_40,_41){
with(_3f){
if(_view==_41){
return;
}
_view=_41;
if(_view){
if(_tag!==0&&objj_msgSend(_view,"respondsToSelector:",sel_getUid("setTag:"))){
objj_msgSend(_view,"setTag:",_tag);
}
_target=nil;
_action=nil;
}
}
}),new objj_method(sel_getUid("minSize"),function(_42,_43){
with(_42){
return _minSize;
}
}),new objj_method(sel_getUid("setMinSize:"),function(_44,_45,_46){
with(_44){
if(!_46.height||!_46.width){
return;
}
_minSize=CGSizeMakeCopy(_46);
_maxSize=CGSizeMake(MAX(_minSize.width,_maxSize.width),MAX(_minSize.height,_maxSize.height));
}
}),new objj_method(sel_getUid("maxSize"),function(_47,_48){
with(_47){
return _maxSize;
}
}),new objj_method(sel_getUid("setMaxSize:"),function(_49,_4a,_4b){
with(_49){
if(!_4b.height||!_4b.width){
return;
}
_maxSize=CGSizeMakeCopy(_4b);
_minSize=CGSizeMake(MIN(_minSize.width,_maxSize.width),MIN(_minSize.height,_maxSize.height));
}
}),new objj_method(sel_getUid("visibilityPriority"),function(_4c,_4d){
with(_4c){
return _visibilityPriority;
}
}),new objj_method(sel_getUid("setVisibilityPriority:"),function(_4e,_4f,_50){
with(_4e){
_visibilityPriority=_50;
}
}),new objj_method(sel_getUid("validate"),function(_51,_52){
with(_51){
var _53=objj_msgSend(_51,"action"),_54=objj_msgSend(_51,"target");
if(_view){
if(objj_msgSend(_54,"respondsToSelector:",sel_getUid("validateToolbarItem:"))){
objj_msgSend(_51,"setEnabled:",objj_msgSend(_54,"validateToolbarItem:",_51));
}
return;
}
if(!_53){
return objj_msgSend(_51,"setEnabled:",NO);
}
if(_54&&!objj_msgSend(_54,"respondsToSelector:",_53)){
return objj_msgSend(_51,"setEnabled:",NO);
}
_54=objj_msgSend(CPApp,"targetForAction:to:from:",_53,_54,_51);
if(!_54){
return objj_msgSend(_51,"setEnabled:",NO);
}
if(objj_msgSend(_54,"respondsToSelector:",sel_getUid("validateToolbarItem:"))){
objj_msgSend(_51,"setEnabled:",objj_msgSend(_54,"validateToolbarItem:",_51));
}else{
objj_msgSend(_51,"setEnabled:",YES);
}
}
}),new objj_method(sel_getUid("autovalidates"),function(_55,_56){
with(_55){
return _autovalidates;
}
}),new objj_method(sel_getUid("setAutovalidates:"),function(_57,_58,_59){
with(_57){
_autovalidates=!!_59;
}
})]);
var _5a="CPToolbarItemItemIdentifierKey",_5b="CPToolbarItemLabelKey",_5c="CPToolbarItemPaletteLabelKey",_5d="CPToolbarItemToolTipKey",_5e="CPToolbarItemTagKey",_5f="CPToolbarItemTargetKey",_60="CPToolbarItemActionKey",_61="CPToolbarItemEnabledKey",_62="CPToolbarItemImageKey",_63="CPToolbarItemAlternateImageKey",_64="CPToolbarItemViewKey",_65="CPToolbarItemMinSizeKey",_66="CPToolbarItemMaxSizeKey",_67="CPToolbarItemVisibilityPriorityKey",_68="CPToolbarItemAutovalidatesKey";
var _1=objj_getClass("CPToolbarItem");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"CPToolbarItem\"");
}
var _2=_1.isa;
class_addMethods(_1,[new objj_method(sel_getUid("initWithCoder:"),function(_69,_6a,_6b){
with(_69){
_69=objj_msgSendSuper({receiver:_69,super_class:objj_getClass("CPToolbarItem").super_class},"init");
if(_69){
_itemIdentifier=objj_msgSend(_6b,"decodeObjectForKey:",_5a);
_minSize=objj_msgSend(_6b,"decodeSizeForKey:",_65);
_maxSize=objj_msgSend(_6b,"decodeSizeForKey:",_66);
objj_msgSend(_69,"setLabel:",objj_msgSend(_6b,"decodeObjectForKey:",_5b));
objj_msgSend(_69,"setPaletteLabel:",objj_msgSend(_6b,"decodeObjectForKey:",_5c));
objj_msgSend(_69,"setToolTip:",objj_msgSend(_6b,"decodeObjectForKey:",_5d));
objj_msgSend(_69,"setTag:",objj_msgSend(_6b,"decodeObjectForKey:",_5e));
objj_msgSend(_69,"setTarget:",objj_msgSend(_6b,"decodeObjectForKey:",_5f));
objj_msgSend(_69,"setAction:",CPSelectorFromString(objj_msgSend(_6b,"decodeObjectForKey:",_60)));
objj_msgSend(_69,"setEnabled:",objj_msgSend(_6b,"decodeBoolForKey:",_61));
objj_msgSend(_69,"setImage:",objj_msgSend(_6b,"decodeObjectForKey:",_62));
objj_msgSend(_69,"setAlternateImage:",objj_msgSend(_6b,"decodeObjectForKey:",_63));
objj_msgSend(_69,"setView:",objj_msgSend(_6b,"decodeObjectForKey:",_64));
objj_msgSend(_69,"setVisibilityPriority:",objj_msgSend(_6b,"decodeIntForKey:",_67));
objj_msgSend(_69,"setAutovalidates:",objj_msgSend(_6b,"decodeBoolForKey:",_68));
}
return _69;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_6c,_6d,_6e){
with(_6c){
objj_msgSend(_6e,"encodeObject:forKey:",_itemIdentifier,_5a);
objj_msgSend(_6e,"encodeObject:forKey:",objj_msgSend(_6c,"label"),_5b);
objj_msgSend(_6e,"encodeObject:forKey:",objj_msgSend(_6c,"paletteLabel"),_5c);
objj_msgSend(_6e,"encodeObject:forKey:",objj_msgSend(_6c,"toolTip"),_5d);
objj_msgSend(_6e,"encodeObject:forKey:",objj_msgSend(_6c,"tag"),_5e);
objj_msgSend(_6e,"encodeObject:forKey:",objj_msgSend(_6c,"target"),_5f);
objj_msgSend(_6e,"encodeObject:forKey:",objj_msgSend(_6c,"action"),_60);
objj_msgSend(_6e,"encodeObject:forKey:",objj_msgSend(_6c,"isEnabled"),_61);
objj_msgSend(_6e,"encodeObject:forKey:",objj_msgSend(_6c,"image"),_62);
objj_msgSend(_6e,"encodeObject:forKey:",objj_msgSend(_6c,"alternateImage"),_63);
objj_msgSend(_6e,"encodeObject:forKey:",objj_msgSend(_6c,"view"),_64);
objj_msgSend(_6e,"encodeSize:forKey:",objj_msgSend(_6c,"minSize"),_65);
objj_msgSend(_6e,"encodeSize:forKey:",objj_msgSend(_6c,"maxSize"),_66);
objj_msgSend(_6e,"encodeObject:forKey:",objj_msgSend(_6c,"visibilityPriority"),_67);
objj_msgSend(_6e,"encodeBool:forKey:",objj_msgSend(_6c,"autovalidates"),_68);
}
})]);
var _1=objj_getClass("CPToolbarItem");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"CPToolbarItem\"");
}
var _2=_1.isa;
class_addMethods(_1,[new objj_method(sel_getUid("copy"),function(_6f,_70){
with(_6f){
var _71=objj_msgSend(objj_msgSend(objj_msgSend(_6f,"class"),"alloc"),"initWithItemIdentifier:",_itemIdentifier);
if(_view){
objj_msgSend(_71,"setView:",objj_msgSend(CPKeyedUnarchiver,"unarchiveObjectWithData:",objj_msgSend(CPKeyedArchiver,"archivedDataWithRootObject:",_view)));
}
objj_msgSend(_71,"_setToolbar:",_toolbar);
objj_msgSend(_71,"setLabel:",_label);
objj_msgSend(_71,"setPaletteLabel:",_paletteLabel);
objj_msgSend(_71,"setToolTip:",objj_msgSend(_6f,"toolTip"));
objj_msgSend(_71,"setTag:",objj_msgSend(_6f,"tag"));
objj_msgSend(_71,"setTarget:",objj_msgSend(_6f,"target"));
objj_msgSend(_71,"setAction:",objj_msgSend(_6f,"action"));
objj_msgSend(_71,"setEnabled:",objj_msgSend(_6f,"isEnabled"));
objj_msgSend(_71,"setImage:",objj_msgSend(_6f,"image"));
objj_msgSend(_71,"setAlternateImage:",objj_msgSend(_6f,"alternateImage"));
objj_msgSend(_71,"setMinSize:",_minSize);
objj_msgSend(_71,"setMaxSize:",_maxSize);
objj_msgSend(_71,"setVisibilityPriority:",objj_msgSend(_6f,"visibilityPriority"));
objj_msgSend(_71,"setAutovalidates:",objj_msgSend(_6f,"autovalidates"));
return _71;
}
})]);
var _1=objj_getClass("CPToolbarItem");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"CPToolbarItem\"");
}
var _2=_1.isa;
class_addMethods(_2,[new objj_method(sel_getUid("_standardItemWithItemIdentifier:"),function(_72,_73,_74){
with(_72){
switch(_74){
case CPToolbarSeparatorItemIdentifier:
return objj_msgSend(_CPToolbarSeparatorItem,"new");
case CPToolbarSpaceItemIdentifier:
return objj_msgSend(_CPToolbarSpaceItem,"new");
case CPToolbarFlexibleSpaceItemIdentifier:
return objj_msgSend(_CPToolbarFlexibleSpaceItem,"new");
case CPToolbarShowColorsItemIdentifier:
return objj_msgSend(_CPToolbarShowColorsItem,"new");
case CPToolbarShowFontsItemIdentifier:
return nil;
case CPToolbarCustomizeToolbarItemIdentifier:
return nil;
case CPToolbarPrintItemIdentifier:
return nil;
}
return nil;
}
})]);
objj_executeFile("_CPToolbarFlexibleSpaceItem.j",YES);
objj_executeFile("_CPToolbarShowColorsItem.j",YES);
objj_executeFile("_CPToolbarSeparatorItem.j",YES);
objj_executeFile("_CPToolbarSpaceItem.j",YES);
p;12;CPTreeNode.jt;3869;@STATIC;1.0;I;21;Foundation/CPObject.jI;24;Foundation/CPIndexPath.jt;3795;
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("Foundation/CPIndexPath.j",NO);
var _1=objj_allocateClassPair(CPObject,"CPTreeNode"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_representedObject"),new objj_ivar("_parentNode"),new objj_ivar("_childNodes")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("representedObject"),function(_3,_4){
with(_3){
return _representedObject;
}
}),new objj_method(sel_getUid("parentNode"),function(_5,_6){
with(_5){
return _parentNode;
}
}),new objj_method(sel_getUid("initWithRepresentedObject:"),function(_7,_8,_9){
with(_7){
_7=objj_msgSendSuper({receiver:_7,super_class:objj_getClass("CPTreeNode").super_class},"init");
if(_7){
_representedObject=_9;
_childNodes=[];
}
return _7;
}
}),new objj_method(sel_getUid("isLeaf"),function(_a,_b){
with(_a){
return objj_msgSend(_childNodes,"count")<=0;
}
}),new objj_method(sel_getUid("childNodes"),function(_c,_d){
with(_c){
return objj_msgSend(_childNodes,"copy");
}
}),new objj_method(sel_getUid("mutableChildNodes"),function(_e,_f){
with(_e){
return objj_msgSend(_e,"mutableArrayValueForKey:","childNodes");
}
}),new objj_method(sel_getUid("insertObject:inChildNodesAtIndex:"),function(_10,_11,_12,_13){
with(_10){
objj_msgSend(objj_msgSend(_12._parentNode,"mutableChildNodes"),"removeObjectIdenticalTo:",_12);
_12._parentNode=_10;
objj_msgSend(_childNodes,"insertObject:atIndex:",_12,_13);
}
}),new objj_method(sel_getUid("removeObjectFromChildNodesAtIndex:"),function(_14,_15,_16){
with(_14){
objj_msgSend(_childNodes,"objectAtIndex:",_16)._parentNode=nil;
objj_msgSend(_childNodes,"removeObjectAtIndex:",_16);
}
}),new objj_method(sel_getUid("replaceObjectFromChildNodesAtIndex:withObject:"),function(_17,_18,_19,_1a){
with(_17){
var _1b=objj_msgSend(_childNodes,"objectAtIndex:",_19);
_1b._parentNode=nil;
_1a._parentNode=_17;
objj_msgSend(_childNodes,"replaceObjectAtIndex:withObject:",_19,_1a);
}
}),new objj_method(sel_getUid("objectInChildNodesAtIndex:"),function(_1c,_1d,_1e){
with(_1c){
return _childNodes[_1e];
}
}),new objj_method(sel_getUid("sortWithSortDescriptors:recursively:"),function(_1f,_20,_21,_22){
with(_1f){
objj_msgSend(_childNodes,"sortUsingDescriptors:",_21);
if(!_22){
return;
}
var _23=objj_msgSend(_childNodes,"count");
while(_23--){
objj_msgSend(_childNodes[_23],"sortWithSortDescriptors:recursively:",_21,YES);
}
}
}),new objj_method(sel_getUid("descendantNodeAtIndexPath:"),function(_24,_25,_26){
with(_24){
var _27=0,_28=objj_msgSend(_26,"length"),_29=_24;
for(;_27<_28;++_27){
_29=objj_msgSend(_29,"objectInChildNodesAtIndex:",objj_msgSend(_26,"indexAtPosition:",_27));
}
return _29;
}
})]);
class_addMethods(_2,[new objj_method(sel_getUid("treeNodeWithRepresentedObject:"),function(_2a,_2b,_2c){
with(_2a){
return objj_msgSend(objj_msgSend(_2a,"alloc"),"initWithRepresentedObject:",_2c);
}
})]);
var _2d="CPTreeNodeRepresentedObjectKey",_2e="CPTreeNodeParentNodeKey",_2f="CPTreeNodeChildNodesKey";
var _1=objj_getClass("CPTreeNode");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"CPTreeNode\"");
}
var _2=_1.isa;
class_addMethods(_1,[new objj_method(sel_getUid("initWithCoder:"),function(_30,_31,_32){
with(_30){
_30=objj_msgSendSuper({receiver:_30,super_class:objj_getClass("CPTreeNode").super_class},"init");
if(_30){
_representedObject=objj_msgSend(_32,"decodeObjectForKey:",_2d);
_parentNode=objj_msgSend(_32,"decodeObjectForKey:",_2e);
_childNodes=objj_msgSend(_32,"decodeObjectForKey:",_2f);
}
return _30;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_33,_34,_35){
with(_33){
objj_msgSend(_35,"encodeObject:forKey:",_representedObject,_2d);
objj_msgSend(_35,"encodeConditionalObject:forKey:",_parentNode,_2e);
objj_msgSend(_35,"encodeObject:forKey:",_childNodes,_2f);
}
})]);
p;8;CPView.jt;63757;@STATIC;1.0;I;20;Foundation/CPArray.jI;26;Foundation/CPObjJRuntime.jI;18;Foundation/CPSet.ji;19;CGAffineTransform.ji;12;CGGeometry.ji;9;CPColor.ji;12;CPGeometry.ji;19;CPGraphicsContext.ji;13;CPResponder.ji;9;CPTheme.ji;18;_CPDisplayServer.jt;63509;
objj_executeFile("Foundation/CPArray.j",NO);
objj_executeFile("Foundation/CPObjJRuntime.j",NO);
objj_executeFile("Foundation/CPSet.j",NO);
objj_executeFile("CGAffineTransform.j",YES);
objj_executeFile("CGGeometry.j",YES);
objj_executeFile("CPColor.j",YES);
objj_executeFile("CPGeometry.j",YES);
objj_executeFile("CPGraphicsContext.j",YES);
objj_executeFile("CPResponder.j",YES);
objj_executeFile("CPTheme.j",YES);
objj_executeFile("_CPDisplayServer.j",YES);
CPViewNotSizable=0;
CPViewMinXMargin=1;
CPViewWidthSizable=2;
CPViewMaxXMargin=4;
CPViewMinYMargin=8;
CPViewHeightSizable=16;
CPViewMaxYMargin=32;
CPViewBoundsDidChangeNotification="CPViewBoundsDidChangeNotification";
CPViewFrameDidChangeNotification="CPViewFrameDidChangeNotification";
var _1=nil,_2=nil;
var _3=nil,_4=0,_5=1,_6=2,_7=3,_8=4;
var _9={},_a=1<<0,_b=1<<1;
var _c=objj_allocateClassPair(CPResponder,"CPView"),_d=_c.isa;
class_addIvars(_c,[new objj_ivar("_window"),new objj_ivar("_superview"),new objj_ivar("_subviews"),new objj_ivar("_graphicsContext"),new objj_ivar("_tag"),new objj_ivar("_frame"),new objj_ivar("_bounds"),new objj_ivar("_boundsTransform"),new objj_ivar("_inverseBoundsTransform"),new objj_ivar("_registeredDraggedTypes"),new objj_ivar("_registeredDraggedTypesArray"),new objj_ivar("_isHidden"),new objj_ivar("_hitTests"),new objj_ivar("_clipsToBounds"),new objj_ivar("_postsFrameChangedNotifications"),new objj_ivar("_postsBoundsChangedNotifications"),new objj_ivar("_inhibitFrameAndBoundsChangedNotifications"),new objj_ivar("_DOMElement"),new objj_ivar("_DOMContentsElement"),new objj_ivar("_DOMImageParts"),new objj_ivar("_DOMImageSizes"),new objj_ivar("_backgroundType"),new objj_ivar("_dirtyRect"),new objj_ivar("_opacity"),new objj_ivar("_backgroundColor"),new objj_ivar("_autoresizesSubviews"),new objj_ivar("_autoresizingMask"),new objj_ivar("_layer"),new objj_ivar("_wantsLayer"),new objj_ivar("_isInFullScreenMode"),new objj_ivar("_fullScreenModeState"),new objj_ivar("_needsLayout"),new objj_ivar("_ephemeralSubviews"),new objj_ivar("_theme"),new objj_ivar("_themeClass"),new objj_ivar("_themeAttributes"),new objj_ivar("_themeState"),new objj_ivar("_ephemeralSubviewsForNames"),new objj_ivar("_ephereralSubviews"),new objj_ivar("_nextKeyView"),new objj_ivar("_previousKeyView"),new objj_ivar("_viewClassFlags"),new objj_ivar("_toolTip")]);
objj_registerClassPair(_c);
class_addMethods(_c,[new objj_method(sel_getUid("toolTip"),function(_e,_f){
with(_e){
return _toolTip;
}
}),new objj_method(sel_getUid("setToolTip:"),function(_10,_11,_12){
with(_10){
_toolTip=_12;
}
}),new objj_method(sel_getUid("setupViewFlags"),function(_13,_14){
with(_13){
var _15=objj_msgSend(_13,"class"),_16=objj_msgSend(_15,"UID");
if(_9[_16]===undefined){
var _17=0;
if(objj_msgSend(_15,"instanceMethodForSelector:",sel_getUid("drawRect:"))!==objj_msgSend(CPView,"instanceMethodForSelector:",sel_getUid("drawRect:"))){
_17|=_a;
}
if(objj_msgSend(_15,"instanceMethodForSelector:",sel_getUid("layoutSubviews"))!==objj_msgSend(CPView,"instanceMethodForSelector:",sel_getUid("layoutSubviews"))){
_17|=_b;
}
_9[_16]=_17;
}
_viewClassFlags=_9[_16];
}
}),new objj_method(sel_getUid("init"),function(_18,_19){
with(_18){
return objj_msgSend(_18,"initWithFrame:",CGRectMakeZero());
}
}),new objj_method(sel_getUid("initWithFrame:"),function(_1a,_1b,_1c){
with(_1a){
_1a=objj_msgSendSuper({receiver:_1a,super_class:objj_getClass("CPView").super_class},"init");
if(_1a){
var _1d=(_1c.size.width),_1e=(_1c.size.height);
_subviews=[];
_registeredDraggedTypes=objj_msgSend(CPSet,"set");
_registeredDraggedTypesArray=[];
_tag=-1;
_frame={origin:{x:_1c.origin.x,y:_1c.origin.y},size:{width:_1c.size.width,height:_1c.size.height}};
_bounds={origin:{x:0,y:0},size:{width:_1d,height:_1e}};
_autoresizingMask=CPViewNotSizable;
_autoresizesSubviews=YES;
_clipsToBounds=YES;
_opacity=1;
_isHidden=NO;
_hitTests=YES;
_DOMElement=_3.cloneNode(false);
if(NULL){
var _1f={x:CGPointMake((_1c.origin.x),(_1c.origin.y)).x*NULL.a+CGPointMake((_1c.origin.x),(_1c.origin.y)).y*NULL.c+NULL.tx,y:CGPointMake((_1c.origin.x),(_1c.origin.y)).x*NULL.b+CGPointMake((_1c.origin.x),(_1c.origin.y)).y*NULL.d+NULL.ty};
}else{
var _1f={x:(_1c.origin.x),y:(_1c.origin.y)};
}
_DOMElement.style.left=ROUND(_1f.x)+"px";
_DOMElement.style.top=ROUND(_1f.y)+"px";
_DOMElement.style.width=MAX(0,ROUND(_1d))+"px";
_DOMElement.style.height=MAX(0,ROUND(_1e))+"px";
_DOMImageParts=[];
_DOMImageSizes=[];
_theme=objj_msgSend(CPTheme,"defaultTheme");
_themeState=CPThemeStateNormal;
objj_msgSend(_1a,"setupViewFlags");
objj_msgSend(_1a,"_loadThemeAttributes");
}
return _1a;
}
}),new objj_method(sel_getUid("superview"),function(_20,_21){
with(_20){
return _superview;
}
}),new objj_method(sel_getUid("subviews"),function(_22,_23){
with(_22){
return objj_msgSend(_subviews,"copy");
}
}),new objj_method(sel_getUid("window"),function(_24,_25){
with(_24){
return _window;
}
}),new objj_method(sel_getUid("addSubview:"),function(_26,_27,_28){
with(_26){
objj_msgSend(_26,"_insertSubview:atIndex:",_28,CPNotFound);
}
}),new objj_method(sel_getUid("addSubview:positioned:relativeTo:"),function(_29,_2a,_2b,_2c,_2d){
with(_29){
var _2e=_2d?objj_msgSend(_subviews,"indexOfObjectIdenticalTo:",_2d):CPNotFound;
if(_2e===CPNotFound){
_2e=(_2c===CPWindowAbove)?objj_msgSend(_subviews,"count"):0;
}else{
if(_2c===CPWindowAbove){
++_2e;
}
}
objj_msgSend(_29,"_insertSubview:atIndex:",_2b,_2e);
}
}),new objj_method(sel_getUid("_insertSubview:atIndex:"),function(_2f,_30,_31,_32){
with(_2f){
var _33=_subviews.length;
objj_msgSend(objj_msgSend(_2f,"window"),"_dirtyKeyViewLoop");
if(_31._superview==_2f){
var _34=objj_msgSend(_subviews,"indexOfObjectIdenticalTo:",_31);
if(_34===_32||_34===_33-1&&_32===_33){
return;
}
objj_msgSend(_subviews,"removeObjectAtIndex:",_34);
_DOMElement.removeChild(_31._DOMElement);
if(_32>_34){
--_32;
}
--_33;
}else{
objj_msgSend(_31,"removeFromSuperview");
objj_msgSend(_31,"_setWindow:",_window);
objj_msgSend(_31,"viewWillMoveToSuperview:",_2f);
_31._superview=_2f;
}
if(_32===CPNotFound||_32>=_33){
_subviews.push(_31);
_DOMElement.appendChild(_31._DOMElement);
}else{
_subviews.splice(_32,0,_31);
_DOMElement.insertBefore(_31._DOMElement,_subviews[_32+1]._DOMElement);
}
objj_msgSend(_31,"setNextResponder:",_2f);
objj_msgSend(_31,"viewDidMoveToSuperview");
objj_msgSend(_2f,"didAddSubview:",_31);
}
}),new objj_method(sel_getUid("didAddSubview:"),function(_35,_36,_37){
with(_35){
}
}),new objj_method(sel_getUid("removeFromSuperview"),function(_38,_39){
with(_38){
if(!_superview){
return;
}
objj_msgSend(objj_msgSend(_38,"window"),"_dirtyKeyViewLoop");
objj_msgSend(_superview,"willRemoveSubview:",_38);
objj_msgSend(_superview._subviews,"removeObject:",_38);
_superview._DOMElement.removeChild(_DOMElement);
_superview=nil;
objj_msgSend(_38,"_setWindow:",nil);
}
}),new objj_method(sel_getUid("replaceSubview:with:"),function(_3a,_3b,_3c,_3d){
with(_3a){
if(_3c._superview!=_3a){
return;
}
var _3e=objj_msgSend(_subviews,"indexOfObjectIdenticalTo:",_3c);
objj_msgSend(_3c,"removeFromSuperview");
objj_msgSend(_3a,"_insertSubview:atIndex:",_3d,_3e);
}
}),new objj_method(sel_getUid("setSubviews:"),function(_3f,_40,_41){
with(_3f){
if(!_41){
objj_msgSend(CPException,"raise:reason:",CPInvalidArgumentException,"newSubviews cannot be nil in -[CPView setSubviews:]");
}
if(objj_msgSend(_subviews,"isEqual:",_41)){
return;
}
if(objj_msgSend(_subviews,"count")===0){
var _42=0,_43=objj_msgSend(_41,"count");
for(;_42<_43;++_42){
objj_msgSend(_3f,"addSubview:",_41[_42]);
}
return;
}
if(objj_msgSend(_41,"count")===0){
var _43=objj_msgSend(_subviews,"count");
while(_43--){
objj_msgSend(_subviews[_43],"removeFromSuperview");
}
return;
}
var _44=objj_msgSend(CPMutableSet,"setWithArray:",_subviews);
objj_msgSend(_44,"removeObjectsInArray:",_41);
objj_msgSend(_44,"makeObjectsPerformSelector:",sel_getUid("removeFromSuperview"));
var _45=objj_msgSend(CPMutableSet,"setWithArray:",_41);
objj_msgSend(_45,"removeObjectsInArray:",_subviews);
var _46=nil,_47=objj_msgSend(_45,"objectEnumerator");
while(_46=objj_msgSend(_47,"nextObject")){
objj_msgSend(_3f,"addSubview:",_46);
}
if(objj_msgSend(_subviews,"isEqual:",_41)){
return;
}
_subviews=objj_msgSend(_41,"copy");
var _42=0,_43=objj_msgSend(_subviews,"count");
for(;_42<_43;++_42){
var _48=_subviews[_42];
_DOMElement.removeChild(_48._DOMElement);
_DOMElement.appendChild(_48._DOMElement);
}
}
}),new objj_method(sel_getUid("_setWindow:"),function(_49,_4a,_4b){
with(_49){
if(_window===_4b){
return;
}
objj_msgSend(objj_msgSend(_49,"window"),"_dirtyKeyViewLoop");
if(objj_msgSend(_window,"firstResponder")===_49){
objj_msgSend(_window,"makeFirstResponder:",nil);
}
objj_msgSend(_49,"viewWillMoveToWindow:",_4b);
if(_registeredDraggedTypes){
objj_msgSend(_window,"_noteUnregisteredDraggedTypes:",_registeredDraggedTypes);
objj_msgSend(_4b,"_noteRegisteredDraggedTypes:",_registeredDraggedTypes);
}
_window=_4b;
var _4c=objj_msgSend(_subviews,"count");
while(_4c--){
objj_msgSend(_subviews[_4c],"_setWindow:",_4b);
}
objj_msgSend(_49,"viewDidMoveToWindow");
objj_msgSend(objj_msgSend(_49,"window"),"_dirtyKeyViewLoop");
}
}),new objj_method(sel_getUid("isDescendantOf:"),function(_4d,_4e,_4f){
with(_4d){
var _50=_4d;
do{
if(_50==_4f){
return YES;
}
}while(_50=objj_msgSend(_50,"superview"));
return NO;
}
}),new objj_method(sel_getUid("viewDidMoveToSuperview"),function(_51,_52){
with(_51){
objj_msgSend(_51,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("viewDidMoveToWindow"),function(_53,_54){
with(_53){
}
}),new objj_method(sel_getUid("viewWillMoveToSuperview:"),function(_55,_56,_57){
with(_55){
}
}),new objj_method(sel_getUid("viewWillMoveToWindow:"),function(_58,_59,_5a){
with(_58){
}
}),new objj_method(sel_getUid("willRemoveSubview:"),function(_5b,_5c,_5d){
with(_5b){
}
}),new objj_method(sel_getUid("enclosingMenuItem"),function(_5e,_5f){
with(_5e){
var _60=_5e;
while(_60&&!objj_msgSend(_60,"isKindOfClass:",objj_msgSend(_CPMenuItemView,"class"))){
_60=objj_msgSend(_60,"superview");
}
if(_60){
return _60._menuItem;
}
return nil;
}
}),new objj_method(sel_getUid("setTag:"),function(_61,_62,_63){
with(_61){
_tag=_63;
}
}),new objj_method(sel_getUid("tag"),function(_64,_65){
with(_64){
return _tag;
}
}),new objj_method(sel_getUid("viewWithTag:"),function(_66,_67,_68){
with(_66){
if(objj_msgSend(_66,"tag")==_68){
return _66;
}
var _69=0,_6a=_subviews.length;
for(;_69<_6a;++_69){
var _6b=objj_msgSend(_subviews[_69],"viewWithTag:",_68);
if(_6b){
return _6b;
}
}
return nil;
}
}),new objj_method(sel_getUid("isFlipped"),function(_6c,_6d){
with(_6c){
return YES;
}
}),new objj_method(sel_getUid("setFrame:"),function(_6e,_6f,_70){
with(_6e){
if(((_frame.origin.x==_70.origin.x&&_frame.origin.y==_70.origin.y)&&(_frame.size.width==_70.size.width&&_frame.size.height==_70.size.height))){
return;
}
_inhibitFrameAndBoundsChangedNotifications=YES;
objj_msgSend(_6e,"setFrameOrigin:",_70.origin);
objj_msgSend(_6e,"setFrameSize:",_70.size);
_inhibitFrameAndBoundsChangedNotifications=NO;
if(_postsFrameChangedNotifications){
objj_msgSend(_1,"postNotificationName:object:",CPViewFrameDidChangeNotification,_6e);
}
}
}),new objj_method(sel_getUid("frame"),function(_71,_72){
with(_71){
return {origin:{x:_frame.origin.x,y:_frame.origin.y},size:{width:_frame.size.width,height:_frame.size.height}};
}
}),new objj_method(sel_getUid("frameOrigin"),function(_73,_74){
with(_73){
return {x:_frame.origin.x,y:_frame.origin.y};
}
}),new objj_method(sel_getUid("frameSize"),function(_75,_76){
with(_75){
return {width:_frame.size.width,height:_frame.size.height};
}
}),new objj_method(sel_getUid("setCenter:"),function(_77,_78,_79){
with(_77){
objj_msgSend(_77,"setFrameOrigin:",CGPointMake(_79.x-_frame.size.width/2,_79.y-_frame.size.height/2));
}
}),new objj_method(sel_getUid("center"),function(_7a,_7b){
with(_7a){
return CGPointMake(_frame.size.width/2+_frame.origin.x,_frame.size.height/2+_frame.origin.y);
}
}),new objj_method(sel_getUid("setFrameOrigin:"),function(_7c,_7d,_7e){
with(_7c){
var _7f=_frame.origin;
if(!_7e||(_7f.x==_7e.x&&_7f.y==_7e.y)){
return;
}
_7f.x=_7e.x;
_7f.y=_7e.y;
if(_postsFrameChangedNotifications&&!_inhibitFrameAndBoundsChangedNotifications){
objj_msgSend(_1,"postNotificationName:object:",CPViewFrameDidChangeNotification,_7c);
}
var _80=_superview?_superview._boundsTransform:NULL;
if(_80){
var _81={x:CGPointMake(_7f.x,_7f.y).x*_80.a+CGPointMake(_7f.x,_7f.y).y*_80.c+_80.tx,y:CGPointMake(_7f.x,_7f.y).x*_80.b+CGPointMake(_7f.x,_7f.y).y*_80.d+_80.ty};
}else{
var _81={x:_7f.x,y:_7f.y};
}
_DOMElement.style.left=ROUND(_81.x)+"px";
_DOMElement.style.top=ROUND(_81.y)+"px";
}
}),new objj_method(sel_getUid("setFrameSize:"),function(_82,_83,_84){
with(_82){
var _85=_frame.size;
if(!_84||(_85.width==_84.width&&_85.height==_84.height)){
return;
}
var _86={width:_85.width,height:_85.height};
_85.width=_84.width;
_85.height=_84.height;
if(YES){
_bounds.size.width=_84.width;
_bounds.size.height=_84.height;
}
if(_layer){
objj_msgSend(_layer,"_owningViewBoundsChanged");
}
if(_autoresizesSubviews){
objj_msgSend(_82,"resizeSubviewsWithOldSize:",_86);
}
objj_msgSend(_82,"setNeedsLayout");
objj_msgSend(_82,"setNeedsDisplay:",YES);
_DOMElement.style.width=MAX(0,ROUND(_85.width))+"px";
_DOMElement.style.height=MAX(0,ROUND(_85.height))+"px";
if(_DOMContentsElement){
_DOMContentsElement.width=MAX(0,ROUND(_85.width));
_DOMContentsElement.height=MAX(0,ROUND(_85.height));
_DOMContentsElement.style.width=MAX(0,ROUND(_85.width))+"px";
_DOMContentsElement.style.height=MAX(0,ROUND(_85.height))+"px";
}
if(_backgroundType!==_4){
if(_backgroundType===_8){
_DOMImageParts[0].style.width=MAX(0,ROUND(_85.width))+"px";
_DOMImageParts[0].style.height=MAX(0,ROUND(_85.height))+"px";
}else{
var _87=objj_msgSend(objj_msgSend(_backgroundColor,"patternImage"),"imageSlices");
if(_backgroundType===_5){
_DOMImageParts[1].style.width=MAX(0,ROUND(_85.width))+"px";
_DOMImageParts[1].style.height=MAX(0,ROUND(_85.height-_DOMImageSizes[0].height-_DOMImageSizes[2].height))+"px";
}else{
if(_backgroundType===_6){
_DOMImageParts[1].style.width=MAX(0,ROUND(_85.width-_DOMImageSizes[0].width-_DOMImageSizes[2].width))+"px";
_DOMImageParts[1].style.height=MAX(0,ROUND(_85.height))+"px";
}else{
if(_backgroundType===_7){
var _88=_85.width-_DOMImageSizes[0].width-_DOMImageSizes[2].width,_89=_85.height-_DOMImageSizes[0].height-_DOMImageSizes[6].height;
_DOMImageParts[1].style.width=MAX(0,ROUND(_88))+"px";
_DOMImageParts[1].style.height=MAX(0,ROUND(_DOMImageSizes[0].height))+"px";
_DOMImageParts[3].style.width=MAX(0,ROUND(_DOMImageSizes[3].width))+"px";
_DOMImageParts[3].style.height=MAX(0,ROUND(_89))+"px";
_DOMImageParts[4].style.width=MAX(0,ROUND(_88))+"px";
_DOMImageParts[4].style.height=MAX(0,ROUND(_89))+"px";
_DOMImageParts[5].style.width=MAX(0,ROUND(_DOMImageSizes[5].width))+"px";
_DOMImageParts[5].style.height=MAX(0,ROUND(_89))+"px";
_DOMImageParts[7].style.width=MAX(0,ROUND(_88))+"px";
_DOMImageParts[7].style.height=MAX(0,ROUND(_DOMImageSizes[7].height))+"px";
}
}
}
}
}
if(_postsFrameChangedNotifications&&!_inhibitFrameAndBoundsChangedNotifications){
objj_msgSend(_1,"postNotificationName:object:",CPViewFrameDidChangeNotification,_82);
}
}
}),new objj_method(sel_getUid("setBounds:"),function(_8a,_8b,_8c){
with(_8a){
if(((_bounds.origin.x==_8c.origin.x&&_bounds.origin.y==_8c.origin.y)&&(_bounds.size.width==_8c.size.width&&_bounds.size.height==_8c.size.height))){
return;
}
_inhibitFrameAndBoundsChangedNotifications=YES;
objj_msgSend(_8a,"setBoundsOrigin:",_8c.origin);
objj_msgSend(_8a,"setBoundsSize:",_8c.size);
_inhibitFrameAndBoundsChangedNotifications=NO;
if(_postsBoundsChangedNotifications){
objj_msgSend(_1,"postNotificationName:object:",CPViewBoundsDidChangeNotification,_8a);
}
}
}),new objj_method(sel_getUid("bounds"),function(_8d,_8e){
with(_8d){
return {origin:{x:_bounds.origin.x,y:_bounds.origin.y},size:{width:_bounds.size.width,height:_bounds.size.height}};
}
}),new objj_method(sel_getUid("boundsOrigin"),function(_8f,_90){
with(_8f){
return {x:_bounds.origin.x,y:_bounds.origin.y};
}
}),new objj_method(sel_getUid("boundsSize"),function(_91,_92){
with(_91){
return {width:_bounds.size.width,height:_bounds.size.height};
}
}),new objj_method(sel_getUid("setBoundsOrigin:"),function(_93,_94,_95){
with(_93){
var _96=_bounds.origin;
if((_96.x==_95.x&&_96.y==_95.y)){
return;
}
_96.x=_95.x;
_96.y=_95.y;
if(_96.x!=0||_96.y!=0){
_boundsTransform={a:1,b:0,c:0,d:1,tx:-_96.x,ty:-_96.y};
_inverseBoundsTransform=CGAffineTransformInvert(_boundsTransform);
}else{
_boundsTransform=nil;
_inverseBoundsTransform=nil;
}
var _97=_subviews.length;
while(_97--){
var _98=_subviews[_97],_96=_98._frame.origin;
if(_boundsTransform){
var _99={x:CGPointMake(_96.x,_96.y).x*_boundsTransform.a+CGPointMake(_96.x,_96.y).y*_boundsTransform.c+_boundsTransform.tx,y:CGPointMake(_96.x,_96.y).x*_boundsTransform.b+CGPointMake(_96.x,_96.y).y*_boundsTransform.d+_boundsTransform.ty};
}else{
var _99={x:_96.x,y:_96.y};
}
_98._DOMElement.style.left=ROUND(_99.x)+"px";
_98._DOMElement.style.top=ROUND(_99.y)+"px";
}
if(_postsBoundsChangedNotifications&&!_inhibitFrameAndBoundsChangedNotifications){
objj_msgSend(_1,"postNotificationName:object:",CPViewBoundsDidChangeNotification,_93);
}
}
}),new objj_method(sel_getUid("setBoundsSize:"),function(_9a,_9b,_9c){
with(_9a){
var _9d=_bounds.size;
if((_9d.width==_9c.width&&_9d.height==_9c.height)){
return;
}
var _9e=_frame.size;
if(!(_9d.width==_9e.width&&_9d.height==_9e.height)){
var _9f=_bounds.origin;
_9f.x/=_9d.width/_9e.width;
_9f.y/=_9d.height/_9e.height;
}
_9d.width=_9c.width;
_9d.height=_9c.height;
if(!(_9d.width==_9e.width&&_9d.height==_9e.height)){
var _9f=_bounds.origin;
_9f.x*=_9d.width/_9e.width;
_9f.y*=_9d.height/_9e.height;
}
if(_postsBoundsChangedNotifications&&!_inhibitFrameAndBoundsChangedNotifications){
objj_msgSend(_1,"postNotificationName:object:",CPViewBoundsDidChangeNotification,_9a);
}
}
}),new objj_method(sel_getUid("resizeWithOldSuperviewSize:"),function(_a0,_a1,_a2){
with(_a0){
var _a3=objj_msgSend(_a0,"autoresizingMask");
if(_a3==CPViewNotSizable){
return;
}
var _a4=_superview._frame,_a5={origin:{x:_frame.origin.x,y:_frame.origin.y},size:{width:_frame.size.width,height:_frame.size.height}},dX=((_a4.size.width)-_a2.width)/(((_a3&CPViewMinXMargin)?1:0)+(_a3&CPViewWidthSizable?1:0)+(_a3&CPViewMaxXMargin?1:0)),dY=((_a4.size.height)-_a2.height)/((_a3&CPViewMinYMargin?1:0)+(_a3&CPViewHeightSizable?1:0)+(_a3&CPViewMaxYMargin?1:0));
if(_a3&CPViewMinXMargin){
_a5.origin.x+=dX;
}
if(_a3&CPViewWidthSizable){
_a5.size.width+=dX;
}
if(_a3&CPViewMinYMargin){
_a5.origin.y+=dY;
}
if(_a3&CPViewHeightSizable){
_a5.size.height+=dY;
}
objj_msgSend(_a0,"setFrame:",_a5);
}
}),new objj_method(sel_getUid("resizeSubviewsWithOldSize:"),function(_a6,_a7,_a8){
with(_a6){
var _a9=_subviews.length;
while(_a9--){
objj_msgSend(_subviews[_a9],"resizeWithOldSuperviewSize:",_a8);
}
}
}),new objj_method(sel_getUid("setAutoresizesSubviews:"),function(_aa,_ab,_ac){
with(_aa){
_autoresizesSubviews=!!_ac;
}
}),new objj_method(sel_getUid("autoresizesSubviews"),function(_ad,_ae){
with(_ad){
return _autoresizesSubviews;
}
}),new objj_method(sel_getUid("setAutoresizingMask:"),function(_af,_b0,_b1){
with(_af){
_autoresizingMask=_b1;
}
}),new objj_method(sel_getUid("autoresizingMask"),function(_b2,_b3){
with(_b2){
return _autoresizingMask;
}
}),new objj_method(sel_getUid("enterFullScreenMode"),function(_b4,_b5){
with(_b4){
return objj_msgSend(_b4,"enterFullScreenMode:withOptions:",nil,nil);
}
}),new objj_method(sel_getUid("enterFullScreenMode:withOptions:"),function(_b6,_b7,_b8,_b9){
with(_b6){
_fullScreenModeState=_ba(_b6);
var _bb=objj_msgSend(objj_msgSend(CPWindow,"alloc"),"initWithContentRect:styleMask:",objj_msgSend(objj_msgSend(CPPlatformWindow,"primaryPlatformWindow"),"contentBounds"),CPBorderlessWindowMask);
objj_msgSend(_bb,"setLevel:",CPScreenSaverWindowLevel);
objj_msgSend(_bb,"setAutoresizingMask:",CPViewWidthSizable|CPViewHeightSizable);
var _bc=objj_msgSend(_bb,"contentView");
objj_msgSend(_bc,"setBackgroundColor:",objj_msgSend(CPColor,"blackColor"));
objj_msgSend(_bc,"addSubview:",_b6);
objj_msgSend(_b6,"setAutoresizingMask:",CPViewWidthSizable|CPViewHeightSizable);
objj_msgSend(_b6,"setFrame:",CGRectMakeCopy(objj_msgSend(_bc,"bounds")));
objj_msgSend(_bb,"makeKeyAndOrderFront:",_b6);
objj_msgSend(_bb,"makeFirstResponder:",_b6);
_isInFullScreenMode=YES;
return YES;
}
}),new objj_method(sel_getUid("exitFullScreenMode"),function(_bd,_be){
with(_bd){
objj_msgSend(_bd,"exitFullScreenModeWithOptions:",nil);
}
}),new objj_method(sel_getUid("exitFullScreenModeWithOptions:"),function(_bf,_c0,_c1){
with(_bf){
if(!_isInFullScreenMode){
return;
}
_isInFullScreenMode=NO;
objj_msgSend(_bf,"setFrame:",_fullScreenModeState.frame);
objj_msgSend(_bf,"setAutoresizingMask:",_fullScreenModeState.autoresizingMask);
objj_msgSend(_fullScreenModeState.superview,"_insertSubview:atIndex:",_bf,_fullScreenModeState.index);
objj_msgSend(objj_msgSend(_bf,"window"),"orderOut:",_bf);
}
}),new objj_method(sel_getUid("isInFullScreenMode"),function(_c2,_c3){
with(_c2){
return _isInFullScreenMode;
}
}),new objj_method(sel_getUid("setHidden:"),function(_c4,_c5,_c6){
with(_c4){
_c6=!!_c6;
if(_isHidden===_c6){
return;
}
_isHidden=_c6;
_DOMElement.style.display=_isHidden?"none":"block";
if(_c6){
var _c7=objj_msgSend(_window,"firstResponder");
if(objj_msgSend(_c7,"isKindOfClass:",objj_msgSend(CPView,"class"))){
do{
if(_c4==_c7){
objj_msgSend(_window,"makeFirstResponder:",objj_msgSend(_c4,"nextValidKeyView"));
break;
}
}while(_c7=objj_msgSend(_c7,"superview"));
}
objj_msgSend(_c4,"_notifyViewDidHide");
}else{
objj_msgSend(_c4,"_notifyViewDidUnhide");
}
}
}),new objj_method(sel_getUid("_notifyViewDidHide"),function(_c8,_c9){
with(_c8){
objj_msgSend(_c8,"viewDidHide");
var _ca=objj_msgSend(_subviews,"count");
while(_ca--){
objj_msgSend(_subviews[_ca],"_notifyViewDidHide");
}
}
}),new objj_method(sel_getUid("_notifyViewDidUnhide"),function(_cb,_cc){
with(_cb){
objj_msgSend(_cb,"viewDidUnhide");
var _cd=objj_msgSend(_subviews,"count");
while(_cd--){
objj_msgSend(_subviews[_cd],"_notifyViewDidUnhide");
}
}
}),new objj_method(sel_getUid("isHidden"),function(_ce,_cf){
with(_ce){
return _isHidden;
}
}),new objj_method(sel_getUid("setClipsToBounds:"),function(_d0,_d1,_d2){
with(_d0){
if(_clipsToBounds===_d2){
return;
}
_clipsToBounds=_d2;
_DOMElement.style.overflow=_clipsToBounds?"hidden":"visible";
}
}),new objj_method(sel_getUid("clipsToBounds"),function(_d3,_d4){
with(_d3){
return _clipsToBounds;
}
}),new objj_method(sel_getUid("setAlphaValue:"),function(_d5,_d6,_d7){
with(_d5){
if(_opacity==_d7){
return;
}
_opacity=_d7;
if(CPFeatureIsCompatible(CPOpacityRequiresFilterFeature)){
if(_d7===1){
try{
_DOMElement.style.removeAttribute("filter");
}
catch(anException){
}
}else{
_DOMElement.style.filter="alpha(opacity="+_d7*100+")";
}
}else{
_DOMElement.style.opacity=_d7;
}
}
}),new objj_method(sel_getUid("alphaValue"),function(_d8,_d9){
with(_d8){
return _opacity;
}
}),new objj_method(sel_getUid("isHiddenOrHasHiddenAncestor"),function(_da,_db){
with(_da){
var _dc=_da;
while(_dc&&!objj_msgSend(_dc,"isHidden")){
_dc=objj_msgSend(_dc,"superview");
}
return _dc!==nil;
}
}),new objj_method(sel_getUid("_isVisible"),function(_dd,_de){
with(_dd){
return !objj_msgSend(_dd,"isHiddenOrHasHiddenAncestor")&&objj_msgSend(objj_msgSend(_dd,"window"),"isVisible");
}
}),new objj_method(sel_getUid("viewDidHide"),function(_df,_e0){
with(_df){
}
}),new objj_method(sel_getUid("viewDidUnhide"),function(_e1,_e2){
with(_e1){
}
}),new objj_method(sel_getUid("acceptsFirstMouse:"),function(_e3,_e4,_e5){
with(_e3){
return YES;
}
}),new objj_method(sel_getUid("hitTests"),function(_e6,_e7){
with(_e6){
return _hitTests;
}
}),new objj_method(sel_getUid("setHitTests:"),function(_e8,_e9,_ea){
with(_e8){
_hitTests=!!_ea;
}
}),new objj_method(sel_getUid("hitTest:"),function(_eb,_ec,_ed){
with(_eb){
if(_isHidden||!_hitTests||!CPRectContainsPoint(_frame,_ed)){
return nil;
}
var _ee=nil,i=_subviews.length,_ef={x:_ed.x-(_frame.origin.x),y:_ed.y-(_frame.origin.y)};
if(_inverseBoundsTransform){
_ef={x:_ef.x*_inverseBoundsTransform.a+_ef.y*_inverseBoundsTransform.c+_inverseBoundsTransform.tx,y:_ef.x*_inverseBoundsTransform.b+_ef.y*_inverseBoundsTransform.d+_inverseBoundsTransform.ty};
}
while(i--){
if(_ee=objj_msgSend(_subviews[i],"hitTest:",_ef)){
return _ee;
}
}
return _eb;
}
}),new objj_method(sel_getUid("needsPanelToBecomeKey"),function(_f0,_f1){
with(_f0){
return NO;
}
}),new objj_method(sel_getUid("mouseDownCanMoveWindow"),function(_f2,_f3){
with(_f2){
return !objj_msgSend(_f2,"isOpaque");
}
}),new objj_method(sel_getUid("mouseDown:"),function(_f4,_f5,_f6){
with(_f4){
if(objj_msgSend(_f4,"mouseDownCanMoveWindow")){
objj_msgSendSuper({receiver:_f4,super_class:objj_getClass("CPView").super_class},"mouseDown:",_f6);
}
}
}),new objj_method(sel_getUid("rightMouseDown:"),function(_f7,_f8,_f9){
with(_f7){
var _fa=objj_msgSend(_f7,"menuForEvent:",_f9);
if(_fa){
objj_msgSend(CPMenu,"popUpContextMenu:withEvent:forView:",_fa,_f9,_f7);
}else{
if(objj_msgSend(objj_msgSend(_f7,"nextResponder"),"isKindOfClass:",CPView)){
objj_msgSendSuper({receiver:_f7,super_class:objj_getClass("CPView").super_class},"rightMouseDown:",_f9);
}else{
objj_msgSend(objj_msgSend(objj_msgSend(_f9,"window"),"platformWindow"),"_propagateContextMenuDOMEvent:",YES);
}
}
}
}),new objj_method(sel_getUid("menuForEvent:"),function(_fb,_fc,_fd){
with(_fb){
return objj_msgSend(_fb,"menu")||objj_msgSend(objj_msgSend(_fb,"class"),"defaultMenu");
}
}),new objj_method(sel_getUid("setBackgroundColor:"),function(_fe,_ff,_100){
with(_fe){
if(_backgroundColor==_100){
return;
}
if(_100==objj_msgSend(CPNull,"null")){
_100=nil;
}
_backgroundColor=_100;
var _101=objj_msgSend(_backgroundColor,"patternImage"),_102=_backgroundColor&&(objj_msgSend(_backgroundColor,"patternImage")||objj_msgSend(_backgroundColor,"alphaComponent")>0),_103=_102&&objj_msgSend(_backgroundColor,"alphaComponent")<1,_104=CPFeatureIsCompatible(CPCSSRGBAFeature),_105=_103&&!_104,_106=0;
if(objj_msgSend(_101,"isThreePartImage")){
_backgroundType=objj_msgSend(_101,"isVertical")?_5:_6;
_106=3-_DOMImageParts.length;
}else{
if(objj_msgSend(_101,"isNinePartImage")){
_backgroundType=_7;
_106=9-_DOMImageParts.length;
}else{
_backgroundType=_105?_8:_4;
_106=(_105?1:0)-_DOMImageParts.length;
}
}
if(_106>0){
while(_106--){
var _107=_3.cloneNode(false);
_107.style.zIndex=-1000;
_DOMImageParts.push(_107);
_DOMElement.appendChild(_107);
}
}else{
_106=-_106;
while(_106--){
_DOMElement.removeChild(_DOMImageParts.pop());
}
}
if(_backgroundType===_4||_backgroundType===_8){
var _108=_102?objj_msgSend(_backgroundColor,"cssString"):"";
if(_105){
_DOMElement.style.background="";
_DOMImageParts[0].style.background=objj_msgSend(_backgroundColor,"cssString");
if(CPFeatureIsCompatible(CPOpacityRequiresFilterFeature)){
_DOMImageParts[0].style.filter="alpha(opacity="+objj_msgSend(_backgroundColor,"alphaComponent")*100+")";
}else{
_DOMImageParts[0].style.opacity=objj_msgSend(_backgroundColor,"alphaComponent");
}
var size=objj_msgSend(_fe,"bounds").size;
_DOMImageParts[0].style.width=MAX(0,ROUND(size.width))+"px";
_DOMImageParts[0].style.height=MAX(0,ROUND(size.height))+"px";
}else{
_DOMElement.style.background=_108;
}
}else{
var _109=objj_msgSend(_101,"imageSlices"),_10a=MIN(_DOMImageParts.length,_109.length),_10b=_frame.size;
while(_10a--){
var _10c=_109[_10a],size=_DOMImageSizes[_10a]=_10c?objj_msgSend(_10c,"size"):{width:0,height:0};
_DOMImageParts[_10a].style.width=MAX(0,ROUND(size.width))+"px";
_DOMImageParts[_10a].style.height=MAX(0,ROUND(size.height))+"px";
_DOMImageParts[_10a].style.background=_10c?"url(\""+objj_msgSend(_10c,"filename")+"\")":"";
if(!_104){
if(CPFeatureIsCompatible(CPOpacityRequiresFilterFeature)){
try{
_DOMImageParts[_10a].style.removeAttribute("filter");
}
catch(anException){
}
}else{
_DOMImageParts[_10a].style.opacity=1;
}
}
}
if(_backgroundType==_7){
var _10d=_10b.width-_DOMImageSizes[0].width-_DOMImageSizes[2].width,_10e=_10b.height-_DOMImageSizes[0].height-_DOMImageSizes[6].height;
_DOMImageParts[1].style.width=MAX(0,ROUND(_10d))+"px";
_DOMImageParts[1].style.height=MAX(0,ROUND(_DOMImageSizes[0].height))+"px";
_DOMImageParts[3].style.width=MAX(0,ROUND(_DOMImageSizes[3].width))+"px";
_DOMImageParts[3].style.height=MAX(0,ROUND(_10e))+"px";
_DOMImageParts[4].style.width=MAX(0,ROUND(_10d))+"px";
_DOMImageParts[4].style.height=MAX(0,ROUND(_10e))+"px";
_DOMImageParts[5].style.width=MAX(0,ROUND(_DOMImageSizes[5].width))+"px";
_DOMImageParts[5].style.height=MAX(0,ROUND(_10e))+"px";
_DOMImageParts[7].style.width=MAX(0,ROUND(_10d))+"px";
_DOMImageParts[7].style.height=MAX(0,ROUND(_DOMImageSizes[7].height))+"px";
if(NULL){
var _10f={x:CGPointMake(0,0).x*NULL.a+CGPointMake(0,0).y*NULL.c+NULL.tx,y:CGPointMake(0,0).x*NULL.b+CGPointMake(0,0).y*NULL.d+NULL.ty};
}else{
var _10f={x:0,y:0};
}
_DOMImageParts[0].style.left=ROUND(_10f.x)+"px";
_DOMImageParts[0].style.top=ROUND(_10f.y)+"px";
if(NULL){
var _10f={x:CGPointMake(_DOMImageSizes[0].width,0).x*NULL.a+CGPointMake(_DOMImageSizes[0].width,0).y*NULL.c+NULL.tx,y:CGPointMake(_DOMImageSizes[0].width,0).x*NULL.b+CGPointMake(_DOMImageSizes[0].width,0).y*NULL.d+NULL.ty};
}else{
var _10f={x:_DOMImageSizes[0].width,y:0};
}
_DOMImageParts[1].style.left=ROUND(_10f.x)+"px";
_DOMImageParts[1].style.top=ROUND(_10f.y)+"px";
if(NULL){
var _10f={x:CGPointMake(0,0).x*NULL.a+CGPointMake(0,0).y*NULL.c+NULL.tx,y:CGPointMake(0,0).x*NULL.b+CGPointMake(0,0).y*NULL.d+NULL.ty};
}else{
var _10f={x:0,y:0};
}
_DOMImageParts[2].style.right=ROUND(_10f.x)+"px";
_DOMImageParts[2].style.top=ROUND(_10f.y)+"px";
if(NULL){
var _10f={x:CGPointMake(0,_DOMImageSizes[1].height).x*NULL.a+CGPointMake(0,_DOMImageSizes[1].height).y*NULL.c+NULL.tx,y:CGPointMake(0,_DOMImageSizes[1].height).x*NULL.b+CGPointMake(0,_DOMImageSizes[1].height).y*NULL.d+NULL.ty};
}else{
var _10f={x:0,y:_DOMImageSizes[1].height};
}
_DOMImageParts[3].style.left=ROUND(_10f.x)+"px";
_DOMImageParts[3].style.top=ROUND(_10f.y)+"px";
if(NULL){
var _10f={x:CGPointMake(_DOMImageSizes[0].width,_DOMImageSizes[0].height).x*NULL.a+CGPointMake(_DOMImageSizes[0].width,_DOMImageSizes[0].height).y*NULL.c+NULL.tx,y:CGPointMake(_DOMImageSizes[0].width,_DOMImageSizes[0].height).x*NULL.b+CGPointMake(_DOMImageSizes[0].width,_DOMImageSizes[0].height).y*NULL.d+NULL.ty};
}else{
var _10f={x:_DOMImageSizes[0].width,y:_DOMImageSizes[0].height};
}
_DOMImageParts[4].style.left=ROUND(_10f.x)+"px";
_DOMImageParts[4].style.top=ROUND(_10f.y)+"px";
if(NULL){
var _10f={x:CGPointMake(0,_DOMImageSizes[1].height).x*NULL.a+CGPointMake(0,_DOMImageSizes[1].height).y*NULL.c+NULL.tx,y:CGPointMake(0,_DOMImageSizes[1].height).x*NULL.b+CGPointMake(0,_DOMImageSizes[1].height).y*NULL.d+NULL.ty};
}else{
var _10f={x:0,y:_DOMImageSizes[1].height};
}
_DOMImageParts[5].style.right=ROUND(_10f.x)+"px";
_DOMImageParts[5].style.top=ROUND(_10f.y)+"px";
if(NULL){
var _10f={x:CGPointMake(0,0).x*NULL.a+CGPointMake(0,0).y*NULL.c+NULL.tx,y:CGPointMake(0,0).x*NULL.b+CGPointMake(0,0).y*NULL.d+NULL.ty};
}else{
var _10f={x:0,y:0};
}
_DOMImageParts[6].style.left=ROUND(_10f.x)+"px";
_DOMImageParts[6].style.bottom=ROUND(_10f.y)+"px";
if(NULL){
var _10f={x:CGPointMake(_DOMImageSizes[6].width,0).x*NULL.a+CGPointMake(_DOMImageSizes[6].width,0).y*NULL.c+NULL.tx,y:CGPointMake(_DOMImageSizes[6].width,0).x*NULL.b+CGPointMake(_DOMImageSizes[6].width,0).y*NULL.d+NULL.ty};
}else{
var _10f={x:_DOMImageSizes[6].width,y:0};
}
_DOMImageParts[7].style.left=ROUND(_10f.x)+"px";
_DOMImageParts[7].style.bottom=ROUND(_10f.y)+"px";
if(NULL){
var _10f={x:CGPointMake(0,0).x*NULL.a+CGPointMake(0,0).y*NULL.c+NULL.tx,y:CGPointMake(0,0).x*NULL.b+CGPointMake(0,0).y*NULL.d+NULL.ty};
}else{
var _10f={x:0,y:0};
}
_DOMImageParts[8].style.right=ROUND(_10f.x)+"px";
_DOMImageParts[8].style.bottom=ROUND(_10f.y)+"px";
}else{
if(_backgroundType==_5){
_DOMImageParts[1].style.width=MAX(0,ROUND(_10b.width))+"px";
_DOMImageParts[1].style.height=MAX(0,ROUND(_10b.height-_DOMImageSizes[0].height-_DOMImageSizes[2].height))+"px";
if(NULL){
var _10f={x:CGPointMake(0,0).x*NULL.a+CGPointMake(0,0).y*NULL.c+NULL.tx,y:CGPointMake(0,0).x*NULL.b+CGPointMake(0,0).y*NULL.d+NULL.ty};
}else{
var _10f={x:0,y:0};
}
_DOMImageParts[0].style.left=ROUND(_10f.x)+"px";
_DOMImageParts[0].style.top=ROUND(_10f.y)+"px";
if(NULL){
var _10f={x:CGPointMake(0,_DOMImageSizes[0].height).x*NULL.a+CGPointMake(0,_DOMImageSizes[0].height).y*NULL.c+NULL.tx,y:CGPointMake(0,_DOMImageSizes[0].height).x*NULL.b+CGPointMake(0,_DOMImageSizes[0].height).y*NULL.d+NULL.ty};
}else{
var _10f={x:0,y:_DOMImageSizes[0].height};
}
_DOMImageParts[1].style.left=ROUND(_10f.x)+"px";
_DOMImageParts[1].style.top=ROUND(_10f.y)+"px";
if(NULL){
var _10f={x:CGPointMake(0,0).x*NULL.a+CGPointMake(0,0).y*NULL.c+NULL.tx,y:CGPointMake(0,0).x*NULL.b+CGPointMake(0,0).y*NULL.d+NULL.ty};
}else{
var _10f={x:0,y:0};
}
_DOMImageParts[2].style.left=ROUND(_10f.x)+"px";
_DOMImageParts[2].style.bottom=ROUND(_10f.y)+"px";
}else{
if(_backgroundType==_6){
_DOMImageParts[1].style.width=MAX(0,ROUND(_10b.width-_DOMImageSizes[0].width-_DOMImageSizes[2].width))+"px";
_DOMImageParts[1].style.height=MAX(0,ROUND(_10b.height))+"px";
if(NULL){
var _10f={x:CGPointMake(0,0).x*NULL.a+CGPointMake(0,0).y*NULL.c+NULL.tx,y:CGPointMake(0,0).x*NULL.b+CGPointMake(0,0).y*NULL.d+NULL.ty};
}else{
var _10f={x:0,y:0};
}
_DOMImageParts[0].style.left=ROUND(_10f.x)+"px";
_DOMImageParts[0].style.top=ROUND(_10f.y)+"px";
if(NULL){
var _10f={x:CGPointMake(_DOMImageSizes[0].width,0).x*NULL.a+CGPointMake(_DOMImageSizes[0].width,0).y*NULL.c+NULL.tx,y:CGPointMake(_DOMImageSizes[0].width,0).x*NULL.b+CGPointMake(_DOMImageSizes[0].width,0).y*NULL.d+NULL.ty};
}else{
var _10f={x:_DOMImageSizes[0].width,y:0};
}
_DOMImageParts[1].style.left=ROUND(_10f.x)+"px";
_DOMImageParts[1].style.top=ROUND(_10f.y)+"px";
if(NULL){
var _10f={x:CGPointMake(0,0).x*NULL.a+CGPointMake(0,0).y*NULL.c+NULL.tx,y:CGPointMake(0,0).x*NULL.b+CGPointMake(0,0).y*NULL.d+NULL.ty};
}else{
var _10f={x:0,y:0};
}
_DOMImageParts[2].style.right=ROUND(_10f.x)+"px";
_DOMImageParts[2].style.top=ROUND(_10f.y)+"px";
}
}
}
}
}
}),new objj_method(sel_getUid("backgroundColor"),function(self,_110){
with(self){
return _backgroundColor;
}
}),new objj_method(sel_getUid("convertPoint:fromView:"),function(self,_111,_112,_113){
with(self){
return CGPointApplyAffineTransform(_112,_114(_113,self));
}
}),new objj_method(sel_getUid("convertPointFromBase:"),function(self,_115,_116){
with(self){
return CGPointApplyAffineTransform(_116,_114(nil,self));
}
}),new objj_method(sel_getUid("convertPoint:toView:"),function(self,_117,_118,_119){
with(self){
return CGPointApplyAffineTransform(_118,_114(self,_119));
}
}),new objj_method(sel_getUid("convertPointToBase:"),function(self,_11a,_11b){
with(self){
return CGPointApplyAffineTransform(_11b,_114(self,nil));
}
}),new objj_method(sel_getUid("convertSize:fromView:"),function(self,_11c,_11d,_11e){
with(self){
return CGSizeApplyAffineTransform(_11d,_114(_11e,self));
}
}),new objj_method(sel_getUid("convertSize:toView:"),function(self,_11f,_120,_121){
with(self){
return CGSizeApplyAffineTransform(_120,_114(self,_121));
}
}),new objj_method(sel_getUid("convertRect:fromView:"),function(self,_122,_123,_124){
with(self){
return CGRectApplyAffineTransform(_123,_114(_124,self));
}
}),new objj_method(sel_getUid("convertRectFromBase:"),function(self,_125,_126){
with(self){
return CGRectApplyAffineTransform(_126,_114(nil,self));
}
}),new objj_method(sel_getUid("convertRect:toView:"),function(self,_127,_128,_129){
with(self){
return CGRectApplyAffineTransform(_128,_114(self,_129));
}
}),new objj_method(sel_getUid("convertRectToBase:"),function(self,_12a,_12b){
with(self){
return CGRectApplyAffineTransform(_12b,_114(self,nil));
}
}),new objj_method(sel_getUid("setPostsFrameChangedNotifications:"),function(self,_12c,_12d){
with(self){
_12d=!!_12d;
if(_postsFrameChangedNotifications===_12d){
return;
}
_postsFrameChangedNotifications=_12d;
if(_postsFrameChangedNotifications){
objj_msgSend(_1,"postNotificationName:object:",CPViewFrameDidChangeNotification,self);
}
}
}),new objj_method(sel_getUid("postsFrameChangedNotifications"),function(self,_12e){
with(self){
return _postsFrameChangedNotifications;
}
}),new objj_method(sel_getUid("setPostsBoundsChangedNotifications:"),function(self,_12f,_130){
with(self){
_130=!!_130;
if(_postsBoundsChangedNotifications===_130){
return;
}
_postsBoundsChangedNotifications=_130;
if(_postsBoundsChangedNotifications){
objj_msgSend(_1,"postNotificationName:object:",CPViewBoundsDidChangeNotification,self);
}
}
}),new objj_method(sel_getUid("postsBoundsChangedNotifications"),function(self,_131){
with(self){
return _postsBoundsChangedNotifications;
}
}),new objj_method(sel_getUid("dragImage:at:offset:event:pasteboard:source:slideBack:"),function(self,_132,_133,_134,_135,_136,_137,_138,_139){
with(self){
objj_msgSend(_window,"dragImage:at:offset:event:pasteboard:source:slideBack:",_133,objj_msgSend(self,"convertPoint:toView:",_134,nil),_135,_136,_137,_138,_139);
}
}),new objj_method(sel_getUid("dragView:at:offset:event:pasteboard:source:slideBack:"),function(self,_13a,_13b,_13c,_13d,_13e,_13f,_140,_141){
with(self){
objj_msgSend(_window,"dragView:at:offset:event:pasteboard:source:slideBack:",_13b,objj_msgSend(self,"convertPoint:toView:",_13c,nil),_13d,_13e,_13f,_140,_141);
}
}),new objj_method(sel_getUid("registerForDraggedTypes:"),function(self,_142,_143){
with(self){
if(!_143||!objj_msgSend(_143,"count")){
return;
}
var _144=objj_msgSend(self,"window");
objj_msgSend(_144,"_noteUnregisteredDraggedTypes:",_registeredDraggedTypes);
objj_msgSend(_registeredDraggedTypes,"addObjectsFromArray:",_143);
objj_msgSend(_144,"_noteRegisteredDraggedTypes:",_registeredDraggedTypes);
_registeredDraggedTypesArray=nil;
}
}),new objj_method(sel_getUid("registeredDraggedTypes"),function(self,_145){
with(self){
if(!_registeredDraggedTypesArray){
_registeredDraggedTypesArray=objj_msgSend(_registeredDraggedTypes,"allObjects");
}
return _registeredDraggedTypesArray;
}
}),new objj_method(sel_getUid("unregisterDraggedTypes"),function(self,_146){
with(self){
objj_msgSend(objj_msgSend(self,"window"),"_noteUnregisteredDraggedTypes:",_registeredDraggedTypes);
_registeredDraggedTypes=objj_msgSend(CPSet,"set");
_registeredDraggedTypesArray=[];
}
}),new objj_method(sel_getUid("drawRect:"),function(self,_147,_148){
with(self){
}
}),new objj_method(sel_getUid("setNeedsDisplay:"),function(self,_149,_14a){
with(self){
if(_14a){
objj_msgSend(self,"setNeedsDisplayInRect:",objj_msgSend(self,"bounds"));
}
}
}),new objj_method(sel_getUid("setNeedsDisplayInRect:"),function(self,_14b,_14c){
with(self){
if(!(_viewClassFlags&_a)){
return;
}
if((_14c.size.width<=0||_14c.size.height<=0)){
return;
}
if(_dirtyRect&&!(_dirtyRect.size.width<=0||_dirtyRect.size.height<=0)){
_dirtyRect=CGRectUnion(_14c,_dirtyRect);
}else{
_dirtyRect={origin:{x:_14c.origin.x,y:_14c.origin.y},size:{width:_14c.size.width,height:_14c.size.height}};
}
_CPDisplayServerAddDisplayObject(self);
}
}),new objj_method(sel_getUid("needsDisplay"),function(self,_14d){
with(self){
return _dirtyRect&&!(_dirtyRect.size.width<=0||_dirtyRect.size.height<=0);
}
}),new objj_method(sel_getUid("displayIfNeeded"),function(self,_14e){
with(self){
if(objj_msgSend(self,"needsDisplay")){
objj_msgSend(self,"displayRect:",_dirtyRect);
}
}
}),new objj_method(sel_getUid("display"),function(self,_14f){
with(self){
objj_msgSend(self,"displayRect:",objj_msgSend(self,"visibleRect"));
}
}),new objj_method(sel_getUid("displayIfNeededInRect:"),function(self,_150,_151){
with(self){
if(objj_msgSend(self,"needsDisplay")){
objj_msgSend(self,"displayRect:",_151);
}
}
}),new objj_method(sel_getUid("displayRect:"),function(self,_152,_153){
with(self){
objj_msgSend(self,"viewWillDraw");
objj_msgSend(self,"displayRectIgnoringOpacity:inContext:",_153,nil);
_dirtyRect=NULL;
}
}),new objj_method(sel_getUid("displayRectIgnoringOpacity:inContext:"),function(self,_154,_155,_156){
with(self){
if(objj_msgSend(self,"isHidden")){
return;
}
objj_msgSend(self,"lockFocus");
CGContextClearRect(objj_msgSend(objj_msgSend(CPGraphicsContext,"currentContext"),"graphicsPort"),_155);
objj_msgSend(self,"drawRect:",_155);
objj_msgSend(self,"unlockFocus");
}
}),new objj_method(sel_getUid("viewWillDraw"),function(self,_157){
with(self){
}
}),new objj_method(sel_getUid("lockFocus"),function(self,_158){
with(self){
if(!_graphicsContext){
var _159=CGBitmapGraphicsContextCreate();
_DOMContentsElement=_159.DOMElement;
_DOMContentsElement.style.zIndex=-100;
_DOMContentsElement.style.overflow="hidden";
_DOMContentsElement.style.position="absolute";
_DOMContentsElement.style.visibility="visible";
_DOMContentsElement.width=ROUND((_frame.size.width));
_DOMContentsElement.height=ROUND((_frame.size.height));
_DOMContentsElement.style.top="0px";
_DOMContentsElement.style.left="0px";
_DOMContentsElement.style.width=ROUND((_frame.size.width))+"px";
_DOMContentsElement.style.height=ROUND((_frame.size.height))+"px";
_DOMElement.appendChild(_DOMContentsElement);
_graphicsContext=objj_msgSend(CPGraphicsContext,"graphicsContextWithGraphicsPort:flipped:",_159,YES);
}
objj_msgSend(CPGraphicsContext,"setCurrentContext:",_graphicsContext);
CGContextSaveGState(objj_msgSend(_graphicsContext,"graphicsPort"));
}
}),new objj_method(sel_getUid("unlockFocus"),function(self,_15a){
with(self){
CGContextRestoreGState(objj_msgSend(_graphicsContext,"graphicsPort"));
objj_msgSend(CPGraphicsContext,"setCurrentContext:",nil);
}
}),new objj_method(sel_getUid("setNeedsLayout"),function(self,_15b){
with(self){
if(!(_viewClassFlags&_b)){
return;
}
_needsLayout=YES;
_CPDisplayServerAddLayoutObject(self);
}
}),new objj_method(sel_getUid("layoutIfNeeded"),function(self,_15c){
with(self){
if(_needsLayout){
_needsLayout=NO;
objj_msgSend(self,"layoutSubviews");
}
}
}),new objj_method(sel_getUid("layoutSubviews"),function(self,_15d){
with(self){
}
}),new objj_method(sel_getUid("isOpaque"),function(self,_15e){
with(self){
return NO;
}
}),new objj_method(sel_getUid("visibleRect"),function(self,_15f){
with(self){
if(!_superview){
return _bounds;
}
return CGRectIntersection(objj_msgSend(self,"convertRect:fromView:",objj_msgSend(_superview,"visibleRect"),_superview),_bounds);
}
}),new objj_method(sel_getUid("_enclosingClipView"),function(self,_160){
with(self){
var _161=_superview,_162=objj_msgSend(CPClipView,"class");
while(_161&&!objj_msgSend(_161,"isKindOfClass:",_162)){
_161=_161._superview;
}
return _161;
}
}),new objj_method(sel_getUid("scrollPoint:"),function(self,_163,_164){
with(self){
var _165=objj_msgSend(self,"_enclosingClipView");
if(!_165){
return;
}
objj_msgSend(_165,"scrollToPoint:",objj_msgSend(self,"convertPoint:toView:",_164,_165));
}
}),new objj_method(sel_getUid("scrollRectToVisible:"),function(self,_166,_167){
with(self){
var _168=objj_msgSend(self,"visibleRect");
_167=CGRectIntersection(_167,_bounds);
if((_167.size.width<=0||_167.size.height<=0)||CGRectContainsRect(_168,_167)){
return NO;
}
var _169=objj_msgSend(self,"_enclosingClipView");
if(!_169){
return NO;
}
var _16a={x:_168.origin.x,y:_168.origin.y};
if((_167.origin.x)<=(_168.origin.x)){
_16a.x=(_167.origin.x);
}else{
if((_167.origin.x+_167.size.width)>(_168.origin.x+_168.size.width)){
_16a.x+=(_167.origin.x+_167.size.width)-(_168.origin.x+_168.size.width);
}
}
if((_167.origin.y)<=(_168.origin.y)){
_16a.y=CGRectGetMinY(_167);
}else{
if((_167.origin.y+_167.size.height)>(_168.origin.y+_168.size.height)){
_16a.y+=(_167.origin.y+_167.size.height)-(_168.origin.y+_168.size.height);
}
}
objj_msgSend(_169,"scrollToPoint:",CGPointMake(_16a.x,_16a.y));
return YES;
}
}),new objj_method(sel_getUid("autoscroll:"),function(self,_16b,_16c){
with(self){
return objj_msgSend(objj_msgSend(self,"superview"),"autoscroll:",_16c);
}
}),new objj_method(sel_getUid("adjustScroll:"),function(self,_16d,_16e){
with(self){
return _16e;
}
}),new objj_method(sel_getUid("scrollRect:by:"),function(self,_16f,_170,_171){
with(self){
}
}),new objj_method(sel_getUid("enclosingScrollView"),function(self,_172){
with(self){
var _173=_superview,_174=objj_msgSend(CPScrollView,"class");
while(_173&&!objj_msgSend(_173,"isKindOfClass:",_174)){
_173=_173._superview;
}
return _173;
}
}),new objj_method(sel_getUid("scrollClipView:toPoint:"),function(self,_175,_176,_177){
with(self){
objj_msgSend(_176,"scrollToPoint:",_177);
}
}),new objj_method(sel_getUid("reflectScrolledClipView:"),function(self,_178,_179){
with(self){
}
})]);
class_addMethods(_d,[new objj_method(sel_getUid("initialize"),function(self,_17a){
with(self){
if(self!==objj_msgSend(CPView,"class")){
return;
}
_3=document.createElement("div");
var _17b=_3.style;
_17b.overflow="hidden";
_17b.position="absolute";
_17b.visibility="visible";
_17b.zIndex=0;
_1=objj_msgSend(CPNotificationCenter,"defaultCenter");
}
}),new objj_method(sel_getUid("keyPathsForValuesAffectingFrame"),function(self,_17c){
with(self){
return objj_msgSend(CPSet,"setWithObjects:","frameOrigin","frameSize");
}
}),new objj_method(sel_getUid("keyPathsForValuesAffectingBounds"),function(self,_17d){
with(self){
return objj_msgSend(CPSet,"setWithObjects:","boundsOrigin","boundsSize");
}
}),new objj_method(sel_getUid("defaultMenu"),function(self,_17e){
with(self){
return nil;
}
})]);
var _c=objj_getClass("CPView");
if(!_c){
throw new SyntaxError("*** Could not find definition for class \"CPView\"");
}
var _d=_c.isa;
class_addMethods(_c,[new objj_method(sel_getUid("performKeyEquivalent:"),function(self,_17f,_180){
with(self){
var _181=objj_msgSend(_subviews,"count");
while(_181--){
if(objj_msgSend(_subviews[_181],"performKeyEquivalent:",_180)){
return YES;
}
}
return NO;
}
}),new objj_method(sel_getUid("canBecomeKeyView"),function(self,_182){
with(self){
return objj_msgSend(self,"acceptsFirstResponder")&&!objj_msgSend(self,"isHiddenOrHasHiddenAncestor");
}
}),new objj_method(sel_getUid("nextKeyView"),function(self,_183){
with(self){
return _nextKeyView;
}
}),new objj_method(sel_getUid("nextValidKeyView"),function(self,_184){
with(self){
var _185=objj_msgSend(self,"nextKeyView"),_186=_185;
while(_185&&!objj_msgSend(_185,"canBecomeKeyView")){
_185=objj_msgSend(_185,"nextKeyView");
if(_185===_186){
return nil;
}
}
return _185;
}
}),new objj_method(sel_getUid("previousKeyView"),function(self,_187){
with(self){
return _previousKeyView;
}
}),new objj_method(sel_getUid("previousValidKeyView"),function(self,_188){
with(self){
var _189=objj_msgSend(self,"previousKeyView"),_18a=_189;
while(_189&&!objj_msgSend(_189,"canBecomeKeyView")){
_189=objj_msgSend(_189,"previousKeyView");
if(_189===_18a){
return nil;
}
}
return _189;
}
}),new objj_method(sel_getUid("_setPreviousKeyView:"),function(self,_18b,_18c){
with(self){
if(objj_msgSend(_18c,"isEqual:",self)){
_previousKeyView=nil;
}else{
_previousKeyView=_18c;
}
}
}),new objj_method(sel_getUid("setNextKeyView:"),function(self,_18d,next){
with(self){
if(objj_msgSend(next,"isEqual:",self)){
_nextKeyView=nil;
}else{
_nextKeyView=next;
objj_msgSend(_nextKeyView,"_setPreviousKeyView:",self);
}
}
})]);
var _c=objj_getClass("CPView");
if(!_c){
throw new SyntaxError("*** Could not find definition for class \"CPView\"");
}
var _d=_c.isa;
class_addMethods(_c,[new objj_method(sel_getUid("setLayer:"),function(self,_18e,_18f){
with(self){
if(_layer==_18f){
return;
}
if(_layer){
_layer._owningView=nil;
_DOMElement.removeChild(_layer._DOMElement);
}
_layer=_18f;
if(_layer){
var _190=CGRectMakeCopy(objj_msgSend(self,"bounds"));
objj_msgSend(_layer,"_setOwningView:",self);
_layer._DOMElement.style.zIndex=100;
_DOMElement.appendChild(_layer._DOMElement);
}
}
}),new objj_method(sel_getUid("layer"),function(self,_191){
with(self){
return _layer;
}
}),new objj_method(sel_getUid("setWantsLayer:"),function(self,_192,_193){
with(self){
_wantsLayer=!!_193;
}
}),new objj_method(sel_getUid("wantsLayer"),function(self,_194){
with(self){
return _wantsLayer;
}
})]);
var _c=objj_getClass("CPView");
if(!_c){
throw new SyntaxError("*** Could not find definition for class \"CPView\"");
}
var _d=_c.isa;
class_addMethods(_c,[new objj_method(sel_getUid("themeState"),function(self,_195){
with(self){
return _themeState;
}
}),new objj_method(sel_getUid("hasThemeState:"),function(self,_196,_197){
with(self){
if(_197===CPThemeStateNormal&&_themeState===CPThemeStateNormal){
return YES;
}
return !!(_themeState&((typeof _197==="string")?CPThemeState(_197):_197));
}
}),new objj_method(sel_getUid("setThemeState:"),function(self,_198,_199){
with(self){
var _19a=(typeof _199==="string")?CPThemeState(_199):_199;
if(_themeState&_19a){
return NO;
}
_themeState|=_19a;
objj_msgSend(self,"setNeedsLayout");
objj_msgSend(self,"setNeedsDisplay:",YES);
return YES;
}
}),new objj_method(sel_getUid("unsetThemeState:"),function(self,_19b,_19c){
with(self){
var _19d=((typeof _19c==="string")?CPThemeState(_19c):_19c);
if(!(_themeState&_19d)){
return NO;
}
_themeState&=~_19d;
objj_msgSend(self,"setNeedsLayout");
objj_msgSend(self,"setNeedsDisplay:",YES);
return YES;
}
}),new objj_method(sel_getUid("themeClass"),function(self,_19e){
with(self){
if(_themeClass){
return _themeClass;
}
return objj_msgSend(objj_msgSend(self,"class"),"defaultThemeClass");
}
}),new objj_method(sel_getUid("setThemeClass:"),function(self,_19f,_1a0){
with(self){
_themeClass=_1a0;
objj_msgSend(self,"_loadThemeAttributes");
objj_msgSend(self,"setNeedsLayout");
objj_msgSend(self,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("_loadThemeAttributes"),function(self,_1a1){
with(self){
var _1a2=objj_msgSend(self,"class"),_1a3=objj_msgSend(_1a2,"_themeAttributes"),_1a4=_1a3.length;
if(!_1a4){
return;
}
var _1a5=objj_msgSend(self,"theme"),_1a6=objj_msgSend(self,"themeClass");
_themeAttributes={};
while(_1a4--){
var _1a7=_1a3[_1a4--],_1a8=objj_msgSend(objj_msgSend(_CPThemeAttribute,"alloc"),"initWithName:defaultValue:",_1a7,_1a3[_1a4]);
objj_msgSend(_1a8,"setParentAttribute:",objj_msgSend(_1a5,"attributeWithName:forClass:",_1a7,_1a6));
_themeAttributes[_1a7]=_1a8;
}
}
}),new objj_method(sel_getUid("setTheme:"),function(self,_1a9,_1aa){
with(self){
if(_theme===_1aa){
return;
}
_theme=_1aa;
objj_msgSend(self,"viewDidChangeTheme");
}
}),new objj_method(sel_getUid("theme"),function(self,_1ab){
with(self){
return _theme;
}
}),new objj_method(sel_getUid("viewDidChangeTheme"),function(self,_1ac){
with(self){
if(!_themeAttributes){
return;
}
var _1ad=objj_msgSend(self,"theme"),_1ae=objj_msgSend(self,"themeClass");
for(var _1af in _themeAttributes){
if(_themeAttributes.hasOwnProperty(_1af)){
objj_msgSend(_themeAttributes[_1af],"setParentAttribute:",objj_msgSend(_1ad,"attributeWithName:forClass:",_1af,_1ae));
}
}
objj_msgSend(self,"setNeedsLayout");
objj_msgSend(self,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("_themeAttributeDictionary"),function(self,_1b0){
with(self){
var _1b1=objj_msgSend(CPDictionary,"dictionary");
if(_themeAttributes){
var _1b2=objj_msgSend(self,"theme");
for(var _1b3 in _themeAttributes){
if(_themeAttributes.hasOwnProperty(_1b3)){
objj_msgSend(_1b1,"setObject:forKey:",_themeAttributes[_1b3],_1b3);
}
}
}
return _1b1;
}
}),new objj_method(sel_getUid("setValue:forThemeAttribute:inState:"),function(self,_1b4,_1b5,_1b6,_1b7){
with(self){
if(!_themeAttributes||!_themeAttributes[_1b6]){
objj_msgSend(CPException,"raise:reason:",CPInvalidArgumentException,objj_msgSend(self,"className")+" does not contain theme attribute '"+_1b6+"'");
}
var _1b8=objj_msgSend(self,"currentValueForThemeAttribute:",_1b6);
objj_msgSend(_themeAttributes[_1b6],"setValue:forState:",_1b5,_1b7);
if(objj_msgSend(self,"currentValueForThemeAttribute:",_1b6)===_1b8){
return;
}
objj_msgSend(self,"setNeedsDisplay:",YES);
objj_msgSend(self,"setNeedsLayout");
}
}),new objj_method(sel_getUid("setValue:forThemeAttribute:"),function(self,_1b9,_1ba,_1bb){
with(self){
if(!_themeAttributes||!_themeAttributes[_1bb]){
objj_msgSend(CPException,"raise:reason:",CPInvalidArgumentException,objj_msgSend(self,"className")+" does not contain theme attribute '"+_1bb+"'");
}
var _1bc=objj_msgSend(self,"currentValueForThemeAttribute:",_1bb);
objj_msgSend(_themeAttributes[_1bb],"setValue:",_1ba);
if(objj_msgSend(self,"currentValueForThemeAttribute:",_1bb)===_1bc){
return;
}
objj_msgSend(self,"setNeedsDisplay:",YES);
objj_msgSend(self,"setNeedsLayout");
}
}),new objj_method(sel_getUid("valueForThemeAttribute:inState:"),function(self,_1bd,_1be,_1bf){
with(self){
if(!_themeAttributes||!_themeAttributes[_1be]){
objj_msgSend(CPException,"raise:reason:",CPInvalidArgumentException,objj_msgSend(self,"className")+" does not contain theme attribute '"+_1be+"'");
}
return objj_msgSend(_themeAttributes[_1be],"valueForState:",_1bf);
}
}),new objj_method(sel_getUid("valueForThemeAttribute:"),function(self,_1c0,_1c1){
with(self){
if(!_themeAttributes||!_themeAttributes[_1c1]){
objj_msgSend(CPException,"raise:reason:",CPInvalidArgumentException,objj_msgSend(self,"className")+" does not contain theme attribute '"+_1c1+"'");
}
return objj_msgSend(_themeAttributes[_1c1],"value");
}
}),new objj_method(sel_getUid("currentValueForThemeAttribute:"),function(self,_1c2,_1c3){
with(self){
if(!_themeAttributes||!_themeAttributes[_1c3]){
objj_msgSend(CPException,"raise:reason:",CPInvalidArgumentException,objj_msgSend(self,"className")+" does not contain theme attribute '"+_1c3+"'");
}
return objj_msgSend(_themeAttributes[_1c3],"valueForState:",_themeState);
}
}),new objj_method(sel_getUid("hasThemeAttribute:"),function(self,_1c4,_1c5){
with(self){
return (_themeAttributes&&_themeAttributes[_1c5]!==undefined);
}
}),new objj_method(sel_getUid("createEphemeralSubviewNamed:"),function(self,_1c6,_1c7){
with(self){
return nil;
}
}),new objj_method(sel_getUid("rectForEphemeralSubviewNamed:"),function(self,_1c8,_1c9){
with(self){
return {origin:{x:0,y:0},size:{width:0,height:0}};
}
}),new objj_method(sel_getUid("layoutEphemeralSubviewNamed:positioned:relativeToEphemeralSubviewNamed:"),function(self,_1ca,_1cb,_1cc,_1cd){
with(self){
if(!_ephemeralSubviewsForNames){
_ephemeralSubviewsForNames={};
_ephemeralSubviews=objj_msgSend(CPSet,"set");
}
var _1ce=objj_msgSend(self,"rectForEphemeralSubviewNamed:",_1cb);
if(_1ce){
if(!_ephemeralSubviewsForNames[_1cb]){
_ephemeralSubviewsForNames[_1cb]=objj_msgSend(self,"createEphemeralSubviewNamed:",_1cb);
objj_msgSend(_ephemeralSubviews,"addObject:",_ephemeralSubviewsForNames[_1cb]);
if(_ephemeralSubviewsForNames[_1cb]){
objj_msgSend(self,"addSubview:positioned:relativeTo:",_ephemeralSubviewsForNames[_1cb],_1cc,_ephemeralSubviewsForNames[_1cd]);
}
}
if(_ephemeralSubviewsForNames[_1cb]){
objj_msgSend(_ephemeralSubviewsForNames[_1cb],"setFrame:",_1ce);
}
}else{
if(_ephemeralSubviewsForNames[_1cb]){
objj_msgSend(_ephemeralSubviewsForNames[_1cb],"removeFromSuperview");
objj_msgSend(_ephemeralSubviews,"removeObject:",_ephemeralSubviewsForNames[_1cb]);
delete _ephemeralSubviewsForNames[_1cb];
}
}
return _ephemeralSubviewsForNames[_1cb];
}
}),new objj_method(sel_getUid("ephemeralSubviewNamed:"),function(self,_1cf,_1d0){
with(self){
if(!_ephemeralSubviewsForNames){
return nil;
}
return (_ephemeralSubviewsForNames[_1d0]||nil);
}
})]);
class_addMethods(_d,[new objj_method(sel_getUid("defaultThemeClass"),function(self,_1d1){
with(self){
return nil;
}
}),new objj_method(sel_getUid("themeAttributes"),function(self,_1d2){
with(self){
return nil;
}
}),new objj_method(sel_getUid("_themeAttributes"),function(self,_1d3){
with(self){
if(!_2){
_2={};
}
var _1d4=objj_msgSend(self,"class"),_1d5=objj_msgSend(CPView,"class"),_1d6=[],_1d7=objj_msgSend(CPNull,"null");
for(;_1d4&&_1d4!==_1d5;_1d4=objj_msgSend(_1d4,"superclass")){
var _1d8=_2[class_getName(_1d4)];
if(_1d8){
_1d6=_1d6.length?_1d6.concat(_1d8):_1d6;
_2[objj_msgSend(self,"className")]=_1d6;
break;
}
var _1d9=objj_msgSend(_1d4,"themeAttributes");
if(!_1d9){
continue;
}
var _1da=objj_msgSend(_1d9,"allKeys"),_1db=_1da.length;
while(_1db--){
var _1dc=_1da[_1db],_1dd=objj_msgSend(_1d9,"objectForKey:",_1dc);
_1d6.push(_1dd===_1d7?nil:_1dd);
_1d6.push(_1dc);
}
}
return _1d6;
}
})]);
var _1de="CPViewAutoresizingMask",_1df="CPViewAutoresizesSubviews",_1e0="CPViewBackgroundColor",_1e1="CPViewBoundsKey",_1e2="CPViewFrameKey",_1e3="CPViewHitTestsKey",_1e4="CPViewIsHiddenKey",_1e5="CPViewOpacityKey",_1e6="CPViewSubviewsKey",_1e7="CPViewSuperviewKey",_1e8="CPViewTagKey",_1e9="CPViewThemeClassKey",_1ea="CPViewThemeStateKey",_1eb="CPViewWindowKey",_1ec="CPViewNextKeyViewKey",_1ed="CPViewPreviousKeyViewKey";
var _c=objj_getClass("CPView");
if(!_c){
throw new SyntaxError("*** Could not find definition for class \"CPView\"");
}
var _d=_c.isa;
class_addMethods(_c,[new objj_method(sel_getUid("initWithCoder:"),function(self,_1ee,_1ef){
with(self){
_DOMElement=_3.cloneNode(false);
_frame=objj_msgSend(_1ef,"decodeRectForKey:",_1e2);
_bounds=objj_msgSend(_1ef,"decodeRectForKey:",_1e1);
self=objj_msgSendSuper({receiver:self,super_class:objj_getClass("CPView").super_class},"initWithCoder:",_1ef);
if(self){
_tag=objj_msgSend(_1ef,"containsValueForKey:",_1e8)?objj_msgSend(_1ef,"decodeIntForKey:",_1e8):-1;
_window=objj_msgSend(_1ef,"decodeObjectForKey:",_1eb);
_subviews=objj_msgSend(_1ef,"decodeObjectForKey:",_1e6)||[];
_superview=objj_msgSend(_1ef,"decodeObjectForKey:",_1e7);
_registeredDraggedTypes=objj_msgSend(CPSet,"set");
_registeredDraggedTypesArray=[];
if(_autoresizingMask===nil){
_autoresizingMask=objj_msgSend(_1ef,"decodeIntForKey:",_1de)||CPViewNotSizable;
}
_autoresizesSubviews=!objj_msgSend(_1ef,"containsValueForKey:",_1df)||objj_msgSend(_1ef,"decodeBoolForKey:",_1df);
_hitTests=!objj_msgSend(_1ef,"containsValueForKey:",_1e3)||objj_msgSend(_1ef,"decodeObjectForKey:",_1e3);
_DOMImageParts=[];
_DOMImageSizes=[];
if(NULL){
var _1f0={x:CGPointMake((_frame.origin.x),(_frame.origin.y)).x*NULL.a+CGPointMake((_frame.origin.x),(_frame.origin.y)).y*NULL.c+NULL.tx,y:CGPointMake((_frame.origin.x),(_frame.origin.y)).x*NULL.b+CGPointMake((_frame.origin.x),(_frame.origin.y)).y*NULL.d+NULL.ty};
}else{
var _1f0={x:(_frame.origin.x),y:(_frame.origin.y)};
}
_DOMElement.style.left=ROUND(_1f0.x)+"px";
_DOMElement.style.top=ROUND(_1f0.y)+"px";
_DOMElement.style.width=MAX(0,ROUND((_frame.size.width)))+"px";
_DOMElement.style.height=MAX(0,ROUND((_frame.size.height)))+"px";
var _1f1=0,_1f2=_subviews.length;
for(;_1f1<_1f2;++_1f1){
_DOMElement.appendChild(_subviews[_1f1]._DOMElement);
}
if(objj_msgSend(_1ef,"containsValueForKey:",_1e4)){
objj_msgSend(self,"setHidden:",objj_msgSend(_1ef,"decodeBoolForKey:",_1e4));
}else{
_isHidden=NO;
}
if(objj_msgSend(_1ef,"containsValueForKey:",_1e5)){
objj_msgSend(self,"setAlphaValue:",objj_msgSend(_1ef,"decodeIntForKey:",_1e5));
}else{
_opacity=1;
}
objj_msgSend(self,"setBackgroundColor:",objj_msgSend(_1ef,"decodeObjectForKey:",_1e0));
objj_msgSend(self,"setupViewFlags");
_theme=objj_msgSend(CPTheme,"defaultTheme");
_themeClass=objj_msgSend(_1ef,"decodeObjectForKey:",_1e9);
_themeState=CPThemeState(objj_msgSend(_1ef,"decodeIntForKey:",_1ea));
_themeAttributes={};
var _1f3=objj_msgSend(self,"class"),_1f4=objj_msgSend(self,"themeClass"),_1f5=objj_msgSend(_1f3,"_themeAttributes"),_1f2=_1f5.length;
while(_1f2--){
var _1f6=_1f5[_1f2--];
_themeAttributes[_1f6]=CPThemeAttributeDecode(_1ef,_1f6,_1f5[_1f2],_theme,_1f4);
}
objj_msgSend(self,"setNeedsDisplay:",YES);
objj_msgSend(self,"setNeedsLayout");
}
return self;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(self,_1f7,_1f8){
with(self){
objj_msgSendSuper({receiver:self,super_class:objj_getClass("CPView").super_class},"encodeWithCoder:",_1f8);
if(_tag!==-1){
objj_msgSend(_1f8,"encodeInt:forKey:",_tag,_1e8);
}
objj_msgSend(_1f8,"encodeRect:forKey:",_frame,_1e2);
objj_msgSend(_1f8,"encodeRect:forKey:",_bounds,_1e1);
if(_window!==nil){
objj_msgSend(_1f8,"encodeConditionalObject:forKey:",_window,_1eb);
}
var _1f9=objj_msgSend(_subviews,"count"),_1fa=_subviews;
if(_1f9>0&&objj_msgSend(_ephemeralSubviews,"count")>0){
_1fa=objj_msgSend(_1fa,"copy");
while(_1f9--){
if(objj_msgSend(_ephemeralSubviews,"containsObject:",_1fa[_1f9])){
_1fa.splice(_1f9,1);
}
}
}
if(_1fa.length>0){
objj_msgSend(_1f8,"encodeObject:forKey:",_1fa,_1e6);
}
if(_superview!==nil){
objj_msgSend(_1f8,"encodeConditionalObject:forKey:",_superview,_1e7);
}
if(_autoresizingMask!==CPViewNotSizable){
objj_msgSend(_1f8,"encodeInt:forKey:",_autoresizingMask,_1de);
}
if(!_autoresizesSubviews){
objj_msgSend(_1f8,"encodeBool:forKey:",_autoresizesSubviews,_1df);
}
if(_backgroundColor!==nil){
objj_msgSend(_1f8,"encodeObject:forKey:",_backgroundColor,_1e0);
}
if(_hitTests!==YES){
objj_msgSend(_1f8,"encodeBool:forKey:",_hitTests,_1e3);
}
if(_opacity!==1){
objj_msgSend(_1f8,"encodeFloat:forKey:",_opacity,_1e5);
}
if(_isHidden){
objj_msgSend(_1f8,"encodeBool:forKey:",_isHidden,_1e4);
}
var _1fb=objj_msgSend(self,"nextKeyView");
if(_1fb!==nil&&!objj_msgSend(_1fb,"isEqual:",self)){
objj_msgSend(_1f8,"encodeConditionalObject:forKey:",_1fb,_1ec);
}
var _1fc=objj_msgSend(self,"previousKeyView");
if(_1fc!==nil&&!objj_msgSend(_1fc,"isEqual:",self)){
objj_msgSend(_1f8,"encodeConditionalObject:forKey:",_1fc,_1ed);
}
objj_msgSend(_1f8,"encodeObject:forKey:",objj_msgSend(self,"themeClass"),_1e9);
objj_msgSend(_1f8,"encodeInt:forKey:",CPThemeStateName(_themeState),_1ea);
for(var _1fd in _themeAttributes){
if(_themeAttributes.hasOwnProperty(_1fd)){
CPThemeAttributeEncode(_1f8,_themeAttributes[_1fd]);
}
}
}
})]);
var _ba=function(_1fe){
var _1ff=_1fe._superview;
return {autoresizingMask:_1fe._autoresizingMask,frame:CGRectMakeCopy(_1fe._frame),index:(_1ff?objj_msgSend(_1ff._subviews,"indexOfObjectIdenticalTo:",_1fe):0),superview:_1ff};
};
var _114=function(_200,_201){
var _202=CGAffineTransformMakeIdentity(),_203=YES,_204=nil,_205=nil;
if(_200){
var view=_200;
while(view&&view!=_201){
var _206=view._frame;
_202.tx+=(_206.origin.x);
_202.ty+=(_206.origin.y);
if(view._boundsTransform){
var tx=_202.tx*view._boundsTransform.a+_202.ty*view._boundsTransform.c+view._boundsTransform.tx;
_202.ty=_202.tx*view._boundsTransform.b+_202.ty*view._boundsTransform.d+view._boundsTransform.ty;
_202.tx=tx;
var a=_202.a*view._boundsTransform.a+_202.b*view._boundsTransform.c,b=_202.a*view._boundsTransform.b+_202.b*view._boundsTransform.d,c=_202.c*view._boundsTransform.a+_202.d*view._boundsTransform.c;
_202.d=_202.c*view._boundsTransform.b+_202.d*view._boundsTransform.d;
_202.a=a;
_202.b=b;
_202.c=c;
}
view=view._superview;
}
if(view===_201){
return _202;
}else{
if(_200&&_201){
_204=objj_msgSend(_200,"window");
_205=objj_msgSend(_201,"window");
if(_204&&_205&&_204!==_205){
_203=NO;
var _206=objj_msgSend(_204,"frame");
_202.tx+=(_206.origin.x);
_202.ty+=(_206.origin.y);
}
}
}
}
var view=_201;
while(view){
var _206=view._frame;
_202.tx-=(_206.origin.x);
_202.ty-=(_206.origin.y);
if(view._boundsTransform){
var tx=_202.tx*view._inverseBoundsTransform.a+_202.ty*view._inverseBoundsTransform.c+view._inverseBoundsTransform.tx;
_202.ty=_202.tx*view._inverseBoundsTransform.b+_202.ty*view._inverseBoundsTransform.d+view._inverseBoundsTransform.ty;
_202.tx=tx;
var a=_202.a*view._inverseBoundsTransform.a+_202.b*view._inverseBoundsTransform.c,b=_202.a*view._inverseBoundsTransform.b+_202.b*view._inverseBoundsTransform.d,c=_202.c*view._inverseBoundsTransform.a+_202.d*view._inverseBoundsTransform.c;
_202.d=_202.c*view._inverseBoundsTransform.b+_202.d*view._inverseBoundsTransform.d;
_202.a=a;
_202.b=b;
_202.c=c;
}
view=view._superview;
}
if(!_203){
var _206=objj_msgSend(_205,"frame");
_202.tx-=(_206.origin.x);
_202.ty-=(_206.origin.y);
}
return _202;
};
p;17;CPViewAnimation.jt;5213;@STATIC;1.0;i;13;CPAnimation.jt;5176;
objj_executeFile("CPAnimation.j",YES);
CPViewAnimationTargetKey="CPViewAnimationTargetKey";
CPViewAnimationStartFrameKey="CPViewAnimationStartFrameKey";
CPViewAnimationEndFrameKey="CPViewAnimationEndFrameKey";
CPViewAnimationEffectKey="CPViewAnimationEffectKey";
CPViewAnimationFadeInEffect="CPViewAnimationFadeInEffect";
CPViewAnimationFadeOutEffect="CPViewAnimationFadeOutEffect";
var _1=objj_allocateClassPair(CPAnimation,"CPViewAnimation"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_viewAnimations")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("initWithViewAnimations:"),function(_3,_4,_5){
with(_3){
if(_3=objj_msgSendSuper({receiver:_3,super_class:objj_getClass("CPViewAnimation").super_class},"initWithDuration:animationCurve:",0.5,CPAnimationLinear)){
objj_msgSend(_3,"setViewAnimations:",_5);
}
return _3;
}
}),new objj_method(sel_getUid("startAnimation"),function(_6,_7){
with(_6){
var _8=objj_msgSend(_viewAnimations,"count");
while(_8--){
var _9=objj_msgSend(_viewAnimations,"objectAtIndex:",_8),_a=objj_msgSend(_6,"_targetView:",_9),_b=objj_msgSend(_6,"_startFrame:",_9);
objj_msgSend(_a,"setFrame:",_b);
var _c=objj_msgSend(_6,"_effect:",_9);
if(_c===CPViewAnimationFadeInEffect){
objj_msgSend(_a,"setAlphaValue:",0);
objj_msgSend(_6,"_targetView:setHidden:",_a,NO);
}else{
if(_c===CPViewAnimationFadeOutEffect){
objj_msgSend(_a,"setAlphaValue:",1);
}
}
}
objj_msgSendSuper({receiver:_6,super_class:objj_getClass("CPViewAnimation").super_class},"startAnimation");
}
}),new objj_method(sel_getUid("setCurrentProgress:"),function(_d,_e,_f){
with(_d){
objj_msgSendSuper({receiver:_d,super_class:objj_getClass("CPViewAnimation").super_class},"setCurrentProgress:",_f);
var _10=objj_msgSend(_viewAnimations,"count");
while(_10--){
var _11=objj_msgSend(_viewAnimations,"objectAtIndex:",_10),_12=objj_msgSend(_d,"_targetView:",_11),_13=objj_msgSend(_d,"_startFrame:",_11),_14=objj_msgSend(_d,"_endFrame:",_11),_15={origin:{x:0,y:0},size:{width:0,height:0}};
_15.origin.x=_14.origin.x-_13.origin.x;
_15.origin.y=_14.origin.y-_13.origin.y;
_15.size.width=_14.size.width-_13.size.width;
_15.size.height=_14.size.height-_13.size.height;
var _16={origin:{x:0,y:0},size:{width:0,height:0}};
_16.origin.x=_13.origin.x+_15.origin.x*_f;
_16.origin.y=_13.origin.y+_15.origin.y*_f;
_16.size.width=_13.size.width+_15.size.width*_f;
_16.size.height=_13.size.height+_15.size.height*_f;
objj_msgSend(_12,"setFrame:",_16);
var _17=objj_msgSend(_d,"_effect:",_11);
if(_17===CPViewAnimationFadeInEffect){
objj_msgSend(_12,"setAlphaValue:",1*_f);
}else{
if(_17===CPViewAnimationFadeOutEffect){
objj_msgSend(_12,"setAlphaValue:",1+(0-1)*_f);
}
}
if(_f===1){
objj_msgSend(_d,"_targetView:setHidden:",_12,(_14.size.width<=0||_14.size.height<=0)||objj_msgSend(_12,"alphaValue")===0);
}
}
}
}),new objj_method(sel_getUid("stopAnimation"),function(_18,_19){
with(_18){
var _1a=objj_msgSend(_viewAnimations,"count");
while(_1a--){
var _1b=objj_msgSend(_viewAnimations,"objectAtIndex:",_1a),_1c=objj_msgSend(_18,"_targetView:",_1b),_1d=objj_msgSend(_18,"_endFrame:",_1b);
objj_msgSend(_1c,"setFrame:",_1d);
var _1e=objj_msgSend(_18,"_effect:",_1b);
if(_1e===CPViewAnimationFadeInEffect){
objj_msgSend(_1c,"setAlphaValue:",1);
}else{
if(_1e===CPViewAnimationFadeOutEffect){
objj_msgSend(_1c,"setAlphaValue:",0);
}
}
objj_msgSend(_18,"_targetView:setHidden:",_1c,(_1d.size.width<=0||_1d.size.height<=0)||objj_msgSend(_1c,"alphaValue")===0);
}
objj_msgSendSuper({receiver:_18,super_class:objj_getClass("CPViewAnimation").super_class},"stopAnimation");
}
}),new objj_method(sel_getUid("_targetView:setHidden:"),function(_1f,_20,_21,_22){
with(_1f){
if(objj_msgSend(_21,"isKindOfClass:",objj_msgSend(CPWindow,"class"))){
if(_22){
objj_msgSend(_21,"orderOut:",_1f);
}else{
objj_msgSend(_21,"orderFront:",_1f);
}
}else{
objj_msgSend(_21,"setHidden:",_22);
}
}
}),new objj_method(sel_getUid("_targetView:"),function(_23,_24,_25){
with(_23){
var _26=objj_msgSend(_25,"valueForKey:",CPViewAnimationTargetKey);
if(!_26){
objj_msgSend(CPException,"raise:reason:",CPInternalInconsistencyException,objj_msgSend(CPString,"stringWithFormat:","view animation: %@ does not have a target view",objj_msgSend(_25,"description")));
}
return _26;
}
}),new objj_method(sel_getUid("_startFrame:"),function(_27,_28,_29){
with(_27){
var _2a=objj_msgSend(_29,"valueForKey:",CPViewAnimationStartFrameKey);
if(!_2a){
return objj_msgSend(objj_msgSend(_27,"_targetView:",_29),"frame");
}
return _2a;
}
}),new objj_method(sel_getUid("_endFrame:"),function(_2b,_2c,_2d){
with(_2b){
var _2e=objj_msgSend(_2d,"valueForKey:",CPViewAnimationEndFrameKey);
if(!_2e){
return objj_msgSend(objj_msgSend(_2b,"_targetView:",_2d),"frame");
}
return _2e;
}
}),new objj_method(sel_getUid("_effect:"),function(_2f,_30,_31){
with(_2f){
return objj_msgSend(_31,"valueForKey:",CPViewAnimationEffectKey);
}
}),new objj_method(sel_getUid("viewAnimations"),function(_32,_33){
with(_32){
return _viewAnimations;
}
}),new objj_method(sel_getUid("setViewAnimations:"),function(_34,_35,_36){
with(_34){
if(_36!=_viewAnimations){
objj_msgSend(_34,"stopAnimation");
_viewAnimations=objj_msgSend(_36,"copy");
}
}
})]);
p;18;CPViewController.jt;5641;@STATIC;1.0;I;20;Foundation/CPArray.ji;15;CPApplication.ji;7;CPCib.ji;13;CPResponder.jt;5548;
objj_executeFile("Foundation/CPArray.j",NO);
objj_executeFile("CPApplication.j",YES);
objj_executeFile("CPCib.j",YES);
objj_executeFile("CPResponder.j",YES);
var _1;
var _2=objj_allocateClassPair(CPResponder,"CPViewController"),_3=_2.isa;
class_addIvars(_2,[new objj_ivar("_view"),new objj_ivar("_isLoading"),new objj_ivar("_representedObject"),new objj_ivar("_title"),new objj_ivar("_cibName"),new objj_ivar("_cibBundle"),new objj_ivar("_cibExternalNameTable")]);
objj_registerClassPair(_2);
class_addMethods(_2,[new objj_method(sel_getUid("view"),function(_4,_5){
with(_4){
return _view;
}
}),new objj_method(sel_getUid("setView:"),function(_6,_7,_8){
with(_6){
_view=_8;
}
}),new objj_method(sel_getUid("representedObject"),function(_9,_a){
with(_9){
return _representedObject;
}
}),new objj_method(sel_getUid("setRepresentedObject:"),function(_b,_c,_d){
with(_b){
_representedObject=_d;
}
}),new objj_method(sel_getUid("title"),function(_e,_f){
with(_e){
return _title;
}
}),new objj_method(sel_getUid("setTitle:"),function(_10,_11,_12){
with(_10){
_title=_12;
}
}),new objj_method(sel_getUid("cibName"),function(_13,_14){
with(_13){
return _cibName;
}
}),new objj_method(sel_getUid("cibBundle"),function(_15,_16){
with(_15){
return _cibBundle;
}
}),new objj_method(sel_getUid("cibExternalNameTable"),function(_17,_18){
with(_17){
return _cibExternalNameTable;
}
}),new objj_method(sel_getUid("init"),function(_19,_1a){
with(_19){
return objj_msgSend(_19,"initWithCibName:bundle:",nil,nil);
}
}),new objj_method(sel_getUid("initWithCibName:bundle:"),function(_1b,_1c,_1d,_1e){
with(_1b){
return objj_msgSend(_1b,"initWithCibName:bundle:externalNameTable:",_1d,_1e,nil);
}
}),new objj_method(sel_getUid("initWithCibName:bundle:owner:"),function(_1f,_20,_21,_22,_23){
with(_1f){
return objj_msgSend(_1f,"initWithCibName:bundle:externalNameTable:",_21,_22,objj_msgSend(CPDictionary,"dictionaryWithObject:forKey:",_23,CPCibOwner));
}
}),new objj_method(sel_getUid("initWithCibName:bundle:externalNameTable:"),function(_24,_25,_26,_27,_28){
with(_24){
_24=objj_msgSendSuper({receiver:_24,super_class:objj_getClass("CPViewController").super_class},"init");
if(_24){
_cibName=_26;
_cibBundle=_27||objj_msgSend(CPBundle,"mainBundle");
_cibExternalNameTable=_28||objj_msgSend(CPDictionary,"dictionaryWithObject:forKey:",_24,CPCibOwner);
_isLoading=NO;
}
return _24;
}
}),new objj_method(sel_getUid("loadView"),function(_29,_2a){
with(_29){
if(_view){
return;
}
var cib=objj_msgSend(_1,"objectForKey:",_cibName);
if(!cib){
cib=objj_msgSend(objj_msgSend(CPCib,"alloc"),"initWithContentsOfURL:",objj_msgSend(_cibBundle,"pathForResource:",_cibName+".cib"));
objj_msgSend(_1,"setObject:forKey:",cib,_cibName);
}
objj_msgSend(cib,"instantiateCibWithExternalNameTable:",_cibExternalNameTable);
}
}),new objj_method(sel_getUid("view"),function(_2b,_2c){
with(_2b){
if(!_view){
_isLoading=YES;
var _2d=objj_msgSend(_cibExternalNameTable,"objectForKey:",CPCibOwner);
if(objj_msgSend(_2d,"respondsToSelector:",sel_getUid("viewControllerWillLoadCib:"))){
objj_msgSend(_2d,"viewControllerWillLoadCib:",_2b);
}
objj_msgSend(_2b,"loadView");
if(_view===nil&&objj_msgSend(_2d,"isKindOfClass:",objj_msgSend(CPDocument,"class"))){
objj_msgSend(_2b,"setView:",objj_msgSend(_2d,"valueForKey:","view"));
}
if(!_view){
var _2e=objj_msgSend(CPString,"stringWithFormat:","View for %@ could not be loaded from Cib or no view specified. Override loadView to load the view manually.",_2b);
objj_msgSend(CPException,"raise:reason:",CPInternalInconsistencyException,_2e);
}
if(objj_msgSend(_2d,"respondsToSelector:",sel_getUid("viewControllerDidLoadCib:"))){
objj_msgSend(_2d,"viewControllerDidLoadCib:",_2b);
}
_isLoading=NO;
objj_msgSend(_2b,"viewDidLoad");
}
return _view;
}
}),new objj_method(sel_getUid("viewDidLoad"),function(_2f,_30){
with(_2f){
}
}),new objj_method(sel_getUid("setView:"),function(_31,_32,_33){
with(_31){
var _34=!_view;
_view=_33;
if(!_isLoading&&_34){
objj_msgSend(_31,"viewDidLoad");
}
}
})]);
class_addMethods(_3,[new objj_method(sel_getUid("initialize"),function(_35,_36){
with(_35){
if(_35===CPViewController){
_1=objj_msgSend(CPDictionary,"dictionary");
}
}
})]);
var _37="CPViewControllerViewKey",_38="CPViewControllerTitleKey",_39="CPViewControllerCibNameKey",_3a="CPViewControllerBundleKey";
var _2=objj_getClass("CPViewController");
if(!_2){
throw new SyntaxError("*** Could not find definition for class \"CPViewController\"");
}
var _3=_2.isa;
class_addMethods(_2,[new objj_method(sel_getUid("initWithCoder:"),function(_3b,_3c,_3d){
with(_3b){
_3b=objj_msgSendSuper({receiver:_3b,super_class:objj_getClass("CPViewController").super_class},"initWithCoder:",_3d);
if(_3b){
_view=objj_msgSend(_3d,"decodeObjectForKey:",_37);
_title=objj_msgSend(_3d,"decodeObjectForKey:",_38);
_cibName=objj_msgSend(_3d,"decodeObjectForKey:",_39);
var _3e=objj_msgSend(_3d,"decodeObjectForKey:",_3a);
_cibBundle=_3e?objj_msgSend(CPBundle,"bundleWithPath:",_3e):objj_msgSend(CPBundle,"mainBundle");
_cibExternalNameTable=objj_msgSend(CPDictionary,"dictionaryWithObject:forKey:",_3b,CPCibOwner);
}
return _3b;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_3f,_40,_41){
with(_3f){
objj_msgSendSuper({receiver:_3f,super_class:objj_getClass("CPViewController").super_class},"encodeWithCoder:",_41);
objj_msgSend(_41,"encodeObject:forKey:",_view,_37);
objj_msgSend(_41,"encodeObject:forKey:",_title,_38);
objj_msgSend(_41,"encodeObject:forKey:",_cibName,_39);
objj_msgSend(_41,"encodeObject:forKey:",objj_msgSend(_cibBundle,"bundlePath"),_3a);
}
})]);
p;11;CPWebView.jt;18470;@STATIC;1.0;i;8;CPView.ji;14;CPScrollView.jt;18419;
objj_executeFile("CPView.j",YES);
objj_executeFile("CPScrollView.j",YES);
CPWebViewProgressStartedNotification="CPWebViewProgressStartedNotification";
CPWebViewProgressFinishedNotification="CPWebViewProgressFinishedNotification";
CPWebViewScrollAuto=0;
CPWebViewScrollAppKit=1;
CPWebViewScrollNative=2;
CPWebViewScrollNone=3;
CPWebViewAppKitScrollPollInterval=1;
CPWebViewAppKitScrollMaxPollCount=3;
var _1=objj_allocateClassPair(CPView,"CPWebView"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_scrollView"),new objj_ivar("_frameView"),new objj_ivar("_iframe"),new objj_ivar("_mainFrameURL"),new objj_ivar("_backwardStack"),new objj_ivar("_forwardStack"),new objj_ivar("_ignoreLoadStart"),new objj_ivar("_ignoreLoadEnd"),new objj_ivar("_isLoading"),new objj_ivar("_downloadDelegate"),new objj_ivar("_frameLoadDelegate"),new objj_ivar("_policyDelegate"),new objj_ivar("_resourceLoadDelegate"),new objj_ivar("_UIDelegate"),new objj_ivar("_wso"),new objj_ivar("_url"),new objj_ivar("_html"),new objj_ivar("_loadCallback"),new objj_ivar("_scrollMode"),new objj_ivar("_effectiveScrollMode"),new objj_ivar("_contentIsAccessible"),new objj_ivar("_contentSizeCheckTimer"),new objj_ivar("_contentSizePollCount"),new objj_ivar("_loadHTMLStringTimer"),new objj_ivar("_drawsBackground")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("initWithFrame:frameName:groupName:"),function(_3,_4,_5,_6,_7){
with(_3){
if(_3=objj_msgSend(_3,"initWithFrame:",_5)){
_iframe.name=_6;
}
return _3;
}
}),new objj_method(sel_getUid("initWithFrame:"),function(_8,_9,_a){
with(_8){
if(_8=objj_msgSendSuper({receiver:_8,super_class:objj_getClass("CPWebView").super_class},"initWithFrame:",_a)){
_mainFrameURL=nil;
_backwardStack=[];
_forwardStack=[];
_scrollMode=CPWebViewScrollAuto;
_contentIsAccessible=YES;
_isLoading=NO;
_drawsBackground=YES;
objj_msgSend(_8,"setBackgroundColor:",objj_msgSend(CPColor,"whiteColor"));
objj_msgSend(_8,"_initDOMWithFrame:",_a);
}
return _8;
}
}),new objj_method(sel_getUid("_initDOMWithFrame:"),function(_b,_c,_d){
with(_b){
_ignoreLoadStart=YES;
_ignoreLoadEnd=YES;
_iframe=document.createElement("iframe");
_iframe.name="iframe_"+FLOOR(RAND()*10000);
_iframe.style.width="100%";
_iframe.style.height="100%";
_iframe.style.borderWidth="0px";
_iframe.frameBorder="0";
objj_msgSend(_b,"_applyBackgroundColor");
_loadCallback=function(){
if(!_ignoreLoadStart){
objj_msgSend(_b,"_startedLoading");
if(_mainFrameURL){
objj_msgSend(_backwardStack,"addObject:",_mainFrameURL);
}
_mainFrameURL=_iframe.src;
objj_msgSend(_forwardStack,"removeAllObjects");
}else{
_ignoreLoadStart=NO;
}
if(!_ignoreLoadEnd){
objj_msgSend(_b,"_finishedLoading");
}else{
_ignoreLoadEnd=NO;
}
objj_msgSend(objj_msgSend(CPRunLoop,"currentRunLoop"),"limitDateForMode:",CPDefaultRunLoopMode);
};
if(_iframe.addEventListener){
_iframe.addEventListener("load",_loadCallback,false);
}else{
if(_iframe.attachEvent){
_iframe.attachEvent("onload",_loadCallback);
}
}
_frameView=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",objj_msgSend(_b,"bounds"));
objj_msgSend(_frameView,"setAutoresizingMask:",CPViewWidthSizable|CPViewHeightSizable);
_scrollView=objj_msgSend(objj_msgSend(CPScrollView,"alloc"),"initWithFrame:",objj_msgSend(_b,"bounds"));
objj_msgSend(_scrollView,"setAutohidesScrollers:",YES);
objj_msgSend(_scrollView,"setAutoresizingMask:",CPViewWidthSizable|CPViewHeightSizable);
objj_msgSend(_scrollView,"setDocumentView:",_frameView);
_frameView._DOMElement.appendChild(_iframe);
objj_msgSend(_b,"_updateEffectiveScrollMode");
objj_msgSend(_b,"addSubview:",_scrollView);
}
}),new objj_method(sel_getUid("setFrameSize:"),function(_e,_f,_10){
with(_e){
objj_msgSendSuper({receiver:_e,super_class:objj_getClass("CPWebView").super_class},"setFrameSize:",_10);
objj_msgSend(_e,"_resizeWebFrame");
}
}),new objj_method(sel_getUid("viewDidUnhide"),function(_11,_12){
with(_11){
objj_msgSend(_frameView,"setFrameSize:",objj_msgSend(_scrollView,"contentSize"));
objj_msgSend(_11,"_resizeWebFrame");
objj_msgSend(_11,"_scheduleContentSizeCheck");
}
}),new objj_method(sel_getUid("_attachScrollEventIfNecessary"),function(_13,_14){
with(_13){
if(_effectiveScrollMode!==CPWebViewScrollAppKit){
return;
}
var win=null;
try{
win=objj_msgSend(_13,"DOMWindow");
}
catch(e){
}
if(win&&win.addEventListener){
var _15=function(_16){
var _17=objj_msgSend(_13,"bounds"),_18=CGPointMake(CGRectGetMidX(_17),CGRectGetMidY(_17)),_19=objj_msgSend(_13,"convertPoint:toView:",_18,nil),_1a=objj_msgSend(objj_msgSend(_13,"window"),"convertBaseToBridge:",_19);
_16._overrideLocation=_1a;
objj_msgSend(objj_msgSend(objj_msgSend(_13,"window"),"platformWindow"),"scrollEvent:",_16);
};
win.addEventListener("DOMMouseScroll",_15,false);
}
}
}),new objj_method(sel_getUid("_resizeWebFrame"),function(_1b,_1c){
with(_1b){
if(!objj_msgSend(_1b,"_isVisible")){
return;
}
if(_effectiveScrollMode===CPWebViewScrollAppKit){
var _1d=objj_msgSend(_frameView,"visibleRect");
objj_msgSend(_frameView,"setFrameSize:",CGSizeMake(CGRectGetMaxX(_1d),CGRectGetMaxY(_1d)));
var win=null;
try{
win=objj_msgSend(_1b,"DOMWindow");
}
catch(e){
}
if(win&&win.document&&win.document.body){
var _1e=win.document.body.scrollWidth,_1f=win.document.body.scrollHeight;
_iframe.setAttribute("width",_1e);
_iframe.setAttribute("height",_1f);
objj_msgSend(_frameView,"setFrameSize:",CGSizeMake(_1e,_1f));
}else{
if(!win||!win.document){
CPLog.warn("using default size 800*1600");
objj_msgSend(_frameView,"setFrameSize:",CGSizeMake(800,1600));
}
}
objj_msgSend(_frameView,"scrollRectToVisible:",_1d);
}
}
}),new objj_method(sel_getUid("setScrollMode:"),function(_20,_21,_22){
with(_20){
if(_scrollMode==_22){
return;
}
_scrollMode=_22;
objj_msgSend(_20,"_updateEffectiveScrollMode");
}
}),new objj_method(sel_getUid("effectiveScrollMode"),function(_23,_24){
with(_23){
return _effectiveScrollMode;
}
}),new objj_method(sel_getUid("_updateEffectiveScrollMode"),function(_25,_26){
with(_25){
var _27=CPWebViewScrollAppKit;
if(_scrollMode==CPWebViewScrollNative||(_scrollMode==CPWebViewScrollAuto&&!_contentIsAccessible)||CPBrowserIsEngine(CPInternetExplorerBrowserEngine)){
_27=CPWebViewScrollNative;
}else{
if(_scrollMode==CPWebViewScrollAppKit&&!_contentIsAccessible){
CPLog.warn(_25+" unable to use CPWebViewScrollAppKit scroll mode due to same origin policy.");
_27=CPWebViewScrollNative;
}
}
if(_27!==_effectiveScrollMode){
objj_msgSend(_25,"_setEffectiveScrollMode:",_27);
}
}
}),new objj_method(sel_getUid("_setEffectiveScrollMode:"),function(_28,_29,_2a){
with(_28){
_effectiveScrollMode=_2a;
_ignoreLoadStart=YES;
_ignoreLoadEnd=YES;
var _2b=_iframe.parentNode;
_2b.removeChild(_iframe);
if(_effectiveScrollMode===CPWebViewScrollAppKit){
objj_msgSend(_scrollView,"setHasHorizontalScroller:",YES);
objj_msgSend(_scrollView,"setHasVerticalScroller:",YES);
_iframe.setAttribute("scrolling","no");
}else{
if(_effectiveScrollMode===CPWebViewScrollNone){
objj_msgSend(_scrollView,"setHasHorizontalScroller:",NO);
objj_msgSend(_scrollView,"setHasVerticalScroller:",NO);
_iframe.setAttribute("scrolling","no");
}else{
objj_msgSend(_scrollView,"setHasHorizontalScroller:",NO);
objj_msgSend(_scrollView,"setHasVerticalScroller:",NO);
_iframe.setAttribute("scrolling","auto");
objj_msgSend(_frameView,"setFrameSize:",objj_msgSend(_scrollView,"bounds").size);
}
}
_2b.appendChild(_iframe);
objj_msgSend(_28,"_applyBackgroundColor");
objj_msgSend(_28,"_resizeWebFrame");
}
}),new objj_method(sel_getUid("_maybePollWebFrameSize"),function(_2c,_2d){
with(_2c){
if(CPWebViewAppKitScrollMaxPollCount==0||_contentSizePollCount++<CPWebViewAppKitScrollMaxPollCount){
objj_msgSend(_2c,"_resizeWebFrame");
}else{
objj_msgSend(_contentSizeCheckTimer,"invalidate");
}
}
}),new objj_method(sel_getUid("loadHTMLString:"),function(_2e,_2f,_30){
with(_2e){
objj_msgSend(_2e,"loadHTMLString:baseURL:",_30,nil);
}
}),new objj_method(sel_getUid("loadHTMLString:baseURL:"),function(_31,_32,_33,URL){
with(_31){
objj_msgSend(_frameView,"setFrameSize:",objj_msgSend(_scrollView,"contentSize"));
objj_msgSend(_31,"_startedLoading");
_ignoreLoadStart=YES;
_url=nil;
_html=_33;
objj_msgSend(_31,"_load");
}
}),new objj_method(sel_getUid("_loadMainFrameURL"),function(_34,_35){
with(_34){
objj_msgSend(_34,"_startedLoading");
_ignoreLoadStart=YES;
_url=_mainFrameURL;
_html=nil;
objj_msgSend(_34,"_load");
}
}),new objj_method(sel_getUid("_load"),function(_36,_37){
with(_36){
if(_url){
var _38=objj_msgSend(CPURL,"URLWithString:",_url);
_contentIsAccessible=objj_msgSend(_38,"_passesSameOriginPolicy");
objj_msgSend(_36,"_updateEffectiveScrollMode");
_ignoreLoadEnd=NO;
_iframe.src=_url;
}else{
if(_html!==nil){
_iframe.src="";
_contentIsAccessible=YES;
objj_msgSend(_36,"_updateEffectiveScrollMode");
_ignoreLoadEnd=NO;
if(_loadHTMLStringTimer!==nil){
window.clearTimeout(_loadHTMLStringTimer);
_loadHTMLStringTimer=nil;
}
_loadHTMLStringTimer=window.setTimeout(function(){
var win=objj_msgSend(_36,"DOMWindow");
if(win){
win.document.write(_html||"<html><body></body></html>");
}
window.setTimeout(_loadCallback,1);
},0);
}
}
}
}),new objj_method(sel_getUid("_startedLoading"),function(_39,_3a){
with(_39){
_isLoading=YES;
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:",CPWebViewProgressStartedNotification,_39);
if(objj_msgSend(_frameLoadDelegate,"respondsToSelector:",sel_getUid("webView:didStartProvisionalLoadForFrame:"))){
objj_msgSend(_frameLoadDelegate,"webView:didStartProvisionalLoadForFrame:",_39,nil);
}
}
}),new objj_method(sel_getUid("_finishedLoading"),function(_3b,_3c){
with(_3b){
_isLoading=NO;
objj_msgSend(_3b,"_resizeWebFrame");
objj_msgSend(_3b,"_attachScrollEventIfNecessary");
objj_msgSend(_3b,"_scheduleContentSizeCheck");
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:",CPWebViewProgressFinishedNotification,_3b);
if(objj_msgSend(_frameLoadDelegate,"respondsToSelector:",sel_getUid("webView:didFinishLoadForFrame:"))){
objj_msgSend(_frameLoadDelegate,"webView:didFinishLoadForFrame:",_3b,nil);
}
}
}),new objj_method(sel_getUid("_scheduleContentSizeCheck"),function(_3d,_3e){
with(_3d){
objj_msgSend(_contentSizeCheckTimer,"invalidate");
if(_effectiveScrollMode==CPWebViewScrollAppKit){
_contentSizePollCount=0;
_contentSizeCheckTimer=objj_msgSend(CPTimer,"scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:",CPWebViewAppKitScrollPollInterval,_3d,sel_getUid("_maybePollWebFrameSize"),nil,YES);
}
}
}),new objj_method(sel_getUid("isLoading"),function(_3f,_40){
with(_3f){
return _isLoading;
}
}),new objj_method(sel_getUid("mainFrameURL"),function(_41,_42){
with(_41){
return _mainFrameURL;
}
}),new objj_method(sel_getUid("setMainFrameURL:"),function(_43,_44,_45){
with(_43){
if(_mainFrameURL){
objj_msgSend(_backwardStack,"addObject:",_mainFrameURL);
}
_mainFrameURL=_45;
objj_msgSend(_forwardStack,"removeAllObjects");
objj_msgSend(_43,"_loadMainFrameURL");
}
}),new objj_method(sel_getUid("goBack"),function(_46,_47){
with(_46){
if(_backwardStack.length>0){
if(_mainFrameURL){
objj_msgSend(_forwardStack,"addObject:",_mainFrameURL);
}
_mainFrameURL=objj_msgSend(_backwardStack,"lastObject");
objj_msgSend(_backwardStack,"removeLastObject");
objj_msgSend(_46,"_loadMainFrameURL");
return YES;
}
return NO;
}
}),new objj_method(sel_getUid("goForward"),function(_48,_49){
with(_48){
if(_forwardStack.length>0){
if(_mainFrameURL){
objj_msgSend(_backwardStack,"addObject:",_mainFrameURL);
}
_mainFrameURL=objj_msgSend(_forwardStack,"lastObject");
objj_msgSend(_forwardStack,"removeLastObject");
objj_msgSend(_48,"_loadMainFrameURL");
return YES;
}
return NO;
}
}),new objj_method(sel_getUid("canGoBack"),function(_4a,_4b){
with(_4a){
return (_backwardStack.length>0);
}
}),new objj_method(sel_getUid("canGoForward"),function(_4c,_4d){
with(_4c){
return (_forwardStack.length>0);
}
}),new objj_method(sel_getUid("backForwardList"),function(_4e,_4f){
with(_4e){
return {back:_backwardStack,forward:_forwardStack};
}
}),new objj_method(sel_getUid("close"),function(_50,_51){
with(_50){
_iframe.parentNode.removeChild(_iframe);
}
}),new objj_method(sel_getUid("DOMWindow"),function(_52,_53){
with(_52){
return (_iframe.contentDocument&&_iframe.contentDocument.defaultView)||_iframe.contentWindow;
}
}),new objj_method(sel_getUid("windowScriptObject"),function(_54,_55){
with(_54){
var win=objj_msgSend(_54,"DOMWindow");
if(!_wso||win!=objj_msgSend(_wso,"window")){
if(win){
_wso=objj_msgSend(objj_msgSend(CPWebScriptObject,"alloc"),"initWithWindow:",win);
}else{
_wso=nil;
}
}
return _wso;
}
}),new objj_method(sel_getUid("stringByEvaluatingJavaScriptFromString:"),function(_56,_57,_58){
with(_56){
var _59=objj_msgSend(_56,"objectByEvaluatingJavaScriptFromString:",_58);
return _59?String(_59):nil;
}
}),new objj_method(sel_getUid("objectByEvaluatingJavaScriptFromString:"),function(_5a,_5b,_5c){
with(_5a){
return objj_msgSend(objj_msgSend(_5a,"windowScriptObject"),"evaluateWebScript:",_5c);
}
}),new objj_method(sel_getUid("computedStyleForElement:pseudoElement:"),function(_5d,_5e,_5f,_60){
with(_5d){
var win=objj_msgSend(objj_msgSend(_5d,"windowScriptObject"),"window");
if(win){
return win.document.defaultView.getComputedStyle(_5f,_60);
}
return nil;
}
}),new objj_method(sel_getUid("drawsBackground"),function(_61,_62){
with(_61){
return _drawsBackground;
}
}),new objj_method(sel_getUid("setDrawsBackground:"),function(_63,_64,_65){
with(_63){
if(_65==_drawsBackground){
return;
}
_drawsBackground=_65;
objj_msgSend(_63,"_applyBackgroundColor");
}
}),new objj_method(sel_getUid("setBackgroundColor:"),function(_66,_67,_68){
with(_66){
objj_msgSendSuper({receiver:_66,super_class:objj_getClass("CPWebView").super_class},"setBackgroundColor:",_68);
objj_msgSend(_66,"_applyBackgroundColor");
}
}),new objj_method(sel_getUid("_applyBackgroundColor"),function(_69,_6a){
with(_69){
if(_iframe){
var _6b=objj_msgSend(_69,"backgroundColor")||objj_msgSend(CPColor,"whiteColor");
_iframe.allowtransparency=!_drawsBackground;
_iframe.style.backgroundColor=_drawsBackground?objj_msgSend(_6b,"cssString"):"transparent";
}
}
}),new objj_method(sel_getUid("takeStringURLFrom:"),function(_6c,_6d,_6e){
with(_6c){
objj_msgSend(_6c,"setMainFrameURL:",objj_msgSend(_6e,"stringValue"));
}
}),new objj_method(sel_getUid("goBack:"),function(_6f,_70,_71){
with(_6f){
objj_msgSend(_6f,"goBack");
}
}),new objj_method(sel_getUid("goForward:"),function(_72,_73,_74){
with(_72){
objj_msgSend(_72,"goForward");
}
}),new objj_method(sel_getUid("stopLoading:"),function(_75,_76,_77){
with(_75){
}
}),new objj_method(sel_getUid("reload:"),function(_78,_79,_7a){
with(_78){
if(!_url&&(_html!==nil)){
objj_msgSend(_78,"loadHTMLString:",_html);
}else{
objj_msgSend(_78,"_loadMainFrameURL");
}
}
}),new objj_method(sel_getUid("print:"),function(_7b,_7c,_7d){
with(_7b){
try{
objj_msgSend(_7b,"DOMWindow").print();
}
catch(e){
alert("Please click the webpage and select \"Print\" from the \"File\" menu");
}
}
}),new objj_method(sel_getUid("downloadDelegate"),function(_7e,_7f){
with(_7e){
return _downloadDelegate;
}
}),new objj_method(sel_getUid("setDownloadDelegate:"),function(_80,_81,_82){
with(_80){
_downloadDelegate=_82;
}
}),new objj_method(sel_getUid("frameLoadDelegate"),function(_83,_84){
with(_83){
return _frameLoadDelegate;
}
}),new objj_method(sel_getUid("setFrameLoadDelegate:"),function(_85,_86,_87){
with(_85){
_frameLoadDelegate=_87;
}
}),new objj_method(sel_getUid("policyDelegate"),function(_88,_89){
with(_88){
return _policyDelegate;
}
}),new objj_method(sel_getUid("setPolicyDelegate:"),function(_8a,_8b,_8c){
with(_8a){
_policyDelegate=_8c;
}
}),new objj_method(sel_getUid("resourceLoadDelegate"),function(_8d,_8e){
with(_8d){
return _resourceLoadDelegate;
}
}),new objj_method(sel_getUid("setResourceLoadDelegate:"),function(_8f,_90,_91){
with(_8f){
_resourceLoadDelegate=_91;
}
}),new objj_method(sel_getUid("UIDelegate"),function(_92,_93){
with(_92){
return _UIDelegate;
}
}),new objj_method(sel_getUid("setUIDelegate:"),function(_94,_95,_96){
with(_94){
_UIDelegate=_96;
}
})]);
var _1=objj_allocateClassPair(CPObject,"CPWebScriptObject"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_window")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("initWithWindow:"),function(_97,_98,_99){
with(_97){
if(_97=objj_msgSendSuper({receiver:_97,super_class:objj_getClass("CPWebScriptObject").super_class},"init")){
_window=_99;
}
return _97;
}
}),new objj_method(sel_getUid("callWebScriptMethod:withArguments:"),function(_9a,_9b,_9c,_9d){
with(_9a){
if(typeof _window[_9c]=="function"){
try{
return _window[_9c].apply(_9d);
}
catch(e){
}
}
return undefined;
}
}),new objj_method(sel_getUid("evaluateWebScript:"),function(_9e,_9f,_a0){
with(_9e){
try{
return _window.eval(_a0);
}
catch(e){
}
return undefined;
}
}),new objj_method(sel_getUid("window"),function(_a1,_a2){
with(_a1){
return _window;
}
})]);
var _1=objj_getClass("CPWebView");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"CPWebView\"");
}
var _2=_1.isa;
class_addMethods(_1,[new objj_method(sel_getUid("initWithCoder:"),function(_a3,_a4,_a5){
with(_a3){
_a3=objj_msgSendSuper({receiver:_a3,super_class:objj_getClass("CPWebView").super_class},"initWithCoder:",_a5);
if(_a3){
_mainFrameURL=nil;
_backwardStack=[];
_forwardStack=[];
_scrollMode=CPWebViewScrollAuto;
objj_msgSend(_a3,"_initDOMWithFrame:",objj_msgSend(_a3,"frame"));
if(!objj_msgSend(_a3,"backgroundColor")){
objj_msgSend(_a3,"setBackgroundColor:",objj_msgSend(CPColor,"whiteColor"));
}
objj_msgSend(_a3,"_updateEffectiveScrollMode");
}
return _a3;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_a6,_a7,_a8){
with(_a6){
var _a9=_subviews;
_subviews=[];
objj_msgSendSuper({receiver:_a6,super_class:objj_getClass("CPWebView").super_class},"encodeWithCoder:",_a8);
_subviews=_a9;
}
})]);
var _1=objj_getClass("CPURL");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"CPURL\"");
}
var _2=_1.isa;
class_addMethods(_1,[new objj_method(sel_getUid("_passesSameOriginPolicy"),function(_aa,_ab){
with(_aa){
var _ac=objj_msgSend(CPURL,"URLWithString:",window.location.href);
if(objj_msgSend(_ac,"isFileURL")&&CPFeatureIsCompatible(CPSOPDisabledFromFileURLs)){
return YES;
}
return (objj_msgSend(_ac,"scheme")==objj_msgSend(_aa,"scheme")&&objj_msgSend(_ac,"host")==objj_msgSend(_aa,"host")&&objj_msgSend(_ac,"port")==objj_msgSend(_aa,"port"));
}
})]);
p;20;CPWindowController.jt;9265;@STATIC;1.0;I;21;Foundation/CPObject.jI;21;Foundation/CPString.ji;13;CPResponder.ji;10;CPWindow.ji;12;CPDocument.jt;9144;
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("Foundation/CPString.j",NO);
objj_executeFile("CPResponder.j",YES);
objj_executeFile("CPWindow.j",YES);
objj_executeFile("CPDocument.j",YES);
var _1=objj_allocateClassPair(CPResponder,"CPWindowController"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_window"),new objj_ivar("_documents"),new objj_ivar("_document"),new objj_ivar("_shouldCloseDocument"),new objj_ivar("_supportsMultipleDocuments"),new objj_ivar("_cibOwner"),new objj_ivar("_windowCibName"),new objj_ivar("_windowCibPath"),new objj_ivar("_viewController"),new objj_ivar("_viewControllerContainerView")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("init"),function(_3,_4){
with(_3){
return objj_msgSend(_3,"initWithWindow:",nil);
}
}),new objj_method(sel_getUid("initWithWindow:"),function(_5,_6,_7){
with(_5){
_5=objj_msgSendSuper({receiver:_5,super_class:objj_getClass("CPWindowController").super_class},"init");
if(_5){
objj_msgSend(_5,"setWindow:",_7);
objj_msgSend(_5,"setShouldCloseDocument:",NO);
objj_msgSend(_5,"setNextResponder:",CPApp);
_documents=[];
}
return _5;
}
}),new objj_method(sel_getUid("initWithWindowCibName:"),function(_8,_9,_a){
with(_8){
return objj_msgSend(_8,"initWithWindowCibName:owner:",_a,_8);
}
}),new objj_method(sel_getUid("initWithWindowCibName:owner:"),function(_b,_c,_d,_e){
with(_b){
_b=objj_msgSend(_b,"initWithWindow:",nil);
if(_b){
_cibOwner=_e;
_windowCibName=_d;
}
return _b;
}
}),new objj_method(sel_getUid("initWithWindowCibPath:owner:"),function(_f,_10,_11,_12){
with(_f){
_f=objj_msgSend(_f,"initWithWindow:",nil);
if(_f){
_cibOwner=_12;
_windowCibPath=_11;
}
return _f;
}
}),new objj_method(sel_getUid("loadWindow"),function(_13,_14){
with(_13){
if(_window){
return;
}
objj_msgSend(objj_msgSend(CPBundle,"mainBundle"),"loadCibFile:externalNameTable:",objj_msgSend(_13,"windowCibPath"),objj_msgSend(CPDictionary,"dictionaryWithObject:forKey:",_cibOwner,CPCibOwner));
}
}),new objj_method(sel_getUid("showWindow:"),function(_15,_16,_17){
with(_15){
var _18=objj_msgSend(_15,"window");
if(objj_msgSend(_18,"respondsToSelector:",sel_getUid("becomesKeyOnlyIfNeeded"))&&objj_msgSend(_18,"becomesKeyOnlyIfNeeded")){
objj_msgSend(_18,"orderFront:",_17);
}else{
objj_msgSend(_18,"makeKeyAndOrderFront:",_17);
}
}
}),new objj_method(sel_getUid("isWindowLoaded"),function(_19,_1a){
with(_19){
return _window!==nil;
}
}),new objj_method(sel_getUid("window"),function(_1b,_1c){
with(_1b){
if(!_window){
objj_msgSend(_1b,"windowWillLoad");
objj_msgSend(_document,"windowControllerWillLoadCib:",_1b);
objj_msgSend(_1b,"loadWindow");
if(_window===nil&&objj_msgSend(_cibOwner,"isKindOfClass:",objj_msgSend(CPDocument,"class"))){
objj_msgSend(_1b,"setWindow:",objj_msgSend(_cibOwner,"valueForKey:","window"));
}
if(!_window){
var _1d=objj_msgSend(CPString,"stringWithFormat:","Window for %@ could not be loaded from Cib or no window specified.                                                         Override loadWindow to load the window manually.",_1b);
objj_msgSend(CPException,"raise:reason:",CPInternalInconsistencyException,_1d);
}
objj_msgSend(_1b,"windowDidLoad");
objj_msgSend(_document,"windowControllerDidLoadCib:",_1b);
objj_msgSend(_1b,"synchronizeWindowTitleWithDocumentName");
}
return _window;
}
}),new objj_method(sel_getUid("setWindow:"),function(_1e,_1f,_20){
with(_1e){
objj_msgSend(_window,"setWindowController:",nil);
_window=_20;
objj_msgSend(_window,"setWindowController:",_1e);
objj_msgSend(_window,"setNextResponder:",_1e);
}
}),new objj_method(sel_getUid("windowDidLoad"),function(_21,_22){
with(_21){
}
}),new objj_method(sel_getUid("windowWillLoad"),function(_23,_24){
with(_23){
}
}),new objj_method(sel_getUid("setDocument:"),function(_25,_26,_27){
with(_25){
if(_document===_27){
return;
}
var _28=objj_msgSend(CPNotificationCenter,"defaultCenter");
if(_document){
if(!objj_msgSend(_25,"supportsMultipleDocuments")){
objj_msgSend(_25,"removeDocument:",_document);
}
objj_msgSend(_28,"removeObserver:name:object:",_25,CPDocumentWillSaveNotification,_document);
objj_msgSend(_28,"removeObserver:name:object:",_25,CPDocumentDidSaveNotification,_document);
objj_msgSend(_28,"removeObserver:name:object:",_25,CPDocumentDidFailToSaveNotification,_document);
}
_document=_27;
if(_document){
objj_msgSend(_25,"addDocument:",_document);
objj_msgSend(_28,"addObserver:selector:name:object:",_25,sel_getUid("_documentWillSave:"),CPDocumentWillSaveNotification,_document);
objj_msgSend(_28,"addObserver:selector:name:object:",_25,sel_getUid("_documentDidSave:"),CPDocumentDidSaveNotification,_document);
objj_msgSend(_28,"addObserver:selector:name:object:",_25,sel_getUid("_documentDidFailToSave:"),CPDocumentDidFailToSaveNotification,_document);
objj_msgSend(_25,"setDocumentEdited:",objj_msgSend(_document,"isDocumentEdited"));
}
var _29=objj_msgSend(_document,"viewControllerForWindowController:",_25);
if(_29){
objj_msgSend(_25,"setViewController:",_29);
}
objj_msgSend(_25,"synchronizeWindowTitleWithDocumentName");
objj_msgSend(objj_msgSend(objj_msgSend(_25,"window"),"toolbar"),"validateVisibleItems");
}
}),new objj_method(sel_getUid("setSupportsMultipleDocuments:"),function(_2a,_2b,_2c){
with(_2a){
_supportsMultipleDocuments=_2c;
}
}),new objj_method(sel_getUid("supportsMultipleDocuments"),function(_2d,_2e){
with(_2d){
return _supportsMultipleDocuments;
}
}),new objj_method(sel_getUid("addDocument:"),function(_2f,_30,_31){
with(_2f){
if(_31&&!objj_msgSend(_documents,"containsObject:",_31)){
objj_msgSend(_documents,"addObject:",_31);
}
}
}),new objj_method(sel_getUid("removeDocument:"),function(_32,_33,_34){
with(_32){
var _35=objj_msgSend(_documents,"indexOfObjectIdenticalTo:",_34);
if(_35===CPNotFound){
return;
}
objj_msgSend(_documents,"removeObjectAtIndex:",_35);
if(_document===_34&&objj_msgSend(_documents,"count")){
objj_msgSend(_32,"setDocument:",objj_msgSend(_documents,"objectAtIndex:",MIN(_35,objj_msgSend(_documents,"count")-1)));
}
}
}),new objj_method(sel_getUid("removeDocumentAndCloseIfNecessary:"),function(_36,_37,_38){
with(_36){
objj_msgSend(_36,"removeDocument:",_38);
if(!objj_msgSend(_documents,"count")){
objj_msgSend(_36,"close");
}
}
}),new objj_method(sel_getUid("documents"),function(_39,_3a){
with(_39){
return _documents;
}
}),new objj_method(sel_getUid("setViewControllerContainerView:"),function(_3b,_3c,_3d){
with(_3b){
_viewControllerContainerView=_3d;
}
}),new objj_method(sel_getUid("viewControllerContainerView"),function(_3e,_3f){
with(_3e){
return _viewControllerContainerView;
}
}),new objj_method(sel_getUid("setViewController:"),function(_40,_41,_42){
with(_40){
var _43=objj_msgSend(_40,"viewControllerContainerView")||objj_msgSend(objj_msgSend(_40,"window"),"contentView"),_44=objj_msgSend(_viewController,"view"),_45=_44?objj_msgSend(_44,"frame"):objj_msgSend(_43,"bounds");
objj_msgSend(_44,"removeFromSuperview");
_viewController=_42;
_44=objj_msgSend(_viewController,"view");
if(_44){
objj_msgSend(_44,"setFrame:",_45);
objj_msgSend(_43,"addSubview:",_44);
}
}
}),new objj_method(sel_getUid("viewController"),function(_46,_47){
with(_46){
return _viewController;
}
}),new objj_method(sel_getUid("_documentWillSave:"),function(_48,_49,_4a){
with(_48){
objj_msgSend(objj_msgSend(_48,"window"),"setDocumentSaving:",YES);
}
}),new objj_method(sel_getUid("_documentDidSave:"),function(_4b,_4c,_4d){
with(_4b){
objj_msgSend(objj_msgSend(_4b,"window"),"setDocumentSaving:",NO);
}
}),new objj_method(sel_getUid("_documentDidFailToSave:"),function(_4e,_4f,_50){
with(_4e){
objj_msgSend(objj_msgSend(_4e,"window"),"setDocumentSaving:",NO);
}
}),new objj_method(sel_getUid("document"),function(_51,_52){
with(_51){
return _document;
}
}),new objj_method(sel_getUid("setDocumentEdited:"),function(_53,_54,_55){
with(_53){
objj_msgSend(objj_msgSend(_53,"window"),"setDocumentEdited:",_55);
}
}),new objj_method(sel_getUid("close"),function(_56,_57){
with(_56){
objj_msgSend(objj_msgSend(_56,"window"),"close");
}
}),new objj_method(sel_getUid("setShouldCloseDocument:"),function(_58,_59,_5a){
with(_58){
_shouldCloseDocument=_5a;
}
}),new objj_method(sel_getUid("shouldCloseDocument"),function(_5b,_5c){
with(_5b){
return _shouldCloseDocument;
}
}),new objj_method(sel_getUid("owner"),function(_5d,_5e){
with(_5d){
return _cibOwner;
}
}),new objj_method(sel_getUid("windowCibName"),function(_5f,_60){
with(_5f){
if(_windowCibName){
return _windowCibName;
}
return objj_msgSend(objj_msgSend(_windowCibPath,"lastPathComponent"),"stringByDeletingPathExtension");
}
}),new objj_method(sel_getUid("windowCibPath"),function(_61,_62){
with(_61){
if(_windowCibPath){
return _windowCibPath;
}
return objj_msgSend(objj_msgSend(CPBundle,"mainBundle"),"pathForResource:",_windowCibName+".cib");
}
}),new objj_method(sel_getUid("synchronizeWindowTitleWithDocumentName"),function(_63,_64){
with(_63){
if(!_document||!_window){
return;
}
objj_msgSend(_window,"setTitle:",objj_msgSend(_63,"windowTitleForDocumentDisplayName:",objj_msgSend(_document,"displayName")));
}
}),new objj_method(sel_getUid("windowTitleForDocumentDisplayName:"),function(_65,_66,_67){
with(_65){
return _67;
}
})]);
p;20;_CPCibClassSwapper.jt;1345;@STATIC;1.0;I;21;Foundation/CPObject.jI;21;Foundation/CPString.jt;1274;
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("Foundation/CPString.j",NO);
var _1="_CPCibClassSwapperClassNameKey",_2="_CPCibClassSwapperOriginalClassNameKey";
var _3=objj_allocateClassPair(CPObject,"_CPCibClassSwapper"),_4=_3.isa;
objj_registerClassPair(_3);
class_addMethods(_4,[new objj_method(sel_getUid("allocObjectWithCoder:className:"),function(_5,_6,_7,_8){
with(_5){
var _9=objj_msgSend(_7,"classForClassName:",_8);
if(!_9){
_9=objj_lookUpClass(_8);
if(!_9){
return nil;
}
}
return objj_msgSend(_9,"alloc");
}
}),new objj_method(sel_getUid("allocWithCoder:"),function(_a,_b,_c){
with(_a){
if(objj_msgSend(_c,"respondsToSelector:",sel_getUid("usesOriginalClasses"))&&objj_msgSend(_c,"usesOriginalClasses")){
var _d=objj_msgSend(_c,"decodeObjectForKey:",_2),_e=objj_msgSend(_a,"allocObjectWithCoder:className:",_c,_d);
}else{
var _d=objj_msgSend(_c,"decodeObjectForKey:",_1),_e=objj_msgSend(_a,"allocObjectWithCoder:className:",_c,_d);
if(!_e){
CPLog.error("Unable to find class "+_d+" in cib file.");
_e=objj_msgSend(_a,"allocObjectWithCoder:className:",_c,objj_msgSend(_c,"decodeObjectForKey:",_2));
}
}
if(!_e){
objj_msgSend(CPException,"raise:reason:",CPInvalidArgumentException,"Unable to find class "+_d+" in cib file.");
}
return _e;
}
})]);
p;20;_CPCibCustomObject.jt;1717;@STATIC;1.0;I;21;Foundation/CPObject.jt;1672;
objj_executeFile("Foundation/CPObject.j",NO);
var _1="_CPCibCustomObjectClassName";
var _2=objj_allocateClassPair(CPObject,"_CPCibCustomObject"),_3=_2.isa;
class_addIvars(_2,[new objj_ivar("_className")]);
objj_registerClassPair(_2);
class_addMethods(_2,[new objj_method(sel_getUid("customClassName"),function(_4,_5){
with(_4){
return _className;
}
}),new objj_method(sel_getUid("setCustomClassName:"),function(_6,_7,_8){
with(_6){
_className=_8;
}
}),new objj_method(sel_getUid("description"),function(_9,_a){
with(_9){
return objj_msgSendSuper({receiver:_9,super_class:objj_getClass("_CPCibCustomObject").super_class},"description")+" ("+objj_msgSend(_9,"customClassName")+")";
}
})]);
var _2=objj_getClass("_CPCibCustomObject");
if(!_2){
throw new SyntaxError("*** Could not find definition for class \"_CPCibCustomObject\"");
}
var _3=_2.isa;
class_addMethods(_2,[new objj_method(sel_getUid("initWithCoder:"),function(_b,_c,_d){
with(_b){
_b=objj_msgSendSuper({receiver:_b,super_class:objj_getClass("_CPCibCustomObject").super_class},"init");
if(_b){
_className=objj_msgSend(_d,"decodeObjectForKey:",_1);
}
return _b;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_e,_f,_10){
with(_e){
objj_msgSend(_10,"encodeObject:forKey:",_className,_1);
}
}),new objj_method(sel_getUid("_cibInstantiate"),function(_11,_12){
with(_11){
var _13=CPClassFromString(_className);
if(_13===objj_msgSend(_11,"class")){
_className="CPObject";
return _11;
}
if(!_13){
_13=objj_msgSend(CPObject,"class");
}
if(_13===objj_msgSend(CPApplication,"class")){
return objj_msgSend(CPApplication,"sharedApplication");
}
return objj_msgSend(objj_msgSend(_13,"alloc"),"init");
}
})]);
p;22;_CPCibCustomResource.jt;3116;@STATIC;1.0;I;21;Foundation/CPObject.jI;21;Foundation/CPString.jt;3045;
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("Foundation/CPString.j",NO);
var _1="_CPCibCustomResourceClassNameKey",_2="_CPCibCustomResourceResourceNameKey",_3="_CPCibCustomResourcePropertiesKey";
var _4=objj_allocateClassPair(CPObject,"_CPCibCustomResource"),_5=_4.isa;
class_addIvars(_4,[new objj_ivar("_className"),new objj_ivar("_resourceName"),new objj_ivar("_properties")]);
objj_registerClassPair(_4);
class_addMethods(_4,[new objj_method(sel_getUid("initWithClassName:resourceName:properties:"),function(_6,_7,_8,_9,_a){
with(_6){
_6=objj_msgSendSuper({receiver:_6,super_class:objj_getClass("_CPCibCustomResource").super_class},"init");
if(_6){
_className=_8;
_resourceName=_9;
_properties=_a;
}
return _6;
}
}),new objj_method(sel_getUid("initWithCoder:"),function(_b,_c,_d){
with(_b){
_b=objj_msgSendSuper({receiver:_b,super_class:objj_getClass("_CPCibCustomResource").super_class},"init");
if(_b){
_className=objj_msgSend(_d,"decodeObjectForKey:",_1);
_resourceName=objj_msgSend(_d,"decodeObjectForKey:",_2);
_properties=objj_msgSend(_d,"decodeObjectForKey:",_3);
}
return _b;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_e,_f,_10){
with(_e){
objj_msgSend(_10,"encodeObject:forKey:",_className,_1);
objj_msgSend(_10,"encodeObject:forKey:",_resourceName,_2);
objj_msgSend(_10,"encodeObject:forKey:",_properties,_3);
}
}),new objj_method(sel_getUid("awakeAfterUsingCoder:"),function(_11,_12,_13){
with(_11){
if(objj_msgSend(_13,"respondsToSelector:",sel_getUid("bundle"))&&(!objj_msgSend(_13,"respondsToSelector:",sel_getUid("awakenCustomResources"))||objj_msgSend(_13,"awakenCustomResources"))){
if(_className==="CPImage"){
return objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(objj_msgSend(_13,"bundle"),"pathForResource:",_resourceName),_properties.valueForKey("size"));
}
}
return _11;
}
})]);
class_addMethods(_5,[new objj_method(sel_getUid("imageResourceWithName:size:"),function(_14,_15,_16,_17){
with(_14){
return objj_msgSend(objj_msgSend(_14,"alloc"),"initWithClassName:resourceName:properties:","CPImage",_16,objj_msgSend(CPDictionary,"dictionaryWithObject:forKey:",_17,"size"));
}
})]);
var _4=objj_getClass("_CPCibCustomResource");
if(!_4){
throw new SyntaxError("*** Could not find definition for class \"_CPCibCustomResource\"");
}
var _5=_4.isa;
class_addMethods(_4,[new objj_method(sel_getUid("filename"),function(_18,_19){
with(_18){
return objj_msgSend(objj_msgSend(CPBundle,"mainBundle"),"pathForResource:",_resourceName);
}
}),new objj_method(sel_getUid("size"),function(_1a,_1b){
with(_1a){
return objj_msgSend(_properties,"objectForKey:","size");
}
}),new objj_method(sel_getUid("isThreePartImage"),function(_1c,_1d){
with(_1c){
return NO;
}
}),new objj_method(sel_getUid("isNinePartImage"),function(_1e,_1f){
with(_1e){
return NO;
}
}),new objj_method(sel_getUid("loadStatus"),function(_20,_21){
with(_20){
return CPImageLoadStatusCompleted;
}
}),new objj_method(sel_getUid("delegate"),function(_22,_23){
with(_22){
return nil;
}
})]);
p;18;_CPCibCustomView.jt;2402;@STATIC;1.0;i;8;CPView.jt;2371;
objj_executeFile("CPView.j",YES);
var _1=objj_allocateClassPair(CPView,"_CPCibCustomView"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_className")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("customClassName"),function(_3,_4){
with(_3){
return _className;
}
}),new objj_method(sel_getUid("setCustomClassName:"),function(_5,_6,_7){
with(_5){
if(_className===_7){
return;
}
_className=_7;
objj_msgSend(_5,"setNeedsDisplay:",YES);
objj_msgSend(_5,"setNeedsLayout");
}
})]);
var _8="_CPCibCustomViewClassNameKey";
var _1=objj_getClass("_CPCibCustomView");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"_CPCibCustomView\"");
}
var _2=_1.isa;
class_addMethods(_1,[new objj_method(sel_getUid("initWithCoder:"),function(_9,_a,_b){
with(_9){
_9=objj_msgSendSuper({receiver:_9,super_class:objj_getClass("_CPCibCustomView").super_class},"initWithCoder:",_b);
if(_9){
_className=objj_msgSend(_b,"decodeObjectForKey:",_8);
}
return _9;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_c,_d,_e){
with(_c){
objj_msgSendSuper({receiver:_c,super_class:objj_getClass("_CPCibCustomView").super_class},"encodeWithCoder:",_e);
objj_msgSend(_e,"encodeObject:forKey:",_className,_8);
}
}),new objj_method(sel_getUid("customClassName"),function(_f,_10){
with(_f){
return _className;
}
}),new objj_method(sel_getUid("_cibInstantiate"),function(_11,_12){
with(_11){
var _13=CPClassFromString(_className);
if(!_13){
_13=objj_msgSend(CPView,"class");
}
if(_13===objj_msgSend(_11,"class")){
_className="CPView";
return _11;
}
var _14=objj_msgSend(objj_msgSend(_13,"alloc"),"initWithFrame:",objj_msgSend(_11,"frame"));
if(_14){
objj_msgSend(_14,"setBounds:",objj_msgSend(_11,"bounds"));
var _15=objj_msgSend(_11,"subviews"),_16=0,_17=_15.length;
for(;_16<_17;++_16){
objj_msgSend(_14,"addSubview:",_15[_16]);
}
objj_msgSend(_14,"setAutoresizingMask:",objj_msgSend(_11,"autoresizingMask"));
objj_msgSend(_14,"setAutoresizesSubviews:",objj_msgSend(_11,"autoresizesSubviews"));
objj_msgSend(_14,"setHitTests:",objj_msgSend(_11,"hitTests"));
objj_msgSend(_14,"setHidden:",objj_msgSend(_11,"isHidden"));
objj_msgSend(_14,"setAlphaValue:",objj_msgSend(_11,"alphaValue"));
objj_msgSend(_superview,"replaceSubview:with:",_11,_14);
objj_msgSend(_14,"setBackgroundColor:",objj_msgSend(_11,"backgroundColor"));
}
return _14;
}
})]);
p;23;_CPCibKeyedUnarchiver.jt;1485;@STATIC;1.0;I;30;Foundation/CPKeyedUnarchiver.jt;1431;
objj_executeFile("Foundation/CPKeyedUnarchiver.j",NO);
var _1=objj_allocateClassPair(CPKeyedUnarchiver,"_CPCibKeyedUnarchiver"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_bundle"),new objj_ivar("_awakenCustomResources"),new objj_ivar("_externalObjectsForProxyIdentifiers")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("initForReadingWithData:bundle:awakenCustomResources:"),function(_3,_4,_5,_6,_7){
with(_3){
_3=objj_msgSendSuper({receiver:_3,super_class:objj_getClass("_CPCibKeyedUnarchiver").super_class},"initForReadingWithData:",_5);
if(_3){
_bundle=_6;
_awakenCustomResources=_7;
objj_msgSend(_3,"setDelegate:",_3);
}
return _3;
}
}),new objj_method(sel_getUid("bundle"),function(_8,_9){
with(_8){
return _bundle;
}
}),new objj_method(sel_getUid("awakenCustomResources"),function(_a,_b){
with(_a){
return _awakenCustomResources;
}
}),new objj_method(sel_getUid("setExternalObjectsForProxyIdentifiers:"),function(_c,_d,_e){
with(_c){
_externalObjectsForProxyIdentifiers=_e;
}
}),new objj_method(sel_getUid("externalObjectForProxyIdentifier:"),function(_f,_10,_11){
with(_f){
return objj_msgSend(_externalObjectsForProxyIdentifiers,"objectForKey:",_11);
}
}),new objj_method(sel_getUid("replaceObjectAtUID:withObject:"),function(_12,_13,_14,_15){
with(_12){
_objects[_14]=_15;
}
}),new objj_method(sel_getUid("objectAtUID:"),function(_16,_17,_18){
with(_16){
return _objects[_18];
}
})]);
p;18;_CPCibObjectData.jt;6293;@STATIC;1.0;I;20;Foundation/CPArray.jI;21;Foundation/CPObject.jI;21;Foundation/CPString.ji;7;CPCib.ji;16;CPCibConnector.ji;23;CPCibControlConnector.ji;22;CPCibOutletConnector.ji;23;CPCibBindingConnector.jt;6082;
objj_executeFile("Foundation/CPArray.j",NO);
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("Foundation/CPString.j",NO);
objj_executeFile("CPCib.j",YES);
objj_executeFile("CPCibConnector.j",YES);
objj_executeFile("CPCibControlConnector.j",YES);
objj_executeFile("CPCibOutletConnector.j",YES);
objj_executeFile("CPCibBindingConnector.j",YES);
var _1=objj_allocateClassPair(CPObject,"_CPCibObjectData"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_namesKeys"),new objj_ivar("_namesValues"),new objj_ivar("_accessibilityConnectors"),new objj_ivar("_accessibilityOidsKeys"),new objj_ivar("_accessibilityOidsValues"),new objj_ivar("_classesKeys"),new objj_ivar("_classesValues"),new objj_ivar("_connections"),new objj_ivar("_fontManager"),new objj_ivar("_framework"),new objj_ivar("_nextOid"),new objj_ivar("_objectsKeys"),new objj_ivar("_objectsValues"),new objj_ivar("_oidKeys"),new objj_ivar("_oidValues"),new objj_ivar("_fileOwner"),new objj_ivar("_visibleWindows"),new objj_ivar("_replacementObjects")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("init"),function(_3,_4){
with(_3){
_3=objj_msgSendSuper({receiver:_3,super_class:objj_getClass("_CPCibObjectData").super_class},"init");
if(_3){
_namesKeys=[];
_namesValues=[];
_classesKeys=[];
_classesValues=[];
_connections=[];
_framework="";
_nextOid=[];
_objectsKeys=[];
_objectsValues=[];
_oidKeys=[];
_oidValues=[];
_fileOwner=nil;
_visibleWindows=objj_msgSend(CPSet,"set");
}
return _3;
}
}),new objj_method(sel_getUid("displayVisibleWindows"),function(_5,_6){
with(_5){
var _7=nil,_8=objj_msgSend(_visibleWindows,"objectEnumerator");
while(_7=objj_msgSend(_8,"nextObject")){
objj_msgSend(_replacementObjects[objj_msgSend(_7,"UID")],"makeKeyAndOrderFront:",_5);
}
}
})]);
var _9="_CPCibObjectDataNamesKeysKey",_a="_CPCibObjectDataNamesValuesKey",_b="_CPCibObjectDataAccessibilityConnectors",_c="_CPCibObjectDataAccessibilityOidsKeys",_d="_CPCibObjectDataAccessibilityOidsValues",_e="_CPCibObjectDataClassesKeysKey",_f="_CPCibObjectDataClassesValuesKey",_10="_CPCibObjectDataConnectionsKey",_11="_CPCibObjectDataFontManagerKey",_12="_CPCibObjectDataFrameworkKey",_13="_CPCibObjectDataNextOidKey",_14="_CPCibObjectDataObjectsKeysKey",_15="_CPCibObjectDataObjectsValuesKey",_16="_CPCibObjectDataOidKeysKey",_17="_CPCibObjectDataOidValuesKey",_18="_CPCibObjectDataFileOwnerKey",_19="_CPCibObjectDataVisibleWindowsKey";
var _1=objj_getClass("_CPCibObjectData");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"_CPCibObjectData\"");
}
var _2=_1.isa;
class_addMethods(_1,[new objj_method(sel_getUid("initWithCoder:"),function(_1a,_1b,_1c){
with(_1a){
_1a=objj_msgSendSuper({receiver:_1a,super_class:objj_getClass("_CPCibObjectData").super_class},"init");
if(_1a){
_replacementObjects={};
_namesKeys=objj_msgSend(_1c,"decodeObjectForKey:",_9);
_namesValues=objj_msgSend(_1c,"decodeObjectForKey:",_a);
_classesKeys=objj_msgSend(_1c,"decodeObjectForKey:",_e);
_classesValues=objj_msgSend(_1c,"decodeObjectForKey:",_f);
_connections=objj_msgSend(_1c,"decodeObjectForKey:",_10);
_framework=objj_msgSend(_1c,"decodeObjectForKey:",_12);
_nextOid=objj_msgSend(_1c,"decodeIntForKey:",_13);
_objectsKeys=objj_msgSend(_1c,"decodeObjectForKey:",_14);
_objectsValues=objj_msgSend(_1c,"decodeObjectForKey:",_15);
_oidKeys=objj_msgSend(_1c,"decodeObjectForKey:",_16);
_oidValues=objj_msgSend(_1c,"decodeObjectForKey:",_17);
_fileOwner=objj_msgSend(_1c,"decodeObjectForKey:",_18);
_visibleWindows=objj_msgSend(_1c,"decodeObjectForKey:",_19);
}
return _1a;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_1d,_1e,_1f){
with(_1d){
objj_msgSend(_1f,"encodeObject:forKey:",_namesKeys,_9);
objj_msgSend(_1f,"encodeObject:forKey:",_namesValues,_a);
objj_msgSend(_1f,"encodeObject:forKey:",_classesKeys,_e);
objj_msgSend(_1f,"encodeObject:forKey:",_classesValues,_f);
objj_msgSend(_1f,"encodeObject:forKey:",_connections,_10);
objj_msgSend(_1f,"encodeObject:forKey:",_framework,_12);
objj_msgSend(_1f,"encodeInt:forKey:",_nextOid,_13);
objj_msgSend(_1f,"encodeObject:forKey:",_objectsKeys,_14);
objj_msgSend(_1f,"encodeObject:forKey:",_objectsValues,_15);
objj_msgSend(_1f,"encodeObject:forKey:",_oidKeys,_16);
objj_msgSend(_1f,"encodeObject:forKey:",_oidValues,_17);
objj_msgSend(_1f,"encodeObject:forKey:",_fileOwner,_18);
objj_msgSend(_1f,"encodeObject:forKey:",_visibleWindows,_19);
}
}),new objj_method(sel_getUid("instantiateWithOwner:topLevelObjects:"),function(_20,_21,_22,_23){
with(_20){
var _24=objj_msgSend(_objectsKeys,"count");
while(_24--){
var _25=_objectsKeys[_24],_26=_objectsValues[_24],_27=_25;
if(objj_msgSend(_25,"respondsToSelector:",sel_getUid("_cibInstantiate"))){
var _27=objj_msgSend(_25,"_cibInstantiate");
if(_27!==_25){
_replacementObjects[objj_msgSend(_25,"UID")]=_27;
if(objj_msgSend(_27,"isKindOfClass:",objj_msgSend(CPView,"class"))){
var _28=objj_msgSend(_27,"superview");
if(objj_msgSend(_28,"isKindOfClass:",objj_msgSend(CPClipView,"class"))){
var _29=objj_msgSend(_28,"superview");
if(objj_msgSend(_29,"isKindOfClass:",objj_msgSend(CPScrollView,"class"))){
objj_msgSend(_29,"setDocumentView:",_27);
}
}
}
}
}
if(_23&&_26===_fileOwner&&_25!==_fileOwner){
_23.push(_27);
}
}
}
}),new objj_method(sel_getUid("establishConnectionsWithOwner:topLevelObjects:"),function(_2a,_2b,_2c,_2d){
with(_2a){
_replacementObjects[objj_msgSend(_fileOwner,"UID")]=_2c;
var _2e=0,_2f=_connections.length;
for(;_2e<_2f;++_2e){
var _30=_connections[_2e];
objj_msgSend(_30,"replaceObjects:",_replacementObjects);
objj_msgSend(_30,"establishConnection");
}
}
}),new objj_method(sel_getUid("awakeWithOwner:topLevelObjects:"),function(_31,_32,_33,_34){
with(_31){
var _35=objj_msgSend(_objectsKeys,"count");
while(_35--){
var _36=_objectsKeys[_35],_37=_replacementObjects[objj_msgSend(_36,"UID")];
if(_37){
_36=_37;
}
if(_36!==_33&&objj_msgSend(_36,"respondsToSelector:",sel_getUid("awakeFromCib"))){
objj_msgSend(_36,"awakeFromCib");
}
}
if(objj_msgSend(_33,"respondsToSelector:",sel_getUid("awakeFromCib"))){
objj_msgSend(_33,"awakeFromCib");
}
}
})]);
p;19;_CPCibProxyObject.jt;1009;@STATIC;1.0;I;21;Foundation/CPObject.jt;965;
objj_executeFile("Foundation/CPObject.j",NO);
var _1=objj_allocateClassPair(CPObject,"_CPCibProxyObject"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_identifier")]);
objj_registerClassPair(_1);
var _3="CPIdentifier";
var _1=objj_getClass("_CPCibProxyObject");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"_CPCibProxyObject\"");
}
var _2=_1.isa;
class_addMethods(_1,[new objj_method(sel_getUid("initWithCoder:"),function(_4,_5,_6){
with(_4){
_4=objj_msgSendSuper({receiver:_4,super_class:objj_getClass("_CPCibProxyObject").super_class},"init");
if(_4){
_identifier=objj_msgSend(_6,"decodeObjectForKey:",_3);
}
if(objj_msgSend(_6,"respondsToSelector:",sel_getUid("externalObjectForProxyIdentifier:"))){
return objj_msgSend(_6,"externalObjectForProxyIdentifier:",_identifier);
}
return _4;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_7,_8,_9){
with(_7){
objj_msgSend(_9,"encodeObject:forKey:",_identifier,_3);
}
})]);
p;22;_CPCibWindowTemplate.jt;4483;@STATIC;1.0;I;21;Foundation/CPObject.ji;12;CGGeometry.ji;10;CPWindow.jt;4406;
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("CGGeometry.j",YES);
objj_executeFile("CPWindow.j",YES);
var _1="_CPCibWindowTemplateMinSizeKey",_2="_CPCibWindowTemplateMaxSizeKey",_3="_CPCibWindowTemplateViewClassKey",_4="_CPCibWindowTemplateWindowClassKey",_5="_CPCibWindowTemplateWindowRectKey",_6="_CPCibWindowTempatStyleMaskKey",_7="_CPCibWindowTemplateWindowTitleKey",_8="_CPCibWindowTemplateWindowViewKey",_9="_CPCibWindowTemplateWindowAutorecalculatesKeyViewLoop",_a="_CPCibWindowTemplateWindowIsFullPlatformWindowKey";
var _b=objj_allocateClassPair(CPObject,"_CPCibWindowTemplate"),_c=_b.isa;
class_addIvars(_b,[new objj_ivar("_minSize"),new objj_ivar("_maxSize"),new objj_ivar("_viewClass"),new objj_ivar("_windowClass"),new objj_ivar("_windowRect"),new objj_ivar("_windowStyleMask"),new objj_ivar("_windowTitle"),new objj_ivar("_windowView"),new objj_ivar("_windowAutorecalculatesKeyViewLoop"),new objj_ivar("_windowIsFullPlatformWindow")]);
objj_registerClassPair(_b);
class_addMethods(_b,[new objj_method(sel_getUid("init"),function(_d,_e){
with(_d){
_d=objj_msgSendSuper({receiver:_d,super_class:objj_getClass("_CPCibWindowTemplate").super_class},"init");
if(_d){
_windowClass="CPWindow";
_windowRect=CGRectMake(0,0,400,200);
_windowStyleMask=CPTitledWindowMask|CPClosableWindowMask|CPMiniaturizableWindowMask|CPResizableWindowMask;
_windowTitle="Window";
_windowView=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",CGRectMake(0,0,400,200));
_windowIsFullPlatformWindow=NO;
}
return _d;
}
}),new objj_method(sel_getUid("initWithCoder:"),function(_f,_10,_11){
with(_f){
_f=objj_msgSendSuper({receiver:_f,super_class:objj_getClass("_CPCibWindowTemplate").super_class},"init");
if(_f){
if(objj_msgSend(_11,"containsValueForKey:",_1)){
_minSize=objj_msgSend(_11,"decodeSizeForKey:",_1);
}
if(objj_msgSend(_11,"containsValueForKey:",_2)){
_maxSize=objj_msgSend(_11,"decodeSizeForKey:",_2);
}
_viewClass=objj_msgSend(_11,"decodeObjectForKey:",_3);
_windowClass=objj_msgSend(_11,"decodeObjectForKey:",_4);
_windowRect=objj_msgSend(_11,"decodeRectForKey:",_5);
_windowStyleMask=objj_msgSend(_11,"decodeIntForKey:",_6);
_windowTitle=objj_msgSend(_11,"decodeObjectForKey:",_7);
_windowView=objj_msgSend(_11,"decodeObjectForKey:",_8);
_windowAutorecalculatesKeyViewLoop=!!objj_msgSend(_11,"decodeObjectForKey:",_9);
_windowIsFullPlatformWindow=!!objj_msgSend(_11,"decodeObjectForKey:",_a);
}
return _f;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_12,_13,_14){
with(_12){
if(_minSize){
objj_msgSend(_14,"encodeSize:forKey:",_minSize,_1);
}
if(_maxSize){
objj_msgSend(_14,"encodeSize:forKey:",_maxSize,_2);
}
objj_msgSend(_14,"encodeObject:forKey:",_viewClass,_3);
objj_msgSend(_14,"encodeObject:forKey:",_windowClass,_4);
objj_msgSend(_14,"encodeRect:forKey:",_windowRect,_5);
objj_msgSend(_14,"encodeInt:forKey:",_windowStyleMask,_6);
objj_msgSend(_14,"encodeObject:forKey:",_windowTitle,_7);
objj_msgSend(_14,"encodeObject:forKey:",_windowView,_8);
if(_windowAutorecalculatesKeyViewLoop){
objj_msgSend(_14,"encodeObject:forKey:",_windowAutorecalculatesKeyViewLoop,_9);
}
if(_windowIsFullPlatformWindow){
objj_msgSend(_14,"encodeObject:forKey:",_windowIsFullPlatformWindow,_a);
}
}
}),new objj_method(sel_getUid("customClassName"),function(_15,_16){
with(_15){
return _windowClass;
}
}),new objj_method(sel_getUid("setCustomClassName:"),function(_17,_18,_19){
with(_17){
_windowClass=_19;
}
}),new objj_method(sel_getUid("windowClass"),function(_1a,_1b){
with(_1a){
return _windowClass;
}
}),new objj_method(sel_getUid("_cibInstantiate"),function(_1c,_1d){
with(_1c){
var _1e=CPClassFromString(objj_msgSend(_1c,"windowClass"));
var _1f=objj_msgSend(objj_msgSend(_1e,"alloc"),"initWithContentRect:styleMask:",_windowRect,_windowStyleMask);
if(_minSize){
objj_msgSend(_1f,"setMinSize:",_minSize);
}
if(_maxSize){
objj_msgSend(_1f,"setMaxSize:",_maxSize);
}
objj_msgSend(_1f,"setTitle:",_windowTitle);
objj_msgSend(_windowView,"setAutoresizesSubviews:",NO);
objj_msgSend(_1f,"setContentView:",_windowView);
objj_msgSend(_windowView,"setAutoresizesSubviews:",YES);
if(objj_msgSend(_viewClass,"isKindOfClass:",objj_msgSend(CPToolbar,"class"))){
objj_msgSend(_1f,"setToolbar:",_viewClass);
}
objj_msgSend(_1f,"setAutorecalculatesKeyViewLoop:",_windowAutorecalculatesKeyViewLoop);
objj_msgSend(_1f,"setFullBridge:",_windowIsFullPlatformWindow);
return _1f;
}
})]);
p;7;CPCib.jt;5447;@STATIC;1.0;I;21;Foundation/CPObject.jI;28;Foundation/CPURLConnection.jI;25;Foundation/CPURLRequest.ji;20;_CPCibClassSwapper.ji;20;_CPCibCustomObject.ji;22;_CPCibCustomResource.ji;18;_CPCibCustomView.ji;23;_CPCibKeyedUnarchiver.ji;18;_CPCibObjectData.ji;19;_CPCibProxyObject.ji;22;_CPCibWindowTemplate.jt;5137;
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("Foundation/CPURLConnection.j",NO);
objj_executeFile("Foundation/CPURLRequest.j",NO);
objj_executeFile("_CPCibClassSwapper.j",YES);
objj_executeFile("_CPCibCustomObject.j",YES);
objj_executeFile("_CPCibCustomResource.j",YES);
objj_executeFile("_CPCibCustomView.j",YES);
objj_executeFile("_CPCibKeyedUnarchiver.j",YES);
objj_executeFile("_CPCibObjectData.j",YES);
objj_executeFile("_CPCibProxyObject.j",YES);
objj_executeFile("_CPCibWindowTemplate.j",YES);
CPCibOwner="CPCibOwner",CPCibTopLevelObjects="CPCibTopLevelObjects",CPCibReplacementClasses="CPCibReplacementClasses",CPCibExternalObjects="CPCibExternalObjects";
var _1="CPCibObjectDataKey";
var _2=objj_allocateClassPair(CPObject,"CPCib"),_3=_2.isa;
class_addIvars(_2,[new objj_ivar("_data"),new objj_ivar("_bundle"),new objj_ivar("_awakenCustomResources"),new objj_ivar("_loadDelegate")]);
objj_registerClassPair(_2);
class_addMethods(_2,[new objj_method(sel_getUid("initWithContentsOfURL:"),function(_4,_5,_6){
with(_4){
_4=objj_msgSendSuper({receiver:_4,super_class:objj_getClass("CPCib").super_class},"init");
if(_4){
_data=objj_msgSend(CPURLConnection,"sendSynchronousRequest:returningResponse:",objj_msgSend(CPURLRequest,"requestWithURL:",_6),nil);
_awakenCustomResources=YES;
}
return _4;
}
}),new objj_method(sel_getUid("initWithContentsOfURL:loadDelegate:"),function(_7,_8,_9,_a){
with(_7){
_7=objj_msgSendSuper({receiver:_7,super_class:objj_getClass("CPCib").super_class},"init");
if(_7){
objj_msgSend(CPURLConnection,"connectionWithRequest:delegate:",objj_msgSend(CPURLRequest,"requestWithURL:",_9),_7);
_awakenCustomResources=YES;
_loadDelegate=_a;
}
return _7;
}
}),new objj_method(sel_getUid("initWithCibNamed:bundle:"),function(_b,_c,_d,_e){
with(_b){
if(!objj_msgSend(_d,"hasSuffix:",".cib")){
_d=objj_msgSend(_d,"stringByAppendingString:",".cib");
}
_b=objj_msgSend(_b,"initWithContentsOfURL:",objj_msgSend(_e||objj_msgSend(CPBundle,"mainBundle"),"pathForResource:",_d));
if(_b){
_bundle=_e;
}
return _b;
}
}),new objj_method(sel_getUid("initWithCibNamed:bundle:loadDelegate:"),function(_f,_10,_11,_12,_13){
with(_f){
if(!objj_msgSend(_11,"hasSuffix:",".cib")){
_11=objj_msgSend(_11,"stringByAppendingString:",".cib");
}
_f=objj_msgSend(_f,"initWithContentsOfURL:loadDelegate:",objj_msgSend(_12||objj_msgSend(CPBundle,"mainBundle"),"pathForResource:",_11),_13);
if(_f){
_bundle=_12;
}
return _f;
}
}),new objj_method(sel_getUid("_setAwakenCustomResources:"),function(_14,_15,_16){
with(_14){
_awakenCustomResources=_16;
}
}),new objj_method(sel_getUid("_awakenCustomResources"),function(_17,_18){
with(_17){
return _awakenCustomResources;
}
}),new objj_method(sel_getUid("instantiateCibWithExternalNameTable:"),function(_19,_1a,_1b){
with(_19){
var _1c=_bundle,_1d=objj_msgSend(_1b,"objectForKey:",CPCibOwner);
if(!_1c&&_1d){
_1c=objj_msgSend(CPBundle,"bundleForClass:",objj_msgSend(_1d,"class"));
}
var _1e=objj_msgSend(objj_msgSend(_CPCibKeyedUnarchiver,"alloc"),"initForReadingWithData:bundle:awakenCustomResources:",_data,_1c,_awakenCustomResources),_1f=objj_msgSend(_1b,"objectForKey:",CPCibReplacementClasses);
if(_1f){
var key=nil,_20=objj_msgSend(_1f,"keyEnumerator");
while(key=objj_msgSend(_20,"nextObject")){
objj_msgSend(_1e,"setClass:forClassName:",objj_msgSend(_1f,"objectForKey:",key),key);
}
}
objj_msgSend(_1e,"setExternalObjectsForProxyIdentifiers:",objj_msgSend(_1b,"objectForKey:",CPCibExternalObjects));
var _21=objj_msgSend(_1e,"decodeObjectForKey:",_1);
if(!_21||!objj_msgSend(_21,"isKindOfClass:",objj_msgSend(_CPCibObjectData,"class"))){
return NO;
}
var _22=objj_msgSend(_1b,"objectForKey:",CPCibTopLevelObjects);
objj_msgSend(_21,"instantiateWithOwner:topLevelObjects:",_1d,_22);
objj_msgSend(_21,"establishConnectionsWithOwner:topLevelObjects:",_1d,_22);
objj_msgSend(_21,"awakeWithOwner:topLevelObjects:",_1d,_22);
objj_msgSend(_21,"displayVisibleWindows");
return YES;
}
}),new objj_method(sel_getUid("instantiateCibWithOwner:topLevelObjects:"),function(_23,_24,_25,_26){
with(_23){
return objj_msgSend(_23,"instantiateCibWithExternalNameTable:",objj_msgSend(CPDictionary,"dictionaryWithObjectsAndKeys:",_25,CPCibOwner,_26,CPCibTopLevelObjects));
}
})]);
var _2=objj_getClass("CPCib");
if(!_2){
throw new SyntaxError("*** Could not find definition for class \"CPCib\"");
}
var _3=_2.isa;
class_addMethods(_2,[new objj_method(sel_getUid("connection:didReceiveData:"),function(_27,_28,_29,_2a){
with(_27){
if(!_2a){
return objj_msgSend(_27,"connection:didFailWithError:",_29,nil);
}
_data=objj_msgSend(CPData,"dataWithRawString:",_2a);
}
}),new objj_method(sel_getUid("connection:didFailWithError:"),function(_2b,_2c,_2d,_2e){
with(_2b){
if(objj_msgSend(_loadDelegate,"respondsToSelector:",sel_getUid("cibDidFailToLoad:"))){
objj_msgSend(_loadDelegate,"cibDidFailToLoad:",_2b);
}
_loadDelegate=nil;
}
}),new objj_method(sel_getUid("connectionDidFinishLoading:"),function(_2f,_30,_31){
with(_2f){
if(objj_msgSend(_loadDelegate,"respondsToSelector:",sel_getUid("cibDidFinishLoading:"))){
objj_msgSend(_loadDelegate,"cibDidFinishLoading:",_2f);
}
_loadDelegate=nil;
}
})]);
p;23;CPCibBindingConnector.jt;1347;@STATIC;1.0;i;16;CPCibConnector.jt;1307;
objj_executeFile("CPCibConnector.j",YES);
var _1="CPCibBindingConnectorBindingKey",_2="CPCibBindingConnectorKeyPathKey",_3="CPCibBindingConnectorOptionsKey";
var _4=objj_allocateClassPair(CPCibConnector,"CPCibBindingConnector"),_5=_4.isa;
class_addIvars(_4,[new objj_ivar("_binding"),new objj_ivar("_keyPath"),new objj_ivar("_options")]);
objj_registerClassPair(_4);
class_addMethods(_4,[new objj_method(sel_getUid("initWithCoder:"),function(_6,_7,_8){
with(_6){
if(_6=objj_msgSendSuper({receiver:_6,super_class:objj_getClass("CPCibBindingConnector").super_class},"initWithCoder:",_8)){
_binding=objj_msgSend(_8,"decodeObjectForKey:",_1);
_keyPath=objj_msgSend(_8,"decodeObjectForKey:",_2);
_options=objj_msgSend(_8,"decodeObjectForKey:",_3);
}
return _6;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_9,_a,_b){
with(_9){
objj_msgSendSuper({receiver:_9,super_class:objj_getClass("CPCibBindingConnector").super_class},"encodeWithCoder:",_b);
objj_msgSend(_b,"encodeObject:forKey:",_binding,_1);
objj_msgSend(_b,"encodeObject:forKey:",_keyPath,_2);
objj_msgSend(_b,"encodeObject:forKey:",_options,_3);
}
}),new objj_method(sel_getUid("establishConnection"),function(_c,_d){
with(_c){
objj_msgSend(_source,"bind:toObject:withKeyPath:options:",_binding,_destination,_keyPath,_options);
}
})]);
p;16;CPCibConnector.jt;2363;@STATIC;1.0;I;21;Foundation/CPObject.jI;29;Foundation/CPKeyValueCoding.jt;2284;
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("Foundation/CPKeyValueCoding.j",NO);
var _1="_CPCibConnectorSourceKey",_2="_CPCibConnectorDestinationKey",_3="_CPCibConnectorLabelKey";
var _4=objj_allocateClassPair(CPObject,"CPCibConnector"),_5=_4.isa;
class_addIvars(_4,[new objj_ivar("_source"),new objj_ivar("_destination"),new objj_ivar("_label")]);
objj_registerClassPair(_4);
class_addMethods(_4,[new objj_method(sel_getUid("source"),function(_6,_7){
with(_6){
return _source;
}
}),new objj_method(sel_getUid("setSource:"),function(_8,_9,_a){
with(_8){
_source=_a;
}
}),new objj_method(sel_getUid("destination"),function(_b,_c){
with(_b){
return _destination;
}
}),new objj_method(sel_getUid("setDestination:"),function(_d,_e,_f){
with(_d){
_destination=_f;
}
}),new objj_method(sel_getUid("label"),function(_10,_11){
with(_10){
return _label;
}
}),new objj_method(sel_getUid("setLabel:"),function(_12,_13,_14){
with(_12){
_label=_14;
}
}),new objj_method(sel_getUid("replaceObject:withObject:"),function(_15,_16,_17,_18){
with(_15){
if(_source===_17){
_source=_18;
}
if(_destination===_17){
_destination=_18;
}
}
}),new objj_method(sel_getUid("replaceObjects:"),function(_19,_1a,_1b){
with(_19){
var _1c=_1b[objj_msgSend(_source,"UID")];
if(_1c!==undefined){
_source=_1c;
}
_1c=_1b[objj_msgSend(_destination,"UID")];
if(_1c!==undefined){
_destination=_1c;
}
}
})]);
var _4=objj_getClass("CPCibConnector");
if(!_4){
throw new SyntaxError("*** Could not find definition for class \"CPCibConnector\"");
}
var _5=_4.isa;
class_addMethods(_4,[new objj_method(sel_getUid("initWithCoder:"),function(_1d,_1e,_1f){
with(_1d){
_1d=objj_msgSendSuper({receiver:_1d,super_class:objj_getClass("CPCibConnector").super_class},"init");
if(_1d){
_source=objj_msgSend(_1f,"decodeObjectForKey:",_1);
_destination=objj_msgSend(_1f,"decodeObjectForKey:",_2);
_label=objj_msgSend(_1f,"decodeObjectForKey:",_3);
}
return _1d;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_20,_21,_22){
with(_20){
objj_msgSend(_22,"encodeObject:forKey:",_source,_1);
objj_msgSend(_22,"encodeObject:forKey:",_destination,_2);
objj_msgSend(_22,"encodeObject:forKey:",_label,_3);
}
})]);
var _4=objj_allocateClassPair(CPCibConnector,"_CPCibConnector"),_5=_4.isa;
objj_registerClassPair(_4);
p;23;CPCibControlConnector.jt;1526;@STATIC;1.0;i;16;CPCibConnector.jt;1486;
objj_executeFile("CPCibConnector.j",YES);
var _1=objj_allocateClassPair(CPCibConnector,"CPCibControlConnector"),_2=_1.isa;
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("establishConnection"),function(_3,_4){
with(_3){
var _5=_label,_6=objj_msgSend(_5,"length");
if(_6&&_5.charAt(_6-1)!==":"){
_5+=":";
}
var _7=CPSelectorFromString(_5);
if(!_7){
objj_msgSend(CPException,"raise:reason:",CPInvalidArgumentException,"-["+objj_msgSend(_3,"className")+" "+_4+"] selector "+_5+" does not exist.");
}
if(_destination&&!objj_msgSend(_destination,"respondsToSelector:",_7)){
CPLog.warn("Could not connect the action "+_7+" to target of class "+objj_msgSend(_destination,"className"));
}
if(objj_msgSend(_source,"respondsToSelector:",sel_getUid("setAction:"))){
objj_msgSend(_source,sel_getUid("setAction:"),_7);
}else{
objj_msgSend(CPException,"raise:reason:",CPInvalidArgumentException,"-["+objj_msgSend(_3,"className")+" "+_4+"] "+objj_msgSend(_source,"description")+" does not respond to setAction:");
}
if(objj_msgSend(_source,"respondsToSelector:",sel_getUid("setTarget:"))){
objj_msgSend(_source,sel_getUid("setTarget:"),_destination);
}else{
objj_msgSend(CPException,"raise:reason:",CPInvalidArgumentException,"-["+objj_msgSend(_3,"className")+" "+_4+"] "+objj_msgSend(_source,"description")+" does not respond to setTarget:");
}
}
})]);
var _1=objj_allocateClassPair(CPCibControlConnector,"_CPCibControlConnector"),_2=_1.isa;
objj_registerClassPair(_1);
p;14;CPCibLoading.jt;3586;@STATIC;1.0;I;21;Foundation/CPBundle.jI;25;Foundation/CPDictionary.jI;21;Foundation/CPString.jt;3485;
objj_executeFile("Foundation/CPBundle.j",NO);
objj_executeFile("Foundation/CPDictionary.j",NO);
objj_executeFile("Foundation/CPString.j",NO);
var _1="CPCibOwner";
var _2=objj_getClass("CPObject");
if(!_2){
throw new SyntaxError("*** Could not find definition for class \"CPObject\"");
}
var _3=_2.isa;
class_addMethods(_2,[new objj_method(sel_getUid("awakeFromCib"),function(_4,_5){
with(_4){
}
})]);
var _2=objj_getClass("CPBundle");
if(!_2){
throw new SyntaxError("*** Could not find definition for class \"CPBundle\"");
}
var _3=_2.isa;
class_addMethods(_2,[new objj_method(sel_getUid("loadCibFile:externalNameTable:"),function(_6,_7,_8,_9){
with(_6){
return objj_msgSend(objj_msgSend(objj_msgSend(CPCib,"alloc"),"initWithContentsOfURL:",_8),"instantiateCibWithExternalNameTable:",_9);
}
}),new objj_method(sel_getUid("loadCibFile:externalNameTable:loadDelegate:"),function(_a,_b,_c,_d,_e){
with(_a){
return (objj_msgSend(objj_msgSend(CPCib,"alloc"),"initWithCibNamed:bundle:loadDelegate:",_c,_a,objj_msgSend(objj_msgSend(_CPCibLoadDelegate,"alloc"),"initWithLoadDelegate:externalNameTable:",_e,_d)));
}
})]);
class_addMethods(_3,[new objj_method(sel_getUid("loadCibFile:externalNameTable:"),function(_f,_10,_11,_12){
with(_f){
return objj_msgSend(objj_msgSend(objj_msgSend(CPCib,"alloc"),"initWithContentsOfURL:",_11),"instantiateCibWithExternalNameTable:",_12);
}
}),new objj_method(sel_getUid("loadCibNamed:owner:"),function(_13,_14,_15,_16){
with(_13){
if(!objj_msgSend(_15,"hasSuffix:",".cib")){
_15=objj_msgSend(_15,"stringByAppendingString:",".cib");
}
var _17=_16?objj_msgSend(CPBundle,"bundleForClass:",objj_msgSend(_16,"class")):objj_msgSend(CPBundle,"mainBundle"),_18=objj_msgSend(_17,"pathForResource:",_15);
return objj_msgSend(_13,"loadCibFile:externalNameTable:",_18,objj_msgSend(CPDictionary,"dictionaryWithObject:forKey:",_16,_1));
}
}),new objj_method(sel_getUid("loadCibFile:externalNameTable:loadDelegate:"),function(_19,_1a,_1b,_1c,_1d){
with(_19){
return (objj_msgSend(objj_msgSend(CPCib,"alloc"),"initWithContentsOfURL:loadDelegate:",_1b,objj_msgSend(objj_msgSend(_CPCibLoadDelegate,"alloc"),"initWithLoadDelegate:externalNameTable:",_1d,_1c)));
}
}),new objj_method(sel_getUid("loadCibNamed:owner:loadDelegate:"),function(_1e,_1f,_20,_21,_22){
with(_1e){
if(!objj_msgSend(_20,"hasSuffix:",".cib")){
_20=objj_msgSend(_20,"stringByAppendingString:",".cib");
}
var _23=_21?objj_msgSend(CPBundle,"bundleForClass:",objj_msgSend(_21,"class")):objj_msgSend(CPBundle,"mainBundle"),_24=objj_msgSend(_23,"pathForResource:",_20);
return objj_msgSend(_1e,"loadCibFile:externalNameTable:loadDelegate:",_24,objj_msgSend(CPDictionary,"dictionaryWithObject:forKey:",_21,_1),_22);
}
})]);
var _2=objj_allocateClassPair(CPObject,"_CPCibLoadDelegate"),_3=_2.isa;
class_addIvars(_2,[new objj_ivar("_loadDelegate"),new objj_ivar("_externalNameTable")]);
objj_registerClassPair(_2);
class_addMethods(_2,[new objj_method(sel_getUid("initWithLoadDelegate:externalNameTable:"),function(_25,_26,_27,_28){
with(_25){
_25=objj_msgSend(_25,"init");
if(_25){
_loadDelegate=_27;
_externalNameTable=_28;
}
return _25;
}
}),new objj_method(sel_getUid("cibDidFinishLoading:"),function(_29,_2a,_2b){
with(_29){
objj_msgSend(_2b,"instantiateCibWithExternalNameTable:",_externalNameTable);
objj_msgSend(_loadDelegate,"cibDidFinishLoading:",_2b);
}
}),new objj_method(sel_getUid("cibDidFailToLoad:"),function(_2c,_2d,_2e){
with(_2c){
objj_msgSend(_loadDelegate,"cibDidFailToLoad:",_2e);
}
})]);
p;22;CPCibOutletConnector.jt;703;@STATIC;1.0;i;16;CPCibConnector.jt;664;
objj_executeFile("CPCibConnector.j",YES);
var _1=objj_allocateClassPair(CPCibConnector,"CPCibOutletConnector"),_2=_1.isa;
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("establishConnection"),function(_3,_4){
with(_3){
try{
objj_msgSend(_source,"setValue:forKey:",_destination,_label);
}
catch(anException){
if(objj_msgSend(anException,"name")===CPUndefinedKeyException){
CPLog.warn("Could not connect the outlet "+_label+" of target of class "+objj_msgSend(_source,"className"));
}else{
throw anException;
}
}
}
})]);
var _1=objj_allocateClassPair(CPCibOutletConnector,"_CPCibOutletConnector"),_2=_1.isa;
objj_registerClassPair(_1);
p;13;CAAnimation.jt;3814;@STATIC;1.0;I;21;Foundation/CPObject.jI;21;Foundation/CPString.ji;23;CAMediaTimingFunction.jt;3715;
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("Foundation/CPString.j",NO);
objj_executeFile("CAMediaTimingFunction.j",YES);
var _1=objj_allocateClassPair(CPObject,"CAAnimation"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_isRemovedOnCompletion"),new objj_ivar("_delegate")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("init"),function(_3,_4){
with(_3){
_3=objj_msgSendSuper({receiver:_3,super_class:objj_getClass("CAAnimation").super_class},"init");
if(_3){
_isRemovedOnCompletion=YES;
}
return _3;
}
}),new objj_method(sel_getUid("shouldArchiveValueForKey:"),function(_5,_6,_7){
with(_5){
return YES;
}
}),new objj_method(sel_getUid("setRemovedOnCompletion:"),function(_8,_9,_a){
with(_8){
_isRemovedOnCompletion=_a;
}
}),new objj_method(sel_getUid("removedOnCompletion"),function(_b,_c){
with(_b){
return _isRemovedOnCompletion;
}
}),new objj_method(sel_getUid("isRemovedOnCompletion"),function(_d,_e){
with(_d){
return _isRemovedOnCompletion;
}
}),new objj_method(sel_getUid("timingFunction"),function(_f,_10){
with(_f){
return nil;
}
}),new objj_method(sel_getUid("setDelegate:"),function(_11,_12,_13){
with(_11){
_delegate=_13;
}
}),new objj_method(sel_getUid("delegate"),function(_14,_15){
with(_14){
return _delegate;
}
}),new objj_method(sel_getUid("runActionForKey:object:arguments:"),function(_16,_17,_18,_19,_1a){
with(_16){
objj_msgSend(_19,"addAnimation:forKey:",_16,_18);
}
})]);
class_addMethods(_2,[new objj_method(sel_getUid("animation"),function(_1b,_1c){
with(_1b){
return objj_msgSend(objj_msgSend(_1b,"alloc"),"init");
}
}),new objj_method(sel_getUid("defaultValueForKey:"),function(_1d,_1e,_1f){
with(_1d){
return nil;
}
})]);
var _1=objj_allocateClassPair(CAAnimation,"CAPropertyAnimation"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_keyPath"),new objj_ivar("_isCumulative"),new objj_ivar("_isAdditive")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("setKeyPath:"),function(_20,_21,_22){
with(_20){
_keyPath=_22;
}
}),new objj_method(sel_getUid("keyPath"),function(_23,_24){
with(_23){
return _keyPath;
}
}),new objj_method(sel_getUid("setCumulative:"),function(_25,_26,_27){
with(_25){
_isCumulative=_27;
}
}),new objj_method(sel_getUid("cumulative"),function(_28,_29){
with(_28){
return _isCumulative;
}
}),new objj_method(sel_getUid("isCumulative"),function(_2a,_2b){
with(_2a){
return _isCumulative;
}
}),new objj_method(sel_getUid("setAdditive:"),function(_2c,_2d,_2e){
with(_2c){
_isAdditive=_2e;
}
}),new objj_method(sel_getUid("additive"),function(_2f,_30){
with(_2f){
return _isAdditive;
}
}),new objj_method(sel_getUid("isAdditive"),function(_31,_32){
with(_31){
return _isAdditive;
}
})]);
class_addMethods(_2,[new objj_method(sel_getUid("animationWithKeyPath:"),function(_33,_34,_35){
with(_33){
var _36=objj_msgSend(_33,"animation");
objj_msgSend(_36,"setKeyPath:",_35);
return _36;
}
})]);
var _1=objj_allocateClassPair(CAPropertyAnimation,"CABasicAnimation"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_fromValue"),new objj_ivar("_toValue"),new objj_ivar("_byValue")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("setFromValue:"),function(_37,_38,_39){
with(_37){
_fromValue=_39;
}
}),new objj_method(sel_getUid("fromValue"),function(_3a,_3b){
with(_3a){
return _fromValue;
}
}),new objj_method(sel_getUid("setToValue:"),function(_3c,_3d,_3e){
with(_3c){
_toValue=_3e;
}
}),new objj_method(sel_getUid("toValue"),function(_3f,_40){
with(_3f){
return _toValue;
}
}),new objj_method(sel_getUid("setByValue:"),function(_41,_42,_43){
with(_41){
_byValue=_43;
}
}),new objj_method(sel_getUid("byValue"),function(_44,_45){
with(_44){
return _byValue;
}
})]);
p;16;CABackingStore.jt;737;@STATIC;1.0;i;12;CGGeometry.ji;17;CPCompatibility.jt;680;
objj_executeFile("CGGeometry.j",YES);
objj_executeFile("CPCompatibility.j",YES);
CABackingStoreGetContext=function(_1){
return _1.context;
};
if(CPFeatureIsCompatible(CPHTMLCanvasFeature)){
CABackingStoreCreate=function(){
var _2=document.createElement("canvas");
_2.style.position="absolute";
return {context:_2.getContext("2d"),buffer:_2,_image:_2};
};
CABackingStoreSetSize=function(_3,_4){
var _5=_3.buffer;
_5.width=_4.width;
_5.height=_4.height;
_5.style.width=_4.width+"px";
_5.style.height=_4.height+"px";
};
}else{
CABackingStoreCreate=function(){
var _6=CGBitmapGraphicsContextCreate();
_6.buffer="";
return {context:_6};
};
CABackingStoreSetSize=function(_7,_8){
};
}
p;14;CAFlashLayer.jt;851;@STATIC;1.0;i;9;CALayer.ji;14;CPFlashMovie.jt;801;
objj_executeFile("CALayer.j",YES);
objj_executeFile("CPFlashMovie.j",YES);
var _1=objj_allocateClassPair(CALayer,"CAFlashLayer"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_flashMovie")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("setFlashMovie:"),function(_3,_4,_5){
with(_3){
if(_flashMovie==_5){
return;
}
_flashMovie=_5;
_DOMElement.innerHTML="<object width = \"100%\" height = \"100%\"><param name = \"movie\" value = \""+_5._fileName+"\"></param><param name = \"wmode\" value = \"transparent\"></param><embed src = \""+_5._fileName+"\" type = \"application/x-shockwave-flash\" wmode = \"transparent\" width = \"100%\" height = \"100%\"></embed></object>";
}
}),new objj_method(sel_getUid("flashMovie"),function(_6,_7){
with(_6){
return _flashMovie;
}
})]);
p;9;CALayer.jt;21785;@STATIC;1.0;I;21;Foundation/CPObject.ji;16;CABackingStore.ji;11;CGContext.ji;12;CGGeometry.jt;21685;
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("CABackingStore.j",YES);
objj_executeFile("CGContext.j",YES);
objj_executeFile("CGGeometry.j",YES);
var _1=1,_2=2,_3=4,_4=8,_5=16;
var _6=NO;
var _7=1,_8=2,_9=4,_a=8,_b=16,_c=_9|_7|_8;
var _d=nil;
var _e=objj_allocateClassPair(CPObject,"CALayer"),_f=_e.isa;
class_addIvars(_e,[new objj_ivar("_frame"),new objj_ivar("_bounds"),new objj_ivar("_position"),new objj_ivar("_zPosition"),new objj_ivar("_anchorPoint"),new objj_ivar("_affineTransform"),new objj_ivar("_sublayerTransform"),new objj_ivar("_sublayerTransformForSublayers"),new objj_ivar("_backingStoreFrame"),new objj_ivar("_standardBackingStoreFrame"),new objj_ivar("_hasSublayerTransform"),new objj_ivar("_hasCustomBackingStoreFrame"),new objj_ivar("_opacity"),new objj_ivar("_isHidden"),new objj_ivar("_backgroundColor"),new objj_ivar("_superlayer"),new objj_ivar("_sublayers"),new objj_ivar("_runLoopUpdateMask"),new objj_ivar("_needsDisplayOnBoundsChange"),new objj_ivar("_delegate"),new objj_ivar("_delegateRespondsToDisplayLayerSelector"),new objj_ivar("_delegateRespondsToDrawLayerInContextSelector"),new objj_ivar("_DOMElement"),new objj_ivar("_DOMContentsElement"),new objj_ivar("_contents"),new objj_ivar("_context"),new objj_ivar("_owningView"),new objj_ivar("_transformToLayer"),new objj_ivar("_transformFromLayer")]);
objj_registerClassPair(_e);
class_addMethods(_e,[new objj_method(sel_getUid("init"),function(_10,_11){
with(_10){
_10=objj_msgSendSuper({receiver:_10,super_class:objj_getClass("CALayer").super_class},"init");
if(_10){
_frame=CGRectMakeZero();
_backingStoreFrame=CGRectMakeZero();
_standardBackingStoreFrame=CGRectMakeZero();
_bounds=CGRectMakeZero();
_position=CGPointMakeZero();
_zPosition=0;
_anchorPoint=CGPointMake(0.5,0.5);
_affineTransform=CGAffineTransformMakeIdentity();
_sublayerTransform=CGAffineTransformMakeIdentity();
_transformToLayer=CGAffineTransformMakeIdentity();
_transformFromLayer=CGAffineTransformMakeIdentity();
_opacity=1;
_isHidden=NO;
_masksToBounds=NO;
_sublayers=[];
_DOMElement=document.createElement("div");
_DOMElement.style.overflow="visible";
_DOMElement.style.position="absolute";
_DOMElement.style.visibility="visible";
_DOMElement.style.top="0px";
_DOMElement.style.left="0px";
_DOMElement.style.zIndex=0;
_DOMElement.style.width="0px";
_DOMElement.style.height="0px";
}
return _10;
}
}),new objj_method(sel_getUid("setBounds:"),function(_12,_13,_14){
with(_12){
if(CGRectEqualToRect(_bounds,_14)){
return;
}
var _15=_bounds.origin;
_bounds={origin:{x:_14.origin.x,y:_14.origin.y},size:{width:_14.size.width,height:_14.size.height}};
if(_hasSublayerTransform){
_CALayerUpdateSublayerTransformForSublayers(_12);
}
_CALayerRecalculateGeometry(_12,_1);
}
}),new objj_method(sel_getUid("bounds"),function(_16,_17){
with(_16){
return _bounds;
}
}),new objj_method(sel_getUid("setPosition:"),function(_18,_19,_1a){
with(_18){
if(CGPointEqualToPoint(_position,_1a)){
return;
}
_position={x:_1a.x,y:_1a.y};
_CALayerRecalculateGeometry(_18,_2);
}
}),new objj_method(sel_getUid("position"),function(_1b,_1c){
with(_1b){
return _position;
}
}),new objj_method(sel_getUid("setZPosition:"),function(_1d,_1e,_1f){
with(_1d){
if(_zPosition==_1f){
return;
}
_zPosition=_1f;
objj_msgSend(_1d,"registerRunLoopUpdateWithMask:",_9);
}
}),new objj_method(sel_getUid("setAnchorPoint:"),function(_20,_21,_22){
with(_20){
_22={x:_22.x,y:_22.y};
_22.x=MIN(1,MAX(0,_22.x));
_22.y=MIN(1,MAX(0,_22.y));
if(CGPointEqualToPoint(_anchorPoint,_22)){
return;
}
_anchorPoint=_22;
if(_hasSublayerTransform){
_CALayerUpdateSublayerTransformForSublayers(_20);
}
if(_owningView){
_position=CGPointMake((_bounds.size.width)*_anchorPoint.x,(_bounds.size.height)*_anchorPoint.y);
}
_CALayerRecalculateGeometry(_20,_3);
}
}),new objj_method(sel_getUid("anchorPoint"),function(_23,_24){
with(_23){
return _anchorPoint;
}
}),new objj_method(sel_getUid("setAffineTransform:"),function(_25,_26,_27){
with(_25){
if(CGAffineTransformEqualToTransform(_affineTransform,_27)){
return;
}
_affineTransform={a:_27.a,b:_27.b,c:_27.c,d:_27.d,tx:_27.tx,ty:_27.ty};
_CALayerRecalculateGeometry(_25,_4);
}
}),new objj_method(sel_getUid("affineTransform"),function(_28,_29){
with(_28){
return _affineTransform;
}
}),new objj_method(sel_getUid("setSublayerTransform:"),function(_2a,_2b,_2c){
with(_2a){
if(CGAffineTransformEqualToTransform(_sublayerTransform,_2c)){
return;
}
var _2d=_hasSublayerTransform;
_sublayerTransform={a:_2c.a,b:_2c.b,c:_2c.c,d:_2c.d,tx:_2c.tx,ty:_2c.ty};
_hasSublayerTransform=!(_sublayerTransform.a==1&&_sublayerTransform.b==0&&_sublayerTransform.c==0&&_sublayerTransform.d==1&&_sublayerTransform.tx==0&&_sublayerTransform.ty==0);
if(_hasSublayerTransform){
_CALayerUpdateSublayerTransformForSublayers(_2a);
var _2e=_sublayers.length;
while(_2e--){
_CALayerRecalculateGeometry(_sublayers[_2e],_5);
}
}
}
}),new objj_method(sel_getUid("sublayerTransform"),function(_2f,_30){
with(_2f){
return _sublayerTransform;
}
}),new objj_method(sel_getUid("transformToLayer"),function(_31,_32){
with(_31){
return _transformToLayer;
}
}),new objj_method(sel_getUid("setFrame:"),function(_33,_34,_35){
with(_33){
alert("FIXME IMPLEMENT");
}
}),new objj_method(sel_getUid("frame"),function(_36,_37){
with(_36){
if(!_frame){
_frame=objj_msgSend(_36,"convertRect:toLayer:",_bounds,_superlayer);
}
return _frame;
}
}),new objj_method(sel_getUid("backingStoreFrame"),function(_38,_39){
with(_38){
return _backingStoreFrame;
}
}),new objj_method(sel_getUid("setBackingStoreFrame:"),function(_3a,_3b,_3c){
with(_3a){
_hasCustomBackingStoreFrame=(_3c!=nil);
if(_3c==nil){
_3c=CGRectMakeCopy(_standardBackingStoreFrame);
}else{
if(_superlayer){
_3c=objj_msgSend(_superlayer,"convertRect:toLayer:",_3c,nil);
var _3d=objj_msgSend(_superlayer,"bounds"),_3e=objj_msgSend(_superlayer,"convertRect:toLayer:",_3d,nil);
_3c.origin.x-=(_3e.origin.x);
_3c.origin.y-=(_3e.origin.y);
}else{
_3c=CGRectMakeCopy(_3c);
}
}
if(!CGPointEqualToPoint(_backingStoreFrame.origin,_3c.origin)){
objj_msgSend(_3a,"registerRunLoopUpdateWithMask:",_7);
}
if(!CGSizeEqualToSize(_backingStoreFrame.size,_3c.size)){
objj_msgSend(_3a,"registerRunLoopUpdateWithMask:",_8);
}
_backingStoreFrame=_3c;
}
}),new objj_method(sel_getUid("contents"),function(_3f,_40){
with(_3f){
return _contents;
}
}),new objj_method(sel_getUid("setContents:"),function(_41,_42,_43){
with(_41){
if(_contents==_43){
return;
}
_contents=_43;
objj_msgSend(_41,"composite");
}
}),new objj_method(sel_getUid("composite"),function(_44,_45){
with(_44){
if(_6&&!_contents||!_context){
return;
}
CGContextClearRect(_context,{origin:{x:0,y:0},size:{width:(_backingStoreFrame.size.width),height:(_backingStoreFrame.size.height)}});
var _46;
if(_superlayer){
var _47=_CALayerGetTransform(_superlayer,nil),_48=CGPointApplyAffineTransform(_superlayer._bounds.origin,_47);
_46=CGAffineTransformConcat(_transformFromLayer,_47);
_46.tx-=_48.x;
_46.ty-=_48.y;
}else{
_46=CGAffineTransformCreateCopy(_transformFromLayer);
}
_46.tx-=(_backingStoreFrame.origin.x);
_46.ty-=(_backingStoreFrame.origin.y);
CGContextSaveGState(_context);
CGContextConcatCTM(_context,_46);
if(_6){
_context.drawImage(_contents.buffer,(_bounds.origin.x),(_bounds.origin.y));
}else{
objj_msgSend(_44,"drawInContext:",_context);
}
CGContextRestoreGState(_context);
}
}),new objj_method(sel_getUid("display"),function(_49,_4a){
with(_49){
if(!_context){
_context=CGBitmapGraphicsContextCreate();
_DOMContentsElement=_context.DOMElement;
_DOMContentsElement.style.zIndex=-100;
_DOMContentsElement.style.overflow="hidden";
_DOMContentsElement.style.position="absolute";
_DOMContentsElement.style.visibility="visible";
_DOMContentsElement.width=ROUND((_backingStoreFrame.size.width));
_DOMContentsElement.height=ROUND((_backingStoreFrame.size.height));
_DOMContentsElement.style.top="0px";
_DOMContentsElement.style.left="0px";
_DOMContentsElement.style.width=ROUND((_backingStoreFrame.size.width))+"px";
_DOMContentsElement.style.height=ROUND((_backingStoreFrame.size.height))+"px";
_DOMElement.appendChild(_DOMContentsElement);
}
if(_6){
if(_delegateRespondsToDisplayLayerSelector){
return objj_msgSend(_delegate,"displayInLayer:",_49);
}
if((_backingStoreFrame.size.width)==0||(_backingStoreFrame.size.height)==0){
return;
}
if(!_contents){
_contents=CABackingStoreCreate();
}
CABackingStoreSetSize(_contents,_bounds.size);
objj_msgSend(_49,"drawInContext:",CABackingStoreGetContext(_contents));
}
objj_msgSend(_49,"composite");
}
}),new objj_method(sel_getUid("drawInContext:"),function(_4b,_4c,_4d){
with(_4b){
if(_backgroundColor){
CGContextSetFillColor(_4d,_backgroundColor);
CGContextFillRect(_4d,_bounds);
}
if(_delegateRespondsToDrawLayerInContextSelector){
objj_msgSend(_delegate,"drawLayer:inContext:",_4b,_4d);
}
}
}),new objj_method(sel_getUid("opacity"),function(_4e,_4f){
with(_4e){
return _opacity;
}
}),new objj_method(sel_getUid("setOpacity:"),function(_50,_51,_52){
with(_50){
if(_opacity==_52){
return;
}
_opacity=_52;
_DOMElement.style.opacity=_52;
_DOMElement.style.filter="alpha(opacity="+_52*100+")";
}
}),new objj_method(sel_getUid("setHidden:"),function(_53,_54,_55){
with(_53){
_isHidden=_55;
_DOMElement.style.display=_55?"none":"block";
}
}),new objj_method(sel_getUid("hidden"),function(_56,_57){
with(_56){
return _isHidden;
}
}),new objj_method(sel_getUid("isHidden"),function(_58,_59){
with(_58){
return _isHidden;
}
}),new objj_method(sel_getUid("setMasksToBounds:"),function(_5a,_5b,_5c){
with(_5a){
if(_masksToBounds==_5c){
return;
}
_masksToBounds=_5c;
_DOMElement.style.overflow=_masksToBounds?"hidden":"visible";
}
}),new objj_method(sel_getUid("setBackgroundColor:"),function(_5d,_5e,_5f){
with(_5d){
_backgroundColor=_5f;
objj_msgSend(_5d,"setNeedsDisplay");
}
}),new objj_method(sel_getUid("backgroundColor"),function(_60,_61){
with(_60){
return _backgroundColor;
}
}),new objj_method(sel_getUid("sublayers"),function(_62,_63){
with(_62){
return _sublayers;
}
}),new objj_method(sel_getUid("superlayer"),function(_64,_65){
with(_64){
return _superlayer;
}
}),new objj_method(sel_getUid("addSublayer:"),function(_66,_67,_68){
with(_66){
objj_msgSend(_66,"insertSublayer:atIndex:",_68,_sublayers.length);
return;
if(_DOMContentsElement&&_68._zPosition>_DOMContentsElement.style.zIndex){
_DOMContentsElement.style.zIndex-=100;
}
objj_msgSend(_sublayers,"addObject:",_68);
_DOMElement.appendChild(_68._DOMElement);
}
}),new objj_method(sel_getUid("removeFromSuperlayer"),function(_69,_6a){
with(_69){
if(_owningView){
objj_msgSend(_owningView,"setLayer:",nil);
}
if(!_superlayer){
return;
}
_superlayer._DOMElement.removeChild(_DOMElement);
objj_msgSend(_superlayer._sublayers,"removeObject:",_69);
_superlayer=nil;
}
}),new objj_method(sel_getUid("insertSublayer:atIndex:"),function(_6b,_6c,_6d,_6e){
with(_6b){
if(!_6d){
return;
}
var _6f=objj_msgSend(_6d,"superlayer");
if(_6f==_6b){
var _70=objj_msgSend(_sublayers,"indexOfObjectIdenticalTo:",_6d);
if(_70==_6e){
return;
}
objj_msgSend(_sublayers,"removeObjectAtIndex:",_70);
if(_70<_6e){
--_6e;
}
}else{
if(_6f!=nil){
objj_msgSend(_6d,"removeFromSuperlayer");
}
}
if(_DOMContentsElement&&_6d._zPosition>_DOMContentsElement.style.zIndex){
_DOMContentsElement.style.zIndex-=100;
}
objj_msgSend(_sublayers,"insertObject:atIndex:",_6d,_6e);
if(_6e>=_sublayers.length-1){
_DOMElement.appendChild(_6d._DOMElement);
}else{
_DOMElement.insertBefore(_6d._DOMElement,_sublayers[_6e+1]._DOMElement);
}
_6d._superlayer=_6b;
if(_6b!=_6f){
_CALayerRecalculateGeometry(_6d,268435455);
}
}
}),new objj_method(sel_getUid("insertSublayer:below:"),function(_71,_72,_73,_74){
with(_71){
var _75=_74?objj_msgSend(_sublayers,"indexOfObjectIdenticalTo:",_74):0;
objj_msgSend(_71,"insertSublayer:atIndex:",_73,_75==CPNotFound?_sublayers.length:_75);
}
}),new objj_method(sel_getUid("insertSublayer:above:"),function(_76,_77,_78,_79){
with(_76){
var _7a=_79?objj_msgSend(_sublayers,"indexOfObjectIdenticalTo:",_79):_sublayers.length;
if(_7a==CPNotFound){
objj_msgSend(CPException,"raise:reason:","CALayerNotFoundException","aSublayer is not a sublayer of this layer");
}
objj_msgSend(_sublayers,"insertObject:atIndex:",_78,_7a==CPNotFound?_sublayers.length:_7a+1);
}
}),new objj_method(sel_getUid("replaceSublayer:with:"),function(_7b,_7c,_7d,_7e){
with(_7b){
if(_7d==_7e){
return;
}
if(_7d._superlayer!=_7b){
alert("EXCEPTION");
return;
}
if(_DOMContentsElement&&_7e._zPosition>_DOMContentsElement.style.zIndex){
_DOMContentsElement.style.zIndex-=100;
}
objj_msgSend(_sublayers,"replaceObjectAtIndex:withObject:",objj_msgSend(_sublayers,"indexOfObjectIdenticalTo:",_7d),_7e);
_DOMElement.replaceChild(_7d._DOMElement,_7e._DOMElement);
}
}),new objj_method(sel_getUid("registerRunLoopUpdateWithMask:"),function(_7f,_80,_81){
with(_7f){
if(_d==nil){
_d={};
objj_msgSend(objj_msgSend(CPRunLoop,"currentRunLoop"),"performSelector:target:argument:order:modes:",sel_getUid("runLoopUpdateLayers"),CALayer,nil,0,[CPDefaultRunLoopMode]);
}
_runLoopUpdateMask|=_81;
_d[objj_msgSend(_7f,"UID")]=_7f;
}
}),new objj_method(sel_getUid("setNeedsComposite"),function(_82,_83){
with(_82){
objj_msgSend(_82,"registerRunLoopUpdateWithMask:",_b);
}
}),new objj_method(sel_getUid("setNeedsDisplay"),function(_84,_85){
with(_84){
objj_msgSend(_84,"registerRunLoopUpdateWithMask:",_a);
}
}),new objj_method(sel_getUid("setNeedsDisplayOnBoundsChange:"),function(_86,_87,_88){
with(_86){
_needsDisplayOnBoundsChange=_88;
}
}),new objj_method(sel_getUid("needsDisplayOnBoundsChange"),function(_89,_8a){
with(_89){
return _needsDisplayOnBoundsChange;
}
}),new objj_method(sel_getUid("setNeedsDisplayInRect:"),function(_8b,_8c,_8d){
with(_8b){
_dirtyRect=_8d;
objj_msgSend(_8b,"display");
}
}),new objj_method(sel_getUid("convertPoint:fromLayer:"),function(_8e,_8f,_90,_91){
with(_8e){
return CGPointApplyAffineTransform(_90,_CALayerGetTransform(_91,_8e));
}
}),new objj_method(sel_getUid("convertPoint:toLayer:"),function(_92,_93,_94,_95){
with(_92){
return CGPointApplyAffineTransform(_94,_CALayerGetTransform(_92,_95));
}
}),new objj_method(sel_getUid("convertRect:fromLayer:"),function(_96,_97,_98,_99){
with(_96){
return CGRectApplyAffineTransform(_98,_CALayerGetTransform(_99,_96));
}
}),new objj_method(sel_getUid("convertRect:toLayer:"),function(_9a,_9b,_9c,_9d){
with(_9a){
return CGRectApplyAffineTransform(_9c,_CALayerGetTransform(_9a,_9d));
}
}),new objj_method(sel_getUid("containsPoint:"),function(_9e,_9f,_a0){
with(_9e){
return (_a0.x>=(_bounds.origin.x)&&_a0.y>=(_bounds.origin.y)&&_a0.x<(_bounds.origin.x+_bounds.size.width)&&_a0.y<(_bounds.origin.y+_bounds.size.height));
}
}),new objj_method(sel_getUid("hitTest:"),function(_a1,_a2,_a3){
with(_a1){
if(_isHidden){
return nil;
}
var _a4=CGPointApplyAffineTransform(_a3,_transformToLayer);
if(!(_a4.x>=(_bounds.origin.x)&&_a4.y>=(_bounds.origin.y)&&_a4.x<(_bounds.origin.x+_bounds.size.width)&&_a4.y<(_bounds.origin.y+_bounds.size.height))){
return nil;
}
var _a5=nil,_a6=_sublayers.length;
while(_a6--){
if(_a5=objj_msgSend(_sublayers[_a6],"hitTest:",_a4)){
return _a5;
}
}
return _a1;
}
}),new objj_method(sel_getUid("setDelegate:"),function(_a7,_a8,_a9){
with(_a7){
if(_delegate==_a9){
return;
}
_delegate=_a9;
_delegateRespondsToDisplayLayerSelector=objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("displayLayer:"));
_delegateRespondsToDrawLayerInContextSelector=objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("drawLayer:inContext:"));
if(_delegateRespondsToDisplayLayerSelector||_delegateRespondsToDrawLayerInContextSelector){
objj_msgSend(_a7,"setNeedsDisplay");
}
}
}),new objj_method(sel_getUid("delegate"),function(_aa,_ab){
with(_aa){
return _delegate;
}
}),new objj_method(sel_getUid("_setOwningView:"),function(_ac,_ad,_ae){
with(_ac){
_owningView=_ae;
if(_owningView){
_owningView=_ae;
_bounds.size=CGSizeMakeCopy(objj_msgSend(_owningView,"bounds").size);
_position=CGPointMake((_bounds.size.width)*_anchorPoint.x,(_bounds.size.height)*_anchorPoint.y);
}
_CALayerRecalculateGeometry(_ac,_2|_1);
}
}),new objj_method(sel_getUid("_owningViewBoundsChanged"),function(_af,_b0){
with(_af){
_bounds.size=CGSizeMakeCopy(objj_msgSend(_owningView,"bounds").size);
_position=CGPointMake((_bounds.size.width)*_anchorPoint.x,(_bounds.size.height)*_anchorPoint.y);
_CALayerRecalculateGeometry(_af,_2|_1);
}
}),new objj_method(sel_getUid("_update"),function(_b1,_b2){
with(_b1){
window.loop=true;
var _b3=_runLoopUpdateMask;
if(_b3&_c){
_CALayerUpdateDOM(_b1,_b3);
}
if(_b3&_a){
objj_msgSend(_b1,"display");
}else{
if(_b3&_8||_b3&_b){
objj_msgSend(_b1,"composite");
}
}
_runLoopUpdateMask=0;
window.loop=false;
}
})]);
class_addMethods(_f,[new objj_method(sel_getUid("layer"),function(_b4,_b5){
with(_b4){
return objj_msgSend(objj_msgSend(objj_msgSend(_b4,"class"),"alloc"),"init");
}
}),new objj_method(sel_getUid("runLoopUpdateLayers"),function(_b6,_b7){
with(_b6){
for(UID in _d){
var _b8=_d[UID],_b9=_b8._runLoopUpdateMask;
if(_b9&_c){
_CALayerUpdateDOM(_b8,_b9);
}
if(_b9&_a){
objj_msgSend(_b8,"display");
}else{
if(_b9&_8||_b9&_b){
objj_msgSend(_b8,"composite");
}
}
_b8._runLoopUpdateMask=0;
}
window.loop=false;
_d=nil;
}
})]);
_CALayerUpdateSublayerTransformForSublayers=function(_ba){
var _bb=_ba._bounds,_bc=_ba._anchorPoint,_bd=(_bb.size.width)*_bc.x,_be=(_bb.size.height)*_bc.y;
_ba._sublayerTransformForSublayers=CGAffineTransformConcat(CGAffineTransformMakeTranslation(-_bd,-_be),CGAffineTransformConcat(_ba._sublayerTransform,CGAffineTransformMakeTranslation(_bd,_be)));
};
_CALayerUpdateDOM=function(_bf,_c0){
var _c1=_bf._DOMElement.style;
if(_c0&_9){
_c1.zIndex=_bf._zPosition;
}
var _c2=_bf._backingStoreFrame;
if(_c0&_7){
_c1.top=ROUND((_c2.origin.y))+"px";
_c1.left=ROUND((_c2.origin.x))+"px";
}
if(_c0&_8){
var _c3=MAX(0,ROUND((_c2.size.width))),_c4=MAX(0,ROUND((_c2.size.height))),_c5=_bf._DOMContentsElement;
_c1.width=_c3+"px";
_c1.height=_c4+"px";
if(_c5){
_c5.width=_c3;
_c5.height=_c4;
_c5.style.width=_c3+"px";
_c5.style.height=_c4+"px";
}
}
};
_CALayerRecalculateGeometry=function(_c6,_c7){
var _c8=_c6._bounds,_c9=_c6._superlayer,_ca=(_c8.size.width),_cb=(_c8.size.height),_cc=_c6._position,_cd=_c6._anchorPoint,_ce=_c6._affineTransform,_cf={width:_c6._backingStoreFrame.width,height:_c6._backingStoreFrame.height},_d0=_c6._hasCustomBackingStoreFrame;
_c6._transformFromLayer=CGAffineTransformConcat(CGAffineTransformMakeTranslation(-_ca*_cd.x-(_c6._bounds.origin.x),-_cb*_cd.y-(_c6._bounds.origin.y)),CGAffineTransformConcat(_ce,CGAffineTransformMakeTranslation(_cc.x,_cc.y)));
if(_c9&&_c9._hasSublayerTransform){
var tx=_c6._transformFromLayer.tx*_c9._sublayerTransformForSublayers.a+_c6._transformFromLayer.ty*_c9._sublayerTransformForSublayers.c+_c9._sublayerTransformForSublayers.tx;
_c6._transformFromLayer.ty=_c6._transformFromLayer.tx*_c9._sublayerTransformForSublayers.b+_c6._transformFromLayer.ty*_c9._sublayerTransformForSublayers.d+_c9._sublayerTransformForSublayers.ty;
_c6._transformFromLayer.tx=tx;
var a=_c6._transformFromLayer.a*_c9._sublayerTransformForSublayers.a+_c6._transformFromLayer.b*_c9._sublayerTransformForSublayers.c,b=_c6._transformFromLayer.a*_c9._sublayerTransformForSublayers.b+_c6._transformFromLayer.b*_c9._sublayerTransformForSublayers.d,c=_c6._transformFromLayer.c*_c9._sublayerTransformForSublayers.a+_c6._transformFromLayer.d*_c9._sublayerTransformForSublayers.c;
_c6._transformFromLayer.d=_c6._transformFromLayer.c*_c9._sublayerTransformForSublayers.b+_c6._transformFromLayer.d*_c9._sublayerTransformForSublayers.d;
_c6._transformFromLayer.a=a;
_c6._transformFromLayer.b=b;
_c6._transformFromLayer.c=c;
}
_c6._transformToLayer=CGAffineTransformInvert(_c6._transformFromLayer);
_c6._frame=nil;
_c6._standardBackingStoreFrame=objj_msgSend(_c6,"convertRect:toLayer:",_c8,nil);
if(_c9){
var _c8=objj_msgSend(_c9,"bounds"),_d1=objj_msgSend(_c9,"convertRect:toLayer:",_c8,nil);
_c6._standardBackingStoreFrame.origin.x-=(_d1.origin.x);
_c6._standardBackingStoreFrame.origin.y-=(_d1.origin.y);
}
var _d2=_c6._standardBackingStoreFrame.origin,_d3=_c6._standardBackingStoreFrame.size;
_d2.x=FLOOR(_d2.x);
_d2.y=FLOOR(_d2.y);
_d3.width=CEIL(_d3.width)+1;
_d3.height=CEIL(_d3.height)+1;
if(!_d0){
var _d4=CGRectMakeCopy(_c6._standardBackingStoreFrame);
if(ROUND((_d4.origin.x))!=ROUND((_c6._backingStoreFrame.origin.x))||ROUND((_d4.origin.y))!=ROUND((_c6._backingStoreFrame.origin.y))){
objj_msgSend(_c6,"registerRunLoopUpdateWithMask:",_7);
}
if(((_d4.size.width)!=ROUND((_c6._backingStoreFrame.size.width))||(_d4.size.height)!=ROUND((_c6._backingStoreFrame.size.height)))){
objj_msgSend(_c6,"registerRunLoopUpdateWithMask:",_8);
}
_c6._backingStoreFrame=_d4;
}
if(_c7&_1&&_c6._needsDisplayOnBoundsChange){
objj_msgSend(_c6,"setNeedsDisplay");
}else{
if(_d0||(_c7&~(_2|_3))){
objj_msgSend(_c6,"setNeedsComposite");
}
}
var _d5=_c6._sublayers,_d6=0,_d7=_d5.length;
for(;_d6<_d7;++_d6){
_CALayerRecalculateGeometry(_d5[_d6],_c7);
}
};
_CALayerGetTransform=function(_d8,_d9){
var _da=CGAffineTransformMakeIdentity();
if(_d8){
var _db=_d8;
while(_db&&_db!=_d9){
var _dc=_db._transformFromLayer;
var tx=_da.tx*_dc.a+_da.ty*_dc.c+_dc.tx;
_da.ty=_da.tx*_dc.b+_da.ty*_dc.d+_dc.ty;
_da.tx=tx;
var a=_da.a*_dc.a+_da.b*_dc.c,b=_da.a*_dc.b+_da.b*_dc.d,c=_da.c*_dc.a+_da.d*_dc.c;
_da.d=_da.c*_dc.b+_da.d*_dc.d;
_da.a=a;
_da.b=b;
_da.c=c;
_db=_db._superlayer;
}
if(_db==_d9){
return _da;
}
}
var _dd=[],_db=_d9;
while(_db){
_dd.push(_db);
_db=_db._superlayer;
}
var _de=_dd.length;
while(_de--){
var _df=_dd[_de]._transformToLayer;
var tx=_da.tx*_df.a+_da.ty*_df.c+_df.tx;
_da.ty=_da.tx*_df.b+_da.ty*_df.d+_df.ty;
_da.tx=tx;
var a=_da.a*_df.a+_da.b*_df.c,b=_da.a*_df.b+_da.b*_df.d,c=_da.c*_df.a+_da.d*_df.c;
_da.d=_da.c*_df.b+_da.d*_df.d;
_da.a=a;
_da.b=b;
_da.c=c;
}
return _da;
};
p;23;CAMediaTimingFunction.jt;2263;@STATIC;1.0;I;21;Foundation/CPObject.jI;25;Foundation/CPDictionary.jI;21;Foundation/CPString.jt;2162;
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("Foundation/CPDictionary.j",NO);
objj_executeFile("Foundation/CPString.j",NO);
kCAMediaTimingFunctionLinear="kCAMediaTimingFunctionLinear";
kCAMediaTimingFunctionEaseIn="kCAMediaTimingFunctionEaseIn";
kCAMediaTimingFunctionEaseOut="kCAMediaTimingFunctionEaseOut";
kCAMediaTimingFunctionEaseInEaseOut="kCAMediaTimingFunctionEaseInEaseOut";
var _1=nil;
var _2=objj_allocateClassPair(CPObject,"CAMediaTimingFunction"),_3=_2.isa;
class_addIvars(_2,[new objj_ivar("_c1x"),new objj_ivar("_c1y"),new objj_ivar("_c2x"),new objj_ivar("_c2y")]);
objj_registerClassPair(_2);
class_addMethods(_2,[new objj_method(sel_getUid("initWithControlPoints::::"),function(_4,_5,_6,_7,_8,_9){
with(_4){
_4=objj_msgSendSuper({receiver:_4,super_class:objj_getClass("CAMediaTimingFunction").super_class},"init");
if(_4){
_c1x=_6;
_c1y=_7;
_c2x=_8;
_c2y=_9;
}
return _4;
}
}),new objj_method(sel_getUid("getControlPointAtIndex:values:"),function(_a,_b,_c,_d){
with(_a){
if(_c==0){
_d[0]=0;
_d[1]=0;
}else{
if(_c==1){
_d[0]=_c1x;
_d[1]=_c1y;
}else{
if(_c==2){
_d[0]=_c2x;
_d[1]=_c2y;
}else{
_d[0]=1;
_d[1]=1;
}
}
}
}
})]);
class_addMethods(_3,[new objj_method(sel_getUid("functionWithName:"),function(_e,_f,_10){
with(_e){
if(!_1){
_1=objj_msgSend(CPDictionary,"dictionary");
objj_msgSend(_1,"setObject:forKey:",objj_msgSend(CAMediaTimingFunction,"functionWithControlPoints::::",0,0,1,1),kCAMediaTimingFunctionLinear);
objj_msgSend(_1,"setObject:forKey:",objj_msgSend(CAMediaTimingFunction,"functionWithControlPoints::::",0.42,0,1,1),kCAMediaTimingFunctionEaseIn);
objj_msgSend(_1,"setObject:forKey:",objj_msgSend(CAMediaTimingFunction,"functionWithControlPoints::::",0,0,0.58,1),kCAMediaTimingFunctionEaseOut);
objj_msgSend(_1,"setObject:forKey:",objj_msgSend(CAMediaTimingFunction,"functionWithControlPoints::::",0.42,0,0.58,1),kCAMediaTimingFunctionEaseInEaseOut);
}
return objj_msgSend(_1,"objectForKey:",_10);
}
}),new objj_method(sel_getUid("functionWithControlPoints::::"),function(_11,_12,c1x,c1y,c2x,c2y){
with(_11){
return objj_msgSend(objj_msgSend(_11,"alloc"),"initWithControlPoints::::",c1x,c1y,c2x,c2y);
}
})]);
p;19;CGAffineTransform.jt;2936;@STATIC;1.0;i;12;CGGeometry.jt;2900;
objj_executeFile("CGGeometry.j",YES);
CGAffineTransformMake=function(a,b,c,d,tx,ty){
return {a:a,b:b,c:c,d:d,tx:tx,ty:ty};
};
CGAffineTransformMakeIdentity=function(){
return {a:1,b:0,c:0,d:1,tx:0,ty:0};
};
CGAffineTransformMakeCopy=function(_1){
return {a:_1.a,b:_1.b,c:_1.c,d:_1.d,tx:_1.tx,ty:_1.ty};
};
CGAffineTransformMakeScale=function(sx,sy){
return {a:sx,b:0,c:0,d:sy,tx:0,ty:0};
};
CGAffineTransformMakeTranslation=function(tx,ty){
return {a:1,b:0,c:0,d:1,tx:tx,ty:ty};
};
CGAffineTransformTranslate=function(_2,tx,ty){
return {a:_2.a,b:_2.b,c:_2.c,d:_2.d,tx:_2.tx+_2.a*tx+_2.c*ty,ty:_2.ty+_2.b*tx+_2.d*ty};
};
CGAffineTransformScale=function(_3,sx,sy){
return {a:_3.a*sx,b:_3.b*sx,c:_3.c*sy,d:_3.d*sy,tx:_3.tx,ty:_3.ty};
};
CGAffineTransformConcat=function(_4,_5){
return {a:_4.a*_5.a+_4.b*_5.c,b:_4.a*_5.b+_4.b*_5.d,c:_4.c*_5.a+_4.d*_5.c,d:_4.c*_5.b+_4.d*_5.d,tx:_4.tx*_5.a+_4.ty*_5.c+_5.tx,ty:_4.tx*_5.b+_4.ty*_5.d+_5.ty};
};
CGPointApplyAffineTransform=function(_6,_7){
return {x:_6.x*_7.a+_6.y*_7.c+_7.tx,y:_6.x*_7.b+_6.y*_7.d+_7.ty};
};
CGSizeApplyAffineTransform=function(_8,_9){
return {width:_8.width*_9.a+_8.height*_9.c,height:_8.width*_9.b+_8.height*_9.d};
};
CGAffineTransformIsIdentity=function(_a){
return (_a.a==1&&_a.b==0&&_a.c==0&&_a.d==1&&_a.tx==0&&_a.ty==0);
};
CGAffineTransformEqualToTransform=function(_b,_c){
return (_b.a==_c.a&&_b.b==_c.b&&_b.c==_c.c&&_b.d==_c.d&&_b.tx==_c.tx&&_b.ty==_c.ty);
};
CGStringCreateWithCGAffineTransform=function(_d){
return (" [[ "+_d.a+", "+_d.b+", 0 ], [ "+_d.c+", "+_d.d+", 0 ], [ "+_d.tx+", "+_d.ty+", 1]]");
};
CGAffineTransformCreateCopy=function(_e){
return {a:_e.a,b:_e.b,c:_e.c,d:_e.d,tx:_e.tx,ty:_e.ty};
};
CGAffineTransformMakeRotation=function(_f){
var sin=SIN(_f),cos=COS(_f);
return {a:cos,b:sin,c:-sin,d:cos,tx:0,ty:0};
};
CGAffineTransformRotate=function(_10,_11){
var sin=SIN(_11),cos=COS(_11);
return {a:_10.a*cos+_10.c*sin,b:_10.b*cos+_10.d*sin,c:_10.c*cos-_10.a*sin,d:_10.d*cos-_10.b*sin,tx:_10.tx,ty:_10.ty};
};
CGAffineTransformInvert=function(_12){
var _13=1/(_12.a*_12.d-_12.b*_12.c);
return {a:_13*_12.d,b:-_13*_12.b,c:-_13*_12.c,d:_13*_12.a,tx:_13*(_12.c*_12.ty-_12.d*_12.tx),ty:_13*(_12.b*_12.tx-_12.a*_12.ty)};
};
CGRectApplyAffineTransform=function(_14,_15){
var top=(_14.origin.y),_16=(_14.origin.x),_17=(_14.origin.x+_14.size.width),_18=(_14.origin.y+_14.size.height),_19=CGPointApplyAffineTransform({x:_16,y:top},_15),_1a=CGPointApplyAffineTransform({x:_17,y:top},_15),_1b=CGPointApplyAffineTransform({x:_16,y:_18},_15),_1c=CGPointApplyAffineTransform({x:_17,y:_18},_15),_1d=MIN(_19.x,_1a.x,_1b.x,_1c.x),_1e=MAX(_19.x,_1a.x,_1b.x,_1c.x),_1f=MIN(_19.y,_1a.y,_1b.y,_1c.y),_20=MAX(_19.y,_1a.y,_1b.y,_1c.y);
return {origin:{x:_1d,y:_1f},size:{width:(_1e-_1d),height:(_20-_1f)}};
};
CPStringFromCGAffineTransform=function(_21){
return "{"+_21.a+", "+_21.b+", "+_21.c+", "+_21.d+", "+_21.tx+", "+_21.ty+"}";
};
p;9;CGColor.jt;2235;@STATIC;1.0;i;14;CGColorSpace.jt;2197;
objj_executeFile("CGColorSpace.j",YES);
var _1=0;
CFHashCode=function(_2){
if(!_2.hash){
_2.hash=++_1;
}
return _2;
};
kCGColorWhite="kCGColorWhite";
kCGColorBlack="kCGColorBlack";
kCGColorClear="kCGColorClear";
var _3={};
CGColorGetConstantColor=function(_4){
alert("FIX ME");
};
CGColorRetain=function(_5){
return _5;
};
CGColorRelease=function(){
};
CGColorCreate=function(_6,_7){
if(!_6||!_7){
return NULL;
}
var _7=_7.slice();
CGColorSpaceStandardizeComponents(_6,_7);
var _8=CFHashCode(_6)+_7.join("");
if(_3[_8]){
return _3[_8];
}
return _3[_8]={colorspace:_6,pattern:NULL,components:_7};
};
CGColorCreateCopy=function(_9){
return _9;
};
CGColorCreateGenericGray=function(_a,_b){
return CGColorCreate(CGColorSpaceCreateDeviceRGB(),[_a,_a,_a,_b]);
};
CGColorCreateGenericRGB=function(_c,_d,_e,_f){
return CGColorCreate(CGColorSpaceCreateDeviceRGB(),[_c,_d,_e,_f]);
};
CGColorCreateGenericCMYK=function(_10,_11,_12,_13,_14){
return CGColorCreate(CGColorSpaceCreateDeviceCMYK(),[_10,_11,_12,_13,_14]);
};
CGColorCreateCopyWithAlpha=function(_15,_16){
if(!_15){
return _15;
}
var _17=_15.components.slice();
if(_16==_17[_17.length-1]){
return _15;
}
_17[_17.length-1]=_16;
if(_15.pattern){
return CGColorCreateWithPattern(_15.colorspace,_15.pattern,_17);
}else{
return CGColorCreate(_15.colorspace,_17);
}
};
CGColorCreateWithPattern=function(_18,_19,_1a){
if(!_18||!_19||!_1a){
return NULL;
}
return {colorspace:_18,pattern:_19,components:_1a.slice()};
};
CGColorEqualToColor=function(lhs,rhs){
if(lhs==rhs){
return true;
}
if(!lhs||!rhs){
return false;
}
var _1b=lhs.components,_1c=rhs.components,_1d=_1b.length;
if(_1d!=_1c.length){
return false;
}
while(_1d--){
if(_1b[_1d]!=_1c[_1d]){
return false;
}
}
if(lhs.pattern!=rhs.pattern){
return false;
}
if(CGColorSpaceEqualToColorSpace(lhs.colorspace,rhs.colorspace)){
return false;
}
return true;
};
CGColorGetAlpha=function(_1e){
var _1f=_1e.components;
return _1f[_1f.length-1];
};
CGColorGetColorSpace=function(_20){
return _20.colorspace;
};
CGColorGetComponents=function(_21){
return _21.components;
};
CGColorGetNumberOfComponents=function(_22){
return _22.components.length;
};
CGColorGetPattern=function(_23){
return _23.pattern;
};
p;14;CGColorSpace.jt;3521;@STATIC;1.0;t;3502;
kCGColorSpaceModelUnknown=-1;
kCGColorSpaceModelMonochrome=0;
kCGColorSpaceModelRGB=1;
kCGColorSpaceModelCMYK=2;
kCGColorSpaceModelLab=3;
kCGColorSpaceModelDeviceN=4;
kCGColorSpaceModelIndexed=5;
kCGColorSpaceModelPattern=6;
kCGColorSpaceGenericGray="CGColorSpaceGenericGray";
kCGColorSpaceGenericRGB="CGColorSpaceGenericRGB";
kCGColorSpaceGenericCMYK="CGColorSpaceGenericCMYK";
kCGColorSpaceGenericRGBLinear="CGColorSpaceGenericRGBLinear";
kCGColorSpaceGenericRGBHDR="CGColorSpaceGenericRGBHDR";
kCGColorSpaceAdobeRGB1998="CGColorSpaceAdobeRGB1998";
kCGColorSpaceSRGB="CGColorSpaceSRGB";
var _1={};
CGColorSpaceCreateCalibratedGray=function(_2,_3,_4){
return {model:kCGColorSpaceModelMonochrome,count:1,base:NULL};
};
CGColorSpaceCreateCalibratedRGB=function(_5,_6,_7){
return {model:kCGColorSpaceModelRGB,count:1,base:NULL};
};
CGColorSpaceCreateICCBased=function(_8,_9,_a,_b){
return NULL;
};
CGColorSpaceCreateLab=function(_c,_d,_e){
return NULL;
};
CGColorSpaceCreateDeviceCMYK=function(){
return CGColorSpaceCreateWithName(kCGColorSpaceGenericCMYK);
};
CGColorSpaceCreateDeviceGray=function(){
return CGColorSpaceCreateWithName(kCGColorSpaceGenericGray);
};
CGColorSpaceCreateDeviceRGB=function(){
return CGColorSpaceCreateWithName(kCGColorSpaceGenericRGB);
};
CGColorSpaceCreateWithPlatformColorSpace=function(){
return NULL;
};
CGColorSpaceCreateIndexed=function(_f,_10,_11){
return NULL;
};
CGColorSpaceCreatePattern=function(_12){
if(_12){
return {model:kCGColorSpaceModelPattern,count:_12.count,base:_12};
}
return {model:kCGColorSpaceModelPattern,count:0,base:NULL};
};
CGColorSpaceCreateWithName=function(_13){
var _14=_1[_13];
if(_14){
return _14;
}
switch(_13){
case kCGColorSpaceGenericGray:
return _1[_13]={model:kCGColorSpaceModelMonochrome,count:1,base:NULL};
case kCGColorSpaceGenericRGB:
return _1[_13]={model:kCGColorSpaceModelRGB,count:3,base:NULL};
case kCGColorSpaceGenericCMYK:
return _1[_13]={model:kCGColorSpaceModelCMYK,count:4,base:NULL};
case kCGColorSpaceGenericRGBLinear:
return _1[_13]={model:kCGColorSpaceModelRGB,count:3,base:NULL};
case kCGColorSpaceGenericRGBHDR:
return _1[_13]={model:kCGColorSpaceModelRGB,count:3,base:NULL};
case kCGColorSpaceAdobeRGB1998:
return _1[_13]={model:kCGColorSpaceModelRGB,count:3,base:NULL};
case kCGColorSpaceSRGB:
return _1[_13]={model:kCGColorSpaceModelRGB,count:3,base:NULL};
}
return NULL;
};
CGColorSpaceCopyICCProfile=function(_15){
return NULL;
};
CGColorSpaceGetNumberOfComponents=function(_16){
return _16.count;
};
CGColorSpaceGetTypeID=function(_17){
};
CGColorSpaceGetModel=function(_18){
return _18.model;
};
CGColorSpaceGetBaseColorSpace=function(_19){
};
CGColorSpaceGetColorTableCount=function(_1a){
};
CGColorSpaceGetColorTable=function(_1b){
};
CGColorSpaceRelease=function(_1c){
};
CGColorSpaceRetain=function(_1d){
return _1d;
};
CGColorSpaceStandardizeComponents=function(_1e,_1f){
var _20=_1e.count;
if(_20>_1f.length){
_1f[_20]=1;
return;
}
var _21=_1f[_20];
if(_21<0){
_1f[_20]=0;
}else{
if(_21>1){
_1f[_20]=1;
}else{
_1f[_20]=ROUND(_21*1000)/1000;
}
}
if(_1e.base){
_1e=_1e.base;
}
switch(_1e.model){
case kCGColorSpaceModelMonochrome:
case kCGColorSpaceModelRGB:
case kCGColorSpaceModelCMYK:
case kCGColorSpaceModelDeviceN:
while(_20--){
if(_20>_1f.length){
_1f[_20]=1;
return;
}
var _21=_1f[_20];
if(_21<0){
_1f[_20]=0;
}else{
if(_21>1){
_1f[_20]=1;
}else{
_1f[_20]=ROUND(_21*255)/255;
}
}
}
break;
case kCGColorSpaceModelIndexed:
case kCGColorSpaceModelLab:
case kCGColorSpaceModelPattern:
break;
}
};
p;11;CGContext.jt;21514;@STATIC;1.0;i;19;CGAffineTransform.ji;17;CPCompatibility.ji;12;CGGeometry.ji;8;CGPath.jt;21419;
objj_executeFile("CGAffineTransform.j",YES);
objj_executeFile("CPCompatibility.j",YES);
objj_executeFile("CGGeometry.j",YES);
objj_executeFile("CGPath.j",YES);
kCGLineCapButt=0;
kCGLineCapRound=1;
kCGLineCapSquare=2;
kCGLineJoinMiter=0;
kCGLineJoinRound=1;
kCGLineJoinBevel=2;
kCGPathFill=0;
kCGPathEOFill=1;
kCGPathStroke=2;
kCGPathFillStroke=3;
kCGPathEOFillStroke=4;
kCGBlendModeNormal=0;
kCGBlendModeMultiply=1;
kCGBlendModeScreen=2;
kCGBlendModeOverlay=3;
kCGBlendModeDarken=4;
kCGBlendModeLighten=5;
kCGBlendModeColorDodge=6;
kCGBlendModeColorBurn=7;
kCGBlendModeSoftLight=8;
kCGBlendModeHardLight=9;
kCGBlendModeDifference=10;
kCGBlendModeExclusion=11;
kCGBlendModeHue=12;
kCGBlendModeSaturation=13;
kCGBlendModeColor=14;
kCGBlendModeLuminosity=15;
kCGBlendModeClear=16;
kCGBlendModeCopy=17;
kCGBlendModeSourceIn=18;
kCGBlendModeSourceOut=19;
kCGBlendModeSourceAtop=20;
kCGBlendModeDestinationOver=21;
kCGBlendModeDestinationIn=22;
kCGBlendModeDestinationOut=23;
kCGBlendModeDestinationAtop=24;
kCGBlendModeXOR=25;
kCGBlendModePlusDarker=26;
kCGBlendModePlusLighter=27;
CGContextRelease=function(){
};
CGContextRetain=function(_1){
return _1;
};
if(!CPFeatureIsCompatible(CPHTMLCanvasFeature)){
CGGStateCreate=function(){
return {alpha:1,strokeStyle:"#000",fillStyle:"#ccc",lineWidth:1,lineJoin:kCGLineJoinMiter,lineCap:kCGLineCapButt,miterLimit:10,globalAlpha:1,blendMode:kCGBlendModeNormal,shadowOffset:{width:0,height:0},shadowBlur:0,shadowColor:NULL,CTM:{a:1,b:0,c:0,d:1,tx:0,ty:0}};
};
CGGStateCreateCopy=function(_2){
return {alpha:_2.alpha,strokeStyle:_2.strokeStyle,fillStyle:_2.fillStyle,lineWidth:_2.lineWidth,lineJoin:_2.lineJoin,lineCap:_2.lineCap,miterLimit:_2.miterLimit,globalAlpha:_2.globalAlpha,blendMode:_2.blendMode,shadowOffset:{width:_2.shadowOffset.width,height:_2.shadowOffset.height},shadowBlur:_2.shadowBlur,shadowColor:_2.shadowColor,CTM:{a:_2.CTM.a,b:_2.CTM.b,c:_2.CTM.c,d:_2.CTM.d,tx:_2.CTM.tx,ty:_2.CTM.ty}};
};
CGBitmapGraphicsContextCreate=function(){
return {DOMElement:document.createElement("div"),path:NULL,gState:CGGStateCreate(),gStateStack:[]};
};
CGContextSaveGState=function(_3){
_3.gStateStack.push(CGGStateCreateCopy(_3.gState));
};
CGContextRestoreGState=function(_4){
_4.gState=_4.gStateStack.pop();
};
CGContextSetLineCap=function(_5,_6){
_5.gState.lineCap=_6;
};
CGContextSetLineJoin=function(_7,_8){
_7.gState.lineJoin=_8;
};
CGContextSetLineWidth=function(_9,_a){
_9.gState.lineWidth=_a;
};
CGContextSetMiterLimit=function(_b,_c){
_b.gState.miterLimit=_c;
};
CGContextSetBlendMode=function(_d,_e){
_d.gState.blendMode=_e;
};
CGContextAddArc=function(_f,x,y,_10,_11,_12,_13){
CGPathAddArc(_f.path,_f.gState.CTM,x,y,_10,_11,_12,_13);
};
CGContextAddArcToPoint=function(_14,x1,y1,x2,y2,_15){
CGPathAddArcToPoint(_14.path,_14.gState.CTM,x1,y1,x2,y2,_15);
};
CGContextAddCurveToPoint=function(_16,_17,_18,_19,_1a,x,y){
CGPathAddCurveToPoint(_16.path,_16.gState.CTM,_17,_18,_19,_1a,x,y);
};
CGContextAddLines=function(_1b,_1c,_1d){
CGPathAddLines(_1b.path,_1b.gState.CTM,_1c,_1d);
};
CGContextAddLineToPoint=function(_1e,x,y){
CGPathAddLineToPoint(_1e.path,_1e.gState.CTM,x,y);
};
CGContextAddPath=function(_1f,_20){
if(!_1f||CGPathIsEmpty(_20)){
return;
}
if(!_1f.path){
_1f.path=CGPathCreateMutable();
}
CGPathAddPath(_1f.path,_1f.gState.CTM,_20);
};
CGContextAddQuadCurveToPoint=function(_21,cpx,cpy,x,y){
CGPathAddQuadCurveToPoint(_21.path,_21.gState.CTM,cpx,cpy,x,y);
};
CGContextAddRect=function(_22,_23){
CGPathAddRect(_22.path,_22.gState.CTM,_23);
};
CGContextAddRects=function(_24,_25,_26){
CGPathAddRects(_24.path,_24.gState.CTM,_25,_26);
};
CGContextBeginPath=function(_27){
_27.path=CGPathCreateMutable();
};
CGContextClosePath=function(_28){
CGPathCloseSubpath(_28.path);
};
CGContextMoveToPoint=function(_29,x,y){
if(!_29.path){
_29.path=CGPathCreateMutable();
}
CGPathMoveToPoint(_29.path,_29.gState.CTM,x,y);
};
CGContextFillRect=function(_2a,_2b){
CGContextFillRects(_2a,[_2b],1);
};
CGContextFillRects=function(_2c,_2d,_2e){
if(arguments[2]===undefined){
var _2e=_2d.length;
}
CGContextBeginPath(_2c);
CGContextAddRects(_2c,_2d,_2e);
CGContextClosePath(_2c);
CGContextDrawPath(_2c,kCGPathFill);
};
CGContextStrokeRect=function(_2f,_30){
CGContextBeginPath(_2f);
CGContextAddRect(_2f,_30);
CGContextClosePath(_2f);
CGContextDrawPath(_2f,kCGPathStroke);
};
CGContextStrokeRectWithWidth=function(_31,_32,_33){
CGContextSaveGState(_31);
CGContextSetLineWidth(_31,_33);
CGContextStrokeRect(_31,_32);
CGContextRestoreGState(_31);
};
CGContextConcatCTM=function(_34,_35){
var CTM=_34.gState.CTM;
var tx=CTM.tx*_35.a+CTM.ty*_35.c+_35.tx;
CTM.ty=CTM.tx*_35.b+CTM.ty*_35.d+_35.ty;
CTM.tx=tx;
var a=CTM.a*_35.a+CTM.b*_35.c,b=CTM.a*_35.b+CTM.b*_35.d,c=CTM.c*_35.a+CTM.d*_35.c;
CTM.d=CTM.c*_35.b+CTM.d*_35.d;
CTM.a=a;
CTM.b=b;
CTM.c=c;
};
CGContextGetCTM=function(_36){
return _36.gState.CTM;
};
CGContextRotateCTM=function(_37,_38){
var _39=_37.gState;
_39.CTM=CGAffineTransformRotate(_39.CTM,_38);
};
CGContextScaleCTM=function(_3a,sx,sy){
var _3b=_3a.gState;
_3b.CTM={a:_3b.CTM.a*sx,b:_3b.CTM.b*sx,c:_3b.CTM.c*sy,d:_3b.CTM.d*sy,tx:_3b.CTM.tx,ty:_3b.CTM.ty};
};
CGContextTranslateCTM=function(_3c,tx,ty){
var _3d=_3c.gState;
_3d.CTM={a:_3d.CTM.a,b:_3d.CTM.b,c:_3d.CTM.c,d:_3d.CTM.d,tx:_3d.CTM.tx+_3d.CTM.a*tx+_3d.CTM.c*ty,ty:_3d.CTM.ty+_3d.CTM.b*tx+_3d.CTM.d*ty};
};
CGContextSetShadow=function(_3e,_3f,_40){
var _41=_3e.gState;
_41.shadowOffset={width:_3f.width,height:_3f.height};
_41.shadowBlur=_40;
_41.shadowColor=objj_msgSend(CPColor,"shadowColor");
};
CGContextSetShadowWithColor=function(_42,_43,_44,_45){
var _46=_42.gState;
_46.shadowOffset={width:_43.width,height:_43.height};
_46.shadowBlur=_44;
_46.shadowColor=_45;
};
CGContextSetAlpha=function(_47,_48){
_47.gState.alpha=MAX(MIN(_48,1),0);
};
}
CGContextEOFillPath=function(_49){
CGContextDrawPath(_49,kCGPathEOFill);
};
CGContextFillPath=function(_4a){
CGContextDrawPath(_4a,kCGPathFill);
CGContextClosePath(_4a);
};
var _4b=4*((SQRT2-1)/3);
CGContextAddEllipseInRect=function(_4c,_4d){
CGContextBeginPath(_4c);
CGContextAddPath(_4c,CGPathWithEllipseInRect(_4d));
CGContextClosePath(_4c);
};
CGContextFillEllipseInRect=function(_4e,_4f){
CGContextBeginPath(_4e);
CGContextAddEllipseInRect(_4e,_4f);
CGContextClosePath(_4e);
CGContextFillPath(_4e);
};
CGContextStrokeEllipseInRect=function(_50,_51){
CGContextBeginPath(_50);
CGContextAddEllipseInRect(_50,_51);
CGContextClosePath(_50);
CGContextStrokePath(_50);
};
CGContextStrokePath=function(_52){
CGContextDrawPath(_52,kCGPathStroke);
CGContextClosePath(_52);
};
CGContextStrokeLineSegments=function(_53,_54,_55){
var i=0;
if(_55===NULL){
var _55=_54.length;
}
CGContextBeginPath(_53);
for(;i<_55;i+=2){
CGContextMoveToPoint(_53,_54[i].x,_54[i].y);
CGContextAddLineToPoint(_53,_54[i+1].x,_54[i+1].y);
}
CGContextStrokePath(_53);
};
CGContextSetFillColor=function(_56,_57){
if(_57){
_56.gState.fillStyle=objj_msgSend(_57,"cssString");
}
};
CGContextSetStrokeColor=function(_58,_59){
if(_59){
_58.gState.strokeStyle=objj_msgSend(_59,"cssString");
}
};
CGContextFillRoundedRectangleInRect=function(_5a,_5b,_5c,ne,se,sw,nw){
CGContextBeginPath(_5a);
CGContextAddPath(_5a,CGPathWithRoundedRectangleInRect(_5b,_5c,_5c,ne,se,sw,nw));
CGContextClosePath(_5a);
CGContextFillPath(_5a);
};
CGContextStrokeRoundedRectangleInRect=function(_5d,_5e,_5f,ne,se,sw,nw){
CGContextBeginPath(_5d);
CGContextAddPath(_5d,CGPathWithRoundedRectangleInRect(_5e,_5f,_5f,ne,se,sw,nw));
CGContextClosePath(_5d);
CGContextStrokePath(_5d);
};
if(CPFeatureIsCompatible(CPHTMLCanvasFeature)){
var _60=["butt","round","square"],_61=["miter","round","bevel"],_62=["source-over","source-over","source-over","source-over","darker","lighter","source-over","source-over","source-over","source-over","source-over","source-over","source-over","source-over","source-over","source-over","source-over","copy","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","xor","source-over","source-over"];
CGContextSaveGState=function(_63){
_63.save();
};
CGContextRestoreGState=function(_64){
_64.restore();
};
CGContextSetLineCap=function(_65,_66){
_65.lineCap=_60[_66];
};
CGContextSetLineJoin=function(_67,_68){
_67.lineJoin=_61[_68];
};
CGContextSetLineWidth=function(_69,_6a){
_69.lineWidth=_6a;
};
CGContextSetMiterLimit=function(_6b,_6c){
_6b.miterLimit=_6c;
};
CGContextSetBlendMode=function(_6d,_6e){
_6d.globalCompositeOperation=_62[_6e];
};
CGContextAddArc=function(_6f,x,y,_70,_71,_72,_73){
_6f.arc(x,y,_70,_71,_72,!_73);
};
CGContextAddArcToPoint=function(_74,x1,y1,x2,y2,_75){
_74.arcTo(x1,y1,x2,y2,_75);
};
CGContextAddCurveToPoint=function(_76,_77,_78,_79,_7a,x,y){
_76.bezierCurveTo(_77,_78,_79,_7a,x,y);
};
CGContextAddLineToPoint=function(_7b,x,y){
_7b.lineTo(x,y);
};
CGContextAddPath=function(_7c,_7d){
if(!_7c||CGPathIsEmpty(_7d)){
return;
}
var _7e=_7d.elements,i=0,_7f=_7d.count;
for(;i<_7f;++i){
var _80=_7e[i],_81=_80.type;
switch(_81){
case kCGPathElementMoveToPoint:
_7c.moveTo(_80.x,_80.y);
break;
case kCGPathElementAddLineToPoint:
_7c.lineTo(_80.x,_80.y);
break;
case kCGPathElementAddQuadCurveToPoint:
_7c.quadraticCurveTo(_80.cpx,_80.cpy,_80.x,_80.y);
break;
case kCGPathElementAddCurveToPoint:
_7c.bezierCurveTo(_80.cp1x,_80.cp1y,_80.cp2x,_80.cp2y,_80.x,_80.y);
break;
case kCGPathElementCloseSubpath:
_7c.closePath();
break;
case kCGPathElementAddArc:
_7c.arc(_80.x,_80.y,_80.radius,_80.startAngle,_80.endAngle,_80.clockwise);
break;
case kCGPathElementAddArcTo:
break;
}
}
};
CGContextAddRect=function(_82,_83){
_82.rect((_83.origin.x),(_83.origin.y),(_83.size.width),(_83.size.height));
};
CGContextAddRects=function(_84,_85,_86){
var i=0;
if(_86===NULL){
var _86=_85.length;
}
for(;i<_86;++i){
var _87=_85[i];
_84.rect((_87.origin.x),(_87.origin.y),(_87.size.width),(_87.size.height));
}
};
CGContextBeginPath=function(_88){
_88.beginPath();
};
CGContextClosePath=function(_89){
_89.closePath();
};
CGContextMoveToPoint=function(_8a,x,y){
_8a.moveTo(x,y);
};
CGContextClearRect=function(_8b,_8c){
_8b.clearRect((_8c.origin.x),(_8c.origin.y),(_8c.size.width),(_8c.size.height));
};
CGContextDrawPath=function(_8d,_8e){
if(_8e==kCGPathFill||_8e==kCGPathFillStroke){
_8d.fill();
}else{
if(_8e==kCGPathEOFill||_8e==kCGPathEOFillStroke){
alert("not implemented!!!");
}
}
if(_8e==kCGPathStroke||_8e==kCGPathFillStroke||_8e==kCGPathEOFillStroke){
_8d.stroke();
}
};
CGContextFillRect=function(_8f,_90){
_8f.fillRect((_90.origin.x),(_90.origin.y),(_90.size.width),(_90.size.height));
};
CGContextFillRects=function(_91,_92,_93){
var i=0;
if(_93===NULL){
var _93=_92.length;
}
for(;i<_93;++i){
var _94=_92[i];
_91.fillRect((_94.origin.x),(_94.origin.y),(_94.size.width),(_94.size.height));
}
};
CGContextStrokeRect=function(_95,_96){
_95.strokeRect((_96.origin.x),(_96.origin.y),(_96.size.width),(_96.size.height));
};
CGContextClip=function(_97){
_97.clip();
};
CGContextClipToRect=function(_98,_99){
_98.beginPath();
_98.rect((_99.origin.x),(_99.origin.y),(_99.size.width),(_99.size.height));
_98.closePath();
_98.clip();
};
CGContextClipToRects=function(_9a,_9b,_9c){
if(_9c===NULL){
var _9c=_9b.length;
}
_9a.beginPath();
CGContextAddRects(_9a,_9b,_9c);
_9a.clip();
};
CGContextSetAlpha=function(_9d,_9e){
_9d.globalAlpha=_9e;
};
CGContextSetFillColor=function(_9f,_a0){
if(objj_msgSend(_a0,"patternImage")){
var _a1=objj_msgSend(_a0,"patternImage"),_a2=objj_msgSend(_a1,"size"),img;
if(_a2){
img=new Image(_a2.width,_a2.height);
}else{
img=new Image();
}
img.src=objj_msgSend(_a1,"filename");
var _a3=_9f.createPattern(img,"repeat");
_9f.fillStyle=_a3;
}else{
_9f.fillStyle=objj_msgSend(_a0,"cssString");
}
};
CGContextSetStrokeColor=function(_a4,_a5){
_a4.strokeStyle=objj_msgSend(_a5,"cssString");
};
CGContextSetShadow=function(_a6,_a7,_a8){
_a6.shadowOffsetX=_a7.width;
_a6.shadowOffsetY=_a7.height;
_a6.shadowBlur=_a8;
};
CGContextSetShadowWithColor=function(_a9,_aa,_ab,_ac){
_a9.shadowOffsetX=_aa.width;
_a9.shadowOffsetY=_aa.height;
_a9.shadowBlur=_ab;
_a9.shadowColor=objj_msgSend(_ac,"cssString");
};
CGContextRotateCTM=function(_ad,_ae){
_ad.rotate(_ae);
};
CGContextScaleCTM=function(_af,sx,sy){
_af.scale(sx,sy);
};
CGContextTranslateCTM=function(_b0,tx,ty){
_b0.translate(tx,ty);
};
eigen=function(_b1){
alert("IMPLEMENT ME!");
};
if(CPFeatureIsCompatible(CPJavaScriptCanvasTransformFeature)){
CGContextConcatCTM=function(_b2,_b3){
_b2.transform(_b3.a,_b3.b,_b3.c,_b3.d,_b3.tx,_b3.ty);
};
}else{
CGContextConcatCTM=function(_b4,_b5){
var a=_b5.a,b=_b5.b,c=_b5.c,d=_b5.d,tx=_b5.tx,ty=_b5.ty,sx=1,sy=1,a1=0,a2=0;
if(b==0&&c==0){
sx=a;
sy=d;
}else{
if(a*b==-c*d){
var _b6=(a*d<0||b*c>0)?-1:1,a2=(ATAN2(b,d)+ATAN2(-_b6*c,_b6*a))/2,cos=COS(a2),sin=SIN(a2);
if(cos==0){
sx=-c/sin;
sy=b/sin;
}else{
if(sin==0){
sx=a/cos;
sy=d/cos;
}else{
abs_cos=ABS(cos);
abs_sin=ABS(sin);
sx=(abs_cos*a/cos+abs_sin*-c/sin)/(abs_cos+abs_sin);
sy=(abs_cos*d/cos+abs_sin*b/sin)/(abs_cos+abs_sin);
}
}
}else{
if(a*c==-b*d){
var _b6=(a*d<0||b*c>0)?-1:1;
a1=(Math.atan2(_b6*b,_b6*a)+Math.atan2(-c,d))/2,cos=COS(a1),sin=SIN(a1);
if(cos==0){
sx=b/sin;
sy=-c/sin;
}else{
if(sin==0){
sx=a/cos;
sy=d/cos;
}else{
abs_cos=ABS(cos);
abs_sin=ABS(sin);
sx=(abs_cos*a/cos+abs_sin*b/sin)/(abs_cos+abs_sin);
sy=(abs_cos*d/cos+abs_sin*-c/sin)/(abs_cos+abs_sin);
}
}
}else{
var _b7=CGAffineTransformMake(a,c,b,d,0,0),u=eigen(CGAffineTransformConcat(_b5,_b7)),v=eigen(CGAffineTransformConcat(_b7,_b5)),U=CGAffineTransformMake(u.vector_1.x,u.vector_2.x,u.vector_1.y,u.vector_2.y,0,0),VT=CGAffineTransformMake(v.vector_1.x,v.vector_1.y,v.vector_2.x,v.vector_2.y,0,0),S=CGAffineTransformConcat(CGAffineTransformConcat(CGAffineTransformInvert(U),_b5),CGAffineTransformInvert(VT));
a=VT.a;
b=VT.b;
c=VT.c;
d=VT.d;
var _b6=(a*d<0||b*c>0)?-1:1,a2=(ATAN2(b,d)+ATAN2(-_b6*c,_b6*a))/2,cos=COS(a2),sin=SIN(a2);
if(cos==0){
sx=-c/sin;
sy=b/sin;
}else{
if(sin==0){
sx=a/cos;
sy=d/cos;
}else{
abs_cos=ABS(cos);
abs_sin=ABS(sin);
sx=(abs_cos*a/cos+abs_sin*-c/sin)/(abs_cos+abs_sin);
sy=(abs_cos*d/cos+abs_sin*b/sin)/(abs_cos+abs_sin);
}
}
S.a*=sx;
S.d*=sy;
a=U.a;
b=U.b;
c=U.c;
d=U.d;
var _b6=(a*d<0||b*c>0)?-1:1;
a1=(Math.atan2(_b6*b,_b6*a)+Math.atan2(-c,d))/2,cos=COS(a1),sin=SIN(a1);
if(cos==0){
sx=b/sin;
sy=-c/sin;
}else{
if(sin==0){
sx=a/cos;
sy=d/cos;
}else{
abs_cos=ABS(cos);
abs_sin=ABS(sin);
sx=(abs_cos*a/cos+abs_sin*b/sin)/(abs_cos+abs_sin);
sy=(abs_cos*d/cos+abs_sin*-c/sin)/(abs_cos+abs_sin);
}
}
sx=S.a*sx;
sy=S.d*sy;
}
}
}
if(tx!=0||ty!=0){
CGContextTranslateCTM(_b4,tx,ty);
}
if(a1!=0){
CGContextRotateCTM(_b4,a1);
}
if(sx!=1||sy!=1){
CGContextScaleCTM(_b4,sx,sy);
}
if(a2!=0){
CGContextRotateCTM(_b4,a2);
}
};
}
CGContextDrawImage=function(_b8,_b9,_ba){
_b8.drawImage(_ba._image,(_b9.origin.x),(_b9.origin.y),(_b9.size.width),(_b9.size.height));
};
to_string=function(_bb){
return "rgba("+ROUND(_bb.components[0]*255)+", "+ROUND(_bb.components[1]*255)+", "+ROUND(255*_bb.components[2])+", "+_bb.components[3]+")";
};
CGContextDrawLinearGradient=function(_bc,_bd,_be,_bf,_c0){
var _c1=_bd.colors,_c2=_c1.length,_c3=_bc.createLinearGradient(_be.x,_be.y,_bf.x,_bf.y);
while(_c2--){
_c3.addColorStop(_bd.locations[_c2],to_string(_c1[_c2]));
}
_bc.fillStyle=_c3;
_bc.fill();
};
CGBitmapGraphicsContextCreate=function(){
var _c4=document.createElement("canvas"),_c5=_c4.getContext("2d");
_c5.DOMElement=_c4;
return _c5;
};
}else{
if(CPFeatureIsCompatible(CPVMLFeature)){
var _c6=["f","t"],_c7=["flat","round","square"],_c8=["miter","round","bevel"],_c9=[" m "," l ","qb"," c "," x ",[" at "," wa "]];
var _ca=CGBitmapGraphicsContextCreate;
CGBitmapGraphicsContextCreate=function(){
document.namespaces.add("cg_vml_","urn:schemas-microsoft-com:vml");
document.createStyleSheet().cssText="cg_vml_\\:*{behavior:url(#default#VML)}";
CGBitmapGraphicsContextCreate=_ca;
return _ca();
};
CGContextSetFillColor=function(_cb,_cc){
if(objj_msgSend(_cc,"patternImage")){
_cb.gState.fillStyle="!"+objj_msgSend(objj_msgSend(_cc,"patternImage"),"filename");
}else{
_cb.gState.fillStyle=objj_msgSend(_cc,"cssString");
}
};
CGContextClearRect=function(_cd,_ce){
if(_cd.buffer!=nil){
_cd.buffer="";
}else{
_cd.DOMElement.innerHTML="";
}
_cd.path=NULL;
};
var W=10,H=10,Z=10,Z_2=Z/2;
CGContextDrawImage=function(_cf,_d0,_d1){
var _d2="";
if(_d1.buffer!=nil){
_d2=_d1.buffer;
}else{
var ctm=_cf.gState.CTM,_d3=CGPointApplyAffineTransform(_d0.origin,ctm),_d4=ctm.a==ctm.d&&ctm.b==-ctm.c,vml=["<cg_vml_:group coordsize=\"1,1\" coordorigin=\"0,0\" style=\"width:1;height:1;position:absolute"];
var _d5=CGRectApplyAffineTransform(_d0,ctm);
vml.push(";padding:0 ",ROUND((_d5.origin.x+_d5.size.width)),"px ",ROUND((_d5.origin.y+_d5.size.height)),"px 0;filter:progid:DXImageTransform.Microsoft.Matrix(","M11='",ctm.a,"',M12='",ctm.c,"',M21='",ctm.b,"',M22='",ctm.d,"',","Dx='",ROUND(_d3.x),"', Dy='",ROUND(_d3.y),"', sizingmethod='clip');");
vml.push("\"><cg_vml_:image src=\"",_d1._image.src,"\" style=\"width:",(_d0.size.width),"px;height:",(_d0.size.height),"px;\"/></g_vml_:group>");
_d2=vml.join("");
}
if(_cf.buffer!=nil){
_cf.buffer+=_d2;
}else{
_cf.DOMElement.insertAdjacentHTML("BeforeEnd",_d2);
}
};
CGContextDrawPath=function(_d6,_d7){
if(!_d6||CGPathIsEmpty(_d6.path)){
return;
}
var _d8=_d6.path.elements,i=0,_d9=_d6.path.count,_da=_d6.gState,_db=(_d7==kCGPathFill||_d7==kCGPathFillStroke)?1:0,_dc=(_d7==kCGPathStroke||_d7==kCGPathFillStroke)?1:0,_dd=_da.alpha,vml=["<cg_vml_:shape"];
if(_da.fillStyle.charAt(0)!=="!"){
vml.push(" fillcolor=\"",_da.fillStyle,"\"");
}
vml.push(" filled=\"",_c6[_db],"\" style=\"position:absolute;width:",W,";height:",H,";\" coordorigin=\"0 0\" coordsize=\"",Z*W," ",Z*H,"\" stroked=\"",_c6[_dc],"\" strokeweight=\"",_da.lineWidth,"\" strokecolor=\"",_da.strokeStyle,"\" path=\"");
for(;i<_d9;++i){
var _de=_d8[i],_df=_de.type;
switch(_df){
case kCGPathElementMoveToPoint:
case kCGPathElementAddLineToPoint:
vml.push(_c9[_df],(_de.x===0?0:ROUND(Z*(_de.x)-Z_2)),",",(_de.y===0?0:ROUND(Z*(_de.y)-Z_2)));
break;
case kCGPathElementAddQuadCurveToPoint:
vml.push(_c9[_df],(_de.cpx===0?0:ROUND(Z*(_de.cpx)-Z_2)),",",(_de.cpy===0?0:ROUND(Z*(_de.cpy)-Z_2)),",",(_de.x===0?0:ROUND(Z*(_de.x)-Z_2)),",",(_de.y===0?0:ROUND(Z*(_de.y)-Z_2)));
break;
case kCGPathElementAddCurveToPoint:
vml.push(_c9[_df],(_de.cp1x===0?0:ROUND(Z*(_de.cp1x)-Z_2)),",",(_de.cp1y===0?0:ROUND(Z*(_de.cp1y)-Z_2)),",",(_de.cp2x===0?0:ROUND(Z*(_de.cp2x)-Z_2)),",",(_de.cp2y===0?0:ROUND(Z*(_de.cp2y)-Z_2)),",",(_de.x===0?0:ROUND(Z*(_de.x)-Z_2)),",",(_de.y===0?0:ROUND(Z*(_de.y)-Z_2)));
break;
case kCGPathElementCloseSubpath:
vml.push(_c9[_df]);
break;
case kCGPathElementAddArc:
var x=_de.x,y=_de.y,_e0=_de.radius,_e1=_de.clockwise?1:0,_e2=_de.endAngle,_e3=_de.startAngle,_e4={x:x+_e0*COS(_e3),y:y+_e0*SIN(_e3)};
if(_e3==_e2&&!_e1){
vml.push(_c9[kCGPathElementMoveToPoint],(_e4.x===0?0:ROUND(Z*(_e4.x)-Z_2)),",",(_e4.y===0?0:ROUND(Z*(_e4.y)-Z_2)));
continue;
}
var end={x:x+_e0*COS(_e2),y:y+_e0*SIN(_e2)};
if(_e1&&_e3!=_e2&&(_e4.x==end.x&&_e4.y==end.y)){
if(_e4.x>=x){
if(_e4.y<y){
_e4.x+=0.125;
}else{
_e4.y+=0.125;
}
}else{
if(end.y<=y){
end.x+=0.125;
}else{
end.y+=0.125;
}
}
}
vml.push(_c9[_df][_e1],(x-_e0===0?0:ROUND(Z*(x-_e0)-Z_2)),",",(y-_e0===0?0:ROUND(Z*(y-_e0)-Z_2))," ",(x+_e0===0?0:ROUND(Z*(x+_e0)-Z_2)),",",(y+_e0===0?0:ROUND(Z*(y+_e0)-Z_2))," ",(_e4.x===0?0:ROUND(Z*(_e4.x)-Z_2)),",",(_e4.y===0?0:ROUND(Z*(_e4.y)-Z_2))," ",(end.x===0?0:ROUND(Z*(end.x)-Z_2)),",",(end.y===0?0:ROUND(Z*(end.y)-Z_2)));
break;
case kCGPathElementAddArcTo:
break;
}
}
vml.push("\">");
if(_da.gradient){
vml.push(_da.gradient);
}else{
if(_db){
if(_da.fillStyle.charAt(0)==="!"){
vml.push("<cg_vml_:fill type=\"tile\" src=\"",_da.fillStyle.substring(1),"\" opacity=\"",_dd,"\" />");
}else{
vml.push("<cg_vml_:fill color=\"",_da.fillStyle,"\" opacity=\"",_dd,"\" />");
}
}
}
if(_dc){
vml.push("<cg_vml_:stroke opacity=\"",_dd,"\" joinstyle=\"",_c8[_da.lineJoin],"\" miterlimit=\"",_da.miterLimit,"\" endcap=\"",_c7[_da.lineCap],"\" weight=\"",_da.lineWidth,"","px\" color=\"",_da.strokeStyle,"\" />");
}
var _e5=_da.shadowColor;
if(_e5){
var _e6=_da.shadowOffset;
vml.push("<cg_vml_:shadow on=\"t\" offset=\"",_e6.width,"pt ",_e6.height,"pt\" opacity=\"",objj_msgSend(_e5,"alphaComponent"),"\" color=black />");
}
vml.push("</cg_vml_:shape>");
if(_d6.buffer!=nil){
_d6.buffer+=vml.join("");
}else{
_d6.DOMElement.insertAdjacentHTML("BeforeEnd",vml.join(""));
}
};
to_string=function(_e7){
return "rgb("+ROUND(_e7.components[0]*255)+", "+ROUND(_e7.components[1]*255)+", "+ROUND(255*_e7.components[2])+")";
};
CGContextDrawLinearGradient=function(_e8,_e9,_ea,_eb,_ec){
if(!_e8||!_e9){
return;
}
var vml=nil;
if(_e9.vml_gradient){
var _ed=objj_msgSend(objj_msgSend(_e9.vml_gradient,"stops"),"sortedArrayUsingSelector:",sel_getUid("comparePosition:")),_ee=objj_msgSend(_ed,"count");
vml=["<cg_vml_:fill type=\"gradient\" method=\"linear sigma\" "];
vml.push("angle=\""+(objj_msgSend(_e9.vml_gradient,"angle")+90)+"\" ");
vml.push("colors=\"");
for(var i=0;i<_ee;i++){
vml.push((objj_msgSend(_ed[i],"position")*100).toFixed(0)+"% ");
vml.push(objj_msgSend(objj_msgSend(objj_msgSend(_ed[i],"color"),"colorForSlideBase:",nil),"cssString"));
if(i<_ee-1){
vml.push(",");
}
}
vml.push("\" />");
}else{
var _ef=_e9.colors,_ee=_ef.length;
vml=["<cg_vml_:fill type=\"gradient\" "];
vml.push("colors=\"");
for(var i=0;i<_ee;i++){
vml.push((_e9.locations[i]*100).toFixed(0)+"% "+to_string(_ef[i])+(i<_ee-1?",":""));
}
vml.push("\" />");
}
_e8.gState.gradient=vml.join("");
};
}
}
p;12;CGGeometry.jt;6756;@STATIC;1.0;t;6737;
CGPointMake=function(x,y){
return {x:x,y:y};
};
CGPointMakeZero=function(){
return {x:0,y:0};
};
CGPointMakeCopy=function(_1){
return {x:_1.x,y:_1.y};
};
CGPointCreateCopy=function(_2){
return {x:_2.x,y:_2.y};
};
CGPointEqualToPoint=function(_3,_4){
return (_3.x==_4.x&&_3.y==_4.y);
};
CGStringFromPoint=function(_5){
return ("{"+_5.x+", "+_5.y+"}");
};
CGSizeMake=function(_6,_7){
return {width:_6,height:_7};
};
CGSizeMakeZero=function(){
return {width:0,height:0};
};
CGSizeMakeCopy=function(_8){
return {width:_8.width,height:_8.height};
};
CGSizeCreateCopy=function(_9){
return {width:_9.width,height:_9.height};
};
CGSizeEqualToSize=function(_a,_b){
return (_a.width==_b.width&&_a.height==_b.height);
};
CGStringFromSize=function(_c){
return ("{"+_c.width+", "+_c.height+"}");
};
CGRectMake=function(x,y,_d,_e){
return {origin:{x:x,y:y},size:{width:_d,height:_e}};
};
CGRectMakeZero=function(){
return {origin:{x:0,y:0},size:{width:0,height:0}};
};
CGRectMakeCopy=function(_f){
return {origin:{x:_f.origin.x,y:_f.origin.y},size:{width:_f.size.width,height:_f.size.height}};
};
CGRectCreateCopy=function(_10){
return {origin:{x:_10.origin.x,y:_10.origin.y},size:{width:_10.size.width,height:_10.size.height}};
};
CGRectEqualToRect=function(_11,_12){
return ((_11.origin.x==_12.origin.x&&_11.origin.y==_12.origin.y)&&(_11.size.width==_12.size.width&&_11.size.height==_12.size.height));
};
CGStringFromRect=function(_13){
return ("{"+("{"+_13.origin.x+", "+_13.origin.y+"}")+", "+("{"+_13.size.width+", "+_13.size.height+"}")+"}");
};
CGRectOffset=function(_14,dX,dY){
return {origin:{x:_14.origin.x+dX,y:_14.origin.y+dY},size:{width:_14.size.width,height:_14.size.height}};
};
CGRectInset=function(_15,dX,dY){
return {origin:{x:_15.origin.x+dX,y:_15.origin.y+dY},size:{width:_15.size.width-2*dX,height:_15.size.height-2*dY}};
};
CGRectGetHeight=function(_16){
return (_16.size.height);
};
CGRectGetMaxX=function(_17){
return (_17.origin.x+_17.size.width);
};
CGRectGetMaxY=function(_18){
return (_18.origin.y+_18.size.height);
};
CGRectGetMidX=function(_19){
return (_19.origin.x+(_19.size.width)/2);
};
CGRectGetMidY=function(_1a){
return (_1a.origin.y+(_1a.size.height)/2);
};
CGRectGetMinX=function(_1b){
return (_1b.origin.x);
};
CGRectGetMinY=function(_1c){
return (_1c.origin.y);
};
CGRectGetWidth=function(_1d){
return (_1d.size.width);
};
CGRectIsEmpty=function(_1e){
return (_1e.size.width<=0||_1e.size.height<=0);
};
CGRectIsNull=function(_1f){
return (_1f.size.width<=0||_1f.size.height<=0);
};
CGRectContainsPoint=function(_20,_21){
return (_21.x>=(_20.origin.x)&&_21.y>=(_20.origin.y)&&_21.x<(_20.origin.x+_20.size.width)&&_21.y<(_20.origin.y+_20.size.height));
};
CGInsetMake=function(top,_22,_23,_24){
return {top:(top),right:(_22),bottom:(_23),left:(_24)};
};
CGInsetMakeZero=function(){
return {top:(0),right:(0),bottom:(0),left:(0)};
};
CGInsetMakeCopy=function(_25){
return {top:(_25.top),right:(_25.right),bottom:(_25.bottom),left:(_25.left)};
};
CGInsetIsEmpty=function(_26){
return ((_26).top===0&&(_26).right===0&&(_26).bottom===0&&(_26).left===0);
};
CGInsetEqualToInset=function(_27,_28){
return ((_27).top===(_28).top&&(_27).right===(_28).right&&(_27).bottom===(_28).bottom&&(_27).left===(_28).left);
};
CGMinXEdge=0;
CGMinYEdge=1;
CGMaxXEdge=2;
CGMaxYEdge=3;
CGRectNull={origin:{x:Infinity,y:Infinity},size:{width:0,height:0}};
CGRectDivide=function(_29,_2a,rem,_2b,_2c){
_2a.origin={x:_29.origin.x,y:_29.origin.y};
_2a.size={width:_29.size.width,height:_29.size.height};
rem.origin={x:_29.origin.x,y:_29.origin.y};
rem.size={width:_29.size.width,height:_29.size.height};
switch(_2c){
case CGMinXEdge:
_2a.size.width=_2b;
rem.origin.x+=_2b;
rem.size.width-=_2b;
break;
case CGMaxXEdge:
_2a.origin.x=(_2a.origin.x+_2a.size.width)-_2b;
_2a.size.width=_2b;
rem.size.width-=_2b;
break;
case CGMinYEdge:
_2a.size.height=_2b;
rem.origin.y+=_2b;
rem.size.height-=_2b;
break;
case CGMaxYEdge:
_2a.origin.y=(_2a.origin.y+_2a.size.height)-_2b;
_2a.size.height=_2b;
rem.size.height-=_2b;
}
};
CGRectContainsRect=function(_2d,_2e){
var _2f=CGRectUnion(_2d,_2e);
return ((_2f.origin.x==_2d.origin.x&&_2f.origin.y==_2d.origin.y)&&(_2f.size.width==_2d.size.width&&_2f.size.height==_2d.size.height));
};
CGRectIntersectsRect=function(_30,_31){
var _32=CGRectIntersection(_30,_31);
return !(_32.size.width<=0||_32.size.height<=0);
};
CGRectIntegral=function(_33){
_33=CGRectStandardize(_33);
var x=FLOOR((_33.origin.x)),y=FLOOR((_33.origin.y));
_33.size.width=CEIL((_33.origin.x+_33.size.width))-x;
_33.size.height=CEIL((_33.origin.y+_33.size.height))-y;
_33.origin.x=x;
_33.origin.y=y;
return _33;
};
CGRectIntersection=function(_34,_35){
var _36={origin:{x:MAX((_34.origin.x),(_35.origin.x)),y:MAX((_34.origin.y),(_35.origin.y))},size:{width:0,height:0}};
_36.size.width=MIN((_34.origin.x+_34.size.width),(_35.origin.x+_35.size.width))-(_36.origin.x);
_36.size.height=MIN((_34.origin.y+_34.size.height),(_35.origin.y+_35.size.height))-(_36.origin.y);
return (_36.size.width<=0||_36.size.height<=0)?{origin:{x:0,y:0},size:{width:0,height:0}}:_36;
};
CGRectStandardize=function(_37){
var _38=(_37.size.width),_39=(_37.size.height),_3a={origin:{x:_37.origin.x,y:_37.origin.y},size:{width:_37.size.width,height:_37.size.height}};
if(_38<0){
_3a.origin.x+=_38;
_3a.size.width=-_38;
}
if(_39<0){
_3a.origin.y+=_39;
_3a.size.height=-_39;
}
return _3a;
};
CGRectUnion=function(_3b,_3c){
var _3d=!_3b||_3b===CGRectNull,_3e=!_3c||_3c===CGRectNull;
if(_3d){
return _3e?CGRectNull:_3c;
}
if(_3e){
return _3d?CGRectNull:_3b;
}
var _3f=MIN((_3b.origin.x),(_3c.origin.x)),_40=MIN((_3b.origin.y),(_3c.origin.y)),_41=MAX((_3b.origin.x+_3b.size.width),(_3c.origin.x+_3c.size.width)),_42=MAX((_3b.origin.y+_3b.size.height),(_3c.origin.y+_3c.size.height));
return {origin:{x:_3f,y:_40},size:{width:_41-_3f,height:_42-_40}};
};
CGPointFromString=function(_43){
var _44=_43.indexOf(",");
return {x:parseInt(_43.substr(1,_44-1)),y:parseInt(_43.substring(_44+1,_43.length))};
};
CGSizeFromString=function(_45){
var _46=_45.indexOf(",");
return {width:parseInt(_45.substr(1,_46-1)),height:parseInt(_45.substring(_46+1,_45.length))};
};
CGRectFromString=function(_47){
var _48=_47.indexOf(",",_47.indexOf(",")+1);
return {origin:CGPointFromString(_47.substr(1,_48-1)),size:CGSizeFromString(_47.substring(_48+2,_47.length))};
};
CGPointFromEvent=function(_49){
return {x:_49.clientX,y:_49.clientY};
};
CGInsetFromString=function(_4a){
var _4b=_4a.substr(1,_4a.length-2).split(",");
return {top:(parseFloat(_4b[0])),right:(parseFloat(_4b[1])),bottom:(parseFloat(_4b[2])),left:(parseFloat(_4b[3]))};
};
CGInsetFromCPString=CGInsetFromString;
CPStringFromCGInset=function(_4c){
return "{"+_4c.top+", "+_4c.left+", "+_4c.bottom+", "+_4c.right+"}";
};
p;12;CGGradient.jt;730;@STATIC;1.0;i;9;CGColor.ji;14;CGColorSpace.jt;680;
objj_executeFile("CGColor.j",YES);
objj_executeFile("CGColorSpace.j",YES);
kCGGradientDrawsBeforeStartLocation=1<<0;
kCGGradientDrawsAfterEndLocation=1<<1;
CGGradientCreateWithColorComponents=function(_1,_2,_3,_4){
if(_3===undefined||_3===NULL){
var _5=_2.length/4,_3=[];
for(var _6=0;_6<_5;_6++){
_3.push(_6/(_5-1));
}
}
if(_4===undefined||_4===NULL){
var _4=_3.length;
}
var _7=[];
while(_4--){
var _8=_4*4;
_7[_4]=CGColorCreate(_1,_2.slice(_8,_8+4));
}
return CGGradientCreateWithColors(_1,_7,_3);
};
CGGradientCreateWithColors=function(_9,_a,_b){
return {colorspace:_9,colors:_a,locations:_b};
};
CGGradientRelease=function(){
};
CGGradientRetain=function(_c){
return _c;
};
p;8;CGPath.jt;7438;@STATIC;1.0;i;12;CGGeometry.ji;19;CGAffineTransform.jt;7378;
objj_executeFile("CGGeometry.j",YES);
objj_executeFile("CGAffineTransform.j",YES);
kCGPathElementMoveToPoint=0;
kCGPathElementAddLineToPoint=1;
kCGPathElementAddQuadCurveToPoint=2;
kCGPathElementAddCurveToPoint=3;
kCGPathElementCloseSubpath=4;
kCGPathElementAddArc=5;
kCGPathElementAddArcToPoint=6;
CGPathCreateMutable=function(){
return {count:0,start:NULL,current:NULL,elements:[]};
};
CGPathCreateMutableCopy=function(_1){
var _2=CGPathCreateMutable();
CGPathAddPath(_2,_1);
return _2;
};
CGPathCreateCopy=function(_3){
return CGPathCreateMutableCopy(_3);
};
CGPathRelease=function(_4){
};
CGPathRetain=function(_5){
return _5;
};
CGPathAddArc=function(_6,_7,x,y,_8,_9,_a,_b){
if(_7&&!(_7.a==1&&_7.b==0&&_7.c==0&&_7.d==1&&_7.tx==0&&_7.ty==0)){
var _c={x:x,y:y},_d={x:COS(_a),y:SIN(_a)},_e={x:COS(_9),y:SIN(_9)};
_d={x:_d.x*_7.a+_d.y*_7.c+_7.tx,y:_d.x*_7.b+_d.y*_7.d+_7.ty};
_e={x:_e.x*_7.a+_e.y*_7.c+_7.tx,y:_e.x*_7.b+_e.y*_7.d+_7.ty};
_c={x:_c.x*_7.a+_c.y*_7.c+_7.tx,y:_c.x*_7.b+_c.y*_7.d+_7.ty};
x=_c.x;
y=_c.y;
var _f=_a,_10=_9;
_a=ATAN2(_d.y-_7.ty,_d.x-_7.tx);
_9=ATAN2(_e.y-_7.ty,_e.x-_7.tx);
if(_a==_9&&_f!=_10){
if(_10>_f){
_a=_a-PI2;
}else{
_9=_9-PI2;
}
}
_8={width:_8,height:0};
_8={width:_8.width*_7.a+_8.height*_7.c,height:_8.width*_7.b+_8.height*_7.d};
_8=SQRT(_8.width*_8.width+_8.height*_8.height);
}
_6.current={x:x+_8*COS(_a),y:y+_8*SIN(_a)};
_6.elements[_6.count++]={type:kCGPathElementAddArc,x:x,y:y,radius:_8,startAngle:_9,endAngle:_a};
};
CGPathAddArcToPoint=function(_11,_12,x1,y1,x2,y2,_13){
};
CGPathAddCurveToPoint=function(_14,_15,_16,_17,_18,_19,x,y){
var cp1={x:_16,y:_17},cp2={x:_18,y:_19},end={x:x,y:y};
if(_15){
cp1={x:cp1.x*_15.a+cp1.y*_15.c+_15.tx,y:cp1.x*_15.b+cp1.y*_15.d+_15.ty};
cp2={x:cp2.x*_15.a+cp2.y*_15.c+_15.tx,y:cp2.x*_15.b+cp2.y*_15.d+_15.ty};
end={x:end.x*_15.a+end.y*_15.c+_15.tx,y:end.x*_15.b+end.y*_15.d+_15.ty};
}
_14.current=end;
_14.elements[_14.count++]={type:kCGPathElementAddCurveToPoint,cp1x:cp1.x,cp1y:cp1.y,cp2x:cp2.x,cp2y:cp2.y,x:end.x,y:end.y};
};
CGPathAddLines=function(_1a,_1b,_1c,_1d){
var i=1;
if(_1d===NULL){
var _1d=_1c.length;
}
if(!_1a||_1d<2){
return;
}
CGPathMoveToPoint(_1a,_1b,_1c[0].x,_1c[0].y);
for(;i<_1d;++i){
CGPathAddLineToPoint(_1a,_1b,_1c[i].x,_1c[i].y);
}
};
CGPathAddLineToPoint=function(_1e,_1f,x,y){
var _20={x:x,y:y};
if(_1f!=NULL){
_20={x:_20.x*_1f.a+_20.y*_1f.c+_1f.tx,y:_20.x*_1f.b+_20.y*_1f.d+_1f.ty};
}
_1e.elements[_1e.count++]={type:kCGPathElementAddLineToPoint,x:_20.x,y:_20.y};
_1e.current=_20;
};
CGPathAddPath=function(_21,_22,_23){
for(var i=0,_24=_23.count;i<_24;++i){
var _25=_23.elements[i];
switch(_25.type){
case kCGPathElementAddLineToPoint:
CGPathAddLineToPoint(_21,_22,_25.x,_25.y);
break;
case kCGPathElementAddCurveToPoint:
CGPathAddCurveToPoint(_21,_22,_25.cp1x,_25.cp1y,_25.cp2x,_25.cp2y,_25.x,_25.y);
break;
case kCGPathElementAddArc:
CGPathAddArc(_21,_22,_25.x,_25.y,_25.radius,_25.startAngle,_25.endAngle,_25.isClockwise);
break;
case kCGPathElementAddQuadCurveToPoint:
CGPathAddQuadCurveToPoint(_21,_22,_25.cpx,_25.cpy,_25.x,_25.y);
break;
case kCGPathElementMoveToPoint:
CGPathMoveToPoint(_21,_22,_25.x,_25.y);
break;
case kCGPathElementCloseSubpath:
CGPathCloseSubpath(_21);
break;
}
}
};
CGPathAddQuadCurveToPoint=function(_26,_27,cpx,cpy,x,y){
var cp={x:cpx,y:cpy},end={x:x,y:y};
if(_27){
cp={x:cp.x*_27.a+cp.y*_27.c+_27.tx,y:cp.x*_27.b+cp.y*_27.d+_27.ty};
end={x:end.x*_27.a+end.y*_27.c+_27.tx,y:end.x*_27.b+end.y*_27.d+_27.ty};
}
_26.elements[_26.count++]={type:kCGPathElementAddQuadCurveToPoint,cpx:cp.x,cpy:cp.y,x:end.x,y:end.y};
_26.current=end;
};
CGPathAddRect=function(_28,_29,_2a){
CGPathAddRects(_28,_29,[_2a],1);
};
CGPathAddRects=function(_2b,_2c,_2d,_2e){
var i=0;
if(_2e===NULL){
var _2e=_2d.length;
}
for(;i<_2e;++i){
var _2f=_2d[i];
CGPathMoveToPoint(_2b,_2c,(_2f.origin.x),(_2f.origin.y));
CGPathAddLineToPoint(_2b,_2c,(_2f.origin.x+_2f.size.width),(_2f.origin.y));
CGPathAddLineToPoint(_2b,_2c,(_2f.origin.x+_2f.size.width),(_2f.origin.y+_2f.size.height));
CGPathAddLineToPoint(_2b,_2c,(_2f.origin.x),(_2f.origin.y+_2f.size.height));
CGPathCloseSubpath(_2b);
}
};
CGPathMoveToPoint=function(_30,_31,x,y){
var _32={x:x,y:y},_33=_30.count;
if(_31!=NULL){
_32={x:_32.x*_31.a+_32.y*_31.c+_31.tx,y:_32.x*_31.b+_32.y*_31.d+_31.ty};
}
_30.start=_32;
_30.current=_32;
var _34=_30.elements[_33-1];
if(_33!=0&&_34.type==kCGPathElementMoveToPoint){
_34.x=_32.x;
_34.y=_32.y;
}else{
_30.elements[_30.count++]={type:kCGPathElementMoveToPoint,x:_32.x,y:_32.y};
}
};
var _35=4*((SQRT2-1)/3);
CGPathWithEllipseInRect=function(_36){
var _37=CGPathCreateMutable();
if((_36.size.width)==(_36.size.height)){
CGPathAddArc(_37,nil,(_36.origin.x+(_36.size.width)/2),(_36.origin.y+(_36.size.height)/2),(_36.size.width)/2,0,2*PI,YES);
}else{
var _38={width:(_36.size.width)/2,height:(_36.size.height)/2},_39={x:(_36.origin.x)+_38.width,y:(_36.origin.y)+_38.height};
CGPathMoveToPoint(_37,nil,_39.x,_39.y-_38.height);
CGPathAddCurveToPoint(_37,nil,_39.x+(_35*_38.width),_39.y-_38.height,_39.x+_38.width,_39.y-(_35*_38.height),_39.x+_38.width,_39.y);
CGPathAddCurveToPoint(_37,nil,_39.x+_38.width,_39.y+(_35*_38.height),_39.x+(_35*_38.width),_39.y+_38.height,_39.x,_39.y+_38.height);
CGPathAddCurveToPoint(_37,nil,_39.x-(_35*_38.width),_39.y+_38.height,_39.x-_38.width,_39.y+(_35*_38.height),_39.x-_38.width,_39.y);
CGPathAddCurveToPoint(_37,nil,_39.x-_38.width,_39.y-(_35*_38.height),_39.x-(_35*_38.width),_39.y-_38.height,_39.x,_39.y-_38.height);
}
CGPathCloseSubpath(_37);
return _37;
};
CGPathWithRoundedRectangleInRect=function(_3a,_3b,_3c,ne,se,sw,nw){
var _3d=CGPathCreateMutable(),_3e=(_3a.origin.x),_3f=(_3a.origin.x+_3a.size.width),_40=(_3a.origin.y),_41=(_3a.origin.y+_3a.size.height);
CGPathMoveToPoint(_3d,nil,_3e+_3b,_40);
if(ne){
CGPathAddLineToPoint(_3d,nil,_3f-_3b,_40);
CGPathAddCurveToPoint(_3d,nil,_3f-_3b,_40,_3f,_40,_3f,_40+_3b);
}else{
CGPathAddLineToPoint(_3d,nil,_3f,_40);
}
if(se){
CGPathAddLineToPoint(_3d,nil,_3f,_41-_3b);
CGPathAddCurveToPoint(_3d,nil,_3f,_41-_3b,_3f,_41,_3f-_3b,_41);
}else{
CGPathAddLineToPoint(_3d,nil,_3f,_41);
}
if(sw){
CGPathAddLineToPoint(_3d,nil,_3e+_3b,_41);
CGPathAddCurveToPoint(_3d,nil,_3e+_3b,_41,_3e,_41,_3e,_41-_3b);
}else{
CGPathAddLineToPoint(_3d,nil,_3e,_41);
}
if(nw){
CGPathAddLineToPoint(_3d,nil,_3e,_40+_3b);
CGPathAddCurveToPoint(_3d,nil,_3e,_40+_3b,_3e,_40,_3e+_3b,_40);
}else{
CGPathAddLineToPoint(_3d,nil,_3e,_40);
}
CGPathCloseSubpath(_3d);
return _3d;
};
CGPathCloseSubpath=function(_42){
var _43=_42.count;
if(_43==0||_42.elements[_43-1].type==kCGPathElementCloseSubpath){
return;
}
_42.elements[_42.count++]={type:kCGPathElementCloseSubpath,points:[_42.start]};
};
CGPathEqualToPath=function(_44,_45){
if(_44==_45){
return YES;
}
if(_44.count!=_45.count||!(_44.start.x==_45.start.x&&_44.start.y==_45.start.y)||!(_44.current.x==_45.current.x&&_44.current.y==_45.current.y)){
return NO;
}
var i=0,_46=_44.count;
for(;i<_46;++i){
var _47=_44[i],_48=_45[i];
if(_47.type!=_48.type){
return NO;
}
if((_47.type==kCGPathElementAddArc||_47.type==kCGPathElementAddArcToPoint)&&_47.radius!=_48.radius){
return NO;
}
var j=_47.points.length;
while(j--){
if(!(_47.points[j].x==_48.points[j].x&&_47.points[j].y==_48.points[j].y)){
return NO;
}
}
}
return YES;
};
CGPathGetCurrentPoint=function(_49){
return {x:_49.current.x,y:_49.current.y};
};
CGPathIsEmpty=function(_4a){
return !_4a||_4a.count==0;
};
p;18;_CPMenuBarWindow.jt;13279;@STATIC;1.0;i;9;CPPanel.ji;15;_CPMenuWindow.jt;13226;
objj_executeFile("CPPanel.j",YES);
objj_executeFile("_CPMenuWindow.j",YES);
var _1=28,_2=10,_3=10,_4=10;
var _5=nil,_6=nil;
var _7=objj_allocateClassPair(CPPanel,"_CPMenuBarWindow"),_8=_7.isa;
class_addIvars(_7,[new objj_ivar("_menu"),new objj_ivar("_highlightView"),new objj_ivar("_menuItemViews"),new objj_ivar("_trackingMenuItem"),new objj_ivar("_iconImageView"),new objj_ivar("_titleField"),new objj_ivar("_textColor"),new objj_ivar("_titleColor"),new objj_ivar("_textShadowColor"),new objj_ivar("_titleShadowColor"),new objj_ivar("_highlightColor"),new objj_ivar("_highlightTextColor"),new objj_ivar("_highlightTextShadowColor")]);
objj_registerClassPair(_7);
class_addMethods(_7,[new objj_method(sel_getUid("init"),function(_9,_a){
with(_9){
var _b=objj_msgSend(objj_msgSend(CPPlatformWindow,"primaryPlatformWindow"),"contentBounds");
_b.size.height=_1;
_9=objj_msgSendSuper({receiver:_9,super_class:objj_getClass("_CPMenuBarWindow").super_class},"initWithContentRect:styleMask:",_b,CPBorderlessWindowMask);
if(_9){
objj_msgSend(_9,"setLevel:",CPMainMenuWindowLevel);
objj_msgSend(_9,"setAutoresizingMask:",CPWindowWidthSizable);
var _c=objj_msgSend(_9,"contentView");
objj_msgSend(_c,"setAutoresizesSubviews:",NO);
objj_msgSend(_9,"setBecomesKeyOnlyIfNeeded:",YES);
_iconImageView=objj_msgSend(objj_msgSend(CPImageView,"alloc"),"initWithFrame:",CGRectMake(0,0,16,16));
objj_msgSend(_c,"addSubview:",_iconImageView);
_titleField=objj_msgSend(objj_msgSend(CPTextField,"alloc"),"initWithFrame:",CGRectMakeZero());
objj_msgSend(_titleField,"setFont:",objj_msgSend(CPFont,"boldSystemFontOfSize:",13));
objj_msgSend(_titleField,"setAlignment:",CPCenterTextAlignment);
objj_msgSend(_titleField,"setTextShadowOffset:",CGSizeMake(0,1));
objj_msgSend(_c,"addSubview:",_titleField);
}
return _9;
}
}),new objj_method(sel_getUid("setTitle:"),function(_d,_e,_f){
with(_d){
var _10=objj_msgSend(objj_msgSend(CPBundle,"mainBundle"),"objectForInfoDictionaryKey:","CPBundleName");
if(!objj_msgSend(_10,"length")){
document.title=_f;
}else{
if(objj_msgSend(_f,"length")){
document.title=_f+" - "+_10;
}else{
document.title=_10;
}
}
objj_msgSend(_titleField,"setStringValue:",_f);
objj_msgSend(_titleField,"sizeToFit");
objj_msgSend(_d,"tile");
}
}),new objj_method(sel_getUid("setIconImage:"),function(_11,_12,_13){
with(_11){
objj_msgSend(_iconImageView,"setImage:",_13);
objj_msgSend(_iconImageView,"setHidden:",_13==nil);
objj_msgSend(_11,"tile");
}
}),new objj_method(sel_getUid("setIconImageAlphaValue:"),function(_14,_15,_16){
with(_14){
objj_msgSend(_iconImageView,"setAlphaValue:",_16);
}
}),new objj_method(sel_getUid("setColor:"),function(_17,_18,_19){
with(_17){
if(!_19){
if(!_5){
_5=objj_msgSend(CPColor,"colorWithPatternImage:",objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(objj_msgSend(CPBundle,"bundleForClass:",objj_msgSend(_CPMenuBarWindow,"class")),"pathForResource:","_CPMenuBarWindow/_CPMenuBarWindowBackground.png"),CGSizeMake(1,28)));
}
objj_msgSend(objj_msgSend(_17,"contentView"),"setBackgroundColor:",_5);
}else{
objj_msgSend(objj_msgSend(_17,"contentView"),"setBackgroundColor:",_19);
}
}
}),new objj_method(sel_getUid("setTextColor:"),function(_1a,_1b,_1c){
with(_1a){
if(_textColor==_1c){
return;
}
_textColor=_1c;
objj_msgSend(_menuItemViews,"makeObjectsPerformSelector:withObject:",sel_getUid("setTextColor:"),_textColor);
}
}),new objj_method(sel_getUid("setTitleColor:"),function(_1d,_1e,_1f){
with(_1d){
if(_titleColor==_1f){
return;
}
_titleColor=_1f;
objj_msgSend(_titleField,"setTextColor:",_1f?_1f:objj_msgSend(CPColor,"blackColor"));
}
}),new objj_method(sel_getUid("setTextShadowColor:"),function(_20,_21,_22){
with(_20){
if(_textShadowColor==_22){
return;
}
_textShadowColor=_22;
objj_msgSend(_menuItemViews,"makeObjectsPerformSelector:withObject:",sel_getUid("setTextShadowColor:"),_textShadowColor);
}
}),new objj_method(sel_getUid("setTitleShadowColor:"),function(_23,_24,_25){
with(_23){
if(_titleShadowColor==_25){
return;
}
_titleShadowColor=_25;
objj_msgSend(_titleField,"setTextShadowColor:",_25?_25:objj_msgSend(CPColor,"whiteColor"));
}
}),new objj_method(sel_getUid("setHighlightColor:"),function(_26,_27,_28){
with(_26){
if(_highlightColor==_28){
return;
}
_highlightColor=_28;
}
}),new objj_method(sel_getUid("setHighlightTextColor:"),function(_29,_2a,_2b){
with(_29){
if(_highlightTextColor==_2b){
return;
}
_highlightTextColor=_2b;
}
}),new objj_method(sel_getUid("setHighlightTextShadowColor:"),function(_2c,_2d,_2e){
with(_2c){
if(_highlightTextShadowColor==_2e){
return;
}
_highlightTextShadowColor=_2e;
}
}),new objj_method(sel_getUid("setMenu:"),function(_2f,_30,_31){
with(_2f){
if(_menu==_31){
return;
}
var _32=objj_msgSend(CPNotificationCenter,"defaultCenter");
if(_menu){
objj_msgSend(_32,"removeObserver:name:object:",_2f,CPMenuDidAddItemNotification,_menu);
objj_msgSend(_32,"removeObserver:name:object:",_2f,CPMenuDidChangeItemNotification,_menu);
objj_msgSend(_32,"removeObserver:name:object:",_2f,CPMenuDidRemoveItemNotification,_menu);
var _33=objj_msgSend(_menu,"itemArray"),_34=_33.length;
while(_34--){
objj_msgSend(objj_msgSend(_33[_34],"_menuItemView"),"removeFromSuperview");
}
}
_menu=_31;
if(_menu){
objj_msgSend(_32,"addObserver:selector:name:object:",_2f,sel_getUid("menuDidAddItem:"),CPMenuDidAddItemNotification,_menu);
objj_msgSend(_32,"addObserver:selector:name:object:",_2f,sel_getUid("menuDidChangeItem:"),CPMenuDidChangeItemNotification,_menu);
objj_msgSend(_32,"addObserver:selector:name:object:",_2f,sel_getUid("menuDidRemoveItem:"),CPMenuDidRemoveItemNotification,_menu);
}
_menuItemViews=[];
var _35=objj_msgSend(_2f,"contentView"),_33=objj_msgSend(_menu,"itemArray"),_34=_33.length;
for(index=0;index<_34;++index){
var _36=_33[index],_37=objj_msgSend(_36,"_menuItemView");
_menuItemViews.push(_37);
objj_msgSend(_37,"setTextColor:",_textColor);
objj_msgSend(_37,"setHidden:",objj_msgSend(_36,"isHidden"));
objj_msgSend(_37,"synchronizeWithMenuItem");
objj_msgSend(_35,"addSubview:",_37);
}
objj_msgSend(_2f,"tile");
}
}),new objj_method(sel_getUid("menuDidChangeItem:"),function(_38,_39,_3a){
with(_38){
var _3b=objj_msgSend(_menu,"itemAtIndex:",objj_msgSend(objj_msgSend(_3a,"userInfo"),"objectForKey:","CPMenuItemIndex")),_3c=objj_msgSend(_3b,"_menuItemView");
objj_msgSend(_3c,"setHidden:",objj_msgSend(_3b,"isHidden"));
objj_msgSend(_3c,"synchronizeWithMenuItem");
objj_msgSend(_38,"tile");
}
}),new objj_method(sel_getUid("menuDidAddItem:"),function(_3d,_3e,_3f){
with(_3d){
var _40=objj_msgSend(objj_msgSend(_3f,"userInfo"),"objectForKey:","CPMenuItemIndex"),_41=objj_msgSend(_menu,"itemAtIndex:",_40),_42=objj_msgSend(_41,"_menuItemView");
objj_msgSend(_menuItemViews,"insertObject:atIndex:",_42,_40);
objj_msgSend(_42,"setTextColor:",_textColor);
objj_msgSend(_42,"setHidden:",objj_msgSend(_41,"isHidden"));
objj_msgSend(_42,"synchronizeWithMenuItem");
objj_msgSend(objj_msgSend(_3d,"contentView"),"addSubview:",_42);
objj_msgSend(_3d,"tile");
}
}),new objj_method(sel_getUid("menuDidRemoveItem:"),function(_43,_44,_45){
with(_43){
var _46=objj_msgSend(objj_msgSend(_45,"userInfo"),"objectForKey:","CPMenuItemIndex"),_47=objj_msgSend(_menuItemViews,"objectAtIndex:",_46);
objj_msgSend(_menuItemViews,"removeObjectAtIndex:",_46);
objj_msgSend(_47,"removeFromSuperview");
objj_msgSend(_43,"tile");
}
}),new objj_method(sel_getUid("mouseDown:"),function(_48,_49,_4a){
with(_48){
var _4b=CGRectInset(objj_msgSend(objj_msgSend(_48,"platformWindow"),"visibleFrame"),5,0);
_4b.size.height-=5;
objj_msgSend(objj_msgSend(_CPMenuManager,"sharedMenuManager"),"beginTracking:menuContainer:constraintRect:callback:",_4a,_48,_4b,function(_4c,_4d){
objj_msgSend(_4d,"_performActionOfHighlightedItemChain");
objj_msgSend(_4d,"_highlightItemAtIndex:",CPNotFound);
});
}
}),new objj_method(sel_getUid("font"),function(_4e,_4f){
with(_4e){
objj_msgSend(CPFont,"systemFontOfSize:",12);
}
}),new objj_method(sel_getUid("tile"),function(_50,_51){
with(_50){
var _52=objj_msgSend(_menu,"itemArray"),_53=0,_54=_52.length,x=_3,y=0,_55=YES;
for(;_53<_54;++_53){
var _56=_52[_53];
if(objj_msgSend(_56,"isSeparatorItem")){
x=CGRectGetWidth(objj_msgSend(_50,"frame"))-_4;
_55=NO;
continue;
}
if(objj_msgSend(_56,"isHidden")){
continue;
}
var _57=objj_msgSend(_56,"_menuItemView"),_58=objj_msgSend(_57,"frame");
if(_55){
objj_msgSend(_57,"setFrame:",CGRectMake(x,0,CGRectGetWidth(_58),_1));
x+=CGRectGetWidth(objj_msgSend(_57,"frame"));
}else{
objj_msgSend(_57,"setFrame:",CGRectMake(x-CGRectGetWidth(_58),0,CGRectGetWidth(_58),_1));
x=CGRectGetMinX(objj_msgSend(_57,"frame"));
}
}
var _59=objj_msgSend(objj_msgSend(_50,"contentView"),"bounds"),_5a=objj_msgSend(_titleField,"frame");
if(objj_msgSend(_iconImageView,"isHidden")){
objj_msgSend(_titleField,"setFrameOrigin:",CGPointMake((CGRectGetWidth(_59)-CGRectGetWidth(_5a))/2,(CGRectGetHeight(_59)-CGRectGetHeight(_5a))/2));
}else{
var _5b=objj_msgSend(_iconImageView,"frame"),_5c=CGRectGetWidth(_5b),_5d=_5c+CGRectGetWidth(_5a);
objj_msgSend(_iconImageView,"setFrameOrigin:",CGPointMake((CGRectGetWidth(_59)-_5d)/2,(CGRectGetHeight(_59)-CGRectGetHeight(_5b))/2));
objj_msgSend(_titleField,"setFrameOrigin:",CGPointMake((CGRectGetWidth(_59)-_5d)/2+_5c,(CGRectGetHeight(_59)-CGRectGetHeight(_5a))/2));
}
}
}),new objj_method(sel_getUid("setFrame:display:animate:"),function(_5e,_5f,_60,_61,_62){
with(_5e){
var _63=objj_msgSend(_5e,"frame").size;
objj_msgSendSuper({receiver:_5e,super_class:objj_getClass("_CPMenuBarWindow").super_class},"setFrame:display:animate:",_60,_61,_62);
if(!(_63.width==_60.size.width&&_63.height==_60.size.height)){
objj_msgSend(_5e,"tile");
}
}
})]);
class_addMethods(_8,[new objj_method(sel_getUid("initialize"),function(_64,_65){
with(_64){
if(_64!=objj_msgSend(_CPMenuBarWindow,"class")){
return;
}
var _66=objj_msgSend(CPBundle,"bundleForClass:",_64);
_6=objj_msgSend(CPFont,"boldSystemFontOfSize:",12);
}
}),new objj_method(sel_getUid("font"),function(_67,_68){
with(_67){
return _6;
}
})]);
var _7=objj_getClass("_CPMenuBarWindow");
if(!_7){
throw new SyntaxError("*** Could not find definition for class \"_CPMenuBarWindow\"");
}
var _8=_7.isa;
class_addMethods(_7,[new objj_method(sel_getUid("isMenuBar"),function(_69,_6a){
with(_69){
return YES;
}
}),new objj_method(sel_getUid("globalFrame"),function(_6b,_6c){
with(_6b){
return objj_msgSend(_6b,"frame");
}
}),new objj_method(sel_getUid("scrollingStateForPoint:"),function(_6d,_6e,_6f){
with(_6d){
return _CPMenuManagerScrollingStateNone;
}
}),new objj_method(sel_getUid("itemIndexAtPoint:"),function(_70,_71,_72){
with(_70){
var _73=objj_msgSend(_menu,"itemArray"),_74=_73.length;
while(_74--){
var _75=_73[_74];
if(objj_msgSend(_75,"isHidden")||objj_msgSend(_75,"isSeparatorItem")){
continue;
}
if(CGRectContainsPoint(objj_msgSend(_70,"rectForItemAtIndex:",_74),_72)){
return _74;
}
}
return CPNotFound;
}
}),new objj_method(sel_getUid("rectForItemAtIndex:"),function(_76,_77,_78){
with(_76){
var _79=objj_msgSend(_menu,"itemAtIndex:",_78===CPNotFound?0:_78);
return objj_msgSend(objj_msgSend(_79,"_menuItemView"),"frame");
}
})]);
var _7=objj_allocateClassPair(_CPMenuView,"_CPMenuBarView"),_8=_7.isa;
objj_registerClassPair(_7);
class_addMethods(_7,[new objj_method(sel_getUid("rectForItemAtIndex:"),function(_7a,_7b,_7c){
with(_7a){
return objj_msgSend(_menuItemViews[_7c===CPNotFound?0:_7c],"frame");
}
}),new objj_method(sel_getUid("itemIndexAtPoint:"),function(_7d,_7e,_7f){
with(_7d){
var _80=objj_msgSend(_7d,"bounds");
if(!CGRectContainsPoint(_80,_7f)){
return CPNotFound;
}
var x=_7f.x,low=0,_81=_visibleMenuItemInfos.length-1;
while(low<=_81){
var _82=FLOOR(low+(_81-low)/2),_83=_visibleMenuItemInfos[_82],_84=objj_msgSend(_83.view,"frame");
if(x<CGRectGetMinX(_84)){
_81=_82-1;
}else{
if(x>CGRectGetMaxX(_84)){
low=_82+1;
}else{
return _83.index;
}
}
}
return CPNotFound;
}
}),new objj_method(sel_getUid("tile"),function(_85,_86){
with(_85){
var _87=objj_msgSend(_menu,"itemArray"),_88=0,_89=_87.length,x=_3,y=0,_8a=YES;
for(;_88<_89;++_88){
var _8b=_87[_88];
if(objj_msgSend(_8b,"isSeparatorItem")){
x=CGRectGetWidth(objj_msgSend(_85,"frame"))-_4;
_8a=NO;
continue;
}
if(objj_msgSend(_8b,"isHidden")){
continue;
}
var _8c=objj_msgSend(_8b,"_menuItemView"),_8d=objj_msgSend(_8c,"frame");
if(_8a){
objj_msgSend(_8c,"setFrameOrigin:",CGPointMake(x,(_1-1-CGRectGetHeight(_8d))/2));
x+=CGRectGetWidth(objj_msgSend(_8c,"frame"))+_2;
}else{
objj_msgSend(_8c,"setFrameOrigin:",CGPointMake(x-CGRectGetWidth(_8d),(_1-1-CGRectGetHeight(_8d))/2));
x=CGRectGetMinX(objj_msgSend(_8c,"frame"))-_2;
}
}
var _8e=objj_msgSend(objj_msgSend(_85,"contentView"),"bounds"),_8f=objj_msgSend(_titleField,"frame");
if(objj_msgSend(_iconImageView,"isHidden")){
objj_msgSend(_titleField,"setFrameOrigin:",CGPointMake((CGRectGetWidth(_8e)-CGRectGetWidth(_8f))/2,(CGRectGetHeight(_8e)-CGRectGetHeight(_8f))/2));
}else{
var _90=objj_msgSend(_iconImageView,"frame"),_91=CGRectGetWidth(_90),_92=_91+CGRectGetWidth(_8f);
objj_msgSend(_iconImageView,"setFrameOrigin:",CGPointMake((CGRectGetWidth(_8e)-_92)/2,(CGRectGetHeight(_8e)-CGRectGetHeight(_90))/2));
objj_msgSend(_titleField,"setFrameOrigin:",CGPointMake((CGRectGetWidth(_8e)-_92)/2+_91,(CGRectGetHeight(_8e)-CGRectGetHeight(_8f))/2));
}
}
})]);
p;16;_CPMenuManager.jt;16425;@STATIC;1.0;I;21;Foundation/CPObject.jt;16379;
objj_executeFile("Foundation/CPObject.j",NO);
_CPMenuManagerScrollingStateUp=-1,_CPMenuManagerScrollingStateDown=1,_CPMenuManagerScrollingStateNone=0;
var _1=500,_2=nil;
var _3=objj_allocateClassPair(CPObject,"_CPMenuManager"),_4=_3.isa;
class_addIvars(_3,[new objj_ivar("_startTime"),new objj_ivar("_scrollingState"),new objj_ivar("_lastGlobalLocation"),new objj_ivar("_lastMouseOverMenuView"),new objj_ivar("_constraintRect"),new objj_ivar("_menuContainerStack"),new objj_ivar("_trackingCallback"),new objj_ivar("_keyBuffer"),new objj_ivar("_previousActiveItem"),new objj_ivar("_showTimerID")]);
objj_registerClassPair(_3);
class_addMethods(_3,[new objj_method(sel_getUid("init"),function(_5,_6){
with(_5){
if(_2){
return _2;
}
return objj_msgSendSuper({receiver:_5,super_class:objj_getClass("_CPMenuManager").super_class},"init");
}
}),new objj_method(sel_getUid("trackingMenuContainer"),function(_7,_8){
with(_7){
return _menuContainerStack[0];
}
}),new objj_method(sel_getUid("trackingMenu"),function(_9,_a){
with(_9){
return objj_msgSend(objj_msgSend(_9,"trackingMenuContainer"),"menu");
}
}),new objj_method(sel_getUid("beginTracking:menuContainer:constraintRect:callback:"),function(_b,_c,_d,_e,_f,_10){
with(_b){
var _11=objj_msgSend(_e,"menu");
CPApp._activeMenu=_11;
_startTime=objj_msgSend(_d,"timestamp");
_scrollingState=_CPMenuManagerScrollingStateNone;
_constraintRect=_f;
_menuContainerStack=[_e];
_trackingCallback=_10;
if(_11===objj_msgSend(CPApp,"mainMenu")){
var _12=objj_msgSend(_d,"globalLocation"),_13=objj_msgSend(_e,"convertGlobalToBase:",_12),_14=objj_msgSend(_e,"itemIndexAtPoint:",_13),_15=_14!==CPNotFound?objj_msgSend(_11,"itemAtIndex:",_14):nil;
_menuBarButtonItemIndex=_14;
_menuBarButtonMenuContainer=_e;
if(objj_msgSend(_15,"_isMenuBarButton")){
return objj_msgSend(_b,"trackMenuBarButtonEvent:",_d);
}
}
objj_msgSend(_b,"trackEvent:",_d);
}
}),new objj_method(sel_getUid("trackEvent:"),function(_16,_17,_18){
with(_16){
var _19=objj_msgSend(_18,"type"),_1a=objj_msgSend(_16,"trackingMenu");
if(_19===CPAppKitDefined){
return objj_msgSend(_16,"completeTracking");
}
objj_msgSend(CPApp,"setTarget:selector:forNextEventMatchingMask:untilDate:inMode:dequeue:",_16,sel_getUid("trackEvent:"),CPKeyDownMask|CPPeriodicMask|CPMouseMovedMask|CPLeftMouseDraggedMask|CPLeftMouseUpMask|CPAppKitDefinedMask|CPScrollWheelMask,nil,nil,YES);
if(_19===CPKeyDown){
var _1b=_1a,_1c=objj_msgSend(objj_msgSend(_1b,"highlightedItem"),"submenu");
while(_1c&&objj_msgSend(_1c._menuWindow,"isVisible")){
_1b=_1c;
_1c=objj_msgSend(objj_msgSend(_1b,"highlightedItem"),"submenu");
}
if(objj_msgSend(_1b,"numberOfItems")){
objj_msgSend(_16,"interpretKeyEvent:forMenu:",_18,_1b);
}
return;
}
if(_keyBuffer){
if((objj_msgSend(CPDate,"date")-_startTime)>(_1+objj_msgSend(_1d,"numberOfItems")/2)){
objj_msgSend(_16,"selectNextItemBeginningWith:inMenu:clearBuffer:",_keyBuffer,_1b,YES);
}
if(_19===CPPeriodic){
return;
}
}
var _1e=_19===CPPeriodic?_lastGlobalLocation:objj_msgSend(_18,"globalLocation");
_lastGlobalLocation=_1e;
if(!_lastGlobalLocation){
return;
}
var _1f=objj_msgSend(_16,"menuContainerForPoint:",_1e),_1d=objj_msgSend(_1f,"menu"),_20=objj_msgSend(_1f,"convertGlobalToBase:",_1e),_21=_1f?objj_msgSend(_1f,"itemIndexAtPoint:",_20):CPNotFound,_22=_21!==CPNotFound?objj_msgSend(_1d,"itemAtIndex:",_21):nil;
if(!objj_msgSend(_22,"isEnabled")||objj_msgSend(_22,"_isMenuBarButton")){
_21=CPNotFound;
_22=nil;
}
var _23=objj_msgSend(_22,"view");
if(_19===CPScrollWheel){
objj_msgSend(_1f,"scrollByDelta:",objj_msgSend(_18,"deltaY"));
}
if(_19===CPPeriodic){
if(_scrollingState===_CPMenuManagerScrollingStateUp){
objj_msgSend(_1f,"scrollUp");
}else{
if(_scrollingState===_CPMenuManagerScrollingStateDown){
objj_msgSend(_1f,"scrollDown");
}
}
}
if(_23){
if(!_lastMouseOverMenuView){
objj_msgSend(_1d,"_highlightItemAtIndex:",CPNotFound);
}
if(_lastMouseOverMenuView!=_23){
objj_msgSend(_23,"mouseExited:",_18);
objj_msgSend(_lastMouseOverMenuView,"mouseEntered:",_18);
_lastMouseOverMenuView=_23;
}
var _24=_1f;
if(!objj_msgSend(_24,"isKindOfClass:",objj_msgSend(CPWindow,"class"))){
_24=objj_msgSend(_24,"window");
}
objj_msgSend(_24,"sendEvent:",objj_msgSend(CPEvent,"mouseEventWithType:location:modifierFlags:timestamp:windowNumber:context:eventNumber:clickCount:pressure:",_19,_20,objj_msgSend(_18,"modifierFlags"),objj_msgSend(_18,"timestamp"),_24,nil,0,objj_msgSend(_18,"clickCount"),objj_msgSend(_18,"pressure")));
}else{
if(_lastMouseOverMenuView){
objj_msgSend(_lastMouseOverMenuView,"mouseExited:",_18);
_lastMouseOverMenuView=nil;
}
objj_msgSend(_1d,"_highlightItemAtIndex:",_21);
if(_19===CPMouseMoved||_19===CPLeftMouseDragged||_19===CPLeftMouseDown||_19===CPPeriodic){
var _25=_scrollingState;
_scrollingState=objj_msgSend(_1f,"scrollingStateForPoint:",_1e);
if(_scrollingState!==_25){
if(_scrollingState===_CPMenuManagerScrollingStateNone){
objj_msgSend(CPEvent,"stopPeriodicEvents");
}else{
if(_25===_CPMenuManagerScrollingStateNone){
objj_msgSend(CPEvent,"startPeriodicEventsAfterDelay:withPeriod:",0,0.04);
}
}
}
}else{
if(_19===CPLeftMouseUp&&(objj_msgSend(_18,"timestamp")-_startTime>(_1+objj_msgSend(_1d,"numberOfItems")*5))){
objj_msgSend(_1a,"cancelTracking");
}
}
}
if(_previousActiveItem!==_22){
clearTimeout(_showTimerID);
_showTimerID=undefined;
}
if(objj_msgSend(_22,"hasSubmenu")){
var _26=objj_msgSend(_1f,"rectForItemAtIndex:",_21),_27;
if(objj_msgSend(_1f,"isMenuBar")){
_27=CGPointMake(CGRectGetMinX(_26),CGRectGetMaxY(_26));
}else{
_27=CGPointMake(CGRectGetMaxX(_26),CGRectGetMinY(_26));
}
_27=objj_msgSend(_1f,"convertBaseToGlobal:",_27);
if(_showTimerID===undefined){
objj_msgSend(_16,"showMenu:fromMenu:atPoint:",nil,_1d,CGPointMakeZero());
if(!objj_msgSend(_1f,"isMenuBar")){
_showTimerID=setTimeout(function(){
objj_msgSend(_16,"showMenu:fromMenu:atPoint:",objj_msgSend(_22,"submenu"),objj_msgSend(_22,"menu"),_27);
},250);
}else{
objj_msgSend(_16,"showMenu:fromMenu:atPoint:",objj_msgSend(_22,"submenu"),objj_msgSend(_22,"menu"),_27);
}
}
}else{
objj_msgSend(_16,"showMenu:fromMenu:atPoint:",nil,_1d,CGPointMakeZero());
}
_previousActiveItem=_22;
}
}),new objj_method(sel_getUid("trackMenuBarButtonEvent:"),function(_28,_29,_2a){
with(_28){
var _2b=objj_msgSend(_2a,"type");
if(_2b===CPAppKitDefined){
return objj_msgSend(_28,"completeTracking");
}
var _2c=objj_msgSend(_2a,"globalLocation"),_2d=objj_msgSend(_28,"trackingMenu"),_2e=objj_msgSend(_28,"trackingMenuContainer"),_2f=objj_msgSend(_2e,"convertGlobalToBase:",_2c);
if(objj_msgSend(_2e,"itemIndexAtPoint:",_2f)===_menuBarButtonItemIndex){
objj_msgSend(_2d,"_highlightItemAtIndex:",_menuBarButtonItemIndex);
}else{
objj_msgSend(_2d,"_highlightItemAtIndex:",CPNotFound);
}
objj_msgSend(CPApp,"setTarget:selector:forNextEventMatchingMask:untilDate:inMode:dequeue:",_28,sel_getUid("trackMenuBarButtonEvent:"),CPPeriodicMask|CPMouseMovedMask|CPLeftMouseDraggedMask|CPLeftMouseUpMask|CPAppKitDefinedMask,nil,nil,YES);
if(_2b===CPLeftMouseUp){
objj_msgSend(_2d,"cancelTracking");
}
}
}),new objj_method(sel_getUid("completeTracking"),function(_30,_31){
with(_30){
var _32=objj_msgSend(_30,"trackingMenu");
objj_msgSend(CPEvent,"stopPeriodicEvents");
objj_msgSend(_30,"showMenu:fromMenu:atPoint:",nil,_32,nil);
var _33=objj_msgSend(_32,"delegate");
if(objj_msgSend(_33,"respondsToSelector:",sel_getUid("menuDidClose:"))){
objj_msgSend(_33,"menuDidClose:",_32);
}
if(_trackingCallback){
_trackingCallback(objj_msgSend(_30,"trackingMenuContainer"),_32);
}
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:",CPMenuDidEndTrackingNotification,_32);
CPApp._activeMenu=nil;
}
}),new objj_method(sel_getUid("menuContainerForPoint:"),function(_34,_35,_36){
with(_34){
var _37=objj_msgSend(_menuContainerStack,"count"),_38=_menuContainerStack[0];
if(_37===1){
return _38;
}
var _39=0,_3a=_37-1;
if(objj_msgSend(_38,"isMenuBar")){
if(CGRectContainsPoint(objj_msgSend(_38,"globalFrame"),_36)){
return _38;
}
_39=1;
}
var _3b=_37,x=_36.x,_3c=Infinity,_3d=nil;
while(_3b-->_39){
var _3e=_menuContainerStack[_3b],_3f=objj_msgSend(_3e,"globalFrame"),_40=(_3f.origin.x),_41=(_3f.origin.x+_3f.size.width);
if(x<_41&&x>=_40){
return _3e;
}
if(_3b===_39||_3b===_3a){
var _42=ABS(x<_40?_40-x:_41-x);
if(_42<_3c){
_3d=_3e;
_3c=_42;
}
}
}
return _3d;
}
}),new objj_method(sel_getUid("showMenu:fromMenu:atPoint:"),function(_43,_44,_45,_46,_47){
with(_43){
var _48=_menuContainerStack.length,_49=_48;
while(_49--){
var _4a=_menuContainerStack[_49],_4b=objj_msgSend(_4a,"menu");
if(_4b===_46){
break;
}
if(_4b===_45){
return objj_msgSend(_45,"_highlightItemAtIndex:",CPNotFound);
}
objj_msgSend(_4a,"orderOut:",_43);
objj_msgSend(_4a,"setMenu:",nil);
objj_msgSend(_CPMenuWindow,"poolMenuWindow:",_4a);
objj_msgSend(_menuContainerStack,"removeObjectAtIndex:",_49);
}
if(!_45){
return;
}
objj_msgSend(_45,"_highlightItemAtIndex:",CPNotFound);
var _4c=objj_msgSend(_CPMenuWindow,"menuWindowWithMenu:font:",_45,objj_msgSend(_menuContainerStack[0],"font"));
objj_msgSend(_menuContainerStack,"addObject:",_4c);
objj_msgSend(_4c,"setConstraintRect:",_constraintRect);
if(_46===objj_msgSend(_43,"trackingMenu")&&objj_msgSend(objj_msgSend(_43,"trackingMenuContainer"),"isMenuBar")){
objj_msgSend(_4c,"setBackgroundStyle:",_CPMenuWindowMenuBarBackgroundStyle);
}else{
objj_msgSend(_4c,"setBackgroundStyle:",_CPMenuWindowPopUpBackgroundStyle);
}
objj_msgSend(_4c,"setFrameOrigin:",_47);
objj_msgSend(_4c,"orderFront:",_43);
}
}),new objj_method(sel_getUid("interpretKeyEvent:forMenu:"),function(_4d,_4e,_4f,_50){
with(_4d){
var _51=objj_msgSend(_4f,"modifierFlags"),_52=objj_msgSend(_4f,"charactersIgnoringModifiers"),_53=objj_msgSend(CPKeyBinding,"selectorsForKey:modifierFlags:",_52,_51);
if(_53){
var _54=objj_msgSend(_53,"objectEnumerator"),obj;
while(obj=objj_msgSend(_54,"nextObject")){
var _55=CPSelectorFromString(obj);
if(objj_msgSend(_4d,"respondsToSelector:",_55)){
objj_msgSend(_4d,"performSelector:withObject:",_55,_50);
}
}
}else{
if(!(_51&(CPCommandKeyMask|CPControlKeyMask))){
if(!_keyBuffer){
_startTime=objj_msgSend(CPDate,"date");
_keyBuffer=_52;
objj_msgSend(CPEvent,"stopPeriodicEvents");
objj_msgSend(CPEvent,"startPeriodicEventsAfterDelay:withPeriod:",0.1,0.1);
}else{
_keyBuffer+=_52;
}
objj_msgSend(_4d,"selectNextItemBeginningWith:inMenu:clearBuffer:",_keyBuffer,_50,NO);
_lastGlobalLocation=Nil;
}
}
}
}),new objj_method(sel_getUid("selectNextItemBeginningWith:inMenu:clearBuffer:"),function(_56,_57,_58,_59,_5a){
with(_56){
var _5b=objj_msgSend(objj_msgSend(_59,"itemArray"),"objectEnumerator"),obj;
while(obj=objj_msgSend(_5b,"nextObject")){
if(objj_msgSend(obj,"isHidden")||!objj_msgSend(obj,"isEnabled")){
continue;
}
if(objj_msgSend(objj_msgSend(objj_msgSend(obj,"title"),"commonPrefixWithString:options:",_58,CPCaseInsensitiveSearch),"length")==objj_msgSend(_58,"length")){
objj_msgSend(_59,"_highlightItemAtIndex:",_5b._index);
break;
}
}
if(_5a){
objj_msgSend(CPEvent,"stopPeriodicEvents");
_keyBuffer=Nil;
}else{
_startTime=objj_msgSend(CPDate,"date");
}
}
}),new objj_method(sel_getUid("scrollToBeginningOfDocument:"),function(_5c,_5d,_5e){
with(_5c){
objj_msgSend(_5e,"_highlightItemAtIndex:",0);
}
}),new objj_method(sel_getUid("scrollToEndOfDocument:"),function(_5f,_60,_61){
with(_5f){
objj_msgSend(_61,"_highlightItemAtIndex:",objj_msgSend(_61,"numberOfItems")-1);
}
}),new objj_method(sel_getUid("scrollPageDown:"),function(_62,_63,_64){
with(_62){
var _65=_64._menuWindow,_66=_65._menuClipView,_67=objj_msgSend(_66,"bounds").size.height,_68=objj_msgSend(_65,"itemIndexAtPoint:",CGPointMake(1,10)),_69=objj_msgSend(_65,"itemIndexAtPoint:",CGPointMake(1,_67)),_6a=objj_msgSend(_64,"indexOfItem:",objj_msgSend(_64,"highlightedItem"));
if(_6a==CPNotFound){
objj_msgSend(_64,"_highlightItemAtIndex:",0);
return;
}
next=_6a+(_69-_68);
if(next<objj_msgSend(_64,"numberOfItems")){
objj_msgSend(_64,"_highlightItemAtIndex:",next);
}else{
objj_msgSend(_64,"_highlightItemAtIndex:",objj_msgSend(_64,"numberOfItems")-1);
}
var _6b=objj_msgSend(_64,"highlightedItem");
if(objj_msgSend(_6b,"isSeparatorItem")||objj_msgSend(_6b,"isHidden")||!objj_msgSend(_6b,"isEnabled")){
objj_msgSend(_62,"moveDown:",_64);
}
}
}),new objj_method(sel_getUid("scrollPageUp:"),function(_6c,_6d,_6e){
with(_6c){
var _6f=_6e._menuWindow,_70=_6f._menuClipView,_71=objj_msgSend(_70,"bounds").size.height,_72=objj_msgSend(_6f,"itemIndexAtPoint:",CGPointMake(1,10)),_73=objj_msgSend(_6f,"itemIndexAtPoint:",CGPointMake(1,_71)),_74=objj_msgSend(_6e,"indexOfItem:",objj_msgSend(_6e,"highlightedItem"));
if(_74==CPNotFound){
objj_msgSend(_6e,"_highlightItemAtIndex:",0);
return;
}
next=_74-(_73-_72);
if(next<0){
objj_msgSend(_6e,"_highlightItemAtIndex:",0);
}else{
objj_msgSend(_6e,"_highlightItemAtIndex:",next);
}
var _75=objj_msgSend(_6e,"highlightedItem");
if(objj_msgSend(_75,"isSeparatorItem")||objj_msgSend(_75,"isHidden")||!objj_msgSend(_75,"isEnabled")){
objj_msgSend(_6c,"moveUp:",_6e);
}
}
}),new objj_method(sel_getUid("moveLeft:"),function(_76,_77,_78){
with(_76){
if(objj_msgSend(_78,"supermenu")){
if(objj_msgSend(_78,"supermenu")==objj_msgSend(CPApp,"mainMenu")){
objj_msgSend(_76,"showMenu:fromMenu:atPoint:",nil,objj_msgSend(_78,"supermenu"),CGPointMakeZero());
objj_msgSend(_76,"moveUp:",objj_msgSend(CPApp,"mainMenu"));
var _79=objj_msgSend(objj_msgSend(CPApp,"mainMenu"),"highlightedItem"),_7a=CGPointMake(objj_msgSend(objj_msgSend(_79,"_menuItemView"),"frameOrigin").x,objj_msgSend(objj_msgSend(_79,"_menuItemView"),"frameSize").height);
objj_msgSend(_76,"showMenu:fromMenu:atPoint:",objj_msgSend(_79,"submenu"),objj_msgSend(_79,"menu"),_7a);
}else{
objj_msgSend(_76,"showMenu:fromMenu:atPoint:",nil,objj_msgSend(_78,"supermenu"),CGPointMakeZero());
}
}
}
}),new objj_method(sel_getUid("moveRight:"),function(_7b,_7c,_7d){
with(_7b){
var _7e=objj_msgSend(_7d,"highlightedItem");
if(objj_msgSend(_7e,"hasSubmenu")){
if(objj_msgSend(objj_msgSend(_7e,"submenu"),"numberOfItems")){
var _7f=objj_msgSend(_7d,"indexOfItem:",_7e),_80=_7d._menuWindow,_81=objj_msgSend(_80,"rectForItemAtIndex:",_7f),_82;
if(objj_msgSend(_80,"isMenuBar")){
_82=CGPointMake(CGRectGetMinX(_81),CGRectGetMaxY(_81));
}else{
_82=CGPointMake(CGRectGetMaxX(_81),CGRectGetMinY(_81));
}
_82=objj_msgSend(_80,"convertBaseToGlobal:",_82);
objj_msgSend(_7b,"showMenu:fromMenu:atPoint:",objj_msgSend(_7e,"submenu"),objj_msgSend(_7e,"menu"),_82);
objj_msgSend(_7b,"moveDown:",objj_msgSend(_7e,"submenu"));
}
}else{
if(objj_msgSend(_7b,"trackingMenu")==objj_msgSend(CPApp,"mainMenu")){
objj_msgSend(_7b,"showMenu:fromMenu:atPoint:",nil,_7d,CGPointMakeZero());
objj_msgSend(_7b,"moveDown:",objj_msgSend(CPApp,"mainMenu"));
var _7e=objj_msgSend(objj_msgSend(CPApp,"mainMenu"),"highlightedItem"),_83=CGPointMake(objj_msgSend(objj_msgSend(_7e,"_menuItemView"),"frameOrigin").x,objj_msgSend(objj_msgSend(_7e,"_menuItemView"),"frameSize").height);
objj_msgSend(_7b,"showMenu:fromMenu:atPoint:",objj_msgSend(_7e,"submenu"),objj_msgSend(_7e,"menu"),_83);
}
}
}
}),new objj_method(sel_getUid("moveDown:"),function(_84,_85,_86){
with(_84){
var _87=_86._highlightedIndex+1;
if(_87<objj_msgSend(_86,"numberOfItems")){
objj_msgSend(_86,"_highlightItemAtIndex:",_87);
var _88=objj_msgSend(_86,"highlightedItem");
if(objj_msgSend(_88,"isSeparatorItem")||objj_msgSend(_88,"isHidden")||!objj_msgSend(_88,"isEnabled")){
objj_msgSend(_84,"moveDown:",_86);
}
}
}
}),new objj_method(sel_getUid("moveUp:"),function(_89,_8a,_8b){
with(_89){
var _8c=_8b._highlightedIndex-1;
if(_8c<0){
return;
}
objj_msgSend(_8b,"_highlightItemAtIndex:",_8c);
var _8d=objj_msgSend(_8b,"highlightedItem");
if(objj_msgSend(_8d,"isSeparatorItem")||objj_msgSend(_8d,"isHidden")||!objj_msgSend(_8d,"isEnabled")){
objj_msgSend(_89,"moveUp:",_8b);
}
}
}),new objj_method(sel_getUid("insertNewline:"),function(_8e,_8f,_90){
with(_8e){
if(objj_msgSend(objj_msgSend(_90,"highlightedItem"),"hasSubmenu")){
objj_msgSend(_8e,"moveRight:",_90);
}else{
objj_msgSend(_90,"cancelTracking");
}
}
}),new objj_method(sel_getUid("cancelOperation:"),function(_91,_92,_93){
with(_91){
objj_msgSend(_93,"_highlightItemAtIndex:",CPNotFound);
objj_msgSend(CPEvent,"stopPeriodicEvents");
objj_msgSend(objj_msgSend(_91,"trackingMenu"),"cancelTracking");
}
})]);
class_addMethods(_4,[new objj_method(sel_getUid("sharedMenuManager"),function(_94,_95){
with(_94){
if(!_2){
_2=objj_msgSend(objj_msgSend(_CPMenuManager,"alloc"),"init");
}
return _2;
}
})]);
p;15;_CPMenuWindow.jt;17541;@STATIC;1.0;i;10;CPWindow.jt;17506;
objj_executeFile("CPWindow.j",YES);
var _1=[],_2=5,_3=[];
_CPMenuWindowMenuBarBackgroundStyle=0;
_CPMenuWindowPopUpBackgroundStyle=1;
_CPMenuWindowAttachedMenuBackgroundStyle=2;
var _4=500,_5=5,_6=1,_7=1,_8=5,_9=16;
var _a=objj_allocateClassPair(CPWindow,"_CPMenuWindow"),_b=_a.isa;
class_addIvars(_a,[new objj_ivar("_menuView"),new objj_ivar("_menuClipView"),new objj_ivar("_moreAboveView"),new objj_ivar("_moreBelowView"),new objj_ivar("_unconstrainedFrame"),new objj_ivar("_constraintRect")]);
objj_registerClassPair(_a);
class_addMethods(_a,[new objj_method(sel_getUid("initWithContentRect:styleMask:"),function(_c,_d,_e,_f){
with(_c){
_constraintRect={origin:{x:0,y:0},size:{width:0,height:0}};
_unconstrainedFrame={origin:{x:0,y:0},size:{width:0,height:0}};
_c=objj_msgSendSuper({receiver:_c,super_class:objj_getClass("_CPMenuWindow").super_class},"initWithContentRect:styleMask:",_e,CPBorderlessWindowMask);
if(_c){
objj_msgSend(_c,"setLevel:",CPPopUpMenuWindowLevel);
objj_msgSend(_c,"setHasShadow:",YES);
objj_msgSend(_c,"setShadowStyle:",CPMenuWindowShadowStyle);
objj_msgSend(_c,"setAcceptsMouseMovedEvents:",YES);
var _10=objj_msgSend(_c,"contentView");
_menuView=objj_msgSend(objj_msgSend(_CPMenuView,"alloc"),"initWithFrame:",CGRectMakeZero());
_menuClipView=objj_msgSend(objj_msgSend(CPClipView,"alloc"),"initWithFrame:",CGRectMake(_6,_5,0,0));
objj_msgSend(_menuClipView,"setDocumentView:",_menuView);
objj_msgSend(_10,"addSubview:",_menuClipView);
_moreAboveView=objj_msgSend(objj_msgSend(CPImageView,"alloc"),"initWithFrame:",CGRectMakeZero());
objj_msgSend(_moreAboveView,"setImage:",_CPMenuWindowMoreAboveImage);
objj_msgSend(_moreAboveView,"setFrameSize:",objj_msgSend(_CPMenuWindowMoreAboveImage,"size"));
objj_msgSend(_10,"addSubview:",_moreAboveView);
_moreBelowView=objj_msgSend(objj_msgSend(CPImageView,"alloc"),"initWithFrame:",CGRectMakeZero());
objj_msgSend(_moreBelowView,"setImage:",_CPMenuWindowMoreBelowImage);
objj_msgSend(_moreBelowView,"setFrameSize:",objj_msgSend(_CPMenuWindowMoreBelowImage,"size"));
objj_msgSend(_10,"addSubview:",_moreBelowView);
objj_msgSend(_c,"setShadowStyle:",CPWindowShadowStyleMenu);
}
return _c;
}
}),new objj_method(sel_getUid("setFont:"),function(_11,_12,_13){
with(_11){
objj_msgSend(_menuView,"setFont:",_13);
}
}),new objj_method(sel_getUid("font"),function(_14,_15){
with(_14){
return objj_msgSend(_menuView,"font");
}
}),new objj_method(sel_getUid("setBackgroundStyle:"),function(_16,_17,_18){
with(_16){
objj_msgSend(_16,"setBackgroundColor:",objj_msgSend(objj_msgSend(_16,"class"),"backgroundColorForBackgroundStyle:",_18));
}
}),new objj_method(sel_getUid("setMenu:"),function(_19,_1a,_1b){
with(_19){
objj_msgSend(_1b,"_setMenuWindow:",_19);
objj_msgSend(_menuView,"setMenu:",_1b);
var _1c=objj_msgSend(_menuView,"frame").size;
objj_msgSend(_19,"setFrameSize:",CGSizeMake(_6+_1c.width+_7,_5+_1c.height+_8));
objj_msgSend(_menuView,"scrollPoint:",CGPointMake(0,0));
objj_msgSend(_menuClipView,"setFrame:",CGRectMake(_6,_5,_1c.width,_1c.height));
}
}),new objj_method(sel_getUid("setMinWidth:"),function(_1d,_1e,_1f){
with(_1d){
var _20=objj_msgSend(_1d,"unconstrainedFrame").size;
objj_msgSend(_1d,"setFrameSize:",CGSizeMake(MAX(_20.width,_1f),_20.height));
}
}),new objj_method(sel_getUid("menu"),function(_21,_22){
with(_21){
return objj_msgSend(_menuView,"menu");
}
}),new objj_method(sel_getUid("_menuView"),function(_23,_24){
with(_23){
return _menuView;
}
}),new objj_method(sel_getUid("orderFront:"),function(_25,_26,_27){
with(_25){
objj_msgSend(objj_msgSend(_25,"menu"),"update");
objj_msgSend(_25,"setFrame:",_unconstrainedFrame);
objj_msgSendSuper({receiver:_25,super_class:objj_getClass("_CPMenuWindow").super_class},"orderFront:",_27);
}
}),new objj_method(sel_getUid("setConstraintRect:"),function(_28,_29,_2a){
with(_28){
_constraintRect=_2a;
objj_msgSend(_28,"setFrame:",_unconstrainedFrame);
}
}),new objj_method(sel_getUid("unconstrainedFrame"),function(_2b,_2c){
with(_2b){
return {origin:{x:_unconstrainedFrame.origin.x,y:_unconstrainedFrame.origin.y},size:{width:_unconstrainedFrame.size.width,height:_unconstrainedFrame.size.height}};
}
}),new objj_method(sel_getUid("setFrameOrigin:"),function(_2d,_2e,_2f){
with(_2d){
objj_msgSendSuper({receiver:_2d,super_class:objj_getClass("_CPMenuWindow").super_class},"setFrame:",{origin:{x:_2f.x,y:_2f.y},size:{width:(_unconstrainedFrame.size.width),height:(_unconstrainedFrame.size.height)}});
}
}),new objj_method(sel_getUid("setFrameSize:"),function(_30,_31,_32){
with(_30){
objj_msgSendSuper({receiver:_30,super_class:objj_getClass("_CPMenuWindow").super_class},"setFrame:",{origin:{x:(_unconstrainedFrame.origin.x),y:(_unconstrainedFrame.origin.y)},size:{width:_32.width,height:_32.height}});
}
}),new objj_method(sel_getUid("setFrame:display:animate:"),function(_33,_34,_35,_36,_37){
with(_33){
_unconstrainedFrame={origin:{x:_35.origin.x,y:_35.origin.y},size:{width:_35.size.width,height:_35.size.height}};
var _38=CGRectIntersection(_unconstrainedFrame,_constraintRect);
_38.origin.x=CGRectGetMinX(_unconstrainedFrame);
_38.size.width=CGRectGetWidth(_unconstrainedFrame);
if(CGRectGetWidth(_38)>CGRectGetWidth(_constraintRect)){
_38.size.width=CGRectGetWidth(_constraintRect);
}
if(CGRectGetMaxX(_38)>CGRectGetMaxX(_constraintRect)){
_38.origin.x-=CGRectGetMaxX(_38)-CGRectGetMaxX(_constraintRect);
}
if(CGRectGetMinX(_38)<CGRectGetMinX(_constraintRect)){
_38.origin.x=CGRectGetMinX(_constraintRect);
}
objj_msgSendSuper({receiver:_33,super_class:objj_getClass("_CPMenuWindow").super_class},"setFrame:display:animate:",_38,_36,_37);
var _39=CGPointMake(CGRectGetMinX(_35)+_6,CGRectGetMinY(_35)+_5),_3a=_39.y<CGRectGetMinY(_38)+_5,_3b=_39.y+CGRectGetHeight(objj_msgSend(_menuView,"frame"))>CGRectGetMaxY(_38)-_8,_3c=_5,_3d=_8,_3e=objj_msgSend(_33,"contentView"),_3f=objj_msgSend(_3e,"bounds");
if(_3a){
_3c+=_9;
var _40=objj_msgSend(_moreAboveView,"frame");
objj_msgSend(_moreAboveView,"setFrameOrigin:",CGPointMake((CGRectGetWidth(_3f)-CGRectGetWidth(_40))/2,(_5+_9-CGRectGetHeight(_40))/2));
}
objj_msgSend(_moreAboveView,"setHidden:",!_3a);
if(_3b){
_3d+=_9;
objj_msgSend(_moreBelowView,"setFrameOrigin:",CGPointMake((CGRectGetWidth(_3f)-CGRectGetWidth(objj_msgSend(_moreBelowView,"frame")))/2,CGRectGetHeight(_3f)-_9-_8));
}
objj_msgSend(_moreBelowView,"setHidden:",!_3b);
var _41=CGRectMakeZero();
_41.origin.x=_6;
_41.origin.y=_3c;
_41.size.width=CGRectGetWidth(_38)-_6-_7;
_41.size.height=CGRectGetHeight(_38)-_3c-_3d;
objj_msgSend(_menuClipView,"setFrame:",_41);
objj_msgSend(_menuView,"setFrameSize:",CGSizeMake(CGRectGetWidth(_41),CGRectGetHeight(objj_msgSend(_menuView,"frame"))));
objj_msgSend(_menuView,"scrollPoint:",CGPointMake(0,objj_msgSend(_33,"convertBaseToGlobal:",_41.origin).y-_39.y));
}
}),new objj_method(sel_getUid("hasMinimumNumberOfVisibleItems"),function(_42,_43){
with(_42){
var _44=objj_msgSend(_menuView,"visibleRect");
if(CGRectIsEmpty(_44)){
return NO;
}
var _45=objj_msgSend(_menuView,"numberOfUnhiddenItems"),_46=MIN(_45,3),_47=0,_48=objj_msgSend(_menuView,"itemIndexAtPoint:",objj_msgSend(_menuView,"convertPoint:fromView:",objj_msgSend(_menuClipView,"frame").origin,nil));
for(;_48<_45&&_47<_46;++_48){
var _49=objj_msgSend(_menuView,"rectForUnhiddenItemAtIndex:",_48),_4a=CGRectIntersection(_44,_49);
if(CGRectIsEmpty(_4a)){
break;
}
if(CGRectEqualToRect(_4a,_49)){
++_47;
}
}
return _47>=_46;
}
}),new objj_method(sel_getUid("canScrollUp"),function(_4b,_4c){
with(_4b){
return !objj_msgSend(_moreAboveView,"isHidden");
}
}),new objj_method(sel_getUid("canScrollDown"),function(_4d,_4e){
with(_4d){
return !objj_msgSend(_moreBelowView,"isHidden");
}
}),new objj_method(sel_getUid("canScroll"),function(_4f,_50){
with(_4f){
return objj_msgSend(_4f,"canScrollUp")||objj_msgSend(_4f,"canScrollDown");
}
}),new objj_method(sel_getUid("scrollByDelta:"),function(_51,_52,_53){
with(_51){
if(_53===0){
return;
}
if(_53>0&&!objj_msgSend(_51,"canScrollDown")){
return;
}
if(_53<0&&!objj_msgSend(_51,"canScrollUp")){
return;
}
_unconstrainedFrame.origin.y-=_53;
objj_msgSend(_51,"setFrame:",_unconstrainedFrame);
}
}),new objj_method(sel_getUid("scrollUp"),function(_54,_55){
with(_54){
objj_msgSend(_54,"scrollByDelta:",-10);
}
}),new objj_method(sel_getUid("scrollDown"),function(_56,_57){
with(_56){
objj_msgSend(_56,"scrollByDelta:",10);
}
})]);
class_addMethods(_b,[new objj_method(sel_getUid("menuWindowWithMenu:font:"),function(_58,_59,_5a,_5b){
with(_58){
var _5c=nil;
if(_1.length){
_5c=_1.pop();
objj_msgSend(_5c,"setFrameOrigin:",CGPointMakeZero());
}else{
_5c=objj_msgSend(objj_msgSend(_CPMenuWindow,"alloc"),"init");
}
objj_msgSend(_5c,"setFont:",_5b);
objj_msgSend(_5c,"setMenu:",_5a);
objj_msgSend(_5c,"setMinWidth:",objj_msgSend(_5a,"minimumWidth"));
return _5c;
}
}),new objj_method(sel_getUid("poolMenuWindow:"),function(_5d,_5e,_5f){
with(_5d){
if(!_5f||_1.length>=_2){
return;
}
_1.push(_5f);
}
}),new objj_method(sel_getUid("initialize"),function(_60,_61){
with(_60){
if(_60!=objj_msgSend(_CPMenuWindow,"class")){
return;
}
var _62=objj_msgSend(CPBundle,"bundleForClass:",_60);
_CPMenuWindowMoreAboveImage=objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_62,"pathForResource:","_CPMenuWindow/_CPMenuWindowMoreAbove.png"),CGSizeMake(38,18));
_CPMenuWindowMoreBelowImage=objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_62,"pathForResource:","_CPMenuWindow/_CPMenuWindowMoreBelow.png"),CGSizeMake(38,18));
}
}),new objj_method(sel_getUid("_standardLeftMargin"),function(_63,_64){
with(_63){
return _6;
}
}),new objj_method(sel_getUid("backgroundColorForBackgroundStyle:"),function(_65,_66,_67){
with(_65){
var _68=_3[_67];
if(!_68){
var _69=objj_msgSend(CPBundle,"bundleForClass:",objj_msgSend(_65,"class"));
if(_67==_CPMenuWindowPopUpBackgroundStyle){
_68=objj_msgSend(CPColor,"colorWithPatternImage:",objj_msgSend(objj_msgSend(CPNinePartImage,"alloc"),"initWithImageSlices:",[objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_69,"pathForResource:","_CPMenuWindow/_CPMenuWindowRounded0.png"),CGSizeMake(4,4)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_69,"pathForResource:","_CPMenuWindow/_CPMenuWindow1.png"),CGSizeMake(1,4)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_69,"pathForResource:","_CPMenuWindow/_CPMenuWindowRounded2.png"),CGSizeMake(4,4)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_69,"pathForResource:","_CPMenuWindow/_CPMenuWindow3.png"),CGSizeMake(4,1)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_69,"pathForResource:","_CPMenuWindow/_CPMenuWindow4.png"),CGSizeMake(1,1)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_69,"pathForResource:","_CPMenuWindow/_CPMenuWindow5.png"),CGSizeMake(4,1)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_69,"pathForResource:","_CPMenuWindow/_CPMenuWindowRounded6.png"),CGSizeMake(4,4)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_69,"pathForResource:","_CPMenuWindow/_CPMenuWindow7.png"),CGSizeMake(1,4)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_69,"pathForResource:","_CPMenuWindow/_CPMenuWindowRounded8.png"),CGSizeMake(4,4))]));
}else{
if(_67==_CPMenuWindowMenuBarBackgroundStyle){
_68=objj_msgSend(CPColor,"colorWithPatternImage:",objj_msgSend(objj_msgSend(CPNinePartImage,"alloc"),"initWithImageSlices:",[objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_69,"pathForResource:","_CPMenuWindow/_CPMenuWindow3.png"),CGSizeMake(4,0)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_69,"pathForResource:","_CPMenuWindow/_CPMenuWindow4.png"),CGSizeMake(1,0)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_69,"pathForResource:","_CPMenuWindow/_CPMenuWindow5.png"),CGSizeMake(4,0)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_69,"pathForResource:","_CPMenuWindow/_CPMenuWindow3.png"),CGSizeMake(4,1)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_69,"pathForResource:","_CPMenuWindow/_CPMenuWindow4.png"),CGSizeMake(1,1)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_69,"pathForResource:","_CPMenuWindow/_CPMenuWindow5.png"),CGSizeMake(4,1)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_69,"pathForResource:","_CPMenuWindow/_CPMenuWindowRounded6.png"),CGSizeMake(4,4)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_69,"pathForResource:","_CPMenuWindow/_CPMenuWindow7.png"),CGSizeMake(1,4)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_69,"pathForResource:","_CPMenuWindow/_CPMenuWindowRounded8.png"),CGSizeMake(4,4))]));
}
}
_3[_67]=_68;
}
return _68;
}
})]);
var _a=objj_getClass("_CPMenuWindow");
if(!_a){
throw new SyntaxError("*** Could not find definition for class \"_CPMenuWindow\"");
}
var _b=_a.isa;
class_addMethods(_a,[new objj_method(sel_getUid("globalFrame"),function(_6a,_6b){
with(_6a){
return objj_msgSend(_6a,"frame");
}
}),new objj_method(sel_getUid("isMenuBar"),function(_6c,_6d){
with(_6c){
return NO;
}
}),new objj_method(sel_getUid("scrollingStateForPoint:"),function(_6e,_6f,_70){
with(_6e){
var _71=objj_msgSend(_6e,"frame");
if(!CPRectContainsPoint(_71,_70)||!objj_msgSend(_6e,"canScroll")){
return _CPMenuManagerScrollingStateNone;
}
if(_70.y<CGRectGetMinY(_71)+_5+_9&&!objj_msgSend(_moreAboveView,"isHidden")){
return _CPMenuManagerScrollingStateUp;
}
if(_70.y>CGRectGetMaxY(_71)-_8-_9&&!objj_msgSend(_moreBelowView,"isHidden")){
return _CPMenuManagerScrollingStateDown;
}
return _CPMenuManagerScrollingStateNone;
}
}),new objj_method(sel_getUid("deltaYForItemAtIndex:"),function(_72,_73,_74){
with(_72){
return _5+CGRectGetMinY(objj_msgSend(_menuView,"rectForItemAtIndex:",_74));
}
}),new objj_method(sel_getUid("rectForItemAtIndex:"),function(_75,_76,_77){
with(_75){
return objj_msgSend(_menuView,"convertRect:toView:",objj_msgSend(_menuView,"rectForItemAtIndex:",_77),nil);
}
}),new objj_method(sel_getUid("itemIndexAtPoint:"),function(_78,_79,_7a){
with(_78){
if(!CGRectContainsPoint(objj_msgSend(_menuClipView,"bounds"),objj_msgSend(_menuClipView,"convertPoint:fromView:",_7a,nil))){
return NO;
}
return objj_msgSend(_menuView,"itemIndexAtPoint:",objj_msgSend(_menuView,"convertPoint:fromView:",_7a,nil));
}
})]);
var _a=objj_allocateClassPair(CPView,"_CPMenuView"),_b=_a.isa;
class_addIvars(_a,[new objj_ivar("_menuItemViews"),new objj_ivar("_visibleMenuItemInfos"),new objj_ivar("_font")]);
objj_registerClassPair(_a);
class_addMethods(_a,[new objj_method(sel_getUid("font"),function(_7b,_7c){
with(_7b){
return _font;
}
}),new objj_method(sel_getUid("setFont:"),function(_7d,_7e,_7f){
with(_7d){
_font=_7f;
}
}),new objj_method(sel_getUid("numberOfUnhiddenItems"),function(_80,_81){
with(_80){
return _visibleMenuItemInfos.length;
}
}),new objj_method(sel_getUid("rectForUnhiddenItemAtIndex:"),function(_82,_83,_84){
with(_82){
return objj_msgSend(_82,"rectForItemAtIndex:",_visibleMenuItemInfos[_84].index);
}
}),new objj_method(sel_getUid("rectForItemAtIndex:"),function(_85,_86,_87){
with(_85){
return objj_msgSend(_menuItemViews[_87===CPNotFound?0:_87],"frame");
}
}),new objj_method(sel_getUid("itemIndexAtPoint:"),function(_88,_89,_8a){
with(_88){
var x=_8a.x,_8b=objj_msgSend(_88,"bounds");
if(x<CGRectGetMinX(_8b)||x>CGRectGetMaxX(_8b)){
return CPNotFound;
}
var y=_8a.y,low=0,_8c=_visibleMenuItemInfos.length-1;
while(low<=_8c){
var _8d=FLOOR(low+(_8c-low)/2),_8e=_visibleMenuItemInfos[_8d],_8f=objj_msgSend(_8e.view,"frame");
if(y<CGRectGetMinY(_8f)){
_8c=_8d-1;
}else{
if(y>CGRectGetMaxY(_8f)){
low=_8d+1;
}else{
return _8e.index;
}
}
}
return CPNotFound;
}
}),new objj_method(sel_getUid("tile"),function(_90,_91){
with(_90){
objj_msgSend(_menuItemViews,"makeObjectsPerformSelector:",sel_getUid("removeFromSuperview"));
_menuItemViews=[];
_visibleMenuItemInfos=[];
var _92=objj_msgSend(_90,"menu");
if(!_92){
return;
}
var _93=objj_msgSend(_92,"itemArray"),_94=0,_95=objj_msgSend(_93,"count"),_96=0,y=0,_97=objj_msgSend(_92,"showsStateColumn");
for(;_94<_95;++_94){
var _98=_93[_94],_99=objj_msgSend(_98,"_menuItemView");
_menuItemViews.push(_99);
if(objj_msgSend(_98,"isHidden")){
continue;
}
_visibleMenuItemInfos.push({view:_99,index:_94});
objj_msgSend(_99,"setFont:",_font);
objj_msgSend(_99,"setShowsStateColumn:",_97);
objj_msgSend(_99,"synchronizeWithMenuItem");
objj_msgSend(_99,"setFrameOrigin:",CGPointMake(0,y));
objj_msgSend(_90,"addSubview:",_99);
var _9a=objj_msgSend(_99,"minSize"),_9b=_9a.width;
if(_96<_9b){
_96=_9b;
}
y+=_9a.height;
}
for(_94=0;_94<_95;++_94){
var _99=_menuItemViews[_94];
objj_msgSend(_99,"setFrameSize:",CGSizeMake(_96,CGRectGetHeight(objj_msgSend(_99,"frame"))));
}
objj_msgSend(_90,"setAutoresizesSubviews:",NO);
objj_msgSend(_90,"setFrameSize:",CGSizeMake(_96,y));
objj_msgSend(_90,"setAutoresizesSubviews:",YES);
}
}),new objj_method(sel_getUid("setMenu:"),function(_9c,_9d,_9e){
with(_9c){
objj_msgSendSuper({receiver:_9c,super_class:objj_getClass("_CPMenuView").super_class},"setMenu:",_9e);
objj_msgSend(_9c,"tile");
}
})]);
p;8;CPMenu.jt;25638;@STATIC;1.0;I;20;Foundation/CPArray.jI;25;Foundation/CPDictionary.jI;33;Foundation/CPNotificationCenter.jI;21;Foundation/CPString.ji;16;_CPMenuManager.ji;15;CPApplication.ji;12;CPClipView.ji;12;CPMenuItem.ji;9;CPPanel.ji;18;_CPMenuBarWindow.ji;15;_CPMenuWindow.jt;25368;
objj_executeFile("Foundation/CPArray.j",NO);
objj_executeFile("Foundation/CPDictionary.j",NO);
objj_executeFile("Foundation/CPNotificationCenter.j",NO);
objj_executeFile("Foundation/CPString.j",NO);
objj_executeFile("_CPMenuManager.j",YES);
objj_executeFile("CPApplication.j",YES);
objj_executeFile("CPClipView.j",YES);
objj_executeFile("CPMenuItem.j",YES);
objj_executeFile("CPPanel.j",YES);
CPMenuDidAddItemNotification="CPMenuDidAddItemNotification";
CPMenuDidChangeItemNotification="CPMenuDidChangeItemNotification";
CPMenuDidRemoveItemNotification="CPMenuDidRemoveItemNotification";
CPMenuDidEndTrackingNotification="CPMenuDidEndTrackingNotification";
var _1=28;
var _2=NO,_3="",_4=nil,_5=1,_6=nil,_7=nil;
var _8=objj_allocateClassPair(CPObject,"CPMenu"),_9=_8.isa;
class_addIvars(_8,[new objj_ivar("_supermenu"),new objj_ivar("_title"),new objj_ivar("_name"),new objj_ivar("_font"),new objj_ivar("_minimumWidth"),new objj_ivar("_items"),new objj_ivar("_autoenablesItems"),new objj_ivar("_showsStateColumn"),new objj_ivar("_delegate"),new objj_ivar("_highlightedIndex"),new objj_ivar("_menuWindow")]);
objj_registerClassPair(_8);
class_addMethods(_8,[new objj_method(sel_getUid("menuBarHeight"),function(_a,_b){
with(_a){
if(_a===objj_msgSend(CPApp,"mainMenu")){
return _1;
}
return 0;
}
}),new objj_method(sel_getUid("initWithTitle:"),function(_c,_d,_e){
with(_c){
_c=objj_msgSendSuper({receiver:_c,super_class:objj_getClass("CPMenu").super_class},"init");
if(_c){
_title=_e;
_items=[];
_autoenablesItems=YES;
_showsStateColumn=YES;
objj_msgSend(_c,"setMinimumWidth:",0);
}
return _c;
}
}),new objj_method(sel_getUid("init"),function(_f,_10){
with(_f){
return objj_msgSend(_f,"initWithTitle:","");
}
}),new objj_method(sel_getUid("insertItem:atIndex:"),function(_11,_12,_13,_14){
with(_11){
objj_msgSend(_11,"insertObject:inItemsAtIndex:",_13,_14);
}
}),new objj_method(sel_getUid("insertItemWithTitle:action:keyEquivalent:atIndex:"),function(_15,_16,_17,_18,_19,_1a){
with(_15){
var _1b=objj_msgSend(objj_msgSend(CPMenuItem,"alloc"),"initWithTitle:action:keyEquivalent:",_17,_18,_19);
objj_msgSend(_15,"insertItem:atIndex:",_1b,_1a);
return _1b;
}
}),new objj_method(sel_getUid("addItem:"),function(_1c,_1d,_1e){
with(_1c){
objj_msgSend(_1c,"insertItem:atIndex:",_1e,objj_msgSend(_items,"count"));
}
}),new objj_method(sel_getUid("addItemWithTitle:action:keyEquivalent:"),function(_1f,_20,_21,_22,_23){
with(_1f){
return objj_msgSend(_1f,"insertItemWithTitle:action:keyEquivalent:atIndex:",_21,_22,_23,objj_msgSend(_items,"count"));
}
}),new objj_method(sel_getUid("removeItem:"),function(_24,_25,_26){
with(_24){
objj_msgSend(_24,"removeItemAtIndex:",objj_msgSend(_items,"indexOfObjectIdenticalTo:",_26));
}
}),new objj_method(sel_getUid("removeItemAtIndex:"),function(_27,_28,_29){
with(_27){
objj_msgSend(_27,"removeObjectFromItemsAtIndex:",_29);
}
}),new objj_method(sel_getUid("itemChanged:"),function(_2a,_2b,_2c){
with(_2a){
if(objj_msgSend(_2c,"menu")!==_2a){
return;
}
objj_msgSend(_2c,"setValue:forKey:",objj_msgSend(_2c,"valueForKey:","changeCount")+1,"changeCount");
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:userInfo:",CPMenuDidChangeItemNotification,_2a,objj_msgSend(CPDictionary,"dictionaryWithObject:forKey:",objj_msgSend(_items,"indexOfObjectIdenticalTo:",_2c),"CPMenuItemIndex"));
}
}),new objj_method(sel_getUid("itemWithTag:"),function(_2d,_2e,_2f){
with(_2d){
var _30=objj_msgSend(_2d,"indexOfItemWithTag:",_2f);
if(_30==CPNotFound){
return nil;
}
return _items[_30];
}
}),new objj_method(sel_getUid("itemWithTitle:"),function(_31,_32,_33){
with(_31){
var _34=objj_msgSend(_31,"indexOfItemWithTitle:",_33);
if(_34==CPNotFound){
return nil;
}
return _items[_34];
}
}),new objj_method(sel_getUid("itemAtIndex:"),function(_35,_36,_37){
with(_35){
return objj_msgSend(_items,"objectAtIndex:",_37);
}
}),new objj_method(sel_getUid("numberOfItems"),function(_38,_39){
with(_38){
return objj_msgSend(_items,"count");
}
}),new objj_method(sel_getUid("itemArray"),function(_3a,_3b){
with(_3a){
return _items;
}
}),new objj_method(sel_getUid("indexOfItem:"),function(_3c,_3d,_3e){
with(_3c){
if(objj_msgSend(_3e,"menu")!==_3c){
return CPNotFound;
}
return objj_msgSend(_items,"indexOfObjectIdenticalTo:",_3e);
}
}),new objj_method(sel_getUid("indexOfItemWithTitle:"),function(_3f,_40,_41){
with(_3f){
var _42=0,_43=_items.length;
for(;_42<_43;++_42){
if(objj_msgSend(_items[_42],"title")===_41){
return _42;
}
}
return CPNotFound;
}
}),new objj_method(sel_getUid("indexOfItemWithTag:"),function(_44,_45,_46){
with(_44){
var _47=0,_48=_items.length;
for(;_47<_48;++_47){
if(objj_msgSend(_items[_47],"tag")==_46){
return _47;
}
}
return CPNotFound;
}
}),new objj_method(sel_getUid("indexOfItemWithTarget:andAction:"),function(_49,_4a,_4b,_4c){
with(_49){
var _4d=0,_4e=_items.length;
for(;_4d<_4e;++_4d){
var _4f=_items[_4d];
if(objj_msgSend(_4f,"target")==_4b&&(!_4c||objj_msgSend(_4f,"action")==_4c)){
return _4d;
}
}
return CPNotFound;
}
}),new objj_method(sel_getUid("indexOfItemWithRepresentedObject:"),function(_50,_51,_52){
with(_50){
var _53=0,_54=_items.length;
for(;_53<_54;++_53){
if(objj_msgSend(objj_msgSend(_items[_53],"representedObject"),"isEqual:",_52)){
return _53;
}
}
return CPNotFound;
}
}),new objj_method(sel_getUid("indexOfItemWithSubmenu:"),function(_55,_56,_57){
with(_55){
var _58=0,_59=_items.length;
for(;_58<_59;++_58){
if(objj_msgSend(_items[_58],"submenu")==_57){
return _58;
}
}
return CPNotFound;
}
}),new objj_method(sel_getUid("setSubmenu:forItem:"),function(_5a,_5b,_5c,_5d){
with(_5a){
objj_msgSend(_5d,"setTarget:",_5d);
objj_msgSend(_5d,"setAction:",sel_getUid("submenuAction:"));
objj_msgSend(_5d,"setSubmenu:",_5c);
}
}),new objj_method(sel_getUid("submenuAction:"),function(_5e,_5f,_60){
with(_5e){
}
}),new objj_method(sel_getUid("supermenu"),function(_61,_62){
with(_61){
return _supermenu;
}
}),new objj_method(sel_getUid("setSupermenu:"),function(_63,_64,_65){
with(_63){
_supermenu=_65;
}
}),new objj_method(sel_getUid("isTornOff"),function(_66,_67){
with(_66){
return !_supermenu||_66==objj_msgSend(CPApp,"mainMenu");
}
}),new objj_method(sel_getUid("setAutoenablesItems:"),function(_68,_69,_6a){
with(_68){
_autoenablesItems=_6a;
}
}),new objj_method(sel_getUid("autoenablesItems"),function(_6b,_6c){
with(_6b){
return _autoenablesItems;
}
}),new objj_method(sel_getUid("update"),function(_6d,_6e){
with(_6d){
if(!objj_msgSend(_6d,"autoenablesItems")){
return;
}
var _6f=objj_msgSend(_6d,"itemArray");
for(var i=0;i<objj_msgSend(_6f,"count");i++){
var _70=objj_msgSend(_6f,"objectAtIndex:",i);
if(objj_msgSend(_70,"hasSubmenu")){
continue;
}
var _71=objj_msgSend(CPApp,"targetForAction:to:from:",objj_msgSend(_70,"action"),objj_msgSend(_70,"target"),_70);
if(!_71||!objj_msgSend(_71,"respondsToSelector:",objj_msgSend(_70,"action"))){
objj_msgSend(_70,"_setEnabled:",NO);
}else{
if(objj_msgSend(_71,"respondsToSelector:",sel_getUid("validateMenuItem:"))){
objj_msgSend(_70,"_setEnabled:",objj_msgSend(_71,"validateMenuItem:",_70));
}else{
if(objj_msgSend(_71,"respondsToSelector:",sel_getUid("validateUserInterfaceItem:"))){
objj_msgSend(_70,"_setEnabled:",objj_msgSend(_71,"validateUserInterfaceItem:",_70));
}
}
}
}
objj_msgSend(objj_msgSend(_menuWindow,"_menuView"),"tile");
}
}),new objj_method(sel_getUid("setTitle:"),function(_72,_73,_74){
with(_72){
_title=_74;
}
}),new objj_method(sel_getUid("title"),function(_75,_76){
with(_75){
return _title;
}
}),new objj_method(sel_getUid("setMinimumWidth:"),function(_77,_78,_79){
with(_77){
_minimumWidth=_79;
}
}),new objj_method(sel_getUid("minimumWidth"),function(_7a,_7b){
with(_7a){
return _minimumWidth;
}
}),new objj_method(sel_getUid("_performActionOfHighlightedItemChain"),function(_7c,_7d){
with(_7c){
var _7e=objj_msgSend(_7c,"highlightedItem");
while(objj_msgSend(_7e,"submenu")&&objj_msgSend(_7e,"action")===sel_getUid("submenuAction:")){
_7e=objj_msgSend(objj_msgSend(_7e,"submenu"),"highlightedItem");
}
if(_7e&&objj_msgSend(_7e,"isEnabled")){
objj_msgSend(CPApp,"sendAction:to:from:",objj_msgSend(_7e,"action"),objj_msgSend(_7e,"target"),_7e);
}
}
}),new objj_method(sel_getUid("popUpMenuPositioningItem:atLocation:inView:callback:"),function(_7f,_80,_81,_82,_83,_84){
with(_7f){
objj_msgSend(_7f,"_popUpMenuPositioningItem:atLocation:topY:bottomY:inView:callback:",_81,_82,_82.y,_82.y,_83,_84);
}
}),new objj_method(sel_getUid("_popUpMenuPositioningItem:atLocation:topY:bottomY:inView:callback:"),function(_85,_86,_87,_88,_89,_8a,_8b,_8c){
with(_85){
var _8d=0;
if(_87){
_8d=objj_msgSend(_85,"indexOfItem:",_87);
if(_8d===CPNotFound){
throw "In call to popUpMenuPositioningItem:atLocation:inView:callback:, menu item "+_87+" is not present in menu "+_85;
}
}
var _8e=objj_msgSend(_8b,"window");
if(_8b&&!_8e){
throw "In call to popUpMenuPositioningItem:atLocation:inView:callback:, view is not in any window.";
}
var _8f=objj_msgSend(_85,"delegate");
if(objj_msgSend(_8f,"respondsToSelector:",sel_getUid("menuWillOpen:"))){
objj_msgSend(_8f,"menuWillOpen:",_85);
}
if(_8b){
_88=objj_msgSend(_8e,"convertBaseToGlobal:",objj_msgSend(_8b,"convertPoint:toView:",_88,nil));
}
var _90=objj_msgSend(_CPMenuWindow,"menuWindowWithMenu:font:",_85,objj_msgSend(_85,"font"));
objj_msgSend(_90,"setBackgroundStyle:",_CPMenuWindowPopUpBackgroundStyle);
if(_87){
_88.y-=objj_msgSend(_90,"deltaYForItemAtIndex:",_8d);
}
var _91=objj_msgSend(CPMenu,"_constraintRectForView:",_8b);
objj_msgSend(_90,"setFrameOrigin:",_88);
objj_msgSend(_90,"setConstraintRect:",_91);
if(!objj_msgSend(_90,"hasMinimumNumberOfVisibleItems")){
var _92=objj_msgSend(_90,"unconstrainedFrame"),_93=CGRectGetMinY(_92);
if(_93>=CGRectGetMaxY(_91)||objj_msgSend(_90,"canScrollDown")){
if(_8b){
_89=objj_msgSend(_8e,"convertBaseToGlobal:",objj_msgSend(_8b,"convertPoint:toView:",CGPointMake(0,_89),nil)).y;
}
_92.origin.y=MIN(CGRectGetMaxY(_91),_89)-CGRectGetHeight(_92);
}else{
if(_93<CGRectGetMinY(_91)||objj_msgSend(_90,"canScrollUp")){
if(_8b){
_8a=objj_msgSend(_8e,"convertBaseToGlobal:",objj_msgSend(_8b,"convertPoint:toView:",CGPointMake(0,_8a),nil)).y;
}
_92.origin.y=MAX(CGRectGetMinY(_91),_8a);
}
}
objj_msgSend(_90,"setFrameOrigin:",CGRectIntersection(_92,_91).origin);
}
if(objj_msgSend(CPPlatform,"isBrowser")){
objj_msgSend(_90,"setPlatformWindow:",objj_msgSend(objj_msgSend(_8b,"window"),"platformWindow"));
}
objj_msgSend(_90,"orderFront:",_85);
objj_msgSend(objj_msgSend(_CPMenuManager,"sharedMenuManager"),"beginTracking:menuContainer:constraintRect:callback:",objj_msgSend(CPApp,"currentEvent"),_90,_91,objj_msgSend(CPMenu,"trackingCallbackWithCallback:",_8c));
}
}),new objj_method(sel_getUid("setShowsStateColumn:"),function(_94,_95,_96){
with(_94){
_showsStateColumn=_96;
}
}),new objj_method(sel_getUid("showsStateColumn"),function(_97,_98){
with(_97){
return _showsStateColumn;
}
}),new objj_method(sel_getUid("highlightedItem"),function(_99,_9a){
with(_99){
return _highlightedIndex>=0?_items[_highlightedIndex]:nil;
}
}),new objj_method(sel_getUid("setDelegate:"),function(_9b,_9c,_9d){
with(_9b){
_delegate=_9d;
}
}),new objj_method(sel_getUid("delegate"),function(_9e,_9f){
with(_9e){
return _delegate;
}
}),new objj_method(sel_getUid("cancelTracking"),function(_a0,_a1){
with(_a0){
objj_msgSend(objj_msgSend(CPRunLoop,"currentRunLoop"),"performSelector:target:argument:order:modes:",sel_getUid("_fireCancelTrackingEvent"),_a0,nil,0,[CPDefaultRunLoopMode]);
}
}),new objj_method(sel_getUid("_fireCancelTrackingEvent"),function(_a2,_a3){
with(_a2){
objj_msgSend(CPApp,"sendEvent:",objj_msgSend(CPEvent,"otherEventWithType:location:modifierFlags:timestamp:windowNumber:context:subtype:data1:data2:",CPAppKitDefined,{x:0,y:0},0,0,0,0,0,0,0));
objj_msgSend(_CPDisplayServer,"run");
}
}),new objj_method(sel_getUid("_setMenuWindow:"),function(_a4,_a5,_a6){
with(_a4){
_menuWindow=_a6;
}
}),new objj_method(sel_getUid("setFont:"),function(_a7,_a8,_a9){
with(_a7){
_font=_a9;
}
}),new objj_method(sel_getUid("font"),function(_aa,_ab){
with(_aa){
return _font;
}
}),new objj_method(sel_getUid("performKeyEquivalent:"),function(_ac,_ad,_ae){
with(_ac){
if(_autoenablesItems){
objj_msgSend(_ac,"update");
}
var _af=0,_b0=_items.length,_b1=objj_msgSend(_ae,"charactersIgnoringModifiers"),_b2=objj_msgSend(_ae,"modifierFlags");
for(;_af<_b0;++_af){
var _b3=_items[_af],_b4=objj_msgSend(_b3,"keyEquivalentModifierMask");
if(objj_msgSend(_ae,"_triggersKeyEquivalent:withModifierMask:",objj_msgSend(_b3,"keyEquivalent"),objj_msgSend(_b3,"keyEquivalentModifierMask"))){
if(objj_msgSend(_b3,"isEnabled")){
objj_msgSend(_ac,"performActionForItemAtIndex:",_af);
}else{
}
return YES;
}
if(objj_msgSend(objj_msgSend(_b3,"submenu"),"performKeyEquivalent:",_ae)){
return YES;
}
}
return NO;
}
}),new objj_method(sel_getUid("performActionForItemAtIndex:"),function(_b5,_b6,_b7){
with(_b5){
var _b8=_items[_b7];
objj_msgSend(CPApp,"sendAction:to:from:",objj_msgSend(_b8,"action"),objj_msgSend(_b8,"target"),_b8);
}
}),new objj_method(sel_getUid("_itemIsHighlighted:"),function(_b9,_ba,_bb){
with(_b9){
return _items[_highlightedIndex]==_bb;
}
}),new objj_method(sel_getUid("_highlightItemAtIndex:"),function(_bc,_bd,_be){
with(_bc){
if(_highlightedIndex===_be){
return;
}
if(_highlightedIndex!==CPNotFound){
objj_msgSend(objj_msgSend(_items[_highlightedIndex],"_menuItemView"),"highlight:",NO);
}
_highlightedIndex=_be;
if(_highlightedIndex!==CPNotFound){
objj_msgSend(objj_msgSend(_items[_highlightedIndex],"_menuItemView"),"highlight:",YES);
}
if(_highlightedIndex!==CPNotFound&&_menuWindow){
objj_msgSend(_menuWindow._menuView,"scrollRectToVisible:",objj_msgSend(objj_msgSend(_items[_highlightedIndex],"_menuItemView"),"frame"));
}
}
}),new objj_method(sel_getUid("_setMenuName:"),function(_bf,_c0,_c1){
with(_bf){
if(_name===_c1){
return;
}
_name=_c1;
if(_name==="CPMainMenu"){
objj_msgSend(CPApp,"setMainMenu:",_bf);
}
}
}),new objj_method(sel_getUid("_menuName"),function(_c2,_c3){
with(_c2){
return _name;
}
}),new objj_method(sel_getUid("awakeFromCib"),function(_c4,_c5){
with(_c4){
if(_name==="_CPMainMenu"){
objj_msgSend(_c4,"_setMenuName:","CPMainMenu");
objj_msgSend(CPMenu,"setMenuBarVisible:",YES);
}
}
}),new objj_method(sel_getUid("_menuWithName:"),function(_c6,_c7,_c8){
with(_c6){
if(_c8===_name){
return _c6;
}
for(var i=0,_c9=objj_msgSend(_items,"count");i<_c9;i++){
var _ca=objj_msgSend(objj_msgSend(_items[i],"submenu"),"_menuWithName:",_c8);
if(_ca){
return _ca;
}
}
return nil;
}
})]);
class_addMethods(_9,[new objj_method(sel_getUid("initialize"),function(_cb,_cc){
with(_cb){
if(_cb!==CPMenu){
return;
}
objj_msgSend(objj_msgSend(_cb,"class"),"setMenuBarAttributes:",objj_msgSend(CPDictionary,"dictionary"));
}
}),new objj_method(sel_getUid("menuBarVisible"),function(_cd,_ce){
with(_cd){
return _2;
}
}),new objj_method(sel_getUid("setMenuBarVisible:"),function(_cf,_d0,_d1){
with(_cf){
if(_2===_d1){
return;
}
_2=_d1;
if(objj_msgSend(CPPlatform,"supportsNativeMainMenu")){
return;
}
if(_d1){
if(!_7){
_7=objj_msgSend(objj_msgSend(_CPMenuBarWindow,"alloc"),"init");
}
objj_msgSend(_7,"setMenu:",objj_msgSend(CPApp,"mainMenu"));
objj_msgSend(_7,"setTitle:",_3);
objj_msgSend(_7,"setIconImage:",_4);
objj_msgSend(_7,"setIconImageAlphaValue:",_5);
objj_msgSend(_7,"setColor:",objj_msgSend(_6,"objectForKey:","CPMenuBarBackgroundColor"));
objj_msgSend(_7,"setTextColor:",objj_msgSend(_6,"objectForKey:","CPMenuBarTextColor"));
objj_msgSend(_7,"setTitleColor:",objj_msgSend(_6,"objectForKey:","CPMenuBarTitleColor"));
objj_msgSend(_7,"setTextShadowColor:",objj_msgSend(_6,"objectForKey:","CPMenuBarTextShadowColor"));
objj_msgSend(_7,"setTitleShadowColor:",objj_msgSend(_6,"objectForKey:","CPMenuBarTitleShadowColor"));
objj_msgSend(_7,"setHighlightColor:",objj_msgSend(_6,"objectForKey:","CPMenuBarHighlightColor"));
objj_msgSend(_7,"setHighlightTextColor:",objj_msgSend(_6,"objectForKey:","CPMenuBarHighlightTextColor"));
objj_msgSend(_7,"setHighlightTextShadowColor:",objj_msgSend(_6,"objectForKey:","CPMenuBarHighlightTextShadowColor"));
objj_msgSend(_7,"orderFront:",_cf);
}else{
objj_msgSend(_7,"orderOut:",_cf);
}
objj_msgSend(objj_msgSend(CPPlatformWindow,"primaryPlatformWindow"),"resizeEvent:",nil);
}
}),new objj_method(sel_getUid("setMenuBarTitle:"),function(_d2,_d3,_d4){
with(_d2){
_3=_d4;
objj_msgSend(_7,"setTitle:",_3);
}
}),new objj_method(sel_getUid("menuBarTitle"),function(_d5,_d6){
with(_d5){
return _3;
}
}),new objj_method(sel_getUid("setMenuBarIconImage:"),function(_d7,_d8,_d9){
with(_d7){
_CPMenuBarImage=_d9;
objj_msgSend(_7,"setIconImage:",_d9);
}
}),new objj_method(sel_getUid("menuBarIconImage"),function(_da,_db){
with(_da){
return _CPMenuBarImage;
}
}),new objj_method(sel_getUid("setMenuBarAttributes:"),function(_dc,_dd,_de){
with(_dc){
if(_6==_de){
return;
}
_6=objj_msgSend(_de,"copy");
var _df=objj_msgSend(_de,"objectForKey:","CPMenuBarTextColor"),_e0=objj_msgSend(_de,"objectForKey:","CPMenuBarTitleColor"),_e1=objj_msgSend(_de,"objectForKey:","CPMenuBarTextShadowColor"),_e2=objj_msgSend(_de,"objectForKey:","CPMenuBarTitleShadowColor"),_e3=objj_msgSend(_de,"objectForKey:","CPMenuBarHighlightColor"),_e4=objj_msgSend(_de,"objectForKey:","CPMenuBarHighlightTextColor"),_e5=objj_msgSend(_de,"objectForKey:","CPMenuBarHighlightTextShadowColor");
if(!_df&&_e0){
objj_msgSend(_6,"setObject:forKey:",_e0,"CPMenuBarTextColor");
}else{
if(_df&&!_e0){
objj_msgSend(_6,"setObject:forKey:",_df,"CPMenuBarTitleColor");
}else{
if(!_df&&!_e0){
objj_msgSend(_6,"setObject:forKey:",objj_msgSend(CPColor,"colorWithRed:green:blue:alpha:",0.051,0.2,0.275,1),"CPMenuBarTextColor");
objj_msgSend(_6,"setObject:forKey:",objj_msgSend(CPColor,"colorWithRed:green:blue:alpha:",0.051,0.2,0.275,1),"CPMenuBarTitleColor");
}
}
}
if(!_e1&&_e2){
objj_msgSend(_6,"setObject:forKey:",_e2,"CPMenuBarTextShadowColor");
}else{
if(_e1&&!_e2){
objj_msgSend(_6,"setObject:forKey:",_e1,"CPMenuBarTitleShadowColor");
}else{
if(!_e1&&!_e2){
objj_msgSend(_6,"setObject:forKey:",objj_msgSend(CPColor,"whiteColor"),"CPMenuBarTextShadowColor");
objj_msgSend(_6,"setObject:forKey:",objj_msgSend(CPColor,"whiteColor"),"CPMenuBarTitleShadowColor");
}
}
}
if(!_e3){
objj_msgSend(_6,"setObject:forKey:",objj_msgSend(CPColor,"colorWithCalibratedRed:green:blue:alpha:",94/255,130/255,186/255,1),"CPMenuBarHighlightColor");
}
if(!_e4){
objj_msgSend(_6,"setObject:forKey:",objj_msgSend(CPColor,"whiteColor"),"CPMenuBarHighlightTextColor");
}
if(!_e5){
objj_msgSend(_6,"setObject:forKey:",objj_msgSend(CPColor,"blackColor"),"CPMenuBarHighlightTextShadowColor");
}
if(_7){
objj_msgSend(_7,"setColor:",objj_msgSend(_6,"objectForKey:","CPMenuBarBackgroundColor"));
objj_msgSend(_7,"setTextColor:",objj_msgSend(_6,"objectForKey:","CPMenuBarTextColor"));
objj_msgSend(_7,"setTitleColor:",objj_msgSend(_6,"objectForKey:","CPMenuBarTitleColor"));
objj_msgSend(_7,"setTextShadowColor:",objj_msgSend(_6,"objectForKey:","CPMenuBarTextShadowColor"));
objj_msgSend(_7,"setTitleShadowColor:",objj_msgSend(_6,"objectForKey:","CPMenuBarTitleShadowColor"));
objj_msgSend(_7,"setHighlightColor:",objj_msgSend(_6,"objectForKey:","CPMenuBarHighlightColor"));
objj_msgSend(_7,"setHighlightTextColor:",objj_msgSend(_6,"objectForKey:","CPMenuBarHighlightTextColor"));
objj_msgSend(_7,"setHighlightTextShadowColor:",objj_msgSend(_6,"objectForKey:","CPMenuBarHighlightTextShadowColor"));
}
}
}),new objj_method(sel_getUid("menuBarAttributes"),function(_e6,_e7){
with(_e6){
return _6;
}
}),new objj_method(sel_getUid("_setMenuBarIconImageAlphaValue:"),function(_e8,_e9,_ea){
with(_e8){
_5=_ea;
objj_msgSend(_7,"setIconImageAlphaValue:",_ea);
}
}),new objj_method(sel_getUid("menuBarHeight"),function(_eb,_ec){
with(_eb){
return _1;
}
}),new objj_method(sel_getUid("_constraintRectForView:"),function(_ed,_ee,_ef){
with(_ed){
if(objj_msgSend(CPPlatform,"isBrowser")){
return CGRectInset(objj_msgSend(objj_msgSend(objj_msgSend(_ef,"window"),"platformWindow"),"contentBounds"),5,5);
}
return CGRectInset(objj_msgSend(objj_msgSend(objj_msgSend(_ef,"window"),"screen"),"visibleFrame"),5,5);
}
}),new objj_method(sel_getUid("trackingCallbackWithCallback:"),function(_f0,_f1,_f2){
with(_f0){
return function(_f3,_f4){
objj_msgSend(_f3,"setMenu:",nil);
objj_msgSend(_f3,"orderOut:",_f0);
objj_msgSend(_CPMenuWindow,"poolMenuWindow:",_f3);
if(_f2){
_f2(_f4);
}
objj_msgSend(_f4,"_performActionOfHighlightedItemChain");
};
}
}),new objj_method(sel_getUid("popUpContextMenu:withEvent:forView:"),function(_f5,_f6,_f7,_f8,_f9){
with(_f5){
objj_msgSend(_f5,"popUpContextMenu:withEvent:forView:withFont:",_f7,_f8,_f9,nil);
}
}),new objj_method(sel_getUid("popUpContextMenu:withEvent:forView:withFont:"),function(_fa,_fb,_fc,_fd,_fe,_ff){
with(_fa){
var _100=objj_msgSend(_fc,"delegate");
if(objj_msgSend(_100,"respondsToSelector:",sel_getUid("menuWillOpen:"))){
objj_msgSend(_100,"menuWillOpen:",_fc);
}
if(!_ff){
_ff=objj_msgSend(CPFont,"systemFontOfSize:",12);
}
var _101=objj_msgSend(_fe,"window"),_102=objj_msgSend(_CPMenuWindow,"menuWindowWithMenu:font:",_fc,_ff);
objj_msgSend(_102,"setBackgroundStyle:",_CPMenuWindowPopUpBackgroundStyle);
var _103=objj_msgSend(CPMenu,"_constraintRectForView:",_fe),_104=objj_msgSend(objj_msgSend(_fd,"window"),"convertBaseToGlobal:",objj_msgSend(_fd,"locationInWindow"));
objj_msgSend(_102,"setConstraintRect:",_103);
objj_msgSend(_102,"setFrameOrigin:",_104);
if(!objj_msgSend(_102,"hasMinimumNumberOfVisibleItems")){
var _105=objj_msgSend(_102,"unconstrainedFrame"),_106=CGRectGetMinY(_105);
if(_106>=CGRectGetMaxY(_103)||objj_msgSend(_102,"canScrollDown")){
_105.origin.y=MIN(CGRectGetMaxY(_103),_104.y)-CGRectGetHeight(_105);
}else{
if(_106<CGRectGetMinY(_103)||objj_msgSend(_102,"canScrollUp")){
_105.origin.y=MAX(CGRectGetMinY(_103),_104.y);
}
}
objj_msgSend(_102,"setFrameOrigin:",CGRectIntersection(_105,_103).origin);
}
if(objj_msgSend(CPPlatform,"isBrowser")){
objj_msgSend(_102,"setPlatformWindow:",objj_msgSend(objj_msgSend(_fe,"window"),"platformWindow"));
}
objj_msgSend(_102,"orderFront:",_fa);
objj_msgSend(objj_msgSend(_CPMenuManager,"sharedMenuManager"),"beginTracking:menuContainer:constraintRect:callback:",_fd,_102,objj_msgSend(CPMenu,"_constraintRectForView:",_fe),objj_msgSend(CPMenu,"trackingCallbackWithCallback:",nil));
}
})]);
var _8=objj_getClass("CPMenu");
if(!_8){
throw new SyntaxError("*** Could not find definition for class \"CPMenu\"");
}
var _9=_8.isa;
class_addMethods(_8,[new objj_method(sel_getUid("countOfItems"),function(self,_107){
with(self){
return objj_msgSend(_items,"count");
}
}),new objj_method(sel_getUid("objectInItemsAtIndex:"),function(self,_108,_109){
with(self){
return objj_msgSend(_items,"objectAtIndex:",_109);
}
}),new objj_method(sel_getUid("itemsAtIndexes:"),function(self,_10a,_10b){
with(self){
return objj_msgSend(_items,"objectsAtIndexes:",_10b);
}
})]);
var _8=objj_getClass("CPMenu");
if(!_8){
throw new SyntaxError("*** Could not find definition for class \"CPMenu\"");
}
var _9=_8.isa;
class_addMethods(_8,[new objj_method(sel_getUid("insertObject:inItemsAtIndex:"),function(self,_10c,_10d,_10e){
with(self){
var menu=objj_msgSend(_10d,"menu");
if(menu){
if(menu!==self){
objj_msgSend(CPException,"raise:reason:",CPInternalInconsistencyException,"Attempted to insert item into menu that was already in another menu.");
}else{
return;
}
}
objj_msgSend(_10d,"setMenu:",self);
objj_msgSend(_items,"insertObject:atIndex:",_10d,_10e);
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:userInfo:",CPMenuDidAddItemNotification,self,objj_msgSend(CPDictionary,"dictionaryWithObject:forKey:",_10e,"CPMenuItemIndex"));
}
}),new objj_method(sel_getUid("removeObjectFromItemsAtIndex:"),function(self,_10f,_110){
with(self){
if(_110<0||_110>=objj_msgSend(_items,"count")){
return;
}
objj_msgSend(objj_msgSend(_items,"objectAtIndex:",_110),"setMenu:",nil);
objj_msgSend(_items,"removeObjectAtIndex:",_110);
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:userInfo:",CPMenuDidRemoveItemNotification,self,objj_msgSend(CPDictionary,"dictionaryWithObject:forKey:",_110,"CPMenuItemIndex"));
}
})]);
var _111="CPMenuTitleKey",_112="CPMenuNameKey",_113="CPMenuItemsKey",_114="CPMenuShowsStateColumnKey";
var _8=objj_getClass("CPMenu");
if(!_8){
throw new SyntaxError("*** Could not find definition for class \"CPMenu\"");
}
var _9=_8.isa;
class_addMethods(_8,[new objj_method(sel_getUid("initWithCoder:"),function(self,_115,_116){
with(self){
self=objj_msgSendSuper({receiver:self,super_class:objj_getClass("CPMenu").super_class},"init");
if(self){
_title=objj_msgSend(_116,"decodeObjectForKey:",_111);
_items=objj_msgSend(_116,"decodeObjectForKey:",_113);
objj_msgSend(self,"_setMenuName:",objj_msgSend(_116,"decodeObjectForKey:",_112));
_showsStateColumn=!objj_msgSend(_116,"containsValueForKey:",_114)||objj_msgSend(_116,"decodeBoolForKey:",_114);
_autoenablesItems=YES;
objj_msgSend(self,"setMinimumWidth:",0);
}
return self;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(self,_117,_118){
with(self){
objj_msgSend(_118,"encodeObject:forKey:",_title,_111);
if(_name){
objj_msgSend(_118,"encodeObject:forKey:",_name,_112);
}
objj_msgSend(_118,"encodeObject:forKey:",_items,_113);
if(!_showsStateColumn){
objj_msgSend(_118,"encodeBool:forKey:",_showsStateColumn,_114);
}
}
})]);
objj_executeFile("_CPMenuBarWindow.j",YES);
objj_executeFile("_CPMenuWindow.j",YES);
p;24;_CPMenuItemMenuBarView.jt;7692;@STATIC;1.0;i;8;CPView.jt;7661;
objj_executeFile("CPView.j",YES);
var _1=8,_2=3,_3=4;
var _4=nil,_5=nil,_6=nil,_7=nil,_8=[],_9=[];
var _a=objj_allocateClassPair(CPView,"_CPMenuItemMenuBarView"),_b=_a.isa;
class_addIvars(_a,[new objj_ivar("_menuItem"),new objj_ivar("_font"),new objj_ivar("_textColor"),new objj_ivar("_textShadowColor"),new objj_ivar("_isDirty"),new objj_ivar("_imageAndTextView"),new objj_ivar("_submenuIndicatorView")]);
objj_registerClassPair(_a);
class_addMethods(_a,[new objj_method(sel_getUid("menuItem"),function(_c,_d){
with(_c){
return _menuItem;
}
}),new objj_method(sel_getUid("setMenuItem:"),function(_e,_f,_10){
with(_e){
_menuItem=_10;
}
}),new objj_method(sel_getUid("initWithFrame:"),function(_11,_12,_13){
with(_11){
_11=objj_msgSendSuper({receiver:_11,super_class:objj_getClass("_CPMenuItemMenuBarView").super_class},"initWithFrame:",_13);
if(_11){
_imageAndTextView=objj_msgSend(objj_msgSend(_CPImageAndTextView,"alloc"),"initWithFrame:",CGRectMake(_1,0,0,0));
objj_msgSend(_imageAndTextView,"setImagePosition:",CPImageLeft);
objj_msgSend(_imageAndTextView,"setImageOffset:",3);
objj_msgSend(_imageAndTextView,"setTextShadowOffset:",CGSizeMake(0,1));
objj_msgSend(_imageAndTextView,"setAutoresizingMask:",CPViewMinYMargin|CPViewMaxYMargin);
objj_msgSend(_11,"addSubview:",_imageAndTextView);
_submenuIndicatorView=objj_msgSend(objj_msgSend(_CPMenuItemMenuBarSubmenuIndicatorView,"alloc"),"initWithFrame:",CGRectMake(0,0,9,6));
objj_msgSend(_submenuIndicatorView,"setAutoresizingMask:",CPViewMinYMargin|CPViewMaxYMargin);
objj_msgSend(_11,"addSubview:",_submenuIndicatorView);
objj_msgSend(_11,"setAutoresizingMask:",CPViewWidthSizable|CPViewHeightSizable);
}
return _11;
}
}),new objj_method(sel_getUid("textColor"),function(_14,_15){
with(_14){
if(!objj_msgSend(_menuItem,"isEnabled")){
return objj_msgSend(CPColor,"lightGrayColor");
}
return _textColor||objj_msgSend(CPColor,"colorWithCalibratedRed:green:blue:alpha:",70/255,69/255,69/255,1);
}
}),new objj_method(sel_getUid("textShadowColor"),function(_16,_17){
with(_16){
if(!objj_msgSend(_menuItem,"isEnabled")){
return objj_msgSend(CPColor,"colorWithWhite:alpha:",0.8,0.8);
}
return _textShadowColor||objj_msgSend(CPColor,"colorWithWhite:alpha:",1,0.8);
}
}),new objj_method(sel_getUid("update"),function(_18,_19){
with(_18){
var x=_1,_1a=0;
objj_msgSend(_imageAndTextView,"setFont:",objj_msgSend(_menuItem,"font")||objj_msgSend(_CPMenuBarWindow,"font"));
objj_msgSend(_imageAndTextView,"setVerticalAlignment:",CPCenterVerticalTextAlignment);
objj_msgSend(_imageAndTextView,"setImage:",objj_msgSend(_menuItem,"image"));
objj_msgSend(_imageAndTextView,"setText:",objj_msgSend(_menuItem,"title"));
objj_msgSend(_imageAndTextView,"setTextColor:",objj_msgSend(_18,"textColor"));
objj_msgSend(_imageAndTextView,"setTextShadowColor:",objj_msgSend(_18,"textShadowColor"));
objj_msgSend(_imageAndTextView,"setTextShadowOffset:",CGSizeMake(0,1));
objj_msgSend(_imageAndTextView,"sizeToFit");
var _1b=objj_msgSend(_imageAndTextView,"frame");
_1b.origin.x=x;
x+=CGRectGetWidth(_1b);
_1a=MAX(_1a,CGRectGetHeight(_1b));
var _1c=objj_msgSend(_menuItem,"hasSubmenu")&&objj_msgSend(_menuItem,"action");
if(_1c){
objj_msgSend(_submenuIndicatorView,"setHidden:",NO);
objj_msgSend(_submenuIndicatorView,"setColor:",objj_msgSend(_18,"textColor"));
objj_msgSend(_submenuIndicatorView,"setShadowColor:",objj_msgSend(_18,"textShadowColor"));
var _1d=objj_msgSend(_submenuIndicatorView,"frame");
_1d.origin.x=x+_2;
x=CGRectGetMaxX(_1d);
_1a=MAX(_1a,CGRectGetHeight(_1d));
}else{
objj_msgSend(_submenuIndicatorView,"setHidden:",YES);
}
_1a+=2*_3;
_1b.origin.y=FLOOR((_1a-CGRectGetHeight(_1b))/2);
objj_msgSend(_imageAndTextView,"setFrame:",_1b);
if(_1c){
_1d.origin.y=FLOOR((_1a-CGRectGetHeight(_1d))/2)+1;
objj_msgSend(_submenuIndicatorView,"setFrame:",_1d);
}
_minSize=CGSizeMake(x+_1,_1a);
objj_msgSend(_18,"setAutoresizesSubviews:",NO);
objj_msgSend(_18,"setFrameSize:",_minSize);
objj_msgSend(_18,"setAutoresizesSubviews:",YES);
}
}),new objj_method(sel_getUid("highlight:"),function(_1e,_1f,_20){
with(_1e){
if(!objj_msgSend(_menuItem,"isEnabled")){
_20=NO;
}
if(_20){
if(!objj_msgSend(_menuItem,"_isMenuBarButton")){
objj_msgSend(_1e,"setBackgroundColor:",_4);
}
objj_msgSend(_imageAndTextView,"setImage:",objj_msgSend(_menuItem,"alternateImage")||objj_msgSend(_menuItem,"image"));
objj_msgSend(_imageAndTextView,"setTextColor:",objj_msgSend(CPColor,"whiteColor"));
objj_msgSend(_imageAndTextView,"setTextShadowColor:",_7);
objj_msgSend(_submenuIndicatorView,"setColor:",objj_msgSend(CPColor,"whiteColor"));
objj_msgSend(_submenuIndicatorView,"setShadowColor:",objj_msgSend(CPColor,"colorWithWhite:alpha:",0.1,0.7));
}else{
objj_msgSend(_1e,"setBackgroundColor:",nil);
objj_msgSend(_imageAndTextView,"setImage:",objj_msgSend(_menuItem,"image"));
objj_msgSend(_imageAndTextView,"setTextColor:",objj_msgSend(_1e,"textColor"));
objj_msgSend(_imageAndTextView,"setTextShadowColor:",objj_msgSend(_1e,"textShadowColor"));
objj_msgSend(_submenuIndicatorView,"setColor:",objj_msgSend(_1e,"textColor"));
objj_msgSend(_submenuIndicatorView,"setShadowColor:",objj_msgSend(_1e,"textShadowColor"));
}
}
})]);
class_addMethods(_b,[new objj_method(sel_getUid("initialize"),function(_21,_22){
with(_21){
if(_21!==objj_msgSend(_CPMenuItemMenuBarView,"class")){
return;
}
var _23=objj_msgSend(CPBundle,"bundleForClass:",_21);
_4=objj_msgSend(CPColor,"colorWithPatternImage:",objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_23,"pathForResource:","_CPMenuBarWindow/_CPMenuBarWindowBackgroundSelected.png"),CGSizeMake(1,28)));
_5=objj_msgSend(CPColor,"grayColor");
_6=objj_msgSend(CPColor,"colorWithCalibratedRed:green:blue:alpha:",95/255,131/255,185/255,1);
_7=objj_msgSend(CPColor,"colorWithCalibratedRed:green:blue:alpha:",26/255,73/255,109/255,1);
_8[CPOffState]=nil;
_9[CPOffState]=nil;
_8[CPOnState]=objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_23,"pathForResource:","CPMenuItem/CPMenuItemOnState.png"),CGSizeMake(14,14));
_9[CPOnState]=objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_23,"pathForResource:","CPMenuItem/CPMenuItemOnStateHighlighted.png"),CGSizeMake(14,14));
_8[CPMixedState]=nil;
_9[CPMixedState]=nil;
}
}),new objj_method(sel_getUid("view"),function(_24,_25){
with(_24){
return objj_msgSend(objj_msgSend(_24,"alloc"),"init");
}
})]);
var _a=objj_allocateClassPair(CPView,"_CPMenuItemMenuBarSubmenuIndicatorView"),_b=_a.isa;
class_addIvars(_a,[new objj_ivar("_color"),new objj_ivar("_shadowColor")]);
objj_registerClassPair(_a);
class_addMethods(_a,[new objj_method(sel_getUid("setColor:"),function(_26,_27,_28){
with(_26){
if(_color===_28){
return;
}
_color=_28;
objj_msgSend(_26,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("setShadowColor:"),function(_29,_2a,_2b){
with(_29){
if(_shadowColor===_2b){
return;
}
_shadowColor=_2b;
objj_msgSend(_29,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("drawRect:"),function(_2c,_2d,_2e){
with(_2c){
var _2f=objj_msgSend(objj_msgSend(CPGraphicsContext,"currentContext"),"graphicsPort"),_30=objj_msgSend(_2c,"bounds");
_30.size.height-=1;
_30.size.width-=2;
_30.origin.x+=1;
CGContextBeginPath(_2f);
CGContextMoveToPoint(_2f,CGRectGetMinX(_30),CGRectGetMinY(_30));
CGContextAddLineToPoint(_2f,CGRectGetMaxX(_30),CGRectGetMinY(_30));
CGContextAddLineToPoint(_2f,CGRectGetMidX(_30),CGRectGetMaxY(_30));
CGContextClosePath(_2f);
CGContextSetShadowWithColor(_2f,CGSizeMake(0,1),1.1,_shadowColor||objj_msgSend(CPColor,"whiteColor"));
CGContextSetFillColor(_2f,_color||objj_msgSend(CPColor,"blackColor"));
CGContextFillPath(_2f);
}
})]);
p;26;_CPMenuItemSeparatorView.jt;1110;@STATIC;1.0;i;8;CPView.jt;1079;
objj_executeFile("CPView.j",YES);
var _1=objj_allocateClassPair(CPView,"_CPMenuItemSeparatorView"),_2=_1.isa;
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("initWithFrame:"),function(_3,_4,_5){
with(_3){
_3=objj_msgSendSuper({receiver:_3,super_class:objj_getClass("_CPMenuItemSeparatorView").super_class},"initWithFrame:",_5);
if(_3){
objj_msgSend(_3,"setAutoresizingMask:",CPViewWidthSizable);
}
return _3;
}
}),new objj_method(sel_getUid("drawRect:"),function(_6,_7,_8){
with(_6){
var _9=objj_msgSend(objj_msgSend(CPGraphicsContext,"currentContext"),"graphicsPort"),_a=objj_msgSend(_6,"bounds");
CGContextBeginPath(_9);
CGContextMoveToPoint(_9,CGRectGetMinX(_a),FLOOR(CGRectGetMidY(_a))-0.5);
CGContextAddLineToPoint(_9,CGRectGetMaxX(_a),FLOOR(CGRectGetMidY(_a))-0.5);
CGContextSetStrokeColor(_9,objj_msgSend(CPColor,"lightGrayColor"));
CGContextStrokePath(_9);
}
})]);
class_addMethods(_2,[new objj_method(sel_getUid("view"),function(_b,_c){
with(_b){
return objj_msgSend(objj_msgSend(_b,"alloc"),"initWithFrame:",CGRectMake(0,0,0,10));
}
})]);
p;25;_CPMenuItemStandardView.jt;9362;@STATIC;1.0;i;11;CPControl.jt;9327;
objj_executeFile("CPControl.j",YES);
var _1=3,_2=14+3,_3=14,_4=17,_5=4,_6=30,_7=10;
var _8=nil,_9=nil,_a=nil,_b=[],_c=[];
var _d=objj_allocateClassPair(CPView,"_CPMenuItemStandardView"),_e=_d.isa;
class_addIvars(_d,[new objj_ivar("_menuItem"),new objj_ivar("_font"),new objj_ivar("_textColor"),new objj_ivar("_textShadowColor"),new objj_ivar("_minSize"),new objj_ivar("_isDirty"),new objj_ivar("_stateView"),new objj_ivar("_imageAndTextView"),new objj_ivar("_keyEquivalentView"),new objj_ivar("_submenuIndicatorView")]);
objj_registerClassPair(_d);
class_addMethods(_d,[new objj_method(sel_getUid("menuItem"),function(_f,_10){
with(_f){
return _menuItem;
}
}),new objj_method(sel_getUid("setMenuItem:"),function(_11,_12,_13){
with(_11){
_menuItem=_13;
}
}),new objj_method(sel_getUid("minSize"),function(_14,_15){
with(_14){
return _minSize;
}
}),new objj_method(sel_getUid("initWithFrame:"),function(_16,_17,_18){
with(_16){
_16=objj_msgSendSuper({receiver:_16,super_class:objj_getClass("_CPMenuItemStandardView").super_class},"initWithFrame:",_18);
if(_16){
_stateView=objj_msgSend(objj_msgSend(CPImageView,"alloc"),"initWithFrame:",CGRectMake(0,0,0,0));
objj_msgSend(_stateView,"setImageScaling:",CPScaleNone);
objj_msgSend(_16,"addSubview:",_stateView);
_imageAndTextView=objj_msgSend(objj_msgSend(_CPImageAndTextView,"alloc"),"initWithFrame:",CGRectMake(0,0,0,0));
objj_msgSend(_imageAndTextView,"setImagePosition:",CPImageLeft);
objj_msgSend(_imageAndTextView,"setTextShadowOffset:",CGSizeMake(0,1));
objj_msgSend(_16,"addSubview:",_imageAndTextView);
_keyEquivalentView=objj_msgSend(objj_msgSend(_CPImageAndTextView,"alloc"),"initWithFrame:",CGRectMake(0,0,0,0));
objj_msgSend(_keyEquivalentView,"setImagePosition:",CPNoImage);
objj_msgSend(_keyEquivalentView,"setTextShadowOffset:",CGSizeMake(0,1));
objj_msgSend(_keyEquivalentView,"setAutoresizingMask:",CPViewMinXMargin);
objj_msgSend(_16,"addSubview:",_keyEquivalentView);
_submenuIndicatorView=objj_msgSend(objj_msgSend(_CPMenuItemSubmenuIndicatorView,"alloc"),"initWithFrame:",CGRectMake(0,0,8,10));
objj_msgSend(_submenuIndicatorView,"setColor:",_8);
objj_msgSend(_submenuIndicatorView,"setAutoresizingMask:",CPViewMinXMargin);
objj_msgSend(_16,"addSubview:",_submenuIndicatorView);
objj_msgSend(_16,"setAutoresizingMask:",CPViewWidthSizable);
}
return _16;
}
}),new objj_method(sel_getUid("textColor"),function(_19,_1a){
with(_19){
if(!objj_msgSend(_menuItem,"isEnabled")){
return objj_msgSend(CPColor,"lightGrayColor");
}
return _textColor||objj_msgSend(CPColor,"colorWithCalibratedRed:green:blue:alpha:",70/255,69/255,69/255,1);
}
}),new objj_method(sel_getUid("textShadowColor"),function(_1b,_1c){
with(_1b){
if(!objj_msgSend(_menuItem,"isEnabled")){
return nil;
}
return _textShadowColor||objj_msgSend(CPColor,"colorWithWhite:alpha:",1,0.8);
}
}),new objj_method(sel_getUid("setFont:"),function(_1d,_1e,_1f){
with(_1d){
_font=_1f;
}
}),new objj_method(sel_getUid("update"),function(_20,_21){
with(_20){
var x=_1+objj_msgSend(_menuItem,"indentationLevel")*_4,_22=0,_23=objj_msgSend(objj_msgSend(_menuItem,"menu"),"showsStateColumn");
if(_23){
objj_msgSend(_stateView,"setHidden:",NO);
objj_msgSend(_stateView,"setImage:",_b[objj_msgSend(_menuItem,"state")]||nil);
x+=_3;
}else{
objj_msgSend(_stateView,"setHidden:",YES);
}
objj_msgSend(_imageAndTextView,"setFont:",objj_msgSend(_menuItem,"font")||_font);
objj_msgSend(_imageAndTextView,"setVerticalAlignment:",CPCenterVerticalTextAlignment);
objj_msgSend(_imageAndTextView,"setImage:",objj_msgSend(_menuItem,"image"));
objj_msgSend(_imageAndTextView,"setText:",objj_msgSend(_menuItem,"title"));
objj_msgSend(_imageAndTextView,"setTextColor:",objj_msgSend(_20,"textColor"));
objj_msgSend(_imageAndTextView,"setTextShadowColor:",objj_msgSend(_20,"textShadowColor"));
objj_msgSend(_imageAndTextView,"setTextShadowOffset:",CGSizeMake(0,1));
objj_msgSend(_imageAndTextView,"sizeToFit");
var _24=objj_msgSend(_imageAndTextView,"frame");
_24.origin.x=x;
x+=CGRectGetWidth(_24);
_22=MAX(_22,CGRectGetHeight(_24));
var _25=!!objj_msgSend(_menuItem,"keyEquivalent"),_26=objj_msgSend(_menuItem,"hasSubmenu");
if(_25||_26){
x+=_6;
}
if(_25){
objj_msgSend(_keyEquivalentView,"setFont:",objj_msgSend(_menuItem,"font")||_font);
objj_msgSend(_keyEquivalentView,"setVerticalAlignment:",CPCenterVerticalTextAlignment);
objj_msgSend(_keyEquivalentView,"setImage:",objj_msgSend(_menuItem,"image"));
objj_msgSend(_keyEquivalentView,"setText:",objj_msgSend(_menuItem,"keyEquivalentStringRepresentation"));
objj_msgSend(_keyEquivalentView,"setTextColor:",objj_msgSend(_20,"textColor"));
objj_msgSend(_keyEquivalentView,"setTextShadowColor:",objj_msgSend(_20,"textShadowColor"));
objj_msgSend(_keyEquivalentView,"setTextShadowOffset:",CGSizeMake(0,1));
objj_msgSend(_keyEquivalentView,"setFrameOrigin:",CGPointMake(x,_5));
objj_msgSend(_keyEquivalentView,"sizeToFit");
var _27=objj_msgSend(_keyEquivalentView,"frame");
_27.origin.x=x;
x+=CGRectGetWidth(_27);
_22=MAX(_22,CGRectGetHeight(_27));
if(_26){
x+=_6;
}
}else{
objj_msgSend(_keyEquivalentView,"setHidden:",YES);
}
if(_26){
objj_msgSend(_submenuIndicatorView,"setHidden:",NO);
var _28=objj_msgSend(_submenuIndicatorView,"frame");
_28.origin.x=x;
x+=CGRectGetWidth(_28);
_22=MAX(_22,CGRectGetHeight(_28));
}else{
objj_msgSend(_submenuIndicatorView,"setHidden:",YES);
}
_22+=2*_5;
_24.origin.y=FLOOR((_22-CGRectGetHeight(_24))/2);
objj_msgSend(_imageAndTextView,"setFrame:",_24);
if(_23){
objj_msgSend(_stateView,"setFrameSize:",CGSizeMake(_3,_22));
}
if(_25){
_27.origin.y=FLOOR((_22-CGRectGetHeight(_27))/2);
objj_msgSend(_keyEquivalentView,"setFrame:",_27);
}
if(_26){
_28.origin.y=FLOOR((_22-CGRectGetHeight(_28))/2);
objj_msgSend(_submenuIndicatorView,"setFrame:",_28);
}
_minSize=CGSizeMake(x+_2,_22);
objj_msgSend(_20,"setAutoresizesSubviews:",NO);
objj_msgSend(_20,"setFrameSize:",_minSize);
objj_msgSend(_20,"setAutoresizesSubviews:",YES);
}
}),new objj_method(sel_getUid("highlight:"),function(_29,_2a,_2b){
with(_29){
if(!objj_msgSend(_menuItem,"isEnabled")){
return;
}
if(_2b){
objj_msgSend(_29,"setBackgroundColor:",_9);
objj_msgSend(_imageAndTextView,"setImage:",objj_msgSend(_menuItem,"alternateImage")||objj_msgSend(_menuItem,"image"));
objj_msgSend(_imageAndTextView,"setTextColor:",objj_msgSend(CPColor,"whiteColor"));
objj_msgSend(_keyEquivalentView,"setTextColor:",objj_msgSend(CPColor,"whiteColor"));
objj_msgSend(_submenuIndicatorView,"setColor:",objj_msgSend(CPColor,"whiteColor"));
objj_msgSend(_imageAndTextView,"setTextShadowColor:",_a);
objj_msgSend(_keyEquivalentView,"setTextShadowColor:",_a);
}else{
objj_msgSend(_29,"setBackgroundColor:",nil);
objj_msgSend(_imageAndTextView,"setImage:",objj_msgSend(_menuItem,"image"));
objj_msgSend(_imageAndTextView,"setTextColor:",objj_msgSend(_29,"textColor"));
objj_msgSend(_keyEquivalentView,"setTextColor:",objj_msgSend(_29,"textColor"));
objj_msgSend(_submenuIndicatorView,"setColor:",_8);
objj_msgSend(_imageAndTextView,"setTextShadowColor:",objj_msgSend(_29,"textShadowColor"));
objj_msgSend(_keyEquivalentView,"setTextShadowColor:",objj_msgSend(_29,"textShadowColor"));
}
if(objj_msgSend(objj_msgSend(_menuItem,"menu"),"showsStateColumn")){
if(_2b){
objj_msgSend(_stateView,"setImage:",_c[objj_msgSend(_menuItem,"state")]||nil);
}else{
objj_msgSend(_stateView,"setImage:",_b[objj_msgSend(_menuItem,"state")]||nil);
}
}
}
})]);
class_addMethods(_e,[new objj_method(sel_getUid("initialize"),function(_2c,_2d){
with(_2c){
if(_2c!==objj_msgSend(_CPMenuItemStandardView,"class")){
return;
}
_8=objj_msgSend(CPColor,"grayColor");
_9=objj_msgSend(CPColor,"colorWithCalibratedRed:green:blue:alpha:",95/255,131/255,185/255,1);
_a=objj_msgSend(CPColor,"colorWithCalibratedRed:green:blue:alpha:",26/255,73/255,109/255,1);
var _2e=objj_msgSend(CPBundle,"bundleForClass:",_2c);
_b[CPOffState]=nil;
_c[CPOffState]=nil;
_b[CPOnState]=objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_2e,"pathForResource:","CPMenuItem/CPMenuItemOnState.png"),CGSizeMake(14,14));
_c[CPOnState]=objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_2e,"pathForResource:","CPMenuItem/CPMenuItemOnStateHighlighted.png"),CGSizeMake(14,14));
_b[CPMixedState]=nil;
_c[CPMixedState]=nil;
}
}),new objj_method(sel_getUid("view"),function(_2f,_30){
with(_2f){
return objj_msgSend(objj_msgSend(_2f,"alloc"),"init");
}
}),new objj_method(sel_getUid("_standardLeftMargin"),function(_31,_32){
with(_31){
return _1+_3;
}
})]);
var _d=objj_allocateClassPair(CPView,"_CPMenuItemSubmenuIndicatorView"),_e=_d.isa;
class_addIvars(_d,[new objj_ivar("_color")]);
objj_registerClassPair(_d);
class_addMethods(_d,[new objj_method(sel_getUid("setColor:"),function(_33,_34,_35){
with(_33){
if(_color===_35){
return;
}
_color=_35;
objj_msgSend(_33,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("drawRect:"),function(_36,_37,_38){
with(_36){
var _39=objj_msgSend(objj_msgSend(CPGraphicsContext,"currentContext"),"graphicsPort"),_3a=objj_msgSend(_36,"bounds");
CGContextBeginPath(_39);
CGContextMoveToPoint(_39,CGRectGetMinX(_3a),CGRectGetMinY(_3a));
CGContextAddLineToPoint(_39,CGRectGetMaxX(_3a),CGRectGetMidY(_3a));
CGContextAddLineToPoint(_39,CGRectGetMinX(_3a),CGRectGetMaxY(_3a));
CGContextClosePath(_39);
CGContextSetFillColor(_39,_color);
CGContextFillPath(_39);
}
})]);
p;17;_CPMenuItemView.jt;6366;@STATIC;1.0;I;18;AppKit/CPControl.ji;26;_CPMenuItemSeparatorView.ji;25;_CPMenuItemStandardView.ji;24;_CPMenuItemMenuBarView.jt;6234;
objj_executeFile("AppKit/CPControl.j",NO);
objj_executeFile("_CPMenuItemSeparatorView.j",YES);
objj_executeFile("_CPMenuItemStandardView.j",YES);
objj_executeFile("_CPMenuItemMenuBarView.j",YES);
var _1=3,_2=16,_3=14,_4=17,_5=4;
var _6=nil,_7=nil,_8=[],_9=[];
var _a=objj_allocateClassPair(CPView,"_CPMenuItemView"),_b=_a.isa;
class_addIvars(_a,[new objj_ivar("_menuItem"),new objj_ivar("_view"),new objj_ivar("_font"),new objj_ivar("_textColor"),new objj_ivar("_textShadowColor"),new objj_ivar("_minSize"),new objj_ivar("_isDirty"),new objj_ivar("_showsStateColumn"),new objj_ivar("_imageAndTextView"),new objj_ivar("_submenuView")]);
objj_registerClassPair(_a);
class_addMethods(_a,[new objj_method(sel_getUid("initWithFrame:forMenuItem:"),function(_c,_d,_e,_f){
with(_c){
_c=objj_msgSendSuper({receiver:_c,super_class:objj_getClass("_CPMenuItemView").super_class},"initWithFrame:",_e);
if(_c){
_menuItem=_f;
_showsStateColumn=YES;
_isDirty=YES;
objj_msgSend(_c,"setAutoresizingMask:",CPViewWidthSizable);
objj_msgSend(_c,"synchronizeWithMenuItem");
}
return _c;
}
}),new objj_method(sel_getUid("minSize"),function(_10,_11){
with(_10){
return _minSize;
}
}),new objj_method(sel_getUid("setDirty"),function(_12,_13){
with(_12){
_isDirty=YES;
}
}),new objj_method(sel_getUid("synchronizeWithMenuItem"),function(_14,_15){
with(_14){
var _16=objj_msgSend(_menuItem,"view");
if(objj_msgSend(_menuItem,"isSeparatorItem")){
if(!objj_msgSend(_view,"isKindOfClass:",objj_msgSend(_CPMenuItemSeparatorView,"class"))){
objj_msgSend(_view,"removeFromSuperview");
_view=objj_msgSend(_CPMenuItemSeparatorView,"view");
}
}else{
if(_16){
if(_view!==_16){
objj_msgSend(_view,"removeFromSuperview");
_view=_16;
}
}else{
if(objj_msgSend(_menuItem,"menu")==objj_msgSend(CPApp,"mainMenu")){
if(!objj_msgSend(_view,"isKindOfClass:",objj_msgSend(_CPMenuItemMenuBarView,"class"))){
objj_msgSend(_view,"removeFromSuperview");
_view=objj_msgSend(_CPMenuItemMenuBarView,"view");
}
objj_msgSend(_view,"setMenuItem:",_menuItem);
}else{
if(!objj_msgSend(_view,"isKindOfClass:",objj_msgSend(_CPMenuItemStandardView,"class"))){
objj_msgSend(_view,"removeFromSuperview");
_view=objj_msgSend(_CPMenuItemStandardView,"view");
}
objj_msgSend(_view,"setMenuItem:",_menuItem);
}
}
}
if(objj_msgSend(_view,"superview")!==_14){
objj_msgSend(_14,"addSubview:",_view);
}
if(objj_msgSend(_view,"respondsToSelector:",sel_getUid("update"))){
objj_msgSend(_view,"update");
}
_minSize=objj_msgSend(_view,"frame").size;
objj_msgSend(_14,"setAutoresizesSubviews:",NO);
objj_msgSend(_14,"setFrameSize:",_minSize);
objj_msgSend(_14,"setAutoresizesSubviews:",YES);
}
}),new objj_method(sel_getUid("setShowsStateColumn:"),function(_17,_18,_19){
with(_17){
_showsStateColumn=_19;
}
}),new objj_method(sel_getUid("highlight:"),function(_1a,_1b,_1c){
with(_1a){
if(objj_msgSend(_view,"respondsToSelector:",sel_getUid("highlight:"))){
objj_msgSend(_view,"highlight:",_1c);
}
}
}),new objj_method(sel_getUid("eventOnSubmenu:"),function(_1d,_1e,_1f){
with(_1d){
if(!objj_msgSend(_menuItem,"hasSubmenu")){
return NO;
}
return CGRectContainsPoint(objj_msgSend(_submenuView,"frame"),objj_msgSend(_1d,"convertPoint:fromView:",objj_msgSend(_1f,"locationInWindow"),nil));
}
}),new objj_method(sel_getUid("isHidden"),function(_20,_21){
with(_20){
return objj_msgSend(_menuItem,"isHidden");
}
}),new objj_method(sel_getUid("menuItem"),function(_22,_23){
with(_22){
return _menuItem;
}
}),new objj_method(sel_getUid("setFont:"),function(_24,_25,_26){
with(_24){
if(_font===_26){
return;
}
_font=_26;
if(objj_msgSend(_view,"respondsToSelector:",sel_getUid("setFont:"))){
objj_msgSend(_view,"setFont:",_26);
}
objj_msgSend(_24,"setDirty");
}
}),new objj_method(sel_getUid("setTextColor:"),function(_27,_28,_29){
with(_27){
if(_textColor==_29){
return;
}
_textColor=_29;
objj_msgSend(_imageAndTextView,"setTextColor:",objj_msgSend(_27,"textColor"));
objj_msgSend(_submenuView,"setColor:",objj_msgSend(_27,"textColor"));
}
}),new objj_method(sel_getUid("textColor"),function(_2a,_2b){
with(_2a){
return nil;
}
}),new objj_method(sel_getUid("setTextShadowColor:"),function(_2c,_2d,_2e){
with(_2c){
if(_textShadowColor==_2e){
return;
}
_textShadowColor=_2e;
objj_msgSend(_imageAndTextView,"setTextShadowColor:",objj_msgSend(_2c,"textShadowColor"));
}
}),new objj_method(sel_getUid("textShadowColor"),function(_2f,_30){
with(_2f){
return objj_msgSend(_menuItem,"isEnabled")?(_textShadowColor?_textShadowColor:objj_msgSend(CPColor,"colorWithWhite:alpha:",1,0.8)):objj_msgSend(CPColor,"colorWithWhite:alpha:",0.8,0.8);
}
})]);
class_addMethods(_b,[new objj_method(sel_getUid("initialize"),function(_31,_32){
with(_31){
if(_31!=objj_msgSend(_CPMenuItemView,"class")){
return;
}
_6=objj_msgSend(CPColor,"colorWithCalibratedRed:green:blue:alpha:",95/255,131/255,185/255,1);
_7=objj_msgSend(CPColor,"colorWithCalibratedRed:green:blue:alpha:",26/255,73/255,109/255,1);
var _33=objj_msgSend(CPBundle,"bundleForClass:",_31);
_8[CPOffState]=nil;
_9[CPOffState]=nil;
_8[CPOnState]=objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_33,"pathForResource:","CPMenuItem/CPMenuItemOnState.png"),CGSizeMake(14,14));
_9[CPOnState]=objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_33,"pathForResource:","CPMenuItem/CPMenuItemOnStateHighlighted.png"),CGSizeMake(14,14));
_8[CPMixedState]=nil;
_9[CPMixedState]=nil;
}
}),new objj_method(sel_getUid("leftMargin"),function(_34,_35){
with(_34){
return _1+_3;
}
})]);
var _a=objj_allocateClassPair(CPView,"_CPMenuItemArrowView"),_b=_a.isa;
class_addIvars(_a,[new objj_ivar("_color")]);
objj_registerClassPair(_a);
class_addMethods(_a,[new objj_method(sel_getUid("setColor:"),function(_36,_37,_38){
with(_36){
if(_color==_38){
return;
}
_color=_38;
objj_msgSend(_36,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("drawRect:"),function(_39,_3a,_3b){
with(_39){
var _3c=objj_msgSend(objj_msgSend(CPGraphicsContext,"currentContext"),"graphicsPort");
CGContextBeginPath(_3c);
CGContextMoveToPoint(_3c,1,4);
CGContextAddLineToPoint(_3c,9,4);
CGContextAddLineToPoint(_3c,5,8);
CGContextAddLineToPoint(_3c,1,4);
CGContextClosePath(_3c);
CGContextSetFillColor(_3c,_color);
CGContextFillPath(_3c);
}
})]);
p;12;CPMenuItem.jt;18168;@STATIC;1.0;I;20;Foundation/CPCoder.jI;21;Foundation/CPObject.jI;21;Foundation/CPString.ji;9;CPImage.ji;8;CPMenu.ji;8;CPView.ji;17;_CPMenuItemView.jt;18012;
objj_executeFile("Foundation/CPCoder.j",NO);
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("Foundation/CPString.j",NO);
objj_executeFile("CPImage.j",YES);
objj_executeFile("CPMenu.j",YES);
objj_executeFile("CPView.j",YES);
objj_executeFile("_CPMenuItemView.j",YES);
var _1=objj_msgSend(CPDictionary,"dictionary");
objj_msgSend(_1,"setObject:forKey:","",CPEscapeFunctionKey);
objj_msgSend(_1,"setObject:forKey:","",CPTabCharacter);
objj_msgSend(_1,"setObject:forKey:","",CPBackTabCharacter);
objj_msgSend(_1,"setObject:forKey:","",CPSpaceFunctionKey);
objj_msgSend(_1,"setObject:forKey:","",CPCarriageReturnCharacter);
objj_msgSend(_1,"setObject:forKey:","",CPBackspaceCharacter);
objj_msgSend(_1,"setObject:forKey:","",CPDeleteFunctionKey);
objj_msgSend(_1,"setObject:forKey:","",CPDeleteCharacter);
objj_msgSend(_1,"setObject:forKey:","",CPHomeFunctionKey);
objj_msgSend(_1,"setObject:forKey:","",CPEndFunctionKey);
objj_msgSend(_1,"setObject:forKey:","",CPPageUpFunctionKey);
objj_msgSend(_1,"setObject:forKey:","",CPPageDownFunctionKey);
objj_msgSend(_1,"setObject:forKey:","",CPUpArrowFunctionKey);
objj_msgSend(_1,"setObject:forKey:","",CPDownArrowFunctionKey);
objj_msgSend(_1,"setObject:forKey:","",CPLeftArrowFunctionKey);
objj_msgSend(_1,"setObject:forKey:","",CPRightArrowFunctionKey);
objj_msgSend(_1,"setObject:forKey:","",CPClearDisplayFunctionKey);
var _2=objj_allocateClassPair(CPObject,"CPMenuItem"),_3=_2.isa;
class_addIvars(_2,[new objj_ivar("_isSeparator"),new objj_ivar("_title"),new objj_ivar("_font"),new objj_ivar("_target"),new objj_ivar("_action"),new objj_ivar("_isEnabled"),new objj_ivar("_isHidden"),new objj_ivar("_tag"),new objj_ivar("_state"),new objj_ivar("_image"),new objj_ivar("_alternateImage"),new objj_ivar("_onStateImage"),new objj_ivar("_offStateImage"),new objj_ivar("_mixedStateImage"),new objj_ivar("_submenu"),new objj_ivar("_menu"),new objj_ivar("_keyEquivalent"),new objj_ivar("_keyEquivalentModifierMask"),new objj_ivar("_mnemonicLocation"),new objj_ivar("_isAlternate"),new objj_ivar("_indentationLevel"),new objj_ivar("_toolTip"),new objj_ivar("_representedObject"),new objj_ivar("_view"),new objj_ivar("_changeCount"),new objj_ivar("_menuItemView")]);
objj_registerClassPair(_2);
class_addMethods(_2,[new objj_method(sel_getUid("init"),function(_4,_5){
with(_4){
return objj_msgSend(_4,"initWithTitle:action:keyEquivalent:","",nil,nil);
}
}),new objj_method(sel_getUid("initWithTitle:action:keyEquivalent:"),function(_6,_7,_8,_9,_a){
with(_6){
_6=objj_msgSendSuper({receiver:_6,super_class:objj_getClass("CPMenuItem").super_class},"init");
if(_6){
_changeCount=0;
_isSeparator=NO;
_title=_8;
_action=_9;
_isEnabled=YES;
_isHidden=NO;
_tag=0;
_state=CPOffState;
_keyEquivalent=_a||"";
_keyEquivalentModifierMask=CPPlatformActionKeyMask;
_indentationLevel=0;
_mnemonicLocation=CPNotFound;
}
return _6;
}
}),new objj_method(sel_getUid("setEnabled:"),function(_b,_c,_d){
with(_b){
if(objj_msgSend(_menu,"autoenablesItems")){
return;
}
objj_msgSend(_b,"_setEnabled:",_d);
}
}),new objj_method(sel_getUid("_setEnabled:"),function(_e,_f,_10){
with(_e){
if(_isEnabled===_10){
return;
}
_isEnabled=!!_10;
objj_msgSend(_menuItemView,"setDirty");
objj_msgSend(_menu,"itemChanged:",_e);
}
}),new objj_method(sel_getUid("isEnabled"),function(_11,_12){
with(_11){
return _isEnabled;
}
}),new objj_method(sel_getUid("setHidden:"),function(_13,_14,_15){
with(_13){
if(_isHidden==_15){
return;
}
_isHidden=_15;
objj_msgSend(_menu,"itemChanged:",_13);
}
}),new objj_method(sel_getUid("isHidden"),function(_16,_17){
with(_16){
return _isHidden;
}
}),new objj_method(sel_getUid("isHiddenOrHasHiddenAncestor"),function(_18,_19){
with(_18){
if(_isHidden){
return YES;
}
var _1a=objj_msgSend(_menu,"supermenu");
if(objj_msgSend(objj_msgSend(_1a,"itemAtIndex:",objj_msgSend(_1a,"indexOfItemWithSubmenu:",_menu)),"isHiddenOrHasHiddenAncestor")){
return YES;
}
return NO;
}
}),new objj_method(sel_getUid("setTarget:"),function(_1b,_1c,_1d){
with(_1b){
_target=_1d;
}
}),new objj_method(sel_getUid("target"),function(_1e,_1f){
with(_1e){
return _target;
}
}),new objj_method(sel_getUid("setAction:"),function(_20,_21,_22){
with(_20){
_action=_22;
}
}),new objj_method(sel_getUid("action"),function(_23,_24){
with(_23){
return _action;
}
}),new objj_method(sel_getUid("setTitle:"),function(_25,_26,_27){
with(_25){
_mnemonicLocation=CPNotFound;
if(_title==_27){
return;
}
_title=_27;
objj_msgSend(_menuItemView,"setDirty");
objj_msgSend(_menu,"itemChanged:",_25);
}
}),new objj_method(sel_getUid("title"),function(_28,_29){
with(_28){
return _title;
}
}),new objj_method(sel_getUid("setTextColor:"),function(_2a,_2b,_2c){
with(_2a){
}
}),new objj_method(sel_getUid("setFont:"),function(_2d,_2e,_2f){
with(_2d){
if(_font==_2f){
return;
}
_font=_2f;
objj_msgSend(_menu,"itemChanged:",_2d);
objj_msgSend(_menuItemView,"setDirty");
}
}),new objj_method(sel_getUid("font"),function(_30,_31){
with(_30){
return _font;
}
}),new objj_method(sel_getUid("setTag:"),function(_32,_33,_34){
with(_32){
_tag=_34;
}
}),new objj_method(sel_getUid("tag"),function(_35,_36){
with(_35){
return _tag;
}
}),new objj_method(sel_getUid("setState:"),function(_37,_38,_39){
with(_37){
if(_state==_39){
return;
}
_state=_39;
objj_msgSend(_menu,"itemChanged:",_37);
objj_msgSend(_menuItemView,"setDirty");
}
}),new objj_method(sel_getUid("state"),function(_3a,_3b){
with(_3a){
return _state;
}
}),new objj_method(sel_getUid("setImage:"),function(_3c,_3d,_3e){
with(_3c){
if(_image==_3e){
return;
}
_image=_3e;
objj_msgSend(_menuItemView,"setDirty");
objj_msgSend(_menu,"itemChanged:",_3c);
}
}),new objj_method(sel_getUid("image"),function(_3f,_40){
with(_3f){
return _image;
}
}),new objj_method(sel_getUid("setAlternateImage:"),function(_41,_42,_43){
with(_41){
_alternateImage=_43;
}
}),new objj_method(sel_getUid("alternateImage"),function(_44,_45){
with(_44){
return _alternateImage;
}
}),new objj_method(sel_getUid("setOnStateImage:"),function(_46,_47,_48){
with(_46){
if(_onStateImage==_48){
return;
}
_onStateImage=_48;
objj_msgSend(_menu,"itemChanged:",_46);
}
}),new objj_method(sel_getUid("onStateImage"),function(_49,_4a){
with(_49){
return _onStateImage;
}
}),new objj_method(sel_getUid("setOffStateImage:"),function(_4b,_4c,_4d){
with(_4b){
if(_offStateImage==_4d){
return;
}
_offStateImage=_4d;
objj_msgSend(_menu,"itemChanged:",_4b);
}
}),new objj_method(sel_getUid("offStateImage"),function(_4e,_4f){
with(_4e){
return _offStateImage;
}
}),new objj_method(sel_getUid("setMixedStateImage:"),function(_50,_51,_52){
with(_50){
if(_mixedStateImage==_52){
return;
}
_mixedStateImage=_52;
objj_msgSend(_menu,"itemChanged:",_50);
}
}),new objj_method(sel_getUid("mixedStateImage"),function(_53,_54){
with(_53){
return _mixedStateImage;
}
}),new objj_method(sel_getUid("setSubmenu:"),function(_55,_56,_57){
with(_55){
if(_submenu===_57){
return;
}
var _58=objj_msgSend(_submenu,"supermenu");
if(_58){
objj_msgSend(CPException,"raise:reason:",CPInvalidArgumentException,"Can't add submenu \""+objj_msgSend(_57,"title")+"\" to item \""+objj_msgSend(_55,"title")+"\", because it is already submenu of \""+objj_msgSend(objj_msgSend(_57,"supermenu"),"title")+"\"");
}
_submenu=_57;
if(_submenu){
objj_msgSend(_submenu,"setSupermenu:",_menu);
objj_msgSend(_55,"setTarget:",_menu);
objj_msgSend(_55,"setAction:",sel_getUid("submenuAction:"));
}else{
objj_msgSend(_55,"setTarget:",nil);
objj_msgSend(_55,"setAction:",NULL);
}
objj_msgSend(_menuItemView,"setDirty");
objj_msgSend(_menu,"itemChanged:",_55);
}
}),new objj_method(sel_getUid("submenu"),function(_59,_5a){
with(_59){
return _submenu;
}
}),new objj_method(sel_getUid("hasSubmenu"),function(_5b,_5c){
with(_5b){
return _submenu?YES:NO;
}
}),new objj_method(sel_getUid("isSeparatorItem"),function(_5d,_5e){
with(_5d){
return _isSeparator;
}
}),new objj_method(sel_getUid("setMenu:"),function(_5f,_60,_61){
with(_5f){
_menu=_61;
}
}),new objj_method(sel_getUid("menu"),function(_62,_63){
with(_62){
return _menu;
}
}),new objj_method(sel_getUid("setKeyEquivalent:"),function(_64,_65,_66){
with(_64){
_keyEquivalent=_66||"";
}
}),new objj_method(sel_getUid("keyEquivalent"),function(_67,_68){
with(_67){
return _keyEquivalent;
}
}),new objj_method(sel_getUid("setKeyEquivalentModifierMask:"),function(_69,_6a,_6b){
with(_69){
_keyEquivalentModifierMask=_6b;
}
}),new objj_method(sel_getUid("keyEquivalentModifierMask"),function(_6c,_6d){
with(_6c){
return _keyEquivalentModifierMask;
}
}),new objj_method(sel_getUid("keyEquivalentStringRepresentation"),function(_6e,_6f){
with(_6e){
if(!objj_msgSend(_keyEquivalent,"length")){
return "";
}
var _70=_keyEquivalent.toUpperCase(),_71=_keyEquivalentModifierMask&CPShiftKeyMask||(_70===_keyEquivalent&&_keyEquivalent.toLowerCase()!==_keyEquivalent.toUpperCase());
if(objj_msgSend(_1,"objectForKey:",_70)){
_70=objj_msgSend(_1,"objectForKey:",_70);
}
if(CPBrowserIsOperatingSystem(CPMacOperatingSystem)){
if(_keyEquivalentModifierMask&CPCommandKeyMask){
_70=""+_70;
}
if(_71){
_70=""+_70;
}
if(_keyEquivalentModifierMask&CPAlternateKeyMask){
_70=""+_70;
}
if(_keyEquivalentModifierMask&CPControlKeyMask){
_70=""+_70;
}
}else{
if(_71){
_70="Shift-"+_70;
}
if(_keyEquivalentModifierMask&CPAlternateKeyMask){
_70="Alt-"+_70;
}
if(_keyEquivalentModifierMask&CPControlKeyMask||_keyEquivalentModifierMask&CPCommandKeyMask){
_70="Ctrl-"+_70;
}
}
return _70;
}
}),new objj_method(sel_getUid("setMnemonicLocation:"),function(_72,_73,_74){
with(_72){
_mnemonicLocation=_74;
}
}),new objj_method(sel_getUid("mnemonicLocation"),function(_75,_76){
with(_75){
return _mnemonicLocation;
}
}),new objj_method(sel_getUid("setTitleWithMnemonicLocation:"),function(_77,_78,_79){
with(_77){
var _7a=objj_msgSend(_79,"rangeOfString:","&").location;
if(_7a==CPNotFound){
objj_msgSend(_77,"setTitle:",_79);
}else{
objj_msgSend(_77,"setTitle:",objj_msgSend(_79,"substringToIndex:",_7a)+objj_msgSend(_79,"substringFromIndex:",_7a+1));
objj_msgSend(_77,"setMnemonicLocation:",_7a);
}
}
}),new objj_method(sel_getUid("mnemonic"),function(_7b,_7c){
with(_7b){
return _mnemonicLocation==CPNotFound?"":objj_msgSend(_title,"characterAtIndex:",_mnemonicLocation);
}
}),new objj_method(sel_getUid("setAlternate:"),function(_7d,_7e,_7f){
with(_7d){
_isAlternate=_7f;
}
}),new objj_method(sel_getUid("isAlternate"),function(_80,_81){
with(_80){
return _isAlternate;
}
}),new objj_method(sel_getUid("setIndentationLevel:"),function(_82,_83,_84){
with(_82){
if(_84<0){
objj_msgSend(CPException,"raise:reason:",CPInvalidArgumentException,"setIndentationLevel: argument must be greater than or equal to 0.");
}
_indentationLevel=MIN(15,_84);
}
}),new objj_method(sel_getUid("indentationLevel"),function(_85,_86){
with(_85){
return _indentationLevel;
}
}),new objj_method(sel_getUid("setToolTip:"),function(_87,_88,_89){
with(_87){
_toolTip=_89;
}
}),new objj_method(sel_getUid("toolTip"),function(_8a,_8b){
with(_8a){
return _toolTip;
}
}),new objj_method(sel_getUid("setRepresentedObject:"),function(_8c,_8d,_8e){
with(_8c){
_representedObject=_8e;
}
}),new objj_method(sel_getUid("representedObject"),function(_8f,_90){
with(_8f){
return _representedObject;
}
}),new objj_method(sel_getUid("setView:"),function(_91,_92,_93){
with(_91){
if(_view===_93){
return;
}
_view=_93;
objj_msgSend(_menuItemView,"setDirty");
objj_msgSend(_menu,"itemChanged:",_91);
}
}),new objj_method(sel_getUid("view"),function(_94,_95){
with(_94){
return _view;
}
}),new objj_method(sel_getUid("isHighlighted"),function(_96,_97){
with(_96){
return objj_msgSend(objj_msgSend(_96,"menu"),"highlightedItem")==_96;
}
}),new objj_method(sel_getUid("copy"),function(_98,_99){
with(_98){
var _9a=objj_msgSend(objj_msgSend(CPMenuItem,"alloc"),"init");
_9a._isSeparator=_isSeparator;
objj_msgSend(_9a,"setTitle:",_title);
objj_msgSend(_9a,"setFont:",_font);
objj_msgSend(_9a,"setTarget:",_target);
objj_msgSend(_9a,"setAction:",_action);
objj_msgSend(_9a,"setEnabled:",_isEnabled);
objj_msgSend(_9a,"setHidden:",_isHidden);
objj_msgSend(_9a,"setTag:",_tag);
objj_msgSend(_9a,"setState:",_state);
objj_msgSend(_9a,"setImage:",_image);
objj_msgSend(_9a,"setAlternateImage:",_alternateImage);
objj_msgSend(_9a,"setOnStateImage:",_onStateImage);
objj_msgSend(_9a,"setOffStateImage:",_offStateImage);
objj_msgSend(_9a,"setMixedStateImage:",_mixedStateImage);
objj_msgSend(_9a,"setKeyEquivalent:",_keyEquivalent);
objj_msgSend(_9a,"setKeyEquivalentModifierMask:",_keyEquivalentModifierMask);
objj_msgSend(_9a,"setMnemonicLocation:",_mnemonicLocation);
objj_msgSend(_9a,"setAlternate:",_isAlternate);
objj_msgSend(_9a,"setIndentationLevel:",_indentationLevel);
objj_msgSend(_9a,"setToolTip:",_toolTip);
objj_msgSend(_9a,"setRepresentedObject:",_representedObject);
return _9a;
}
}),new objj_method(sel_getUid("mutableCopy"),function(_9b,_9c){
with(_9b){
return objj_msgSend(_9b,"copy");
}
}),new objj_method(sel_getUid("_menuItemView"),function(_9d,_9e){
with(_9d){
if(!_menuItemView){
_menuItemView=objj_msgSend(objj_msgSend(_CPMenuItemView,"alloc"),"initWithFrame:forMenuItem:",CGRectMakeZero(),_9d);
}
return _menuItemView;
}
}),new objj_method(sel_getUid("_isSelectable"),function(_9f,_a0){
with(_9f){
return !objj_msgSend(_9f,"submenu")||objj_msgSend(_9f,"action")!==sel_getUid("submenuAction:")||objj_msgSend(_9f,"target")!==objj_msgSend(_9f,"menu");
}
}),new objj_method(sel_getUid("_isMenuBarButton"),function(_a1,_a2){
with(_a1){
return !objj_msgSend(_a1,"submenu")&&objj_msgSend(_a1,"menu")===objj_msgSend(CPApp,"mainMenu");
}
}),new objj_method(sel_getUid("description"),function(_a3,_a4){
with(_a3){
return objj_msgSendSuper({receiver:_a3,super_class:objj_getClass("CPMenuItem").super_class},"description")+" target: "+objj_msgSend(_a3,"target")+" action: "+CPStringFromSelector(objj_msgSend(_a3,"action"));
}
})]);
class_addMethods(_3,[new objj_method(sel_getUid("separatorItem"),function(_a5,_a6){
with(_a5){
var _a7=objj_msgSend(objj_msgSend(_a5,"alloc"),"initWithTitle:action:keyEquivalent:","",nil,nil);
_a7._isSeparator=YES;
return _a7;
}
})]);
var _a8="CPMenuItemIsSeparatorKey",_a9="CPMenuItemTitleKey",_aa="CPMenuItemTargetKey",_ab="CPMenuItemActionKey",_ac="CPMenuItemIsEnabledKey",_ad="CPMenuItemIsHiddenKey",_ae="CPMenuItemTagKey",_af="CPMenuItemStateKey",_b0="CPMenuItemImageKey",_b1="CPMenuItemAlternateImageKey",_b2="CPMenuItemSubmenuKey",_b3="CPMenuItemMenuKey",_b4="CPMenuItemKeyEquivalentKey",_b5="CPMenuItemKeyEquivalentModifierMaskKey",_b6="CPMenuItemIndentationLevelKey",_b7="CPMenuItemRepresentedObjectKey",_b8="CPMenuItemViewKey";
var _2=objj_getClass("CPMenuItem");
if(!_2){
throw new SyntaxError("*** Could not find definition for class \"CPMenuItem\"");
}
var _3=_2.isa;
class_addMethods(_2,[new objj_method(sel_getUid("initWithCoder:"),function(_b9,_ba,_bb){
with(_b9){
_b9=objj_msgSendSuper({receiver:_b9,super_class:objj_getClass("CPMenuItem").super_class},"init");
if(_b9){
_changeCount=0;
_isSeparator=objj_msgSend(_bb,"containsValueForKey:",_a8)&&objj_msgSend(_bb,"decodeBoolForKey:",_a8);
_title=objj_msgSend(_bb,"decodeObjectForKey:",_a9);
_target=objj_msgSend(_bb,"decodeObjectForKey:",_aa);
_action=objj_msgSend(_bb,"decodeObjectForKey:",_ab);
_isEnabled=objj_msgSend(_bb,"containsValueForKey:",(_ac))?objj_msgSend(_bb,"decodeObjectForKey:",(_ac)):(YES);
_isHidden=objj_msgSend(_bb,"containsValueForKey:",(_ad))?objj_msgSend(_bb,"decodeObjectForKey:",(_ad)):(NO);
_tag=objj_msgSend(_bb,"containsValueForKey:",(_ae))?objj_msgSend(_bb,"decodeObjectForKey:",(_ae)):(0);
_state=objj_msgSend(_bb,"containsValueForKey:",(_af))?objj_msgSend(_bb,"decodeObjectForKey:",(_af)):(CPOffState);
_image=objj_msgSend(_bb,"containsValueForKey:",(_b0))?objj_msgSend(_bb,"decodeObjectForKey:",(_b0)):(nil);
_alternateImage=objj_msgSend(_bb,"containsValueForKey:",(_b1))?objj_msgSend(_bb,"decodeObjectForKey:",(_b1)):(nil);
_menu=objj_msgSend(_bb,"containsValueForKey:",(_b3))?objj_msgSend(_bb,"decodeObjectForKey:",(_b3)):(nil);
objj_msgSend(_b9,"setSubmenu:",objj_msgSend(_bb,"containsValueForKey:",(_b2))?objj_msgSend(_bb,"decodeObjectForKey:",(_b2)):(nil));
_keyEquivalent=objj_msgSend(_bb,"decodeObjectForKey:",_b4)||"";
_keyEquivalentModifierMask=objj_msgSend(_bb,"decodeObjectForKey:",_b5)||0;
objj_msgSend(_b9,"setIndentationLevel:",objj_msgSend(_bb,"decodeIntForKey:",_b6)||0);
_representedObject=objj_msgSend(_bb,"containsValueForKey:",(_b7))?objj_msgSend(_bb,"decodeObjectForKey:",(_b7)):(nil);
_view=objj_msgSend(_bb,"containsValueForKey:",(_b8))?objj_msgSend(_bb,"decodeObjectForKey:",(_b8)):(nil);
}
return _b9;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_bc,_bd,_be){
with(_bc){
if(_isSeparator){
objj_msgSend(_be,"encodeBool:forKey:",_isSeparator,_a8);
}
objj_msgSend(_be,"encodeObject:forKey:",_title,_a9);
objj_msgSend(_be,"encodeObject:forKey:",_target,_aa);
objj_msgSend(_be,"encodeObject:forKey:",_action,_ab);
if((_isEnabled)!==(YES)){
objj_msgSend(_be,"encodeObject:forKey:",(_isEnabled),(_ac));
}
if((_isHidden)!==(NO)){
objj_msgSend(_be,"encodeObject:forKey:",(_isHidden),(_ad));
}
if((_tag)!==(0)){
objj_msgSend(_be,"encodeObject:forKey:",(_tag),(_ae));
}
if((_state)!==(CPOffState)){
objj_msgSend(_be,"encodeObject:forKey:",(_state),(_af));
}
if((_image)!==(nil)){
objj_msgSend(_be,"encodeObject:forKey:",(_image),(_b0));
}
if((_alternateImage)!==(nil)){
objj_msgSend(_be,"encodeObject:forKey:",(_alternateImage),(_b1));
}
if((_submenu)!==(nil)){
objj_msgSend(_be,"encodeObject:forKey:",(_submenu),(_b2));
}
if((_menu)!==(nil)){
objj_msgSend(_be,"encodeObject:forKey:",(_menu),(_b3));
}
if(_keyEquivalent&&_keyEquivalent.length){
objj_msgSend(_be,"encodeObject:forKey:",_keyEquivalent,_b4);
}
if(_keyEquivalentModifierMask){
objj_msgSend(_be,"encodeObject:forKey:",_keyEquivalentModifierMask,_b5);
}
if(_indentationLevel>0){
objj_msgSend(_be,"encodeInt:forKey:",_indentationLevel,_b6);
}
if((_representedObject)!==(nil)){
objj_msgSend(_be,"encodeObject:forKey:",(_representedObject),(_b7));
}
if((_view)!==(nil)){
objj_msgSend(_be,"encodeObject:forKey:",(_view),(_b8));
}
}
})]);
p;31;_CPBorderlessBridgeWindowView.jt;2040;@STATIC;1.0;i;15;_CPWindowView.jt;2001;
objj_executeFile("_CPWindowView.j",YES);
var _1=nil;
var _2=objj_allocateClassPair(_CPWindowView,"_CPBorderlessBridgeWindowView"),_3=_2.isa;
class_addIvars(_2,[new objj_ivar("_toolbarBackgroundView")]);
objj_registerClassPair(_2);
class_addMethods(_2,[new objj_method(sel_getUid("setShowsResizeIndicator:"),function(_4,_5,_6){
with(_4){
}
}),new objj_method(sel_getUid("tile"),function(_7,_8){
with(_7){
objj_msgSendSuper({receiver:_7,super_class:objj_getClass("_CPBorderlessBridgeWindowView").super_class},"tile");
var _9=objj_msgSend(_7,"window"),_a=objj_msgSend(_7,"bounds");
objj_msgSend(objj_msgSend(_9,"contentView"),"setFrame:",CGRectMake(0,objj_msgSend(_7,"toolbarMaxY"),CGRectGetWidth(_a),CGRectGetHeight(_a)-objj_msgSend(_7,"toolbarMaxY")));
if(!objj_msgSend(objj_msgSend(_9,"toolbar"),"isVisible")){
objj_msgSend(_toolbarBackgroundView,"removeFromSuperview");
_toolbarBackgroundView=nil;
return;
}
if(!_toolbarBackgroundView){
_toolbarBackgroundView=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",CGRectMakeZero());
objj_msgSend(_toolbarBackgroundView,"setBackgroundColor:",objj_msgSend(objj_msgSend(_7,"class"),"toolbarBackgroundColor"));
objj_msgSend(_toolbarBackgroundView,"setAutoresizingMask:",CPViewWidthSizable);
objj_msgSend(_7,"addSubview:positioned:relativeTo:",_toolbarBackgroundView,CPWindowBelow,nil);
}
var _b=CGRectMakeZero(),_c=objj_msgSend(_7,"toolbarOffset");
_b.origin=CGPointMake(_c.width,_c.height);
_b.size=objj_msgSend(_toolbarView,"frame").size;
objj_msgSend(_toolbarBackgroundView,"setFrame:",_b);
}
})]);
class_addMethods(_3,[new objj_method(sel_getUid("toolbarBackgroundColor"),function(_d,_e){
with(_d){
if(!_1){
_1=objj_msgSend(CPColor,"colorWithPatternImage:",objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(objj_msgSend(CPBundle,"bundleForClass:",objj_msgSend(_CPBorderlessBridgeWindowView,"class")),"pathForResource:","_CPToolbarView/_CPToolbarViewBackground.png"),CGSizeMake(1,59)));
}
return _1;
}
})]);
p;25;_CPBorderlessWindowView.jt;190;@STATIC;1.0;i;15;_CPWindowView.jt;152;
objj_executeFile("_CPWindowView.j",YES);
var _1=objj_allocateClassPair(_CPWindowView,"_CPBorderlessWindowView"),_2=_1.isa;
objj_registerClassPair(_1);
p;23;_CPDocModalWindowView.jt;1973;@STATIC;1.0;i;15;_CPWindowView.jt;1934;
objj_executeFile("_CPWindowView.j",YES);
var _1=nil;
var _2=objj_allocateClassPair(_CPWindowView,"_CPDocModalWindowView"),_3=_2.isa;
class_addIvars(_2,[new objj_ivar("_bodyView"),new objj_ivar("_shadowView")]);
objj_registerClassPair(_2);
class_addMethods(_2,[new objj_method(sel_getUid("initWithFrame:styleMask:"),function(_4,_5,_6,_7){
with(_4){
_4=objj_msgSendSuper({receiver:_4,super_class:objj_getClass("_CPDocModalWindowView").super_class},"initWithFrame:styleMask:",_6,_7);
if(_4){
var _8=objj_msgSend(_4,"class"),_9=objj_msgSend(_4,"bounds");
_bodyView=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",{origin:{x:0,y:0},size:{width:(_9.size.width),height:(_9.size.height)}});
objj_msgSend(_bodyView,"setAutoresizingMask:",CPViewWidthSizable|CPViewHeightSizable);
objj_msgSend(_bodyView,"setBackgroundColor:",objj_msgSend(_8,"bodyBackgroundColor"));
objj_msgSend(_bodyView,"setHitTests:",NO);
objj_msgSend(_4,"addSubview:",_bodyView);
var _a=objj_msgSend(CPBundle,"bundleForClass:",objj_msgSend(CPWindow,"class"));
_shadowView=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",CGRectMake(0,0,(_9.size.width),8));
objj_msgSend(_shadowView,"setAutoresizingMask:",CPViewWidthSizable);
objj_msgSend(_shadowView,"setBackgroundColor:",objj_msgSend(CPColor,"colorWithPatternImage:",objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_a,"pathForResource:","CPWindow/CPWindowAttachedSheetShadow.png"),CGSizeMake(9,8))));
objj_msgSend(_4,"addSubview:",_shadowView);
}
return _4;
}
}),new objj_method(sel_getUid("contentRectForFrameRect:"),function(_b,_c,_d){
with(_b){
return _d;
}
}),new objj_method(sel_getUid("frameRectForContentRect:"),function(_e,_f,_10){
with(_e){
return _10;
}
})]);
class_addMethods(_3,[new objj_method(sel_getUid("bodyBackgroundColor"),function(_11,_12){
with(_11){
if(!_1){
_1=objj_msgSend(CPColor,"colorWithWhite:alpha:",0.96,0.9);
}
return _1;
}
})]);
p;18;_CPHUDWindowView.jt;7018;@STATIC;1.0;i;13;CPTextField.jt;6981;
objj_executeFile("CPTextField.j",YES);
var _1=nil,_2=nil;
var _3=26;
var _4=objj_allocateClassPair(_CPWindowView,"_CPHUDWindowView"),_5=_4.isa;
class_addIvars(_4,[new objj_ivar("_toolbarView"),new objj_ivar("_titleField"),new objj_ivar("_closeButton")]);
objj_registerClassPair(_4);
class_addMethods(_4,[new objj_method(sel_getUid("contentRectForFrameRect:"),function(_6,_7,_8){
with(_6){
var _9=objj_msgSend(objj_msgSend(_6,"class"),"contentRectForFrameRect:",_8);
if(objj_msgSend(objj_msgSend(objj_msgSend(_6,"window"),"toolbar"),"isVisible")){
toolbarHeight=CGRectGetHeight(objj_msgSend(objj_msgSend(_6,"toolbarView"),"frame"));
_9.origin.y+=toolbarHeight;
_9.size.height-=toolbarHeight;
}
return _9;
}
}),new objj_method(sel_getUid("frameRectForContentRect:"),function(_a,_b,_c){
with(_a){
var _d=objj_msgSend(objj_msgSend(_a,"class"),"frameRectForContentRect:",_c);
if(objj_msgSend(objj_msgSend(objj_msgSend(_a,"window"),"toolbar"),"isVisible")){
toolbarHeight=CGRectGetHeight(objj_msgSend(objj_msgSend(_a,"toolbarView"),"frame"));
_d.origin.y-=toolbarHeight;
_d.size.height+=toolbarHeight;
}
return _d;
}
}),new objj_method(sel_getUid("initWithFrame:styleMask:"),function(_e,_f,_10,_11){
with(_e){
_e=objj_msgSendSuper({receiver:_e,super_class:objj_getClass("_CPHUDWindowView").super_class},"initWithFrame:styleMask:",_10,_11);
if(_e){
var _12=objj_msgSend(_e,"bounds");
objj_msgSend(_e,"setBackgroundColor:",_1);
_titleField=objj_msgSend(objj_msgSend(CPTextField,"alloc"),"initWithFrame:",CGRectMakeZero());
objj_msgSend(_titleField,"setHitTests:",NO);
objj_msgSend(_titleField,"setFont:",objj_msgSend(CPFont,"systemFontOfSize:",11));
objj_msgSend(_titleField,"setTextColor:",objj_msgSend(CPColor,"whiteColor"));
objj_msgSend(_titleField,"setTextShadowColor:",objj_msgSend(CPColor,"blackColor"));
objj_msgSend(_titleField,"setTextShadowOffset:",CGSizeMake(0,1));
objj_msgSend(_titleField,"setAutoresizingMask:",CPViewWidthSizable);
objj_msgSend(_titleField,"setLineBreakMode:",CPLineBreakByTruncatingTail);
objj_msgSend(_titleField,"setAlignment:",CPCenterTextAlignment);
objj_msgSend(_titleField,"setStringValue:","Untitled");
objj_msgSend(_titleField,"sizeToFit");
objj_msgSend(_titleField,"setAutoresizingMask:",CPViewWidthSizable);
objj_msgSend(_titleField,"setStringValue:","");
objj_msgSend(_titleField,"setFrame:",CGRectMake(20,3,CGRectGetWidth(objj_msgSend(_e,"bounds"))-40,CGRectGetHeight(objj_msgSend(_titleField,"frame"))));
objj_msgSend(_e,"addSubview:",_titleField);
if(_styleMask&CPClosableWindowMask){
var _13=objj_msgSend(_CPHUDWindowViewCloseImage,"size");
_closeButton=objj_msgSend(objj_msgSend(CPButton,"alloc"),"initWithFrame:",CGRectMake(8,5,_13.width,_13.height));
objj_msgSend(_closeButton,"setBordered:",NO);
objj_msgSend(_closeButton,"setImage:",_CPHUDWindowViewCloseImage);
objj_msgSend(_closeButton,"setAlternateImage:",_CPHUDWindowViewCloseActiveImage);
objj_msgSend(_e,"addSubview:",_closeButton);
}
objj_msgSend(_e,"setResizeIndicatorOffset:",CGSizeMake(5,5));
}
return _e;
}
}),new objj_method(sel_getUid("viewDidMoveToWindow"),function(_14,_15){
with(_14){
objj_msgSend(_closeButton,"setTarget:",objj_msgSend(_14,"window"));
objj_msgSend(_closeButton,"setAction:",sel_getUid("performClose:"));
}
}),new objj_method(sel_getUid("setTitle:"),function(_16,_17,_18){
with(_16){
objj_msgSend(_titleField,"setStringValue:",_18);
}
}),new objj_method(sel_getUid("toolbarView"),function(_19,_1a){
with(_19){
return _toolbarView;
}
}),new objj_method(sel_getUid("toolbarLabelColor"),function(_1b,_1c){
with(_1b){
return objj_msgSend(CPColor,"whiteColor");
}
}),new objj_method(sel_getUid("toolbarLabelShadowColor"),function(_1d,_1e){
with(_1d){
return objj_msgSend(CPColor,"blackColor");
}
}),new objj_method(sel_getUid("toolbarOffset"),function(_1f,_20){
with(_1f){
return CGSizeMake(0,_3);
}
}),new objj_method(sel_getUid("tile"),function(_21,_22){
with(_21){
objj_msgSendSuper({receiver:_21,super_class:objj_getClass("_CPHUDWindowView").super_class},"tile");
var _23=objj_msgSend(_21,"window"),_24=objj_msgSend(_21,"bounds"),_25=CGRectGetWidth(_24);
objj_msgSend(_titleField,"setFrame:",CGRectMake(20,3,_25-40,CGRectGetHeight(objj_msgSend(_titleField,"frame"))));
var _26=objj_msgSend(_21,"toolbarMaxY");
objj_msgSend(objj_msgSend(_23,"contentView"),"setFrameOrigin:",CGPointMake(0,_26,_25,CGRectGetHeight(_24)-_26));
}
})]);
class_addMethods(_5,[new objj_method(sel_getUid("initialize"),function(_27,_28){
with(_27){
if(_27!=objj_msgSend(_CPHUDWindowView,"class")){
return;
}
var _29=objj_msgSend(CPBundle,"bundleForClass:",_27);
_1=objj_msgSend(CPColor,"colorWithPatternImage:",objj_msgSend(objj_msgSend(CPNinePartImage,"alloc"),"initWithImageSlices:",[objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_29,"pathForResource:","CPWindow/HUD/CPWindowHUDBackground0.png"),CPSizeMake(7,37)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_29,"pathForResource:","CPWindow/HUD/CPWindowHUDBackground1.png"),CPSizeMake(1,37)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_29,"pathForResource:","CPWindow/HUD/CPWindowHUDBackground2.png"),CPSizeMake(7,37)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_29,"pathForResource:","CPWindow/HUD/CPWindowHUDBackground3.png"),CPSizeMake(7,1)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_29,"pathForResource:","CPWindow/HUD/CPWindowHUDBackground4.png"),CPSizeMake(2,2)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_29,"pathForResource:","CPWindow/HUD/CPWindowHUDBackground5.png"),CPSizeMake(7,1)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_29,"pathForResource:","CPWindow/HUD/CPWindowHUDBackground6.png"),CPSizeMake(7,3)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_29,"pathForResource:","CPWindow/HUD/CPWindowHUDBackground7.png"),CPSizeMake(1,3)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_29,"pathForResource:","CPWindow/HUD/CPWindowHUDBackground8.png"),CPSizeMake(7,3))]));
_CPHUDWindowViewCloseImage=objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_29,"pathForResource:","HUDTheme/WindowClose.png"),CPSizeMake(18,18));
_CPHUDWindowViewCloseActiveImage=objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_29,"pathForResource:","HUDTheme/WindowCloseActive.png"),CPSizeMake(18,18));
}
}),new objj_method(sel_getUid("contentRectForFrameRect:"),function(_2a,_2b,_2c){
with(_2a){
var _2d=CGRectMakeCopy(_2c),_2e=_3;
_2d.origin.y+=_2e;
_2d.size.height-=_2e;
return _2d;
}
}),new objj_method(sel_getUid("frameRectForContentRect:"),function(_2f,_30,_31){
with(_2f){
var _32=CGRectMakeCopy(_31),_33=_3;
_32.origin.y-=_33;
_32.size.height+=_33;
return _32;
}
})]);
p;23;_CPStandardWindowView.jt;11876;@STATIC;1.0;i;13;CPTextField.ji;15;_CPWindowView.jt;11818;
objj_executeFile("CPTextField.j",YES);
objj_executeFile("_CPWindowView.j",YES);
var _1=41;
var _2=nil,_3=nil;
var _4=objj_allocateClassPair(CPView,"_CPTexturedWindowHeadView"),_5=_4.isa;
class_addIvars(_4,[new objj_ivar("_gradientView"),new objj_ivar("_solidView"),new objj_ivar("_dividerView")]);
objj_registerClassPair(_4);
class_addMethods(_4,[new objj_method(sel_getUid("initWithFrame:"),function(_6,_7,_8){
with(_6){
_6=objj_msgSendSuper({receiver:_6,super_class:objj_getClass("_CPTexturedWindowHeadView").super_class},"initWithFrame:",_8);
if(_6){
var _9=objj_msgSend(_6,"class"),_a=objj_msgSend(_6,"bounds");
_gradientView=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",CGRectMake(0,0,CGRectGetWidth(_a),_1));
objj_msgSend(_gradientView,"setBackgroundColor:",objj_msgSend(_9,"gradientColor"));
objj_msgSend(_6,"addSubview:",_gradientView);
_solidView=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",CGRectMake(0,_1,CGRectGetWidth(_a),CGRectGetHeight(_a)-_1));
objj_msgSend(_solidView,"setBackgroundColor:",objj_msgSend(_9,"solidColor"));
objj_msgSend(_6,"addSubview:",_solidView);
}
return _6;
}
}),new objj_method(sel_getUid("resizeSubviewsWithOldSize:"),function(_b,_c,_d){
with(_b){
var _e=objj_msgSend(_b,"bounds");
objj_msgSend(_gradientView,"setFrameSize:",CGSizeMake(CGRectGetWidth(_e),_1));
objj_msgSend(_solidView,"setFrameSize:",CGSizeMake(CGRectGetWidth(_e),CGRectGetHeight(_e)-_1));
}
})]);
class_addMethods(_5,[new objj_method(sel_getUid("gradientColor"),function(_f,_10){
with(_f){
if(!_2){
var _11=objj_msgSend(CPBundle,"bundleForClass:",objj_msgSend(_CPWindowView,"class"));
_2=objj_msgSend(CPColor,"colorWithPatternImage:",objj_msgSend(objj_msgSend(CPThreePartImage,"alloc"),"initWithImageSlices:isVertical:",[objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_11,"pathForResource:","CPWindow/Standard/CPWindowStandardTop0.png"),CGSizeMake(6,41)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_11,"pathForResource:","CPWindow/Standard/CPWindowStandardTop1.png"),CGSizeMake(1,41)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_11,"pathForResource:","CPWindow/Standard/CPWindowStandardTop2.png"),CGSizeMake(6,41))],NO));
}
return _2;
}
}),new objj_method(sel_getUid("solidColor"),function(_12,_13){
with(_12){
if(!_3){
_3=objj_msgSend(CPColor,"colorWithCalibratedRed:green:blue:alpha:",195/255,195/255,195/255,1);
}
return _3;
}
})]);
var _14=nil,_15=nil,_16=nil,_17=nil,_18=nil,_19=nil,_1a=nil,_1b=nil,_1c=nil;
var _1d=41,_1e=25;
var _4=objj_allocateClassPair(_CPWindowView,"_CPStandardWindowView"),_5=_4.isa;
class_addIvars(_4,[new objj_ivar("_headView"),new objj_ivar("_dividerView"),new objj_ivar("_bodyView"),new objj_ivar("_toolbarView"),new objj_ivar("_titleField"),new objj_ivar("_closeButton"),new objj_ivar("_minimizeButton"),new objj_ivar("_isDocumentEdited")]);
objj_registerClassPair(_4);
class_addMethods(_4,[new objj_method(sel_getUid("contentRectForFrameRect:"),function(_1f,_20,_21){
with(_1f){
var _22=objj_msgSend(objj_msgSend(_1f,"class"),"contentRectForFrameRect:",_21),_23=objj_msgSend(objj_msgSend(_1f,"window"),"toolbar");
if(objj_msgSend(_23,"isVisible")){
toolbarHeight=CGRectGetHeight(objj_msgSend(objj_msgSend(_23,"_toolbarView"),"frame"));
_22.origin.y+=toolbarHeight;
_22.size.height-=toolbarHeight;
}
return _22;
}
}),new objj_method(sel_getUid("frameRectForContentRect:"),function(_24,_25,_26){
with(_24){
var _27=objj_msgSend(objj_msgSend(_24,"class"),"frameRectForContentRect:",_26),_28=objj_msgSend(objj_msgSend(_24,"window"),"toolbar");
if(objj_msgSend(_28,"isVisible")){
toolbarHeight=CGRectGetHeight(objj_msgSend(objj_msgSend(_28,"_toolbarView"),"frame"));
_27.origin.y-=toolbarHeight;
_27.size.height+=toolbarHeight;
}
return _27;
}
}),new objj_method(sel_getUid("initWithFrame:styleMask:"),function(_29,_2a,_2b,_2c){
with(_29){
_29=objj_msgSendSuper({receiver:_29,super_class:objj_getClass("_CPStandardWindowView").super_class},"initWithFrame:styleMask:",_2b,_2c);
if(_29){
var _2d=objj_msgSend(_29,"class"),_2e=objj_msgSend(_29,"bounds");
_headView=objj_msgSend(objj_msgSend(_CPTexturedWindowHeadView,"alloc"),"initWithFrame:",CGRectMake(0,0,CGRectGetWidth(_2e),objj_msgSend(objj_msgSend(_29,"class"),"titleBarHeight")));
objj_msgSend(_headView,"setAutoresizingMask:",CPViewWidthSizable);
objj_msgSend(_headView,"setHitTests:",NO);
objj_msgSend(_29,"addSubview:",_headView);
_dividerView=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",CGRectMake(0,CGRectGetMaxY(objj_msgSend(_headView,"frame")),CGRectGetWidth(_2e),1));
objj_msgSend(_dividerView,"setAutoresizingMask:",CPViewWidthSizable);
objj_msgSend(_dividerView,"setBackgroundColor:",objj_msgSend(_2d,"dividerBackgroundColor"));
objj_msgSend(_dividerView,"setHitTests:",NO);
objj_msgSend(_29,"addSubview:",_dividerView);
var y=CGRectGetMaxY(objj_msgSend(_dividerView,"frame"));
_bodyView=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",CGRectMake(0,y,CGRectGetWidth(_2e),CGRectGetHeight(_2e)-y));
objj_msgSend(_bodyView,"setAutoresizingMask:",CPViewWidthSizable|CPViewHeightSizable);
objj_msgSend(_bodyView,"setBackgroundColor:",objj_msgSend(_2d,"bodyBackgroundColor"));
objj_msgSend(_bodyView,"setHitTests:",NO);
objj_msgSend(_29,"addSubview:",_bodyView);
objj_msgSend(_29,"setResizeIndicatorOffset:",CGSizeMake(2,2));
_titleField=objj_msgSend(objj_msgSend(CPTextField,"alloc"),"initWithFrame:",CGRectMakeZero());
objj_msgSend(_titleField,"setFont:",objj_msgSend(CPFont,"boldSystemFontOfSize:",12));
objj_msgSend(_titleField,"setAutoresizingMask:",CPViewWidthSizable);
objj_msgSend(_titleField,"setLineBreakMode:",CPLineBreakByTruncatingTail);
objj_msgSend(_titleField,"setAlignment:",CPCenterTextAlignment);
objj_msgSend(_titleField,"setTextShadowColor:",objj_msgSend(CPColor,"whiteColor"));
objj_msgSend(_titleField,"setTextShadowOffset:",CGSizeMake(0,1));
objj_msgSend(_titleField,"setStringValue:","Untitled");
objj_msgSend(_titleField,"sizeToFit");
objj_msgSend(_titleField,"setAutoresizingMask:",CPViewWidthSizable);
objj_msgSend(_titleField,"setStringValue:","");
objj_msgSend(_29,"addSubview:",_titleField);
if(_styleMask&CPClosableWindowMask){
if(!_17){
var _2f=objj_msgSend(CPBundle,"bundleForClass:",objj_msgSend(CPWindow,"class"));
_17=objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_2f,"pathForResource:","CPWindow/Standard/CPWindowStandardCloseButton.png"),CGSizeMake(16,16));
_18=objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_2f,"pathForResource:","CPWindow/Standard/CPWindowStandardCloseButtonHighlighted.png"),CGSizeMake(16,16));
_19=objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_2f,"pathForResource:","CPWindow/Standard/CPWindowStandardCloseButtonUnsaved.png"),CGSizeMake(16,16));
_1a=objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_2f,"pathForResource:","CPWindow/Standard/CPWindowStandardCloseButtonUnsavedHighlighted.png"),CGSizeMake(16,16));
}
_closeButton=objj_msgSend(objj_msgSend(CPButton,"alloc"),"initWithFrame:",CGRectMake(8,7,16,16));
objj_msgSend(_closeButton,"setBordered:",NO);
objj_msgSend(_29,"_updateCloseButton");
objj_msgSend(_29,"addSubview:",_closeButton);
}
if(_styleMask&CPMiniaturizableWindowMask&&!objj_msgSend(CPPlatform,"isBrowser")){
if(!_1b){
var _2f=objj_msgSend(CPBundle,"bundleForClass:",objj_msgSend(CPWindow,"class"));
_1b=objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_2f,"pathForResource:","CPWindow/Standard/CPWindowStandardMinimizeButton.png"),CGSizeMake(16,16));
_1c=objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_2f,"pathForResource:","CPWindow/Standard/CPWindowStandardMinimizeButtonHighlighted.png"),CGSizeMake(16,16));
}
_minimizeButton=objj_msgSend(objj_msgSend(CPButton,"alloc"),"initWithFrame:",CGRectMake(27,7,16,16));
objj_msgSend(_minimizeButton,"setBordered:",NO);
objj_msgSend(_minimizeButton,"setImage:",_1b);
objj_msgSend(_minimizeButton,"setAlternateImage:",_1c);
objj_msgSend(_29,"addSubview:",_minimizeButton);
}
objj_msgSend(_29,"tile");
}
return _29;
}
}),new objj_method(sel_getUid("viewDidMoveToWindow"),function(_30,_31){
with(_30){
objj_msgSend(_closeButton,"setTarget:",objj_msgSend(_30,"window"));
objj_msgSend(_closeButton,"setAction:",sel_getUid("performClose:"));
objj_msgSend(_minimizeButton,"setTarget:",objj_msgSend(_30,"window"));
objj_msgSend(_minimizeButton,"setAction:",sel_getUid("performMiniaturize:"));
}
}),new objj_method(sel_getUid("toolbarOffset"),function(_32,_33){
with(_32){
return CGSizeMake(0,objj_msgSend(objj_msgSend(_32,"class"),"titleBarHeight"));
}
}),new objj_method(sel_getUid("tile"),function(_34,_35){
with(_34){
objj_msgSendSuper({receiver:_34,super_class:objj_getClass("_CPStandardWindowView").super_class},"tile");
var _36=objj_msgSend(_34,"window"),_37=objj_msgSend(_34,"bounds"),_38=CGRectGetWidth(_37);
objj_msgSend(_headView,"setFrameSize:",CGSizeMake(_38,objj_msgSend(_34,"toolbarMaxY")));
objj_msgSend(_dividerView,"setFrame:",CGRectMake(0,CGRectGetMaxY(objj_msgSend(_headView,"frame")),_38,1));
var _39=CGRectGetMaxY(objj_msgSend(_dividerView,"frame"));
objj_msgSend(_bodyView,"setFrame:",CGRectMake(0,_39,_38,CGRectGetHeight(_37)-_39));
var _3a=8;
if(_closeButton){
_3a+=19;
}
if(_minimizeButton){
_3a+=19;
}
objj_msgSend(_titleField,"setFrame:",CGRectMake(_3a,5,_38-_3a*2,CGRectGetHeight(objj_msgSend(_titleField,"frame"))));
objj_msgSend(objj_msgSend(_36,"contentView"),"setFrameOrigin:",CGPointMake(0,CGRectGetMaxY(objj_msgSend(_dividerView,"frame"))));
}
}),new objj_method(sel_getUid("_updateCloseButton"),function(_3b,_3c){
with(_3b){
if(_isDocumentEdited){
objj_msgSend(_closeButton,"setImage:",_19);
objj_msgSend(_closeButton,"setAlternateImage:",_1a);
}else{
objj_msgSend(_closeButton,"setImage:",_17);
objj_msgSend(_closeButton,"setAlternateImage:",_18);
}
}
}),new objj_method(sel_getUid("setDocumentEdited:"),function(_3d,_3e,_3f){
with(_3d){
_isDocumentEdited=_3f;
objj_msgSend(_3d,"_updateCloseButton");
}
}),new objj_method(sel_getUid("setTitle:"),function(_40,_41,_42){
with(_40){
objj_msgSend(_titleField,"setStringValue:",_42);
}
}),new objj_method(sel_getUid("mouseDown:"),function(_43,_44,_45){
with(_43){
if(CGRectContainsPoint(objj_msgSend(_headView,"frame"),objj_msgSend(_43,"convertPoint:fromView:",objj_msgSend(_45,"locationInWindow"),nil))){
return objj_msgSend(_43,"trackMoveWithEvent:",_45);
}
objj_msgSendSuper({receiver:_43,super_class:objj_getClass("_CPStandardWindowView").super_class},"mouseDown:",_45);
}
})]);
class_addMethods(_5,[new objj_method(sel_getUid("bodyBackgroundColor"),function(_46,_47){
with(_46){
if(!_14){
_14=objj_msgSend(CPColor,"colorWithWhite:alpha:",0.96,1);
}
return _14;
}
}),new objj_method(sel_getUid("dividerBackgroundColor"),function(_48,_49){
with(_48){
if(!_15){
_15=objj_msgSend(CPColor,"colorWithCalibratedRed:green:blue:alpha:",125/255,125/255,125/255,1);
}
return _15;
}
}),new objj_method(sel_getUid("titleColor"),function(_4a,_4b){
with(_4a){
if(!_16){
_16=objj_msgSend(CPColor,"colorWithCalibratedRed:green:blue:alpha:",44/255,44/255,44/255,1);
}
return _16;
}
}),new objj_method(sel_getUid("contentRectForFrameRect:"),function(_4c,_4d,_4e){
with(_4c){
var _4f=CGRectMakeCopy(_4e),_50=objj_msgSend(_4c,"titleBarHeight")+1;
_4f.origin.y+=_50;
_4f.size.height-=_50;
return _4f;
}
}),new objj_method(sel_getUid("frameRectForContentRect:"),function(_51,_52,_53){
with(_51){
var _54=CGRectMakeCopy(_53),_55=objj_msgSend(_51,"titleBarHeight")+1;
_54.origin.y-=_55;
_54.size.height+=_55;
return _54;
}
}),new objj_method(sel_getUid("titleBarHeight"),function(_56,_57){
with(_56){
return _1e;
}
})]);
p;22;_CPToolTipWindowView.jt;2254;@STATIC;1.0;i;15;_CPWindowView.jt;2215;
objj_executeFile("_CPWindowView.j",YES);
var _1=objj_allocateClassPair(_CPWindowView,"_CPToolTipWindowView"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_mouseDownPressed"),new objj_ivar("_gravity"),new objj_ivar("_backgroundColor"),new objj_ivar("_strokeColor")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("isMouseDownPressed"),function(_3,_4){
with(_3){
return _mouseDownPressed;
}
}),new objj_method(sel_getUid("setMouseDownPressed:"),function(_5,_6,_7){
with(_5){
_mouseDownPressed=_7;
}
}),new objj_method(sel_getUid("gravity"),function(_8,_9){
with(_8){
return _gravity;
}
}),new objj_method(sel_getUid("setGravity:"),function(_a,_b,_c){
with(_a){
_gravity=_c;
}
}),new objj_method(sel_getUid("initWithFrame:styleMask:"),function(_d,_e,_f,_10){
with(_d){
if(_d=objj_msgSendSuper({receiver:_d,super_class:objj_getClass("_CPToolTipWindowView").super_class},"initWithFrame:styleMask:",_f,_10)){
_strokeColor=objj_msgSend(CPColor,"colorWithHexString:","E3E3E3");
_backgroundColor=objj_msgSend(CPColor,"colorWithHexString:","FFFFCA");
}
return _d;
}
}),new objj_method(sel_getUid("drawRect:"),function(_11,_12,_13){
with(_11){
objj_msgSendSuper({receiver:_11,super_class:objj_getClass("_CPToolTipWindowView").super_class},"drawRect:",_13);
var _14=objj_msgSend(objj_msgSend(CPGraphicsContext,"currentContext"),"graphicsPort"),_15=2,_16=1;
CGContextSetStrokeColor(_14,_strokeColor);
CGContextSetFillColor(_14,_backgroundColor);
CGContextSetLineWidth(_14,_16);
CGContextBeginPath(_14);
_13.origin.x+=_16;
_13.origin.y+=_16;
_13.size.width-=_16*2;
_13.size.height-=_16*2;
CGContextAddPath(_14,CGPathWithRoundedRectangleInRect(_13,_15,_15,YES,YES,YES,YES));
CGContextClosePath(_14);
CGContextStrokePath(_14);
CGContextFillPath(_14);
}
})]);
class_addMethods(_2,[new objj_method(sel_getUid("contentRectForFrameRect:"),function(_17,_18,_19){
with(_17){
var _1a=CGRectMakeCopy(_19);
_1a.origin.x+=3;
_1a.origin.y+=3;
_1a.size.width-=6;
_1a.size.height-=6;
return _1a;
}
}),new objj_method(sel_getUid("frameRectForContentRect:"),function(_1b,_1c,_1d){
with(_1b){
var _1e=CGRectMakeCopy(_1d);
_1e.origin.x-=3;
_1e.origin.y-=3;
_1e.size.width+=6;
_1e.size.height+=6;
return _1e;
}
})]);
p;15;_CPWindowView.jt;9275;@STATIC;1.0;i;13;CPImageView.ji;8;CPView.jt;9226;
objj_executeFile("CPImageView.j",YES);
objj_executeFile("CPView.j",YES);
var _1=nil;
var _2=objj_allocateClassPair(CPView,"_CPWindowView"),_3=_2.isa;
class_addIvars(_2,[new objj_ivar("_styleMask"),new objj_ivar("_resizeIndicator"),new objj_ivar("_resizeIndicatorOffset"),new objj_ivar("_toolbarView"),new objj_ivar("_toolbarOffset"),new objj_ivar("_resizeFrame"),new objj_ivar("_mouseDraggedPoint"),new objj_ivar("_cachedScreenFrame")]);
objj_registerClassPair(_2);
class_addMethods(_2,[new objj_method(sel_getUid("contentRectForFrameRect:"),function(_4,_5,_6){
with(_4){
return objj_msgSend(objj_msgSend(_4,"class"),"contentRectForFrameRect:",_6);
}
}),new objj_method(sel_getUid("frameRectForContentRect:"),function(_7,_8,_9){
with(_7){
return objj_msgSend(objj_msgSend(_7,"class"),"frameRectForContentRect:",_9);
}
}),new objj_method(sel_getUid("initWithFrame:styleMask:"),function(_a,_b,_c,_d){
with(_a){
_a=objj_msgSendSuper({receiver:_a,super_class:objj_getClass("_CPWindowView").super_class},"initWithFrame:",_c);
if(_a){
_styleMask=_d;
_resizeIndicatorOffset=CGSizeMakeZero();
_toolbarOffset=CGSizeMakeZero();
}
return _a;
}
}),new objj_method(sel_getUid("setDocumentEdited:"),function(_e,_f,_10){
with(_e){
}
}),new objj_method(sel_getUid("setTitle:"),function(_11,_12,_13){
with(_11){
}
}),new objj_method(sel_getUid("acceptsFirstMouse:"),function(_14,_15,_16){
with(_14){
return YES;
}
}),new objj_method(sel_getUid("mouseDown:"),function(_17,_18,_19){
with(_17){
var _1a=objj_msgSend(_17,"window");
if((_styleMask&CPResizableWindowMask)&&_resizeIndicator){
var _1b=objj_msgSend(_resizeIndicator,"frame");
if(CGRectContainsPoint(_1b,objj_msgSend(_17,"convertPoint:fromView:",objj_msgSend(_19,"locationInWindow"),nil))){
return objj_msgSend(_17,"trackResizeWithEvent:",_19);
}
}
if(objj_msgSend(_1a,"isMovableByWindowBackground")){
objj_msgSend(_17,"trackMoveWithEvent:",_19);
}else{
objj_msgSendSuper({receiver:_17,super_class:objj_getClass("_CPWindowView").super_class},"mouseDown:",_19);
}
}
}),new objj_method(sel_getUid("trackResizeWithEvent:"),function(_1c,_1d,_1e){
with(_1c){
var _1f=objj_msgSend(_1e,"locationInWindow"),_20=objj_msgSend(_1e,"type");
if(_20===CPLeftMouseUp){
return;
}
var _21=objj_msgSend(_1c,"window");
if(_20===CPLeftMouseDown){
var _22=objj_msgSend(_21,"frame");
_resizeFrame=CGRectMake(_1f.x,_1f.y,CGRectGetWidth(_22),CGRectGetHeight(_22));
}else{
if(_20===CPLeftMouseDragged){
var _23=CGSizeMake(CGRectGetWidth(_resizeFrame)+_1f.x-CGRectGetMinX(_resizeFrame),CGRectGetHeight(_resizeFrame)+_1f.y-CGRectGetMinY(_resizeFrame));
if(_21._isSheet&&_21._parentView&&(_21._frame.size.width!==_23.width)){
objj_msgSend(_21._parentView,"_setAttachedSheetFrameOrigin");
}
objj_msgSend(_21,"setFrameSize:",_23);
}
}
objj_msgSend(CPApp,"setTarget:selector:forNextEventMatchingMask:untilDate:inMode:dequeue:",_1c,sel_getUid("trackResizeWithEvent:"),CPLeftMouseDraggedMask|CPLeftMouseUpMask,nil,nil,YES);
}
}),new objj_method(sel_getUid("_pointWithinScreenFrame:"),function(_24,_25,_26){
with(_24){
if(!objj_msgSend(CPPlatform,"isBrowser")){
return _26;
}
var _27=_cachedScreenFrame;
if(!_27){
_27=objj_msgSend(objj_msgSend(CPPlatformWindow,"primaryPlatformWindow"),"visibleFrame");
}
var _28=0;
if(objj_msgSend(CPMenu,"menuBarVisible")){
_28=objj_msgSend(objj_msgSend(CPApp,"mainMenu"),"menuBarHeight");
}
var _29=CGPointMake(0,0);
_29.x=MIN(MAX(_26.x,-_frame.size.width+4),CGRectGetMaxX(_27)-4);
_29.y=MIN(MAX(_26.y,_28),CGRectGetMaxY(_27)-8);
return _29;
}
}),new objj_method(sel_getUid("trackMoveWithEvent:"),function(_2a,_2b,_2c){
with(_2a){
var _2d=objj_msgSend(_2c,"type");
if(_2d===CPLeftMouseUp){
_cachedScreenFrame=nil;
return;
}else{
if(_2d===CPLeftMouseDown){
_mouseDraggedPoint=objj_msgSend(objj_msgSend(_2a,"window"),"convertBaseToGlobal:",objj_msgSend(_2c,"locationInWindow"));
_cachedScreenFrame=objj_msgSend(objj_msgSend(CPPlatformWindow,"primaryPlatformWindow"),"visibleFrame");
}else{
if(_2d===CPLeftMouseDragged){
var _2e=objj_msgSend(_2a,"window"),_2f=objj_msgSend(_2e,"frame"),_30=objj_msgSend(_2e,"convertBaseToGlobal:",objj_msgSend(_2c,"locationInWindow")),_31=objj_msgSend(_2a,"_pointWithinScreenFrame:",CGPointMake((_2f.origin.x)+(_30.x-_mouseDraggedPoint.x),(_2f.origin.y)+(_30.y-_mouseDraggedPoint.y)));
objj_msgSend(_2e,"setFrameOrigin:",_31);
_mouseDraggedPoint=objj_msgSend(_2a,"_pointWithinScreenFrame:",_30);
}
}
}
objj_msgSend(CPApp,"setTarget:selector:forNextEventMatchingMask:untilDate:inMode:dequeue:",_2a,sel_getUid("trackMoveWithEvent:"),CPLeftMouseDraggedMask|CPLeftMouseUpMask,nil,nil,YES);
}
}),new objj_method(sel_getUid("setShowsResizeIndicator:"),function(_32,_33,_34){
with(_32){
if(_34){
var _35=objj_msgSend(_1,"size"),_36=objj_msgSend(_32,"frame").size;
_resizeIndicator=objj_msgSend(objj_msgSend(CPImageView,"alloc"),"initWithFrame:",CGRectMake(_36.width-_35.width-_resizeIndicatorOffset.width,_36.height-_35.height-_resizeIndicatorOffset.height,_35.width,_35.height));
objj_msgSend(_resizeIndicator,"setImage:",_1);
objj_msgSend(_resizeIndicator,"setAutoresizingMask:",CPViewMinXMargin|CPViewMinYMargin);
objj_msgSend(_32,"addSubview:",_resizeIndicator);
}else{
objj_msgSend(_resizeIndicator,"removeFromSuperview");
_resizeIndicator=nil;
}
}
}),new objj_method(sel_getUid("showsResizeIndicator"),function(_37,_38){
with(_37){
return _resizeIndicator!==nil;
}
}),new objj_method(sel_getUid("setResizeIndicatorOffset:"),function(_39,_3a,_3b){
with(_39){
if(CGSizeEqualToSize(_resizeIndicatorOffset,_3b)){
return;
}
_resizeIndicatorOffset=_3b;
if(!_resizeIndicator){
return;
}
var _3c=objj_msgSend(_resizeIndicator,"frame").size,_3d=objj_msgSend(_39,"frame").size;
objj_msgSend(_resizeIndicator,"setFrameOrigin:",CGPointMake(_3d.width-_3c.width-_3b.width,_3d.height-_3c.height-_3b.height));
}
}),new objj_method(sel_getUid("resizeIndicatorOffset"),function(_3e,_3f){
with(_3e){
return _resizeIndicatorOffset;
}
}),new objj_method(sel_getUid("windowDidChangeDocumentEdited"),function(_40,_41){
with(_40){
}
}),new objj_method(sel_getUid("windowDidChangeDocumentSaving"),function(_42,_43){
with(_42){
}
}),new objj_method(sel_getUid("showsToolbar"),function(_44,_45){
with(_44){
return YES;
}
}),new objj_method(sel_getUid("toolbarOffset"),function(_46,_47){
with(_46){
return _toolbarOffset;
}
}),new objj_method(sel_getUid("toolbarLabelColor"),function(_48,_49){
with(_48){
return objj_msgSend(CPColor,"blackColor");
}
}),new objj_method(sel_getUid("toolbarMaxY"),function(_4a,_4b){
with(_4a){
if(!_toolbarView||objj_msgSend(_toolbarView,"isHidden")){
return objj_msgSend(_4a,"toolbarOffset").height;
}
return CGRectGetMaxY(objj_msgSend(_toolbarView,"frame"));
}
}),new objj_method(sel_getUid("toolbarView"),function(_4c,_4d){
with(_4c){
return _toolbarView;
}
}),new objj_method(sel_getUid("tile"),function(_4e,_4f){
with(_4e){
var _50=objj_msgSend(_4e,"window"),_51=objj_msgSend(_4e,"bounds"),_52=CGRectGetWidth(_51);
if(objj_msgSend(objj_msgSend(_50,"toolbar"),"isVisible")){
var _53=objj_msgSend(_4e,"toolbarView"),_54=objj_msgSend(_4e,"toolbarOffset");
objj_msgSend(_53,"setFrame:",CGRectMake(_54.width,_54.height,_52,CGRectGetHeight(objj_msgSend(_53,"frame"))));
}
if(objj_msgSend(_4e,"showsResizeIndicator")){
var _55=objj_msgSend(_resizeIndicator,"frame").size,_56=objj_msgSend(_4e,"bounds").size;
objj_msgSend(_resizeIndicator,"setFrameOrigin:",CGPointMake(_56.width-_55.width-_resizeIndicatorOffset.width,_56.height-_55.height-_resizeIndicatorOffset.height));
}
}
}),new objj_method(sel_getUid("noteToolbarChanged"),function(_57,_58){
with(_57){
var _59=objj_msgSend(_57,"window"),_5a=objj_msgSend(_59,"toolbar"),_5b=objj_msgSend(_5a,"_toolbarView");
if(_toolbarView!==_5b){
objj_msgSend(_toolbarView,"removeFromSuperview");
if(_5b){
objj_msgSend(_5b,"removeFromSuperview");
objj_msgSend(_5b,"FIXME_setIsHUD:",_styleMask&CPHUDBackgroundWindowMask);
objj_msgSend(_57,"addSubview:",_5b);
}
_toolbarView=_5b;
}
objj_msgSend(_5b,"setHidden:",!objj_msgSend(_57,"showsToolbar")||!objj_msgSend(_5a,"isVisible"));
if(_59){
var _5c=objj_msgSend(_57,"convertRect:toView:",objj_msgSend(objj_msgSend(_59,"contentView"),"frame"),nil);
_5c.origin=objj_msgSend(_59,"convertBaseToGlobal:",_5c.origin);
objj_msgSend(_57,"setAutoresizesSubviews:",NO);
objj_msgSend(_59,"setFrame:",objj_msgSend(_59,"frameRectForContentRect:",_5c));
objj_msgSend(_57,"setAutoresizesSubviews:",YES);
}
objj_msgSend(_57,"tile");
}
}),new objj_method(sel_getUid("didAddSubview:"),function(_5d,_5e,_5f){
with(_5d){
if(!_resizeIndicator||_5f===_resizeIndicator){
return;
}
objj_msgSend(_5d,"addSubview:",_resizeIndicator);
}
})]);
class_addMethods(_3,[new objj_method(sel_getUid("initialize"),function(_60,_61){
with(_60){
if(_60!=objj_msgSend(_CPWindowView,"class")){
return;
}
_1=objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(objj_msgSend(CPBundle,"bundleForClass:",objj_msgSend(CPWindow,"class")),"pathForResource:","_CPWindowView/_CPWindowViewResizeIndicator.png"),CGSizeMake(12,12));
}
}),new objj_method(sel_getUid("contentRectForFrameRect:"),function(_62,_63,_64){
with(_62){
return CGRectMakeCopy(_64);
}
}),new objj_method(sel_getUid("frameRectForContentRect:"),function(_65,_66,_67){
with(_65){
return CGRectMakeCopy(_67);
}
})]);
p;10;CPWindow.jt;63301;@STATIC;1.0;I;25;Foundation/CPCountedSet.jI;33;Foundation/CPNotificationCenter.jI;26;Foundation/CPUndoManager.ji;12;CGGeometry.ji;13;CPAnimation.ji;18;CPPlatformWindow.ji;13;CPResponder.ji;10;CPScreen.ji;15;_CPWindowView.ji;23;_CPStandardWindowView.ji;23;_CPDocModalWindowView.ji;22;_CPToolTipWindowView.ji;18;_CPHUDWindowView.ji;25;_CPBorderlessWindowView.ji;31;_CPBorderlessBridgeWindowView.ji;14;CPDragServer.ji;8;CPView.jt;62868;
objj_executeFile("Foundation/CPCountedSet.j",NO);
objj_executeFile("Foundation/CPNotificationCenter.j",NO);
objj_executeFile("Foundation/CPUndoManager.j",NO);
objj_executeFile("CGGeometry.j",YES);
objj_executeFile("CPAnimation.j",YES);
objj_executeFile("CPPlatformWindow.j",YES);
objj_executeFile("CPResponder.j",YES);
objj_executeFile("CPScreen.j",YES);
CPBorderlessWindowMask=0;
CPTitledWindowMask=1<<0;
CPClosableWindowMask=1<<1;
CPMiniaturizableWindowMask=1<<2;
CPResizableWindowMask=1<<3;
CPTexturedBackgroundWindowMask=1<<8;
CPBorderlessBridgeWindowMask=1<<20;
CPHUDBackgroundWindowMask=1<<21;
CPWindowNotSizable=0;
CPWindowMinXMargin=1;
CPWindowWidthSizable=2;
CPWindowMaxXMargin=4;
CPWindowMinYMargin=8;
CPWindowHeightSizable=16;
CPWindowMaxYMargin=32;
CPBackgroundWindowLevel=-1;
CPNormalWindowLevel=0;
CPFloatingWindowLevel=3;
CPSubmenuWindowLevel=3;
CPTornOffMenuWindowLevel=3;
CPMainMenuWindowLevel=24;
CPStatusWindowLevel=25;
CPModalPanelWindowLevel=8;
CPPopUpMenuWindowLevel=101;
CPDraggingWindowLevel=500;
CPScreenSaverWindowLevel=1000;
CPWindowOut=0;
CPWindowAbove=1;
CPWindowBelow=2;
CPWindowWillCloseNotification="CPWindowWillCloseNotification";
CPWindowDidBecomeMainNotification="CPWindowDidBecomeMainNotification";
CPWindowDidResignMainNotification="CPWindowDidResignMainNotification";
CPWindowDidBecomeKeyNotification="CPWindowDidBecomeKeyNotification";
CPWindowDidResignKeyNotification="CPWindowDidResignKeyNotification";
CPWindowDidResizeNotification="CPWindowDidResizeNotification";
CPWindowDidMoveNotification="CPWindowDidMoveNotification";
CPWindowWillBeginSheetNotification="CPWindowWillBeginSheetNotification";
CPWindowDidEndSheetNotification="CPWindowDidEndSheetNotification";
CPWindowDidMiniaturizeNotification="CPWindowDidMiniaturizeNotification";
CPWindowWillMiniaturizeNotification="CPWindowWillMiniaturizeNotification";
CPWindowDidDeminiaturizeNotification="CPWindowDidDeminiaturizeNotification";
CPWindowShadowStyleStandard=0;
CPWindowShadowStyleMenu=1;
CPWindowShadowStylePanel=2;
var _1=20,_2=19,_3=10,_4=10,_5=5,_6=nil;
var _7=nil,_8=nil,_9=0.2;
var _a=[CPLeftArrowFunctionKey,CPRightArrowFunctionKey,CPUpArrowFunctionKey,CPDownArrowFunctionKey,CPPageUpFunctionKey,CPPageDownFunctionKey,CPHomeFunctionKey,CPEndFunctionKey,CPEscapeFunctionKey];
var _b=objj_allocateClassPair(CPResponder,"CPWindow"),_c=_b.isa;
class_addIvars(_b,[new objj_ivar("_platformWindow"),new objj_ivar("_windowNumber"),new objj_ivar("_styleMask"),new objj_ivar("_frame"),new objj_ivar("_level"),new objj_ivar("_isVisible"),new objj_ivar("_isMiniaturized"),new objj_ivar("_isAnimating"),new objj_ivar("_hasShadow"),new objj_ivar("_isMovableByWindowBackground"),new objj_ivar("_shadowStyle"),new objj_ivar("_showsResizeIndicator"),new objj_ivar("_isDocumentEdited"),new objj_ivar("_isDocumentSaving"),new objj_ivar("_shadowView"),new objj_ivar("_windowView"),new objj_ivar("_contentView"),new objj_ivar("_toolbarView"),new objj_ivar("_mouseEnteredStack"),new objj_ivar("_leftMouseDownView"),new objj_ivar("_rightMouseDownView"),new objj_ivar("_toolbar"),new objj_ivar("_firstResponder"),new objj_ivar("_initialFirstResponder"),new objj_ivar("_delegate"),new objj_ivar("_title"),new objj_ivar("_acceptsMouseMovedEvents"),new objj_ivar("_ignoresMouseEvents"),new objj_ivar("_windowController"),new objj_ivar("_minSize"),new objj_ivar("_maxSize"),new objj_ivar("_undoManager"),new objj_ivar("_representedURL"),new objj_ivar("_registeredDraggedTypes"),new objj_ivar("_registeredDraggedTypesArray"),new objj_ivar("_inclusiveRegisteredDraggedTypes"),new objj_ivar("_defaultButton"),new objj_ivar("_defaultButtonEnabled"),new objj_ivar("_autorecalculatesKeyViewLoop"),new objj_ivar("_keyViewLoopIsDirty"),new objj_ivar("_sharesChromeWithPlatformWindow"),new objj_ivar("_DOMElement"),new objj_ivar("_autoresizingMask"),new objj_ivar("_delegateRespondsToWindowWillReturnUndoManagerSelector"),new objj_ivar("_isFullPlatformWindow"),new objj_ivar("_fullPlatformWindowSession"),new objj_ivar("_sheetContext"),new objj_ivar("_parentView"),new objj_ivar("_isSheet"),new objj_ivar("_frameAnimation")]);
objj_registerClassPair(_b);
class_addMethods(_b,[new objj_method(sel_getUid("init"),function(_d,_e){
with(_d){
return objj_msgSend(_d,"initWithContentRect:styleMask:",{origin:{x:0,y:0},size:{width:0,height:0}},CPTitledWindowMask);
}
}),new objj_method(sel_getUid("initWithContentRect:styleMask:"),function(_f,_10,_11,_12){
with(_f){
_f=objj_msgSendSuper({receiver:_f,super_class:objj_getClass("CPWindow").super_class},"init");
if(_f){
var _13=objj_msgSend(objj_msgSend(_f,"class"),"_windowViewClassForStyleMask:",_12);
_frame=objj_msgSend(_13,"frameRectForContentRect:",_11);
objj_msgSend(_f,"_setSharesChromeWithPlatformWindow:",!objj_msgSend(CPPlatform,"isBrowser"));
if(objj_msgSend(CPPlatform,"isBrowser")){
objj_msgSend(_f,"setPlatformWindow:",objj_msgSend(CPPlatformWindow,"primaryPlatformWindow"));
}else{
if((_12&CPBorderlessBridgeWindowMask)&&_11.size.width===0&&_11.size.height===0){
var _14=objj_msgSend(objj_msgSend(objj_msgSend(CPScreen,"alloc"),"init"),"visibleFrame");
_frame.size.height=MIN(768,_14.size.height);
_frame.size.width=MIN(1024,_14.size.width);
_frame.origin.x=(_14.size.width-_frame.size.width)/2;
_frame.origin.y=(_14.size.height-_frame.size.height)/2;
}
objj_msgSend(_f,"setPlatformWindow:",objj_msgSend(objj_msgSend(CPPlatformWindow,"alloc"),"initWithContentRect:",_frame));
objj_msgSend(_f,"platformWindow")._only=_f;
}
_isFullPlatformWindow=NO;
_registeredDraggedTypes=objj_msgSend(CPSet,"set");
_registeredDraggedTypesArray=[];
_isSheet=NO;
_acceptsMouseMovedEvents=YES;
_windowNumber=objj_msgSend(CPApp._windows,"count");
CPApp._windows[_windowNumber]=_f;
_styleMask=_12;
objj_msgSend(_f,"setLevel:",CPNormalWindowLevel);
_minSize=CGSizeMake(0,0);
_maxSize=CGSizeMake(1000000,1000000);
_windowView=objj_msgSend(objj_msgSend(_13,"alloc"),"initWithFrame:styleMask:",CGRectMake(0,0,CGRectGetWidth(_frame),CGRectGetHeight(_frame)),_12);
objj_msgSend(_windowView,"_setWindow:",_f);
objj_msgSend(_windowView,"setNextResponder:",_f);
objj_msgSend(_f,"setMovableByWindowBackground:",_12&CPHUDBackgroundWindowMask);
objj_msgSend(_f,"setContentView:",objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",CGRectMakeZero()));
_firstResponder=_f;
_DOMElement=document.createElement("div");
_DOMElement.style.position="absolute";
_DOMElement.style.visibility="visible";
_DOMElement.style.zIndex=0;
if(!objj_msgSend(_f,"_sharesChromeWithPlatformWindow")){
if(NULL){
var _15={x:CGPointMake((_frame.origin.x),(_frame.origin.y)).x*NULL.a+CGPointMake((_frame.origin.x),(_frame.origin.y)).y*NULL.c+NULL.tx,y:CGPointMake((_frame.origin.x),(_frame.origin.y)).x*NULL.b+CGPointMake((_frame.origin.x),(_frame.origin.y)).y*NULL.d+NULL.ty};
}else{
var _15={x:(_frame.origin.x),y:(_frame.origin.y)};
}
_DOMElement.style.left=ROUND(_15.x)+"px";
_DOMElement.style.top=ROUND(_15.y)+"px";
}
_DOMElement.style.width=MAX(0,ROUND(1))+"px";
_DOMElement.style.height=MAX(0,ROUND(1))+"px";
_DOMElement.appendChild(_windowView._DOMElement);
objj_msgSend(_f,"setNextResponder:",CPApp);
objj_msgSend(_f,"setHasShadow:",_12!==CPBorderlessWindowMask);
if(_12&CPBorderlessBridgeWindowMask){
objj_msgSend(_f,"setFullPlatformWindow:",YES);
}
_defaultButtonEnabled=YES;
_keyViewLoopIsDirty=YES;
objj_msgSend(_f,"setShowsResizeIndicator:",_styleMask&CPResizableWindowMask);
}
return _f;
}
}),new objj_method(sel_getUid("platformWindow"),function(_16,_17){
with(_16){
return _platformWindow;
}
}),new objj_method(sel_getUid("setPlatformWindow:"),function(_18,_19,_1a){
with(_18){
var _1b=objj_msgSend(_18,"isVisible");
if(_1b){
objj_msgSend(_18,"close");
}
_platformWindow=_1a;
if(_1b){
objj_msgSend(_18,"orderFront:",_18);
}
}
}),new objj_method(sel_getUid("awakeFromCib"),function(_1c,_1d){
with(_1c){
_keyViewLoopIsDirty=!objj_msgSend(_1c,"_hasKeyViewLoop");
}
}),new objj_method(sel_getUid("_setWindowView:"),function(_1e,_1f,_20){
with(_1e){
if(_windowView===_20){
return;
}
var _21=_windowView;
_windowView=_20;
if(_21){
objj_msgSend(_21,"_setWindow:",nil);
objj_msgSend(_21,"noteToolbarChanged");
_DOMElement.removeChild(_21._DOMElement);
}
if(_windowView){
_DOMElement.appendChild(_windowView._DOMElement);
var _22=objj_msgSend(_contentView,"convertRect:toView:",objj_msgSend(_contentView,"bounds"),nil);
_22.origin=objj_msgSend(_1e,"convertBaseToGlobal:",_22.origin);
objj_msgSend(_windowView,"_setWindow:",_1e);
objj_msgSend(_windowView,"setNextResponder:",_1e);
objj_msgSend(_windowView,"addSubview:",_contentView);
objj_msgSend(_windowView,"setTitle:",_title);
objj_msgSend(_windowView,"noteToolbarChanged");
objj_msgSend(_windowView,"setShowsResizeIndicator:",objj_msgSend(_1e,"showsResizeIndicator"));
objj_msgSend(_1e,"setFrame:",objj_msgSend(_1e,"frameRectForContentRect:",_22));
}
}
}),new objj_method(sel_getUid("setFullPlatformWindow:"),function(_23,_24,_25){
with(_23){
if(!objj_msgSend(_platformWindow,"supportsFullPlatformWindows")){
return;
}
_25=!!_25;
if(_isFullPlatformWindow===_25){
return;
}
_isFullPlatformWindow=_25;
if(_isFullPlatformWindow){
_fullPlatformWindowSession=_CPWindowFullPlatformWindowSessionMake(_windowView,objj_msgSend(_23,"contentRectForFrameRect:",objj_msgSend(_23,"frame")),objj_msgSend(_23,"hasShadow"),objj_msgSend(_23,"level"));
var _26=objj_msgSend(objj_msgSend(_23,"class"),"_windowViewClassForFullPlatformWindowStyleMask:",_styleMask),_27=objj_msgSend(objj_msgSend(_26,"alloc"),"initWithFrame:styleMask:",CGRectMakeZero(),_styleMask);
objj_msgSend(_23,"_setWindowView:",_27);
objj_msgSend(_23,"setLevel:",CPBackgroundWindowLevel);
objj_msgSend(_23,"setHasShadow:",NO);
objj_msgSend(_23,"setAutoresizingMask:",CPWindowWidthSizable|CPWindowHeightSizable);
objj_msgSend(_23,"setFrame:",objj_msgSend(_platformWindow,"visibleFrame"));
}else{
var _27=_fullPlatformWindowSession.windowView;
objj_msgSend(_23,"_setWindowView:",_27);
objj_msgSend(_23,"setLevel:",_fullPlatformWindowSession.level);
objj_msgSend(_23,"setHasShadow:",_fullPlatformWindowSession.hasShadow);
objj_msgSend(_23,"setAutoresizingMask:",CPWindowNotSizable);
objj_msgSend(_23,"setFrame:",objj_msgSend(_27,"frameRectForContentRect:",_fullPlatformWindowSession.contentRect));
}
}
}),new objj_method(sel_getUid("isFullPlatformWindow"),function(_28,_29){
with(_28){
return _isFullPlatformWindow;
}
}),new objj_method(sel_getUid("styleMask"),function(_2a,_2b){
with(_2a){
return _styleMask;
}
}),new objj_method(sel_getUid("contentRectForFrameRect:"),function(_2c,_2d,_2e){
with(_2c){
return objj_msgSend(_windowView,"contentRectForFrameRect:",_2e);
}
}),new objj_method(sel_getUid("frameRectForContentRect:"),function(_2f,_30,_31){
with(_2f){
return objj_msgSend(_windowView,"frameRectForContentRect:",_31);
}
}),new objj_method(sel_getUid("frame"),function(_32,_33){
with(_32){
return {origin:{x:_frame.origin.x,y:_frame.origin.y},size:{width:_frame.size.width,height:_frame.size.height}};
}
}),new objj_method(sel_getUid("_setClippedFrame:display:animate:"),function(_34,_35,_36,_37,_38){
with(_34){
_36.size.width=MIN(MAX(_36.size.width,_minSize.width),_maxSize.width);
_36.size.height=MIN(MAX(_36.size.height,_minSize.height),_maxSize.height);
objj_msgSend(_34,"setFrame:display:animate:",_36,_37,_38);
}
}),new objj_method(sel_getUid("setFrame:display:animate:"),function(_39,_3a,_3b,_3c,_3d){
with(_39){
_3b={origin:{x:_3b.origin.x,y:_3b.origin.y},size:{width:_3b.size.width,height:_3b.size.height}};
var _3e=_3b.origin.x,_3f=_3e-FLOOR(_3e);
if(_3f){
_3b.origin.x=_3e>0.879?CEIL(_3e):FLOOR(_3e);
}
_3e=_3b.origin.y;
_3f=_3e-FLOOR(_3e);
if(_3f){
_3b.origin.y=_3e>0.879?CEIL(_3e):FLOOR(_3e);
}
_3e=_3b.size.width;
_3f=_3e-FLOOR(_3e);
if(_3f){
_3b.size.width=_3e>0.15?CEIL(_3e):FLOOR(_3e);
}
_3e=_3b.size.height;
_3f=_3e-FLOOR(_3e);
if(_3f){
_3b.size.height=_3e>0.15?CEIL(_3e):FLOOR(_3e);
}
if(_3d){
objj_msgSend(_frameAnimation,"stopAnimation");
_frameAnimation=objj_msgSend(objj_msgSend(_CPWindowFrameAnimation,"alloc"),"initWithWindow:targetFrame:",_39,_3b);
objj_msgSend(_frameAnimation,"startAnimation");
}else{
var _40=_frame.origin,_41=_3b.origin;
if(!(_40.x==_41.x&&_40.y==_41.y)){
_40.x=_41.x;
_40.y=_41.y;
if(!objj_msgSend(_39,"_sharesChromeWithPlatformWindow")){
if(NULL){
var _42={x:CGPointMake(_40.x,_40.y).x*NULL.a+CGPointMake(_40.x,_40.y).y*NULL.c+NULL.tx,y:CGPointMake(_40.x,_40.y).x*NULL.b+CGPointMake(_40.x,_40.y).y*NULL.d+NULL.ty};
}else{
var _42={x:_40.x,y:_40.y};
}
_DOMElement.style.left=ROUND(_42.x)+"px";
_DOMElement.style.top=ROUND(_42.y)+"px";
}
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:",CPWindowDidMoveNotification,_39);
}
var _43=_frame.size,_44=_3b.size;
if(!(_43.width==_44.width&&_43.height==_44.height)){
_43.width=_44.width;
_43.height=_44.height;
objj_msgSend(_windowView,"setFrameSize:",_43);
if(_hasShadow){
objj_msgSend(_shadowView,"setFrameSize:",{width:_1+_43.width+_2,height:_4+_43.height+_3+_5});
}
if(!_isAnimating){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:",CPWindowDidResizeNotification,_39);
}
}
if(objj_msgSend(_39,"_sharesChromeWithPlatformWindow")){
objj_msgSend(_platformWindow,"setContentRect:",_frame);
}
}
}
}),new objj_method(sel_getUid("setFrame:display:"),function(_45,_46,_47,_48){
with(_45){
objj_msgSend(_45,"_setClippedFrame:display:animate:",_47,_48,NO);
}
}),new objj_method(sel_getUid("setFrame:"),function(_49,_4a,_4b){
with(_49){
objj_msgSend(_49,"_setClippedFrame:display:animate:",_4b,YES,NO);
}
}),new objj_method(sel_getUid("setFrameOrigin:"),function(_4c,_4d,_4e){
with(_4c){
objj_msgSend(_4c,"_setClippedFrame:display:animate:",{origin:{x:_4e.x,y:_4e.y},size:{width:(_frame.size.width),height:(_frame.size.height)}},YES,NO);
}
}),new objj_method(sel_getUid("setFrameSize:"),function(_4f,_50,_51){
with(_4f){
objj_msgSend(_4f,"_setClippedFrame:display:animate:",{origin:{x:(_frame.origin.x),y:(_frame.origin.y)},size:{width:_51.width,height:_51.height}},YES,NO);
}
}),new objj_method(sel_getUid("orderFront:"),function(_52,_53,_54){
with(_52){
objj_msgSend(_platformWindow,"orderFront:",_52);
objj_msgSend(_platformWindow,"order:window:relativeTo:",CPWindowAbove,_52,nil);
if(_firstResponder===_52||!_firstResponder){
objj_msgSend(_52,"makeFirstResponder:",objj_msgSend(_52,"initialFirstResponder"));
}
if(!CPApp._keyWindow){
objj_msgSend(_52,"makeKeyWindow");
}
if(!CPApp._mainWindow){
objj_msgSend(_52,"makeMainWindow");
}
}
}),new objj_method(sel_getUid("orderBack:"),function(_55,_56,_57){
with(_55){
}
}),new objj_method(sel_getUid("orderOut:"),function(_58,_59,_5a){
with(_58){
if(objj_msgSend(_58,"_sharesChromeWithPlatformWindow")){
objj_msgSend(_platformWindow,"orderOut:",_58);
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("windowWillClose:"))){
objj_msgSend(_delegate,"windowWillClose:",_58);
}
objj_msgSend(_platformWindow,"order:window:relativeTo:",CPWindowOut,_58,nil);
objj_msgSend(_58,"_updateMainAndKeyWindows");
}
}),new objj_method(sel_getUid("orderWindow:relativeTo:"),function(_5b,_5c,_5d,_5e){
with(_5b){
objj_msgSend(_platformWindow,"order:window:relativeTo:",_5d,_5b,CPApp._windows[_5e]);
}
}),new objj_method(sel_getUid("setLevel:"),function(_5f,_60,_61){
with(_5f){
if(_61===_level){
return;
}
objj_msgSend(_platformWindow,"moveWindow:fromLevel:toLevel:",_5f,_level,_61);
_level=_61;
if(objj_msgSend(_5f,"_sharesChromeWithPlatformWindow")){
objj_msgSend(_platformWindow,"setLevel:",_61);
}
}
}),new objj_method(sel_getUid("level"),function(_62,_63){
with(_62){
return _level;
}
}),new objj_method(sel_getUid("isVisible"),function(_64,_65){
with(_64){
return _isVisible;
}
}),new objj_method(sel_getUid("showsResizeIndicator"),function(_66,_67){
with(_66){
return _showsResizeIndicator;
}
}),new objj_method(sel_getUid("setShowsResizeIndicator:"),function(_68,_69,_6a){
with(_68){
_6a=!!_6a;
if(_showsResizeIndicator===_6a){
return;
}
_showsResizeIndicator=_6a;
objj_msgSend(_windowView,"setShowsResizeIndicator:",objj_msgSend(_68,"showsResizeIndicator"));
}
}),new objj_method(sel_getUid("resizeIndicatorOffset"),function(_6b,_6c){
with(_6b){
return objj_msgSend(_windowView,"resizeIndicatorOffset");
}
}),new objj_method(sel_getUid("setResizeIndicatorOffset:"),function(_6d,_6e,_6f){
with(_6d){
objj_msgSend(_windowView,"setResizeIndicatorOffset:",_6f);
}
}),new objj_method(sel_getUid("setContentView:"),function(_70,_71,_72){
with(_70){
if(_contentView){
objj_msgSend(_contentView,"removeFromSuperview");
}
var _73=CGRectMake(0,0,CGRectGetWidth(_frame),CGRectGetHeight(_frame));
_contentView=_72;
objj_msgSend(_contentView,"setFrame:",objj_msgSend(_70,"contentRectForFrameRect:",_73));
objj_msgSend(_contentView,"setAutoresizingMask:",CPViewWidthSizable|CPViewHeightSizable);
objj_msgSend(_windowView,"addSubview:",_contentView);
}
}),new objj_method(sel_getUid("contentView"),function(_74,_75){
with(_74){
return _contentView;
}
}),new objj_method(sel_getUid("setAlphaValue:"),function(_76,_77,_78){
with(_76){
objj_msgSend(_windowView,"setAlphaValue:",_78);
}
}),new objj_method(sel_getUid("alphaValue"),function(_79,_7a){
with(_79){
return objj_msgSend(_windowView,"alphaValue");
}
}),new objj_method(sel_getUid("setBackgroundColor:"),function(_7b,_7c,_7d){
with(_7b){
objj_msgSend(_windowView,"setBackgroundColor:",_7d);
}
}),new objj_method(sel_getUid("backgroundColor"),function(_7e,_7f){
with(_7e){
return objj_msgSend(_windowView,"backgroundColor");
}
}),new objj_method(sel_getUid("setMinSize:"),function(_80,_81,_82){
with(_80){
if(CGSizeEqualToSize(_minSize,_82)){
return;
}
_minSize=CGSizeCreateCopy(_82);
var _83=CGSizeMakeCopy(objj_msgSend(_80,"frame").size),_84=NO;
if(_83.width<_minSize.width){
_83.width=_minSize.width;
_84=YES;
}
if(_83.height<_minSize.height){
_83.height=_minSize.height;
_84=YES;
}
if(_84){
objj_msgSend(_80,"setFrameSize:",_83);
}
}
}),new objj_method(sel_getUid("minSize"),function(_85,_86){
with(_85){
return _minSize;
}
}),new objj_method(sel_getUid("setMaxSize:"),function(_87,_88,_89){
with(_87){
if(CGSizeEqualToSize(_maxSize,_89)){
return;
}
_maxSize=CGSizeCreateCopy(_89);
var _8a=CGSizeMakeCopy(objj_msgSend(_87,"frame").size),_8b=NO;
if(_8a.width>_maxSize.width){
_8a.width=_maxSize.width;
_8b=YES;
}
if(_8a.height>_maxSize.height){
_8a.height=_maxSize.height;
_8b=YES;
}
if(_8b){
objj_msgSend(_87,"setFrameSize:",_8a);
}
}
}),new objj_method(sel_getUid("maxSize"),function(_8c,_8d){
with(_8c){
return _maxSize;
}
}),new objj_method(sel_getUid("hasShadow"),function(_8e,_8f){
with(_8e){
return _hasShadow;
}
}),new objj_method(sel_getUid("_updateShadow"),function(_90,_91){
with(_90){
if(objj_msgSend(_90,"_sharesChromeWithPlatformWindow")){
if(_shadowView){
_DOMElement.removeChild(_shadowView._DOMElement);
_shadowView=nil;
}
objj_msgSend(_platformWindow,"setHasShadow:",_hasShadow);
return;
}
if(_hasShadow&&!_shadowView){
var _92=objj_msgSend(_windowView,"bounds");
_shadowView=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",CGRectMake(-_1,-_3+_5,_1+CGRectGetWidth(_92)+_2,_3+CGRectGetHeight(_92)+_4));
if(!_6){
var _93=objj_msgSend(CPBundle,"bundleForClass:",objj_msgSend(CPWindow,"class"));
_6=objj_msgSend(CPColor,"colorWithPatternImage:",objj_msgSend(objj_msgSend(CPNinePartImage,"alloc"),"initWithImageSlices:",[objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_93,"pathForResource:","CPWindow/CPWindowShadow0.png"),CGSizeMake(20,19)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_93,"pathForResource:","CPWindow/CPWindowShadow1.png"),CGSizeMake(1,19)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_93,"pathForResource:","CPWindow/CPWindowShadow2.png"),CGSizeMake(19,19)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_93,"pathForResource:","CPWindow/CPWindowShadow3.png"),CGSizeMake(20,1)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_93,"pathForResource:","CPWindow/CPWindowShadow4.png"),CGSizeMake(1,1)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_93,"pathForResource:","CPWindow/CPWindowShadow5.png"),CGSizeMake(19,1)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_93,"pathForResource:","CPWindow/CPWindowShadow6.png"),CGSizeMake(20,18)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_93,"pathForResource:","CPWindow/CPWindowShadow7.png"),CGSizeMake(1,18)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_93,"pathForResource:","CPWindow/CPWindowShadow8.png"),CGSizeMake(19,18))]));
}
objj_msgSend(_shadowView,"setBackgroundColor:",_6);
objj_msgSend(_shadowView,"setAutoresizingMask:",CPViewWidthSizable|CPViewHeightSizable);
_DOMElement.insertBefore(_shadowView._DOMElement,_windowView._DOMElement);
}else{
if(!_hasShadow&&_shadowView){
_DOMElement.removeChild(_shadowView._DOMElement);
_shadowView=nil;
}
}
}
}),new objj_method(sel_getUid("setHasShadow:"),function(_94,_95,_96){
with(_94){
if(_hasShadow===_96){
return;
}
_hasShadow=_96;
objj_msgSend(_94,"_updateShadow");
}
}),new objj_method(sel_getUid("setShadowStyle:"),function(_97,_98,_99){
with(_97){
_shadowStyle=_99;
objj_msgSend(objj_msgSend(_97,"platformWindow"),"setShadowStyle:",_shadowStyle);
}
}),new objj_method(sel_getUid("setDelegate:"),function(_9a,_9b,_9c){
with(_9a){
var _9d=objj_msgSend(CPNotificationCenter,"defaultCenter");
objj_msgSend(_9d,"removeObserver:name:object:",_delegate,CPWindowDidResignKeyNotification,_9a);
objj_msgSend(_9d,"removeObserver:name:object:",_delegate,CPWindowDidBecomeKeyNotification,_9a);
objj_msgSend(_9d,"removeObserver:name:object:",_delegate,CPWindowDidBecomeMainNotification,_9a);
objj_msgSend(_9d,"removeObserver:name:object:",_delegate,CPWindowDidResignMainNotification,_9a);
objj_msgSend(_9d,"removeObserver:name:object:",_delegate,CPWindowDidMoveNotification,_9a);
objj_msgSend(_9d,"removeObserver:name:object:",_delegate,CPWindowDidResizeNotification,_9a);
_delegate=_9c;
_delegateRespondsToWindowWillReturnUndoManagerSelector=objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("windowWillReturnUndoManager:"));
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("windowDidResignKey:"))){
objj_msgSend(_9d,"addObserver:selector:name:object:",_delegate,sel_getUid("windowDidResignKey:"),CPWindowDidResignKeyNotification,_9a);
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("windowDidBecomeKey:"))){
objj_msgSend(_9d,"addObserver:selector:name:object:",_delegate,sel_getUid("windowDidBecomeKey:"),CPWindowDidBecomeKeyNotification,_9a);
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("windowDidBecomeMain:"))){
objj_msgSend(_9d,"addObserver:selector:name:object:",_delegate,sel_getUid("windowDidBecomeMain:"),CPWindowDidBecomeMainNotification,_9a);
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("windowDidResignMain:"))){
objj_msgSend(_9d,"addObserver:selector:name:object:",_delegate,sel_getUid("windowDidResignMain:"),CPWindowDidResignMainNotification,_9a);
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("windowDidMove:"))){
objj_msgSend(_9d,"addObserver:selector:name:object:",_delegate,sel_getUid("windowDidMove:"),CPWindowDidMoveNotification,_9a);
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("windowDidResize:"))){
objj_msgSend(_9d,"addObserver:selector:name:object:",_delegate,sel_getUid("windowDidResize:"),CPWindowDidResizeNotification,_9a);
}
}
}),new objj_method(sel_getUid("delegate"),function(_9e,_9f){
with(_9e){
return _delegate;
}
}),new objj_method(sel_getUid("setWindowController:"),function(_a0,_a1,_a2){
with(_a0){
_windowController=_a2;
}
}),new objj_method(sel_getUid("windowController"),function(_a3,_a4){
with(_a3){
return _windowController;
}
}),new objj_method(sel_getUid("doCommandBySelector:"),function(_a5,_a6,_a7){
with(_a5){
if(objj_msgSend(_delegate,"respondsToSelector:",_a7)){
objj_msgSend(_delegate,"performSelector:",_a7);
}else{
objj_msgSendSuper({receiver:_a5,super_class:objj_getClass("CPWindow").super_class},"doCommandBySelector:",_a7);
}
}
}),new objj_method(sel_getUid("acceptsFirstResponder"),function(_a8,_a9){
with(_a8){
return YES;
}
}),new objj_method(sel_getUid("initialFirstResponder"),function(_aa,_ab){
with(_aa){
return _initialFirstResponder;
}
}),new objj_method(sel_getUid("setInitialFirstResponder:"),function(_ac,_ad,_ae){
with(_ac){
_initialFirstResponder=_ae;
}
}),new objj_method(sel_getUid("makeFirstResponder:"),function(_af,_b0,_b1){
with(_af){
if(_firstResponder===_b1){
return YES;
}
if(!objj_msgSend(_firstResponder,"resignFirstResponder")){
return NO;
}
if(!_b1||!objj_msgSend(_b1,"acceptsFirstResponder")||!objj_msgSend(_b1,"becomeFirstResponder")){
_firstResponder=_af;
return NO;
}
_firstResponder=_b1;
return YES;
}
}),new objj_method(sel_getUid("firstResponder"),function(_b2,_b3){
with(_b2){
return _firstResponder;
}
}),new objj_method(sel_getUid("acceptsMouseMovedEvents"),function(_b4,_b5){
with(_b4){
return _acceptsMouseMovedEvents;
}
}),new objj_method(sel_getUid("setAcceptsMouseMovedEvents:"),function(_b6,_b7,_b8){
with(_b6){
_acceptsMouseMovedEvents=_b8;
}
}),new objj_method(sel_getUid("ignoresMouseEvents"),function(_b9,_ba){
with(_b9){
return _ignoresMouseEvents;
}
}),new objj_method(sel_getUid("setIgnoresMouseEvents:"),function(_bb,_bc,_bd){
with(_bb){
_ignoresMouseEvents=_bd;
}
}),new objj_method(sel_getUid("title"),function(_be,_bf){
with(_be){
return _title;
}
}),new objj_method(sel_getUid("setTitle:"),function(_c0,_c1,_c2){
with(_c0){
_title=_c2;
objj_msgSend(_windowView,"setTitle:",_c2);
objj_msgSend(_c0,"_synchronizeMenuBarTitleWithWindowTitle");
}
}),new objj_method(sel_getUid("setTitleWithRepresentedFilename:"),function(_c3,_c4,_c5){
with(_c3){
objj_msgSend(_c3,"setRepresentedFilename:",_c5);
objj_msgSend(_c3,"setTitle:",objj_msgSend(_c5,"lastPathComponent"));
}
}),new objj_method(sel_getUid("setRepresentedFilename:"),function(_c6,_c7,_c8){
with(_c6){
objj_msgSend(_c6,"setRepresentedURL:",_c8);
}
}),new objj_method(sel_getUid("representedFilename"),function(_c9,_ca){
with(_c9){
return _representedURL;
}
}),new objj_method(sel_getUid("setRepresentedURL:"),function(_cb,_cc,_cd){
with(_cb){
_representedURL=_cd;
}
}),new objj_method(sel_getUid("representedURL"),function(_ce,_cf){
with(_ce){
return _representedURL;
}
}),new objj_method(sel_getUid("screen"),function(_d0,_d1){
with(_d0){
return objj_msgSend(objj_msgSend(CPScreen,"alloc"),"init");
}
}),new objj_method(sel_getUid("setMovableByWindowBackground:"),function(_d2,_d3,_d4){
with(_d2){
_isMovableByWindowBackground=_d4;
}
}),new objj_method(sel_getUid("isMovableByWindowBackground"),function(_d5,_d6){
with(_d5){
return _isMovableByWindowBackground;
}
}),new objj_method(sel_getUid("center"),function(_d7,_d8){
with(_d7){
if(_isFullPlatformWindow){
return;
}
var _d9=objj_msgSend(_d7,"frame").size,_da=objj_msgSend(CPPlatform,"isBrowser")?objj_msgSend(_platformWindow,"contentBounds").size:objj_msgSend(objj_msgSend(_d7,"screen"),"visibleFrame").size;
var _db=CGPointMake((_da.width-_d9.width)/2,(_da.height-_d9.height)/2);
if(_db.x<0){
_db.x=0;
}
if(_db.y<0){
_db.y=0;
}
objj_msgSend(_d7,"setFrameOrigin:",_db);
}
}),new objj_method(sel_getUid("sendEvent:"),function(_dc,_dd,_de){
with(_dc){
var _df=objj_msgSend(_de,"type"),_e0=objj_msgSend(_de,"locationInWindow");
switch(_df){
case CPFlagsChanged:
return objj_msgSend(objj_msgSend(_dc,"firstResponder"),"flagsChanged:",_de);
case CPKeyUp:
return objj_msgSend(objj_msgSend(_dc,"firstResponder"),"keyUp:",_de);
case CPKeyDown:
if(objj_msgSend(_de,"charactersIgnoringModifiers")===CPTabCharacter){
if(objj_msgSend(_de,"modifierFlags")&CPShiftKeyMask){
objj_msgSend(_dc,"selectPreviousKeyView:",_dc);
}else{
objj_msgSend(_dc,"selectNextKeyView:",_dc);
}
return;
}else{
if(objj_msgSend(_de,"charactersIgnoringModifiers")===CPBackTabCharacter){
return objj_msgSend(_dc,"selectPreviousKeyView:",_dc);
}
}
objj_msgSend(objj_msgSend(_dc,"firstResponder"),"keyDown:",_de);
if(!objj_msgSend(_dc,"disableKeyEquivalentForDefaultButton")){
var _e1=objj_msgSend(_dc,"defaultButton"),_e2=objj_msgSend(_e1,"keyEquivalent"),_e3=objj_msgSend(_e1,"keyEquivalentModifierMask");
if(objj_msgSend(_de,"_triggersKeyEquivalent:withModifierMask:",_e2,_e3)){
objj_msgSend(objj_msgSend(_dc,"defaultButton"),"performClick:",_dc);
}
}
return;
case CPScrollWheel:
return objj_msgSend(objj_msgSend(_windowView,"hitTest:",_e0),"scrollWheel:",_de);
case CPLeftMouseUp:
case CPRightMouseUp:
var _e4=_leftMouseDownView,_e5=_df==CPRightMouseUp?sel_getUid("rightMouseUp:"):sel_getUid("mouseUp:");
if(!_e4){
_e4=objj_msgSend(_windowView,"hitTest:",_e0);
}
objj_msgSend(_e4,"performSelector:withObject:",_e5,_de);
_leftMouseDownView=nil;
return;
case CPLeftMouseDown:
case CPRightMouseDown:
_leftMouseDownView=objj_msgSend(_windowView,"hitTest:",_e0);
if(_leftMouseDownView!=_firstResponder&&objj_msgSend(_leftMouseDownView,"acceptsFirstResponder")){
objj_msgSend(_dc,"makeFirstResponder:",_leftMouseDownView);
}
objj_msgSend(CPApp,"activateIgnoringOtherApps:",YES);
var _e6=objj_msgSend(_de,"window"),_e5=_df==CPRightMouseDown?sel_getUid("rightMouseDown:"):sel_getUid("mouseDown:");
if(objj_msgSend(_e6,"isKeyWindow")||objj_msgSend(_e6,"becomesKeyOnlyIfNeeded")&&!objj_msgSend(_leftMouseDownView,"needsPanelToBecomeKey")){
return objj_msgSend(_leftMouseDownView,"performSelector:withObject:",_e5,_de);
}else{
objj_msgSend(_dc,"makeKeyAndOrderFront:",_dc);
if(objj_msgSend(_leftMouseDownView,"acceptsFirstMouse:",_de)){
return objj_msgSend(_leftMouseDownView,"performSelector:withObject:",_e5,_de);
}
}
break;
case CPLeftMouseDragged:
case CPRightMouseDragged:
if(!_leftMouseDownView){
return objj_msgSend(objj_msgSend(_windowView,"hitTest:",_e0),"mouseDragged:",_de);
}
var _e5;
if(_df==CPRightMouseDragged){
_e5=sel_getUid("rightMouseDragged:");
if(!objj_msgSend(_leftMouseDownView,"respondsToSelector:",_e5)){
_e5=nil;
}
}
if(!_e5){
_e5=sel_getUid("mouseDragged:");
}
return objj_msgSend(_leftMouseDownView,"performSelector:withObject:",_e5,_de);
case CPMouseMoved:
if(!_acceptsMouseMovedEvents){
return;
}
if(!_mouseEnteredStack){
_mouseEnteredStack=[];
}
var _e7=objj_msgSend(_windowView,"hitTest:",_e0);
if(objj_msgSend(_mouseEnteredStack,"count")&&objj_msgSend(_mouseEnteredStack,"lastObject")===_e7){
return objj_msgSend(_e7,"mouseMoved:",_de);
}
var _e8=_e7,_e9=[];
while(_e8){
_e9.unshift(_e8);
_e8=objj_msgSend(_e8,"superview");
}
var _ea=MIN(_mouseEnteredStack.length,_e9.length);
while(_ea--){
if(_mouseEnteredStack[_ea]===_e9[_ea]){
break;
}
}
var _eb=_ea+1,_ec=_mouseEnteredStack.length;
if(_eb<_ec){
var _ed=objj_msgSend(CPEvent,"mouseEventWithType:location:modifierFlags:timestamp:windowNumber:context:eventNumber:clickCount:pressure:",CPMouseExited,_e0,objj_msgSend(_de,"modifierFlags"),objj_msgSend(_de,"timestamp"),_windowNumber,nil,-1,1,0);
for(;_eb<_ec;++_eb){
objj_msgSend(_mouseEnteredStack[_eb],"mouseExited:",_ed);
}
}
_eb=_ea+1;
_ec=_e9.length;
if(_eb<_ec){
var _ed=objj_msgSend(CPEvent,"mouseEventWithType:location:modifierFlags:timestamp:windowNumber:context:eventNumber:clickCount:pressure:",CPMouseEntered,_e0,objj_msgSend(_de,"modifierFlags"),objj_msgSend(_de,"timestamp"),_windowNumber,nil,-1,1,0);
for(;_eb<_ec;++_eb){
objj_msgSend(_e9[_eb],"mouseEntered:",_ed);
}
}
_mouseEnteredStack=_e9;
objj_msgSend(_e7,"mouseMoved:",_de);
}
}
}),new objj_method(sel_getUid("windowNumber"),function(_ee,_ef){
with(_ee){
return _windowNumber;
}
}),new objj_method(sel_getUid("becomeKeyWindow"),function(_f0,_f1){
with(_f0){
CPApp._keyWindow=_f0;
if(_firstResponder!==_f0&&objj_msgSend(_firstResponder,"respondsToSelector:",sel_getUid("becomeKeyWindow"))){
objj_msgSend(_firstResponder,"becomeKeyWindow");
}
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:",CPWindowDidBecomeKeyNotification,_f0);
}
}),new objj_method(sel_getUid("canBecomeKeyWindow"),function(_f2,_f3){
with(_f2){
return YES;
}
}),new objj_method(sel_getUid("isKeyWindow"),function(_f4,_f5){
with(_f4){
return objj_msgSend(CPApp,"keyWindow")==_f4;
}
}),new objj_method(sel_getUid("makeKeyAndOrderFront:"),function(_f6,_f7,_f8){
with(_f6){
objj_msgSend(_f6,"orderFront:",_f6);
objj_msgSend(_f6,"makeKeyWindow");
objj_msgSend(_f6,"makeMainWindow");
}
}),new objj_method(sel_getUid("makeKeyWindow"),function(_f9,_fa){
with(_f9){
if(objj_msgSend(CPApp,"keyWindow")===_f9||!objj_msgSend(_f9,"canBecomeKeyWindow")){
return;
}
objj_msgSend(objj_msgSend(CPApp,"keyWindow"),"resignKeyWindow");
objj_msgSend(_f9,"becomeKeyWindow");
}
}),new objj_method(sel_getUid("resignKeyWindow"),function(_fb,_fc){
with(_fb){
if(_firstResponder!==_fb&&objj_msgSend(_firstResponder,"respondsToSelector:",sel_getUid("resignKeyWindow"))){
objj_msgSend(_firstResponder,"resignKeyWindow");
}
if(CPApp._keyWindow===_fb){
CPApp._keyWindow=nil;
}
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:",CPWindowDidResignKeyNotification,_fb);
}
}),new objj_method(sel_getUid("dragImage:at:offset:event:pasteboard:source:slideBack:"),function(_fd,_fe,_ff,_100,_101,_102,_103,_104,_105){
with(_fd){
objj_msgSend(objj_msgSend(CPDragServer,"sharedDragServer"),"dragImage:fromWindow:at:offset:event:pasteboard:source:slideBack:",_ff,_fd,objj_msgSend(_fd,"convertBaseToGlobal:",_100),_101,_102,_103,_104,_105);
}
}),new objj_method(sel_getUid("_noteRegisteredDraggedTypes:"),function(self,_106,_107){
with(self){
if(!_107){
return;
}
if(!_inclusiveRegisteredDraggedTypes){
_inclusiveRegisteredDraggedTypes=objj_msgSend(CPCountedSet,"set");
}
objj_msgSend(_inclusiveRegisteredDraggedTypes,"unionSet:",_107);
}
}),new objj_method(sel_getUid("_noteUnregisteredDraggedTypes:"),function(self,_108,_109){
with(self){
if(!_109){
return;
}
objj_msgSend(_inclusiveRegisteredDraggedTypes,"minusSet:",_109);
if(objj_msgSend(_inclusiveRegisteredDraggedTypes,"count")===0){
_inclusiveRegisteredDraggedTypes=nil;
}
}
}),new objj_method(sel_getUid("dragView:at:offset:event:pasteboard:source:slideBack:"),function(self,_10a,_10b,_10c,_10d,_10e,_10f,_110,_111){
with(self){
objj_msgSend(objj_msgSend(CPDragServer,"sharedDragServer"),"dragView:fromWindow:at:offset:event:pasteboard:source:slideBack:",_10b,self,objj_msgSend(self,"convertBaseToGlobal:",_10c),_10d,_10e,_10f,_110,_111);
}
}),new objj_method(sel_getUid("registerForDraggedTypes:"),function(self,_112,_113){
with(self){
if(!_113){
return;
}
objj_msgSend(self,"_noteUnregisteredDraggedTypes:",_registeredDraggedTypes);
objj_msgSend(_registeredDraggedTypes,"addObjectsFromArray:",_113);
objj_msgSend(self,"_noteRegisteredDraggedTypes:",_registeredDraggedTypes);
_registeredDraggedTypesArray=nil;
}
}),new objj_method(sel_getUid("registeredDraggedTypes"),function(self,_114){
with(self){
if(!_registeredDraggedTypesArray){
_registeredDraggedTypesArray=objj_msgSend(_registeredDraggedTypes,"allObjects");
}
return _registeredDraggedTypesArray;
}
}),new objj_method(sel_getUid("unregisterDraggedTypes"),function(self,_115){
with(self){
objj_msgSend(self,"_noteUnregisteredDraggedTypes:",_registeredDraggedTypes);
_registeredDraggedTypes=objj_msgSend(CPSet,"set");
_registeredDraggedTypesArray=[];
}
}),new objj_method(sel_getUid("setDocumentEdited:"),function(self,_116,_117){
with(self){
if(_isDocumentEdited==_117){
return;
}
_isDocumentEdited=_117;
objj_msgSend(CPMenu,"_setMenuBarIconImageAlphaValue:",_isDocumentEdited?0.5:1);
objj_msgSend(_windowView,"setDocumentEdited:",_117);
}
}),new objj_method(sel_getUid("isDocumentEdited"),function(self,_118){
with(self){
return _isDocumentEdited;
}
}),new objj_method(sel_getUid("setDocumentSaving:"),function(self,_119,_11a){
with(self){
if(_isDocumentSaving==_11a){
return;
}
_isDocumentSaving=_11a;
objj_msgSend(self,"_synchronizeSaveMenuWithDocumentSaving");
objj_msgSend(_windowView,"windowDidChangeDocumentSaving");
}
}),new objj_method(sel_getUid("isDocumentSaving"),function(self,_11b){
with(self){
return _isDocumentSaving;
}
}),new objj_method(sel_getUid("_synchronizeSaveMenuWithDocumentSaving"),function(self,_11c){
with(self){
if(!objj_msgSend(self,"isMainWindow")){
return;
}
var _11d=objj_msgSend(CPApp,"mainMenu"),_11e=objj_msgSend(_11d,"indexOfItemWithTitle:",_isDocumentSaving?"Save":"Saving...");
if(_11e==CPNotFound){
return;
}
var item=objj_msgSend(_11d,"itemAtIndex:",_11e);
if(_isDocumentSaving){
_7=objj_msgSend(item,"image");
objj_msgSend(item,"setTitle:","Saving...");
objj_msgSend(item,"setImage:",_8);
objj_msgSend(item,"setEnabled:",NO);
}else{
objj_msgSend(item,"setTitle:","Save");
objj_msgSend(item,"setImage:",_7);
objj_msgSend(item,"setEnabled:",YES);
}
}
}),new objj_method(sel_getUid("performMiniaturize:"),function(self,_11f,_120){
with(self){
objj_msgSend(self,"miniaturize:",_120);
}
}),new objj_method(sel_getUid("miniaturize:"),function(self,_121,_122){
with(self){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:",CPWindowWillMiniaturizeNotification,self);
objj_msgSend(objj_msgSend(self,"platformWindow"),"miniaturize:",_122);
objj_msgSend(self,"_updateMainAndKeyWindows");
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:",CPWindowDidMiniaturizeNotification,self);
_isMiniaturized=YES;
}
}),new objj_method(sel_getUid("deminiaturize:"),function(self,_123,_124){
with(self){
objj_msgSend(objj_msgSend(self,"platformWindow"),"deminiaturize:",_124);
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:",CPWindowDidDeminiaturizeNotification,self);
_isMiniaturized=NO;
}
}),new objj_method(sel_getUid("isMiniaturized"),function(self,_125){
with(self){
return _isMiniaturized;
}
}),new objj_method(sel_getUid("performClose:"),function(self,_126,_127){
with(self){
if(!(_styleMask&CPClosableWindowMask)){
return;
}
if(objj_msgSend(self,"isFullBridge")){
var _128=objj_msgSend(CPApp,"currentEvent");
if(objj_msgSend(_128,"type")===CPKeyDown&&objj_msgSend(_128,"characters")==="w"&&(objj_msgSend(_128,"modifierFlags")&CPPlatformActionKeyMask)){
objj_msgSend(objj_msgSend(self,"platformWindow"),"_propagateCurrentDOMEvent:",YES);
return;
}
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("windowShouldClose:"))){
if(!objj_msgSend(_delegate,"windowShouldClose:",self)){
return;
}
}else{
if(objj_msgSend(self,"respondsToSelector:",sel_getUid("windowShouldClose:"))&&!objj_msgSend(self,"windowShouldClose:",self)){
return;
}
}
var _129=objj_msgSend(_windowController,"documents");
if(objj_msgSend(_129,"count")){
var _12a=objj_msgSend(_129,"indexOfObject:",objj_msgSend(_windowController,"document"));
objj_msgSend(_129[_12a],"shouldCloseWindowController:delegate:shouldCloseSelector:contextInfo:",_windowController,self,sel_getUid("_windowControllerContainingDocument:shouldClose:contextInfo:"),{documents:objj_msgSend(_129,"copy"),visited:0,index:_12a});
}else{
objj_msgSend(self,"close");
}
}
}),new objj_method(sel_getUid("_windowControllerContainingDocument:shouldClose:contextInfo:"),function(self,_12b,_12c,_12d,_12e){
with(self){
if(_12d){
var _12f=objj_msgSend(self,"windowController"),_130=_12e.documents,_131=objj_msgSend(_130,"count"),_132=++_12e.visited,_133=++_12e.index%_131;
objj_msgSend(_12c,"removeWindowController:",_12f);
if(_132<_131){
objj_msgSend(_12f,"setDocument:",_130[_133]);
objj_msgSend(_130[_133],"shouldCloseWindowController:delegate:shouldCloseSelector:contextInfo:",_windowController,self,sel_getUid("_windowControllerContainingDocument:shouldClose:contextInfo:"),_12e);
}else{
objj_msgSend(self,"close");
}
}
}
}),new objj_method(sel_getUid("close"),function(self,_134){
with(self){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:",CPWindowWillCloseNotification,self);
objj_msgSend(self,"orderOut:",nil);
}
}),new objj_method(sel_getUid("isMainWindow"),function(self,_135){
with(self){
return objj_msgSend(CPApp,"mainWindow")==self;
}
}),new objj_method(sel_getUid("canBecomeMainWindow"),function(self,_136){
with(self){
if(objj_msgSend(self,"isVisible")){
return YES;
}
return NO;
}
}),new objj_method(sel_getUid("makeMainWindow"),function(self,_137){
with(self){
if(objj_msgSend(CPApp,"mainWindow")===self||!objj_msgSend(self,"canBecomeMainWindow")){
return;
}
objj_msgSend(objj_msgSend(CPApp,"mainWindow"),"resignMainWindow");
objj_msgSend(self,"becomeMainWindow");
}
}),new objj_method(sel_getUid("becomeMainWindow"),function(self,_138){
with(self){
CPApp._mainWindow=self;
objj_msgSend(self,"_synchronizeMenuBarTitleWithWindowTitle");
objj_msgSend(self,"_synchronizeSaveMenuWithDocumentSaving");
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:",CPWindowDidBecomeMainNotification,self);
}
}),new objj_method(sel_getUid("resignMainWindow"),function(self,_139){
with(self){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:",CPWindowDidResignMainNotification,self);
if(CPApp._mainWindow===self){
CPApp._mainWindow=nil;
}
}
}),new objj_method(sel_getUid("_updateMainAndKeyWindows"),function(self,_13a){
with(self){
var _13b=objj_msgSend(CPApp,"orderedWindows"),_13c=objj_msgSend(_13b,"count");
if(objj_msgSend(self,"isKeyWindow")){
var _13d=objj_msgSend(CPApp,"keyWindow");
objj_msgSend(self,"resignKeyWindow");
if(_13d&&_13d!==self&&objj_msgSend(_13d,"canBecomeKeyWindow")){
objj_msgSend(_13d,"makeKeyWindow");
}else{
var _13e=objj_msgSend(CPApp,"mainMenu"),_13f=objj_getClass("_CPMenuBarWindow"),_140;
for(var i=0;i<_13c;i++){
var _141=_13b[i];
if(objj_msgSend(_141,"isKindOfClass:",_13f)){
_140=_141;
}
if(_141===self||_141===_140){
continue;
}
if(objj_msgSend(_141,"isVisible")&&objj_msgSend(_141,"canBecomeKeyWindow")){
objj_msgSend(_141,"makeKeyWindow");
break;
}
}
if(!objj_msgSend(CPApp,"keyWindow")){
objj_msgSend(_140,"makeKeyWindow");
}
}
}
if(objj_msgSend(self,"isMainWindow")){
var _142=objj_msgSend(CPApp,"mainWindow");
objj_msgSend(self,"resignMainWindow");
if(_142&&_142!==self&&objj_msgSend(_142,"canBecomeMainWindow")){
objj_msgSend(_142,"makeMainWindow");
}else{
var _13e=objj_msgSend(CPApp,"mainMenu"),_13f=objj_getClass("_CPMenuBarWindow"),_140;
for(var i=0;i<_13c;i++){
var _141=_13b[i];
if(objj_msgSend(_141,"isKindOfClass:",_13f)){
_140=_141;
}
if(_141===self||_141===_140){
continue;
}
if(objj_msgSend(_141,"isVisible")&&objj_msgSend(_141,"canBecomeMainWindow")){
objj_msgSend(_141,"makeMainWindow");
break;
}
}
}
}
}
}),new objj_method(sel_getUid("toolbar"),function(self,_143){
with(self){
return _toolbar;
}
}),new objj_method(sel_getUid("setToolbar:"),function(self,_144,_145){
with(self){
if(_toolbar===_145){
return;
}
objj_msgSend(objj_msgSend(_145,"_window"),"setToolbar:",nil);
objj_msgSend(_toolbar,"_setWindow:",nil);
_toolbar=_145;
objj_msgSend(_toolbar,"_setWindow:",self);
objj_msgSend(self,"_noteToolbarChanged");
}
}),new objj_method(sel_getUid("toggleToolbarShown:"),function(self,_146,_147){
with(self){
var _148=objj_msgSend(self,"toolbar");
objj_msgSend(_148,"setVisible:",!objj_msgSend(_148,"isVisible"));
}
}),new objj_method(sel_getUid("_noteToolbarChanged"),function(self,_149){
with(self){
var _14a=CGRectMakeCopy(objj_msgSend(self,"frame")),_14b;
objj_msgSend(_windowView,"noteToolbarChanged");
if(_isFullPlatformWindow){
_14b=objj_msgSend(_platformWindow,"visibleFrame");
}else{
_14b=CGRectMakeCopy(objj_msgSend(self,"frame"));
_14b.origin=_14a.origin;
}
objj_msgSend(self,"setFrame:",_14b);
}
}),new objj_method(sel_getUid("_setFrame:delegate:duration:curve:"),function(self,_14c,_14d,_14e,_14f,_150){
with(self){
objj_msgSend(_frameAnimation,"stopAnimation");
_frameAnimation=objj_msgSend(objj_msgSend(_CPWindowFrameAnimation,"alloc"),"initWithWindow:targetFrame:",self,_14d);
objj_msgSend(_frameAnimation,"setDelegate:",_14e);
objj_msgSend(_frameAnimation,"setAnimationCurve:",_150);
objj_msgSend(_frameAnimation,"setDuration:",_14f);
objj_msgSend(_frameAnimation,"startAnimation");
}
}),new objj_method(sel_getUid("animationResizeTime:"),function(self,_151,_152){
with(self){
return _9;
}
}),new objj_method(sel_getUid("_setAttachedSheetFrameOrigin"),function(self,_153){
with(self){
var _154=objj_msgSend(self,"attachedSheet");
var _155=objj_msgSend(objj_msgSend(self,"contentView"),"frame"),_156=CGRectMakeCopy(objj_msgSend(_154,"frame"));
_156.origin.y=CGRectGetMinY(_frame)+CGRectGetMinY(_155);
_156.origin.x=CGRectGetMinX(_frame)+FLOOR((CGRectGetWidth(_frame)-CGRectGetWidth(_156))/2);
objj_msgSend(_154,"setFrame:display:animate:",_156,YES,NO);
}
}),new objj_method(sel_getUid("_attachSheet:modalDelegate:didEndSelector:contextInfo:"),function(self,_157,_158,_159,_15a,_15b){
with(self){
var _15c=objj_msgSend(_158,"frame");
_sheetContext={"sheet":_158,"modalDelegate":_159,"endSelector":_15a,"contextInfo":_15b,"frame":CGRectMakeCopy(_15c),"returnCode":-1,"opened":NO};
objj_msgSend(self,"_attachSheetWindow:",_158);
}
}),new objj_method(sel_getUid("_attachSheetWindow:"),function(self,_15d,_15e){
with(self){
var _15f=objj_msgSend(_15e,"frame"),_160=objj_msgSend(self,"frame"),_161=objj_msgSend(_15e,"contentView");
objj_msgSend(self,"_setUpMasksForView:",_161);
_15e._isSheet=YES;
_15e._parentView=self;
var _162=_160.origin.x+FLOOR((_160.size.width-_15f.size.width)/2),_163=_160.origin.y+objj_msgSend(objj_msgSend(self,"contentView"),"frame").origin.y,_164=CGRectMake(_162,_163,_15f.size.width,0),_165=CGRectMake(_162,_163,_15f.size.width,_15f.size.height);
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:",CPWindowWillBeginSheetNotification,self);
objj_msgSend(CPApp,"runModalForWindow:",_15e);
objj_msgSend(_15e,"orderFront:",self);
objj_msgSend(_15e,"setFrame:display:animate:",_164,YES,NO);
_sheetContext["opened"]=YES;
objj_msgSend(_15e,"_setFrame:delegate:duration:curve:",_165,self,objj_msgSend(self,"animationResizeTime:",_165),CPAnimationEaseOut);
objj_msgSend(_15e,"becomeKeyWindow");
}
}),new objj_method(sel_getUid("_detachSheetWindow"),function(self,_166){
with(self){
var _167=objj_msgSend(self,"attachedSheet"),_168=objj_msgSend(_167,"frame"),_169=CGRectMakeCopy(_168);
_169.size.height=0;
_sheetContext["frame"]=_168;
var _16a=objj_msgSend(_167,"contentView");
objj_msgSend(self,"_setUpMasksForView:",_16a);
_sheetContext["opened"]=NO;
objj_msgSend(_167,"_setFrame:delegate:duration:curve:",_169,self,objj_msgSend(self,"animationResizeTime:",_169),CPAnimationEaseIn);
}
}),new objj_method(sel_getUid("animationDidEnd:"),function(self,_16b,anim){
with(self){
var _16c=_sheetContext["sheet"];
if(anim._window!=_16c){
return;
}
var _16d=objj_msgSend(_16c,"contentView");
if(_sheetContext["opened"]===YES){
objj_msgSend(self,"_restoreMasksForView:",_16d);
return;
}
objj_msgSend(CPApp,"stopModal");
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:",CPWindowDidEndSheetNotification,self);
objj_msgSend(_16c,"orderOut:",self);
var _16e=_sheetContext["frame"];
objj_msgSend(_16c,"setFrame:",_16e);
objj_msgSend(self,"_restoreMasksForView:",_16d);
var _16f=_sheetContext["modalDelegate"],_170=_sheetContext["endSelector"],_171=_sheetContext["returnCode"],_172=_sheetContext["contextInfo"];
_sheetContext=nil;
_16c._parentView=nil;
if(_16f!=nil&&_170!=nil){
objj_msgSend(_16f,_170,_16c,_171,_172);
}
}
}),new objj_method(sel_getUid("_setUpMasksForView:"),function(self,_173,_174){
with(self){
var _175=objj_msgSend(_174,"subviews");
objj_msgSend(_175,"addObject:",_174);
for(var i=0,_176=objj_msgSend(_175,"count");i<_176;i++){
var view=objj_msgSend(_175,"objectAtIndex:",i),mask=objj_msgSend(view,"autoresizingMask"),_177=(mask&CPViewMinYMargin)?128:CPViewMinYMargin;
objj_msgSend(view,"setAutoresizingMask:",(mask|_177));
}
}
}),new objj_method(sel_getUid("_restoreMasksForView:"),function(self,_178,_179){
with(self){
var _17a=objj_msgSend(_179,"subviews");
objj_msgSend(_17a,"addObject:",_179);
for(var i=0,_17b=objj_msgSend(_17a,"count");i<_17b;i++){
var view=objj_msgSend(_17a,"objectAtIndex:",i),mask=objj_msgSend(view,"autoresizingMask"),_17c=(mask&128)?128:CPViewMinYMargin;
objj_msgSend(view,"setAutoresizingMask:",(mask&(~_17c)));
}
}
}),new objj_method(sel_getUid("attachedSheet"),function(self,_17d){
with(self){
if(_sheetContext===nil){
return nil;
}
return _sheetContext["sheet"];
}
}),new objj_method(sel_getUid("isSheet"),function(self,_17e){
with(self){
return _isSheet;
}
}),new objj_method(sel_getUid("becomesKeyOnlyIfNeeded"),function(self,_17f){
with(self){
return NO;
}
}),new objj_method(sel_getUid("worksWhenModal"),function(self,_180){
with(self){
return NO;
}
}),new objj_method(sel_getUid("performKeyEquivalent:"),function(self,_181,_182){
with(self){
return objj_msgSend(objj_msgSend(self,"contentView"),"performKeyEquivalent:",_182);
}
}),new objj_method(sel_getUid("keyDown:"),function(self,_183,_184){
with(self){
if(objj_msgSend(_184,"_couldBeKeyEquivalent")&&objj_msgSend(self,"performKeyEquivalent:",_184)){
return;
}
if(!objj_msgSend(self,"_processKeyboardUIKey:",_184)){
objj_msgSendSuper({receiver:self,super_class:objj_getClass("CPWindow").super_class},"keyDown:",_184);
}
}
}),new objj_method(sel_getUid("_processKeyboardUIKey:"),function(self,_185,_186){
with(self){
var _187=objj_msgSend(_186,"charactersIgnoringModifiers");
if(!objj_msgSend(_a,"containsObject:",_187)){
return NO;
}
var _188=objj_msgSend(CPKeyBinding,"selectorsForKey:modifierFlags:",_187,0);
if(objj_msgSend(_188,"count")<=0){
return NO;
}
if(_187!==CPEscapeFunctionKey){
var _189=objj_msgSend(_188,"objectAtIndex:",0);
return objj_msgSend(objj_msgSend(self,"firstResponder"),"tryToPerform:with:",_189,self);
}else{
objj_msgSend(objj_msgSend(self,"firstResponder"),"doCommandBySelector:",sel_getUid("complete:"));
}
return NO;
}
}),new objj_method(sel_getUid("_dirtyKeyViewLoop"),function(self,_18a){
with(self){
if(_autorecalculatesKeyViewLoop){
_keyViewLoopIsDirty=YES;
}
}
}),new objj_method(sel_getUid("_hasKeyViewLoop"),function(self,_18b){
with(self){
var _18c=_18d(self),_18e=objj_msgSend(_18c,"count");
while(_18e--){
if(objj_msgSend(_18c[_18e],"nextKeyView")){
return YES;
}
}
return NO;
}
}),new objj_method(sel_getUid("recalculateKeyViewLoop"),function(self,_18f){
with(self){
var _190=_18d(self);
objj_msgSend(_190,"sortUsingFunction:context:",_191,nil);
var _192=0,_193=objj_msgSend(_190,"count");
for(;_192<_193;++_192){
objj_msgSend(_190[_192],"setNextKeyView:",_190[(_192+1)%_193]);
}
_keyViewLoopIsDirty=NO;
}
}),new objj_method(sel_getUid("setAutorecalculatesKeyViewLoop:"),function(self,_194,_195){
with(self){
if(_autorecalculatesKeyViewLoop===_195){
return;
}
_autorecalculatesKeyViewLoop=_195;
if(_keyViewLoopIsDirty){
objj_msgSend(self,"recalculateKeyViewLoop");
}else{
if(_autorecalculatesKeyViewLoop){
objj_msgSend(self,"_dirtyKeyViewLoop");
}
}
}
}),new objj_method(sel_getUid("autorecalculatesKeyViewLoop"),function(self,_196){
with(self){
return _autorecalculatesKeyViewLoop;
}
}),new objj_method(sel_getUid("selectNextKeyView:"),function(self,_197,_198){
with(self){
if(objj_msgSend(_firstResponder,"isKindOfClass:",objj_msgSend(CPView,"class"))){
objj_msgSend(self,"selectKeyViewFollowingView:",_firstResponder);
}
}
}),new objj_method(sel_getUid("selectPreviousKeyView:"),function(self,_199,_19a){
with(self){
if(objj_msgSend(_firstResponder,"isKindOfClass:",objj_msgSend(CPView,"class"))){
objj_msgSend(self,"selectKeyViewPrecedingView:",_firstResponder);
}
}
}),new objj_method(sel_getUid("selectKeyViewFollowingView:"),function(self,_19b,_19c){
with(self){
if(_keyViewLoopIsDirty){
objj_msgSend(self,"recalculateKeyViewLoop");
}
objj_msgSend(self,"makeFirstResponder:",objj_msgSend(_19c,"nextValidKeyView"));
}
}),new objj_method(sel_getUid("selectKeyViewPrecedingView:"),function(self,_19d,_19e){
with(self){
if(_keyViewLoopIsDirty){
objj_msgSend(self,"recalculateKeyViewLoop");
}
objj_msgSend(self,"makeFirstResponder:",objj_msgSend(_19e,"previousValidKeyView"));
}
}),new objj_method(sel_getUid("setDefaultButtonCell:"),function(self,_19f,_1a0){
with(self){
objj_msgSend(self,"setDefaultButton:",_1a0);
}
}),new objj_method(sel_getUid("defaultButtonCell"),function(self,_1a1){
with(self){
return objj_msgSend(self,"defaultButton");
}
}),new objj_method(sel_getUid("setDefaultButton:"),function(self,_1a2,_1a3){
with(self){
if(_defaultButton===_1a3){
return;
}
if(objj_msgSend(_defaultButton,"keyEquivalent")===CPCarriageReturnCharacter){
objj_msgSend(_defaultButton,"setKeyEquivalent:",nil);
}
_defaultButton=_1a3;
if(objj_msgSend(_defaultButton,"keyEquivalent")!==CPCarriageReturnCharacter){
objj_msgSend(_defaultButton,"setKeyEquivalent:",CPCarriageReturnCharacter);
}
}
}),new objj_method(sel_getUid("defaultButton"),function(self,_1a4){
with(self){
return _defaultButton;
}
}),new objj_method(sel_getUid("enableKeyEquivalentForDefaultButton"),function(self,_1a5){
with(self){
_defaultButtonEnabled=YES;
}
}),new objj_method(sel_getUid("enableKeyEquivalentForDefaultButtonCell"),function(self,_1a6){
with(self){
objj_msgSend(self,"enableKeyEquivalentForDefaultButton");
}
}),new objj_method(sel_getUid("disableKeyEquivalentForDefaultButton"),function(self,_1a7){
with(self){
_defaultButtonEnabled=NO;
}
}),new objj_method(sel_getUid("disableKeyEquivalentForDefaultButtonCell"),function(self,_1a8){
with(self){
objj_msgSend(self,"disableKeyEquivalentForDefaultButton");
}
})]);
class_addMethods(_c,[new objj_method(sel_getUid("initialize"),function(self,_1a9){
with(self){
if(self!=objj_msgSend(CPWindow,"class")){
return;
}
var _1aa=objj_msgSend(CPBundle,"bundleForClass:",objj_msgSend(CPWindow,"class"));
_8=objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_1aa,"pathForResource:","CPProgressIndicator/CPProgressIndicatorSpinningStyleRegular.gif"),CGSizeMake(16,16));
}
}),new objj_method(sel_getUid("_windowViewClassForStyleMask:"),function(self,_1ab,_1ac){
with(self){
if(_1ac&CPHUDBackgroundWindowMask){
return _CPHUDWindowView;
}else{
if(_1ac===CPBorderlessWindowMask){
return _CPBorderlessWindowView;
}else{
if(_1ac&CPDocModalWindowMask){
return _CPDocModalWindowView;
}
}
}
return _CPStandardWindowView;
}
}),new objj_method(sel_getUid("_windowViewClassForFullPlatformWindowStyleMask:"),function(self,_1ad,_1ae){
with(self){
return _CPBorderlessBridgeWindowView;
}
}),new objj_method(sel_getUid("frameRectForContentRect:styleMask:"),function(self,_1af,_1b0,_1b1){
with(self){
return objj_msgSend(objj_msgSend(objj_msgSend(self,"class"),"_windowViewClassForStyleMask:",_1b1),"frameRectForContentRect:",_1b0);
}
})]);
var _18d=function(_1b2){
var _1b3=objj_msgSend(objj_msgSend(_1b2,"contentView"),"subviews"),_1b4=0;
for(;_1b4<_1b3.length;++_1b4){
_1b3=_1b3.concat(objj_msgSend(_1b3[_1b4],"subviews"));
}
return _1b3;
};
var _191=function(lhs,rhs,_1b5){
var _1b6=objj_msgSend(lhs,"convertRect:toView:",objj_msgSend(lhs,"bounds"),nil),_1b7=objj_msgSend(rhs,"convertRect:toView:",objj_msgSend(rhs,"bounds"),nil),lhsY=(_1b6.origin.y),rhsY=(_1b7.origin.y),lhsX=(_1b6.origin.x),rhsX=(_1b7.origin.x),_1b8=MIN((_1b6.origin.y+_1b6.size.height),(_1b7.origin.y+_1b7.size.height))-MAX(lhsY,rhsY);
if(_1b8>0){
if(lhsX<rhsX){
return CPOrderedAscending;
}
if(lhsX===rhsX){
return CPOrderedSame;
}
return CPOrderedDescending;
}
if(lhsY<rhsY){
return CPOrderedAscending;
}
if(lhsY===rhsY){
return CPOrderedSame;
}
return CPOrderedDescending;
};
var _b=objj_getClass("CPWindow");
if(!_b){
throw new SyntaxError("*** Could not find definition for class \"CPWindow\"");
}
var _c=_b.isa;
class_addMethods(_b,[new objj_method(sel_getUid("_synchronizeMenuBarTitleWithWindowTitle"),function(self,_1b9){
with(self){
if(!objj_msgSend(_windowController,"document")||!objj_msgSend(self,"isMainWindow")){
return;
}
objj_msgSend(CPMenu,"setMenuBarTitle:",_title);
}
})]);
var _b=objj_getClass("CPWindow");
if(!_b){
throw new SyntaxError("*** Could not find definition for class \"CPWindow\"");
}
var _c=_b.isa;
class_addMethods(_b,[new objj_method(sel_getUid("resizeWithOldPlatformWindowSize:"),function(self,_1ba,_1bb){
with(self){
if(objj_msgSend(self,"isFullPlatformWindow")){
return objj_msgSend(self,"setFrame:",objj_msgSend(_platformWindow,"visibleFrame"));
}
if(_autoresizingMask==CPWindowNotSizable){
return;
}
var _1bc=objj_msgSend(_platformWindow,"contentBounds"),_1bd=CGRectMakeCopy(_frame),dX=(CGRectGetWidth(_1bc)-_1bb.width)/(((_autoresizingMask&CPWindowMinXMargin)?1:0)+(_autoresizingMask&CPWindowWidthSizable?1:0)+(_autoresizingMask&CPWindowMaxXMargin?1:0)),dY=(CGRectGetHeight(_1bc)-_1bb.height)/((_autoresizingMask&CPWindowMinYMargin?1:0)+(_autoresizingMask&CPWindowHeightSizable?1:0)+(_autoresizingMask&CPWindowMaxYMargin?1:0));
if(_autoresizingMask&CPWindowMinXMargin){
_1bd.origin.x+=dX;
}
if(_autoresizingMask&CPWindowWidthSizable){
_1bd.size.width+=dX;
}
if(_autoresizingMask&CPWindowMinYMargin){
_1bd.origin.y+=dY;
}
if(_autoresizingMask&CPWindowHeightSizable){
_1bd.size.height+=dY;
}
objj_msgSend(self,"setFrame:",_1bd);
}
}),new objj_method(sel_getUid("setAutoresizingMask:"),function(self,_1be,_1bf){
with(self){
_autoresizingMask=_1bf;
}
}),new objj_method(sel_getUid("autoresizingMask"),function(self,_1c0){
with(self){
return _autoresizingMask;
}
}),new objj_method(sel_getUid("convertBaseToGlobal:"),function(self,_1c1,_1c2){
with(self){
return objj_msgSend(CPPlatform,"isBrowser")?objj_msgSend(self,"convertBaseToPlatformWindow:",_1c2):objj_msgSend(self,"convertBaseToScreen:",_1c2);
}
}),new objj_method(sel_getUid("convertGlobalToBase:"),function(self,_1c3,_1c4){
with(self){
return objj_msgSend(CPPlatform,"isBrowser")?objj_msgSend(self,"convertPlatformWindowToBase:",_1c4):objj_msgSend(self,"convertScreenToBase:",_1c4);
}
}),new objj_method(sel_getUid("convertBaseToPlatformWindow:"),function(self,_1c5,_1c6){
with(self){
if(objj_msgSend(self,"_sharesChromeWithPlatformWindow")){
return _1c6;
}
var _1c7=objj_msgSend(self,"frame").origin;
return {x:_1c6.x+_1c7.x,y:_1c6.y+_1c7.y};
}
}),new objj_method(sel_getUid("convertPlatformWindowToBase:"),function(self,_1c8,_1c9){
with(self){
if(objj_msgSend(self,"_sharesChromeWithPlatformWindow")){
return _1c9;
}
var _1ca=objj_msgSend(self,"frame").origin;
return {x:_1c9.x-_1ca.x,y:_1c9.y-_1ca.y};
}
}),new objj_method(sel_getUid("convertScreenToBase:"),function(self,_1cb,_1cc){
with(self){
return objj_msgSend(self,"convertPlatformWindowToBase:",objj_msgSend(_platformWindow,"convertScreenToBase:",_1cc));
}
}),new objj_method(sel_getUid("convertBaseToScreen:"),function(self,_1cd,_1ce){
with(self){
return objj_msgSend(_platformWindow,"convertBaseToScreen:",objj_msgSend(self,"convertBaseToPlatformWindow:",_1ce));
}
}),new objj_method(sel_getUid("_setSharesChromeWithPlatformWindow:"),function(self,_1cf,_1d0){
with(self){
if(_1d0&&objj_msgSend(CPPlatform,"isBrowser")){
return;
}
_sharesChromeWithPlatformWindow=_1d0;
objj_msgSend(self,"_updateShadow");
}
}),new objj_method(sel_getUid("_sharesChromeWithPlatformWindow"),function(self,_1d1){
with(self){
return _sharesChromeWithPlatformWindow;
}
}),new objj_method(sel_getUid("undoManager"),function(self,_1d2){
with(self){
if(_undoManager){
return _undoManager;
}
var _1d3=objj_msgSend(objj_msgSend(_windowController,"document"),"undoManager");
if(_1d3){
return _1d3;
}
if(_delegateRespondsToWindowWillReturnUndoManagerSelector){
return objj_msgSend(_delegate,"windowWillReturnUndoManager:",self);
}
if(!_undoManager){
_undoManager=objj_msgSend(objj_msgSend(CPUndoManager,"alloc"),"init");
}
return _undoManager;
}
}),new objj_method(sel_getUid("undo:"),function(self,_1d4,_1d5){
with(self){
objj_msgSend(objj_msgSend(self,"undoManager"),"undo");
}
}),new objj_method(sel_getUid("redo:"),function(self,_1d6,_1d7){
with(self){
objj_msgSend(objj_msgSend(self,"undoManager"),"redo");
}
}),new objj_method(sel_getUid("containsPoint:"),function(self,_1d8,_1d9){
with(self){
return CGRectContainsPoint(_frame,_1d9);
}
})]);
var _b=objj_getClass("CPWindow");
if(!_b){
throw new SyntaxError("*** Could not find definition for class \"CPWindow\"");
}
var _c=_b.isa;
class_addMethods(_b,[new objj_method(sel_getUid("setFullBridge:"),function(self,_1da,_1db){
with(self){
objj_msgSend(self,"setFullPlatformWindow:",_1db);
}
}),new objj_method(sel_getUid("isFullBridge"),function(self,_1dc){
with(self){
return objj_msgSend(self,"isFullPlatformWindow");
}
}),new objj_method(sel_getUid("convertBaseToBridge:"),function(self,_1dd,_1de){
with(self){
return objj_msgSend(self,"convertBaseToPlatformWindow:",_1de);
}
}),new objj_method(sel_getUid("convertBridgeToBase:"),function(self,_1df,_1e0){
with(self){
return objj_msgSend(self,"convertPlatformWindowToBase:",_1e0);
}
})]);
var _1e1=function(_1e2,_1e3,_1e4){
return _1e2+(_1e3-_1e2)*_1e4;
};
var _b=objj_allocateClassPair(CPAnimation,"_CPWindowFrameAnimation"),_c=_b.isa;
class_addIvars(_b,[new objj_ivar("_window"),new objj_ivar("_startFrame"),new objj_ivar("_targetFrame")]);
objj_registerClassPair(_b);
class_addMethods(_b,[new objj_method(sel_getUid("initWithWindow:targetFrame:"),function(self,_1e5,_1e6,_1e7){
with(self){
self=objj_msgSendSuper({receiver:self,super_class:objj_getClass("_CPWindowFrameAnimation").super_class},"initWithDuration:animationCurve:",objj_msgSend(_1e6,"animationResizeTime:",_1e7),CPAnimationLinear);
if(self){
_window=_1e6;
_targetFrame=CGRectMakeCopy(_1e7);
_startFrame=CGRectMakeCopy(objj_msgSend(_window,"frame"));
}
return self;
}
}),new objj_method(sel_getUid("startAnimation"),function(self,_1e8){
with(self){
objj_msgSendSuper({receiver:self,super_class:objj_getClass("_CPWindowFrameAnimation").super_class},"startAnimation");
_window._isAnimating=YES;
}
}),new objj_method(sel_getUid("setCurrentProgress:"),function(self,_1e9,_1ea){
with(self){
objj_msgSendSuper({receiver:self,super_class:objj_getClass("_CPWindowFrameAnimation").super_class},"setCurrentProgress:",_1ea);
var _1eb=objj_msgSend(self,"currentValue");
if(_1eb==1){
_window._isAnimating=NO;
}
var _1ec=CGRectMake(_1e1(CGRectGetMinX(_startFrame),CGRectGetMinX(_targetFrame),_1eb),_1e1(CGRectGetMinY(_startFrame),CGRectGetMinY(_targetFrame),_1eb),_1e1(CGRectGetWidth(_startFrame),CGRectGetWidth(_targetFrame),_1eb),_1e1(CGRectGetHeight(_startFrame),CGRectGetHeight(_targetFrame),_1eb));
objj_msgSend(_window,"setFrame:display:animate:",_1ec,YES,NO);
}
})]);
_CPWindowFullPlatformWindowSessionMake=function(_1ed,_1ee,_1ef,_1f0){
return {windowView:_1ed,contentRect:_1ee,hasShadow:_1ef,level:_1f0};
};
CPStandardWindowShadowStyle=0;
CPMenuWindowShadowStyle=1;
CPPanelWindowShadowStyle=2;
CPCustomWindowShadowStyle=3;
objj_executeFile("_CPWindowView.j",YES);
objj_executeFile("_CPStandardWindowView.j",YES);
objj_executeFile("_CPDocModalWindowView.j",YES);
objj_executeFile("_CPToolTipWindowView.j",YES);
objj_executeFile("_CPHUDWindowView.j",YES);
objj_executeFile("_CPBorderlessWindowView.j",YES);
objj_executeFile("_CPBorderlessBridgeWindowView.j",YES);
objj_executeFile("CPDragServer.j",YES);
objj_executeFile("CPView.j",YES);
p;12;CPPlatform.jt;4077;@STATIC;1.0;I;21;Foundation/CPObject.jt;4032;
objj_executeFile("Foundation/CPObject.j",NO);
var _1=objj_allocateClassPair(CPObject,"CPBasePlatform"),_2=_1.isa;
objj_registerClassPair(_1);
class_addMethods(_2,[new objj_method(sel_getUid("bootstrap"),function(_3,_4){
with(_3){
objj_msgSend(CPPlatformString,"bootstrap");
objj_msgSend(CPPlatformWindow,"setPrimaryPlatformWindow:",objj_msgSend(objj_msgSend(CPPlatformWindow,"alloc"),"_init"));
}
}),new objj_method(sel_getUid("isBrowser"),function(_5,_6){
with(_5){
return NO;
}
}),new objj_method(sel_getUid("supportsDragAndDrop"),function(_7,_8){
with(_7){
return NO;
}
}),new objj_method(sel_getUid("supportsNativeMainMenu"),function(_9,_a){
with(_9){
return NO;
}
}),new objj_method(sel_getUid("terminateApplication"),function(_b,_c){
with(_b){
}
}),new objj_method(sel_getUid("activateIgnoringOtherApps:"),function(_d,_e,_f){
with(_d){
}
}),new objj_method(sel_getUid("deactivate"),function(_10,_11){
with(_10){
}
}),new objj_method(sel_getUid("hideOtherApplications:"),function(_12,_13,_14){
with(_12){
}
}),new objj_method(sel_getUid("hide:"),function(_15,_16,_17){
with(_15){
}
})]);
if(typeof window["CPPlatformEnableHTMLDragAndDrop"]==="undefined"){
CPPlatformEnableHTMLDragAndDrop=NO;
}
CPPlatformDidClearBodyElementNotification="CPPlatformDidClearBodyElementNotification";
CPPlatformWillClearBodyElementNotification="CPPlatformWillClearBodyElementNotification";
var _18=NO,_19=nil,_1a=new RegExp("\\bcpdontremove\\b","g");
var _1=objj_allocateClassPair(CPBasePlatform,"CPPlatform"),_2=_1.isa;
objj_registerClassPair(_1);
class_addMethods(_2,[new objj_method(sel_getUid("initialize"),function(_1b,_1c){
with(_1b){
if(_1b!==objj_msgSend(CPPlatform,"class")){
return;
}
_18=objj_msgSend(CPPlatform,"isBrowser");
if(document.documentElement){
document.documentElement.style.overflow="hidden";
}
if(objj_msgSend(CPPlatform,"isBrowser")){
window.onunload=function(){
objj_msgSend(CPApp,"terminate:",nil);
};
}
}
}),new objj_method(sel_getUid("isBrowser"),function(_1d,_1e){
with(_1d){
return typeof window.cpIsDesktop==="undefined";
}
}),new objj_method(sel_getUid("supportsDragAndDrop"),function(_1f,_20){
with(_1f){
return CPFeatureIsCompatible(CPHTMLDragAndDropFeature)&&(CPPlatformEnableHTMLDragAndDrop||!objj_msgSend(_1f,"isBrowser"));
}
}),new objj_method(sel_getUid("supportsNativeMainMenu"),function(_21,_22){
with(_21){
return (typeof window["cpSetMainMenu"]==="function");
}
}),new objj_method(sel_getUid("terminateApplication"),function(_23,_24){
with(_23){
if(typeof window["cpTerminate"]==="function"){
window.cpTerminate();
}
}
}),new objj_method(sel_getUid("activateIgnoringOtherApps:"),function(_25,_26,_27){
with(_25){
if(typeof window["cpActivateIgnoringOtherApps"]==="function"){
window.cpActivateIgnoringOtherApps(!!_27);
}
}
}),new objj_method(sel_getUid("deactivate"),function(_28,_29){
with(_28){
if(typeof window["cpDeactivate"]==="function"){
window.cpDeactivate();
}
}
}),new objj_method(sel_getUid("hideOtherApplications:"),function(_2a,_2b,_2c){
with(_2a){
if(typeof window["cpHideOtherApplications"]==="function"){
window.cpHideOtherApplications();
}
}
}),new objj_method(sel_getUid("hide:"),function(_2d,_2e,_2f){
with(_2d){
if(typeof window["cpHide"]==="function"){
window.cpHide();
}
}
}),new objj_method(sel_getUid("mainBodyElement"),function(_30,_31){
with(_30){
if(!_19){
_19=document.getElementById("cappuccino-body")||document.body;
}
return _19;
}
}),new objj_method(sel_getUid("initializeScreenIfNecessary"),function(_32,_33){
with(_32){
if(!_18){
return;
}
_18=NO;
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:",CPPlatformWillClearBodyElementNotification,_32);
var _34=objj_msgSend(_32,"mainBodyElement");
var _35=_34.childNodes,_36=_35.length;
while(_36--){
var _37=_35[_36];
if(!_37.className||_37.className.match(_1a)===null){
_34.removeChild(_37);
}
}
_34.style.overflow="hidden";
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:",CPPlatformDidClearBodyElementNotification,_32);
}
})]);
p;18;CPPlatformString.jt;4112;@STATIC;1.0;I;21;Foundation/CPObject.jt;4067;
objj_executeFile("Foundation/CPObject.j",NO);
var _1=objj_allocateClassPair(CPObject,"CPBasePlatformString"),_2=_1.isa;
objj_registerClassPair(_1);
class_addMethods(_2,[new objj_method(sel_getUid("bootstrap"),function(_3,_4){
with(_3){
}
}),new objj_method(sel_getUid("sizeOfString:withFont:forWidth:"),function(_5,_6,_7,_8,_9){
with(_5){
return {width:0,height:0};
}
})]);
var _a=nil,_b=nil,_c=nil,_d=nil,_e=nil,_f=nil,_10=nil,_11=nil;
var _1=objj_allocateClassPair(CPBasePlatformString,"CPPlatformString"),_2=_1.isa;
objj_registerClassPair(_1);
class_addMethods(_2,[new objj_method(sel_getUid("bootstrap"),function(_12,_13){
with(_12){
objj_msgSend(_12,"createDOMElements");
}
}),new objj_method(sel_getUid("createDOMElements"),function(_14,_15){
with(_14){
var _16;
_f=document.createElement("iframe");
_f.name="iframe_"+FLOOR(RAND()*10000);
_f.className="cpdontremove";
_16=_f.style;
_16.position="absolute";
_16.left="-100px";
_16.top="-100px";
_16.width="1px";
_16.height="1px";
_16.borderWidth="0px";
_16.overflow="hidden";
_16.zIndex=100000000000;
var _17=objj_msgSend(CPPlatform,"mainBodyElement");
_17.appendChild(_f);
_10=(_f.contentDocument||_f.contentWindow.document);
_10.write("<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Strict//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\">"+"<html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\" lang=\"en\"><head></head><body></body></html>");
_10.close();
var _18=_10.createElement("div");
_18.style.position="absolute";
_18.style.width="100000px";
_10.body.appendChild(_18);
_b=_10.createElement("span");
_16=_b.style;
_16.position="absolute";
_16.visibility="visible";
_16.padding="0px";
_16.margin="0px";
_16.whiteSpace="pre";
_a=_10.createElement("span");
_16=_a.style;
_16.display="block";
_16.position="absolute";
_16.visibility="visible";
_16.padding="0px";
_16.margin="0px";
_16.width="1px";
_16.wordWrap="break-word";
try{
_16.whiteSpace="pre";
_16.whiteSpace="-o-pre-wrap";
_16.whiteSpace="-pre-wrap";
_16.whiteSpace="-moz-pre-wrap";
_16.whiteSpace="pre-wrap";
}
catch(e){
_16.whiteSpace="pre";
}
_18.appendChild(_b);
_18.appendChild(_a);
}
}),new objj_method(sel_getUid("createDOMMetricsElements"),function(_19,_1a){
with(_19){
if(!_f){
objj_msgSend(_19,"createDOMElements");
}
var _1b;
_c=_10.createElement("div");
_c.style.position="absolute";
_c.style.width="100000px";
_10.body.appendChild(_c);
_d=_10.createElement("span");
_d.innerHTML="x";
_1b=_d.style;
_1b.position="absolute";
_1b.visibility="visible";
_1b.padding="0px";
_1b.margin="0px";
_1b.whiteSpace="pre";
var _1c=objj_msgSend(objj_msgSend(CPBundle,"bundleForClass:",objj_msgSend(CPView,"class")),"pathForResource:","empty.png");
_e=_10.createElement("img");
_e.setAttribute("src",_1c);
_e.setAttribute("width","1");
_e.setAttribute("height","1");
_e.setAttribute("alt","");
_1b=_e.style;
_1b.visibility="visible";
_1b.padding="0px";
_1b.margin="0px";
_1b.border="none";
_1b.verticalAlign="baseline";
_c.appendChild(_d);
_c.appendChild(_e);
}
}),new objj_method(sel_getUid("sizeOfString:withFont:forWidth:"),function(_1d,_1e,_1f,_20,_21){
with(_1d){
if(!_20){
if(!_11){
_11=objj_msgSend(CPFont,"systemFontOfSize:",12);
}
_20=_11;
}
if(!_f){
objj_msgSend(_1d,"createDOMElements");
}
var _22;
if(!_21){
_22=_b;
}else{
_22=_a;
_22.style.width=ROUND(_21)+"px";
}
_22.style.font=objj_msgSend(_20,"cssString");
if(CPFeatureIsCompatible(CPJavaScriptInnerTextFeature)){
_22.innerText=_1f;
}else{
if(CPFeatureIsCompatible(CPJavaScriptTextContentFeature)){
_22.textContent=_1f;
}
}
return {width:_22.clientWidth,height:_22.clientHeight};
}
}),new objj_method(sel_getUid("metricsOfFont:"),function(_23,_24,_25){
with(_23){
if(!_25){
if(!_11){
_11=objj_msgSend(CPFont,"systemFontOfSize:",12);
}
_25=_11;
}
if(!_c){
objj_msgSend(_23,"createDOMMetricsElements");
}
_c.style.font=objj_msgSend(_25,"cssString");
var _26=_e.offsetTop-_d.offsetTop+_e.offsetHeight,_27=_26-_d.offsetHeight,_28=_d.offsetHeight;
return objj_msgSend(CPDictionary,"dictionaryWithObjectsAndKeys:",_26,"ascender",_27,"descender",_28,"lineHeight");
}
})]);
p;18;CPPlatformWindow.jt;5618;@STATIC;1.0;I;21;Foundation/CPObject.ji;22;CPPlatformWindow+DOM.jt;5546;
objj_executeFile("Foundation/CPObject.j",NO);
var _1=NULL;
var _2=objj_allocateClassPair(CPObject,"CPPlatformWindow"),_3=_2.isa;
class_addIvars(_2,[new objj_ivar("_contentRect"),new objj_ivar("_level"),new objj_ivar("_hasShadow"),new objj_ivar("_shadowStyle"),new objj_ivar("_DOMWindow"),new objj_ivar("_DOMBodyElement"),new objj_ivar("_DOMFocusElement"),new objj_ivar("_DOMEventGuard"),new objj_ivar("_DOMScrollingElement"),new objj_ivar("_hideDOMScrollingElementTimeout"),new objj_ivar("_windowLevels"),new objj_ivar("_windowLayers"),new objj_ivar("_mouseIsDown"),new objj_ivar("_mouseDownIsRightClick"),new objj_ivar("_lastMouseEventLocation"),new objj_ivar("_mouseDownWindow"),new objj_ivar("_lastMouseUp"),new objj_ivar("_lastMouseDown"),new objj_ivar("_charCodes"),new objj_ivar("_keyCode"),new objj_ivar("_lastKey"),new objj_ivar("_capsLockActive"),new objj_ivar("_ignoreNativeCopyOrCutEvent"),new objj_ivar("_ignoreNativePastePreparation"),new objj_ivar("_DOMEventMode"),new objj_ivar("_DOMPasteboardElement"),new objj_ivar("_pasteboardKeyDownEvent"),new objj_ivar("_overriddenEventType")]);
objj_registerClassPair(_2);
class_addMethods(_2,[new objj_method(sel_getUid("initWithContentRect:"),function(_4,_5,_6){
with(_4){
_4=objj_msgSendSuper({receiver:_4,super_class:objj_getClass("CPPlatformWindow").super_class},"init");
if(_4){
_contentRect={origin:{x:_6.origin.x,y:_6.origin.y},size:{width:_6.size.width,height:_6.size.height}};
_windowLevels=[];
_windowLayers=objj_msgSend(CPDictionary,"dictionary");
_charCodes={};
}
return _4;
}
}),new objj_method(sel_getUid("init"),function(_7,_8){
with(_7){
return objj_msgSend(_7,"initWithContentRect:",{origin:{x:0,y:0},size:{width:400,height:500}});
}
}),new objj_method(sel_getUid("contentRect"),function(_9,_a){
with(_9){
return {origin:{x:_contentRect.origin.x,y:_contentRect.origin.y},size:{width:_contentRect.size.width,height:_contentRect.size.height}};
}
}),new objj_method(sel_getUid("contentBounds"),function(_b,_c){
with(_b){
var _d=objj_msgSend(_b,"contentRect");
_d.origin={x:0,y:0};
return _d;
}
}),new objj_method(sel_getUid("visibleFrame"),function(_e,_f){
with(_e){
var _10=objj_msgSend(_e,"contentBounds");
_10.origin=CGPointMakeZero();
if(objj_msgSend(CPMenu,"menuBarVisible")&&objj_msgSend(CPPlatformWindow,"primaryPlatformWindow")===_e){
var _11=objj_msgSend(objj_msgSend(CPApp,"mainMenu"),"menuBarHeight");
_10.origin.y+=_11;
_10.size.height-=_11;
}
return _10;
}
}),new objj_method(sel_getUid("usableContentFrame"),function(_12,_13){
with(_12){
return objj_msgSend(_12,"visibleFrame");
}
}),new objj_method(sel_getUid("setContentRect:"),function(_14,_15,_16){
with(_14){
if(!_16||((_contentRect.origin.x==_16.origin.x&&_contentRect.origin.y==_16.origin.y)&&(_contentRect.size.width==_16.size.width&&_contentRect.size.height==_16.size.height))){
return;
}
_contentRect={origin:{x:_16.origin.x,y:_16.origin.y},size:{width:_16.size.width,height:_16.size.height}};
objj_msgSend(_14,"updateNativeContentRect");
}
}),new objj_method(sel_getUid("updateFromNativeContentRect"),function(_17,_18){
with(_17){
objj_msgSend(_17,"setContentRect:",objj_msgSend(_17,"nativeContentRect"));
}
}),new objj_method(sel_getUid("convertBaseToScreen:"),function(_19,_1a,_1b){
with(_19){
var _1c=objj_msgSend(_19,"contentRect");
return {x:_1b.x+(_1c.origin.x),y:_1b.y+(_1c.origin.y)};
}
}),new objj_method(sel_getUid("convertScreenToBase:"),function(_1d,_1e,_1f){
with(_1d){
var _20=objj_msgSend(_1d,"contentRect");
return {x:_1f.x-(_20.origin.x),y:_1f.y-(_20.origin.y)};
}
}),new objj_method(sel_getUid("isVisible"),function(_21,_22){
with(_21){
return _DOMWindow!==NULL;
}
}),new objj_method(sel_getUid("deminiaturize:"),function(_23,_24,_25){
with(_23){
if(_DOMWindow&&typeof _DOMWindow["cpDeminiaturize"]==="function"){
_DOMWindow.cpDeminiaturize();
}
}
}),new objj_method(sel_getUid("miniaturize:"),function(_26,_27,_28){
with(_26){
if(_DOMWindow&&typeof _DOMWindow["cpMiniaturize"]==="function"){
_DOMWindow.cpMiniaturize();
}
}
}),new objj_method(sel_getUid("moveWindow:fromLevel:toLevel:"),function(_29,_2a,_2b,_2c,_2d){
with(_29){
if(!_2b._isVisible){
return;
}
var _2e=objj_msgSend(_29,"layerAtLevel:create:",_2c,NO),_2f=objj_msgSend(_29,"layerAtLevel:create:",_2d,YES);
objj_msgSend(_2e,"removeWindow:",_2b);
objj_msgSend(_2f,"insertWindow:atIndex:",_2b,CPNotFound);
}
}),new objj_method(sel_getUid("setLevel:"),function(_30,_31,_32){
with(_30){
_level=_32;
if(_DOMWindow&&_DOMWindow.cpSetLevel){
_DOMWindow.cpSetLevel(_32);
}
}
}),new objj_method(sel_getUid("setHasShadow:"),function(_33,_34,_35){
with(_33){
_hasShadow=_35;
if(_DOMWindow&&_DOMWindow.cpSetHasShadow){
_DOMWindow.cpSetHasShadow(_35);
}
}
}),new objj_method(sel_getUid("setShadowStyle:"),function(_36,_37,_38){
with(_36){
_shadowStyle=_38;
if(_DOMWindow&&_DOMWindow.cpSetShadowStyle){
_shadowStyle.cpSetShadowStyle(_38);
}
}
}),new objj_method(sel_getUid("supportsFullPlatformWindows"),function(_39,_3a){
with(_39){
return objj_msgSend(CPPlatform,"isBrowser");
}
})]);
class_addMethods(_3,[new objj_method(sel_getUid("visiblePlatformWindows"),function(_3b,_3c){
with(_3b){
return objj_msgSend(CPSet,"set");
}
}),new objj_method(sel_getUid("supportsMultipleInstances"),function(_3d,_3e){
with(_3d){
return !CPBrowserIsEngine(CPInternetExplorerBrowserEngine);
}
}),new objj_method(sel_getUid("primaryPlatformWindow"),function(_3f,_40){
with(_3f){
return _1;
}
}),new objj_method(sel_getUid("setPrimaryPlatformWindow:"),function(_41,_42,_43){
with(_41){
_1=_43;
}
})]);
objj_executeFile("CPPlatformWindow+DOM.j",YES);
p;18;CPDOMWindowLayer.jt;2089;@STATIC;1.0;I;20;Foundation/CPArray.jI;21;Foundation/CPObject.jt;2019;
objj_executeFile("Foundation/CPArray.j",NO);
objj_executeFile("Foundation/CPObject.j",NO);
var _1=objj_allocateClassPair(CPObject,"CPDOMWindowLayer"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_level"),new objj_ivar("_windows"),new objj_ivar("_DOMElement")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("initWithLevel:"),function(_3,_4,_5){
with(_3){
_3=objj_msgSendSuper({receiver:_3,super_class:objj_getClass("CPDOMWindowLayer").super_class},"init");
if(_3){
_level=_5;
_windows=[];
_DOMElement=document.createElement("div");
_DOMElement.style.position="absolute";
_DOMElement.style.top="0px";
_DOMElement.style.left="0px";
_DOMElement.style.width="1px";
_DOMElement.style.height="1px";
}
return _3;
}
}),new objj_method(sel_getUid("level"),function(_6,_7){
with(_6){
return _level;
}
}),new objj_method(sel_getUid("removeWindow:"),function(_8,_9,_a){
with(_8){
if(!_a._isVisible){
return;
}
var _b=_a._index,_c=_windows.length-1;
_DOMElement.removeChild(_a._DOMElement);
objj_msgSend(_windows,"removeObjectAtIndex:",_a._index);
for(;_b<_c;++_b){
_windows[_b]._index=_b;
_windows[_b]._DOMElement.style.zIndex=_b;
}
_a._isVisible=NO;
}
}),new objj_method(sel_getUid("insertWindow:atIndex:"),function(_d,_e,_f,_10){
with(_d){
var _11=objj_msgSend(_windows,"count"),_12=(_10==CPNotFound?_11:_10),_13=_f._isVisible;
if(_13){
_12=MIN(_12,_f._index);
objj_msgSend(_windows,"removeObjectAtIndex:",_f._index);
}else{
++_11;
}
if(_10==CPNotFound||_10>=_11){
objj_msgSend(_windows,"addObject:",_f);
}else{
objj_msgSend(_windows,"insertObject:atIndex:",_f,_10);
}
for(;_12<_11;++_12){
_windows[_12]._index=_12;
_windows[_12]._DOMElement.style.zIndex=_12;
}
if(_f._DOMElement.parentNode!==_DOMElement){
_DOMElement.appendChild(_f._DOMElement);
_f._isVisible=YES;
if(objj_msgSend(_f,"isFullBridge")){
objj_msgSend(_f,"setFrame:",objj_msgSend(_f._platformWindow,"usableContentFrame"));
}
}
}
}),new objj_method(sel_getUid("orderedWindows"),function(_14,_15){
with(_14){
return _windows;
}
})]);
p;22;CPPlatformWindow+DOM.jt;33512;@STATIC;1.0;I;21;Foundation/CPObject.jI;22;Foundation/CPRunLoop.ji;9;CPEvent.ji;8;CPText.ji;17;CPCompatibility.ji;18;CPDOMWindowLayer.ji;12;CPPlatform.ji;18;CPPlatformWindow.ji;26;CPPlatformWindow+DOMKeys.jt;33298;
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("Foundation/CPRunLoop.j",NO);
objj_executeFile("CPEvent.j",YES);
objj_executeFile("CPText.j",YES);
objj_executeFile("CPCompatibility.j",YES);
objj_executeFile("CPDOMWindowLayer.j",YES);
objj_executeFile("CPPlatform.j",YES);
objj_executeFile("CPPlatformWindow.j",YES);
objj_executeFile("CPPlatformWindow+DOMKeys.j",YES);
var _1=objj_msgSend(CPSet,"set");
var _2,_3,_4,_5;
var _6={},_7={},_8={},_9={61:187,59:186},_a={};
_6[CPKeyCodes.A]=YES;
_8[CPKeyCodes.F1]=YES;
_8[CPKeyCodes.F2]=YES;
_8[CPKeyCodes.F3]=YES;
_8[CPKeyCodes.F4]=YES;
_8[CPKeyCodes.F5]=YES;
_8[CPKeyCodes.F6]=YES;
_8[CPKeyCodes.F7]=YES;
_8[CPKeyCodes.F8]=YES;
_8[CPKeyCodes.F9]=YES;
_8[CPKeyCodes.F10]=YES;
_8[CPKeyCodes.F11]=YES;
_8[CPKeyCodes.F12]=YES;
_a[CPKeyCodes.BACKSPACE]=CPDeleteCharacter;
_a[CPKeyCodes.DELETE]=CPDeleteFunctionKey;
_a[CPKeyCodes.TAB]=CPTabCharacter;
_a[CPKeyCodes.ENTER]=CPCarriageReturnCharacter;
_a[CPKeyCodes.ESC]=CPEscapeFunctionKey;
_a[CPKeyCodes.PAGE_UP]=CPPageUpFunctionKey;
_a[CPKeyCodes.PAGE_DOWN]=CPPageDownFunctionKey;
_a[CPKeyCodes.LEFT]=CPLeftArrowFunctionKey;
_a[CPKeyCodes.UP]=CPUpArrowFunctionKey;
_a[CPKeyCodes.RIGHT]=CPRightArrowFunctionKey;
_a[CPKeyCodes.DOWN]=CPDownArrowFunctionKey;
_a[CPKeyCodes.HOME]=CPHomeFunctionKey;
_a[CPKeyCodes.END]=CPEndFunctionKey;
_a[CPKeyCodes.SEMICOLON]=";";
_a[CPKeyCodes.DASH]="-";
_a[CPKeyCodes.EQUALS]="=";
_a[CPKeyCodes.COMMA]=",";
_a[CPKeyCodes.PERIOD]=".";
_a[CPKeyCodes.SLASH]="/";
_a[CPKeyCodes.APOSTROPHE]="`";
_a[CPKeyCodes.SINGLE_QUOTE]="'";
_a[CPKeyCodes.OPEN_SQUARE_BRACKET]="[";
_a[CPKeyCodes.BACKSLASH]="\\";
_a[CPKeyCodes.CLOSE_SQUARE_BRACKET]="]";
var _b=[CPKeyCodes.META,CPKeyCodes.MAC_FF_META,CPKeyCodes.CTRL,CPKeyCodes.ALT,CPKeyCodes.SHIFT],_c=objj_msgSend(CPPlatform,"supportsDragAndDrop");
var _d=objj_getClass("CPPlatformWindow");
if(!_d){
throw new SyntaxError("*** Could not find definition for class \"CPPlatformWindow\"");
}
var _e=_d.isa;
class_addMethods(_d,[new objj_method(sel_getUid("_init"),function(_f,_10){
with(_f){
_f=objj_msgSendSuper({receiver:_f,super_class:objj_getClass("CPPlatformWindow").super_class},"init");
if(_f){
_DOMWindow=window;
_contentRect={origin:{x:0,y:0},size:{width:0,height:0}};
_windowLevels=[];
_windowLayers=objj_msgSend(CPDictionary,"dictionary");
objj_msgSend(_f,"registerDOMWindow");
objj_msgSend(_f,"updateFromNativeContentRect");
_charCodes={};
}
return _f;
}
}),new objj_method(sel_getUid("nativeContentRect"),function(_11,_12){
with(_11){
if(!_DOMWindow){
return objj_msgSend(_11,"contentRect");
}
if(_DOMWindow.cpFrame){
return _DOMWindow.cpFrame();
}
var _13={origin:{x:0,y:0},size:{width:0,height:0}};
if(window.screenTop){
_13.origin={x:_DOMWindow.screenLeft,y:_DOMWindow.screenTop};
}else{
if(window.screenX){
_13.origin={x:_DOMWindow.screenX,y:_DOMWindow.screenY};
}
}
if(_DOMWindow.innerWidth){
_13.size={width:_DOMWindow.innerWidth,height:_DOMWindow.innerHeight};
}else{
if(document.documentElement&&document.documentElement.clientWidth){
_13.size={width:_DOMWindow.document.documentElement.clientWidth,height:_DOMWindow.document.documentElement.clientHeight};
}else{
_13.size={width:_DOMWindow.document.body.clientWidth,height:_DOMWindow.document.body.clientHeight};
}
}
return _13;
}
}),new objj_method(sel_getUid("updateNativeContentRect"),function(_14,_15){
with(_14){
if(!_DOMWindow){
return;
}
if(typeof _DOMWindow["cpSetFrame"]==="function"){
return _DOMWindow.cpSetFrame(objj_msgSend(_14,"contentRect"));
}
var _16=objj_msgSend(_14,"contentRect").origin,_17=objj_msgSend(_14,"nativeContentRect").origin;
if(_16.x!==_17.x||_16.y!==_17.y){
_DOMWindow.moveBy(_16.x-_17.x,_16.y-_17.y);
}
var _18=objj_msgSend(_14,"contentRect").size,_19=objj_msgSend(_14,"nativeContentRect").size;
if(_18.width!==_19.width||_18.height!==_19.height){
_DOMWindow.resizeBy(_18.width-_19.width,_18.height-_19.height);
}
}
}),new objj_method(sel_getUid("orderBack:"),function(_1a,_1b,_1c){
with(_1a){
if(_DOMWindow){
_DOMWindow.blur();
}
}
}),new objj_method(sel_getUid("createDOMElements"),function(_1d,_1e){
with(_1d){
var _1f=_DOMWindow.document;
_DOMFocusElement=_1f.createElement("input");
_DOMFocusElement.style.position="absolute";
_DOMFocusElement.style.zIndex="-1000";
_DOMFocusElement.style.opacity="0";
_DOMFocusElement.style.filter="alpha(opacity=0)";
_DOMFocusElement.className="cpdontremove";
_DOMBodyElement.appendChild(_DOMFocusElement);
_DOMPasteboardElement=_1f.createElement("textarea");
_DOMPasteboardElement.style.position="absolute";
_DOMPasteboardElement.style.top="-10000px";
_DOMPasteboardElement.style.zIndex="999";
_DOMPasteboardElement.className="cpdontremove";
_DOMBodyElement.appendChild(_DOMPasteboardElement);
_DOMPasteboardElement.blur();
_DOMEventGuard=_1f.createElement("div");
_DOMEventGuard.style.position="absolute";
_DOMEventGuard.style.top="0px";
_DOMEventGuard.style.left="0px";
_DOMEventGuard.style.width="100%";
_DOMEventGuard.style.height="100%";
_DOMEventGuard.style.zIndex="999";
_DOMEventGuard.style.display="none";
_DOMEventGuard.className="cpdontremove";
_DOMBodyElement.appendChild(_DOMEventGuard);
_DOMScrollingElement=_1f.createElement("div");
_DOMScrollingElement.style.position="absolute";
_DOMScrollingElement.style.visibility="hidden";
_DOMScrollingElement.style.zIndex="999";
_DOMScrollingElement.style.height="60px";
_DOMScrollingElement.style.width="60px";
_DOMScrollingElement.style.overflow="scroll";
_DOMScrollingElement.style.opacity="0";
_DOMScrollingElement.style.filter="alpha(opacity=0)";
_DOMScrollingElement.className="cpdontremove";
_DOMBodyElement.appendChild(_DOMScrollingElement);
var _20=_1f.createElement("div");
_20.style.width="400px";
_20.style.height="400px";
_DOMScrollingElement.appendChild(_20);
_DOMScrollingElement.scrollTop=150;
_DOMScrollingElement.scrollLeft=150;
}
}),new objj_method(sel_getUid("registerDOMWindow"),function(_21,_22){
with(_21){
var _23=_DOMWindow.document;
_DOMBodyElement=_23.getElementById("cappuccino-body")||_23.body;
if(_c){
_DOMBodyElement.style["-khtml-user-select"]="none";
}
_DOMBodyElement.webkitTouchCallout="none";
objj_msgSend(_21,"createDOMElements");
objj_msgSend(_21,"_addLayers");
var _24=objj_msgSend(_21,"class"),_25=class_getMethodImplementation(_24,sel_getUid("dragEvent:")),_26=function(_27){
_25(_21,nil,_27);
},_28=sel_getUid("resizeEvent:"),_29=class_getMethodImplementation(_24,_28),_2a=function(_2b){
_29(_21,nil,_2b);
},_2c=sel_getUid("copyEvent:"),_2d=class_getMethodImplementation(_24,_2c),_2e=function(_2f){
_2d(_21,nil,_2f);
},_30=sel_getUid("pasteEvent:"),_31=class_getMethodImplementation(_24,_30),_32=function(_33){
_31(_21,nil,_33);
},_34=sel_getUid("keyEvent:"),_35=class_getMethodImplementation(_24,_34),_36=function(_37){
_35(_21,nil,_37);
},_38=sel_getUid("mouseEvent:"),_39=class_getMethodImplementation(_24,_38),_3a=function(_3b){
_39(_21,nil,_3b);
},_3c=sel_getUid("contextMenuEvent:"),_3d=class_getMethodImplementation(_24,_3c),_3e=function(_3f){
return _3d(_21,nil,_3f);
},_40=sel_getUid("scrollEvent:"),_41=class_getMethodImplementation(_24,_40),_42=function(_43){
_41(_21,nil,_43);
},_44=sel_getUid("touchEvent:"),_45=class_getMethodImplementation(_24,_44),_46=function(_47){
_45(_21,nil,_47);
};
if(_23.addEventListener){
if(objj_msgSend(CPPlatform,"supportsDragAndDrop")){
_23.addEventListener("dragstart",_26,NO);
_23.addEventListener("drag",_26,NO);
_23.addEventListener("dragend",_26,NO);
_23.addEventListener("dragover",_26,NO);
_23.addEventListener("dragleave",_26,NO);
_23.addEventListener("drop",_26,NO);
}
_23.addEventListener("mouseup",_3a,NO);
_23.addEventListener("mousedown",_3a,NO);
_23.addEventListener("mousemove",_3a,NO);
_23.addEventListener("contextmenu",_3e,NO);
_23.addEventListener("beforecopy",_2e,NO);
_23.addEventListener("beforecut",_2e,NO);
_23.addEventListener("beforepaste",_32,NO);
_23.addEventListener("keyup",_36,NO);
_23.addEventListener("keydown",_36,NO);
_23.addEventListener("keypress",_36,NO);
_23.addEventListener("touchstart",_46,NO);
_23.addEventListener("touchend",_46,NO);
_23.addEventListener("touchmove",_46,NO);
_23.addEventListener("touchcancel",_46,NO);
_DOMWindow.addEventListener("DOMMouseScroll",_42,NO);
_DOMWindow.addEventListener("mousewheel",_42,NO);
_DOMWindow.addEventListener("resize",_2a,NO);
_DOMWindow.addEventListener("unload",function(){
objj_msgSend(_21,"updateFromNativeContentRect");
objj_msgSend(_21,"_removeLayers");
_23.removeEventListener("mouseup",_3a,NO);
_23.removeEventListener("mousedown",_3a,NO);
_23.removeEventListener("mousemove",_3a,NO);
_23.removeEventListener("contextmenu",_3e,NO);
_23.removeEventListener("keyup",_36,NO);
_23.removeEventListener("keydown",_36,NO);
_23.removeEventListener("keypress",_36,NO);
_23.removeEventListener("beforecopy",_2e,NO);
_23.removeEventListener("beforecut",_2e,NO);
_23.removeEventListener("beforepaste",_32,NO);
_23.removeEventListener("touchstart",_46,NO);
_23.removeEventListener("touchend",_46,NO);
_23.removeEventListener("touchmove",_46,NO);
_DOMWindow.removeEventListener("resize",_2a,NO);
_DOMWindow.removeEventListener("DOMMouseScroll",_42,NO);
_DOMWindow.removeEventListener("mousewheel",_42,NO);
objj_msgSend(_1,"removeObject:",_21);
_21._DOMWindow=nil;
},NO);
}else{
_23.attachEvent("onmouseup",_3a);
_23.attachEvent("onmousedown",_3a);
_23.attachEvent("onmousemove",_3a);
_23.attachEvent("ondblclick",_3a);
_23.attachEvent("oncontextmenu",_3e);
_23.attachEvent("onkeyup",_36);
_23.attachEvent("onkeydown",_36);
_23.attachEvent("onkeypress",_36);
_DOMWindow.attachEvent("onresize",_2a);
_DOMWindow.onmousewheel=_42;
_23.onmousewheel=_42;
_DOMBodyElement.ondrag=function(){
return NO;
};
_DOMBodyElement.onselectstart=function(){
return _DOMWindow.event.srcElement===_DOMPasteboardElement;
};
_DOMWindow.attachEvent("onunload",function(){
objj_msgSend(_21,"updateFromNativeContentRect");
objj_msgSend(_21,"_removeLayers");
_23.detachEvent("onmouseup",_3a);
_23.detachEvent("onmousedown",_3a);
_23.detachEvent("onmousemove",_3a);
_23.detachEvent("ondblclick",_3a);
_23.detachEvent("oncontextmenu",_3e);
_23.detachEvent("onkeyup",_36);
_23.detachEvent("onkeydown",_36);
_23.detachEvent("onkeypress",_36);
_DOMWindow.detachEvent("onresize",_2a);
_DOMWindow.onmousewheel=NULL;
_23.onmousewheel=NULL;
_DOMBodyElement.ondrag=NULL;
_DOMBodyElement.onselectstart=NULL;
objj_msgSend(_1,"removeObject:",_21);
_21._DOMWindow=nil;
},NO);
}
}
}),new objj_method(sel_getUid("orderFront:"),function(_48,_49,_4a){
with(_48){
if(_DOMWindow){
return _DOMWindow.focus();
}
_DOMWindow=window.open("","_blank","menubar=no,location=no,resizable=yes,scrollbars=no,status=no,left="+(_contentRect.origin.x)+",top="+(_contentRect.origin.y)+",width="+(_contentRect.size.width)+",height="+(_contentRect.size.height));
objj_msgSend(_1,"addObject:",_48);
_DOMWindow.document.write("<!DOCTYPE html><html lang='en'><head></head><body style='background-color:transparent;'></body></html>");
_DOMWindow.document.close();
if(!objj_msgSend(CPPlatform,"isBrowser")){
_DOMWindow.cpWindowNumber=objj_msgSend(_48._only,"windowNumber");
_DOMWindow.cpSetFrame(_contentRect);
_DOMWindow.cpSetLevel(_level);
_DOMWindow.cpSetHasShadow(_hasShadow);
_DOMWindow.cpSetShadowStyle(_shadowStyle);
}
objj_msgSend(_48,"registerDOMWindow");
_DOMBodyElement.style.cursor=objj_msgSend(objj_msgSend(CPCursor,"currentCursor"),"_cssString");
}
}),new objj_method(sel_getUid("orderOut:"),function(_4b,_4c,_4d){
with(_4b){
if(!_DOMWindow){
return;
}
_DOMWindow.close();
}
}),new objj_method(sel_getUid("dragEvent:"),function(_4e,_4f,_50){
with(_4e){
var _51=_50.type,_52=objj_msgSend(CPDragServer,"sharedDragServer"),_53={x:_50.clientX,y:_50.clientY},_54=objj_msgSend(_CPDOMDataTransferPasteboard,"DOMDataTransferPasteboard");
objj_msgSend(_54,"_setDataTransfer:",_50.dataTransfer);
if(_50.type==="dragstart"){
objj_msgSend(objj_msgSend(CPRunLoop,"currentRunLoop"),"limitDateForMode:",CPDefaultRunLoopMode);
objj_msgSend(_54,"_setPasteboard:",objj_msgSend(_52,"draggingPasteboard"));
var _55=objj_msgSend(_52,"draggedWindow"),_56=objj_msgSend(_55,"frame"),_57=_55._DOMElement;
_57.style.left=-(_56.size.width)+"px";
_57.style.top=-(_56.size.height)+"px";
var _58=_57.parentNode;
if(_58){
_58.removeChild(_57);
}
_DOMBodyElement.appendChild(_57);
var _59=objj_msgSend(_52,"draggingOffset");
_50.dataTransfer.setDragImage(_57,_59.width,_59.height);
_50.dataTransfer.effectAllowed="all";
objj_msgSend(_52,"draggingStartedInPlatformWindow:globalLocation:",_4e,objj_msgSend(CPPlatform,"isBrowser")?_53:{x:_50.screenX,y:_50.screenY});
}else{
if(_51==="drag"){
var y=_50.screenY;
if(CPFeatureIsCompatible(CPHTML5DragAndDropSourceYOffBy1)){
y-=1;
}
objj_msgSend(_52,"draggingSourceUpdatedWithGlobalLocation:",objj_msgSend(CPPlatform,"isBrowser")?_53:{x:_50.screenX,y:y});
}else{
if(_51==="dragover"||_51==="dragleave"){
if(_50.preventDefault){
_50.preventDefault();
}
var _5a="none",_5b=objj_msgSend(_52,"draggingUpdatedInPlatformWindow:location:",_4e,_53);
if(_5b===CPDragOperationMove||_5b===CPDragOperationGeneric||_5b===CPDragOperationPrivate){
_5a="move";
}else{
if(_5b===CPDragOperationCopy){
_5a="copy";
}else{
if(_5b===CPDragOperationLink){
_5a="link";
}
}
}
_50.dataTransfer.dropEffect=_5a;
}else{
if(_51==="dragend"){
var _5a=_50.dataTransfer.dropEffect;
if(_5a==="move"){
_5b=CPDragOperationMove;
}else{
if(_5a==="copy"){
_5b=CPDragOperationCopy;
}else{
if(_5a==="link"){
_5b=CPDragOperationLink;
}else{
_5b=CPDragOperationNone;
}
}
}
objj_msgSend(_52,"draggingEndedInPlatformWindow:globalLocation:operation:",_4e,objj_msgSend(CPPlatform,"isBrowser")?_53:{x:_50.screenX,y:_50.screenY},_5b);
}else{
objj_msgSend(_52,"performDragOperationInPlatformWindow:",_4e);
if(_50.preventDefault){
_50.preventDefault();
}
if(_50.stopPropagation){
_50.stopPropagation();
}
}
}
}
}
objj_msgSend(objj_msgSend(CPRunLoop,"currentRunLoop"),"limitDateForMode:",CPDefaultRunLoopMode);
}
}),new objj_method(sel_getUid("keyEvent:"),function(_5c,_5d,_5e){
with(_5c){
var _5f,_60=_5e.timeStamp||new Date(),_61=_5e.target||_5e.srcElement,_62=objj_msgSend(objj_msgSend(CPApp,"keyWindow"),"windowNumber"),_63=(_5e.shiftKey?CPShiftKeyMask:0)|(_5e.ctrlKey?CPControlKeyMask:0)|(_5e.altKey?CPAlternateKeyMask:0)|(_5e.metaKey?CPCommandKeyMask:0);
_4=YES;
if(!(_7[String.fromCharCode(_5e.keyCode||_5e.charCode).toLowerCase()]||_6[_5e.keyCode])){
if((_63&(CPControlKeyMask|CPCommandKeyMask))||_8[_5e.keyCode]){
_4=NO;
}
}
var _64=NO,_65=NO,_66=nil;
switch(_5e.type){
case "keydown":
if(_5e.keyCode in _9){
_keyCode=_9[_5e.keyCode];
}else{
_keyCode=_5e.keyCode;
}
var _67;
if(_5e.which===0||_5e.charCode===0){
_67=_a[_keyCode];
}
if(!_67){
_67=String.fromCharCode(_keyCode).toLowerCase();
}
_66=(_63&CPShiftKeyMask||_capsLockActive)?_67.toUpperCase():_67;
if(_keyCode===CPKeyCodes.CAPS_LOCK){
_capsLockActive=YES;
}
if(objj_msgSend(_b,"containsObject:",_keyCode)){
_5f=objj_msgSend(CPEvent,"keyEventWithType:location:modifierFlags:timestamp:windowNumber:context:characters:charactersIgnoringModifiers:isARepeat:keyCode:",CPFlagsChanged,location,_63,_60,_62,nil,nil,nil,NO,_keyCode);
break;
}else{
if(_63&(CPControlKeyMask|CPCommandKeyMask)){
var _68=objj_msgSend(_5c,"_validateCopyCutOrPasteEvent:flags:",_5e,_63);
if(_67==="v"&&_68){
if(!_ignoreNativePastePreparation){
_DOMPasteboardElement.select();
_DOMPasteboardElement.value="";
}
_64=YES;
}else{
if((_67=="c"||_67=="x")&&_68){
_65=YES;
if(_ignoreNativeCopyOrCutEvent){
break;
}
}
}
}else{
if(CPKeyCodes.firesKeyPressEvent(_keyCode,_lastKey,_5e.shiftKey,_5e.ctrlKey,_5e.altKey)){
_4=NO;
break;
}else{
}
}
}
case "keypress":
if(_5e.type==="keypress"&&(_63&(CPControlKeyMask|CPCommandKeyMask))){
break;
}
var _69=_keyCode,_6a=_5e.keyCode||_5e.charCode,_6b=(_charCodes[_69]!=nil);
_lastKey=_69;
_charCodes[_69]=_6a;
var _67=_66;
if(!_67&&(_5e.which===0||_5e.charCode===0)){
_67=_a[_6a];
}
if(!_67){
_67=String.fromCharCode(_6a);
}
_6c=_67.toLowerCase();
if(!_66&&(_63&CPCommandKeyMask)&&((_63&CPShiftKeyMask)||_capsLockActive)){
_67=_67.toUpperCase();
}
_5f=objj_msgSend(CPEvent,"keyEventWithType:location:modifierFlags:timestamp:windowNumber:context:characters:charactersIgnoringModifiers:isARepeat:keyCode:",CPKeyDown,location,_63,_60,_62,nil,_67,_6c,_6b,_6a);
if(_64){
_pasteboardKeyDownEvent=_5f;
window.setNativeTimeout(function(){
objj_msgSend(_5c,"_checkPasteboardElement");
},0);
}
break;
case "keyup":
var _69=_5e.keyCode,_6a=_charCodes[_69];
_keyCode=-1;
_lastKey=-1;
_charCodes[_69]=nil;
_ignoreNativeCopyOrCutEvent=NO;
_ignoreNativePastePreparation=NO;
if(_69===CPKeyCodes.CAPS_LOCK){
_capsLockActive=NO;
}
if(objj_msgSend(_b,"containsObject:",_69)){
_5f=objj_msgSend(CPEvent,"keyEventWithType:location:modifierFlags:timestamp:windowNumber:context:characters:charactersIgnoringModifiers:isARepeat:keyCode:",CPFlagsChanged,location,_63,_60,_62,nil,nil,nil,NO,_keyCode);
break;
}
var _67=_a[_6a]||String.fromCharCode(_6a),_6c=_67.toLowerCase();
if(!(_63&CPShiftKeyMask)&&(_63&CPCommandKeyMask)&&!_capsLockActive){
_67=_6c;
}
_5f=objj_msgSend(CPEvent,"keyEventWithType:location:modifierFlags:timestamp:windowNumber:context:characters:charactersIgnoringModifiers:isARepeat:keyCode:",CPKeyUp,location,_63,_60,_62,nil,_67,_6c,NO,_69);
break;
}
if(_5f&&!_64){
_5f._DOMEvent=_5e;
objj_msgSend(CPApp,"sendEvent:",_5f);
if(_65){
objj_msgSend(_5c,"_primePasteboardElement");
}
}
if(_4){
_3(_5e,_5c);
}
objj_msgSend(objj_msgSend(CPRunLoop,"currentRunLoop"),"limitDateForMode:",CPDefaultRunLoopMode);
}
}),new objj_method(sel_getUid("copyEvent:"),function(_6d,_6e,_6f){
with(_6d){
if(objj_msgSend(_6d,"_validateCopyCutOrPasteEvent:flags:",_6f,CPPlatformActionKeyMask)&&!_ignoreNativeCopyOrCutEvent){
var cut=_6f.type==="beforecut",_70=cut?CPKeyCodes.X:CPKeyCodes.C,_71=cut?"x":"c",_72=_6f.timeStamp?_6f.timeStamp:new Date(),_73=objj_msgSend(objj_msgSend(CPApp,"keyWindow"),"windowNumber"),_74=CPPlatformActionKeyMask;
event=objj_msgSend(CPEvent,"keyEventWithType:location:modifierFlags:timestamp:windowNumber:context:characters:charactersIgnoringModifiers:isARepeat:keyCode:",CPKeyDown,location,_74,_72,_73,nil,_71,_71,NO,_70);
event._DOMEvent=_6f;
objj_msgSend(CPApp,"sendEvent:",event);
objj_msgSend(_6d,"_primePasteboardElement");
_ignoreNativeCopyOrCutEvent=YES;
}
objj_msgSend(objj_msgSend(CPRunLoop,"currentRunLoop"),"limitDateForMode:",CPDefaultRunLoopMode);
}
}),new objj_method(sel_getUid("pasteEvent:"),function(_75,_76,_77){
with(_75){
if(objj_msgSend(_75,"_validateCopyCutOrPasteEvent:flags:",_77,CPPlatformActionKeyMask)){
_DOMPasteboardElement.focus();
_DOMPasteboardElement.select();
_DOMPasteboardElement.value="";
_ignoreNativePastePreparation=YES;
}
objj_msgSend(objj_msgSend(CPRunLoop,"currentRunLoop"),"limitDateForMode:",CPDefaultRunLoopMode);
}
}),new objj_method(sel_getUid("_validateCopyCutOrPasteEvent:flags:"),function(_78,_79,_7a,_7b){
with(_78){
return (((_7a.target||_7a.srcElement).nodeName.toUpperCase()!=="INPUT"&&(_7a.target||_7a.srcElement).nodeName.toUpperCase()!=="TEXTAREA")||_7a.target===_DOMPasteboardElement)&&(_7b&CPPlatformActionKeyMask);
}
}),new objj_method(sel_getUid("_primePasteboardElement"),function(_7c,_7d){
with(_7c){
var _7e=objj_msgSend(CPPasteboard,"generalPasteboard"),_7f=objj_msgSend(_7e,"types");
if(_7f.length){
if(objj_msgSend(_7f,"indexOfObjectIdenticalTo:",CPStringPboardType)!=CPNotFound){
_DOMPasteboardElement.value=objj_msgSend(_7e,"stringForType:",CPStringPboardType);
}else{
_DOMPasteboardElement.value=objj_msgSend(_7e,"_generateStateUID");
}
_DOMPasteboardElement.focus();
_DOMPasteboardElement.select();
window.setNativeTimeout(function(){
objj_msgSend(_7c,"_clearPasteboardElement");
},0);
}
}
}),new objj_method(sel_getUid("_checkPasteboardElement"),function(_80,_81){
with(_80){
var _82=_DOMPasteboardElement.value;
if(objj_msgSend(_82,"length")){
var _83=objj_msgSend(CPPasteboard,"generalPasteboard");
if(objj_msgSend(_83,"_stateUID")!=_82){
objj_msgSend(_83,"declareTypes:owner:",[CPStringPboardType],_80);
objj_msgSend(_83,"setString:forType:",_82,CPStringPboardType);
}
}
objj_msgSend(_80,"_clearPasteboardElement");
objj_msgSend(CPApp,"sendEvent:",_pasteboardKeyDownEvent);
_pasteboardKeyDownEvent=nil;
objj_msgSend(objj_msgSend(CPRunLoop,"currentRunLoop"),"limitDateForMode:",CPDefaultRunLoopMode);
}
}),new objj_method(sel_getUid("_clearPasteboardElement"),function(_84,_85){
with(_84){
_DOMPasteboardElement.value="";
_DOMPasteboardElement.blur();
}
}),new objj_method(sel_getUid("scrollEvent:"),function(_86,_87,_88){
with(_86){
if(_hideDOMScrollingElementTimeout){
clearTimeout(_hideDOMScrollingElementTimeout);
_hideDOMScrollingElementTimeout=nil;
}
if(!_88){
_88=window.event;
}
var _89=nil;
if(CPFeatureIsCompatible(CPJavaScriptMouseWheelValues_8_15)){
var x=_88._offsetX||0,y=_88._offsetY||0,_8a=_88.target;
while(_8a.nodeType!==1){
_8a=_8a.parentNode;
}
if(_8a.offsetParent){
do{
x+=_8a.offsetLeft;
y+=_8a.offsetTop;
}while(_8a=_8a.offsetParent);
}
_89={x:(x+((_88.clientX-8)/15)),y:(y+((_88.clientY-8)/15))};
}else{
if(_88._overrideLocation){
_89=_88._overrideLocation;
}else{
_89={x:_88.clientX,y:_88.clientY};
}
}
var _8b=0,_8c=0,_8d=0,_8e=_88.timeStamp?_88.timeStamp:new Date(),_8f=(_88.shiftKey?CPShiftKeyMask:0)|(_88.ctrlKey?CPControlKeyMask:0)|(_88.altKey?CPAlternateKeyMask:0)|(_88.metaKey?CPCommandKeyMask:0);
_DOMScrollingElement.style.visibility="visible";
_DOMScrollingElement.style.top=(_89.y-15)+"px";
_DOMScrollingElement.style.left=(_89.x-15)+"px";
_4=NO;
var _90=objj_msgSend(_86,"hitTest:",_89);
if(!_90){
return;
}
var _8d=objj_msgSend(_90,"windowNumber");
_89=objj_msgSend(_90,"convertBridgeToBase:",_89);
var _91=objj_msgSend(CPEvent,"mouseEventWithType:location:modifierFlags:timestamp:windowNumber:context:eventNumber:clickCount:pressure:",CPScrollWheel,_89,_8f,_8e,_8d,nil,-1,1,0);
_91._DOMEvent=_88;
setTimeout(function(){
var _92=_DOMScrollingElement.scrollLeft-150,_8c=_DOMScrollingElement.scrollTop-150;
if(_92||_8c){
_91._deltaX=_92;
_91._deltaY=_8c;
objj_msgSend(CPApp,"sendEvent:",_91);
}
_DOMScrollingElement.scrollLeft=150;
_DOMScrollingElement.scrollTop=150;
},0);
_hideDOMScrollingElementTimeout=setTimeout(function(){
_DOMScrollingElement.style.visibility="hidden";
},300);
}
}),new objj_method(sel_getUid("resizeEvent:"),function(_93,_94,_95){
with(_93){
if(objj_msgSend(CPPlatform,"isBrowser")){
objj_msgSend(CPApp._activeMenu,"cancelTracking");
}
var _96=objj_msgSend(_93,"contentRect").size;
objj_msgSend(_93,"updateFromNativeContentRect");
var _97=_windowLevels,_98=_windowLayers,_99=_97.length;
while(_99--){
var _9a=objj_msgSend(_98,"objectForKey:",_97[_99])._windows,_9b=_9a.length;
while(_9b--){
objj_msgSend(_9a[_9b],"resizeWithOldPlatformWindowSize:",_96);
}
}
objj_msgSend(objj_msgSend(CPRunLoop,"currentRunLoop"),"limitDateForMode:",CPDefaultRunLoopMode);
}
}),new objj_method(sel_getUid("touchEvent:"),function(_9c,_9d,_9e){
with(_9c){
if(_9e.touches&&(_9e.touches.length==1||(_9e.touches.length==0&&_9e.changedTouches.length==1))){
var _9f={};
switch(_9e.type){
case CPDOMEventTouchStart:
_9f.type=CPDOMEventMouseDown;
break;
case CPDOMEventTouchEnd:
_9f.type=CPDOMEventMouseUp;
break;
case CPDOMEventTouchMove:
_9f.type=CPDOMEventMouseMoved;
break;
case CPDOMEventTouchCancel:
_9f.type=CPDOMEventMouseUp;
break;
}
var _a0=_9e.touches.length?_9e.touches[0]:_9e.changedTouches[0];
_9f.clientX=_a0.clientX;
_9f.clientY=_a0.clientY;
_9f.timestamp=_9e.timestamp;
_9f.target=_9e.target;
_9f.shiftKey=_9f.ctrlKey=_9f.altKey=_9f.metaKey=false;
_9f.preventDefault=function(){
if(_9e.preventDefault){
_9e.preventDefault();
}
};
_9f.stopPropagation=function(){
if(_9e.stopPropagation){
_9e.stopPropagation();
}
};
objj_msgSend(_9c,"mouseEvent:",_9f);
return;
}else{
if(_9e.preventDefault){
_9e.preventDefault();
}
if(_9e.stopPropagation){
_9e.stopPropagation();
}
}
}
}),new objj_method(sel_getUid("mouseEvent:"),function(_a1,_a2,_a3){
with(_a1){
var _a4=_overriddenEventType||_a3.type;
if(_a4==="dblclick"){
_overriddenEventType=CPDOMEventMouseDown;
objj_msgSend(_a1,"mouseEvent:",_a3);
_overriddenEventType=CPDOMEventMouseUp;
objj_msgSend(_a1,"mouseEvent:",_a3);
_overriddenEventType=nil;
return;
}
var _a5,_a6={x:_a3.clientX,y:_a3.clientY},_a7=_a3.timeStamp?_a3.timeStamp:new Date(),_a8=(_a3.target||_a3.srcElement),_a9=0,_aa=(_a3.shiftKey?CPShiftKeyMask:0)|(_a3.ctrlKey?CPControlKeyMask:0)|(_a3.altKey?CPAlternateKeyMask:0)|(_a3.metaKey?CPCommandKeyMask:0);
_4=YES;
if(_mouseDownWindow){
_a9=objj_msgSend(_mouseDownWindow,"windowNumber");
}else{
var _ab=objj_msgSend(_a1,"hitTest:",_a6);
if((_a3.type===CPDOMEventMouseDown)&&_ab){
_mouseDownWindow=_ab;
}
_a9=objj_msgSend(_ab,"windowNumber");
}
if(_a9){
_a6=objj_msgSend(CPApp._windows[_a9],"convertPlatformWindowToBase:",_a6);
}
if(_a4==="mouseup"){
if(_mouseIsDown){
_a5=_ac(_a3,_mouseDownIsRightClick?CPRightMouseUp:CPLeftMouseUp,_a6,_aa,_a7,_a9,nil,-1,_2(_lastMouseUp,_a7,_a6),0,nil);
_mouseIsDown=NO;
_lastMouseUp=_a5;
_mouseDownWindow=nil;
_mouseDownIsRightClick=NO;
}
if(_DOMEventMode){
_DOMEventMode=NO;
return;
}
}else{
if(_a4==="mousedown"){
var _ad=_a3.button;
_mouseDownIsRightClick=_ad==2||(CPBrowserIsOperatingSystem(CPMacOperatingSystem)&&_ad==0&&_aa&CPControlKeyMask);
if(_a8.tagName==="INPUT"&&_a8!=_DOMFocusElement){
if(objj_msgSend(CPPlatform,"supportsDragAndDrop")){
_DOMBodyElement.setAttribute("draggable","false");
_DOMBodyElement.style["-khtml-user-drag"]="none";
}
_DOMEventMode=YES;
_mouseIsDown=YES;
objj_msgSend(CPApp,"sendEvent:",objj_msgSend(CPEvent,"mouseEventWithType:location:modifierFlags:timestamp:windowNumber:context:eventNumber:clickCount:pressure:",_mouseDownIsRightClick?CPRightMouseDown:CPLeftMouseDown,_a6,_aa,_a7,_a9,nil,-1,_2(_lastMouseDown,_a7,_a6),0));
objj_msgSend(CPApp,"sendEvent:",objj_msgSend(CPEvent,"mouseEventWithType:location:modifierFlags:timestamp:windowNumber:context:eventNumber:clickCount:pressure:",_mouseDownIsRightClick?CPRightMouseUp:CPLeftMouseUp,_a6,_aa,_a7,_a9,nil,-1,_2(_lastMouseDown,_a7,_a6),0));
return;
}else{
if(objj_msgSend(CPPlatform,"supportsDragAndDrop")){
_DOMBodyElement.setAttribute("draggable","true");
_DOMBodyElement.style["-khtml-user-drag"]="element";
}
}
_5=YES;
_a5=_ac(_a3,_mouseDownIsRightClick?CPRightMouseDown:CPLeftMouseDown,_a6,_aa,_a7,_a9,nil,-1,_2(_lastMouseDown,_a7,_a6),0,nil);
_mouseIsDown=YES;
_lastMouseDown=_a5;
}else{
if(_DOMEventMode){
return;
}
_a5=_ac(_a3,_mouseIsDown?(_mouseDownIsRightClick?CPRightMouseDragged:CPLeftMouseDragged):CPMouseMoved,_a6,_aa,_a7,_a9,nil,-1,1,0,_lastMouseEventLocation||_a6);
}
}
var _ae=objj_msgSend(objj_msgSend(CPDragServer,"sharedDragServer"),"isDragging");
if(_a5&&(!_ae||!_c)){
_a5._DOMEvent=_a3;
objj_msgSend(CPApp,"sendEvent:",_a5);
}
if(_4&&(!_c||_a4!=="mousedown"&&!_ae)){
_3(_a3,_a1);
}
var _af=NO;
for(var i=0;i<CPApp._eventListeners.length;i++){
if(CPApp._eventListeners[i]._callback!==_CPRunModalLoop){
_af=YES;
break;
}
}
_lastMouseEventLocation=_a6;
_DOMEventGuard.style.display=_af?"":"none";
objj_msgSend(objj_msgSend(CPRunLoop,"currentRunLoop"),"limitDateForMode:",CPDefaultRunLoopMode);
}
}),new objj_method(sel_getUid("contextMenuEvent:"),function(_b0,_b1,_b2){
with(_b0){
if(_5){
_3(_b2,_b0);
}
return !_5;
}
}),new objj_method(sel_getUid("orderedWindowsAtLevel:"),function(_b3,_b4,_b5){
with(_b3){
var _b6=objj_msgSend(_b3,"layerAtLevel:create:",_b5,NO);
if(!_b6){
return [];
}
return objj_msgSend(_b6,"orderedWindows");
}
}),new objj_method(sel_getUid("layerAtLevel:create:"),function(_b7,_b8,_b9,_ba){
with(_b7){
var _bb=objj_msgSend(_windowLayers,"objectForKey:",_b9);
if(!_bb&&_ba){
_bb=objj_msgSend(objj_msgSend(CPDOMWindowLayer,"alloc"),"initWithLevel:",_b9);
objj_msgSend(_windowLayers,"setObject:forKey:",_bb,_b9);
var low=0,_bc=_windowLevels.length-1,_bd;
while(low<=_bc){
_bd=FLOOR((low+_bc)/2);
if(_windowLevels[_bd]>_b9){
_bc=_bd-1;
}else{
low=_bd+1;
}
}
var _be=0;
if(_bd!==undefined){
_be=_windowLevels[_bd]>_b9?_bd:_bd+1;
}
objj_msgSend(_windowLevels,"insertObject:atIndex:",_b9,_be);
_bb._DOMElement.style.zIndex=_b9;
_DOMBodyElement.appendChild(_bb._DOMElement);
}
return _bb;
}
}),new objj_method(sel_getUid("order:window:relativeTo:"),function(_bf,_c0,_c1,_c2,_c3){
with(_bf){
objj_msgSend(CPPlatform,"initializeScreenIfNecessary");
var _c4=objj_msgSend(_bf,"layerAtLevel:create:",objj_msgSend(_c2,"level"),_c1!==CPWindowOut);
if(_c1===CPWindowOut){
return objj_msgSend(_c4,"removeWindow:",_c2);
}
var _c5=CPNotFound;
if(_c3){
_c5=_c1===CPWindowAbove?_c3._index+1:_c3._index;
}
objj_msgSend(_c4,"insertWindow:atIndex:",_c2,_c5);
}
}),new objj_method(sel_getUid("_removeLayers"),function(_c6,_c7){
with(_c6){
var _c8=_windowLevels,_c9=_windowLayers,_ca=_c8.length;
while(_ca--){
var _cb=objj_msgSend(_c9,"objectForKey:",_c8[_ca]);
_DOMBodyElement.removeChild(_cb._DOMElement);
}
}
}),new objj_method(sel_getUid("_addLayers"),function(_cc,_cd){
with(_cc){
var _ce=_windowLevels,_cf=_windowLayers,_d0=_ce.length;
while(_d0--){
var _d1=objj_msgSend(_cf,"objectForKey:",_ce[_d0]);
_DOMBodyElement.appendChild(_d1._DOMElement);
}
}
}),new objj_method(sel_getUid("_dragHitTest:pasteboard:"),function(_d2,_d3,_d4,_d5){
with(_d2){
var _d6=_windowLevels,_d7=_windowLayers,_d8=_d6.length;
while(_d8--){
if(_d6[_d8]>=CPDraggingWindowLevel){
continue;
}
var _d9=objj_msgSend(_d7,"objectForKey:",_d6[_d8])._windows,_da=_d9.length;
while(_da--){
var _db=_d9[_da];
if(objj_msgSend(_db,"_sharesChromeWithPlatformWindow")){
return objj_msgSend(_db,"_dragHitTest:pasteboard:",_d4,_d5);
}
if(objj_msgSend(_db,"containsPoint:",_d4)){
return objj_msgSend(_db,"_dragHitTest:pasteboard:",_d4,_d5);
}
}
}
return nil;
}
}),new objj_method(sel_getUid("_propagateCurrentDOMEvent:"),function(_dc,_dd,_de){
with(_dc){
_4=!_de;
}
}),new objj_method(sel_getUid("_willPropagateCurrentDOMEvent"),function(_df,_e0){
with(_df){
return !_4;
}
}),new objj_method(sel_getUid("_propagateContextMenuDOMEvent:"),function(_e1,_e2,_e3){
with(_e1){
if(_e3&&CPBrowserIsEngine(CPGeckoBrowserEngine)){
_4=!_e3;
}
_5=!_e3;
}
}),new objj_method(sel_getUid("_willPropagateContextMenuDOMEvent"),function(_e4,_e5){
with(_e4){
return _5;
}
}),new objj_method(sel_getUid("hitTest:"),function(_e6,_e7,_e8){
with(_e6){
if(_e6._only){
return _e6._only;
}
var _e9=_windowLevels,_ea=_windowLayers,_eb=_e9.length,_ec=nil;
while(_eb--&&!_ec){
var _ed=objj_msgSend(_ea,"objectForKey:",_e9[_eb])._windows,_ee=_ed.length;
while(_ee--&&!_ec){
var _ef=_ed[_ee];
if(!_ef._ignoresMouseEvents&&objj_msgSend(_ef,"containsPoint:",_e8)){
_ec=_ef;
}
}
}
return _ec;
}
})]);
class_addMethods(_e,[new objj_method(sel_getUid("visiblePlatformWindows"),function(_f0,_f1){
with(_f0){
if(objj_msgSend(objj_msgSend(CPPlatformWindow,"primaryPlatformWindow"),"isVisible")){
var set=objj_msgSend(CPSet,"setWithSet:",_1);
objj_msgSend(set,"addObject:",objj_msgSend(CPPlatformWindow,"primaryPlatformWindow"));
return set;
}else{
return _1;
}
}
}),new objj_method(sel_getUid("preventCharacterKeysFromPropagating:"),function(_f2,_f3,_f4){
with(_f2){
for(var i=_f4.length;i>0;i--){
_7[""+_f4[i-1].toLowerCase()]=YES;
}
}
}),new objj_method(sel_getUid("preventCharacterKeyFromPropagating:"),function(_f5,_f6,_f7){
with(_f5){
_7[_f7.toLowerCase()]=YES;
}
}),new objj_method(sel_getUid("clearCharacterKeysToPreventFromPropagating"),function(_f8,_f9){
with(_f8){
_7={};
}
}),new objj_method(sel_getUid("preventKeyCodesFromPropagating:"),function(_fa,_fb,_fc){
with(_fa){
for(var i=_fc.length;i>0;i--){
_6[_fc[i-1]]=YES;
}
}
}),new objj_method(sel_getUid("preventKeyCodeFromPropagating:"),function(_fd,_fe,_ff){
with(_fd){
_6[_ff]=YES;
}
}),new objj_method(sel_getUid("clearKeyCodesToPreventFromPropagating"),function(self,_100){
with(self){
_6={};
}
})]);
var _101=objj_msgSend(CPEvent,"class");
var _ac=function(_102,_103,_104,_105,_106,_107,_108,_109,_10a,_10b,_10c){
_102.isa=_101;
_102._type=_103;
_102._location=_104;
_102._modifierFlags=_105;
_102._timestamp=_106;
_102._windowNumber=_107;
_102._window=nil;
_102._context=_108;
_102._eventNumber=_109;
_102._clickCount=_10a;
_102._pressure=_10b;
if((_103==CPLeftMouseDragged)||(_103==CPRightMouseDragged)||(_103==CPMouseMoved)){
_102._deltaX=_104.x-_10c.x;
_102._deltaY=_104.y-_10c.y;
}else{
_102._deltaX=0;
_102._deltaY=0;
}
return _102;
};
var _10d=5,_10e=(typeof document!="undefined"&&document.addEventListener)?350:1000;
var _2=function(_10f,_110,_111){
if(!_10f){
return 1;
}
var _112=objj_msgSend(_10f,"locationInWindow");
return (_110-objj_msgSend(_10f,"timestamp")<_10e&&ABS(_112.x-_111.x)<_10d&&ABS(_112.y-_111.y)<_10d)?objj_msgSend(_10f,"clickCount")+1:1;
};
var _3=function(_113,_114){
_113.cancelBubble=true;
_113.returnValue=false;
if(_113.preventDefault){
_113.preventDefault();
}
if(_113.stopPropagation){
_113.stopPropagation();
}
if(_113.type===CPDOMEventMouseDown){
_114._DOMFocusElement.focus();
_114._DOMFocusElement.blur();
}
};
CPWindowObjectList=function(){
var _115=objj_msgSend(CPPlatformWindow,"visiblePlatformWindows"),_116=objj_msgSend(_115,"objectEnumerator"),_117=nil,_118=[];
while(_117=objj_msgSend(_116,"nextObject")){
var _119=_117._windowLevels,_11a=_117._windowLayers,_11b=_119.length;
while(_11b--){
var _11c=objj_msgSend(_11a,"objectForKey:",_119[_11b])._windows,_11d=_11c.length;
while(_11d--){
_118.push(_11c[_11d]);
}
}
}
return _118;
};
CPWindowList=function(){
var _11e=CPWindowObjectList(),_11f=[];
for(var i=0,_120=objj_msgSend(_11e,"count");i<_120;i++){
_11f.push(objj_msgSend(_11e[i],"windowNumber"));
}
return _11f;
};
p;26;CPPlatformWindow+DOMKeys.jt;2336;@STATIC;1.0;t;2317;
CPKeyCodes={BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229};
CPKeyCodes.firesKeyPressEvent=function(_1,_2,_3,_4,_5){
if(!CPFeatureIsCompatible(CPJavaScriptRemedialKeySupport)){
return true;
}
if(CPBrowserIsOperatingSystem(CPMacOperatingSystem)&&_5){
return CPKeyCodes.isCharacterKey(_1);
}
if(_5&&!_4){
return false;
}
if(CPBrowserIsEngine(CPInternetExplorerBrowserEngine)&&!_3&&(_4||_5)){
return false;
}
if(CPBrowserIsEngine(CPInternetExplorerBrowserEngine)&&_4&&_2==_1){
return false;
}
switch(_1){
case CPKeyCodes.ENTER:
return true;
case CPKeyCodes.ESC:
return !CPBrowserIsEngine(CPWebKitBrowserEngine);
}
return CPKeyCodes.isCharacterKey(_1);
};
CPKeyCodes.isCharacterKey=function(_6){
if(_6>=CPKeyCodes.ZERO&&_6<=CPKeyCodes.NINE){
return true;
}
if(_6>=CPKeyCodes.NUM_ZERO&&_6<=CPKeyCodes.NUM_MULTIPLY){
return true;
}
if(_6>=CPKeyCodes.A&&_6<=CPKeyCodes.Z){
return true;
}
switch(_6){
case CPKeyCodes.SPACE:
case CPKeyCodes.QUESTION_MARK:
case CPKeyCodes.NUM_PLUS:
case CPKeyCodes.NUM_MINUS:
case CPKeyCodes.NUM_PERIOD:
case CPKeyCodes.NUM_DIVISION:
case CPKeyCodes.SEMICOLON:
case CPKeyCodes.DASH:
case CPKeyCodes.EQUALS:
case CPKeyCodes.COMMA:
case CPKeyCodes.PERIOD:
case CPKeyCodes.SLASH:
case CPKeyCodes.APOSTROPHE:
case CPKeyCodes.SINGLE_QUOTE:
case CPKeyCodes.OPEN_SQUARE_BRACKET:
case CPKeyCodes.BACKSLASH:
case CPKeyCodes.CLOSE_SQUARE_BRACKET:
return true;
default:
return false;
}
};
e;